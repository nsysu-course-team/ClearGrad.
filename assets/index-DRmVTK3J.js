(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const A of document.querySelectorAll('link[rel="modulepreload"]'))s(A);new MutationObserver(A=>{for(const l of A)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(A){const l={};return A.integrity&&(l.integrity=A.integrity),A.referrerPolicy&&(l.referrerPolicy=A.referrerPolicy),A.crossOrigin==="use-credentials"?l.credentials="include":A.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(A){if(A.ep)return;A.ep=!0;const l=t(A);fetch(A.href,l)}})();var Og={exports:{}},hc={};var yw;function tj(){if(yw)return hc;yw=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,A,l){var u=null;if(l!==void 0&&(u=""+l),A.key!==void 0&&(u=""+A.key),"key"in A){l={};for(var d in A)d!=="key"&&(l[d]=A[d])}else l=A;return A=l.ref,{$$typeof:r,type:s,key:u,ref:A!==void 0?A:null,props:l}}return hc.Fragment=e,hc.jsx=t,hc.jsxs=t,hc}var bw;function rj(){return bw||(bw=1,Og.exports=tj()),Og.exports}var a=rj(),Pg={exports:{}},Ze={};var vw;function sj(){if(vw)return Ze;vw=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),v=Symbol.iterator;function N(P){return P===null||typeof P!="object"?null:(P=v&&P[v]||P["@@iterator"],typeof P=="function"?P:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,V={};function K(P,J,le){this.props=P,this.context=J,this.refs=V,this.updater=le||M}K.prototype.isReactComponent={},K.prototype.setState=function(P,J){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,J,"setState")},K.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function G(){}G.prototype=K.prototype;function z(P,J,le){this.props=P,this.context=J,this.refs=V,this.updater=le||M}var q=z.prototype=new G;q.constructor=z,S(q,K.prototype),q.isPureReactComponent=!0;var $=Array.isArray;function Y(){}var E={H:null,A:null,T:null,S:null},_=Object.prototype.hasOwnProperty;function C(P,J,le){var ge=le.ref;return{$$typeof:r,type:P,key:J,ref:ge!==void 0?ge:null,props:le}}function D(P,J){return C(P.type,J,P.props)}function j(P){return typeof P=="object"&&P!==null&&P.$$typeof===r}function Q(P){var J={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(le){return J[le]})}var U=/\/+/g;function T(P,J){return typeof P=="object"&&P!==null&&P.key!=null?Q(""+P.key):J.toString(36)}function W(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(Y,Y):(P.status="pending",P.then(function(J){P.status==="pending"&&(P.status="fulfilled",P.value=J)},function(J){P.status==="pending"&&(P.status="rejected",P.reason=J)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function H(P,J,le,ge,Ee){var Ce=typeof P;(Ce==="undefined"||Ce==="boolean")&&(P=null);var Se=!1;if(P===null)Se=!0;else switch(Ce){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(P.$$typeof){case r:case e:Se=!0;break;case x:return Se=P._init,H(Se(P._payload),J,le,ge,Ee)}}if(Se)return Ee=Ee(P),Se=ge===""?"."+T(P,0):ge,$(Ee)?(le="",Se!=null&&(le=Se.replace(U,"$&/")+"/"),H(Ee,J,le,"",function(Gt){return Gt})):Ee!=null&&(j(Ee)&&(Ee=D(Ee,le+(Ee.key==null||P&&P.key===Ee.key?"":(""+Ee.key).replace(U,"$&/")+"/")+Se)),J.push(Ee)),1;Se=0;var ut=ge===""?".":ge+":";if($(P))for(var qe=0;qe<P.length;qe++)ge=P[qe],Ce=ut+T(ge,qe),Se+=H(ge,J,le,Ce,Ee);else if(qe=N(P),typeof qe=="function")for(P=qe.call(P),qe=0;!(ge=P.next()).done;)ge=ge.value,Ce=ut+T(ge,qe++),Se+=H(ge,J,le,Ce,Ee);else if(Ce==="object"){if(typeof P.then=="function")return H(W(P),J,le,ge,Ee);throw J=String(P),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Se}function F(P,J,le){if(P==null)return P;var ge=[],Ee=0;return H(P,ge,"","",function(Ce){return J.call(le,Ce,Ee++)}),ge}function L(P){if(P._status===-1){var J=P._result;J=J(),J.then(function(le){(P._status===0||P._status===-1)&&(P._status=1,P._result=le)},function(le){(P._status===0||P._status===-1)&&(P._status=2,P._result=le)}),P._status===-1&&(P._status=0,P._result=J)}if(P._status===1)return P._result.default;throw P._result}var te=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},Ae={map:F,forEach:function(P,J,le){F(P,function(){J.apply(this,arguments)},le)},count:function(P){var J=0;return F(P,function(){J++}),J},toArray:function(P){return F(P,function(J){return J})||[]},only:function(P){if(!j(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return Ze.Activity=y,Ze.Children=Ae,Ze.Component=K,Ze.Fragment=t,Ze.Profiler=A,Ze.PureComponent=z,Ze.StrictMode=s,Ze.Suspense=f,Ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,Ze.__COMPILER_RUNTIME={__proto__:null,c:function(P){return E.H.useMemoCache(P)}},Ze.cache=function(P){return function(){return P.apply(null,arguments)}},Ze.cacheSignal=function(){return null},Ze.cloneElement=function(P,J,le){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var ge=S({},P.props),Ee=P.key;if(J!=null)for(Ce in J.key!==void 0&&(Ee=""+J.key),J)!_.call(J,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&J.ref===void 0||(ge[Ce]=J[Ce]);var Ce=arguments.length-2;if(Ce===1)ge.children=le;else if(1<Ce){for(var Se=Array(Ce),ut=0;ut<Ce;ut++)Se[ut]=arguments[ut+2];ge.children=Se}return C(P.type,Ee,ge)},Ze.createContext=function(P){return P={$$typeof:u,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:l,_context:P},P},Ze.createElement=function(P,J,le){var ge,Ee={},Ce=null;if(J!=null)for(ge in J.key!==void 0&&(Ce=""+J.key),J)_.call(J,ge)&&ge!=="key"&&ge!=="__self"&&ge!=="__source"&&(Ee[ge]=J[ge]);var Se=arguments.length-2;if(Se===1)Ee.children=le;else if(1<Se){for(var ut=Array(Se),qe=0;qe<Se;qe++)ut[qe]=arguments[qe+2];Ee.children=ut}if(P&&P.defaultProps)for(ge in Se=P.defaultProps,Se)Ee[ge]===void 0&&(Ee[ge]=Se[ge]);return C(P,Ce,Ee)},Ze.createRef=function(){return{current:null}},Ze.forwardRef=function(P){return{$$typeof:d,render:P}},Ze.isValidElement=j,Ze.lazy=function(P){return{$$typeof:x,_payload:{_status:-1,_result:P},_init:L}},Ze.memo=function(P,J){return{$$typeof:g,type:P,compare:J===void 0?null:J}},Ze.startTransition=function(P){var J=E.T,le={};E.T=le;try{var ge=P(),Ee=E.S;Ee!==null&&Ee(le,ge),typeof ge=="object"&&ge!==null&&typeof ge.then=="function"&&ge.then(Y,te)}catch(Ce){te(Ce)}finally{J!==null&&le.types!==null&&(J.types=le.types),E.T=J}},Ze.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},Ze.use=function(P){return E.H.use(P)},Ze.useActionState=function(P,J,le){return E.H.useActionState(P,J,le)},Ze.useCallback=function(P,J){return E.H.useCallback(P,J)},Ze.useContext=function(P){return E.H.useContext(P)},Ze.useDebugValue=function(){},Ze.useDeferredValue=function(P,J){return E.H.useDeferredValue(P,J)},Ze.useEffect=function(P,J){return E.H.useEffect(P,J)},Ze.useEffectEvent=function(P){return E.H.useEffectEvent(P)},Ze.useId=function(){return E.H.useId()},Ze.useImperativeHandle=function(P,J,le){return E.H.useImperativeHandle(P,J,le)},Ze.useInsertionEffect=function(P,J){return E.H.useInsertionEffect(P,J)},Ze.useLayoutEffect=function(P,J){return E.H.useLayoutEffect(P,J)},Ze.useMemo=function(P,J){return E.H.useMemo(P,J)},Ze.useOptimistic=function(P,J){return E.H.useOptimistic(P,J)},Ze.useReducer=function(P,J,le){return E.H.useReducer(P,J,le)},Ze.useRef=function(P){return E.H.useRef(P)},Ze.useState=function(P){return E.H.useState(P)},Ze.useSyncExternalStore=function(P,J,le){return E.H.useSyncExternalStore(P,J,le)},Ze.useTransition=function(){return E.H.useTransition()},Ze.version="19.2.3",Ze}var ww;function Yx(){return ww||(ww=1,Pg.exports=sj()),Pg.exports}var k=Yx(),Vg={exports:{}},fc={},zg={exports:{}},Kg={};var Bw;function nj(){return Bw||(Bw=1,(function(r){function e(H,F){var L=H.length;H.push(F);e:for(;0<L;){var te=L-1>>>1,Ae=H[te];if(0<A(Ae,F))H[te]=F,H[L]=Ae,L=te;else break e}}function t(H){return H.length===0?null:H[0]}function s(H){if(H.length===0)return null;var F=H[0],L=H.pop();if(L!==F){H[0]=L;e:for(var te=0,Ae=H.length,P=Ae>>>1;te<P;){var J=2*(te+1)-1,le=H[J],ge=J+1,Ee=H[ge];if(0>A(le,L))ge<Ae&&0>A(Ee,le)?(H[te]=Ee,H[ge]=L,te=ge):(H[te]=le,H[J]=L,te=J);else if(ge<Ae&&0>A(Ee,L))H[te]=Ee,H[ge]=L,te=ge;else break e}}return F}function A(H,F){var L=H.sortIndex-F.sortIndex;return L!==0?L:H.id-F.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();r.unstable_now=function(){return u.now()-d}}var f=[],g=[],x=1,y=null,v=3,N=!1,M=!1,S=!1,V=!1,K=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function q(H){for(var F=t(g);F!==null;){if(F.callback===null)s(g);else if(F.startTime<=H)s(g),F.sortIndex=F.expirationTime,e(f,F);else break;F=t(g)}}function $(H){if(S=!1,q(H),!M)if(t(f)!==null)M=!0,Y||(Y=!0,Q());else{var F=t(g);F!==null&&W($,F.startTime-H)}}var Y=!1,E=-1,_=5,C=-1;function D(){return V?!0:!(r.unstable_now()-C<_)}function j(){if(V=!1,Y){var H=r.unstable_now();C=H;var F=!0;try{e:{M=!1,S&&(S=!1,G(E),E=-1),N=!0;var L=v;try{t:{for(q(H),y=t(f);y!==null&&!(y.expirationTime>H&&D());){var te=y.callback;if(typeof te=="function"){y.callback=null,v=y.priorityLevel;var Ae=te(y.expirationTime<=H);if(H=r.unstable_now(),typeof Ae=="function"){y.callback=Ae,q(H),F=!0;break t}y===t(f)&&s(f),q(H)}else s(f);y=t(f)}if(y!==null)F=!0;else{var P=t(g);P!==null&&W($,P.startTime-H),F=!1}}break e}finally{y=null,v=L,N=!1}F=void 0}}finally{F?Q():Y=!1}}}var Q;if(typeof z=="function")Q=function(){z(j)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,T=U.port2;U.port1.onmessage=j,Q=function(){T.postMessage(null)}}else Q=function(){K(j,0)};function W(H,F){E=K(function(){H(r.unstable_now())},F)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(H){H.callback=null},r.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<H?Math.floor(1e3/H):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_next=function(H){switch(v){case 1:case 2:case 3:var F=3;break;default:F=v}var L=v;v=F;try{return H()}finally{v=L}},r.unstable_requestPaint=function(){V=!0},r.unstable_runWithPriority=function(H,F){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var L=v;v=H;try{return F()}finally{v=L}},r.unstable_scheduleCallback=function(H,F,L){var te=r.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?te+L:te):L=te,H){case 1:var Ae=-1;break;case 2:Ae=250;break;case 5:Ae=1073741823;break;case 4:Ae=1e4;break;default:Ae=5e3}return Ae=L+Ae,H={id:x++,callback:F,priorityLevel:H,startTime:L,expirationTime:Ae,sortIndex:-1},L>te?(H.sortIndex=L,e(g,H),t(f)===null&&H===t(g)&&(S?(G(E),E=-1):S=!0,W($,L-te))):(H.sortIndex=Ae,e(f,H),M||N||(M=!0,Y||(Y=!0,Q()))),H},r.unstable_shouldYield=D,r.unstable_wrapCallback=function(H){var F=v;return function(){var L=v;v=F;try{return H.apply(this,arguments)}finally{v=L}}}})(Kg)),Kg}var Cw;function aj(){return Cw||(Cw=1,zg.exports=nj()),zg.exports}var Gg={exports:{}},rs={};var Ew;function ij(){if(Ew)return rs;Ew=1;var r=Yx();function e(f){var g="https://react.dev/errors/"+f;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)g+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+f+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},A=Symbol.for("react.portal");function l(f,g,x){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:A,key:y==null?null:""+y,children:f,containerInfo:g,implementation:x}}var u=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,g){if(f==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return rs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,rs.createPortal=function(f,g){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(f,g,null,x)},rs.flushSync=function(f){var g=u.T,x=s.p;try{if(u.T=null,s.p=2,f)return f()}finally{u.T=g,s.p=x,s.d.f()}},rs.preconnect=function(f,g){typeof f=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(f,g))},rs.prefetchDNS=function(f){typeof f=="string"&&s.d.D(f)},rs.preinit=function(f,g){if(typeof f=="string"&&g&&typeof g.as=="string"){var x=g.as,y=d(x,g.crossOrigin),v=typeof g.integrity=="string"?g.integrity:void 0,N=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;x==="style"?s.d.S(f,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:N}):x==="script"&&s.d.X(f,{crossOrigin:y,integrity:v,fetchPriority:N,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},rs.preinitModule=function(f,g){if(typeof f=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var x=d(g.as,g.crossOrigin);s.d.M(f,{crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(f)},rs.preload=function(f,g){if(typeof f=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var x=g.as,y=d(x,g.crossOrigin);s.d.L(f,x,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},rs.preloadModule=function(f,g){if(typeof f=="string")if(g){var x=d(g.as,g.crossOrigin);s.d.m(f,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(f)},rs.requestFormReset=function(f){s.d.r(f)},rs.unstable_batchedUpdates=function(f,g){return f(g)},rs.useFormState=function(f,g,x){return u.H.useFormState(f,g,x)},rs.useFormStatus=function(){return u.H.useHostTransitionStatus()},rs.version="19.2.3",rs}var Nw;function E1(){if(Nw)return Gg.exports;Nw=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Gg.exports=ij(),Gg.exports}var Sw;function Aj(){if(Sw)return fc;Sw=1;var r=aj(),e=Yx(),t=E1();function s(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function A(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var i=n,o=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(o=i.return),n=i.return;while(n)}return i.tag===3?o:null}function u(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function d(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function f(n){if(l(n)!==n)throw Error(s(188))}function g(n){var i=n.alternate;if(!i){if(i=l(n),i===null)throw Error(s(188));return i!==n?null:n}for(var o=n,c=i;;){var m=o.return;if(m===null)break;var p=m.alternate;if(p===null){if(c=m.return,c!==null){o=c;continue}break}if(m.child===p.child){for(p=m.child;p;){if(p===o)return f(m),n;if(p===c)return f(m),i;p=p.sibling}throw Error(s(188))}if(o.return!==c.return)o=m,c=p;else{for(var w=!1,I=m.child;I;){if(I===o){w=!0,o=m,c=p;break}if(I===c){w=!0,c=m,o=p;break}I=I.sibling}if(!w){for(I=p.child;I;){if(I===o){w=!0,o=p,c=m;break}if(I===c){w=!0,c=p,o=m;break}I=I.sibling}if(!w)throw Error(s(189))}}if(o.alternate!==c)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?n:i}function x(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=x(n),i!==null)return i;n=n.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),G=Symbol.for("react.consumer"),z=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function Q(n){return n===null||typeof n!="object"?null:(n=j&&n[j]||n["@@iterator"],typeof n=="function"?n:null)}var U=Symbol.for("react.client.reference");function T(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===U?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case S:return"Fragment";case K:return"Profiler";case V:return"StrictMode";case $:return"Suspense";case Y:return"SuspenseList";case C:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case M:return"Portal";case z:return n.displayName||"Context";case G:return(n._context.displayName||"Context")+".Consumer";case q:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case E:return i=n.displayName||null,i!==null?i:T(n.type)||"Memo";case _:i=n._payload,n=n._init;try{return T(n(i))}catch{}}return null}var W=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L={pending:!1,data:null,method:null,action:null},te=[],Ae=-1;function P(n){return{current:n}}function J(n){0>Ae||(n.current=te[Ae],te[Ae]=null,Ae--)}function le(n,i){Ae++,te[Ae]=n.current,n.current=i}var ge=P(null),Ee=P(null),Ce=P(null),Se=P(null);function ut(n,i){switch(le(Ce,i),le(Ee,n),le(ge,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?Pv(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=Pv(i),n=Vv(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}J(ge),le(ge,n)}function qe(){J(ge),J(Ee),J(Ce)}function Gt(n){n.memoizedState!==null&&le(Se,n);var i=ge.current,o=Vv(i,n.type);i!==o&&(le(Ee,n),le(ge,o))}function Nt(n){Ee.current===n&&(J(ge),J(Ee)),Se.current===n&&(J(Se),lc._currentValue=L)}var he,R;function Z(n){if(he===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);he=i&&i[1]||"",R=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+he+n+R}var de=!1;function pe(n,i){if(!n||de)return"";de=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var ye=function(){throw Error()};if(Object.defineProperty(ye.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ye,[])}catch(ue){var ie=ue}Reflect.construct(n,[],ye)}else{try{ye.call()}catch(ue){ie=ue}n.call(ye.prototype)}}else{try{throw Error()}catch(ue){ie=ue}(ye=n())&&typeof ye.catch=="function"&&ye.catch(function(){})}}catch(ue){if(ue&&ie&&typeof ue.stack=="string")return[ue.stack,ie.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=c.DetermineComponentFrameRoot(),w=p[0],I=p[1];if(w&&I){var X=w.split(`
`),ae=I.split(`
`);for(m=c=0;c<X.length&&!X[c].includes("DetermineComponentFrameRoot");)c++;for(;m<ae.length&&!ae[m].includes("DetermineComponentFrameRoot");)m++;if(c===X.length||m===ae.length)for(c=X.length-1,m=ae.length-1;1<=c&&0<=m&&X[c]!==ae[m];)m--;for(;1<=c&&0<=m;c--,m--)if(X[c]!==ae[m]){if(c!==1||m!==1)do if(c--,m--,0>m||X[c]!==ae[m]){var fe=`
`+X[c].replace(" at new "," at ");return n.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",n.displayName)),fe}while(1<=c&&0<=m);break}}}finally{de=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Z(o):""}function ze(n,i){switch(n.tag){case 26:case 27:case 5:return Z(n.type);case 16:return Z("Lazy");case 13:return n.child!==i&&i!==null?Z("Suspense Fallback"):Z("Suspense");case 19:return Z("SuspenseList");case 0:case 15:return pe(n.type,!1);case 11:return pe(n.type.render,!1);case 1:return pe(n.type,!0);case 31:return Z("Activity");default:return""}}function it(n){try{var i="",o=null;do i+=ze(n,o),o=n,n=n.return;while(n);return i}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Je=Object.prototype.hasOwnProperty,De=r.unstable_scheduleCallback,Ue=r.unstable_cancelCallback,St=r.unstable_shouldYield,qs=r.unstable_requestPaint,Pt=r.unstable_now,ve=r.unstable_getCurrentPriorityLevel,Vt=r.unstable_ImmediatePriority,sr=r.unstable_UserBlockingPriority,Ht=r.unstable_NormalPriority,br=r.unstable_LowPriority,kr=r.unstable_IdlePriority,Ts=r.log,ce=r.unstable_setDisableYieldValue,Re=null,Ye=null;function nt(n){if(typeof Ts=="function"&&ce(n),Ye&&typeof Ye.setStrictMode=="function")try{Ye.setStrictMode(Re,n)}catch{}}var Oe=Math.clz32?Math.clz32:cs,tt=Math.log,dr=Math.LN2;function cs(n){return n>>>=0,n===0?32:31-(tt(n)/dr|0)|0}var ts=256,us=262144,qt=4194304;function Ys(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function ds(n,i,o){var c=n.pendingLanes;if(c===0)return 0;var m=0,p=n.suspendedLanes,w=n.pingedLanes;n=n.warmLanes;var I=c&134217727;return I!==0?(c=I&~p,c!==0?m=Ys(c):(w&=I,w!==0?m=Ys(w):o||(o=I&~n,o!==0&&(m=Ys(o))))):(I=c&~p,I!==0?m=Ys(I):w!==0?m=Ys(w):o||(o=c&~n,o!==0&&(m=Ys(o)))),m===0?0:i!==0&&i!==m&&(i&p)===0&&(p=m&-m,o=i&-i,p>=o||p===32&&(o&4194048)!==0)?i:m}function Us(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function Ha(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zA(){var n=qt;return qt<<=1,(qt&62914560)===0&&(qt=4194304),n}function Qs(n){for(var i=[],o=0;31>o;o++)i.push(n);return i}function la(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function xl(n,i,o,c,m,p){var w=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var I=n.entanglements,X=n.expirationTimes,ae=n.hiddenUpdates;for(o=w&~o;0<o;){var fe=31-Oe(o),ye=1<<fe;I[fe]=0,X[fe]=-1;var ie=ae[fe];if(ie!==null)for(ae[fe]=null,fe=0;fe<ie.length;fe++){var ue=ie[fe];ue!==null&&(ue.lane&=-536870913)}o&=~ye}c!==0&&Qn(n,c,0),p!==0&&m===0&&n.tag!==0&&(n.suspendedLanes|=p&~(w&~i))}function Qn(n,i,o){n.pendingLanes|=i,n.suspendedLanes&=~i;var c=31-Oe(i);n.entangledLanes|=i,n.entanglements[c]=n.entanglements[c]|1073741824|o&261930}function Gi(n,i){var o=n.entangledLanes|=i;for(n=n.entanglements;o;){var c=31-Oe(o),m=1<<c;m&i|n[c]&i&&(n[c]|=i),o&=~m}}function qi(n,i){var o=i&-i;return o=(o&42)!==0?1:ca(o),(o&(n.suspendedLanes|i))!==0?0:o}function ca(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Fs(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Oa(){var n=F.p;return n!==0?n:(n=window.event,n===void 0?32:dw(n.type))}function Is(n,i){var o=F.p;try{return F.p=n,i()}finally{F.p=o}}var Ds=Math.random().toString(36).slice(2),nr="__reactFiber$"+Ds,or="__reactProps$"+Ds,me="__reactContainer$"+Ds,Le="__reactEvents$"+Ds,Be="__reactListeners$"+Ds,ot="__reactHandles$"+Ds,Yt="__reactResources$"+Ds,It="__reactMarker$"+Ds;function hs(n){delete n[nr],delete n[or],delete n[Le],delete n[Be],delete n[ot]}function Xe(n){var i=n[nr];if(i)return i;for(var o=n.parentNode;o;){if(i=o[me]||o[nr]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(n=Xv(n);n!==null;){if(o=n[nr])return o;n=Xv(n)}return i}n=o,o=n.parentNode}return null}function hr(n){if(n=n[nr]||n[me]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function zt(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(s(33))}function Vr(n){var i=n[Yt];return i||(i=n[Yt]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function _t(n){n[It]=!0}var Tr=new Set,Fn={};function fs(n,i){ms(n,i),ms(n+"Capture",i)}function ms(n,i){for(Fn[n]=i,n=0;n<i.length;n++)Tr.add(i[n])}var In=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),yl={},bl={};function Bu(n){return Je.call(bl,n)?!0:Je.call(yl,n)?!1:In.test(n)?bl[n]=!0:(yl[n]=!0,!1)}function KA(n,i,o){if(Bu(i))if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+o)}}function ks(n,i,o){if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+o)}}function vr(n,i,o,c){if(c===null)n.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(i,o,""+c)}}function Rr(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Pa(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function vl(n,i,o){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,p=c.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return m.call(this)},set:function(w){o=""+w,p.call(this,w)}}),Object.defineProperty(n,i,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(w){o=""+w},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Ut(n){if(!n._valueTracker){var i=Pa(n)?"checked":"value";n._valueTracker=vl(n,i,""+n[i])}}function Yi(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var o=i.getValue(),c="";return n&&(c=Pa(n)?n.checked?"true":"false":n.value),n=c,n!==o?(i.setValue(n),!0):!1}function Dn(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var $i=/[\n"\\]/g;function bs(n){return n.replace($i,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function GA(n,i,o,c,m,p,w,I){n.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?n.type=w:n.removeAttribute("type"),i!=null?w==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+Rr(i)):n.value!==""+Rr(i)&&(n.value=""+Rr(i)):w!=="submit"&&w!=="reset"||n.removeAttribute("value"),i!=null?wl(n,w,Rr(i)):o!=null?wl(n,w,Rr(o)):c!=null&&n.removeAttribute("value"),m==null&&p!=null&&(n.defaultChecked=!!p),m!=null&&(n.checked=m&&typeof m!="function"&&typeof m!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?n.name=""+Rr(I):n.removeAttribute("name")}function Cu(n,i,o,c,m,p,w,I){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(n.type=p),i!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||i!=null)){Ut(n);return}o=o!=null?""+Rr(o):"",i=i!=null?""+Rr(i):o,I||i===n.value||(n.value=i),n.defaultValue=i}c=c??m,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=I?n.checked:!!c,n.defaultChecked=!!c,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(n.name=w),Ut(n)}function wl(n,i,o){i==="number"&&Dn(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Va(n,i,o,c){if(n=n.options,i){i={};for(var m=0;m<o.length;m++)i["$"+o[m]]=!0;for(o=0;o<n.length;o++)m=i.hasOwnProperty("$"+n[o].value),n[o].selected!==m&&(n[o].selected=m),m&&c&&(n[o].defaultSelected=!0)}else{for(o=""+Rr(o),i=null,m=0;m<n.length;m++){if(n[m].value===o){n[m].selected=!0,c&&(n[m].defaultSelected=!0);return}i!==null||n[m].disabled||(i=n[m])}i!==null&&(i.selected=!0)}}function Eu(n,i,o){if(i!=null&&(i=""+Rr(i),i!==n.value&&(n.value=i),o==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=o!=null?""+Rr(o):""}function za(n,i,o,c){if(i==null){if(c!=null){if(o!=null)throw Error(s(92));if(W(c)){if(1<c.length)throw Error(s(93));c=c[0]}o=c}o==null&&(o=""),i=o}o=Rr(i),n.defaultValue=o,c=n.textContent,c===o&&c!==""&&c!==null&&(n.value=c),Ut(n)}function vs(n,i){if(i){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=i;return}}n.textContent=i}var Nu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Bl(n,i,o){var c=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":c?n.setProperty(i,o):typeof o!="number"||o===0||Nu.has(i)?i==="float"?n.cssFloat=o:n[i]=(""+o).trim():n[i]=o+"px"}function Cl(n,i,o){if(i!=null&&typeof i!="object")throw Error(s(62));if(n=n.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var m in i)c=i[m],i.hasOwnProperty(m)&&o[m]!==c&&Bl(n,m,c)}else for(var p in i)i.hasOwnProperty(p)&&Bl(n,p,i[p])}function qA(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Su=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ka=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function YA(n){return Ka.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function mn(){}var El=null;function $s(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ga=null,kn=null;function Xi(n){var i=hr(n);if(i&&(n=i.stateNode)){var o=n[or]||null;e:switch(n=i.stateNode,i.type){case"input":if(GA(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+bs(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var c=o[i];if(c!==n&&c.form===n.form){var m=c[or]||null;if(!m)throw Error(s(90));GA(c,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(i=0;i<o.length;i++)c=o[i],c.form===n.form&&Yi(c)}break e;case"textarea":Eu(n,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Va(n,!!o.multiple,i,!1)}}}var $A=!1;function qa(n,i,o){if($A)return n(i,o);$A=!0;try{var c=n(i);return c}finally{if($A=!1,(Ga!==null||kn!==null)&&(bd(),Ga&&(i=Ga,n=kn,kn=Ga=null,Xi(i),n)))for(i=0;i<n.length;i++)Xi(n[i])}}function gn(n,i){var o=n.stateNode;if(o===null)return null;var c=o[or]||null;if(c===null)return null;o=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(s(231,i,typeof o));return o}var Xs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ji=!1;if(Xs)try{var Dt={};Object.defineProperty(Dt,"passive",{get:function(){Ji=!0}}),window.addEventListener("test",Dt,Dt),window.removeEventListener("test",Dt,Dt)}catch{Ji=!1}var Rn=null,Nl=null,Wi=null;function Sl(){if(Wi)return Wi;var n,i=Nl,o=i.length,c,m="value"in Rn?Rn.value:Rn.textContent,p=m.length;for(n=0;n<o&&i[n]===m[n];n++);var w=o-n;for(c=1;c<=w&&i[o-c]===m[p-c];c++);return Wi=m.slice(n,1<c?1-c:void 0)}function Zi(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function ua(){return!0}function pn(){return!1}function zr(n){function i(o,c,m,p,w){this._reactName=o,this._targetInst=m,this.type=c,this.nativeEvent=p,this.target=w,this.currentTarget=null;for(var I in n)n.hasOwnProperty(I)&&(o=n[I],this[I]=o?o(p):p[I]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?ua:pn,this.isPropagationStopped=pn,this}return y(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ua)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ua)},persist:function(){},isPersistent:ua}),i}var da={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mn=zr(da),Ya=y({},da,{view:0,detail:0}),_l=zr(Ya),$a,XA,Ln,JA=y({},Ya,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xa,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ln&&(Ln&&n.type==="mousemove"?($a=n.screenX-Ln.screenX,XA=n.screenY-Ln.screenY):XA=$a=0,Ln=n),$a)},movementY:function(n){return"movementY"in n?n.movementY:XA}}),jl=zr(JA),eA=y({},JA,{dataTransfer:0}),_u=zr(eA),ju=y({},Ya,{relatedTarget:0}),tA=zr(ju),Tl=y({},da,{animationName:0,elapsedTime:0,pseudoElement:0}),Tu=zr(Tl),WA=y({},da,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Uu=zr(WA),Qu=y({},da,{data:0}),Hn=zr(Qu),Fu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Iu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Du={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ku(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Du[n])?!!i[n]:!1}function Xa(){return ku}var gs=y({},Ya,{key:function(n){if(n.key){var i=Fu[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Zi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Iu[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xa,charCode:function(n){return n.type==="keypress"?Zi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Zi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ru=zr(gs),Mu=y({},JA,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ha=zr(Mu),h=y({},Ya,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xa}),b=zr(h),B=y({},da,{propertyName:0,elapsedTime:0,pseudoElement:0}),O=zr(B),se=y({},JA,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),oe=zr(se),Ne=y({},da,{newState:0,oldState:0}),rt=zr(Ne),fr=[9,13,27,32],Ct=Xs&&"CompositionEvent"in window,Zt=null;Xs&&"documentMode"in document&&(Zt=document.documentMode);var Js=Xs&&"TextEvent"in window&&!Zt,On=Xs&&(!Ct||Zt&&8<Zt&&11>=Zt),xn=" ",yn=!1;function rA(n,i){switch(n){case"keyup":return fr.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ZA(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var eo=!1;function ES(n,i){switch(n){case"compositionend":return ZA(i);case"keypress":return i.which!==32?null:(yn=!0,xn);case"textInput":return n=i.data,n===xn&&yn?null:n;default:return null}}function NS(n,i){if(eo)return n==="compositionend"||!Ct&&rA(n,i)?(n=Sl(),Wi=Nl=Rn=null,eo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return On&&i.locale!=="ko"?null:i.data;default:return null}}var SS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Z0(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!SS[n.type]:i==="textarea"}function ey(n,i,o,c){Ga?kn?kn.push(c):kn=[c]:Ga=c,i=Sd(i,"onChange"),0<i.length&&(o=new Mn("onChange","change",null,o,c),n.push({event:o,listeners:i}))}var Ul=null,Ql=null;function _S(n){kv(n,0)}function Lu(n){var i=zt(n);if(Yi(i))return n}function ty(n,i){if(n==="change")return i}var ry=!1;if(Xs){var Yf;if(Xs){var $f="oninput"in document;if(!$f){var sy=document.createElement("div");sy.setAttribute("oninput","return;"),$f=typeof sy.oninput=="function"}Yf=$f}else Yf=!1;ry=Yf&&(!document.documentMode||9<document.documentMode)}function ny(){Ul&&(Ul.detachEvent("onpropertychange",ay),Ql=Ul=null)}function ay(n){if(n.propertyName==="value"&&Lu(Ql)){var i=[];ey(i,Ql,n,$s(n)),qa(_S,i)}}function jS(n,i,o){n==="focusin"?(ny(),Ul=i,Ql=o,Ul.attachEvent("onpropertychange",ay)):n==="focusout"&&ny()}function TS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Lu(Ql)}function US(n,i){if(n==="click")return Lu(i)}function QS(n,i){if(n==="input"||n==="change")return Lu(i)}function FS(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Rs=typeof Object.is=="function"?Object.is:FS;function Fl(n,i){if(Rs(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var o=Object.keys(n),c=Object.keys(i);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var m=o[c];if(!Je.call(i,m)||!Rs(n[m],i[m]))return!1}return!0}function iy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Ay(n,i){var o=iy(n);n=0;for(var c;o;){if(o.nodeType===3){if(c=n+o.textContent.length,n<=i&&c>=i)return{node:o,offset:i-n};n=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=iy(o)}}function oy(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?oy(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function ly(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Dn(n.document);i instanceof n.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)n=i.contentWindow;else break;i=Dn(n.document)}return i}function Xf(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var IS=Xs&&"documentMode"in document&&11>=document.documentMode,to=null,Jf=null,Il=null,Wf=!1;function cy(n,i,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Wf||to==null||to!==Dn(c)||(c=to,"selectionStart"in c&&Xf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Il&&Fl(Il,c)||(Il=c,c=Sd(Jf,"onSelect"),0<c.length&&(i=new Mn("onSelect","select",null,i,o),n.push({event:i,listeners:c}),i.target=to)))}function sA(n,i){var o={};return o[n.toLowerCase()]=i.toLowerCase(),o["Webkit"+n]="webkit"+i,o["Moz"+n]="moz"+i,o}var ro={animationend:sA("Animation","AnimationEnd"),animationiteration:sA("Animation","AnimationIteration"),animationstart:sA("Animation","AnimationStart"),transitionrun:sA("Transition","TransitionRun"),transitionstart:sA("Transition","TransitionStart"),transitioncancel:sA("Transition","TransitionCancel"),transitionend:sA("Transition","TransitionEnd")},Zf={},uy={};Xs&&(uy=document.createElement("div").style,"AnimationEvent"in window||(delete ro.animationend.animation,delete ro.animationiteration.animation,delete ro.animationstart.animation),"TransitionEvent"in window||delete ro.transitionend.transition);function nA(n){if(Zf[n])return Zf[n];if(!ro[n])return n;var i=ro[n],o;for(o in i)if(i.hasOwnProperty(o)&&o in uy)return Zf[n]=i[o];return n}var dy=nA("animationend"),hy=nA("animationiteration"),fy=nA("animationstart"),DS=nA("transitionrun"),kS=nA("transitionstart"),RS=nA("transitioncancel"),my=nA("transitionend"),gy=new Map,em="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");em.push("scrollEnd");function bn(n,i){gy.set(n,i),fs(i,[n])}var Hu=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Ws=[],so=0,tm=0;function Ou(){for(var n=so,i=tm=so=0;i<n;){var o=Ws[i];Ws[i++]=null;var c=Ws[i];Ws[i++]=null;var m=Ws[i];Ws[i++]=null;var p=Ws[i];if(Ws[i++]=null,c!==null&&m!==null){var w=c.pending;w===null?m.next=m:(m.next=w.next,w.next=m),c.pending=m}p!==0&&py(o,m,p)}}function Pu(n,i,o,c){Ws[so++]=n,Ws[so++]=i,Ws[so++]=o,Ws[so++]=c,tm|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function rm(n,i,o,c){return Pu(n,i,o,c),Vu(n)}function aA(n,i){return Pu(n,null,null,i),Vu(n)}function py(n,i,o){n.lanes|=o;var c=n.alternate;c!==null&&(c.lanes|=o);for(var m=!1,p=n.return;p!==null;)p.childLanes|=o,c=p.alternate,c!==null&&(c.childLanes|=o),p.tag===22&&(n=p.stateNode,n===null||n._visibility&1||(m=!0)),n=p,p=p.return;return n.tag===3?(p=n.stateNode,m&&i!==null&&(m=31-Oe(o),n=p.hiddenUpdates,c=n[m],c===null?n[m]=[i]:c.push(i),i.lane=o|536870912),p):null}function Vu(n){if(50<rc)throw rc=0,ug=null,Error(s(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var no={};function MS(n,i,o,c){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ms(n,i,o,c){return new MS(n,i,o,c)}function sm(n){return n=n.prototype,!(!n||!n.isReactComponent)}function fa(n,i){var o=n.alternate;return o===null?(o=Ms(n.tag,i,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=i,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,i=n.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function xy(n,i){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function zu(n,i,o,c,m,p){var w=0;if(c=n,typeof n=="function")sm(n)&&(w=1);else if(typeof n=="string")w=V_(n,o,ge.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case C:return n=Ms(31,o,i,m),n.elementType=C,n.lanes=p,n;case S:return iA(o.children,m,p,i);case V:w=8,m|=24;break;case K:return n=Ms(12,o,i,m|2),n.elementType=K,n.lanes=p,n;case $:return n=Ms(13,o,i,m),n.elementType=$,n.lanes=p,n;case Y:return n=Ms(19,o,i,m),n.elementType=Y,n.lanes=p,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case z:w=10;break e;case G:w=9;break e;case q:w=11;break e;case E:w=14;break e;case _:w=16,c=null;break e}w=29,o=Error(s(130,n===null?"null":typeof n,"")),c=null}return i=Ms(w,o,i,m),i.elementType=n,i.type=c,i.lanes=p,i}function iA(n,i,o,c){return n=Ms(7,n,c,i),n.lanes=o,n}function nm(n,i,o){return n=Ms(6,n,null,i),n.lanes=o,n}function yy(n){var i=Ms(18,null,null,0);return i.stateNode=n,i}function am(n,i,o){return i=Ms(4,n.children!==null?n.children:[],n.key,i),i.lanes=o,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var by=new WeakMap;function Zs(n,i){if(typeof n=="object"&&n!==null){var o=by.get(n);return o!==void 0?o:(i={value:n,source:i,stack:it(i)},by.set(n,i),i)}return{value:n,source:i,stack:it(i)}}var ao=[],io=0,Ku=null,Dl=0,en=[],tn=0,Ja=null,Pn=1,Vn="";function ma(n,i){ao[io++]=Dl,ao[io++]=Ku,Ku=n,Dl=i}function vy(n,i,o){en[tn++]=Pn,en[tn++]=Vn,en[tn++]=Ja,Ja=n;var c=Pn;n=Vn;var m=32-Oe(c)-1;c&=~(1<<m),o+=1;var p=32-Oe(i)+m;if(30<p){var w=m-m%5;p=(c&(1<<w)-1).toString(32),c>>=w,m-=w,Pn=1<<32-Oe(i)+m|o<<m|c,Vn=p+n}else Pn=1<<p|o<<m|c,Vn=n}function im(n){n.return!==null&&(ma(n,1),vy(n,1,0))}function Am(n){for(;n===Ku;)Ku=ao[--io],ao[io]=null,Dl=ao[--io],ao[io]=null;for(;n===Ja;)Ja=en[--tn],en[tn]=null,Vn=en[--tn],en[tn]=null,Pn=en[--tn],en[tn]=null}function wy(n,i){en[tn++]=Pn,en[tn++]=Vn,en[tn++]=Ja,Pn=i.id,Vn=i.overflow,Ja=n}var Kr=null,$t=null,yt=!1,Wa=null,rn=!1,om=Error(s(519));function Za(n){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw kl(Zs(i,n)),om}function By(n){var i=n.stateNode,o=n.type,c=n.memoizedProps;switch(i[nr]=n,i[or]=c,o){case"dialog":ct("cancel",i),ct("close",i);break;case"iframe":case"object":case"embed":ct("load",i);break;case"video":case"audio":for(o=0;o<nc.length;o++)ct(nc[o],i);break;case"source":ct("error",i);break;case"img":case"image":case"link":ct("error",i),ct("load",i);break;case"details":ct("toggle",i);break;case"input":ct("invalid",i),Cu(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":ct("invalid",i);break;case"textarea":ct("invalid",i),za(i,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||c.suppressHydrationWarning===!0||Hv(i.textContent,o)?(c.popover!=null&&(ct("beforetoggle",i),ct("toggle",i)),c.onScroll!=null&&ct("scroll",i),c.onScrollEnd!=null&&ct("scrollend",i),c.onClick!=null&&(i.onclick=mn),i=!0):i=!1,i||Za(n,!0)}function Cy(n){for(Kr=n.return;Kr;)switch(Kr.tag){case 5:case 31:case 13:rn=!1;return;case 27:case 3:rn=!0;return;default:Kr=Kr.return}}function Ao(n){if(n!==Kr)return!1;if(!yt)return Cy(n),yt=!0,!1;var i=n.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Ng(n.type,n.memoizedProps)),o=!o),o&&$t&&Za(n),Cy(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));$t=$v(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));$t=$v(n)}else i===27?(i=$t,hi(n.type)?(n=Ug,Ug=null,$t=n):$t=i):$t=Kr?nn(n.stateNode.nextSibling):null;return!0}function AA(){$t=Kr=null,yt=!1}function lm(){var n=Wa;return n!==null&&(Es===null?Es=n:Es.push.apply(Es,n),Wa=null),n}function kl(n){Wa===null?Wa=[n]:Wa.push(n)}var cm=P(null),oA=null,ga=null;function ei(n,i,o){le(cm,i._currentValue),i._currentValue=o}function pa(n){n._currentValue=cm.current,J(cm)}function um(n,i,o){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===o)break;n=n.return}}function dm(n,i,o,c){var m=n.child;for(m!==null&&(m.return=n);m!==null;){var p=m.dependencies;if(p!==null){var w=m.child;p=p.firstContext;e:for(;p!==null;){var I=p;p=m;for(var X=0;X<i.length;X++)if(I.context===i[X]){p.lanes|=o,I=p.alternate,I!==null&&(I.lanes|=o),um(p.return,o,n),c||(w=null);break e}p=I.next}}else if(m.tag===18){if(w=m.return,w===null)throw Error(s(341));w.lanes|=o,p=w.alternate,p!==null&&(p.lanes|=o),um(w,o,n),w=null}else w=m.child;if(w!==null)w.return=m;else for(w=m;w!==null;){if(w===n){w=null;break}if(m=w.sibling,m!==null){m.return=w.return,w=m;break}w=w.return}m=w}}function oo(n,i,o,c){n=null;for(var m=i,p=!1;m!==null;){if(!p){if((m.flags&524288)!==0)p=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var w=m.alternate;if(w===null)throw Error(s(387));if(w=w.memoizedProps,w!==null){var I=m.type;Rs(m.pendingProps.value,w.value)||(n!==null?n.push(I):n=[I])}}else if(m===Se.current){if(w=m.alternate,w===null)throw Error(s(387));w.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(n!==null?n.push(lc):n=[lc])}m=m.return}n!==null&&dm(i,n,o,c),i.flags|=262144}function Gu(n){for(n=n.firstContext;n!==null;){if(!Rs(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function lA(n){oA=n,ga=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Gr(n){return Ey(oA,n)}function qu(n,i){return oA===null&&lA(n),Ey(n,i)}function Ey(n,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},ga===null){if(n===null)throw Error(s(308));ga=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else ga=ga.next=i;return o}var LS=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(o,c){n.push(c)}};this.abort=function(){i.aborted=!0,n.forEach(function(o){return o()})}},HS=r.unstable_scheduleCallback,OS=r.unstable_NormalPriority,wr={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function hm(){return{controller:new LS,data:new Map,refCount:0}}function Rl(n){n.refCount--,n.refCount===0&&HS(OS,function(){n.controller.abort()})}var Ml=null,fm=0,lo=0,co=null;function PS(n,i){if(Ml===null){var o=Ml=[];fm=0,lo=pg(),co={status:"pending",value:void 0,then:function(c){o.push(c)}}}return fm++,i.then(Ny,Ny),i}function Ny(){if(--fm===0&&Ml!==null){co!==null&&(co.status="fulfilled");var n=Ml;Ml=null,lo=0,co=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function VS(n,i){var o=[],c={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return n.then(function(){c.status="fulfilled",c.value=i;for(var m=0;m<o.length;m++)(0,o[m])(i)},function(m){for(c.status="rejected",c.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),c}var Sy=H.S;H.S=function(n,i){cv=Pt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&PS(n,i),Sy!==null&&Sy(n,i)};var cA=P(null);function mm(){var n=cA.current;return n!==null?n:Ot.pooledCache}function Yu(n,i){i===null?le(cA,cA.current):le(cA,i.pool)}function _y(){var n=mm();return n===null?null:{parent:wr._currentValue,pool:n}}var uo=Error(s(460)),gm=Error(s(474)),$u=Error(s(542)),Xu={then:function(){}};function jy(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Ty(n,i,o){switch(o=n[o],o===void 0?n.push(i):o!==i&&(i.then(mn,mn),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Qy(n),n;default:if(typeof i.status=="string")i.then(mn,mn);else{if(n=Ot,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=i,n.status="pending",n.then(function(c){if(i.status==="pending"){var m=i;m.status="fulfilled",m.value=c}},function(c){if(i.status==="pending"){var m=i;m.status="rejected",m.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Qy(n),n}throw dA=i,uo}}function uA(n){try{var i=n._init;return i(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(dA=o,uo):o}}var dA=null;function Uy(){if(dA===null)throw Error(s(459));var n=dA;return dA=null,n}function Qy(n){if(n===uo||n===$u)throw Error(s(483))}var ho=null,Ll=0;function Ju(n){var i=Ll;return Ll+=1,ho===null&&(ho=[]),Ty(ho,n,i)}function Hl(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Wu(n,i){throw i.$$typeof===v?Error(s(525)):(n=Object.prototype.toString.call(i),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function Fy(n){function i(re,ee){if(n){var ne=re.deletions;ne===null?(re.deletions=[ee],re.flags|=16):ne.push(ee)}}function o(re,ee){if(!n)return null;for(;ee!==null;)i(re,ee),ee=ee.sibling;return null}function c(re){for(var ee=new Map;re!==null;)re.key!==null?ee.set(re.key,re):ee.set(re.index,re),re=re.sibling;return ee}function m(re,ee){return re=fa(re,ee),re.index=0,re.sibling=null,re}function p(re,ee,ne){return re.index=ne,n?(ne=re.alternate,ne!==null?(ne=ne.index,ne<ee?(re.flags|=67108866,ee):ne):(re.flags|=67108866,ee)):(re.flags|=1048576,ee)}function w(re){return n&&re.alternate===null&&(re.flags|=67108866),re}function I(re,ee,ne,xe){return ee===null||ee.tag!==6?(ee=nm(ne,re.mode,xe),ee.return=re,ee):(ee=m(ee,ne),ee.return=re,ee)}function X(re,ee,ne,xe){var Pe=ne.type;return Pe===S?fe(re,ee,ne.props.children,xe,ne.key):ee!==null&&(ee.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===_&&uA(Pe)===ee.type)?(ee=m(ee,ne.props),Hl(ee,ne),ee.return=re,ee):(ee=zu(ne.type,ne.key,ne.props,null,re.mode,xe),Hl(ee,ne),ee.return=re,ee)}function ae(re,ee,ne,xe){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==ne.containerInfo||ee.stateNode.implementation!==ne.implementation?(ee=am(ne,re.mode,xe),ee.return=re,ee):(ee=m(ee,ne.children||[]),ee.return=re,ee)}function fe(re,ee,ne,xe,Pe){return ee===null||ee.tag!==7?(ee=iA(ne,re.mode,xe,Pe),ee.return=re,ee):(ee=m(ee,ne),ee.return=re,ee)}function ye(re,ee,ne){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return ee=nm(""+ee,re.mode,ne),ee.return=re,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case N:return ne=zu(ee.type,ee.key,ee.props,null,re.mode,ne),Hl(ne,ee),ne.return=re,ne;case M:return ee=am(ee,re.mode,ne),ee.return=re,ee;case _:return ee=uA(ee),ye(re,ee,ne)}if(W(ee)||Q(ee))return ee=iA(ee,re.mode,ne,null),ee.return=re,ee;if(typeof ee.then=="function")return ye(re,Ju(ee),ne);if(ee.$$typeof===z)return ye(re,qu(re,ee),ne);Wu(re,ee)}return null}function ie(re,ee,ne,xe){var Pe=ee!==null?ee.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return Pe!==null?null:I(re,ee,""+ne,xe);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case N:return ne.key===Pe?X(re,ee,ne,xe):null;case M:return ne.key===Pe?ae(re,ee,ne,xe):null;case _:return ne=uA(ne),ie(re,ee,ne,xe)}if(W(ne)||Q(ne))return Pe!==null?null:fe(re,ee,ne,xe,null);if(typeof ne.then=="function")return ie(re,ee,Ju(ne),xe);if(ne.$$typeof===z)return ie(re,ee,qu(re,ne),xe);Wu(re,ne)}return null}function ue(re,ee,ne,xe,Pe){if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return re=re.get(ne)||null,I(ee,re,""+xe,Pe);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case N:return re=re.get(xe.key===null?ne:xe.key)||null,X(ee,re,xe,Pe);case M:return re=re.get(xe.key===null?ne:xe.key)||null,ae(ee,re,xe,Pe);case _:return xe=uA(xe),ue(re,ee,ne,xe,Pe)}if(W(xe)||Q(xe))return re=re.get(ne)||null,fe(ee,re,xe,Pe,null);if(typeof xe.then=="function")return ue(re,ee,ne,Ju(xe),Pe);if(xe.$$typeof===z)return ue(re,ee,ne,qu(ee,xe),Pe);Wu(ee,xe)}return null}function Fe(re,ee,ne,xe){for(var Pe=null,wt=null,ke=ee,at=ee=0,ht=null;ke!==null&&at<ne.length;at++){ke.index>at?(ht=ke,ke=null):ht=ke.sibling;var Bt=ie(re,ke,ne[at],xe);if(Bt===null){ke===null&&(ke=ht);break}n&&ke&&Bt.alternate===null&&i(re,ke),ee=p(Bt,ee,at),wt===null?Pe=Bt:wt.sibling=Bt,wt=Bt,ke=ht}if(at===ne.length)return o(re,ke),yt&&ma(re,at),Pe;if(ke===null){for(;at<ne.length;at++)ke=ye(re,ne[at],xe),ke!==null&&(ee=p(ke,ee,at),wt===null?Pe=ke:wt.sibling=ke,wt=ke);return yt&&ma(re,at),Pe}for(ke=c(ke);at<ne.length;at++)ht=ue(ke,re,at,ne[at],xe),ht!==null&&(n&&ht.alternate!==null&&ke.delete(ht.key===null?at:ht.key),ee=p(ht,ee,at),wt===null?Pe=ht:wt.sibling=ht,wt=ht);return n&&ke.forEach(function(xi){return i(re,xi)}),yt&&ma(re,at),Pe}function Ke(re,ee,ne,xe){if(ne==null)throw Error(s(151));for(var Pe=null,wt=null,ke=ee,at=ee=0,ht=null,Bt=ne.next();ke!==null&&!Bt.done;at++,Bt=ne.next()){ke.index>at?(ht=ke,ke=null):ht=ke.sibling;var xi=ie(re,ke,Bt.value,xe);if(xi===null){ke===null&&(ke=ht);break}n&&ke&&xi.alternate===null&&i(re,ke),ee=p(xi,ee,at),wt===null?Pe=xi:wt.sibling=xi,wt=xi,ke=ht}if(Bt.done)return o(re,ke),yt&&ma(re,at),Pe;if(ke===null){for(;!Bt.done;at++,Bt=ne.next())Bt=ye(re,Bt.value,xe),Bt!==null&&(ee=p(Bt,ee,at),wt===null?Pe=Bt:wt.sibling=Bt,wt=Bt);return yt&&ma(re,at),Pe}for(ke=c(ke);!Bt.done;at++,Bt=ne.next())Bt=ue(ke,re,at,Bt.value,xe),Bt!==null&&(n&&Bt.alternate!==null&&ke.delete(Bt.key===null?at:Bt.key),ee=p(Bt,ee,at),wt===null?Pe=Bt:wt.sibling=Bt,wt=Bt);return n&&ke.forEach(function(ej){return i(re,ej)}),yt&&ma(re,at),Pe}function Mt(re,ee,ne,xe){if(typeof ne=="object"&&ne!==null&&ne.type===S&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case N:e:{for(var Pe=ne.key;ee!==null;){if(ee.key===Pe){if(Pe=ne.type,Pe===S){if(ee.tag===7){o(re,ee.sibling),xe=m(ee,ne.props.children),xe.return=re,re=xe;break e}}else if(ee.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===_&&uA(Pe)===ee.type){o(re,ee.sibling),xe=m(ee,ne.props),Hl(xe,ne),xe.return=re,re=xe;break e}o(re,ee);break}else i(re,ee);ee=ee.sibling}ne.type===S?(xe=iA(ne.props.children,re.mode,xe,ne.key),xe.return=re,re=xe):(xe=zu(ne.type,ne.key,ne.props,null,re.mode,xe),Hl(xe,ne),xe.return=re,re=xe)}return w(re);case M:e:{for(Pe=ne.key;ee!==null;){if(ee.key===Pe)if(ee.tag===4&&ee.stateNode.containerInfo===ne.containerInfo&&ee.stateNode.implementation===ne.implementation){o(re,ee.sibling),xe=m(ee,ne.children||[]),xe.return=re,re=xe;break e}else{o(re,ee);break}else i(re,ee);ee=ee.sibling}xe=am(ne,re.mode,xe),xe.return=re,re=xe}return w(re);case _:return ne=uA(ne),Mt(re,ee,ne,xe)}if(W(ne))return Fe(re,ee,ne,xe);if(Q(ne)){if(Pe=Q(ne),typeof Pe!="function")throw Error(s(150));return ne=Pe.call(ne),Ke(re,ee,ne,xe)}if(typeof ne.then=="function")return Mt(re,ee,Ju(ne),xe);if(ne.$$typeof===z)return Mt(re,ee,qu(re,ne),xe);Wu(re,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,ee!==null&&ee.tag===6?(o(re,ee.sibling),xe=m(ee,ne),xe.return=re,re=xe):(o(re,ee),xe=nm(ne,re.mode,xe),xe.return=re,re=xe),w(re)):o(re,ee)}return function(re,ee,ne,xe){try{Ll=0;var Pe=Mt(re,ee,ne,xe);return ho=null,Pe}catch(ke){if(ke===uo||ke===$u)throw ke;var wt=Ms(29,ke,null,re.mode);return wt.lanes=xe,wt.return=re,wt}}}var hA=Fy(!0),Iy=Fy(!1),ti=!1;function pm(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xm(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ri(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function si(n,i,o){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Et&2)!==0){var m=c.pending;return m===null?i.next=i:(i.next=m.next,m.next=i),c.pending=i,i=Vu(n),py(n,null,o),i}return Pu(n,c,i,o),Vu(n)}function Ol(n,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var c=i.lanes;c&=n.pendingLanes,o|=c,i.lanes=o,Gi(n,o)}}function ym(n,i){var o=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var m=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var w={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?m=p=w:p=p.next=w,o=o.next}while(o!==null);p===null?m=p=i:p=p.next=i}else m=p=i;o={baseState:c.baseState,firstBaseUpdate:m,lastBaseUpdate:p,shared:c.shared,callbacks:c.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=i:n.next=i,o.lastBaseUpdate=i}var bm=!1;function Pl(){if(bm){var n=co;if(n!==null)throw n}}function Vl(n,i,o,c){bm=!1;var m=n.updateQueue;ti=!1;var p=m.firstBaseUpdate,w=m.lastBaseUpdate,I=m.shared.pending;if(I!==null){m.shared.pending=null;var X=I,ae=X.next;X.next=null,w===null?p=ae:w.next=ae,w=X;var fe=n.alternate;fe!==null&&(fe=fe.updateQueue,I=fe.lastBaseUpdate,I!==w&&(I===null?fe.firstBaseUpdate=ae:I.next=ae,fe.lastBaseUpdate=X))}if(p!==null){var ye=m.baseState;w=0,fe=ae=X=null,I=p;do{var ie=I.lane&-536870913,ue=ie!==I.lane;if(ue?(dt&ie)===ie:(c&ie)===ie){ie!==0&&ie===lo&&(bm=!0),fe!==null&&(fe=fe.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var Fe=n,Ke=I;ie=i;var Mt=o;switch(Ke.tag){case 1:if(Fe=Ke.payload,typeof Fe=="function"){ye=Fe.call(Mt,ye,ie);break e}ye=Fe;break e;case 3:Fe.flags=Fe.flags&-65537|128;case 0:if(Fe=Ke.payload,ie=typeof Fe=="function"?Fe.call(Mt,ye,ie):Fe,ie==null)break e;ye=y({},ye,ie);break e;case 2:ti=!0}}ie=I.callback,ie!==null&&(n.flags|=64,ue&&(n.flags|=8192),ue=m.callbacks,ue===null?m.callbacks=[ie]:ue.push(ie))}else ue={lane:ie,tag:I.tag,payload:I.payload,callback:I.callback,next:null},fe===null?(ae=fe=ue,X=ye):fe=fe.next=ue,w|=ie;if(I=I.next,I===null){if(I=m.shared.pending,I===null)break;ue=I,I=ue.next,ue.next=null,m.lastBaseUpdate=ue,m.shared.pending=null}}while(!0);fe===null&&(X=ye),m.baseState=X,m.firstBaseUpdate=ae,m.lastBaseUpdate=fe,p===null&&(m.shared.lanes=0),oi|=w,n.lanes=w,n.memoizedState=ye}}function Dy(n,i){if(typeof n!="function")throw Error(s(191,n));n.call(i)}function ky(n,i){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Dy(o[n],i)}var fo=P(null),Zu=P(0);function Ry(n,i){n=Na,le(Zu,n),le(fo,i),Na=n|i.baseLanes}function vm(){le(Zu,Na),le(fo,fo.current)}function wm(){Na=Zu.current,J(fo),J(Zu)}var Ls=P(null),sn=null;function ni(n){var i=n.alternate;le(mr,mr.current&1),le(Ls,n),sn===null&&(i===null||fo.current!==null||i.memoizedState!==null)&&(sn=n)}function Bm(n){le(mr,mr.current),le(Ls,n),sn===null&&(sn=n)}function My(n){n.tag===22?(le(mr,mr.current),le(Ls,n),sn===null&&(sn=n)):ai()}function ai(){le(mr,mr.current),le(Ls,Ls.current)}function Hs(n){J(Ls),sn===n&&(sn=null),J(mr)}var mr=P(0);function ed(n){for(var i=n;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||jg(o)||Tg(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var xa=0,st=null,kt=null,Br=null,td=!1,mo=!1,fA=!1,rd=0,zl=0,go=null,zS=0;function lr(){throw Error(s(321))}function Cm(n,i){if(i===null)return!1;for(var o=0;o<i.length&&o<n.length;o++)if(!Rs(n[o],i[o]))return!1;return!0}function Em(n,i,o,c,m,p){return xa=p,st=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,H.H=n===null||n.memoizedState===null?vb:Hm,fA=!1,p=o(c,m),fA=!1,mo&&(p=Hy(i,o,c,m)),Ly(n),p}function Ly(n){H.H=ql;var i=kt!==null&&kt.next!==null;if(xa=0,Br=kt=st=null,td=!1,zl=0,go=null,i)throw Error(s(300));n===null||Cr||(n=n.dependencies,n!==null&&Gu(n)&&(Cr=!0))}function Hy(n,i,o,c){st=n;var m=0;do{if(mo&&(go=null),zl=0,mo=!1,25<=m)throw Error(s(301));if(m+=1,Br=kt=null,n.updateQueue!=null){var p=n.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}H.H=wb,p=i(o,c)}while(mo);return p}function KS(){var n=H.H,i=n.useState()[0];return i=typeof i.then=="function"?Kl(i):i,n=n.useState()[0],(kt!==null?kt.memoizedState:null)!==n&&(st.flags|=1024),i}function Nm(){var n=rd!==0;return rd=0,n}function Sm(n,i,o){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~o}function _m(n){if(td){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}td=!1}xa=0,Br=kt=st=null,mo=!1,zl=rd=0,go=null}function ps(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Br===null?st.memoizedState=Br=n:Br=Br.next=n,Br}function gr(){if(kt===null){var n=st.alternate;n=n!==null?n.memoizedState:null}else n=kt.next;var i=Br===null?st.memoizedState:Br.next;if(i!==null)Br=i,kt=n;else{if(n===null)throw st.alternate===null?Error(s(467)):Error(s(310));kt=n,n={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},Br===null?st.memoizedState=Br=n:Br=Br.next=n}return Br}function sd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Kl(n){var i=zl;return zl+=1,go===null&&(go=[]),n=Ty(go,n,i),i=st,(Br===null?i.memoizedState:Br.next)===null&&(i=i.alternate,H.H=i===null||i.memoizedState===null?vb:Hm),n}function nd(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Kl(n);if(n.$$typeof===z)return Gr(n)}throw Error(s(438,String(n)))}function jm(n){var i=null,o=st.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var c=st.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(m){return m.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=sd(),st.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(n),c=0;c<n;c++)o[c]=D;return i.index++,o}function ya(n,i){return typeof i=="function"?i(n):i}function ad(n){var i=gr();return Tm(i,kt,n)}function Tm(n,i,o){var c=n.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=o;var m=n.baseQueue,p=c.pending;if(p!==null){if(m!==null){var w=m.next;m.next=p.next,p.next=w}i.baseQueue=m=p,c.pending=null}if(p=n.baseState,m===null)n.memoizedState=p;else{i=m.next;var I=w=null,X=null,ae=i,fe=!1;do{var ye=ae.lane&-536870913;if(ye!==ae.lane?(dt&ye)===ye:(xa&ye)===ye){var ie=ae.revertLane;if(ie===0)X!==null&&(X=X.next={lane:0,revertLane:0,gesture:null,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),ye===lo&&(fe=!0);else if((xa&ie)===ie){ae=ae.next,ie===lo&&(fe=!0);continue}else ye={lane:0,revertLane:ae.revertLane,gesture:null,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},X===null?(I=X=ye,w=p):X=X.next=ye,st.lanes|=ie,oi|=ie;ye=ae.action,fA&&o(p,ye),p=ae.hasEagerState?ae.eagerState:o(p,ye)}else ie={lane:ye,revertLane:ae.revertLane,gesture:ae.gesture,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},X===null?(I=X=ie,w=p):X=X.next=ie,st.lanes|=ye,oi|=ye;ae=ae.next}while(ae!==null&&ae!==i);if(X===null?w=p:X.next=I,!Rs(p,n.memoizedState)&&(Cr=!0,fe&&(o=co,o!==null)))throw o;n.memoizedState=p,n.baseState=w,n.baseQueue=X,c.lastRenderedState=p}return m===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function Um(n){var i=gr(),o=i.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=n;var c=o.dispatch,m=o.pending,p=i.memoizedState;if(m!==null){o.pending=null;var w=m=m.next;do p=n(p,w.action),w=w.next;while(w!==m);Rs(p,i.memoizedState)||(Cr=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),o.lastRenderedState=p}return[p,c]}function Oy(n,i,o){var c=st,m=gr(),p=yt;if(p){if(o===void 0)throw Error(s(407));o=o()}else o=i();var w=!Rs((kt||m).memoizedState,o);if(w&&(m.memoizedState=o,Cr=!0),m=m.queue,Im(zy.bind(null,c,m,n),[n]),m.getSnapshot!==i||w||Br!==null&&Br.memoizedState.tag&1){if(c.flags|=2048,po(9,{destroy:void 0},Vy.bind(null,c,m,o,i),null),Ot===null)throw Error(s(349));p||(xa&127)!==0||Py(c,i,o)}return o}function Py(n,i,o){n.flags|=16384,n={getSnapshot:i,value:o},i=st.updateQueue,i===null?(i=sd(),st.updateQueue=i,i.stores=[n]):(o=i.stores,o===null?i.stores=[n]:o.push(n))}function Vy(n,i,o,c){i.value=o,i.getSnapshot=c,Ky(i)&&Gy(n)}function zy(n,i,o){return o(function(){Ky(i)&&Gy(n)})}function Ky(n){var i=n.getSnapshot;n=n.value;try{var o=i();return!Rs(n,o)}catch{return!0}}function Gy(n){var i=aA(n,2);i!==null&&Ns(i,n,2)}function Qm(n){var i=ps();if(typeof n=="function"){var o=n;if(n=o(),fA){nt(!0);try{o()}finally{nt(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:n},i}function qy(n,i,o,c){return n.baseState=o,Tm(n,kt,typeof c=="function"?c:ya)}function GS(n,i,o,c,m){if(od(n))throw Error(s(485));if(n=i.action,n!==null){var p={payload:m,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){p.listeners.push(w)}};H.T!==null?o(!0):p.isTransition=!1,c(p),o=i.pending,o===null?(p.next=i.pending=p,Yy(i,p)):(p.next=o.next,i.pending=o.next=p)}}function Yy(n,i){var o=i.action,c=i.payload,m=n.state;if(i.isTransition){var p=H.T,w={};H.T=w;try{var I=o(m,c),X=H.S;X!==null&&X(w,I),$y(n,i,I)}catch(ae){Fm(n,i,ae)}finally{p!==null&&w.types!==null&&(p.types=w.types),H.T=p}}else try{p=o(m,c),$y(n,i,p)}catch(ae){Fm(n,i,ae)}}function $y(n,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){Xy(n,i,c)},function(c){return Fm(n,i,c)}):Xy(n,i,o)}function Xy(n,i,o){i.status="fulfilled",i.value=o,Jy(i),n.state=o,i=n.pending,i!==null&&(o=i.next,o===i?n.pending=null:(o=o.next,i.next=o,Yy(n,o)))}function Fm(n,i,o){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=o,Jy(i),i=i.next;while(i!==c)}n.action=null}function Jy(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function Wy(n,i){return i}function Zy(n,i){if(yt){var o=Ot.formState;if(o!==null){e:{var c=st;if(yt){if($t){t:{for(var m=$t,p=rn;m.nodeType!==8;){if(!p){m=null;break t}if(m=nn(m.nextSibling),m===null){m=null;break t}}p=m.data,m=p==="F!"||p==="F"?m:null}if(m){$t=nn(m.nextSibling),c=m.data==="F!";break e}}Za(c)}c=!1}c&&(i=o[0])}}return o=ps(),o.memoizedState=o.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wy,lastRenderedState:i},o.queue=c,o=xb.bind(null,st,c),c.dispatch=o,c=Qm(!1),p=Lm.bind(null,st,!1,c.queue),c=ps(),m={state:i,dispatch:null,action:n,pending:null},c.queue=m,o=GS.bind(null,st,m,p,o),m.dispatch=o,c.memoizedState=n,[i,o,!1]}function eb(n){var i=gr();return tb(i,kt,n)}function tb(n,i,o){if(i=Tm(n,i,Wy)[0],n=ad(ya)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=Kl(i)}catch(w){throw w===uo?$u:w}else c=i;i=gr();var m=i.queue,p=m.dispatch;return o!==i.memoizedState&&(st.flags|=2048,po(9,{destroy:void 0},qS.bind(null,m,o),null)),[c,p,n]}function qS(n,i){n.action=i}function rb(n){var i=gr(),o=kt;if(o!==null)return tb(i,o,n);gr(),i=i.memoizedState,o=gr();var c=o.queue.dispatch;return o.memoizedState=n,[i,c,!1]}function po(n,i,o,c){return n={tag:n,create:o,deps:c,inst:i,next:null},i=st.updateQueue,i===null&&(i=sd(),st.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=n.next=n:(c=o.next,o.next=n,n.next=c,i.lastEffect=n),n}function sb(){return gr().memoizedState}function id(n,i,o,c){var m=ps();st.flags|=n,m.memoizedState=po(1|i,{destroy:void 0},o,c===void 0?null:c)}function Ad(n,i,o,c){var m=gr();c=c===void 0?null:c;var p=m.memoizedState.inst;kt!==null&&c!==null&&Cm(c,kt.memoizedState.deps)?m.memoizedState=po(i,p,o,c):(st.flags|=n,m.memoizedState=po(1|i,p,o,c))}function nb(n,i){id(8390656,8,n,i)}function Im(n,i){Ad(2048,8,n,i)}function YS(n){st.flags|=4;var i=st.updateQueue;if(i===null)i=sd(),st.updateQueue=i,i.events=[n];else{var o=i.events;o===null?i.events=[n]:o.push(n)}}function ab(n){var i=gr().memoizedState;return YS({ref:i,nextImpl:n}),function(){if((Et&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function ib(n,i){return Ad(4,2,n,i)}function Ab(n,i){return Ad(4,4,n,i)}function ob(n,i){if(typeof i=="function"){n=n();var o=i(n);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function lb(n,i,o){o=o!=null?o.concat([n]):null,Ad(4,4,ob.bind(null,i,n),o)}function Dm(){}function cb(n,i){var o=gr();i=i===void 0?null:i;var c=o.memoizedState;return i!==null&&Cm(i,c[1])?c[0]:(o.memoizedState=[n,i],n)}function ub(n,i){var o=gr();i=i===void 0?null:i;var c=o.memoizedState;if(i!==null&&Cm(i,c[1]))return c[0];if(c=n(),fA){nt(!0);try{n()}finally{nt(!1)}}return o.memoizedState=[c,i],c}function km(n,i,o){return o===void 0||(xa&1073741824)!==0&&(dt&261930)===0?n.memoizedState=i:(n.memoizedState=o,n=dv(),st.lanes|=n,oi|=n,o)}function db(n,i,o,c){return Rs(o,i)?o:fo.current!==null?(n=km(n,o,c),Rs(n,i)||(Cr=!0),n):(xa&42)===0||(xa&1073741824)!==0&&(dt&261930)===0?(Cr=!0,n.memoizedState=o):(n=dv(),st.lanes|=n,oi|=n,i)}function hb(n,i,o,c,m){var p=F.p;F.p=p!==0&&8>p?p:8;var w=H.T,I={};H.T=I,Lm(n,!1,i,o);try{var X=m(),ae=H.S;if(ae!==null&&ae(I,X),X!==null&&typeof X=="object"&&typeof X.then=="function"){var fe=VS(X,c);Gl(n,i,fe,Vs(n))}else Gl(n,i,c,Vs(n))}catch(ye){Gl(n,i,{then:function(){},status:"rejected",reason:ye},Vs())}finally{F.p=p,w!==null&&I.types!==null&&(w.types=I.types),H.T=w}}function $S(){}function Rm(n,i,o,c){if(n.tag!==5)throw Error(s(476));var m=fb(n).queue;hb(n,m,i,L,o===null?$S:function(){return mb(n),o(c)})}function fb(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:L,baseState:L,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:L},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:o},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function mb(n){var i=fb(n);i.next===null&&(i=n.alternate.memoizedState),Gl(n,i.next.queue,{},Vs())}function Mm(){return Gr(lc)}function gb(){return gr().memoizedState}function pb(){return gr().memoizedState}function XS(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var o=Vs();n=ri(o);var c=si(i,n,o);c!==null&&(Ns(c,i,o),Ol(c,i,o)),i={cache:hm()},n.payload=i;return}i=i.return}}function JS(n,i,o){var c=Vs();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},od(n)?yb(i,o):(o=rm(n,i,o,c),o!==null&&(Ns(o,n,c),bb(o,i,c)))}function xb(n,i,o){var c=Vs();Gl(n,i,o,c)}function Gl(n,i,o,c){var m={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(od(n))yb(i,m);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var w=i.lastRenderedState,I=p(w,o);if(m.hasEagerState=!0,m.eagerState=I,Rs(I,w))return Pu(n,i,m,0),Ot===null&&Ou(),!1}catch{}if(o=rm(n,i,m,c),o!==null)return Ns(o,n,c),bb(o,i,c),!0}return!1}function Lm(n,i,o,c){if(c={lane:2,revertLane:pg(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},od(n)){if(i)throw Error(s(479))}else i=rm(n,o,c,2),i!==null&&Ns(i,n,2)}function od(n){var i=n.alternate;return n===st||i!==null&&i===st}function yb(n,i){mo=td=!0;var o=n.pending;o===null?i.next=i:(i.next=o.next,o.next=i),n.pending=i}function bb(n,i,o){if((o&4194048)!==0){var c=i.lanes;c&=n.pendingLanes,o|=c,i.lanes=o,Gi(n,o)}}var ql={readContext:Gr,use:nd,useCallback:lr,useContext:lr,useEffect:lr,useImperativeHandle:lr,useLayoutEffect:lr,useInsertionEffect:lr,useMemo:lr,useReducer:lr,useRef:lr,useState:lr,useDebugValue:lr,useDeferredValue:lr,useTransition:lr,useSyncExternalStore:lr,useId:lr,useHostTransitionStatus:lr,useFormState:lr,useActionState:lr,useOptimistic:lr,useMemoCache:lr,useCacheRefresh:lr};ql.useEffectEvent=lr;var vb={readContext:Gr,use:nd,useCallback:function(n,i){return ps().memoizedState=[n,i===void 0?null:i],n},useContext:Gr,useEffect:nb,useImperativeHandle:function(n,i,o){o=o!=null?o.concat([n]):null,id(4194308,4,ob.bind(null,i,n),o)},useLayoutEffect:function(n,i){return id(4194308,4,n,i)},useInsertionEffect:function(n,i){id(4,2,n,i)},useMemo:function(n,i){var o=ps();i=i===void 0?null:i;var c=n();if(fA){nt(!0);try{n()}finally{nt(!1)}}return o.memoizedState=[c,i],c},useReducer:function(n,i,o){var c=ps();if(o!==void 0){var m=o(i);if(fA){nt(!0);try{o(i)}finally{nt(!1)}}}else m=i;return c.memoizedState=c.baseState=m,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:m},c.queue=n,n=n.dispatch=JS.bind(null,st,n),[c.memoizedState,n]},useRef:function(n){var i=ps();return n={current:n},i.memoizedState=n},useState:function(n){n=Qm(n);var i=n.queue,o=xb.bind(null,st,i);return i.dispatch=o,[n.memoizedState,o]},useDebugValue:Dm,useDeferredValue:function(n,i){var o=ps();return km(o,n,i)},useTransition:function(){var n=Qm(!1);return n=hb.bind(null,st,n.queue,!0,!1),ps().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,o){var c=st,m=ps();if(yt){if(o===void 0)throw Error(s(407));o=o()}else{if(o=i(),Ot===null)throw Error(s(349));(dt&127)!==0||Py(c,i,o)}m.memoizedState=o;var p={value:o,getSnapshot:i};return m.queue=p,nb(zy.bind(null,c,p,n),[n]),c.flags|=2048,po(9,{destroy:void 0},Vy.bind(null,c,p,o,i),null),o},useId:function(){var n=ps(),i=Ot.identifierPrefix;if(yt){var o=Vn,c=Pn;o=(c&~(1<<32-Oe(c)-1)).toString(32)+o,i="_"+i+"R_"+o,o=rd++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=zS++,i="_"+i+"r_"+o.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:Mm,useFormState:Zy,useActionState:Zy,useOptimistic:function(n){var i=ps();i.memoizedState=i.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Lm.bind(null,st,!0,o),o.dispatch=i,[n,i]},useMemoCache:jm,useCacheRefresh:function(){return ps().memoizedState=XS.bind(null,st)},useEffectEvent:function(n){var i=ps(),o={impl:n};return i.memoizedState=o,function(){if((Et&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}},Hm={readContext:Gr,use:nd,useCallback:cb,useContext:Gr,useEffect:Im,useImperativeHandle:lb,useInsertionEffect:ib,useLayoutEffect:Ab,useMemo:ub,useReducer:ad,useRef:sb,useState:function(){return ad(ya)},useDebugValue:Dm,useDeferredValue:function(n,i){var o=gr();return db(o,kt.memoizedState,n,i)},useTransition:function(){var n=ad(ya)[0],i=gr().memoizedState;return[typeof n=="boolean"?n:Kl(n),i]},useSyncExternalStore:Oy,useId:gb,useHostTransitionStatus:Mm,useFormState:eb,useActionState:eb,useOptimistic:function(n,i){var o=gr();return qy(o,kt,n,i)},useMemoCache:jm,useCacheRefresh:pb};Hm.useEffectEvent=ab;var wb={readContext:Gr,use:nd,useCallback:cb,useContext:Gr,useEffect:Im,useImperativeHandle:lb,useInsertionEffect:ib,useLayoutEffect:Ab,useMemo:ub,useReducer:Um,useRef:sb,useState:function(){return Um(ya)},useDebugValue:Dm,useDeferredValue:function(n,i){var o=gr();return kt===null?km(o,n,i):db(o,kt.memoizedState,n,i)},useTransition:function(){var n=Um(ya)[0],i=gr().memoizedState;return[typeof n=="boolean"?n:Kl(n),i]},useSyncExternalStore:Oy,useId:gb,useHostTransitionStatus:Mm,useFormState:rb,useActionState:rb,useOptimistic:function(n,i){var o=gr();return kt!==null?qy(o,kt,n,i):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:jm,useCacheRefresh:pb};wb.useEffectEvent=ab;function Om(n,i,o,c){i=n.memoizedState,o=o(c,i),o=o==null?i:y({},i,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Pm={enqueueSetState:function(n,i,o){n=n._reactInternals;var c=Vs(),m=ri(c);m.payload=i,o!=null&&(m.callback=o),i=si(n,m,c),i!==null&&(Ns(i,n,c),Ol(i,n,c))},enqueueReplaceState:function(n,i,o){n=n._reactInternals;var c=Vs(),m=ri(c);m.tag=1,m.payload=i,o!=null&&(m.callback=o),i=si(n,m,c),i!==null&&(Ns(i,n,c),Ol(i,n,c))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var o=Vs(),c=ri(o);c.tag=2,i!=null&&(c.callback=i),i=si(n,c,o),i!==null&&(Ns(i,n,o),Ol(i,n,o))}};function Bb(n,i,o,c,m,p,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,w):i.prototype&&i.prototype.isPureReactComponent?!Fl(o,c)||!Fl(m,p):!0}function Cb(n,i,o,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,c),i.state!==n&&Pm.enqueueReplaceState(i,i.state,null)}function mA(n,i){var o=i;if("ref"in i){o={};for(var c in i)c!=="ref"&&(o[c]=i[c])}if(n=n.defaultProps){o===i&&(o=y({},o));for(var m in n)o[m]===void 0&&(o[m]=n[m])}return o}function Eb(n){Hu(n)}function Nb(n){console.error(n)}function Sb(n){Hu(n)}function ld(n,i){try{var o=n.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function _b(n,i,o){try{var c=n.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Vm(n,i,o){return o=ri(o),o.tag=3,o.payload={element:null},o.callback=function(){ld(n,i)},o}function jb(n){return n=ri(n),n.tag=3,n}function Tb(n,i,o,c){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var p=c.value;n.payload=function(){return m(p)},n.callback=function(){_b(i,o,c)}}var w=o.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(n.callback=function(){_b(i,o,c),typeof m!="function"&&(li===null?li=new Set([this]):li.add(this));var I=c.stack;this.componentDidCatch(c.value,{componentStack:I!==null?I:""})})}function WS(n,i,o,c,m){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=o.alternate,i!==null&&oo(i,o,m,!0),o=Ls.current,o!==null){switch(o.tag){case 31:case 13:return sn===null?vd():o.alternate===null&&cr===0&&(cr=3),o.flags&=-257,o.flags|=65536,o.lanes=m,c===Xu?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([c]):i.add(c),fg(n,c,m)),!1;case 22:return o.flags|=65536,c===Xu?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([c]):o.add(c)),fg(n,c,m)),!1}throw Error(s(435,o.tag))}return fg(n,c,m),vd(),!1}if(yt)return i=Ls.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=m,c!==om&&(n=Error(s(422),{cause:c}),kl(Zs(n,o)))):(c!==om&&(i=Error(s(423),{cause:c}),kl(Zs(i,o))),n=n.current.alternate,n.flags|=65536,m&=-m,n.lanes|=m,c=Zs(c,o),m=Vm(n.stateNode,c,m),ym(n,m),cr!==4&&(cr=2)),!1;var p=Error(s(520),{cause:c});if(p=Zs(p,o),tc===null?tc=[p]:tc.push(p),cr!==4&&(cr=2),i===null)return!0;c=Zs(c,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,n=m&-m,o.lanes|=n,n=Vm(o.stateNode,c,n),ym(o,n),!1;case 1:if(i=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(li===null||!li.has(p))))return o.flags|=65536,m&=-m,o.lanes|=m,m=jb(m),Tb(m,n,o,c),ym(o,m),!1}o=o.return}while(o!==null);return!1}var zm=Error(s(461)),Cr=!1;function qr(n,i,o,c){i.child=n===null?Iy(i,null,o,c):hA(i,n.child,o,c)}function Ub(n,i,o,c,m){o=o.render;var p=i.ref;if("ref"in c){var w={};for(var I in c)I!=="ref"&&(w[I]=c[I])}else w=c;return lA(i),c=Em(n,i,o,w,p,m),I=Nm(),n!==null&&!Cr?(Sm(n,i,m),ba(n,i,m)):(yt&&I&&im(i),i.flags|=1,qr(n,i,c,m),i.child)}function Qb(n,i,o,c,m){if(n===null){var p=o.type;return typeof p=="function"&&!sm(p)&&p.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=p,Fb(n,i,p,c,m)):(n=zu(o.type,null,c,i,i.mode,m),n.ref=i.ref,n.return=i,i.child=n)}if(p=n.child,!Wm(n,m)){var w=p.memoizedProps;if(o=o.compare,o=o!==null?o:Fl,o(w,c)&&n.ref===i.ref)return ba(n,i,m)}return i.flags|=1,n=fa(p,c),n.ref=i.ref,n.return=i,i.child=n}function Fb(n,i,o,c,m){if(n!==null){var p=n.memoizedProps;if(Fl(p,c)&&n.ref===i.ref)if(Cr=!1,i.pendingProps=c=p,Wm(n,m))(n.flags&131072)!==0&&(Cr=!0);else return i.lanes=n.lanes,ba(n,i,m)}return Km(n,i,o,c,m)}function Ib(n,i,o,c){var m=c.children,p=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((i.flags&128)!==0){if(p=p!==null?p.baseLanes|o:o,n!==null){for(c=i.child=n.child,m=0;c!==null;)m=m|c.lanes|c.childLanes,c=c.sibling;c=m&~p}else c=0,i.child=null;return Db(n,i,p,o,c)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Yu(i,p!==null?p.cachePool:null),p!==null?Ry(i,p):vm(),My(i);else return c=i.lanes=536870912,Db(n,i,p!==null?p.baseLanes|o:o,o,c)}else p!==null?(Yu(i,p.cachePool),Ry(i,p),ai(),i.memoizedState=null):(n!==null&&Yu(i,null),vm(),ai());return qr(n,i,m,o),i.child}function Yl(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Db(n,i,o,c,m){var p=mm();return p=p===null?null:{parent:wr._currentValue,pool:p},i.memoizedState={baseLanes:o,cachePool:p},n!==null&&Yu(i,null),vm(),My(i),n!==null&&oo(n,i,c,!0),i.childLanes=m,null}function cd(n,i){return i=dd({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function kb(n,i,o){return hA(i,n.child,null,o),n=cd(i,i.pendingProps),n.flags|=2,Hs(i),i.memoizedState=null,n}function ZS(n,i,o){var c=i.pendingProps,m=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(yt){if(c.mode==="hidden")return n=cd(i,c),i.lanes=536870912,Yl(null,n);if(Bm(i),(n=$t)?(n=Yv(n,rn),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Ja!==null?{id:Pn,overflow:Vn}:null,retryLane:536870912,hydrationErrors:null},o=yy(n),o.return=i,i.child=o,Kr=i,$t=null)):n=null,n===null)throw Za(i);return i.lanes=536870912,null}return cd(i,c)}var p=n.memoizedState;if(p!==null){var w=p.dehydrated;if(Bm(i),m)if(i.flags&256)i.flags&=-257,i=kb(n,i,o);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(s(558));else if(Cr||oo(n,i,o,!1),m=(o&n.childLanes)!==0,Cr||m){if(c=Ot,c!==null&&(w=qi(c,o),w!==0&&w!==p.retryLane))throw p.retryLane=w,aA(n,w),Ns(c,n,w),zm;vd(),i=kb(n,i,o)}else n=p.treeContext,$t=nn(w.nextSibling),Kr=i,yt=!0,Wa=null,rn=!1,n!==null&&wy(i,n),i=cd(i,c),i.flags|=4096;return i}return n=fa(n.child,{mode:c.mode,children:c.children}),n.ref=i.ref,i.child=n,n.return=i,n}function ud(n,i){var o=i.ref;if(o===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(n===null||n.ref!==o)&&(i.flags|=4194816)}}function Km(n,i,o,c,m){return lA(i),o=Em(n,i,o,c,void 0,m),c=Nm(),n!==null&&!Cr?(Sm(n,i,m),ba(n,i,m)):(yt&&c&&im(i),i.flags|=1,qr(n,i,o,m),i.child)}function Rb(n,i,o,c,m,p){return lA(i),i.updateQueue=null,o=Hy(i,c,o,m),Ly(n),c=Nm(),n!==null&&!Cr?(Sm(n,i,p),ba(n,i,p)):(yt&&c&&im(i),i.flags|=1,qr(n,i,o,p),i.child)}function Mb(n,i,o,c,m){if(lA(i),i.stateNode===null){var p=no,w=o.contextType;typeof w=="object"&&w!==null&&(p=Gr(w)),p=new o(c,p),i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Pm,i.stateNode=p,p._reactInternals=i,p=i.stateNode,p.props=c,p.state=i.memoizedState,p.refs={},pm(i),w=o.contextType,p.context=typeof w=="object"&&w!==null?Gr(w):no,p.state=i.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(Om(i,o,w,c),p.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(w=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),w!==p.state&&Pm.enqueueReplaceState(p,p.state,null),Vl(i,c,p,m),Pl(),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(n===null){p=i.stateNode;var I=i.memoizedProps,X=mA(o,I);p.props=X;var ae=p.context,fe=o.contextType;w=no,typeof fe=="object"&&fe!==null&&(w=Gr(fe));var ye=o.getDerivedStateFromProps;fe=typeof ye=="function"||typeof p.getSnapshotBeforeUpdate=="function",I=i.pendingProps!==I,fe||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(I||ae!==w)&&Cb(i,p,c,w),ti=!1;var ie=i.memoizedState;p.state=ie,Vl(i,c,p,m),Pl(),ae=i.memoizedState,I||ie!==ae||ti?(typeof ye=="function"&&(Om(i,o,ye,c),ae=i.memoizedState),(X=ti||Bb(i,o,X,c,ie,ae,w))?(fe||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(i.flags|=4194308)):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=ae),p.props=c,p.state=ae,p.context=w,c=X):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{p=i.stateNode,xm(n,i),w=i.memoizedProps,fe=mA(o,w),p.props=fe,ye=i.pendingProps,ie=p.context,ae=o.contextType,X=no,typeof ae=="object"&&ae!==null&&(X=Gr(ae)),I=o.getDerivedStateFromProps,(ae=typeof I=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(w!==ye||ie!==X)&&Cb(i,p,c,X),ti=!1,ie=i.memoizedState,p.state=ie,Vl(i,c,p,m),Pl();var ue=i.memoizedState;w!==ye||ie!==ue||ti||n!==null&&n.dependencies!==null&&Gu(n.dependencies)?(typeof I=="function"&&(Om(i,o,I,c),ue=i.memoizedState),(fe=ti||Bb(i,o,fe,c,ie,ue,X)||n!==null&&n.dependencies!==null&&Gu(n.dependencies))?(ae||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(c,ue,X),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(c,ue,X)),typeof p.componentDidUpdate=="function"&&(i.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof p.componentDidUpdate!="function"||w===n.memoizedProps&&ie===n.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||w===n.memoizedProps&&ie===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=ue),p.props=c,p.state=ue,p.context=X,c=fe):(typeof p.componentDidUpdate!="function"||w===n.memoizedProps&&ie===n.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||w===n.memoizedProps&&ie===n.memoizedState||(i.flags|=1024),c=!1)}return p=c,ud(n,i),c=(i.flags&128)!==0,p||c?(p=i.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:p.render(),i.flags|=1,n!==null&&c?(i.child=hA(i,n.child,null,m),i.child=hA(i,null,o,m)):qr(n,i,o,m),i.memoizedState=p.state,n=i.child):n=ba(n,i,m),n}function Lb(n,i,o,c){return AA(),i.flags|=256,qr(n,i,o,c),i.child}var Gm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qm(n){return{baseLanes:n,cachePool:_y()}}function Ym(n,i,o){return n=n!==null?n.childLanes&~o:0,i&&(n|=Ps),n}function Hb(n,i,o){var c=i.pendingProps,m=!1,p=(i.flags&128)!==0,w;if((w=p)||(w=n!==null&&n.memoizedState===null?!1:(mr.current&2)!==0),w&&(m=!0,i.flags&=-129),w=(i.flags&32)!==0,i.flags&=-33,n===null){if(yt){if(m?ni(i):ai(),(n=$t)?(n=Yv(n,rn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Ja!==null?{id:Pn,overflow:Vn}:null,retryLane:536870912,hydrationErrors:null},o=yy(n),o.return=i,i.child=o,Kr=i,$t=null)):n=null,n===null)throw Za(i);return Tg(n)?i.lanes=32:i.lanes=536870912,null}var I=c.children;return c=c.fallback,m?(ai(),m=i.mode,I=dd({mode:"hidden",children:I},m),c=iA(c,m,o,null),I.return=i,c.return=i,I.sibling=c,i.child=I,c=i.child,c.memoizedState=qm(o),c.childLanes=Ym(n,w,o),i.memoizedState=Gm,Yl(null,c)):(ni(i),$m(i,I))}var X=n.memoizedState;if(X!==null&&(I=X.dehydrated,I!==null)){if(p)i.flags&256?(ni(i),i.flags&=-257,i=Xm(n,i,o)):i.memoizedState!==null?(ai(),i.child=n.child,i.flags|=128,i=null):(ai(),I=c.fallback,m=i.mode,c=dd({mode:"visible",children:c.children},m),I=iA(I,m,o,null),I.flags|=2,c.return=i,I.return=i,c.sibling=I,i.child=c,hA(i,n.child,null,o),c=i.child,c.memoizedState=qm(o),c.childLanes=Ym(n,w,o),i.memoizedState=Gm,i=Yl(null,c));else if(ni(i),Tg(I)){if(w=I.nextSibling&&I.nextSibling.dataset,w)var ae=w.dgst;w=ae,c=Error(s(419)),c.stack="",c.digest=w,kl({value:c,source:null,stack:null}),i=Xm(n,i,o)}else if(Cr||oo(n,i,o,!1),w=(o&n.childLanes)!==0,Cr||w){if(w=Ot,w!==null&&(c=qi(w,o),c!==0&&c!==X.retryLane))throw X.retryLane=c,aA(n,c),Ns(w,n,c),zm;jg(I)||vd(),i=Xm(n,i,o)}else jg(I)?(i.flags|=192,i.child=n.child,i=null):(n=X.treeContext,$t=nn(I.nextSibling),Kr=i,yt=!0,Wa=null,rn=!1,n!==null&&wy(i,n),i=$m(i,c.children),i.flags|=4096);return i}return m?(ai(),I=c.fallback,m=i.mode,X=n.child,ae=X.sibling,c=fa(X,{mode:"hidden",children:c.children}),c.subtreeFlags=X.subtreeFlags&65011712,ae!==null?I=fa(ae,I):(I=iA(I,m,o,null),I.flags|=2),I.return=i,c.return=i,c.sibling=I,i.child=c,Yl(null,c),c=i.child,I=n.child.memoizedState,I===null?I=qm(o):(m=I.cachePool,m!==null?(X=wr._currentValue,m=m.parent!==X?{parent:X,pool:X}:m):m=_y(),I={baseLanes:I.baseLanes|o,cachePool:m}),c.memoizedState=I,c.childLanes=Ym(n,w,o),i.memoizedState=Gm,Yl(n.child,c)):(ni(i),o=n.child,n=o.sibling,o=fa(o,{mode:"visible",children:c.children}),o.return=i,o.sibling=null,n!==null&&(w=i.deletions,w===null?(i.deletions=[n],i.flags|=16):w.push(n)),i.child=o,i.memoizedState=null,o)}function $m(n,i){return i=dd({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function dd(n,i){return n=Ms(22,n,null,i),n.lanes=0,n}function Xm(n,i,o){return hA(i,n.child,null,o),n=$m(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Ob(n,i,o){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),um(n.return,i,o)}function Jm(n,i,o,c,m,p){var w=n.memoizedState;w===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:m,treeForkCount:p}:(w.isBackwards=i,w.rendering=null,w.renderingStartTime=0,w.last=c,w.tail=o,w.tailMode=m,w.treeForkCount=p)}function Pb(n,i,o){var c=i.pendingProps,m=c.revealOrder,p=c.tail;c=c.children;var w=mr.current,I=(w&2)!==0;if(I?(w=w&1|2,i.flags|=128):w&=1,le(mr,w),qr(n,i,c,o),c=yt?Dl:0,!I&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Ob(n,o,i);else if(n.tag===19)Ob(n,o,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(m){case"forwards":for(o=i.child,m=null;o!==null;)n=o.alternate,n!==null&&ed(n)===null&&(m=o),o=o.sibling;o=m,o===null?(m=i.child,i.child=null):(m=o.sibling,o.sibling=null),Jm(i,!1,m,o,p,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,m=i.child,i.child=null;m!==null;){if(n=m.alternate,n!==null&&ed(n)===null){i.child=m;break}n=m.sibling,m.sibling=o,o=m,m=n}Jm(i,!0,o,null,p,c);break;case"together":Jm(i,!1,null,null,void 0,c);break;default:i.memoizedState=null}return i.child}function ba(n,i,o){if(n!==null&&(i.dependencies=n.dependencies),oi|=i.lanes,(o&i.childLanes)===0)if(n!==null){if(oo(n,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(s(153));if(i.child!==null){for(n=i.child,o=fa(n,n.pendingProps),i.child=o,o.return=i;n.sibling!==null;)n=n.sibling,o=o.sibling=fa(n,n.pendingProps),o.return=i;o.sibling=null}return i.child}function Wm(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Gu(n)))}function e_(n,i,o){switch(i.tag){case 3:ut(i,i.stateNode.containerInfo),ei(i,wr,n.memoizedState.cache),AA();break;case 27:case 5:Gt(i);break;case 4:ut(i,i.stateNode.containerInfo);break;case 10:ei(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Bm(i),null;break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(ni(i),i.flags|=128,null):(o&i.child.childLanes)!==0?Hb(n,i,o):(ni(i),n=ba(n,i,o),n!==null?n.sibling:null);ni(i);break;case 19:var m=(n.flags&128)!==0;if(c=(o&i.childLanes)!==0,c||(oo(n,i,o,!1),c=(o&i.childLanes)!==0),m){if(c)return Pb(n,i,o);i.flags|=128}if(m=i.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),le(mr,mr.current),c)break;return null;case 22:return i.lanes=0,Ib(n,i,o,i.pendingProps);case 24:ei(i,wr,n.memoizedState.cache)}return ba(n,i,o)}function Vb(n,i,o){if(n!==null)if(n.memoizedProps!==i.pendingProps)Cr=!0;else{if(!Wm(n,o)&&(i.flags&128)===0)return Cr=!1,e_(n,i,o);Cr=(n.flags&131072)!==0}else Cr=!1,yt&&(i.flags&1048576)!==0&&vy(i,Dl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var c=i.pendingProps;if(n=uA(i.elementType),i.type=n,typeof n=="function")sm(n)?(c=mA(n,c),i.tag=1,i=Mb(null,i,n,c,o)):(i.tag=0,i=Km(null,i,n,c,o));else{if(n!=null){var m=n.$$typeof;if(m===q){i.tag=11,i=Ub(null,i,n,c,o);break e}else if(m===E){i.tag=14,i=Qb(null,i,n,c,o);break e}}throw i=T(n)||n,Error(s(306,i,""))}}return i;case 0:return Km(n,i,i.type,i.pendingProps,o);case 1:return c=i.type,m=mA(c,i.pendingProps),Mb(n,i,c,m,o);case 3:e:{if(ut(i,i.stateNode.containerInfo),n===null)throw Error(s(387));c=i.pendingProps;var p=i.memoizedState;m=p.element,xm(n,i),Vl(i,c,null,o);var w=i.memoizedState;if(c=w.cache,ei(i,wr,c),c!==p.cache&&dm(i,[wr],o,!0),Pl(),c=w.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:w.cache},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){i=Lb(n,i,c,o);break e}else if(c!==m){m=Zs(Error(s(424)),i),kl(m),i=Lb(n,i,c,o);break e}else for(n=i.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,$t=nn(n.firstChild),Kr=i,yt=!0,Wa=null,rn=!0,o=Iy(i,null,c,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(AA(),c===m){i=ba(n,i,o);break e}qr(n,i,c,o)}i=i.child}return i;case 26:return ud(n,i),n===null?(o=ew(i.type,null,i.pendingProps,null))?i.memoizedState=o:yt||(o=i.type,n=i.pendingProps,c=_d(Ce.current).createElement(o),c[nr]=i,c[or]=n,Yr(c,o,n),_t(c),i.stateNode=c):i.memoizedState=ew(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Gt(i),n===null&&yt&&(c=i.stateNode=Jv(i.type,i.pendingProps,Ce.current),Kr=i,rn=!0,m=$t,hi(i.type)?(Ug=m,$t=nn(c.firstChild)):$t=m),qr(n,i,i.pendingProps.children,o),ud(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&yt&&((m=c=$t)&&(c=T_(c,i.type,i.pendingProps,rn),c!==null?(i.stateNode=c,Kr=i,$t=nn(c.firstChild),rn=!1,m=!0):m=!1),m||Za(i)),Gt(i),m=i.type,p=i.pendingProps,w=n!==null?n.memoizedProps:null,c=p.children,Ng(m,p)?c=null:w!==null&&Ng(m,w)&&(i.flags|=32),i.memoizedState!==null&&(m=Em(n,i,KS,null,null,o),lc._currentValue=m),ud(n,i),qr(n,i,c,o),i.child;case 6:return n===null&&yt&&((n=o=$t)&&(o=U_(o,i.pendingProps,rn),o!==null?(i.stateNode=o,Kr=i,$t=null,n=!0):n=!1),n||Za(i)),null;case 13:return Hb(n,i,o);case 4:return ut(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=hA(i,null,c,o):qr(n,i,c,o),i.child;case 11:return Ub(n,i,i.type,i.pendingProps,o);case 7:return qr(n,i,i.pendingProps,o),i.child;case 8:return qr(n,i,i.pendingProps.children,o),i.child;case 12:return qr(n,i,i.pendingProps.children,o),i.child;case 10:return c=i.pendingProps,ei(i,i.type,c.value),qr(n,i,c.children,o),i.child;case 9:return m=i.type._context,c=i.pendingProps.children,lA(i),m=Gr(m),c=c(m),i.flags|=1,qr(n,i,c,o),i.child;case 14:return Qb(n,i,i.type,i.pendingProps,o);case 15:return Fb(n,i,i.type,i.pendingProps,o);case 19:return Pb(n,i,o);case 31:return ZS(n,i,o);case 22:return Ib(n,i,o,i.pendingProps);case 24:return lA(i),c=Gr(wr),n===null?(m=mm(),m===null&&(m=Ot,p=hm(),m.pooledCache=p,p.refCount++,p!==null&&(m.pooledCacheLanes|=o),m=p),i.memoizedState={parent:c,cache:m},pm(i),ei(i,wr,m)):((n.lanes&o)!==0&&(xm(n,i),Vl(i,null,null,o),Pl()),m=n.memoizedState,p=i.memoizedState,m.parent!==c?(m={parent:c,cache:c},i.memoizedState=m,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=m),ei(i,wr,c)):(c=p.cache,ei(i,wr,c),c!==m.cache&&dm(i,[wr],o,!0))),qr(n,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function va(n){n.flags|=4}function Zm(n,i,o,c,m){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(m&335544128)===m)if(n.stateNode.complete)n.flags|=8192;else if(gv())n.flags|=8192;else throw dA=Xu,gm}else n.flags&=-16777217}function zb(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!aw(i))if(gv())n.flags|=8192;else throw dA=Xu,gm}function hd(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?zA():536870912,n.lanes|=i,vo|=i)}function $l(n,i){if(!yt)switch(n.tailMode){case"hidden":i=n.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Xt(n){var i=n.alternate!==null&&n.alternate.child===n.child,o=0,c=0;if(i)for(var m=n.child;m!==null;)o|=m.lanes|m.childLanes,c|=m.subtreeFlags&65011712,c|=m.flags&65011712,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)o|=m.lanes|m.childLanes,c|=m.subtreeFlags,c|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=c,n.childLanes=o,i}function t_(n,i,o){var c=i.pendingProps;switch(Am(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xt(i),null;case 1:return Xt(i),null;case 3:return o=i.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),pa(wr),qe(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Ao(i)?va(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,lm())),Xt(i),null;case 26:var m=i.type,p=i.memoizedState;return n===null?(va(i),p!==null?(Xt(i),zb(i,p)):(Xt(i),Zm(i,m,null,c,o))):p?p!==n.memoizedState?(va(i),Xt(i),zb(i,p)):(Xt(i),i.flags&=-16777217):(n=n.memoizedProps,n!==c&&va(i),Xt(i),Zm(i,m,n,c,o)),null;case 27:if(Nt(i),o=Ce.current,m=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==c&&va(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return Xt(i),null}n=ge.current,Ao(i)?By(i):(n=Jv(m,c,o),i.stateNode=n,va(i))}return Xt(i),null;case 5:if(Nt(i),m=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==c&&va(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return Xt(i),null}if(p=ge.current,Ao(i))By(i);else{var w=_d(Ce.current);switch(p){case 1:p=w.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:p=w.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":p=w.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":p=w.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":p=w.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof c.is=="string"?w.createElement("select",{is:c.is}):w.createElement("select"),c.multiple?p.multiple=!0:c.size&&(p.size=c.size);break;default:p=typeof c.is=="string"?w.createElement(m,{is:c.is}):w.createElement(m)}}p[nr]=i,p[or]=c;e:for(w=i.child;w!==null;){if(w.tag===5||w.tag===6)p.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===i)break e;for(;w.sibling===null;){if(w.return===null||w.return===i)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}i.stateNode=p;e:switch(Yr(p,m,c),m){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&va(i)}}return Xt(i),Zm(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,o),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==c&&va(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(s(166));if(n=Ce.current,Ao(i)){if(n=i.stateNode,o=i.memoizedProps,c=null,m=Kr,m!==null)switch(m.tag){case 27:case 5:c=m.memoizedProps}n[nr]=i,n=!!(n.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||Hv(n.nodeValue,o)),n||Za(i,!0)}else n=_d(n).createTextNode(c),n[nr]=i,i.stateNode=n}return Xt(i),null;case 31:if(o=i.memoizedState,n===null||n.memoizedState!==null){if(c=Ao(i),o!==null){if(n===null){if(!c)throw Error(s(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[nr]=i}else AA(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Xt(i),n=!1}else o=lm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return i.flags&256?(Hs(i),i):(Hs(i),null);if((i.flags&128)!==0)throw Error(s(558))}return Xt(i),null;case 13:if(c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(m=Ao(i),c!==null&&c.dehydrated!==null){if(n===null){if(!m)throw Error(s(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));m[nr]=i}else AA(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Xt(i),m=!1}else m=lm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=m),m=!0;if(!m)return i.flags&256?(Hs(i),i):(Hs(i),null)}return Hs(i),(i.flags&128)!==0?(i.lanes=o,i):(o=c!==null,n=n!==null&&n.memoizedState!==null,o&&(c=i.child,m=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(m=c.alternate.memoizedState.cachePool.pool),p=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),p!==m&&(c.flags|=2048)),o!==n&&o&&(i.child.flags|=8192),hd(i,i.updateQueue),Xt(i),null);case 4:return qe(),n===null&&vg(i.stateNode.containerInfo),Xt(i),null;case 10:return pa(i.type),Xt(i),null;case 19:if(J(mr),c=i.memoizedState,c===null)return Xt(i),null;if(m=(i.flags&128)!==0,p=c.rendering,p===null)if(m)$l(c,!1);else{if(cr!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(p=ed(n),p!==null){for(i.flags|=128,$l(c,!1),n=p.updateQueue,i.updateQueue=n,hd(i,n),i.subtreeFlags=0,n=o,o=i.child;o!==null;)xy(o,n),o=o.sibling;return le(mr,mr.current&1|2),yt&&ma(i,c.treeForkCount),i.child}n=n.sibling}c.tail!==null&&Pt()>xd&&(i.flags|=128,m=!0,$l(c,!1),i.lanes=4194304)}else{if(!m)if(n=ed(p),n!==null){if(i.flags|=128,m=!0,n=n.updateQueue,i.updateQueue=n,hd(i,n),$l(c,!0),c.tail===null&&c.tailMode==="hidden"&&!p.alternate&&!yt)return Xt(i),null}else 2*Pt()-c.renderingStartTime>xd&&o!==536870912&&(i.flags|=128,m=!0,$l(c,!1),i.lanes=4194304);c.isBackwards?(p.sibling=i.child,i.child=p):(n=c.last,n!==null?n.sibling=p:i.child=p,c.last=p)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=Pt(),n.sibling=null,o=mr.current,le(mr,m?o&1|2:o&1),yt&&ma(i,c.treeForkCount),n):(Xt(i),null);case 22:case 23:return Hs(i),wm(),c=i.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(o&536870912)!==0&&(i.flags&128)===0&&(Xt(i),i.subtreeFlags&6&&(i.flags|=8192)):Xt(i),o=i.updateQueue,o!==null&&hd(i,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==o&&(i.flags|=2048),n!==null&&J(cA),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),pa(wr),Xt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function r_(n,i){switch(Am(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return pa(wr),qe(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Nt(i),null;case 31:if(i.memoizedState!==null){if(Hs(i),i.alternate===null)throw Error(s(340));AA()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(Hs(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(s(340));AA()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return J(mr),null;case 4:return qe(),null;case 10:return pa(i.type),null;case 22:case 23:return Hs(i),wm(),n!==null&&J(cA),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return pa(wr),null;case 25:return null;default:return null}}function Kb(n,i){switch(Am(i),i.tag){case 3:pa(wr),qe();break;case 26:case 27:case 5:Nt(i);break;case 4:qe();break;case 31:i.memoizedState!==null&&Hs(i);break;case 13:Hs(i);break;case 19:J(mr);break;case 10:pa(i.type);break;case 22:case 23:Hs(i),wm(),n!==null&&J(cA);break;case 24:pa(wr)}}function Xl(n,i){try{var o=i.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var m=c.next;o=m;do{if((o.tag&n)===n){c=void 0;var p=o.create,w=o.inst;c=p(),w.destroy=c}o=o.next}while(o!==m)}}catch(I){Ft(i,i.return,I)}}function ii(n,i,o){try{var c=i.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var p=m.next;c=p;do{if((c.tag&n)===n){var w=c.inst,I=w.destroy;if(I!==void 0){w.destroy=void 0,m=i;var X=o,ae=I;try{ae()}catch(fe){Ft(m,X,fe)}}}c=c.next}while(c!==p)}}catch(fe){Ft(i,i.return,fe)}}function Gb(n){var i=n.updateQueue;if(i!==null){var o=n.stateNode;try{ky(i,o)}catch(c){Ft(n,n.return,c)}}}function qb(n,i,o){o.props=mA(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(c){Ft(n,i,c)}}function Jl(n,i){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof o=="function"?n.refCleanup=o(c):o.current=c}}catch(m){Ft(n,i,m)}}function zn(n,i){var o=n.ref,c=n.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(m){Ft(n,i,m)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){Ft(n,i,m)}else o.current=null}function Yb(n){var i=n.type,o=n.memoizedProps,c=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(m){Ft(n,n.return,m)}}function eg(n,i,o){try{var c=n.stateNode;C_(c,n.type,o,i),c[or]=i}catch(m){Ft(n,n.return,m)}}function $b(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&hi(n.type)||n.tag===4}function tg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||$b(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&hi(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function rg(n,i,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(n),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=mn));else if(c!==4&&(c===27&&hi(n.type)&&(o=n.stateNode,i=null),n=n.child,n!==null))for(rg(n,i,o),n=n.sibling;n!==null;)rg(n,i,o),n=n.sibling}function fd(n,i,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?o.insertBefore(n,i):o.appendChild(n);else if(c!==4&&(c===27&&hi(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(fd(n,i,o),n=n.sibling;n!==null;)fd(n,i,o),n=n.sibling}function Xb(n){var i=n.stateNode,o=n.memoizedProps;try{for(var c=n.type,m=i.attributes;m.length;)i.removeAttributeNode(m[0]);Yr(i,c,o),i[nr]=n,i[or]=o}catch(p){Ft(n,n.return,p)}}var wa=!1,Er=!1,sg=!1,Jb=typeof WeakSet=="function"?WeakSet:Set,Mr=null;function s_(n,i){if(n=n.containerInfo,Cg=Dd,n=ly(n),Xf(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var m=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var w=0,I=-1,X=-1,ae=0,fe=0,ye=n,ie=null;t:for(;;){for(var ue;ye!==o||m!==0&&ye.nodeType!==3||(I=w+m),ye!==p||c!==0&&ye.nodeType!==3||(X=w+c),ye.nodeType===3&&(w+=ye.nodeValue.length),(ue=ye.firstChild)!==null;)ie=ye,ye=ue;for(;;){if(ye===n)break t;if(ie===o&&++ae===m&&(I=w),ie===p&&++fe===c&&(X=w),(ue=ye.nextSibling)!==null)break;ye=ie,ie=ye.parentNode}ye=ue}o=I===-1||X===-1?null:{start:I,end:X}}else o=null}o=o||{start:0,end:0}}else o=null;for(Eg={focusedElem:n,selectionRange:o},Dd=!1,Mr=i;Mr!==null;)if(i=Mr,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Mr=n;else for(;Mr!==null;){switch(i=Mr,p=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)m=n[o],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&p!==null){n=void 0,o=i,m=p.memoizedProps,p=p.memoizedState,c=o.stateNode;try{var Fe=mA(o.type,m);n=c.getSnapshotBeforeUpdate(Fe,p),c.__reactInternalSnapshotBeforeUpdate=n}catch(Ke){Ft(o,o.return,Ke)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,o=n.nodeType,o===9)_g(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":_g(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=i.sibling,n!==null){n.return=i.return,Mr=n;break}Mr=i.return}}function Wb(n,i,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Ca(n,o),c&4&&Xl(5,o);break;case 1:if(Ca(n,o),c&4)if(n=o.stateNode,i===null)try{n.componentDidMount()}catch(w){Ft(o,o.return,w)}else{var m=mA(o.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(m,i,n.__reactInternalSnapshotBeforeUpdate)}catch(w){Ft(o,o.return,w)}}c&64&&Gb(o),c&512&&Jl(o,o.return);break;case 3:if(Ca(n,o),c&64&&(n=o.updateQueue,n!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{ky(n,i)}catch(w){Ft(o,o.return,w)}}break;case 27:i===null&&c&4&&Xb(o);case 26:case 5:Ca(n,o),i===null&&c&4&&Yb(o),c&512&&Jl(o,o.return);break;case 12:Ca(n,o);break;case 31:Ca(n,o),c&4&&tv(n,o);break;case 13:Ca(n,o),c&4&&rv(n,o),c&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=d_.bind(null,o),Q_(n,o))));break;case 22:if(c=o.memoizedState!==null||wa,!c){i=i!==null&&i.memoizedState!==null||Er,m=wa;var p=Er;wa=c,(Er=i)&&!p?Ea(n,o,(o.subtreeFlags&8772)!==0):Ca(n,o),wa=m,Er=p}break;case 30:break;default:Ca(n,o)}}function Zb(n){var i=n.alternate;i!==null&&(n.alternate=null,Zb(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&hs(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var er=null,ws=!1;function Ba(n,i,o){for(o=o.child;o!==null;)ev(n,i,o),o=o.sibling}function ev(n,i,o){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(Re,o)}catch{}switch(o.tag){case 26:Er||zn(o,i),Ba(n,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Er||zn(o,i);var c=er,m=ws;hi(o.type)&&(er=o.stateNode,ws=!1),Ba(n,i,o),ic(o.stateNode),er=c,ws=m;break;case 5:Er||zn(o,i);case 6:if(c=er,m=ws,er=null,Ba(n,i,o),er=c,ws=m,er!==null)if(ws)try{(er.nodeType===9?er.body:er.nodeName==="HTML"?er.ownerDocument.body:er).removeChild(o.stateNode)}catch(p){Ft(o,i,p)}else try{er.removeChild(o.stateNode)}catch(p){Ft(o,i,p)}break;case 18:er!==null&&(ws?(n=er,Gv(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),jo(n)):Gv(er,o.stateNode));break;case 4:c=er,m=ws,er=o.stateNode.containerInfo,ws=!0,Ba(n,i,o),er=c,ws=m;break;case 0:case 11:case 14:case 15:ii(2,o,i),Er||ii(4,o,i),Ba(n,i,o);break;case 1:Er||(zn(o,i),c=o.stateNode,typeof c.componentWillUnmount=="function"&&qb(o,i,c)),Ba(n,i,o);break;case 21:Ba(n,i,o);break;case 22:Er=(c=Er)||o.memoizedState!==null,Ba(n,i,o),Er=c;break;default:Ba(n,i,o)}}function tv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{jo(n)}catch(o){Ft(i,i.return,o)}}}function rv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{jo(n)}catch(o){Ft(i,i.return,o)}}function n_(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new Jb),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new Jb),i;default:throw Error(s(435,n.tag))}}function md(n,i){var o=n_(n);i.forEach(function(c){if(!o.has(c)){o.add(c);var m=h_.bind(null,n,c);c.then(m,m)}})}function Bs(n,i){var o=i.deletions;if(o!==null)for(var c=0;c<o.length;c++){var m=o[c],p=n,w=i,I=w;e:for(;I!==null;){switch(I.tag){case 27:if(hi(I.type)){er=I.stateNode,ws=!1;break e}break;case 5:er=I.stateNode,ws=!1;break e;case 3:case 4:er=I.stateNode.containerInfo,ws=!0;break e}I=I.return}if(er===null)throw Error(s(160));ev(p,w,m),er=null,ws=!1,p=m.alternate,p!==null&&(p.return=null),m.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)sv(i,n),i=i.sibling}var vn=null;function sv(n,i){var o=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Bs(i,n),Cs(n),c&4&&(ii(3,n,n.return),Xl(3,n),ii(5,n,n.return));break;case 1:Bs(i,n),Cs(n),c&512&&(Er||o===null||zn(o,o.return)),c&64&&wa&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var m=vn;if(Bs(i,n),Cs(n),c&512&&(Er||o===null||zn(o,o.return)),c&4){var p=o!==null?o.memoizedState:null;if(c=n.memoizedState,o===null)if(c===null)if(n.stateNode===null){e:{c=n.type,o=n.memoizedProps,m=m.ownerDocument||m;t:switch(c){case"title":p=m.getElementsByTagName("title")[0],(!p||p[It]||p[nr]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=m.createElement(c),m.head.insertBefore(p,m.querySelector("head > title"))),Yr(p,c,o),p[nr]=n,_t(p),c=p;break e;case"link":var w=sw("link","href",m).get(c+(o.href||""));if(w){for(var I=0;I<w.length;I++)if(p=w[I],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){w.splice(I,1);break t}}p=m.createElement(c),Yr(p,c,o),m.head.appendChild(p);break;case"meta":if(w=sw("meta","content",m).get(c+(o.content||""))){for(I=0;I<w.length;I++)if(p=w[I],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){w.splice(I,1);break t}}p=m.createElement(c),Yr(p,c,o),m.head.appendChild(p);break;default:throw Error(s(468,c))}p[nr]=n,_t(p),c=p}n.stateNode=c}else nw(m,n.type,n.stateNode);else n.stateNode=rw(m,c,n.memoizedProps);else p!==c?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,c===null?nw(m,n.type,n.stateNode):rw(m,c,n.memoizedProps)):c===null&&n.stateNode!==null&&eg(n,n.memoizedProps,o.memoizedProps)}break;case 27:Bs(i,n),Cs(n),c&512&&(Er||o===null||zn(o,o.return)),o!==null&&c&4&&eg(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Bs(i,n),Cs(n),c&512&&(Er||o===null||zn(o,o.return)),n.flags&32){m=n.stateNode;try{vs(m,"")}catch(Fe){Ft(n,n.return,Fe)}}c&4&&n.stateNode!=null&&(m=n.memoizedProps,eg(n,m,o!==null?o.memoizedProps:m)),c&1024&&(sg=!0);break;case 6:if(Bs(i,n),Cs(n),c&4){if(n.stateNode===null)throw Error(s(162));c=n.memoizedProps,o=n.stateNode;try{o.nodeValue=c}catch(Fe){Ft(n,n.return,Fe)}}break;case 3:if(Ud=null,m=vn,vn=jd(i.containerInfo),Bs(i,n),vn=m,Cs(n),c&4&&o!==null&&o.memoizedState.isDehydrated)try{jo(i.containerInfo)}catch(Fe){Ft(n,n.return,Fe)}sg&&(sg=!1,nv(n));break;case 4:c=vn,vn=jd(n.stateNode.containerInfo),Bs(i,n),Cs(n),vn=c;break;case 12:Bs(i,n),Cs(n);break;case 31:Bs(i,n),Cs(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,md(n,c)));break;case 13:Bs(i,n),Cs(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(pd=Pt()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,md(n,c)));break;case 22:m=n.memoizedState!==null;var X=o!==null&&o.memoizedState!==null,ae=wa,fe=Er;if(wa=ae||m,Er=fe||X,Bs(i,n),Er=fe,wa=ae,Cs(n),c&8192)e:for(i=n.stateNode,i._visibility=m?i._visibility&-2:i._visibility|1,m&&(o===null||X||wa||Er||gA(n)),o=null,i=n;;){if(i.tag===5||i.tag===26){if(o===null){X=o=i;try{if(p=X.stateNode,m)w=p.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{I=X.stateNode;var ye=X.memoizedProps.style,ie=ye!=null&&ye.hasOwnProperty("display")?ye.display:null;I.style.display=ie==null||typeof ie=="boolean"?"":(""+ie).trim()}}catch(Fe){Ft(X,X.return,Fe)}}}else if(i.tag===6){if(o===null){X=i;try{X.stateNode.nodeValue=m?"":X.memoizedProps}catch(Fe){Ft(X,X.return,Fe)}}}else if(i.tag===18){if(o===null){X=i;try{var ue=X.stateNode;m?qv(ue,!0):qv(X.stateNode,!1)}catch(Fe){Ft(X,X.return,Fe)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=n.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,md(n,o))));break;case 19:Bs(i,n),Cs(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,md(n,c)));break;case 30:break;case 21:break;default:Bs(i,n),Cs(n)}}function Cs(n){var i=n.flags;if(i&2){try{for(var o,c=n.return;c!==null;){if($b(c)){o=c;break}c=c.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var m=o.stateNode,p=tg(n);fd(n,p,m);break;case 5:var w=o.stateNode;o.flags&32&&(vs(w,""),o.flags&=-33);var I=tg(n);fd(n,I,w);break;case 3:case 4:var X=o.stateNode.containerInfo,ae=tg(n);rg(n,ae,X);break;default:throw Error(s(161))}}catch(fe){Ft(n,n.return,fe)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function nv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;nv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Ca(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Wb(n,i.alternate,i),i=i.sibling}function gA(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:ii(4,i,i.return),gA(i);break;case 1:zn(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&qb(i,i.return,o),gA(i);break;case 27:ic(i.stateNode);case 26:case 5:zn(i,i.return),gA(i);break;case 22:i.memoizedState===null&&gA(i);break;case 30:gA(i);break;default:gA(i)}n=n.sibling}}function Ea(n,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,m=n,p=i,w=p.flags;switch(p.tag){case 0:case 11:case 15:Ea(m,p,o),Xl(4,p);break;case 1:if(Ea(m,p,o),c=p,m=c.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(ae){Ft(c,c.return,ae)}if(c=p,m=c.updateQueue,m!==null){var I=c.stateNode;try{var X=m.shared.hiddenCallbacks;if(X!==null)for(m.shared.hiddenCallbacks=null,m=0;m<X.length;m++)Dy(X[m],I)}catch(ae){Ft(c,c.return,ae)}}o&&w&64&&Gb(p),Jl(p,p.return);break;case 27:Xb(p);case 26:case 5:Ea(m,p,o),o&&c===null&&w&4&&Yb(p),Jl(p,p.return);break;case 12:Ea(m,p,o);break;case 31:Ea(m,p,o),o&&w&4&&tv(m,p);break;case 13:Ea(m,p,o),o&&w&4&&rv(m,p);break;case 22:p.memoizedState===null&&Ea(m,p,o),Jl(p,p.return);break;case 30:break;default:Ea(m,p,o)}i=i.sibling}}function ng(n,i){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Rl(o))}function ag(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Rl(n))}function wn(n,i,o,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)av(n,i,o,c),i=i.sibling}function av(n,i,o,c){var m=i.flags;switch(i.tag){case 0:case 11:case 15:wn(n,i,o,c),m&2048&&Xl(9,i);break;case 1:wn(n,i,o,c);break;case 3:wn(n,i,o,c),m&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Rl(n)));break;case 12:if(m&2048){wn(n,i,o,c),n=i.stateNode;try{var p=i.memoizedProps,w=p.id,I=p.onPostCommit;typeof I=="function"&&I(w,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(X){Ft(i,i.return,X)}}else wn(n,i,o,c);break;case 31:wn(n,i,o,c);break;case 13:wn(n,i,o,c);break;case 23:break;case 22:p=i.stateNode,w=i.alternate,i.memoizedState!==null?p._visibility&2?wn(n,i,o,c):Wl(n,i):p._visibility&2?wn(n,i,o,c):(p._visibility|=2,xo(n,i,o,c,(i.subtreeFlags&10256)!==0||!1)),m&2048&&ng(w,i);break;case 24:wn(n,i,o,c),m&2048&&ag(i.alternate,i);break;default:wn(n,i,o,c)}}function xo(n,i,o,c,m){for(m=m&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var p=n,w=i,I=o,X=c,ae=w.flags;switch(w.tag){case 0:case 11:case 15:xo(p,w,I,X,m),Xl(8,w);break;case 23:break;case 22:var fe=w.stateNode;w.memoizedState!==null?fe._visibility&2?xo(p,w,I,X,m):Wl(p,w):(fe._visibility|=2,xo(p,w,I,X,m)),m&&ae&2048&&ng(w.alternate,w);break;case 24:xo(p,w,I,X,m),m&&ae&2048&&ag(w.alternate,w);break;default:xo(p,w,I,X,m)}i=i.sibling}}function Wl(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=n,c=i,m=c.flags;switch(c.tag){case 22:Wl(o,c),m&2048&&ng(c.alternate,c);break;case 24:Wl(o,c),m&2048&&ag(c.alternate,c);break;default:Wl(o,c)}i=i.sibling}}var Zl=8192;function yo(n,i,o){if(n.subtreeFlags&Zl)for(n=n.child;n!==null;)iv(n,i,o),n=n.sibling}function iv(n,i,o){switch(n.tag){case 26:yo(n,i,o),n.flags&Zl&&n.memoizedState!==null&&z_(o,vn,n.memoizedState,n.memoizedProps);break;case 5:yo(n,i,o);break;case 3:case 4:var c=vn;vn=jd(n.stateNode.containerInfo),yo(n,i,o),vn=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=Zl,Zl=16777216,yo(n,i,o),Zl=c):yo(n,i,o));break;default:yo(n,i,o)}}function Av(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function ec(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];Mr=c,lv(c,n)}Av(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)ov(n),n=n.sibling}function ov(n){switch(n.tag){case 0:case 11:case 15:ec(n),n.flags&2048&&ii(9,n,n.return);break;case 3:ec(n);break;case 12:ec(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,gd(n)):ec(n);break;default:ec(n)}}function gd(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];Mr=c,lv(c,n)}Av(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:ii(8,i,i.return),gd(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,gd(i));break;default:gd(i)}n=n.sibling}}function lv(n,i){for(;Mr!==null;){var o=Mr;switch(o.tag){case 0:case 11:case 15:ii(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Rl(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,Mr=c;else e:for(o=n;Mr!==null;){c=Mr;var m=c.sibling,p=c.return;if(Zb(c),c===o){Mr=null;break e}if(m!==null){m.return=p,Mr=m;break e}Mr=p}}}var a_={getCacheForType:function(n){var i=Gr(wr),o=i.data.get(n);return o===void 0&&(o=n(),i.data.set(n,o)),o},cacheSignal:function(){return Gr(wr).controller.signal}},i_=typeof WeakMap=="function"?WeakMap:Map,Et=0,Ot=null,lt=null,dt=0,Qt=0,Os=null,Ai=!1,bo=!1,ig=!1,Na=0,cr=0,oi=0,pA=0,Ag=0,Ps=0,vo=0,tc=null,Es=null,og=!1,pd=0,cv=0,xd=1/0,yd=null,li=null,Ur=0,ci=null,wo=null,Sa=0,lg=0,cg=null,uv=null,rc=0,ug=null;function Vs(){return(Et&2)!==0&&dt!==0?dt&-dt:H.T!==null?pg():Oa()}function dv(){if(Ps===0)if((dt&536870912)===0||yt){var n=us;us<<=1,(us&3932160)===0&&(us=262144),Ps=n}else Ps=536870912;return n=Ls.current,n!==null&&(n.flags|=32),Ps}function Ns(n,i,o){(n===Ot&&(Qt===2||Qt===9)||n.cancelPendingCommit!==null)&&(Bo(n,0),ui(n,dt,Ps,!1)),la(n,o),((Et&2)===0||n!==Ot)&&(n===Ot&&((Et&2)===0&&(pA|=o),cr===4&&ui(n,dt,Ps,!1)),Kn(n))}function hv(n,i,o){if((Et&6)!==0)throw Error(s(327));var c=!o&&(i&127)===0&&(i&n.expiredLanes)===0||Us(n,i),m=c?l_(n,i):hg(n,i,!0),p=c;do{if(m===0){bo&&!c&&ui(n,i,0,!1);break}else{if(o=n.current.alternate,p&&!A_(o)){m=hg(n,i,!1),p=!1;continue}if(m===2){if(p=i,n.errorRecoveryDisabledLanes&p)var w=0;else w=n.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){i=w;e:{var I=n;m=tc;var X=I.current.memoizedState.isDehydrated;if(X&&(Bo(I,w).flags|=256),w=hg(I,w,!1),w!==2){if(ig&&!X){I.errorRecoveryDisabledLanes|=p,pA|=p,m=4;break e}p=Es,Es=m,p!==null&&(Es===null?Es=p:Es.push.apply(Es,p))}m=w}if(p=!1,m!==2)continue}}if(m===1){Bo(n,0),ui(n,i,0,!0);break}e:{switch(c=n,p=m,p){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:ui(c,i,Ps,!Ai);break e;case 2:Es=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(m=pd+300-Pt(),10<m)){if(ui(c,i,Ps,!Ai),ds(c,0,!0)!==0)break e;Sa=i,c.timeoutHandle=zv(fv.bind(null,c,o,Es,yd,og,i,Ps,pA,vo,Ai,p,"Throttled",-0,0),m);break e}fv(c,o,Es,yd,og,i,Ps,pA,vo,Ai,p,null,-0,0)}}break}while(!0);Kn(n)}function fv(n,i,o,c,m,p,w,I,X,ae,fe,ye,ie,ue){if(n.timeoutHandle=-1,ye=i.subtreeFlags,ye&8192||(ye&16785408)===16785408){ye={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:mn},iv(i,p,ye);var Fe=(p&62914560)===p?pd-Pt():(p&4194048)===p?cv-Pt():0;if(Fe=K_(ye,Fe),Fe!==null){Sa=p,n.cancelPendingCommit=Fe(wv.bind(null,n,i,p,o,c,m,w,I,X,fe,ye,null,ie,ue)),ui(n,p,w,!ae);return}}wv(n,i,p,o,c,m,w,I,X)}function A_(n){for(var i=n;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var m=o[c],p=m.getSnapshot;m=m.value;try{if(!Rs(p(),m))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ui(n,i,o,c){i&=~Ag,i&=~pA,n.suspendedLanes|=i,n.pingedLanes&=~i,c&&(n.warmLanes|=i),c=n.expirationTimes;for(var m=i;0<m;){var p=31-Oe(m),w=1<<p;c[p]=-1,m&=~w}o!==0&&Qn(n,o,i)}function bd(){return(Et&6)===0?(sc(0),!1):!0}function dg(){if(lt!==null){if(Qt===0)var n=lt.return;else n=lt,ga=oA=null,_m(n),ho=null,Ll=0,n=lt;for(;n!==null;)Kb(n.alternate,n),n=n.return;lt=null}}function Bo(n,i){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,S_(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Sa=0,dg(),Ot=n,lt=o=fa(n.current,null),dt=i,Qt=0,Os=null,Ai=!1,bo=Us(n,i),ig=!1,vo=Ps=Ag=pA=oi=cr=0,Es=tc=null,og=!1,(i&8)!==0&&(i|=i&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=i;0<c;){var m=31-Oe(c),p=1<<m;i|=n[m],c&=~p}return Na=i,Ou(),o}function mv(n,i){st=null,H.H=ql,i===uo||i===$u?(i=Uy(),Qt=3):i===gm?(i=Uy(),Qt=4):Qt=i===zm?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Os=i,lt===null&&(cr=1,ld(n,Zs(i,n.current)))}function gv(){var n=Ls.current;return n===null?!0:(dt&4194048)===dt?sn===null:(dt&62914560)===dt||(dt&536870912)!==0?n===sn:!1}function pv(){var n=H.H;return H.H=ql,n===null?ql:n}function xv(){var n=H.A;return H.A=a_,n}function vd(){cr=4,Ai||(dt&4194048)!==dt&&Ls.current!==null||(bo=!0),(oi&134217727)===0&&(pA&134217727)===0||Ot===null||ui(Ot,dt,Ps,!1)}function hg(n,i,o){var c=Et;Et|=2;var m=pv(),p=xv();(Ot!==n||dt!==i)&&(yd=null,Bo(n,i)),i=!1;var w=cr;e:do try{if(Qt!==0&&lt!==null){var I=lt,X=Os;switch(Qt){case 8:dg(),w=6;break e;case 3:case 2:case 9:case 6:Ls.current===null&&(i=!0);var ae=Qt;if(Qt=0,Os=null,Co(n,I,X,ae),o&&bo){w=0;break e}break;default:ae=Qt,Qt=0,Os=null,Co(n,I,X,ae)}}o_(),w=cr;break}catch(fe){mv(n,fe)}while(!0);return i&&n.shellSuspendCounter++,ga=oA=null,Et=c,H.H=m,H.A=p,lt===null&&(Ot=null,dt=0,Ou()),w}function o_(){for(;lt!==null;)yv(lt)}function l_(n,i){var o=Et;Et|=2;var c=pv(),m=xv();Ot!==n||dt!==i?(yd=null,xd=Pt()+500,Bo(n,i)):bo=Us(n,i);e:do try{if(Qt!==0&&lt!==null){i=lt;var p=Os;t:switch(Qt){case 1:Qt=0,Os=null,Co(n,i,p,1);break;case 2:case 9:if(jy(p)){Qt=0,Os=null,bv(i);break}i=function(){Qt!==2&&Qt!==9||Ot!==n||(Qt=7),Kn(n)},p.then(i,i);break e;case 3:Qt=7;break e;case 4:Qt=5;break e;case 7:jy(p)?(Qt=0,Os=null,bv(i)):(Qt=0,Os=null,Co(n,i,p,7));break;case 5:var w=null;switch(lt.tag){case 26:w=lt.memoizedState;case 5:case 27:var I=lt;if(w?aw(w):I.stateNode.complete){Qt=0,Os=null;var X=I.sibling;if(X!==null)lt=X;else{var ae=I.return;ae!==null?(lt=ae,wd(ae)):lt=null}break t}}Qt=0,Os=null,Co(n,i,p,5);break;case 6:Qt=0,Os=null,Co(n,i,p,6);break;case 8:dg(),cr=6;break e;default:throw Error(s(462))}}c_();break}catch(fe){mv(n,fe)}while(!0);return ga=oA=null,H.H=c,H.A=m,Et=o,lt!==null?0:(Ot=null,dt=0,Ou(),cr)}function c_(){for(;lt!==null&&!St();)yv(lt)}function yv(n){var i=Vb(n.alternate,n,Na);n.memoizedProps=n.pendingProps,i===null?wd(n):lt=i}function bv(n){var i=n,o=i.alternate;switch(i.tag){case 15:case 0:i=Rb(o,i,i.pendingProps,i.type,void 0,dt);break;case 11:i=Rb(o,i,i.pendingProps,i.type.render,i.ref,dt);break;case 5:_m(i);default:Kb(o,i),i=lt=xy(i,Na),i=Vb(o,i,Na)}n.memoizedProps=n.pendingProps,i===null?wd(n):lt=i}function Co(n,i,o,c){ga=oA=null,_m(i),ho=null,Ll=0;var m=i.return;try{if(WS(n,m,i,o,dt)){cr=1,ld(n,Zs(o,n.current)),lt=null;return}}catch(p){if(m!==null)throw lt=m,p;cr=1,ld(n,Zs(o,n.current)),lt=null;return}i.flags&32768?(yt||c===1?n=!0:bo||(dt&536870912)!==0?n=!1:(Ai=n=!0,(c===2||c===9||c===3||c===6)&&(c=Ls.current,c!==null&&c.tag===13&&(c.flags|=16384))),vv(i,n)):wd(i)}function wd(n){var i=n;do{if((i.flags&32768)!==0){vv(i,Ai);return}n=i.return;var o=t_(i.alternate,i,Na);if(o!==null){lt=o;return}if(i=i.sibling,i!==null){lt=i;return}lt=i=n}while(i!==null);cr===0&&(cr=5)}function vv(n,i){do{var o=r_(n.alternate,n);if(o!==null){o.flags&=32767,lt=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(n=n.sibling,n!==null)){lt=n;return}lt=n=o}while(n!==null);cr=6,lt=null}function wv(n,i,o,c,m,p,w,I,X){n.cancelPendingCommit=null;do Bd();while(Ur!==0);if((Et&6)!==0)throw Error(s(327));if(i!==null){if(i===n.current)throw Error(s(177));if(p=i.lanes|i.childLanes,p|=tm,xl(n,o,p,w,I,X),n===Ot&&(lt=Ot=null,dt=0),wo=i,ci=n,Sa=o,lg=p,cg=m,uv=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,f_(Ht,function(){return Sv(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=H.T,H.T=null,m=F.p,F.p=2,w=Et,Et|=4;try{s_(n,i,o)}finally{Et=w,F.p=m,H.T=c}}Ur=1,Bv(),Cv(),Ev()}}function Bv(){if(Ur===1){Ur=0;var n=ci,i=wo,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=H.T,H.T=null;var c=F.p;F.p=2;var m=Et;Et|=4;try{sv(i,n);var p=Eg,w=ly(n.containerInfo),I=p.focusedElem,X=p.selectionRange;if(w!==I&&I&&I.ownerDocument&&oy(I.ownerDocument.documentElement,I)){if(X!==null&&Xf(I)){var ae=X.start,fe=X.end;if(fe===void 0&&(fe=ae),"selectionStart"in I)I.selectionStart=ae,I.selectionEnd=Math.min(fe,I.value.length);else{var ye=I.ownerDocument||document,ie=ye&&ye.defaultView||window;if(ie.getSelection){var ue=ie.getSelection(),Fe=I.textContent.length,Ke=Math.min(X.start,Fe),Mt=X.end===void 0?Ke:Math.min(X.end,Fe);!ue.extend&&Ke>Mt&&(w=Mt,Mt=Ke,Ke=w);var re=Ay(I,Ke),ee=Ay(I,Mt);if(re&&ee&&(ue.rangeCount!==1||ue.anchorNode!==re.node||ue.anchorOffset!==re.offset||ue.focusNode!==ee.node||ue.focusOffset!==ee.offset)){var ne=ye.createRange();ne.setStart(re.node,re.offset),ue.removeAllRanges(),Ke>Mt?(ue.addRange(ne),ue.extend(ee.node,ee.offset)):(ne.setEnd(ee.node,ee.offset),ue.addRange(ne))}}}}for(ye=[],ue=I;ue=ue.parentNode;)ue.nodeType===1&&ye.push({element:ue,left:ue.scrollLeft,top:ue.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<ye.length;I++){var xe=ye[I];xe.element.scrollLeft=xe.left,xe.element.scrollTop=xe.top}}Dd=!!Cg,Eg=Cg=null}finally{Et=m,F.p=c,H.T=o}}n.current=i,Ur=2}}function Cv(){if(Ur===2){Ur=0;var n=ci,i=wo,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=H.T,H.T=null;var c=F.p;F.p=2;var m=Et;Et|=4;try{Wb(n,i.alternate,i)}finally{Et=m,F.p=c,H.T=o}}Ur=3}}function Ev(){if(Ur===4||Ur===3){Ur=0,qs();var n=ci,i=wo,o=Sa,c=uv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ur=5:(Ur=0,wo=ci=null,Nv(n,n.pendingLanes));var m=n.pendingLanes;if(m===0&&(li=null),Fs(o),i=i.stateNode,Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(Re,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=H.T,m=F.p,F.p=2,H.T=null;try{for(var p=n.onRecoverableError,w=0;w<c.length;w++){var I=c[w];p(I.value,{componentStack:I.stack})}}finally{H.T=i,F.p=m}}(Sa&3)!==0&&Bd(),Kn(n),m=n.pendingLanes,(o&261930)!==0&&(m&42)!==0?n===ug?rc++:(rc=0,ug=n):rc=0,sc(0)}}function Nv(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Rl(i)))}function Bd(){return Bv(),Cv(),Ev(),Sv()}function Sv(){if(Ur!==5)return!1;var n=ci,i=lg;lg=0;var o=Fs(Sa),c=H.T,m=F.p;try{F.p=32>o?32:o,H.T=null,o=cg,cg=null;var p=ci,w=Sa;if(Ur=0,wo=ci=null,Sa=0,(Et&6)!==0)throw Error(s(331));var I=Et;if(Et|=4,ov(p.current),av(p,p.current,w,o),Et=I,sc(0,!1),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(Re,p)}catch{}return!0}finally{F.p=m,H.T=c,Nv(n,i)}}function _v(n,i,o){i=Zs(o,i),i=Vm(n.stateNode,i,2),n=si(n,i,2),n!==null&&(la(n,2),Kn(n))}function Ft(n,i,o){if(n.tag===3)_v(n,n,o);else for(;i!==null;){if(i.tag===3){_v(i,n,o);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(li===null||!li.has(c))){n=Zs(o,n),o=jb(2),c=si(i,o,2),c!==null&&(Tb(o,c,i,n),la(c,2),Kn(c));break}}i=i.return}}function fg(n,i,o){var c=n.pingCache;if(c===null){c=n.pingCache=new i_;var m=new Set;c.set(i,m)}else m=c.get(i),m===void 0&&(m=new Set,c.set(i,m));m.has(o)||(ig=!0,m.add(o),n=u_.bind(null,n,i,o),i.then(n,n))}function u_(n,i,o){var c=n.pingCache;c!==null&&c.delete(i),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,Ot===n&&(dt&o)===o&&(cr===4||cr===3&&(dt&62914560)===dt&&300>Pt()-pd?(Et&2)===0&&Bo(n,0):Ag|=o,vo===dt&&(vo=0)),Kn(n)}function jv(n,i){i===0&&(i=zA()),n=aA(n,i),n!==null&&(la(n,i),Kn(n))}function d_(n){var i=n.memoizedState,o=0;i!==null&&(o=i.retryLane),jv(n,o)}function h_(n,i){var o=0;switch(n.tag){case 31:case 13:var c=n.stateNode,m=n.memoizedState;m!==null&&(o=m.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(i),jv(n,o)}function f_(n,i){return De(n,i)}var Cd=null,Eo=null,mg=!1,Ed=!1,gg=!1,di=0;function Kn(n){n!==Eo&&n.next===null&&(Eo===null?Cd=Eo=n:Eo=Eo.next=n),Ed=!0,mg||(mg=!0,g_())}function sc(n,i){if(!gg&&Ed){gg=!0;do for(var o=!1,c=Cd;c!==null;){if(n!==0){var m=c.pendingLanes;if(m===0)var p=0;else{var w=c.suspendedLanes,I=c.pingedLanes;p=(1<<31-Oe(42|n)+1)-1,p&=m&~(w&~I),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,Fv(c,p))}else p=dt,p=ds(c,c===Ot?p:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(p&3)===0||Us(c,p)||(o=!0,Fv(c,p));c=c.next}while(o);gg=!1}}function m_(){Tv()}function Tv(){Ed=mg=!1;var n=0;di!==0&&N_()&&(n=di);for(var i=Pt(),o=null,c=Cd;c!==null;){var m=c.next,p=Uv(c,i);p===0?(c.next=null,o===null?Cd=m:o.next=m,m===null&&(Eo=o)):(o=c,(n!==0||(p&3)!==0)&&(Ed=!0)),c=m}Ur!==0&&Ur!==5||sc(n),di!==0&&(di=0)}function Uv(n,i){for(var o=n.suspendedLanes,c=n.pingedLanes,m=n.expirationTimes,p=n.pendingLanes&-62914561;0<p;){var w=31-Oe(p),I=1<<w,X=m[w];X===-1?((I&o)===0||(I&c)!==0)&&(m[w]=Ha(I,i)):X<=i&&(n.expiredLanes|=I),p&=~I}if(i=Ot,o=dt,o=ds(n,n===i?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,o===0||n===i&&(Qt===2||Qt===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Ue(c),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Us(n,o)){if(i=o&-o,i===n.callbackPriority)return i;switch(c!==null&&Ue(c),Fs(o)){case 2:case 8:o=sr;break;case 32:o=Ht;break;case 268435456:o=kr;break;default:o=Ht}return c=Qv.bind(null,n),o=De(o,c),n.callbackPriority=i,n.callbackNode=o,i}return c!==null&&c!==null&&Ue(c),n.callbackPriority=2,n.callbackNode=null,2}function Qv(n,i){if(Ur!==0&&Ur!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Bd()&&n.callbackNode!==o)return null;var c=dt;return c=ds(n,n===Ot?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(hv(n,c,i),Uv(n,Pt()),n.callbackNode!=null&&n.callbackNode===o?Qv.bind(null,n):null)}function Fv(n,i){if(Bd())return null;hv(n,i,!0)}function g_(){__(function(){(Et&6)!==0?De(Vt,m_):Tv()})}function pg(){if(di===0){var n=lo;n===0&&(n=ts,ts<<=1,(ts&261888)===0&&(ts=256)),di=n}return di}function Iv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:YA(""+n)}function Dv(n,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,n.id&&o.setAttribute("form",n.id),i.parentNode.insertBefore(o,i),n=new FormData(n),o.parentNode.removeChild(o),n}function p_(n,i,o,c,m){if(i==="submit"&&o&&o.stateNode===m){var p=Iv((m[or]||null).action),w=c.submitter;w&&(i=(i=w[or]||null)?Iv(i.formAction):w.getAttribute("formAction"),i!==null&&(p=i,w=null));var I=new Mn("action","action",null,c,m);n.push({event:I,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(di!==0){var X=w?Dv(m,w):new FormData(m);Rm(o,{pending:!0,data:X,method:m.method,action:p},null,X)}}else typeof p=="function"&&(I.preventDefault(),X=w?Dv(m,w):new FormData(m),Rm(o,{pending:!0,data:X,method:m.method,action:p},p,X))},currentTarget:m}]})}}for(var xg=0;xg<em.length;xg++){var yg=em[xg],x_=yg.toLowerCase(),y_=yg[0].toUpperCase()+yg.slice(1);bn(x_,"on"+y_)}bn(dy,"onAnimationEnd"),bn(hy,"onAnimationIteration"),bn(fy,"onAnimationStart"),bn("dblclick","onDoubleClick"),bn("focusin","onFocus"),bn("focusout","onBlur"),bn(DS,"onTransitionRun"),bn(kS,"onTransitionStart"),bn(RS,"onTransitionCancel"),bn(my,"onTransitionEnd"),ms("onMouseEnter",["mouseout","mouseover"]),ms("onMouseLeave",["mouseout","mouseover"]),ms("onPointerEnter",["pointerout","pointerover"]),ms("onPointerLeave",["pointerout","pointerover"]),fs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),fs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),fs("onBeforeInput",["compositionend","keypress","textInput","paste"]),fs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),fs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),fs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),b_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(nc));function kv(n,i){i=(i&4)!==0;for(var o=0;o<n.length;o++){var c=n[o],m=c.event;c=c.listeners;e:{var p=void 0;if(i)for(var w=c.length-1;0<=w;w--){var I=c[w],X=I.instance,ae=I.currentTarget;if(I=I.listener,X!==p&&m.isPropagationStopped())break e;p=I,m.currentTarget=ae;try{p(m)}catch(fe){Hu(fe)}m.currentTarget=null,p=X}else for(w=0;w<c.length;w++){if(I=c[w],X=I.instance,ae=I.currentTarget,I=I.listener,X!==p&&m.isPropagationStopped())break e;p=I,m.currentTarget=ae;try{p(m)}catch(fe){Hu(fe)}m.currentTarget=null,p=X}}}}function ct(n,i){var o=i[Le];o===void 0&&(o=i[Le]=new Set);var c=n+"__bubble";o.has(c)||(Rv(i,n,2,!1),o.add(c))}function bg(n,i,o){var c=0;i&&(c|=4),Rv(o,n,c,i)}var Nd="_reactListening"+Math.random().toString(36).slice(2);function vg(n){if(!n[Nd]){n[Nd]=!0,Tr.forEach(function(o){o!=="selectionchange"&&(b_.has(o)||bg(o,!1,n),bg(o,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Nd]||(i[Nd]=!0,bg("selectionchange",!1,i))}}function Rv(n,i,o,c){switch(dw(i)){case 2:var m=Y_;break;case 8:m=$_;break;default:m=kg}o=m.bind(null,i,o,n),m=void 0,!Ji||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(m=!0),c?m!==void 0?n.addEventListener(i,o,{capture:!0,passive:m}):n.addEventListener(i,o,!0):m!==void 0?n.addEventListener(i,o,{passive:m}):n.addEventListener(i,o,!1)}function wg(n,i,o,c,m){var p=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var I=c.stateNode.containerInfo;if(I===m)break;if(w===4)for(w=c.return;w!==null;){var X=w.tag;if((X===3||X===4)&&w.stateNode.containerInfo===m)return;w=w.return}for(;I!==null;){if(w=Xe(I),w===null)return;if(X=w.tag,X===5||X===6||X===26||X===27){c=p=w;continue e}I=I.parentNode}}c=c.return}qa(function(){var ae=p,fe=$s(o),ye=[];e:{var ie=gy.get(n);if(ie!==void 0){var ue=Mn,Fe=n;switch(n){case"keypress":if(Zi(o)===0)break e;case"keydown":case"keyup":ue=Ru;break;case"focusin":Fe="focus",ue=tA;break;case"focusout":Fe="blur",ue=tA;break;case"beforeblur":case"afterblur":ue=tA;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=jl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=_u;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=b;break;case dy:case hy:case fy:ue=Tu;break;case my:ue=O;break;case"scroll":case"scrollend":ue=_l;break;case"wheel":ue=oe;break;case"copy":case"cut":case"paste":ue=Uu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=ha;break;case"toggle":case"beforetoggle":ue=rt}var Ke=(i&4)!==0,Mt=!Ke&&(n==="scroll"||n==="scrollend"),re=Ke?ie!==null?ie+"Capture":null:ie;Ke=[];for(var ee=ae,ne;ee!==null;){var xe=ee;if(ne=xe.stateNode,xe=xe.tag,xe!==5&&xe!==26&&xe!==27||ne===null||re===null||(xe=gn(ee,re),xe!=null&&Ke.push(ac(ee,xe,ne))),Mt)break;ee=ee.return}0<Ke.length&&(ie=new ue(ie,Fe,null,o,fe),ye.push({event:ie,listeners:Ke}))}}if((i&7)===0){e:{if(ie=n==="mouseover"||n==="pointerover",ue=n==="mouseout"||n==="pointerout",ie&&o!==El&&(Fe=o.relatedTarget||o.fromElement)&&(Xe(Fe)||Fe[me]))break e;if((ue||ie)&&(ie=fe.window===fe?fe:(ie=fe.ownerDocument)?ie.defaultView||ie.parentWindow:window,ue?(Fe=o.relatedTarget||o.toElement,ue=ae,Fe=Fe?Xe(Fe):null,Fe!==null&&(Mt=l(Fe),Ke=Fe.tag,Fe!==Mt||Ke!==5&&Ke!==27&&Ke!==6)&&(Fe=null)):(ue=null,Fe=ae),ue!==Fe)){if(Ke=jl,xe="onMouseLeave",re="onMouseEnter",ee="mouse",(n==="pointerout"||n==="pointerover")&&(Ke=ha,xe="onPointerLeave",re="onPointerEnter",ee="pointer"),Mt=ue==null?ie:zt(ue),ne=Fe==null?ie:zt(Fe),ie=new Ke(xe,ee+"leave",ue,o,fe),ie.target=Mt,ie.relatedTarget=ne,xe=null,Xe(fe)===ae&&(Ke=new Ke(re,ee+"enter",Fe,o,fe),Ke.target=ne,Ke.relatedTarget=Mt,xe=Ke),Mt=xe,ue&&Fe)t:{for(Ke=v_,re=ue,ee=Fe,ne=0,xe=re;xe;xe=Ke(xe))ne++;xe=0;for(var Pe=ee;Pe;Pe=Ke(Pe))xe++;for(;0<ne-xe;)re=Ke(re),ne--;for(;0<xe-ne;)ee=Ke(ee),xe--;for(;ne--;){if(re===ee||ee!==null&&re===ee.alternate){Ke=re;break t}re=Ke(re),ee=Ke(ee)}Ke=null}else Ke=null;ue!==null&&Mv(ye,ie,ue,Ke,!1),Fe!==null&&Mt!==null&&Mv(ye,Mt,Fe,Ke,!0)}}e:{if(ie=ae?zt(ae):window,ue=ie.nodeName&&ie.nodeName.toLowerCase(),ue==="select"||ue==="input"&&ie.type==="file")var wt=ty;else if(Z0(ie))if(ry)wt=QS;else{wt=TS;var ke=jS}else ue=ie.nodeName,!ue||ue.toLowerCase()!=="input"||ie.type!=="checkbox"&&ie.type!=="radio"?ae&&qA(ae.elementType)&&(wt=ty):wt=US;if(wt&&(wt=wt(n,ae))){ey(ye,wt,o,fe);break e}ke&&ke(n,ie,ae),n==="focusout"&&ae&&ie.type==="number"&&ae.memoizedProps.value!=null&&wl(ie,"number",ie.value)}switch(ke=ae?zt(ae):window,n){case"focusin":(Z0(ke)||ke.contentEditable==="true")&&(to=ke,Jf=ae,Il=null);break;case"focusout":Il=Jf=to=null;break;case"mousedown":Wf=!0;break;case"contextmenu":case"mouseup":case"dragend":Wf=!1,cy(ye,o,fe);break;case"selectionchange":if(IS)break;case"keydown":case"keyup":cy(ye,o,fe)}var at;if(Ct)e:{switch(n){case"compositionstart":var ht="onCompositionStart";break e;case"compositionend":ht="onCompositionEnd";break e;case"compositionupdate":ht="onCompositionUpdate";break e}ht=void 0}else eo?rA(n,o)&&(ht="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(ht="onCompositionStart");ht&&(On&&o.locale!=="ko"&&(eo||ht!=="onCompositionStart"?ht==="onCompositionEnd"&&eo&&(at=Sl()):(Rn=fe,Nl="value"in Rn?Rn.value:Rn.textContent,eo=!0)),ke=Sd(ae,ht),0<ke.length&&(ht=new Hn(ht,n,null,o,fe),ye.push({event:ht,listeners:ke}),at?ht.data=at:(at=ZA(o),at!==null&&(ht.data=at)))),(at=Js?ES(n,o):NS(n,o))&&(ht=Sd(ae,"onBeforeInput"),0<ht.length&&(ke=new Hn("onBeforeInput","beforeinput",null,o,fe),ye.push({event:ke,listeners:ht}),ke.data=at)),p_(ye,n,ae,o,fe)}kv(ye,i)})}function ac(n,i,o){return{instance:n,listener:i,currentTarget:o}}function Sd(n,i){for(var o=i+"Capture",c=[];n!==null;){var m=n,p=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||p===null||(m=gn(n,o),m!=null&&c.unshift(ac(n,m,p)),m=gn(n,i),m!=null&&c.push(ac(n,m,p))),n.tag===3)return c;n=n.return}return[]}function v_(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Mv(n,i,o,c,m){for(var p=i._reactName,w=[];o!==null&&o!==c;){var I=o,X=I.alternate,ae=I.stateNode;if(I=I.tag,X!==null&&X===c)break;I!==5&&I!==26&&I!==27||ae===null||(X=ae,m?(ae=gn(o,p),ae!=null&&w.unshift(ac(o,ae,X))):m||(ae=gn(o,p),ae!=null&&w.push(ac(o,ae,X)))),o=o.return}w.length!==0&&n.push({event:i,listeners:w})}var w_=/\r\n?/g,B_=/\u0000|\uFFFD/g;function Lv(n){return(typeof n=="string"?n:""+n).replace(w_,`
`).replace(B_,"")}function Hv(n,i){return i=Lv(i),Lv(n)===i}function Rt(n,i,o,c,m,p){switch(o){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||vs(n,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&vs(n,""+c);break;case"className":ks(n,"class",c);break;case"tabIndex":ks(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":ks(n,o,c);break;case"style":Cl(n,c,p);break;case"data":if(i!=="object"){ks(n,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||o!=="href")){n.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=YA(""+c),n.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(i!=="input"&&Rt(n,i,"name",m.name,m,null),Rt(n,i,"formEncType",m.formEncType,m,null),Rt(n,i,"formMethod",m.formMethod,m,null),Rt(n,i,"formTarget",m.formTarget,m,null)):(Rt(n,i,"encType",m.encType,m,null),Rt(n,i,"method",m.method,m,null),Rt(n,i,"target",m.target,m,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=YA(""+c),n.setAttribute(o,c);break;case"onClick":c!=null&&(n.onclick=mn);break;case"onScroll":c!=null&&ct("scroll",n);break;case"onScrollEnd":c!=null&&ct("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(o=c.__html,o!=null){if(m.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}o=YA(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""+c):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":c===!0?n.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,c):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(o,c):n.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(o):n.setAttribute(o,c);break;case"popover":ct("beforetoggle",n),ct("toggle",n),KA(n,"popover",c);break;case"xlinkActuate":vr(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":vr(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":vr(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":vr(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":vr(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":vr(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":vr(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":vr(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":vr(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":KA(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Su.get(o)||o,KA(n,o,c))}}function Bg(n,i,o,c,m,p){switch(o){case"style":Cl(n,c,p);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(o=c.__html,o!=null){if(m.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"children":typeof c=="string"?vs(n,c):(typeof c=="number"||typeof c=="bigint")&&vs(n,""+c);break;case"onScroll":c!=null&&ct("scroll",n);break;case"onScrollEnd":c!=null&&ct("scrollend",n);break;case"onClick":c!=null&&(n.onclick=mn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fn.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),i=o.slice(2,m?o.length-7:void 0),p=n[or]||null,p=p!=null?p[o]:null,typeof p=="function"&&n.removeEventListener(i,p,m),typeof c=="function")){typeof p!="function"&&p!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(i,c,m);break e}o in n?n[o]=c:c===!0?n.setAttribute(o,""):KA(n,o,c)}}}function Yr(n,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ct("error",n),ct("load",n);var c=!1,m=!1,p;for(p in o)if(o.hasOwnProperty(p)){var w=o[p];if(w!=null)switch(p){case"src":c=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Rt(n,i,p,w,o,null)}}m&&Rt(n,i,"srcSet",o.srcSet,o,null),c&&Rt(n,i,"src",o.src,o,null);return;case"input":ct("invalid",n);var I=p=w=m=null,X=null,ae=null;for(c in o)if(o.hasOwnProperty(c)){var fe=o[c];if(fe!=null)switch(c){case"name":m=fe;break;case"type":w=fe;break;case"checked":X=fe;break;case"defaultChecked":ae=fe;break;case"value":p=fe;break;case"defaultValue":I=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(s(137,i));break;default:Rt(n,i,c,fe,o,null)}}Cu(n,p,I,X,ae,w,m,!1);return;case"select":ct("invalid",n),c=w=p=null;for(m in o)if(o.hasOwnProperty(m)&&(I=o[m],I!=null))switch(m){case"value":p=I;break;case"defaultValue":w=I;break;case"multiple":c=I;default:Rt(n,i,m,I,o,null)}i=p,o=w,n.multiple=!!c,i!=null?Va(n,!!c,i,!1):o!=null&&Va(n,!!c,o,!0);return;case"textarea":ct("invalid",n),p=m=c=null;for(w in o)if(o.hasOwnProperty(w)&&(I=o[w],I!=null))switch(w){case"value":c=I;break;case"defaultValue":m=I;break;case"children":p=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(s(91));break;default:Rt(n,i,w,I,o,null)}za(n,c,m,p);return;case"option":for(X in o)o.hasOwnProperty(X)&&(c=o[X],c!=null)&&(X==="selected"?n.selected=c&&typeof c!="function"&&typeof c!="symbol":Rt(n,i,X,c,o,null));return;case"dialog":ct("beforetoggle",n),ct("toggle",n),ct("cancel",n),ct("close",n);break;case"iframe":case"object":ct("load",n);break;case"video":case"audio":for(c=0;c<nc.length;c++)ct(nc[c],n);break;case"image":ct("error",n),ct("load",n);break;case"details":ct("toggle",n);break;case"embed":case"source":case"link":ct("error",n),ct("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ae in o)if(o.hasOwnProperty(ae)&&(c=o[ae],c!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Rt(n,i,ae,c,o,null)}return;default:if(qA(i)){for(fe in o)o.hasOwnProperty(fe)&&(c=o[fe],c!==void 0&&Bg(n,i,fe,c,o,void 0));return}}for(I in o)o.hasOwnProperty(I)&&(c=o[I],c!=null&&Rt(n,i,I,c,o,null))}function C_(n,i,o,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,p=null,w=null,I=null,X=null,ae=null,fe=null;for(ue in o){var ye=o[ue];if(o.hasOwnProperty(ue)&&ye!=null)switch(ue){case"checked":break;case"value":break;case"defaultValue":X=ye;default:c.hasOwnProperty(ue)||Rt(n,i,ue,null,c,ye)}}for(var ie in c){var ue=c[ie];if(ye=o[ie],c.hasOwnProperty(ie)&&(ue!=null||ye!=null))switch(ie){case"type":p=ue;break;case"name":m=ue;break;case"checked":ae=ue;break;case"defaultChecked":fe=ue;break;case"value":w=ue;break;case"defaultValue":I=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(s(137,i));break;default:ue!==ye&&Rt(n,i,ie,ue,c,ye)}}GA(n,w,I,X,ae,fe,p,m);return;case"select":ue=w=I=ie=null;for(p in o)if(X=o[p],o.hasOwnProperty(p)&&X!=null)switch(p){case"value":break;case"multiple":ue=X;default:c.hasOwnProperty(p)||Rt(n,i,p,null,c,X)}for(m in c)if(p=c[m],X=o[m],c.hasOwnProperty(m)&&(p!=null||X!=null))switch(m){case"value":ie=p;break;case"defaultValue":I=p;break;case"multiple":w=p;default:p!==X&&Rt(n,i,m,p,c,X)}i=I,o=w,c=ue,ie!=null?Va(n,!!o,ie,!1):!!c!=!!o&&(i!=null?Va(n,!!o,i,!0):Va(n,!!o,o?[]:"",!1));return;case"textarea":ue=ie=null;for(I in o)if(m=o[I],o.hasOwnProperty(I)&&m!=null&&!c.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:Rt(n,i,I,null,c,m)}for(w in c)if(m=c[w],p=o[w],c.hasOwnProperty(w)&&(m!=null||p!=null))switch(w){case"value":ie=m;break;case"defaultValue":ue=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(s(91));break;default:m!==p&&Rt(n,i,w,m,c,p)}Eu(n,ie,ue);return;case"option":for(var Fe in o)ie=o[Fe],o.hasOwnProperty(Fe)&&ie!=null&&!c.hasOwnProperty(Fe)&&(Fe==="selected"?n.selected=!1:Rt(n,i,Fe,null,c,ie));for(X in c)ie=c[X],ue=o[X],c.hasOwnProperty(X)&&ie!==ue&&(ie!=null||ue!=null)&&(X==="selected"?n.selected=ie&&typeof ie!="function"&&typeof ie!="symbol":Rt(n,i,X,ie,c,ue));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ke in o)ie=o[Ke],o.hasOwnProperty(Ke)&&ie!=null&&!c.hasOwnProperty(Ke)&&Rt(n,i,Ke,null,c,ie);for(ae in c)if(ie=c[ae],ue=o[ae],c.hasOwnProperty(ae)&&ie!==ue&&(ie!=null||ue!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(s(137,i));break;default:Rt(n,i,ae,ie,c,ue)}return;default:if(qA(i)){for(var Mt in o)ie=o[Mt],o.hasOwnProperty(Mt)&&ie!==void 0&&!c.hasOwnProperty(Mt)&&Bg(n,i,Mt,void 0,c,ie);for(fe in c)ie=c[fe],ue=o[fe],!c.hasOwnProperty(fe)||ie===ue||ie===void 0&&ue===void 0||Bg(n,i,fe,ie,c,ue);return}}for(var re in o)ie=o[re],o.hasOwnProperty(re)&&ie!=null&&!c.hasOwnProperty(re)&&Rt(n,i,re,null,c,ie);for(ye in c)ie=c[ye],ue=o[ye],!c.hasOwnProperty(ye)||ie===ue||ie==null&&ue==null||Rt(n,i,ye,ie,c,ue)}function Ov(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function E_(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var m=o[c],p=m.transferSize,w=m.initiatorType,I=m.duration;if(p&&I&&Ov(w)){for(w=0,I=m.responseEnd,c+=1;c<o.length;c++){var X=o[c],ae=X.startTime;if(ae>I)break;var fe=X.transferSize,ye=X.initiatorType;fe&&Ov(ye)&&(X=X.responseEnd,w+=fe*(X<I?1:(I-ae)/(X-ae)))}if(--c,i+=8*(p+w)/(m.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Cg=null,Eg=null;function _d(n){return n.nodeType===9?n:n.ownerDocument}function Pv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Vv(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Ng(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Sg=null;function N_(){var n=window.event;return n&&n.type==="popstate"?n===Sg?!1:(Sg=n,!0):(Sg=null,!1)}var zv=typeof setTimeout=="function"?setTimeout:void 0,S_=typeof clearTimeout=="function"?clearTimeout:void 0,Kv=typeof Promise=="function"?Promise:void 0,__=typeof queueMicrotask=="function"?queueMicrotask:typeof Kv<"u"?function(n){return Kv.resolve(null).then(n).catch(j_)}:zv;function j_(n){setTimeout(function(){throw n})}function hi(n){return n==="head"}function Gv(n,i){var o=i,c=0;do{var m=o.nextSibling;if(n.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"||o==="/&"){if(c===0){n.removeChild(m),jo(i);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")ic(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,ic(o);for(var p=o.firstChild;p;){var w=p.nextSibling,I=p.nodeName;p[It]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&p.rel.toLowerCase()==="stylesheet"||o.removeChild(p),p=w}}else o==="body"&&ic(n.ownerDocument.body);o=m}while(o);jo(i)}function qv(n,i){var o=n;n=0;do{var c=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=c}while(o)}function _g(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":_g(o),hs(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function T_(n,i,o,c){for(;n.nodeType===1;){var m=o;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[It])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(p=n.getAttribute("rel"),p==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(p!==m.rel||n.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||n.getAttribute("title")!==(m.title==null?null:m.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(p=n.getAttribute("src"),(p!==(m.src==null?null:m.src)||n.getAttribute("type")!==(m.type==null?null:m.type)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&p&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var p=m.name==null?null:""+m.name;if(m.type==="hidden"&&n.getAttribute("name")===p)return n}else return n;if(n=nn(n.nextSibling),n===null)break}return null}function U_(n,i,o){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=nn(n.nextSibling),n===null))return null;return n}function Yv(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=nn(n.nextSibling),n===null))return null;return n}function jg(n){return n.data==="$?"||n.data==="$~"}function Tg(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function Q_(n,i){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||o.readyState!=="loading")i();else{var c=function(){i(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function nn(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var Ug=null;function $v(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(i===0)return nn(n.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}n=n.nextSibling}return null}function Xv(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return n;i--}else o!=="/$"&&o!=="/&"||i++}n=n.previousSibling}return null}function Jv(n,i,o){switch(i=_d(o),n){case"html":if(n=i.documentElement,!n)throw Error(s(452));return n;case"head":if(n=i.head,!n)throw Error(s(453));return n;case"body":if(n=i.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function ic(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);hs(n)}var an=new Map,Wv=new Set;function jd(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var _a=F.d;F.d={f:F_,r:I_,D:D_,C:k_,L:R_,m:M_,X:H_,S:L_,M:O_};function F_(){var n=_a.f(),i=bd();return n||i}function I_(n){var i=hr(n);i!==null&&i.tag===5&&i.type==="form"?mb(i):_a.r(n)}var No=typeof document>"u"?null:document;function Zv(n,i,o){var c=No;if(c&&typeof i=="string"&&i){var m=bs(i);m='link[rel="'+n+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),Wv.has(m)||(Wv.add(m),n={rel:n,crossOrigin:o,href:i},c.querySelector(m)===null&&(i=c.createElement("link"),Yr(i,"link",n),_t(i),c.head.appendChild(i)))}}function D_(n){_a.D(n),Zv("dns-prefetch",n,null)}function k_(n,i){_a.C(n,i),Zv("preconnect",n,i)}function R_(n,i,o){_a.L(n,i,o);var c=No;if(c&&n&&i){var m='link[rel="preload"][as="'+bs(i)+'"]';i==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+bs(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+bs(o.imageSizes)+'"]')):m+='[href="'+bs(n)+'"]';var p=m;switch(i){case"style":p=So(n);break;case"script":p=_o(n)}an.has(p)||(n=y({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:n,as:i},o),an.set(p,n),c.querySelector(m)!==null||i==="style"&&c.querySelector(Ac(p))||i==="script"&&c.querySelector(oc(p))||(i=c.createElement("link"),Yr(i,"link",n),_t(i),c.head.appendChild(i)))}}function M_(n,i){_a.m(n,i);var o=No;if(o&&n){var c=i&&typeof i.as=="string"?i.as:"script",m='link[rel="modulepreload"][as="'+bs(c)+'"][href="'+bs(n)+'"]',p=m;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=_o(n)}if(!an.has(p)&&(n=y({rel:"modulepreload",href:n},i),an.set(p,n),o.querySelector(m)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(oc(p)))return}c=o.createElement("link"),Yr(c,"link",n),_t(c),o.head.appendChild(c)}}}function L_(n,i,o){_a.S(n,i,o);var c=No;if(c&&n){var m=Vr(c).hoistableStyles,p=So(n);i=i||"default";var w=m.get(p);if(!w){var I={loading:0,preload:null};if(w=c.querySelector(Ac(p)))I.loading=5;else{n=y({rel:"stylesheet",href:n,"data-precedence":i},o),(o=an.get(p))&&Qg(n,o);var X=w=c.createElement("link");_t(X),Yr(X,"link",n),X._p=new Promise(function(ae,fe){X.onload=ae,X.onerror=fe}),X.addEventListener("load",function(){I.loading|=1}),X.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Td(w,i,c)}w={type:"stylesheet",instance:w,count:1,state:I},m.set(p,w)}}}function H_(n,i){_a.X(n,i);var o=No;if(o&&n){var c=Vr(o).hoistableScripts,m=_o(n),p=c.get(m);p||(p=o.querySelector(oc(m)),p||(n=y({src:n,async:!0},i),(i=an.get(m))&&Fg(n,i),p=o.createElement("script"),_t(p),Yr(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(m,p))}}function O_(n,i){_a.M(n,i);var o=No;if(o&&n){var c=Vr(o).hoistableScripts,m=_o(n),p=c.get(m);p||(p=o.querySelector(oc(m)),p||(n=y({src:n,async:!0,type:"module"},i),(i=an.get(m))&&Fg(n,i),p=o.createElement("script"),_t(p),Yr(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(m,p))}}function ew(n,i,o,c){var m=(m=Ce.current)?jd(m):null;if(!m)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=So(o.href),o=Vr(m).hoistableStyles,c=o.get(i),c||(c={type:"style",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=So(o.href);var p=Vr(m).hoistableStyles,w=p.get(n);if(w||(m=m.ownerDocument||m,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(n,w),(p=m.querySelector(Ac(n)))&&!p._p&&(w.instance=p,w.state.loading=5),an.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},an.set(n,o),p||P_(m,n,o,w.state))),i&&c===null)throw Error(s(528,""));return w}if(i&&c!==null)throw Error(s(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=_o(o),o=Vr(m).hoistableScripts,c=o.get(i),c||(c={type:"script",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function So(n){return'href="'+bs(n)+'"'}function Ac(n){return'link[rel="stylesheet"]['+n+"]"}function tw(n){return y({},n,{"data-precedence":n.precedence,precedence:null})}function P_(n,i,o,c){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=n.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),Yr(i,"link",o),_t(i),n.head.appendChild(i))}function _o(n){return'[src="'+bs(n)+'"]'}function oc(n){return"script[async]"+n}function rw(n,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var c=n.querySelector('style[data-href~="'+bs(o.href)+'"]');if(c)return i.instance=c,_t(c),c;var m=y({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),_t(c),Yr(c,"style",m),Td(c,o.precedence,n),i.instance=c;case"stylesheet":m=So(o.href);var p=n.querySelector(Ac(m));if(p)return i.state.loading|=4,i.instance=p,_t(p),p;c=tw(o),(m=an.get(m))&&Qg(c,m),p=(n.ownerDocument||n).createElement("link"),_t(p);var w=p;return w._p=new Promise(function(I,X){w.onload=I,w.onerror=X}),Yr(p,"link",c),i.state.loading|=4,Td(p,o.precedence,n),i.instance=p;case"script":return p=_o(o.src),(m=n.querySelector(oc(p)))?(i.instance=m,_t(m),m):(c=o,(m=an.get(p))&&(c=y({},o),Fg(c,m)),n=n.ownerDocument||n,m=n.createElement("script"),_t(m),Yr(m,"link",c),n.head.appendChild(m),i.instance=m);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,Td(c,o.precedence,n));return i.instance}function Td(n,i,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=c.length?c[c.length-1]:null,p=m,w=0;w<c.length;w++){var I=c[w];if(I.dataset.precedence===i)p=I;else if(p!==m)break}p?p.parentNode.insertBefore(n,p.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(n,i.firstChild))}function Qg(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function Fg(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Ud=null;function sw(n,i,o){if(Ud===null){var c=new Map,m=Ud=new Map;m.set(o,c)}else m=Ud,c=m.get(o),c||(c=new Map,m.set(o,c));if(c.has(n))return c;for(c.set(n,null),o=o.getElementsByTagName(n),m=0;m<o.length;m++){var p=o[m];if(!(p[It]||p[nr]||n==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var w=p.getAttribute(i)||"";w=n+w;var I=c.get(w);I?I.push(p):c.set(w,[p])}}return c}function nw(n,i,o){n=n.ownerDocument||n,n.head.insertBefore(o,i==="title"?n.querySelector("head > title"):null)}function V_(n,i,o){if(o===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(n=i.disabled,typeof i.precedence=="string"&&n==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function aw(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function z_(n,i,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=So(c.href),p=i.querySelector(Ac(m));if(p){i=p._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=Qd.bind(n),i.then(n,n)),o.state.loading|=4,o.instance=p,_t(p);return}p=i.ownerDocument||i,c=tw(c),(m=an.get(m))&&Qg(c,m),p=p.createElement("link"),_t(p);var w=p;w._p=new Promise(function(I,X){w.onload=I,w.onerror=X}),Yr(p,"link",c),o.instance=p}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=Qd.bind(n),i.addEventListener("load",o),i.addEventListener("error",o))}}var Ig=0;function K_(n,i){return n.stylesheets&&n.count===0&&Id(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var c=setTimeout(function(){if(n.stylesheets&&Id(n,n.stylesheets),n.unsuspend){var p=n.unsuspend;n.unsuspend=null,p()}},6e4+i);0<n.imgBytes&&Ig===0&&(Ig=62500*E_());var m=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Id(n,n.stylesheets),n.unsuspend)){var p=n.unsuspend;n.unsuspend=null,p()}},(n.imgBytes>Ig?50:800)+i);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(m)}}:null}function Qd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Id(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Fd=null;function Id(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Fd=new Map,i.forEach(G_,n),Fd=null,Qd.call(n))}function G_(n,i){if(!(i.state.loading&4)){var o=Fd.get(n);if(o)var c=o.get(null);else{o=new Map,Fd.set(n,o);for(var m=n.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<m.length;p++){var w=m[p];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(o.set(w.dataset.precedence,w),c=w)}c&&o.set(null,c)}m=i.instance,w=m.getAttribute("data-precedence"),p=o.get(w)||c,p===c&&o.set(null,m),o.set(w,m),this.count++,c=Qd.bind(this),m.addEventListener("load",c),m.addEventListener("error",c),p?p.parentNode.insertBefore(m,p.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(m,n.firstChild)),i.state.loading|=4}}var lc={$$typeof:z,Provider:null,Consumer:null,_currentValue:L,_currentValue2:L,_threadCount:0};function q_(n,i,o,c,m,p,w,I,X){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qs(0),this.hiddenUpdates=Qs(null),this.identifierPrefix=c,this.onUncaughtError=m,this.onCaughtError=p,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=X,this.incompleteTransitions=new Map}function iw(n,i,o,c,m,p,w,I,X,ae,fe,ye){return n=new q_(n,i,o,w,X,ae,fe,ye,I),i=1,p===!0&&(i|=24),p=Ms(3,null,null,i),n.current=p,p.stateNode=n,i=hm(),i.refCount++,n.pooledCache=i,i.refCount++,p.memoizedState={element:c,isDehydrated:o,cache:i},pm(p),n}function Aw(n){return n?(n=no,n):no}function ow(n,i,o,c,m,p){m=Aw(m),c.context===null?c.context=m:c.pendingContext=m,c=ri(i),c.payload={element:o},p=p===void 0?null:p,p!==null&&(c.callback=p),o=si(n,c,i),o!==null&&(Ns(o,n,i),Ol(o,n,i))}function lw(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<i?o:i}}function Dg(n,i){lw(n,i),(n=n.alternate)&&lw(n,i)}function cw(n){if(n.tag===13||n.tag===31){var i=aA(n,67108864);i!==null&&Ns(i,n,67108864),Dg(n,67108864)}}function uw(n){if(n.tag===13||n.tag===31){var i=Vs();i=ca(i);var o=aA(n,i);o!==null&&Ns(o,n,i),Dg(n,i)}}var Dd=!0;function Y_(n,i,o,c){var m=H.T;H.T=null;var p=F.p;try{F.p=2,kg(n,i,o,c)}finally{F.p=p,H.T=m}}function $_(n,i,o,c){var m=H.T;H.T=null;var p=F.p;try{F.p=8,kg(n,i,o,c)}finally{F.p=p,H.T=m}}function kg(n,i,o,c){if(Dd){var m=Rg(c);if(m===null)wg(n,i,c,kd,o),hw(n,c);else if(J_(m,n,i,o,c))c.stopPropagation();else if(hw(n,c),i&4&&-1<X_.indexOf(n)){for(;m!==null;){var p=hr(m);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var w=Ys(p.pendingLanes);if(w!==0){var I=p;for(I.pendingLanes|=2,I.entangledLanes|=2;w;){var X=1<<31-Oe(w);I.entanglements[1]|=X,w&=~X}Kn(p),(Et&6)===0&&(xd=Pt()+500,sc(0))}}break;case 31:case 13:I=aA(p,2),I!==null&&Ns(I,p,2),bd(),Dg(p,2)}if(p=Rg(c),p===null&&wg(n,i,c,kd,o),p===m)break;m=p}m!==null&&c.stopPropagation()}else wg(n,i,c,null,o)}}function Rg(n){return n=$s(n),Mg(n)}var kd=null;function Mg(n){if(kd=null,n=Xe(n),n!==null){var i=l(n);if(i===null)n=null;else{var o=i.tag;if(o===13){if(n=u(i),n!==null)return n;n=null}else if(o===31){if(n=d(i),n!==null)return n;n=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return kd=n,null}function dw(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ve()){case Vt:return 2;case sr:return 8;case Ht:case br:return 32;case kr:return 268435456;default:return 32}default:return 32}}var Lg=!1,fi=null,mi=null,gi=null,cc=new Map,uc=new Map,pi=[],X_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function hw(n,i){switch(n){case"focusin":case"focusout":fi=null;break;case"dragenter":case"dragleave":mi=null;break;case"mouseover":case"mouseout":gi=null;break;case"pointerover":case"pointerout":cc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":uc.delete(i.pointerId)}}function dc(n,i,o,c,m,p){return n===null||n.nativeEvent!==p?(n={blockedOn:i,domEventName:o,eventSystemFlags:c,nativeEvent:p,targetContainers:[m]},i!==null&&(i=hr(i),i!==null&&cw(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,m!==null&&i.indexOf(m)===-1&&i.push(m),n)}function J_(n,i,o,c,m){switch(i){case"focusin":return fi=dc(fi,n,i,o,c,m),!0;case"dragenter":return mi=dc(mi,n,i,o,c,m),!0;case"mouseover":return gi=dc(gi,n,i,o,c,m),!0;case"pointerover":var p=m.pointerId;return cc.set(p,dc(cc.get(p)||null,n,i,o,c,m)),!0;case"gotpointercapture":return p=m.pointerId,uc.set(p,dc(uc.get(p)||null,n,i,o,c,m)),!0}return!1}function fw(n){var i=Xe(n.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=u(o),i!==null){n.blockedOn=i,Is(n.priority,function(){uw(o)});return}}else if(i===31){if(i=d(o),i!==null){n.blockedOn=i,Is(n.priority,function(){uw(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Rd(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var o=Rg(n.nativeEvent);if(o===null){o=n.nativeEvent;var c=new o.constructor(o.type,o);El=c,o.target.dispatchEvent(c),El=null}else return i=hr(o),i!==null&&cw(i),n.blockedOn=o,!1;i.shift()}return!0}function mw(n,i,o){Rd(n)&&o.delete(i)}function W_(){Lg=!1,fi!==null&&Rd(fi)&&(fi=null),mi!==null&&Rd(mi)&&(mi=null),gi!==null&&Rd(gi)&&(gi=null),cc.forEach(mw),uc.forEach(mw)}function Md(n,i){n.blockedOn===i&&(n.blockedOn=null,Lg||(Lg=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,W_)))}var Ld=null;function gw(n){Ld!==n&&(Ld=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Ld===n&&(Ld=null);for(var i=0;i<n.length;i+=3){var o=n[i],c=n[i+1],m=n[i+2];if(typeof c!="function"){if(Mg(c||o)===null)continue;break}var p=hr(o);p!==null&&(n.splice(i,3),i-=3,Rm(p,{pending:!0,data:m,method:o.method,action:c},c,m))}}))}function jo(n){function i(X){return Md(X,n)}fi!==null&&Md(fi,n),mi!==null&&Md(mi,n),gi!==null&&Md(gi,n),cc.forEach(i),uc.forEach(i);for(var o=0;o<pi.length;o++){var c=pi[o];c.blockedOn===n&&(c.blockedOn=null)}for(;0<pi.length&&(o=pi[0],o.blockedOn===null);)fw(o),o.blockedOn===null&&pi.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var m=o[c],p=o[c+1],w=m[or]||null;if(typeof p=="function")w||gw(o);else if(w){var I=null;if(p&&p.hasAttribute("formAction")){if(m=p,w=p[or]||null)I=w.formAction;else if(Mg(m)!==null)continue}else I=w.action;typeof I=="function"?o[c+1]=I:(o.splice(c,3),c-=3),gw(o)}}}function pw(){function n(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(w){return m=w})},focusReset:"manual",scroll:"manual"})}function i(){m!==null&&(m(),m=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,m=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),m!==null&&(m(),m=null)}}}function Hg(n){this._internalRoot=n}Hd.prototype.render=Hg.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(s(409));var o=i.current,c=Vs();ow(o,c,n,i,null,null)},Hd.prototype.unmount=Hg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;ow(n.current,2,null,n,null,null),bd(),i[me]=null}};function Hd(n){this._internalRoot=n}Hd.prototype.unstable_scheduleHydration=function(n){if(n){var i=Oa();n={blockedOn:null,target:n,priority:i};for(var o=0;o<pi.length&&i!==0&&i<pi[o].priority;o++);pi.splice(o,0,n),o===0&&fw(n)}};var xw=e.version;if(xw!=="19.2.3")throw Error(s(527,xw,"19.2.3"));F.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=g(i),n=n!==null?x(n):null,n=n===null?null:n.stateNode,n};var Z_={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Od=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Od.isDisabled&&Od.supportsFiber)try{Re=Od.inject(Z_),Ye=Od}catch{}}return fc.createRoot=function(n,i){if(!A(n))throw Error(s(299));var o=!1,c="",m=Eb,p=Nb,w=Sb;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(m=i.onUncaughtError),i.onCaughtError!==void 0&&(p=i.onCaughtError),i.onRecoverableError!==void 0&&(w=i.onRecoverableError)),i=iw(n,1,!1,null,null,o,c,null,m,p,w,pw),n[me]=i.current,vg(n),new Hg(i)},fc.hydrateRoot=function(n,i,o){if(!A(n))throw Error(s(299));var c=!1,m="",p=Eb,w=Nb,I=Sb,X=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(I=o.onRecoverableError),o.formState!==void 0&&(X=o.formState)),i=iw(n,1,!0,i,o??null,c,m,X,p,w,I,pw),i.context=Aw(null),o=i.current,c=Vs(),c=ca(c),m=ri(c),m.callback=null,si(o,m,c),o=c,i.current.lanes=o,la(i,o),Kn(i),n[me]=i.current,vg(n),new Hd(i)},fc.version="19.2.3",fc}var _w;function oj(){if(_w)return Vg.exports;_w=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Vg.exports=Aj(),Vg.exports}var lj=oj();const cj=()=>{};var jw={};const N1=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let A=r.charCodeAt(s);A<128?e[t++]=A:A<2048?(e[t++]=A>>6|192,e[t++]=A&63|128):(A&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(A=65536+((A&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=A>>18|240,e[t++]=A>>12&63|128,e[t++]=A>>6&63|128,e[t++]=A&63|128):(e[t++]=A>>12|224,e[t++]=A>>6&63|128,e[t++]=A&63|128)}return e},uj=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const A=r[t++];if(A<128)e[s++]=String.fromCharCode(A);else if(A>191&&A<224){const l=r[t++];e[s++]=String.fromCharCode((A&31)<<6|l&63)}else if(A>239&&A<365){const l=r[t++],u=r[t++],d=r[t++],f=((A&7)<<18|(l&63)<<12|(u&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(f>>10)),e[s++]=String.fromCharCode(56320+(f&1023))}else{const l=r[t++],u=r[t++];e[s++]=String.fromCharCode((A&15)<<12|(l&63)<<6|u&63)}}return e.join("")},S1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let A=0;A<r.length;A+=3){const l=r[A],u=A+1<r.length,d=u?r[A+1]:0,f=A+2<r.length,g=f?r[A+2]:0,x=l>>2,y=(l&3)<<4|d>>4;let v=(d&15)<<2|g>>6,N=g&63;f||(N=64,u||(v=64)),s.push(t[x],t[y],t[v],t[N])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(N1(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):uj(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let A=0;A<r.length;){const l=t[r.charAt(A++)],d=A<r.length?t[r.charAt(A)]:0;++A;const g=A<r.length?t[r.charAt(A)]:64;++A;const y=A<r.length?t[r.charAt(A)]:64;if(++A,l==null||d==null||g==null||y==null)throw new dj;const v=l<<2|d>>4;if(s.push(v),g!==64){const N=d<<4&240|g>>2;if(s.push(N),y!==64){const M=g<<6&192|y;s.push(M)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class dj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hj=function(r){const e=N1(r);return S1.encodeByteArray(e,!0)},Rh=function(r){return hj(r).replace(/\./g,"")},_1=function(r){try{return S1.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function fj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const mj=()=>fj().__FIREBASE_DEFAULTS__,gj=()=>{if(typeof process>"u"||typeof jw>"u")return;const r=jw.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},pj=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&_1(r[1]);return e&&JSON.parse(e)},yf=()=>{try{return cj()||mj()||gj()||pj()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},j1=r=>yf()?.emulatorHosts?.[r],xj=r=>{const e=j1(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},T1=()=>yf()?.config,U1=r=>yf()?.[`_${r}`];class yj{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}function cl(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Q1(r){return(await fetch(r,{credentials:"include"})).ok}function bj(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",A=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${s}`,aud:s,iat:A,exp:A+3600,auth_time:A,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Rh(JSON.stringify(t)),Rh(JSON.stringify(u)),""].join(".")}const Fc={};function vj(){const r={prod:[],emulator:[]};for(const e of Object.keys(Fc))Fc[e]?r.emulator.push(e):r.prod.push(e);return r}function wj(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Tw=!1;function F1(r,e){if(typeof window>"u"||typeof document>"u"||!cl(window.location.host)||Fc[r]===e||Fc[r]||Tw)return;Fc[r]=e;function t(v){return`__firebase__banner__${v}`}const s="__firebase__banner",l=vj().prod.length>0;function u(){const v=document.getElementById(s);v&&v.remove()}function d(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function f(v,N){v.setAttribute("width","24"),v.setAttribute("id",N),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function g(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{Tw=!0,u()},v}function x(v,N){v.setAttribute("id",N),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function y(){const v=wj(s),N=t("text"),M=document.getElementById(N)||document.createElement("span"),S=t("learnmore"),V=document.getElementById(S)||document.createElement("a"),K=t("preprendIcon"),G=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const z=v.element;d(z),x(V,S);const q=g();f(G,K),z.append(G,M,V,q),document.body.appendChild(z)}l?(M.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}function ls(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Bj(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ls())}function Cj(){const r=yf()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ej(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Nj(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Sj(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _j(){const r=ls();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function jj(){return!Cj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Tj(){try{return typeof indexedDB=="object"}catch{return!1}}function Uj(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",A=self.indexedDB.open(s);A.onsuccess=()=>{A.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},A.onupgradeneeded=()=>{t=!1},A.onerror=()=>{e(A.error?.message||"")}}catch(t){e(t)}})}const Qj="FirebaseError";class La extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=Qj,Object.setPrototypeOf(this,La.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Au.prototype.create)}}class Au{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},A=`${this.service}/${e}`,l=this.errors[e],u=l?Fj(l,s):"Error",d=`${this.serviceName}: ${u} (${A}).`;return new La(A,d,s)}}function Fj(r,e){return r.replace(Ij,(t,s)=>{const A=e[s];return A!=null?String(A):`<${s}?>`})}const Ij=/\{\$([^}]+)}/g;function Dj(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function FA(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const A of t){if(!s.includes(A))return!1;const l=r[A],u=e[A];if(Uw(l)&&Uw(u)){if(!FA(l,u))return!1}else if(l!==u)return!1}for(const A of s)if(!t.includes(A))return!1;return!0}function Uw(r){return r!==null&&typeof r=="object"}function ou(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(A=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(A))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function kj(r,e){const t=new Rj(r,e);return t.subscribe.bind(t)}class Rj{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let A;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");Mj(e,["next","error","complete"])?A=e:A={next:e,error:t,complete:s},A.next===void 0&&(A.next=qg),A.error===void 0&&(A.error=qg),A.complete===void 0&&(A.complete=qg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?A.error(this.finalError):A.complete()}catch{}}),this.observers.push(A),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Mj(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function qg(){}function hn(r){return r&&r._delegate?r._delegate:r}class IA{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const vA="[DEFAULT]";class Lj{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new yj;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const A=this.getOrInitializeService({instanceIdentifier:t});A&&s.resolve(A)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(A){if(s)return null;throw A}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Oj(e))try{this.getOrInitializeService({instanceIdentifier:vA})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const A=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:A});s.resolve(l)}catch{}}}}clearInstance(e=vA){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=vA){return this.instances.has(e)}getOptions(e=vA){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const A=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);s===d&&u.resolve(A)}return A}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),A=this.onInitCallbacks.get(s)??new Set;A.add(e),this.onInitCallbacks.set(s,A);const l=this.instances.get(s);return l&&e(l,s),()=>{A.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const A of s)try{A(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Hj(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=vA){return this.component?this.component.multipleInstances?e:vA:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Hj(r){return r===vA?void 0:r}function Oj(r){return r.instantiationMode==="EAGER"}class Pj{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Lj(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var mt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(mt||(mt={}));const Vj={debug:mt.DEBUG,verbose:mt.VERBOSE,info:mt.INFO,warn:mt.WARN,error:mt.ERROR,silent:mt.SILENT},zj=mt.INFO,Kj={[mt.DEBUG]:"log",[mt.VERBOSE]:"log",[mt.INFO]:"info",[mt.WARN]:"warn",[mt.ERROR]:"error"},Gj=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),A=Kj[e];if(A)console[A](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let $x=class{constructor(e){this.name=e,this._logLevel=zj,this._logHandler=Gj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in mt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Vj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,mt.DEBUG,...e),this._logHandler(this,mt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,mt.VERBOSE,...e),this._logHandler(this,mt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,mt.INFO,...e),this._logHandler(this,mt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,mt.WARN,...e),this._logHandler(this,mt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,mt.ERROR,...e),this._logHandler(this,mt.ERROR,...e)}};const qj=(r,e)=>e.some(t=>r instanceof t);let Qw,Fw;function Yj(){return Qw||(Qw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $j(){return Fw||(Fw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const I1=new WeakMap,zp=new WeakMap,D1=new WeakMap,Yg=new WeakMap,Xx=new WeakMap;function Xj(r){const e=new Promise((t,s)=>{const A=()=>{r.removeEventListener("success",l),r.removeEventListener("error",u)},l=()=>{t(Ui(r.result)),A()},u=()=>{s(r.error),A()};r.addEventListener("success",l),r.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&I1.set(t,r)}).catch(()=>{}),Xx.set(e,r),e}function Jj(r){if(zp.has(r))return;const e=new Promise((t,s)=>{const A=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",u),r.removeEventListener("abort",u)},l=()=>{t(),A()},u=()=>{s(r.error||new DOMException("AbortError","AbortError")),A()};r.addEventListener("complete",l),r.addEventListener("error",u),r.addEventListener("abort",u)});zp.set(r,e)}let Kp={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return zp.get(r);if(e==="objectStoreNames")return r.objectStoreNames||D1.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ui(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function Wj(r){Kp=r(Kp)}function Zj(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call($g(this),e,...t);return D1.set(s,e.sort?e.sort():[e]),Ui(s)}:$j().includes(r)?function(...e){return r.apply($g(this),e),Ui(I1.get(this))}:function(...e){return Ui(r.apply($g(this),e))}}function eT(r){return typeof r=="function"?Zj(r):(r instanceof IDBTransaction&&Jj(r),qj(r,Yj())?new Proxy(r,Kp):r)}function Ui(r){if(r instanceof IDBRequest)return Xj(r);if(Yg.has(r))return Yg.get(r);const e=eT(r);return e!==r&&(Yg.set(r,e),Xx.set(e,r)),e}const $g=r=>Xx.get(r);function tT(r,e,{blocked:t,upgrade:s,blocking:A,terminated:l}={}){const u=indexedDB.open(r,e),d=Ui(u);return s&&u.addEventListener("upgradeneeded",f=>{s(Ui(u.result),f.oldVersion,f.newVersion,Ui(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{l&&f.addEventListener("close",()=>l()),A&&f.addEventListener("versionchange",g=>A(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const rT=["get","getKey","getAll","getAllKeys","count"],sT=["put","add","delete","clear"],Xg=new Map;function Iw(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Xg.get(e))return Xg.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,A=sT.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(A||rT.includes(t)))return;const l=async function(u,...d){const f=this.transaction(u,A?"readwrite":"readonly");let g=f.store;return s&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),A&&f.done]))[0]};return Xg.set(e,l),l}Wj(r=>({...r,get:(e,t,s)=>Iw(e,t)||r.get(e,t,s),has:(e,t)=>!!Iw(e,t)||r.has(e,t)}));class nT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(aT(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function aT(r){return r.getComponent()?.type==="VERSION"}const Gp="@firebase/app",Dw="0.14.8";const Ia=new $x("@firebase/app"),iT="@firebase/app-compat",AT="@firebase/analytics-compat",oT="@firebase/analytics",lT="@firebase/app-check-compat",cT="@firebase/app-check",uT="@firebase/auth",dT="@firebase/auth-compat",hT="@firebase/database",fT="@firebase/data-connect",mT="@firebase/database-compat",gT="@firebase/functions",pT="@firebase/functions-compat",xT="@firebase/installations",yT="@firebase/installations-compat",bT="@firebase/messaging",vT="@firebase/messaging-compat",wT="@firebase/performance",BT="@firebase/performance-compat",CT="@firebase/remote-config",ET="@firebase/remote-config-compat",NT="@firebase/storage",ST="@firebase/storage-compat",_T="@firebase/firestore",jT="@firebase/ai",TT="@firebase/firestore-compat",UT="firebase",QT="12.9.0";const qp="[DEFAULT]",FT={[Gp]:"fire-core",[iT]:"fire-core-compat",[oT]:"fire-analytics",[AT]:"fire-analytics-compat",[cT]:"fire-app-check",[lT]:"fire-app-check-compat",[uT]:"fire-auth",[dT]:"fire-auth-compat",[hT]:"fire-rtdb",[fT]:"fire-data-connect",[mT]:"fire-rtdb-compat",[gT]:"fire-fn",[pT]:"fire-fn-compat",[xT]:"fire-iid",[yT]:"fire-iid-compat",[bT]:"fire-fcm",[vT]:"fire-fcm-compat",[wT]:"fire-perf",[BT]:"fire-perf-compat",[CT]:"fire-rc",[ET]:"fire-rc-compat",[NT]:"fire-gcs",[ST]:"fire-gcs-compat",[_T]:"fire-fst",[TT]:"fire-fst-compat",[jT]:"fire-vertex","fire-js":"fire-js",[UT]:"fire-js-all"};const Mh=new Map,IT=new Map,Yp=new Map;function kw(r,e){try{r.container.addComponent(e)}catch(t){Ia.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function el(r){const e=r.name;if(Yp.has(e))return Ia.debug(`There were multiple attempts to register component ${e}.`),!1;Yp.set(e,r);for(const t of Mh.values())kw(t,r);for(const t of IT.values())kw(t,r);return!0}function Jx(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Cn(r){return r==null?!1:r.settings!==void 0}const DT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qi=new Au("app","Firebase",DT);class kT{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new IA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qi.create("app-deleted",{appName:this._name})}}const ul=QT;function Wx(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:qp,automaticDataCollectionEnabled:!0,...e},A=s.name;if(typeof A!="string"||!A)throw Qi.create("bad-app-name",{appName:String(A)});if(t||(t=T1()),!t)throw Qi.create("no-options");const l=Mh.get(A);if(l){if(FA(t,l.options)&&FA(s,l.config))return l;throw Qi.create("duplicate-app",{appName:A})}const u=new Pj(A);for(const f of Yp.values())u.addComponent(f);const d=new kT(t,s,u);return Mh.set(A,d),d}function k1(r=qp){const e=Mh.get(r);if(!e&&r===qp&&T1())return Wx();if(!e)throw Qi.create("no-app",{appName:r});return e}function Fi(r,e,t){let s=FT[r]??r;t&&(s+=`-${t}`);const A=s.match(/\s|\//),l=e.match(/\s|\//);if(A||l){const u=[`Unable to register library "${s}" with version "${e}":`];A&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),A&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ia.warn(u.join(" "));return}el(new IA(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const RT="firebase-heartbeat-database",MT=1,qc="firebase-heartbeat-store";let Jg=null;function R1(){return Jg||(Jg=tT(RT,MT,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(qc)}catch(t){console.warn(t)}}}}).catch(r=>{throw Qi.create("idb-open",{originalErrorMessage:r.message})})),Jg}async function LT(r){try{const t=(await R1()).transaction(qc),s=await t.objectStore(qc).get(M1(r));return await t.done,s}catch(e){if(e instanceof La)Ia.warn(e.message);else{const t=Qi.create("idb-get",{originalErrorMessage:e?.message});Ia.warn(t.message)}}}async function Rw(r,e){try{const s=(await R1()).transaction(qc,"readwrite");await s.objectStore(qc).put(e,M1(r)),await s.done}catch(t){if(t instanceof La)Ia.warn(t.message);else{const s=Qi.create("idb-set",{originalErrorMessage:t?.message});Ia.warn(s.message)}}}function M1(r){return`${r.name}!${r.options.appId}`}const HT=1024,OT=30;class PT{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new zT(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Mw();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(A=>A.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>OT){const A=KT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(A,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ia.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Mw(),{heartbeatsToSend:t,unsentEntries:s}=VT(this._heartbeatsCache.heartbeats),A=Rh(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),A}catch(e){return Ia.warn(e),""}}}function Mw(){return new Date().toISOString().substring(0,10)}function VT(r,e=HT){const t=[];let s=r.slice();for(const A of r){const l=t.find(u=>u.agent===A.agent);if(l){if(l.dates.push(A.date),Lw(t)>e){l.dates.pop();break}}else if(t.push({agent:A.agent,dates:[A.date]}),Lw(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class zT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Tj()?Uj().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await LT(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Rw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Rw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Lw(r){return Rh(JSON.stringify({version:2,heartbeats:r})).length}function KT(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}function GT(r){el(new IA("platform-logger",e=>new nT(e),"PRIVATE")),el(new IA("heartbeat",e=>new PT(e),"PRIVATE")),Fi(Gp,Dw,r),Fi(Gp,Dw,"esm2020"),Fi("fire-js","")}GT("");var qT="firebase",YT="12.9.0";Fi(qT,YT,"app");function L1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $T=L1,H1=new Au("auth","Firebase",L1());const Lh=new $x("@firebase/auth");function XT(r,...e){Lh.logLevel<=mt.WARN&&Lh.warn(`Auth (${ul}): ${r}`,...e)}function Bh(r,...e){Lh.logLevel<=mt.ERROR&&Lh.error(`Auth (${ul}): ${r}`,...e)}function ta(r,...e){throw e0(r,...e)}function Sn(r,...e){return e0(r,...e)}function Zx(r,e,t){const s={...$T(),[e]:t};return new Au("auth","Firebase",s).create(e,{appName:r.name})}function SA(r){return Zx(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function JT(r,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&ta(r,"argument-error"),Zx(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function e0(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return H1.create(r,...e)}function $e(r,e,...t){if(!r)throw e0(e,...t)}function Ua(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Bh(e),new Error(e)}function Da(r,e){r||Ua(e)}function $p(){return typeof self<"u"&&self.location?.href||""}function WT(){return Hw()==="http:"||Hw()==="https:"}function Hw(){return typeof self<"u"&&self.location?.protocol||null}function ZT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(WT()||Nj()||"connection"in navigator)?navigator.onLine:!0}function eU(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class lu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Da(t>e,"Short delay should be less than long delay!"),this.isMobile=Bj()||Sj()}get(){return ZT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function t0(r,e){Da(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class O1{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ua("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ua("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ua("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const tU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const rU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],sU=new lu(3e4,6e4);function r0(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function dl(r,e,t,s,A={}){return P1(r,A,async()=>{let l={},u={};s&&(e==="GET"?u=s:l={body:JSON.stringify(s)});const d=ou({key:r.config.apiKey,...u}).slice(1),f=await r._getAdditionalHeaders();f["Content-Type"]="application/json",r.languageCode&&(f["X-Firebase-Locale"]=r.languageCode);const g={method:e,headers:f,...l};return Ej()||(g.referrerPolicy="no-referrer"),r.emulatorConfig&&cl(r.emulatorConfig.host)&&(g.credentials="include"),O1.fetch()(await V1(r,r.config.apiHost,t,d),g)})}async function P1(r,e,t){r._canInitEmulator=!1;const s={...tU,...e};try{const A=new aU(r),l=await Promise.race([t(),A.promise]);A.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw Pd(r,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const d=l.ok?u.errorMessage:u.error.message,[f,g]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pd(r,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw Pd(r,"email-already-in-use",u);if(f==="USER_DISABLED")throw Pd(r,"user-disabled",u);const x=s[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Zx(r,x,g);ta(r,x)}}catch(A){if(A instanceof La)throw A;ta(r,"network-request-failed",{message:String(A)})}}async function nU(r,e,t,s,A={}){const l=await dl(r,e,t,s,A);return"mfaPendingCredential"in l&&ta(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function V1(r,e,t,s){const A=`${e}${t}?${s}`,l=r,u=l.config.emulator?t0(r.config,A):`${r.config.apiScheme}://${A}`;return rU.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}class aU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Sn(this.auth,"network-request-failed")),sU.get())})}}function Pd(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const A=Sn(r,e,s);return A.customData._tokenResponse=t,A}async function iU(r,e){return dl(r,"POST","/v1/accounts:delete",e)}async function Hh(r,e){return dl(r,"POST","/v1/accounts:lookup",e)}function Ic(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function AU(r,e=!1){const t=hn(r),s=await t.getIdToken(e),A=s0(s);$e(A&&A.exp&&A.auth_time&&A.iat,t.auth,"internal-error");const l=typeof A.firebase=="object"?A.firebase:void 0,u=l?.sign_in_provider;return{claims:A,token:s,authTime:Ic(Wg(A.auth_time)),issuedAtTime:Ic(Wg(A.iat)),expirationTime:Ic(Wg(A.exp)),signInProvider:u||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Wg(r){return Number(r)*1e3}function s0(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return Bh("JWT malformed, contained fewer than 3 sections"),null;try{const A=_1(t);return A?JSON.parse(A):(Bh("Failed to decode base64 JWT payload"),null)}catch(A){return Bh("Caught error parsing JWT payload as JSON",A?.toString()),null}}function Ow(r){const e=s0(r);return $e(e,"internal-error"),$e(typeof e.exp<"u","internal-error"),$e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Yc(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof La&&oU(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function oU({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class lU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Xp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ic(this.lastLoginAt),this.creationTime=Ic(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Oh(r){const e=r.auth,t=await r.getIdToken(),s=await Yc(r,Hh(e,{idToken:t}));$e(s?.users.length,e,"internal-error");const A=s.users[0];r._notifyReloadListener(A);const l=A.providerUserInfo?.length?z1(A.providerUserInfo):[],u=uU(r.providerData,l),d=r.isAnonymous,f=!(r.email&&A.passwordHash)&&!u?.length,g=d?f:!1,x={uid:A.localId,displayName:A.displayName||null,photoURL:A.photoUrl||null,email:A.email||null,emailVerified:A.emailVerified||!1,phoneNumber:A.phoneNumber||null,tenantId:A.tenantId||null,providerData:u,metadata:new Xp(A.createdAt,A.lastLoginAt),isAnonymous:g};Object.assign(r,x)}async function cU(r){const e=hn(r);await Oh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function uU(r,e){return[...r.filter(s=>!e.some(A=>A.providerId===s.providerId)),...e]}function z1(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function dU(r,e){const t=await P1(r,{},async()=>{const s=ou({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:A,apiKey:l}=r.config,u=await V1(r,A,"/v1/token",`key=${l}`),d=await r._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:d,body:s};return r.emulatorConfig&&cl(r.emulatorConfig.host)&&(f.credentials="include"),O1.fetch()(u,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function hU(r,e){return dl(r,"POST","/v2/accounts:revokeToken",r0(r,e))}class qo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$e(e.idToken,"internal-error"),$e(typeof e.idToken<"u","internal-error"),$e(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ow(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){$e(e.length!==0,"internal-error");const t=Ow(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:($e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:A,expiresIn:l}=await dU(e,t);this.updateTokensAndExpiration(s,A,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:A,expirationTime:l}=t,u=new qo;return s&&($e(typeof s=="string","internal-error",{appName:e}),u.refreshToken=s),A&&($e(typeof A=="string","internal-error",{appName:e}),u.accessToken=A),l&&($e(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qo,this.toJSON())}_performRefresh(){return Ua("not implemented")}}function yi(r,e){$e(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class En{constructor({uid:e,auth:t,stsTokenManager:s,...A}){this.providerId="firebase",this.proactiveRefresh=new lU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=A.displayName||null,this.email=A.email||null,this.emailVerified=A.emailVerified||!1,this.phoneNumber=A.phoneNumber||null,this.photoURL=A.photoURL||null,this.isAnonymous=A.isAnonymous||!1,this.tenantId=A.tenantId||null,this.providerData=A.providerData?[...A.providerData]:[],this.metadata=new Xp(A.createdAt||void 0,A.lastLoginAt||void 0)}async getIdToken(e){const t=await Yc(this,this.stsTokenManager.getToken(this.auth,e));return $e(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return AU(this,e)}reload(){return cU(this)}_assign(e){this!==e&&($e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new En({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){$e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Oh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Cn(this.auth.app))return Promise.reject(SA(this.auth));const e=await this.getIdToken();return await Yc(this,iU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,A=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,d=t.tenantId??void 0,f=t._redirectEventId??void 0,g=t.createdAt??void 0,x=t.lastLoginAt??void 0,{uid:y,emailVerified:v,isAnonymous:N,providerData:M,stsTokenManager:S}=t;$e(y&&S,e,"internal-error");const V=qo.fromJSON(this.name,S);$e(typeof y=="string",e,"internal-error"),yi(s,e.name),yi(A,e.name),$e(typeof v=="boolean",e,"internal-error"),$e(typeof N=="boolean",e,"internal-error"),yi(l,e.name),yi(u,e.name),yi(d,e.name),yi(f,e.name),yi(g,e.name),yi(x,e.name);const K=new En({uid:y,auth:e,email:A,emailVerified:v,displayName:s,isAnonymous:N,photoURL:u,phoneNumber:l,tenantId:d,stsTokenManager:V,createdAt:g,lastLoginAt:x});return M&&Array.isArray(M)&&(K.providerData=M.map(G=>({...G}))),f&&(K._redirectEventId=f),K}static async _fromIdTokenResponse(e,t,s=!1){const A=new qo;A.updateFromServerResponse(t);const l=new En({uid:t.localId,auth:e,stsTokenManager:A,isAnonymous:s});return await Oh(l),l}static async _fromGetAccountInfoResponse(e,t,s){const A=t.users[0];$e(A.localId!==void 0,"internal-error");const l=A.providerUserInfo!==void 0?z1(A.providerUserInfo):[],u=!(A.email&&A.passwordHash)&&!l?.length,d=new qo;d.updateFromIdToken(s);const f=new En({uid:A.localId,auth:e,stsTokenManager:d,isAnonymous:u}),g={uid:A.localId,displayName:A.displayName||null,photoURL:A.photoUrl||null,email:A.email||null,emailVerified:A.emailVerified||!1,phoneNumber:A.phoneNumber||null,tenantId:A.tenantId||null,providerData:l,metadata:new Xp(A.createdAt,A.lastLoginAt),isAnonymous:!(A.email&&A.passwordHash)&&!l?.length};return Object.assign(f,g),f}}const Pw=new Map;function Qa(r){Da(r instanceof Function,"Expected a class definition");let e=Pw.get(r);return e?(Da(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Pw.set(r,e),e)}class K1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}K1.type="NONE";const Vw=K1;function Ch(r,e,t){return`firebase:${r}:${e}:${t}`}class Yo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:A,name:l}=this.auth;this.fullUserKey=Ch(this.userKey,A.apiKey,l),this.fullPersistenceKey=Ch("persistence",A.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Hh(this.auth,{idToken:e}).catch(()=>{});return t?En._fromGetAccountInfoResponse(this.auth,t,e):null}return En._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Yo(Qa(Vw),e,s);const A=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=A[0]||Qa(Vw);const u=Ch(s,e.config.apiKey,e.name);let d=null;for(const g of t)try{const x=await g._get(u);if(x){let y;if(typeof x=="string"){const v=await Hh(e,{idToken:x}).catch(()=>{});if(!v)break;y=await En._fromGetAccountInfoResponse(e,v,x)}else y=En._fromJSON(e,x);g!==l&&(d=y),l=g;break}}catch{}const f=A.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!f.length?new Yo(l,e,s):(l=f[0],d&&await l._set(u,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(u)}catch{}})),new Yo(l,e,s))}}function zw(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(G1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(J1(e))return"Blackberry";if(W1(e))return"Webos";if(q1(e))return"Safari";if((e.includes("chrome/")||Y1(e))&&!e.includes("edge/"))return"Chrome";if(X1(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if(s?.length===2)return s[1]}return"Other"}function G1(r=ls()){return/firefox\//i.test(r)}function q1(r=ls()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Y1(r=ls()){return/crios\//i.test(r)}function $1(r=ls()){return/iemobile/i.test(r)}function X1(r=ls()){return/android/i.test(r)}function J1(r=ls()){return/blackberry/i.test(r)}function W1(r=ls()){return/webos/i.test(r)}function n0(r=ls()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function fU(r=ls()){return n0(r)&&!!window.navigator?.standalone}function mU(){return _j()&&document.documentMode===10}function Z1(r=ls()){return n0(r)||X1(r)||W1(r)||J1(r)||/windows phone/i.test(r)||$1(r)}function eE(r,e=[]){let t;switch(r){case"Browser":t=zw(ls());break;case"Worker":t=`${zw(ls())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ul}/${s}`}class gU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((u,d)=>{try{const f=e(l);u(f)}catch(f){d(f)}});s.onAbort=t,this.queue.push(s);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const A of t)try{A()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function pU(r,e={}){return dl(r,"GET","/v2/passwordPolicy",r0(r,e))}const xU=6;class yU{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??xU,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,A=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),A&&(t.meetsMaxPasswordLength=e.length<=A)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let A=0;A<e.length;A++)s=e.charAt(A),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,A,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=A)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class bU{constructor(e,t,s,A){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=A,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Kw(this),this.idTokenSubscription=new Kw(this),this.beforeStateQueue=new gU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=H1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=A.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Qa(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Yo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Hh(this,{idToken:e}),s=await En._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Cn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,A=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,u=s?._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===u)&&d?.user&&(s=d.user,A=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(A)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return $e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Oh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=eU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Cn(this.app))return Promise.reject(SA(this));const t=e?hn(e):null;return t&&$e(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&$e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Cn(this.app)?Promise.reject(SA(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Cn(this.app)?Promise.reject(SA(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await pU(this),t=new yU(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Au("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await hU(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Qa(e)||this._popupRedirectResolver;$e(t,this,"argument-error"),this.redirectPersistenceManager=await Yo.create(this,[Qa(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,A){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if($e(d,this,"internal-error"),d.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,s,A);return()=>{u=!0,f()}}else{const f=e.addObserver(t);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=eE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Cn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&XT(`Error while retrieving App Check token: ${e.error}`),e?.token}}function bf(r){return hn(r)}class Kw{constructor(e){this.auth=e,this.observer=null,this.addObserver=kj(t=>this.observer=t)}get next(){return $e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let a0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vU(r){a0=r}function wU(r){return a0.loadJS(r)}function BU(){return a0.gapiScript}function CU(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function EU(r,e){const t=Jx(r,"auth");if(t.isInitialized()){const A=t.getImmediate(),l=t.getOptions();if(FA(l,e??{}))return A;ta(A,"already-initialized")}return t.initialize({options:e})}function NU(r,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(Qa);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function SU(r,e,t){const s=bf(r);$e(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const A=!1,l=tE(e),{host:u,port:d}=_U(e),f=d===null?"":`:${d}`,g={url:`${l}//${u}${f}/`},x=Object.freeze({host:u,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:A})});if(!s._canInitEmulator){$e(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),$e(FA(g,s.config.emulator)&&FA(x,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=x,s.settings.appVerificationDisabledForTesting=!0,cl(u)?(Q1(`${l}//${u}${f}`),F1("Auth",!0)):jU()}function tE(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function _U(r){const e=tE(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(s);if(A){const l=A[1];return{host:l,port:Gw(s.substr(l.length+1))}}else{const[l,u]=s.split(":");return{host:l,port:Gw(u)}}}function Gw(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function jU(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class rE{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ua("not implemented")}_getIdTokenResponse(e){return Ua("not implemented")}_linkToIdToken(e,t){return Ua("not implemented")}_getReauthenticationResolver(e){return Ua("not implemented")}}async function $o(r,e){return nU(r,"POST","/v1/accounts:signInWithIdp",r0(r,e))}const TU="http://localhost";class DA extends rE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new DA(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ta("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:A,...l}=t;if(!s||!A)return null;const u=new DA(s,A);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return $o(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,$o(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,$o(e,t)}buildRequest(){const e={requestUri:TU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ou(t)}return e}}class i0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class cu extends i0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Bi extends cu{constructor(){super("facebook.com")}static credential(e){return DA._fromParams({providerId:Bi.PROVIDER_ID,signInMethod:Bi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bi.credentialFromTaggedObject(e)}static credentialFromError(e){return Bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bi.credential(e.oauthAccessToken)}catch{return null}}}Bi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Bi.PROVIDER_ID="facebook.com";class $n extends cu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return DA._fromParams({providerId:$n.PROVIDER_ID,signInMethod:$n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return $n.credentialFromTaggedObject(e)}static credentialFromError(e){return $n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return $n.credential(t,s)}catch{return null}}}$n.GOOGLE_SIGN_IN_METHOD="google.com";$n.PROVIDER_ID="google.com";class Ci extends cu{constructor(){super("github.com")}static credential(e){return DA._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ci.credentialFromTaggedObject(e)}static credentialFromError(e){return Ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ci.credential(e.oauthAccessToken)}catch{return null}}}Ci.GITHUB_SIGN_IN_METHOD="github.com";Ci.PROVIDER_ID="github.com";class Ei extends cu{constructor(){super("twitter.com")}static credential(e,t){return DA._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Ei.credential(t,s)}catch{return null}}}Ei.TWITTER_SIGN_IN_METHOD="twitter.com";Ei.PROVIDER_ID="twitter.com";class tl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,A=!1){const l=await En._fromIdTokenResponse(e,s,A),u=qw(s);return new tl({user:l,providerId:u,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const A=qw(s);return new tl({user:e,providerId:A,_tokenResponse:s,operationType:t})}}function qw(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class Ph extends La{constructor(e,t,s,A){super(t.code,t.message),this.operationType=s,this.user=A,Object.setPrototypeOf(this,Ph.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,A){return new Ph(e,t,s,A)}}function sE(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Ph._fromErrorAndOperation(r,l,e,s):l})}async function UU(r,e,t=!1){const s=await Yc(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return tl._forOperation(r,"link",s)}async function QU(r,e,t=!1){const{auth:s}=r;if(Cn(s.app))return Promise.reject(SA(s));const A="reauthenticate";try{const l=await Yc(r,sE(s,A,e,r),t);$e(l.idToken,s,"internal-error");const u=s0(l.idToken);$e(u,s,"internal-error");const{sub:d}=u;return $e(r.uid===d,s,"user-mismatch"),tl._forOperation(r,A,l)}catch(l){throw l?.code==="auth/user-not-found"&&ta(s,"user-mismatch"),l}}async function FU(r,e,t=!1){if(Cn(r.app))return Promise.reject(SA(r));const s="signIn",A=await sE(r,s,e),l=await tl._fromIdTokenResponse(r,s,A);return t||await r._updateCurrentUser(l.user),l}function IU(r,e,t,s){return hn(r).onIdTokenChanged(e,t,s)}function DU(r,e,t){return hn(r).beforeAuthStateChanged(e,t)}function kU(r,e,t,s){return hn(r).onAuthStateChanged(e,t,s)}function RU(r){return hn(r).signOut()}const Vh="__sak";class nE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Vh,"1"),this.storage.removeItem(Vh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const MU=1e3,LU=10;class aE extends nE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Z1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),A=this.localCache[t];s!==A&&e(t,A,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,f)=>{this.notifyListeners(u,f)});return}const s=e.key;t?this.detachListener():this.stopPolling();const A=()=>{const u=this.storage.getItem(s);!t&&this.localCache[s]===u||this.notifyListeners(s,u)},l=this.storage.getItem(s);mU()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(A,LU):A()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const A of Array.from(s))A(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},MU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}aE.type="LOCAL";const HU=aE;class iE extends nE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}iE.type="SESSION";const AE=iE;function OU(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class vf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(A=>A.isListeningto(e));if(t)return t;const s=new vf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:A,data:l}=t.data,u=this.handlersMap[A];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:A});const d=Array.from(u).map(async g=>g(t.origin,l)),f=await OU(d);t.ports[0].postMessage({status:"done",eventId:s,eventType:A,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vf.receivers=[];function A0(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}class PU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const A=typeof MessageChannel<"u"?new MessageChannel:null;if(!A)throw new Error("connection_unavailable");let l,u;return new Promise((d,f)=>{const g=A0("",20);A.port1.start();const x=setTimeout(()=>{f(new Error("unsupported_event"))},s);u={messageChannel:A,onMessage(y){const v=y;if(v.data.eventId===g)switch(v.data.status){case"ack":clearTimeout(x),l=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(v.data.response);break;default:clearTimeout(x),clearTimeout(l),f(new Error("invalid_response"));break}}},this.handlers.add(u),A.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[A.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function Xn(){return window}function VU(r){Xn().location.href=r}function oE(){return typeof Xn().WorkerGlobalScope<"u"&&typeof Xn().importScripts=="function"}async function zU(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function KU(){return navigator?.serviceWorker?.controller||null}function GU(){return oE()?self:null}const lE="firebaseLocalStorageDb",qU=1,zh="firebaseLocalStorage",cE="fbase_key";class uu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function wf(r,e){return r.transaction([zh],e?"readwrite":"readonly").objectStore(zh)}function YU(){const r=indexedDB.deleteDatabase(lE);return new uu(r).toPromise()}function Jp(){const r=indexedDB.open(lE,qU);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(zh,{keyPath:cE})}catch(A){t(A)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(zh)?e(s):(s.close(),await YU(),e(await Jp()))})})}async function Yw(r,e,t){const s=wf(r,!0).put({[cE]:e,value:t});return new uu(s).toPromise()}async function $U(r,e){const t=wf(r,!1).get(e),s=await new uu(t).toPromise();return s===void 0?null:s.value}function $w(r,e){const t=wf(r,!0).delete(e);return new uu(t).toPromise()}const XU=800,JU=3;class uE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Jp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>JU)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return oE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vf._getInstance(GU()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await zU(),!this.activeServiceWorker)return;this.sender=new PU(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||KU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Jp();return await Yw(e,Vh,"1"),await $w(e,Vh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Yw(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>$U(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>$w(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(A=>{const l=wf(A,!1).getAll();return new uu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:A,value:l}of e)s.add(A),JSON.stringify(this.localCache[A])!==JSON.stringify(l)&&(this.notifyListeners(A,l),t.push(A));for(const A of Object.keys(this.localCache))this.localCache[A]&&!s.has(A)&&(this.notifyListeners(A,null),t.push(A));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const A of Array.from(s))A(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),XU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}uE.type="LOCAL";const WU=uE;new lu(3e4,6e4);function dE(r,e){return e?Qa(e):($e(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class o0 extends rE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $o(e,this._buildIdpRequest())}_linkToIdToken(e,t){return $o(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return $o(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ZU(r){return FU(r.auth,new o0(r),r.bypassAuthState)}function eQ(r){const{auth:e,user:t}=r;return $e(t,e,"internal-error"),QU(t,new o0(r),r.bypassAuthState)}async function tQ(r){const{auth:e,user:t}=r;return $e(t,e,"internal-error"),UU(t,new o0(r),r.bypassAuthState)}class hE{constructor(e,t,s,A,l=!1){this.auth=e,this.resolver=s,this.user=A,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:A,tenantId:l,error:u,type:d}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:A||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ZU;case"linkViaPopup":case"linkViaRedirect":return tQ;case"reauthViaPopup":case"reauthViaRedirect":return eQ;default:ta(this.auth,"internal-error")}}resolve(e){Da(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Da(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const rQ=new lu(2e3,1e4);async function sQ(r,e,t){if(Cn(r.app))return Promise.reject(Sn(r,"operation-not-supported-in-this-environment"));const s=bf(r);JT(r,e,i0);const A=dE(s,t);return new CA(s,"signInViaPopup",e,A).executeNotNull()}class CA extends hE{constructor(e,t,s,A,l){super(e,t,A,l),this.provider=s,this.authWindow=null,this.pollId=null,CA.currentPopupAction&&CA.currentPopupAction.cancel(),CA.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return $e(e,this.auth,"internal-error"),e}async onExecution(){Da(this.filter.length===1,"Popup operations only handle one event");const e=A0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Sn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Sn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,CA.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rQ.get())};e()}}CA.currentPopupAction=null;const nQ="pendingRedirect",Eh=new Map;class aQ extends hE{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Eh.get(this.auth._key());if(!e){try{const s=await iQ(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Eh.set(this.auth._key(),e)}return this.bypassAuthState||Eh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function iQ(r,e){const t=lQ(e),s=oQ(r);if(!await s._isAvailable())return!1;const A=await s._get(t)==="true";return await s._remove(t),A}function AQ(r,e){Eh.set(r._key(),e)}function oQ(r){return Qa(r._redirectPersistence)}function lQ(r){return Ch(nQ,r.config.apiKey,r.name)}async function cQ(r,e,t=!1){if(Cn(r.app))return Promise.reject(SA(r));const s=bf(r),A=dE(s,e),u=await new aQ(s,A,t).execute();return u&&!t&&(delete u.user._redirectEventId,await s._persistUserIfCurrent(u.user),await s._setRedirectUser(null,e)),u}const uQ=600*1e3;class dQ{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hQ(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!fE(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Sn(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=uQ&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xw(e))}saveEventToCache(e){this.cachedEventUids.add(Xw(e)),this.lastProcessedEventTime=Date.now()}}function Xw(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function fE({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function hQ(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fE(r);default:return!1}}async function fQ(r,e={}){return dl(r,"GET","/v1/projects",e)}const mQ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gQ=/^https?/;async function pQ(r){if(r.config.emulator)return;const{authorizedDomains:e}=await fQ(r);for(const t of e)try{if(xQ(t))return}catch{}ta(r,"unauthorized-domain")}function xQ(r){const e=$p(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const u=new URL(r);return u.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===s}if(!gQ.test(t))return!1;if(mQ.test(r))return s===r;const A=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(s)}const yQ=new lu(3e4,6e4);function Jw(){const r=Xn().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function bQ(r){return new Promise((e,t)=>{function s(){Jw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Jw(),t(Sn(r,"network-request-failed"))},timeout:yQ.get()})}if(Xn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Xn().gapi?.load)s();else{const A=CU("iframefcb");return Xn()[A]=()=>{gapi.load?s():t(Sn(r,"network-request-failed"))},wU(`${BU()}?onload=${A}`).catch(l=>t(l))}}).catch(e=>{throw Nh=null,e})}let Nh=null;function vQ(r){return Nh=Nh||bQ(r),Nh}const wQ=new lu(5e3,15e3),BQ="__/auth/iframe",CQ="emulator/auth/iframe",EQ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},NQ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function SQ(r){const e=r.config;$e(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?t0(e,CQ):`https://${r.config.authDomain}/${BQ}`,s={apiKey:e.apiKey,appName:r.name,v:ul},A=NQ.get(r.config.apiHost);A&&(s.eid=A);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${ou(s).slice(1)}`}async function _Q(r){const e=await vQ(r),t=Xn().gapi;return $e(t,r,"internal-error"),e.open({where:document.body,url:SQ(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:EQ,dontclear:!0},s=>new Promise(async(A,l)=>{await s.restyle({setHideOnLeave:!1});const u=Sn(r,"network-request-failed"),d=Xn().setTimeout(()=>{l(u)},wQ.get());function f(){Xn().clearTimeout(d),A(s)}s.ping(f).then(f,()=>{l(u)})}))}const jQ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},TQ=500,UQ=600,QQ="_blank",FQ="http://localhost";class Ww{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function IQ(r,e,t,s=TQ,A=UQ){const l=Math.max((window.screen.availHeight-A)/2,0).toString(),u=Math.max((window.screen.availWidth-s)/2,0).toString();let d="";const f={...jQ,width:s.toString(),height:A.toString(),top:l,left:u},g=ls().toLowerCase();t&&(d=Y1(g)?QQ:t),G1(g)&&(e=e||FQ,f.scrollbars="yes");const x=Object.entries(f).reduce((v,[N,M])=>`${v}${N}=${M},`,"");if(fU(g)&&d!=="_self")return DQ(e||"",d),new Ww(null);const y=window.open(e||"",d,x);$e(y,r,"popup-blocked");try{y.focus()}catch{}return new Ww(y)}function DQ(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}const kQ="__/auth/handler",RQ="emulator/auth/handler",MQ=encodeURIComponent("fac");async function Zw(r,e,t,s,A,l){$e(r.config.authDomain,r,"auth-domain-config-required"),$e(r.config.apiKey,r,"invalid-api-key");const u={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:ul,eventId:A};if(e instanceof i0){e.setDefaultLanguage(r.languageCode),u.providerId=e.providerId||"",Dj(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,y]of Object.entries({}))u[x]=y}if(e instanceof cu){const x=e.getScopes().filter(y=>y!=="");x.length>0&&(u.scopes=x.join(","))}r.tenantId&&(u.tid=r.tenantId);const d=u;for(const x of Object.keys(d))d[x]===void 0&&delete d[x];const f=await r._getAppCheckToken(),g=f?`#${MQ}=${encodeURIComponent(f)}`:"";return`${LQ(r)}?${ou(d).slice(1)}${g}`}function LQ({config:r}){return r.emulator?t0(r,RQ):`https://${r.authDomain}/${kQ}`}const Zg="webStorageSupport";class HQ{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=AE,this._completeRedirectFn=cQ,this._overrideRedirectResult=AQ}async _openPopup(e,t,s,A){Da(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await Zw(e,t,s,$p(),A);return IQ(e,l,A0())}async _openRedirect(e,t,s,A){await this._originValidation(e);const l=await Zw(e,t,s,$p(),A);return VU(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:A,promise:l}=this.eventManagers[t];return A?Promise.resolve(A):(Da(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await _Q(e),s=new dQ(e);return t.register("authEvent",A=>($e(A?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(A.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Zg,{type:Zg},A=>{const l=A?.[0]?.[Zg];l!==void 0&&t(!!l),ta(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=pQ(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Z1()||q1()||n0()}}const OQ=HQ;var eB="@firebase/auth",tB="1.12.0";class PQ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){$e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function VQ(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function zQ(r){el(new IA("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),A=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=s.options;$e(u&&!u.includes(":"),"invalid-api-key",{appName:s.name});const f={apiKey:u,authDomain:d,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eE(r)},g=new bU(s,A,l,f);return NU(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),el(new IA("auth-internal",e=>{const t=bf(e.getProvider("auth").getImmediate());return(s=>new PQ(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Fi(eB,tB,VQ(r)),Fi(eB,tB,"esm2020")}const KQ=300,GQ=U1("authIdTokenMaxAge")||KQ;let rB=null;const qQ=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>GQ)return;const A=t?.token;rB!==A&&(rB=A,await fetch(r,{method:A?"POST":"DELETE",headers:A?{Authorization:`Bearer ${A}`}:{}}))};function mE(r=k1()){const e=Jx(r,"auth");if(e.isInitialized())return e.getImmediate();const t=EU(r,{popupRedirectResolver:OQ,persistence:[WU,HU,AE]}),s=U1("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const u=qQ(l.toString());DU(t,u,()=>u(t.currentUser)),IU(t,d=>u(d))}}const A=j1("auth");return A&&SU(t,`http://${A}`),t}function YQ(){return document.getElementsByTagName("head")?.[0]??document}vU({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=A=>{const l=Sn("internal-error");l.customData=A,t(l)},s.type="text/javascript",s.charset="UTF-8",YQ().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});zQ("Browser");var sB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ii,gE;(function(){var r;function e(E,_){function C(){}C.prototype=_.prototype,E.F=_.prototype,E.prototype=new C,E.prototype.constructor=E,E.D=function(D,j,Q){for(var U=Array(arguments.length-2),T=2;T<arguments.length;T++)U[T-2]=arguments[T];return _.prototype[j].apply(D,U)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function A(E,_,C){C||(C=0);const D=Array(16);if(typeof _=="string")for(var j=0;j<16;++j)D[j]=_.charCodeAt(C++)|_.charCodeAt(C++)<<8|_.charCodeAt(C++)<<16|_.charCodeAt(C++)<<24;else for(j=0;j<16;++j)D[j]=_[C++]|_[C++]<<8|_[C++]<<16|_[C++]<<24;_=E.g[0],C=E.g[1],j=E.g[2];let Q=E.g[3],U;U=_+(Q^C&(j^Q))+D[0]+3614090360&4294967295,_=C+(U<<7&4294967295|U>>>25),U=Q+(j^_&(C^j))+D[1]+3905402710&4294967295,Q=_+(U<<12&4294967295|U>>>20),U=j+(C^Q&(_^C))+D[2]+606105819&4294967295,j=Q+(U<<17&4294967295|U>>>15),U=C+(_^j&(Q^_))+D[3]+3250441966&4294967295,C=j+(U<<22&4294967295|U>>>10),U=_+(Q^C&(j^Q))+D[4]+4118548399&4294967295,_=C+(U<<7&4294967295|U>>>25),U=Q+(j^_&(C^j))+D[5]+1200080426&4294967295,Q=_+(U<<12&4294967295|U>>>20),U=j+(C^Q&(_^C))+D[6]+2821735955&4294967295,j=Q+(U<<17&4294967295|U>>>15),U=C+(_^j&(Q^_))+D[7]+4249261313&4294967295,C=j+(U<<22&4294967295|U>>>10),U=_+(Q^C&(j^Q))+D[8]+1770035416&4294967295,_=C+(U<<7&4294967295|U>>>25),U=Q+(j^_&(C^j))+D[9]+2336552879&4294967295,Q=_+(U<<12&4294967295|U>>>20),U=j+(C^Q&(_^C))+D[10]+4294925233&4294967295,j=Q+(U<<17&4294967295|U>>>15),U=C+(_^j&(Q^_))+D[11]+2304563134&4294967295,C=j+(U<<22&4294967295|U>>>10),U=_+(Q^C&(j^Q))+D[12]+1804603682&4294967295,_=C+(U<<7&4294967295|U>>>25),U=Q+(j^_&(C^j))+D[13]+4254626195&4294967295,Q=_+(U<<12&4294967295|U>>>20),U=j+(C^Q&(_^C))+D[14]+2792965006&4294967295,j=Q+(U<<17&4294967295|U>>>15),U=C+(_^j&(Q^_))+D[15]+1236535329&4294967295,C=j+(U<<22&4294967295|U>>>10),U=_+(j^Q&(C^j))+D[1]+4129170786&4294967295,_=C+(U<<5&4294967295|U>>>27),U=Q+(C^j&(_^C))+D[6]+3225465664&4294967295,Q=_+(U<<9&4294967295|U>>>23),U=j+(_^C&(Q^_))+D[11]+643717713&4294967295,j=Q+(U<<14&4294967295|U>>>18),U=C+(Q^_&(j^Q))+D[0]+3921069994&4294967295,C=j+(U<<20&4294967295|U>>>12),U=_+(j^Q&(C^j))+D[5]+3593408605&4294967295,_=C+(U<<5&4294967295|U>>>27),U=Q+(C^j&(_^C))+D[10]+38016083&4294967295,Q=_+(U<<9&4294967295|U>>>23),U=j+(_^C&(Q^_))+D[15]+3634488961&4294967295,j=Q+(U<<14&4294967295|U>>>18),U=C+(Q^_&(j^Q))+D[4]+3889429448&4294967295,C=j+(U<<20&4294967295|U>>>12),U=_+(j^Q&(C^j))+D[9]+568446438&4294967295,_=C+(U<<5&4294967295|U>>>27),U=Q+(C^j&(_^C))+D[14]+3275163606&4294967295,Q=_+(U<<9&4294967295|U>>>23),U=j+(_^C&(Q^_))+D[3]+4107603335&4294967295,j=Q+(U<<14&4294967295|U>>>18),U=C+(Q^_&(j^Q))+D[8]+1163531501&4294967295,C=j+(U<<20&4294967295|U>>>12),U=_+(j^Q&(C^j))+D[13]+2850285829&4294967295,_=C+(U<<5&4294967295|U>>>27),U=Q+(C^j&(_^C))+D[2]+4243563512&4294967295,Q=_+(U<<9&4294967295|U>>>23),U=j+(_^C&(Q^_))+D[7]+1735328473&4294967295,j=Q+(U<<14&4294967295|U>>>18),U=C+(Q^_&(j^Q))+D[12]+2368359562&4294967295,C=j+(U<<20&4294967295|U>>>12),U=_+(C^j^Q)+D[5]+4294588738&4294967295,_=C+(U<<4&4294967295|U>>>28),U=Q+(_^C^j)+D[8]+2272392833&4294967295,Q=_+(U<<11&4294967295|U>>>21),U=j+(Q^_^C)+D[11]+1839030562&4294967295,j=Q+(U<<16&4294967295|U>>>16),U=C+(j^Q^_)+D[14]+4259657740&4294967295,C=j+(U<<23&4294967295|U>>>9),U=_+(C^j^Q)+D[1]+2763975236&4294967295,_=C+(U<<4&4294967295|U>>>28),U=Q+(_^C^j)+D[4]+1272893353&4294967295,Q=_+(U<<11&4294967295|U>>>21),U=j+(Q^_^C)+D[7]+4139469664&4294967295,j=Q+(U<<16&4294967295|U>>>16),U=C+(j^Q^_)+D[10]+3200236656&4294967295,C=j+(U<<23&4294967295|U>>>9),U=_+(C^j^Q)+D[13]+681279174&4294967295,_=C+(U<<4&4294967295|U>>>28),U=Q+(_^C^j)+D[0]+3936430074&4294967295,Q=_+(U<<11&4294967295|U>>>21),U=j+(Q^_^C)+D[3]+3572445317&4294967295,j=Q+(U<<16&4294967295|U>>>16),U=C+(j^Q^_)+D[6]+76029189&4294967295,C=j+(U<<23&4294967295|U>>>9),U=_+(C^j^Q)+D[9]+3654602809&4294967295,_=C+(U<<4&4294967295|U>>>28),U=Q+(_^C^j)+D[12]+3873151461&4294967295,Q=_+(U<<11&4294967295|U>>>21),U=j+(Q^_^C)+D[15]+530742520&4294967295,j=Q+(U<<16&4294967295|U>>>16),U=C+(j^Q^_)+D[2]+3299628645&4294967295,C=j+(U<<23&4294967295|U>>>9),U=_+(j^(C|~Q))+D[0]+4096336452&4294967295,_=C+(U<<6&4294967295|U>>>26),U=Q+(C^(_|~j))+D[7]+1126891415&4294967295,Q=_+(U<<10&4294967295|U>>>22),U=j+(_^(Q|~C))+D[14]+2878612391&4294967295,j=Q+(U<<15&4294967295|U>>>17),U=C+(Q^(j|~_))+D[5]+4237533241&4294967295,C=j+(U<<21&4294967295|U>>>11),U=_+(j^(C|~Q))+D[12]+1700485571&4294967295,_=C+(U<<6&4294967295|U>>>26),U=Q+(C^(_|~j))+D[3]+2399980690&4294967295,Q=_+(U<<10&4294967295|U>>>22),U=j+(_^(Q|~C))+D[10]+4293915773&4294967295,j=Q+(U<<15&4294967295|U>>>17),U=C+(Q^(j|~_))+D[1]+2240044497&4294967295,C=j+(U<<21&4294967295|U>>>11),U=_+(j^(C|~Q))+D[8]+1873313359&4294967295,_=C+(U<<6&4294967295|U>>>26),U=Q+(C^(_|~j))+D[15]+4264355552&4294967295,Q=_+(U<<10&4294967295|U>>>22),U=j+(_^(Q|~C))+D[6]+2734768916&4294967295,j=Q+(U<<15&4294967295|U>>>17),U=C+(Q^(j|~_))+D[13]+1309151649&4294967295,C=j+(U<<21&4294967295|U>>>11),U=_+(j^(C|~Q))+D[4]+4149444226&4294967295,_=C+(U<<6&4294967295|U>>>26),U=Q+(C^(_|~j))+D[11]+3174756917&4294967295,Q=_+(U<<10&4294967295|U>>>22),U=j+(_^(Q|~C))+D[2]+718787259&4294967295,j=Q+(U<<15&4294967295|U>>>17),U=C+(Q^(j|~_))+D[9]+3951481745&4294967295,E.g[0]=E.g[0]+_&4294967295,E.g[1]=E.g[1]+(j+(U<<21&4294967295|U>>>11))&4294967295,E.g[2]=E.g[2]+j&4294967295,E.g[3]=E.g[3]+Q&4294967295}s.prototype.v=function(E,_){_===void 0&&(_=E.length);const C=_-this.blockSize,D=this.C;let j=this.h,Q=0;for(;Q<_;){if(j==0)for(;Q<=C;)A(this,E,Q),Q+=this.blockSize;if(typeof E=="string"){for(;Q<_;)if(D[j++]=E.charCodeAt(Q++),j==this.blockSize){A(this,D),j=0;break}}else for(;Q<_;)if(D[j++]=E[Q++],j==this.blockSize){A(this,D),j=0;break}}this.h=j,this.o+=_},s.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var _=1;_<E.length-8;++_)E[_]=0;_=this.o*8;for(var C=E.length-8;C<E.length;++C)E[C]=_&255,_/=256;for(this.v(E),E=Array(16),_=0,C=0;C<4;++C)for(let D=0;D<32;D+=8)E[_++]=this.g[C]>>>D&255;return E};function l(E,_){var C=d;return Object.prototype.hasOwnProperty.call(C,E)?C[E]:C[E]=_(E)}function u(E,_){this.h=_;const C=[];let D=!0;for(let j=E.length-1;j>=0;j--){const Q=E[j]|0;D&&Q==_||(C[j]=Q,D=!1)}this.g=C}var d={};function f(E){return-128<=E&&E<128?l(E,function(_){return new u([_|0],_<0?-1:0)}):new u([E|0],E<0?-1:0)}function g(E){if(isNaN(E)||!isFinite(E))return y;if(E<0)return V(g(-E));const _=[];let C=1;for(let D=0;E>=C;D++)_[D]=E/C|0,C*=4294967296;return new u(_,0)}function x(E,_){if(E.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(E.charAt(0)=="-")return V(x(E.substring(1),_));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=g(Math.pow(_,8));let D=y;for(let Q=0;Q<E.length;Q+=8){var j=Math.min(8,E.length-Q);const U=parseInt(E.substring(Q,Q+j),_);j<8?(j=g(Math.pow(_,j)),D=D.j(j).add(g(U))):(D=D.j(C),D=D.add(g(U)))}return D}var y=f(0),v=f(1),N=f(16777216);r=u.prototype,r.m=function(){if(S(this))return-V(this).m();let E=0,_=1;for(let C=0;C<this.g.length;C++){const D=this.i(C);E+=(D>=0?D:4294967296+D)*_,_*=4294967296}return E},r.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(M(this))return"0";if(S(this))return"-"+V(this).toString(E);const _=g(Math.pow(E,6));var C=this;let D="";for(;;){const j=q(C,_).g;C=K(C,j.j(_));let Q=((C.g.length>0?C.g[0]:C.h)>>>0).toString(E);if(C=j,M(C))return Q+D;for(;Q.length<6;)Q="0"+Q;D=Q+D}},r.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function M(E){if(E.h!=0)return!1;for(let _=0;_<E.g.length;_++)if(E.g[_]!=0)return!1;return!0}function S(E){return E.h==-1}r.l=function(E){return E=K(this,E),S(E)?-1:M(E)?0:1};function V(E){const _=E.g.length,C=[];for(let D=0;D<_;D++)C[D]=~E.g[D];return new u(C,~E.h).add(v)}r.abs=function(){return S(this)?V(this):this},r.add=function(E){const _=Math.max(this.g.length,E.g.length),C=[];let D=0;for(let j=0;j<=_;j++){let Q=D+(this.i(j)&65535)+(E.i(j)&65535),U=(Q>>>16)+(this.i(j)>>>16)+(E.i(j)>>>16);D=U>>>16,Q&=65535,U&=65535,C[j]=U<<16|Q}return new u(C,C[C.length-1]&-2147483648?-1:0)};function K(E,_){return E.add(V(_))}r.j=function(E){if(M(this)||M(E))return y;if(S(this))return S(E)?V(this).j(V(E)):V(V(this).j(E));if(S(E))return V(this.j(V(E)));if(this.l(N)<0&&E.l(N)<0)return g(this.m()*E.m());const _=this.g.length+E.g.length,C=[];for(var D=0;D<2*_;D++)C[D]=0;for(D=0;D<this.g.length;D++)for(let j=0;j<E.g.length;j++){const Q=this.i(D)>>>16,U=this.i(D)&65535,T=E.i(j)>>>16,W=E.i(j)&65535;C[2*D+2*j]+=U*W,G(C,2*D+2*j),C[2*D+2*j+1]+=Q*W,G(C,2*D+2*j+1),C[2*D+2*j+1]+=U*T,G(C,2*D+2*j+1),C[2*D+2*j+2]+=Q*T,G(C,2*D+2*j+2)}for(E=0;E<_;E++)C[E]=C[2*E+1]<<16|C[2*E];for(E=_;E<2*_;E++)C[E]=0;return new u(C,0)};function G(E,_){for(;(E[_]&65535)!=E[_];)E[_+1]+=E[_]>>>16,E[_]&=65535,_++}function z(E,_){this.g=E,this.h=_}function q(E,_){if(M(_))throw Error("division by zero");if(M(E))return new z(y,y);if(S(E))return _=q(V(E),_),new z(V(_.g),V(_.h));if(S(_))return _=q(E,V(_)),new z(V(_.g),_.h);if(E.g.length>30){if(S(E)||S(_))throw Error("slowDivide_ only works with positive integers.");for(var C=v,D=_;D.l(E)<=0;)C=$(C),D=$(D);var j=Y(C,1),Q=Y(D,1);for(D=Y(D,2),C=Y(C,2);!M(D);){var U=Q.add(D);U.l(E)<=0&&(j=j.add(C),Q=U),D=Y(D,1),C=Y(C,1)}return _=K(E,j.j(_)),new z(j,_)}for(j=y;E.l(_)>=0;){for(C=Math.max(1,Math.floor(E.m()/_.m())),D=Math.ceil(Math.log(C)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),Q=g(C),U=Q.j(_);S(U)||U.l(E)>0;)C-=D,Q=g(C),U=Q.j(_);M(Q)&&(Q=v),j=j.add(Q),E=K(E,U)}return new z(j,E)}r.B=function(E){return q(this,E).h},r.and=function(E){const _=Math.max(this.g.length,E.g.length),C=[];for(let D=0;D<_;D++)C[D]=this.i(D)&E.i(D);return new u(C,this.h&E.h)},r.or=function(E){const _=Math.max(this.g.length,E.g.length),C=[];for(let D=0;D<_;D++)C[D]=this.i(D)|E.i(D);return new u(C,this.h|E.h)},r.xor=function(E){const _=Math.max(this.g.length,E.g.length),C=[];for(let D=0;D<_;D++)C[D]=this.i(D)^E.i(D);return new u(C,this.h^E.h)};function $(E){const _=E.g.length+1,C=[];for(let D=0;D<_;D++)C[D]=E.i(D)<<1|E.i(D-1)>>>31;return new u(C,E.h)}function Y(E,_){const C=_>>5;_%=32;const D=E.g.length-C,j=[];for(let Q=0;Q<D;Q++)j[Q]=_>0?E.i(Q+C)>>>_|E.i(Q+C+1)<<32-_:E.i(Q+C);return new u(j,E.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,gE=s,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=g,u.fromString=x,Ii=u}).apply(typeof sB<"u"?sB:typeof self<"u"?self:typeof window<"u"?window:{});var Vd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var pE,bc,xE,Sh,Wp,yE,bE,vE;(function(){var r,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vd=="object"&&Vd];for(var b=0;b<h.length;++b){var B=h[b];if(B&&B.Math==Math)return B}throw Error("Cannot find global object")}var s=t(this);function A(h,b){if(b)e:{var B=s;h=h.split(".");for(var O=0;O<h.length-1;O++){var se=h[O];if(!(se in B))break e;B=B[se]}h=h[h.length-1],O=B[h],b=b(O),b!=O&&b!=null&&e(B,h,{configurable:!0,writable:!0,value:b})}}A("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),A("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),A("Object.entries",function(h){return h||function(b){var B=[],O;for(O in b)Object.prototype.hasOwnProperty.call(b,O)&&B.push([O,b[O]]);return B}});var l=l||{},u=this||self;function d(h){var b=typeof h;return b=="object"&&h!=null||b=="function"}function f(h,b,B){return h.call.apply(h.bind,arguments)}function g(h,b,B){return g=f,g.apply(null,arguments)}function x(h,b){var B=Array.prototype.slice.call(arguments,1);return function(){var O=B.slice();return O.push.apply(O,arguments),h.apply(this,O)}}function y(h,b){function B(){}B.prototype=b.prototype,h.Z=b.prototype,h.prototype=new B,h.prototype.constructor=h,h.Ob=function(O,se,oe){for(var Ne=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)Ne[rt-2]=arguments[rt];return b.prototype[se].apply(O,Ne)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function N(h){const b=h.length;if(b>0){const B=Array(b);for(let O=0;O<b;O++)B[O]=h[O];return B}return[]}function M(h,b){for(let O=1;O<arguments.length;O++){const se=arguments[O];var B=typeof se;if(B=B!="object"?B:se?Array.isArray(se)?"array":B:"null",B=="array"||B=="object"&&typeof se.length=="number"){B=h.length||0;const oe=se.length||0;h.length=B+oe;for(let Ne=0;Ne<oe;Ne++)h[B+Ne]=se[Ne]}else h.push(se)}}class S{constructor(b,B){this.i=b,this.j=B,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function V(h){u.setTimeout(()=>{throw h},0)}function K(){var h=E;let b=null;return h.g&&(b=h.g,h.g=h.g.next,h.g||(h.h=null),b.next=null),b}class G{constructor(){this.h=this.g=null}add(b,B){const O=z.get();O.set(b,B),this.h?this.h.next=O:this.g=O,this.h=O}}var z=new S(()=>new q,h=>h.reset());class q{constructor(){this.next=this.g=this.h=null}set(b,B){this.h=b,this.g=B,this.next=null}reset(){this.next=this.g=this.h=null}}let $,Y=!1,E=new G,_=()=>{const h=Promise.resolve(void 0);$=()=>{h.then(C)}};function C(){for(var h;h=K();){try{h.h.call(h.g)}catch(B){V(B)}var b=z;b.j(h),b.h<100&&(b.h++,h.next=b.g,b.g=h)}Y=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(h,b){this.type=h,this.g=this.target=b,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var Q=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var h=!1,b=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const B=()=>{};u.addEventListener("test",B,b),u.removeEventListener("test",B,b)}catch{}return h})();function U(h){return/^[\s\xa0]*$/.test(h)}function T(h,b){j.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,b)}y(T,j),T.prototype.init=function(h,b){const B=this.type=h.type,O=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=b,b=h.relatedTarget,b||(B=="mouseover"?b=h.fromElement:B=="mouseout"&&(b=h.toElement)),this.relatedTarget=b,O?(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&T.Z.h.call(this)},T.prototype.h=function(){T.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var W="closure_listenable_"+(Math.random()*1e6|0),H=0;function F(h,b,B,O,se){this.listener=h,this.proxy=null,this.src=b,this.type=B,this.capture=!!O,this.ha=se,this.key=++H,this.da=this.fa=!1}function L(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function te(h,b,B){for(const O in h)b.call(B,h[O],O,h)}function Ae(h,b){for(const B in h)b.call(void 0,h[B],B,h)}function P(h){const b={};for(const B in h)b[B]=h[B];return b}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(h,b){let B,O;for(let se=1;se<arguments.length;se++){O=arguments[se];for(B in O)h[B]=O[B];for(let oe=0;oe<J.length;oe++)B=J[oe],Object.prototype.hasOwnProperty.call(O,B)&&(h[B]=O[B])}}function ge(h){this.src=h,this.g={},this.h=0}ge.prototype.add=function(h,b,B,O,se){const oe=h.toString();h=this.g[oe],h||(h=this.g[oe]=[],this.h++);const Ne=Ce(h,b,O,se);return Ne>-1?(b=h[Ne],B||(b.fa=!1)):(b=new F(b,this.src,oe,!!O,se),b.fa=B,h.push(b)),b};function Ee(h,b){const B=b.type;if(B in h.g){var O=h.g[B],se=Array.prototype.indexOf.call(O,b,void 0),oe;(oe=se>=0)&&Array.prototype.splice.call(O,se,1),oe&&(L(b),h.g[B].length==0&&(delete h.g[B],h.h--))}}function Ce(h,b,B,O){for(let se=0;se<h.length;++se){const oe=h[se];if(!oe.da&&oe.listener==b&&oe.capture==!!B&&oe.ha==O)return se}return-1}var Se="closure_lm_"+(Math.random()*1e6|0),ut={};function qe(h,b,B,O,se){if(Array.isArray(b)){for(let oe=0;oe<b.length;oe++)qe(h,b[oe],B,O,se);return null}return B=it(B),h&&h[W]?h.J(b,B,d(O)?!!O.capture:!1,se):Gt(h,b,B,!1,O,se)}function Gt(h,b,B,O,se,oe){if(!b)throw Error("Invalid event type");const Ne=d(se)?!!se.capture:!!se;let rt=pe(h);if(rt||(h[Se]=rt=new ge(h)),B=rt.add(b,B,O,Ne,oe),B.proxy)return B;if(O=Nt(),B.proxy=O,O.src=h,O.listener=B,h.addEventListener)Q||(se=Ne),se===void 0&&(se=!1),h.addEventListener(b.toString(),O,se);else if(h.attachEvent)h.attachEvent(Z(b.toString()),O);else if(h.addListener&&h.removeListener)h.addListener(O);else throw Error("addEventListener and attachEvent are unavailable.");return B}function Nt(){function h(B){return b.call(h.src,h.listener,B)}const b=de;return h}function he(h,b,B,O,se){if(Array.isArray(b))for(var oe=0;oe<b.length;oe++)he(h,b[oe],B,O,se);else O=d(O)?!!O.capture:!!O,B=it(B),h&&h[W]?(h=h.i,oe=String(b).toString(),oe in h.g&&(b=h.g[oe],B=Ce(b,B,O,se),B>-1&&(L(b[B]),Array.prototype.splice.call(b,B,1),b.length==0&&(delete h.g[oe],h.h--)))):h&&(h=pe(h))&&(b=h.g[b.toString()],h=-1,b&&(h=Ce(b,B,O,se)),(B=h>-1?b[h]:null)&&R(B))}function R(h){if(typeof h!="number"&&h&&!h.da){var b=h.src;if(b&&b[W])Ee(b.i,h);else{var B=h.type,O=h.proxy;b.removeEventListener?b.removeEventListener(B,O,h.capture):b.detachEvent?b.detachEvent(Z(B),O):b.addListener&&b.removeListener&&b.removeListener(O),(B=pe(b))?(Ee(B,h),B.h==0&&(B.src=null,b[Se]=null)):L(h)}}}function Z(h){return h in ut?ut[h]:ut[h]="on"+h}function de(h,b){if(h.da)h=!0;else{b=new T(b,this);const B=h.listener,O=h.ha||h.src;h.fa&&R(h),h=B.call(O,b)}return h}function pe(h){return h=h[Se],h instanceof ge?h:null}var ze="__closure_events_fn_"+(Math.random()*1e9>>>0);function it(h){return typeof h=="function"?h:(h[ze]||(h[ze]=function(b){return h.handleEvent(b)}),h[ze])}function Je(){D.call(this),this.i=new ge(this),this.M=this,this.G=null}y(Je,D),Je.prototype[W]=!0,Je.prototype.removeEventListener=function(h,b,B,O){he(this,h,b,B,O)};function De(h,b){var B,O=h.G;if(O)for(B=[];O;O=O.G)B.push(O);if(h=h.M,O=b.type||b,typeof b=="string")b=new j(b,h);else if(b instanceof j)b.target=b.target||h;else{var se=b;b=new j(O,h),le(b,se)}se=!0;let oe,Ne;if(B)for(Ne=B.length-1;Ne>=0;Ne--)oe=b.g=B[Ne],se=Ue(oe,O,!0,b)&&se;if(oe=b.g=h,se=Ue(oe,O,!0,b)&&se,se=Ue(oe,O,!1,b)&&se,B)for(Ne=0;Ne<B.length;Ne++)oe=b.g=B[Ne],se=Ue(oe,O,!1,b)&&se}Je.prototype.N=function(){if(Je.Z.N.call(this),this.i){var h=this.i;for(const b in h.g){const B=h.g[b];for(let O=0;O<B.length;O++)L(B[O]);delete h.g[b],h.h--}}this.G=null},Je.prototype.J=function(h,b,B,O){return this.i.add(String(h),b,!1,B,O)},Je.prototype.K=function(h,b,B,O){return this.i.add(String(h),b,!0,B,O)};function Ue(h,b,B,O){if(b=h.i.g[String(b)],!b)return!0;b=b.concat();let se=!0;for(let oe=0;oe<b.length;++oe){const Ne=b[oe];if(Ne&&!Ne.da&&Ne.capture==B){const rt=Ne.listener,fr=Ne.ha||Ne.src;Ne.fa&&Ee(h.i,Ne),se=rt.call(fr,O)!==!1&&se}}return se&&!O.defaultPrevented}function St(h,b){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:u.setTimeout(h,b||0)}function qs(h){h.g=St(()=>{h.g=null,h.i&&(h.i=!1,qs(h))},h.l);const b=h.h;h.h=null,h.m.apply(null,b)}class Pt extends D{constructor(b,B){super(),this.m=b,this.l=B,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:qs(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ve(h){D.call(this),this.h=h,this.g={}}y(ve,D);var Vt=[];function sr(h){te(h.g,function(b,B){this.g.hasOwnProperty(B)&&R(b)},h),h.g={}}ve.prototype.N=function(){ve.Z.N.call(this),sr(this)},ve.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ht=u.JSON.stringify,br=u.JSON.parse,kr=class{stringify(h){return u.JSON.stringify(h,void 0)}parse(h){return u.JSON.parse(h,void 0)}};function Ts(){}function ce(){}var Re={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ye(){j.call(this,"d")}y(Ye,j);function nt(){j.call(this,"c")}y(nt,j);var Oe={},tt=null;function dr(){return tt=tt||new Je}Oe.Ia="serverreachability";function cs(h){j.call(this,Oe.Ia,h)}y(cs,j);function ts(h){const b=dr();De(b,new cs(b))}Oe.STAT_EVENT="statevent";function us(h,b){j.call(this,Oe.STAT_EVENT,h),this.stat=b}y(us,j);function qt(h){const b=dr();De(b,new us(b,h))}Oe.Ja="timingevent";function Ys(h,b){j.call(this,Oe.Ja,h),this.size=b}y(Ys,j);function ds(h,b){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){h()},b)}function Us(){this.g=!0}Us.prototype.ua=function(){this.g=!1};function Ha(h,b,B,O,se,oe){h.info(function(){if(h.g)if(oe){var Ne="",rt=oe.split("&");for(let Ct=0;Ct<rt.length;Ct++){var fr=rt[Ct].split("=");if(fr.length>1){const Zt=fr[0];fr=fr[1];const Js=Zt.split("_");Ne=Js.length>=2&&Js[1]=="type"?Ne+(Zt+"="+fr+"&"):Ne+(Zt+"=redacted&")}}}else Ne=null;else Ne=oe;return"XMLHTTP REQ ("+O+") [attempt "+se+"]: "+b+`
`+B+`
`+Ne})}function zA(h,b,B,O,se,oe,Ne){h.info(function(){return"XMLHTTP RESP ("+O+") [ attempt "+se+"]: "+b+`
`+B+`
`+oe+" "+Ne})}function Qs(h,b,B,O){h.info(function(){return"XMLHTTP TEXT ("+b+"): "+xl(h,B)+(O?" "+O:"")})}function la(h,b){h.info(function(){return"TIMEOUT: "+b})}Us.prototype.info=function(){};function xl(h,b){if(!h.g)return b;if(!b)return null;try{const oe=JSON.parse(b);if(oe){for(h=0;h<oe.length;h++)if(Array.isArray(oe[h])){var B=oe[h];if(!(B.length<2)){var O=B[1];if(Array.isArray(O)&&!(O.length<1)){var se=O[0];if(se!="noop"&&se!="stop"&&se!="close")for(let Ne=1;Ne<O.length;Ne++)O[Ne]=""}}}}return Ht(oe)}catch{return b}}var Qn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Gi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},qi;function ca(){}y(ca,Ts),ca.prototype.g=function(){return new XMLHttpRequest},qi=new ca;function Fs(h){return encodeURIComponent(String(h))}function Oa(h){var b=1;h=h.split(":");const B=[];for(;b>0&&h.length;)B.push(h.shift()),b--;return h.length&&B.push(h.join(":")),B}function Is(h,b,B,O){this.j=h,this.i=b,this.l=B,this.S=O||1,this.V=new ve(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ds}function Ds(){this.i=null,this.g="",this.h=!1}var nr={},or={};function me(h,b,B){h.M=1,h.A=Yi(vr(b)),h.u=B,h.R=!0,Le(h,null)}function Le(h,b){h.F=Date.now(),It(h),h.B=vr(h.A);var B=h.B,O=h.S;Array.isArray(O)||(O=[String(O)]),qA(B.i,"t",O),h.C=0,B=h.j.L,h.h=new Ds,h.g=Du(h.j,B?b:null,!h.u),h.P>0&&(h.O=new Pt(g(h.Y,h,h.g),h.P)),b=h.V,B=h.g,O=h.ba;var se="readystatechange";Array.isArray(se)||(se&&(Vt[0]=se.toString()),se=Vt);for(let oe=0;oe<se.length;oe++){const Ne=qe(B,se[oe],O||b.handleEvent,!1,b.h||b);if(!Ne)break;b.g[Ne.key]=Ne}b=h.J?P(h.J):{},h.u?(h.v||(h.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,b)):(h.v="GET",h.g.ea(h.B,h.v,null,b)),ts(),Ha(h.i,h.v,h.B,h.l,h.S,h.u)}Is.prototype.ba=function(h){h=h.target;const b=this.O;b&&pn(h)==3?b.j():this.Y(h)},Is.prototype.Y=function(h){try{if(h==this.g)e:{const rt=pn(this.g),fr=this.g.ya(),Ct=this.g.ca();if(!(rt<3)&&(rt!=3||this.g&&(this.h.h||this.g.la()||zr(this.g)))){this.K||rt!=4||fr==7||(fr==8||Ct<=0?ts(3):ts(2)),Xe(this);var b=this.g.ca();this.X=b;var B=Be(this);if(this.o=b==200,zA(this.i,this.v,this.B,this.l,this.S,rt,b),this.o){if(this.U&&!this.L){t:{if(this.g){var O,se=this.g;if((O=se.g?se.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(O)){var oe=O;break t}}oe=null}if(h=oe)Qs(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Vr(this,h);else{this.o=!1,this.m=3,qt(12),zt(this),hr(this);break e}}if(this.R){h=!0;let Zt;for(;!this.K&&this.C<B.length;)if(Zt=Yt(this,B),Zt==or){rt==4&&(this.m=4,qt(14),h=!1),Qs(this.i,this.l,null,"[Incomplete Response]");break}else if(Zt==nr){this.m=4,qt(15),Qs(this.i,this.l,B,"[Invalid Chunk]"),h=!1;break}else Qs(this.i,this.l,Zt,null),Vr(this,Zt);if(ot(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),rt!=4||B.length!=0||this.h.h||(this.m=1,qt(16),h=!1),this.o=this.o&&h,!h)Qs(this.i,this.l,B,"[Invalid Chunked Response]"),zt(this),hr(this);else if(B.length>0&&!this.W){this.W=!0;var Ne=this.j;Ne.g==this&&Ne.aa&&!Ne.P&&(Ne.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),Tl(Ne),Ne.P=!0,qt(11))}}else Qs(this.i,this.l,B,null),Vr(this,B);rt==4&&zt(this),this.o&&!this.K&&(rt==4?Uu(this.j,this):(this.o=!1,It(this)))}else da(this.g),b==400&&B.indexOf("Unknown SID")>0?(this.m=3,qt(12)):(this.m=0,qt(13)),zt(this),hr(this)}}}catch{}};function Be(h){if(!ot(h))return h.g.la();const b=zr(h.g);if(b==="")return"";let B="";const O=b.length,se=pn(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return zt(h),hr(h),"";h.h.i=new u.TextDecoder}for(let oe=0;oe<O;oe++)h.h.h=!0,B+=h.h.i.decode(b[oe],{stream:!(se&&oe==O-1)});return b.length=0,h.h.g+=B,h.C=0,h.h.g}function ot(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Yt(h,b){var B=h.C,O=b.indexOf(`
`,B);return O==-1?or:(B=Number(b.substring(B,O)),isNaN(B)?nr:(O+=1,O+B>b.length?or:(b=b.slice(O,O+B),h.C=O+B,b)))}Is.prototype.cancel=function(){this.K=!0,zt(this)};function It(h){h.T=Date.now()+h.H,hs(h,h.H)}function hs(h,b){if(h.D!=null)throw Error("WatchDog timer not null");h.D=ds(g(h.aa,h),b)}function Xe(h){h.D&&(u.clearTimeout(h.D),h.D=null)}Is.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(la(this.i,this.B),this.M!=2&&(ts(),qt(17)),zt(this),this.m=2,hr(this)):hs(this,this.T-h)};function hr(h){h.j.I==0||h.K||Uu(h.j,h)}function zt(h){Xe(h);var b=h.O;b&&typeof b.dispose=="function"&&b.dispose(),h.O=null,sr(h.V),h.g&&(b=h.g,h.g=null,b.abort(),b.dispose())}function Vr(h,b){try{var B=h.j;if(B.I!=0&&(B.g==h||ms(B.h,h))){if(!h.L&&ms(B.h,h)&&B.I==3){try{var O=B.Ba.g.parse(b)}catch{O=null}if(Array.isArray(O)&&O.length==3){var se=O;if(se[0]==0){e:if(!B.v){if(B.g)if(B.g.F+3e3<h.F)WA(B),$a(B);else break e;tA(B),qt(18)}}else B.xa=se[1],0<B.xa-B.K&&se[2]<37500&&B.F&&B.A==0&&!B.C&&(B.C=ds(g(B.Va,B),6e3));fs(B.h)<=1&&B.ta&&(B.ta=void 0)}else Hn(B,11)}else if((h.L||B.g==h)&&WA(B),!U(b))for(se=B.Ba.g.parse(b),b=0;b<se.length;b++){let Ct=se[b];const Zt=Ct[0];if(!(Zt<=B.K))if(B.K=Zt,Ct=Ct[1],B.I==2)if(Ct[0]=="c"){B.M=Ct[1],B.ba=Ct[2];const Js=Ct[3];Js!=null&&(B.ka=Js,B.j.info("VER="+B.ka));const On=Ct[4];On!=null&&(B.za=On,B.j.info("SVER="+B.za));const xn=Ct[5];xn!=null&&typeof xn=="number"&&xn>0&&(O=1.5*xn,B.O=O,B.j.info("backChannelRequestTimeoutMs_="+O)),O=B;const yn=h.g;if(yn){const rA=yn.g?yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(rA){var oe=O.h;oe.g||rA.indexOf("spdy")==-1&&rA.indexOf("quic")==-1&&rA.indexOf("h2")==-1||(oe.j=oe.l,oe.g=new Set,oe.h&&(In(oe,oe.h),oe.h=null))}if(O.G){const ZA=yn.g?yn.g.getResponseHeader("X-HTTP-Session-Id"):null;ZA&&(O.wa=ZA,Ut(O.J,O.G,ZA))}}B.I=3,B.l&&B.l.ra(),B.aa&&(B.T=Date.now()-h.F,B.j.info("Handshake RTT: "+B.T+"ms")),O=B;var Ne=h;if(O.na=Iu(O,O.L?O.ba:null,O.W),Ne.L){yl(O.h,Ne);var rt=Ne,fr=O.O;fr&&(rt.H=fr),rt.D&&(Xe(rt),It(rt)),O.g=Ne}else ju(O);B.i.length>0&&Ln(B)}else Ct[0]!="stop"&&Ct[0]!="close"||Hn(B,7);else B.I==3&&(Ct[0]=="stop"||Ct[0]=="close"?Ct[0]=="stop"?Hn(B,7):_l(B):Ct[0]!="noop"&&B.l&&B.l.qa(Ct),B.A=0)}}ts(4)}catch{}}var _t=class{constructor(h,b){this.g=h,this.map=b}};function Tr(h){this.l=h||10,u.PerformanceNavigationTiming?(h=u.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Fn(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function fs(h){return h.h?1:h.g?h.g.size:0}function ms(h,b){return h.h?h.h==b:h.g?h.g.has(b):!1}function In(h,b){h.g?h.g.add(b):h.h=b}function yl(h,b){h.h&&h.h==b?h.h=null:h.g&&h.g.has(b)&&h.g.delete(b)}Tr.prototype.cancel=function(){if(this.i=bl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function bl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let b=h.i;for(const B of h.g.values())b=b.concat(B.G);return b}return N(h.i)}var Bu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function KA(h,b){if(h){h=h.split("&");for(let B=0;B<h.length;B++){const O=h[B].indexOf("=");let se,oe=null;O>=0?(se=h[B].substring(0,O),oe=h[B].substring(O+1)):se=h[B],b(se,oe?decodeURIComponent(oe.replace(/\+/g," ")):"")}}}function ks(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;h instanceof ks?(this.l=h.l,Rr(this,h.j),this.o=h.o,this.g=h.g,Pa(this,h.u),this.h=h.h,vl(this,Su(h.i)),this.m=h.m):h&&(b=String(h).match(Bu))?(this.l=!1,Rr(this,b[1]||"",!0),this.o=Dn(b[2]||""),this.g=Dn(b[3]||"",!0),Pa(this,b[4]),this.h=Dn(b[5]||"",!0),vl(this,b[6]||"",!0),this.m=Dn(b[7]||"")):(this.l=!1,this.i=new za(null,this.l))}ks.prototype.toString=function(){const h=[];var b=this.j;b&&h.push($i(b,GA,!0),":");var B=this.g;return(B||b=="file")&&(h.push("//"),(b=this.o)&&h.push($i(b,GA,!0),"@"),h.push(Fs(B).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),B=this.u,B!=null&&h.push(":",String(B))),(B=this.h)&&(this.g&&B.charAt(0)!="/"&&h.push("/"),h.push($i(B,B.charAt(0)=="/"?wl:Cu,!0))),(B=this.i.toString())&&h.push("?",B),(B=this.m)&&h.push("#",$i(B,Eu)),h.join("")},ks.prototype.resolve=function(h){const b=vr(this);let B=!!h.j;B?Rr(b,h.j):B=!!h.o,B?b.o=h.o:B=!!h.g,B?b.g=h.g:B=h.u!=null;var O=h.h;if(B)Pa(b,h.u);else if(B=!!h.h){if(O.charAt(0)!="/")if(this.g&&!this.h)O="/"+O;else{var se=b.h.lastIndexOf("/");se!=-1&&(O=b.h.slice(0,se+1)+O)}if(se=O,se==".."||se==".")O="";else if(se.indexOf("./")!=-1||se.indexOf("/.")!=-1){O=se.lastIndexOf("/",0)==0,se=se.split("/");const oe=[];for(let Ne=0;Ne<se.length;){const rt=se[Ne++];rt=="."?O&&Ne==se.length&&oe.push(""):rt==".."?((oe.length>1||oe.length==1&&oe[0]!="")&&oe.pop(),O&&Ne==se.length&&oe.push("")):(oe.push(rt),O=!0)}O=oe.join("/")}else O=se}return B?b.h=O:B=h.i.toString()!=="",B?vl(b,Su(h.i)):B=!!h.m,B&&(b.m=h.m),b};function vr(h){return new ks(h)}function Rr(h,b,B){h.j=B?Dn(b,!0):b,h.j&&(h.j=h.j.replace(/:$/,""))}function Pa(h,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);h.u=b}else h.u=null}function vl(h,b,B){b instanceof za?(h.i=b,YA(h.i,h.l)):(B||(b=$i(b,Va)),h.i=new za(b,h.l))}function Ut(h,b,B){h.i.set(b,B)}function Yi(h){return Ut(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Dn(h,b){return h?b?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function $i(h,b,B){return typeof h=="string"?(h=encodeURI(h).replace(b,bs),B&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function bs(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var GA=/[#\/\?@]/g,Cu=/[#\?:]/g,wl=/[#\?]/g,Va=/[#\?@]/g,Eu=/#/g;function za(h,b){this.h=this.g=null,this.i=h||null,this.j=!!b}function vs(h){h.g||(h.g=new Map,h.h=0,h.i&&KA(h.i,function(b,B){h.add(decodeURIComponent(b.replace(/\+/g," ")),B)}))}r=za.prototype,r.add=function(h,b){vs(this),this.i=null,h=Ka(this,h);let B=this.g.get(h);return B||this.g.set(h,B=[]),B.push(b),this.h+=1,this};function Nu(h,b){vs(h),b=Ka(h,b),h.g.has(b)&&(h.i=null,h.h-=h.g.get(b).length,h.g.delete(b))}function Bl(h,b){return vs(h),b=Ka(h,b),h.g.has(b)}r.forEach=function(h,b){vs(this),this.g.forEach(function(B,O){B.forEach(function(se){h.call(b,se,O,this)},this)},this)};function Cl(h,b){vs(h);let B=[];if(typeof b=="string")Bl(h,b)&&(B=B.concat(h.g.get(Ka(h,b))));else for(h=Array.from(h.g.values()),b=0;b<h.length;b++)B=B.concat(h[b]);return B}r.set=function(h,b){return vs(this),this.i=null,h=Ka(this,h),Bl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[b]),this.h+=1,this},r.get=function(h,b){return h?(h=Cl(this,h),h.length>0?String(h[0]):b):b};function qA(h,b,B){Nu(h,b),B.length>0&&(h.i=null,h.g.set(Ka(h,b),N(B)),h.h+=B.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],b=Array.from(this.g.keys());for(let O=0;O<b.length;O++){var B=b[O];const se=Fs(B);B=Cl(this,B);for(let oe=0;oe<B.length;oe++){let Ne=se;B[oe]!==""&&(Ne+="="+Fs(B[oe])),h.push(Ne)}}return this.i=h.join("&")};function Su(h){const b=new za;return b.i=h.i,h.g&&(b.g=new Map(h.g),b.h=h.h),b}function Ka(h,b){return b=String(b),h.j&&(b=b.toLowerCase()),b}function YA(h,b){b&&!h.j&&(vs(h),h.i=null,h.g.forEach(function(B,O){const se=O.toLowerCase();O!=se&&(Nu(this,O),qA(this,se,B))},h)),h.j=b}function mn(h,b){const B=new Us;if(u.Image){const O=new Image;O.onload=x($s,B,"TestLoadImage: loaded",!0,b,O),O.onerror=x($s,B,"TestLoadImage: error",!1,b,O),O.onabort=x($s,B,"TestLoadImage: abort",!1,b,O),O.ontimeout=x($s,B,"TestLoadImage: timeout",!1,b,O),u.setTimeout(function(){O.ontimeout&&O.ontimeout()},1e4),O.src=h}else b(!1)}function El(h,b){const B=new Us,O=new AbortController,se=setTimeout(()=>{O.abort(),$s(B,"TestPingServer: timeout",!1,b)},1e4);fetch(h,{signal:O.signal}).then(oe=>{clearTimeout(se),oe.ok?$s(B,"TestPingServer: ok",!0,b):$s(B,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(se),$s(B,"TestPingServer: error",!1,b)})}function $s(h,b,B,O,se){try{se&&(se.onload=null,se.onerror=null,se.onabort=null,se.ontimeout=null),O(B)}catch{}}function Ga(){this.g=new kr}function kn(h){this.i=h.Sb||null,this.h=h.ab||!1}y(kn,Ts),kn.prototype.g=function(){return new Xi(this.i,this.h)};function Xi(h,b){Je.call(this),this.H=h,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(Xi,Je),r=Xi.prototype,r.open=function(h,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=b,this.readyState=1,gn(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(b.body=h),(this.H||u).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,qa(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,gn(this)),this.g&&(this.readyState=3,gn(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;$A(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function $A(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var b=h.value?h.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!h.done}))&&(this.response=this.responseText+=b)}h.done?qa(this):gn(this),this.readyState==3&&$A(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,qa(this))},r.Na=function(h){this.g&&(this.response=h,qa(this))},r.ga=function(){this.g&&qa(this)};function qa(h){h.readyState=4,h.l=null,h.j=null,h.B=null,gn(h)}r.setRequestHeader=function(h,b){this.A.append(h,b)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],b=this.h.entries();for(var B=b.next();!B.done;)B=B.value,h.push(B[0]+": "+B[1]),B=b.next();return h.join(`\r
`)};function gn(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Xi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Xs(h){let b="";return te(h,function(B,O){b+=O,b+=":",b+=B,b+=`\r
`}),b}function Ji(h,b,B){e:{for(O in B){var O=!1;break e}O=!0}O||(B=Xs(B),typeof h=="string"?B!=null&&Fs(B):Ut(h,b,B))}function Dt(h){Je.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(Dt,Je);var Rn=/^https?$/i,Nl=["POST","PUT"];r=Dt.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,b,B,O){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);b=b?b.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():qi.g(),this.g.onreadystatechange=v(g(this.Ca,this));try{this.B=!0,this.g.open(b,String(h),!0),this.B=!1}catch(oe){Wi(this,oe);return}if(h=B||"",B=new Map(this.headers),O)if(Object.getPrototypeOf(O)===Object.prototype)for(var se in O)B.set(se,O[se]);else if(typeof O.keys=="function"&&typeof O.get=="function")for(const oe of O.keys())B.set(oe,O.get(oe));else throw Error("Unknown input type for opt_headers: "+String(O));O=Array.from(B.keys()).find(oe=>oe.toLowerCase()=="content-type"),se=u.FormData&&h instanceof u.FormData,!(Array.prototype.indexOf.call(Nl,b,void 0)>=0)||O||se||B.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[oe,Ne]of B)this.g.setRequestHeader(oe,Ne);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(oe){Wi(this,oe)}};function Wi(h,b){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=b,h.o=5,Sl(h),ua(h)}function Sl(h){h.A||(h.A=!0,De(h,"complete"),De(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,De(this,"complete"),De(this,"abort"),ua(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ua(this,!0)),Dt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Zi(this):this.Xa())},r.Xa=function(){Zi(this)};function Zi(h){if(h.h&&typeof l<"u"){if(h.v&&pn(h)==4)setTimeout(h.Ca.bind(h),0);else if(De(h,"readystatechange"),pn(h)==4){h.h=!1;try{const oe=h.ca();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var B;if(!(B=b)){var O;if(O=oe===0){let Ne=String(h.D).match(Bu)[1]||null;!Ne&&u.self&&u.self.location&&(Ne=u.self.location.protocol.slice(0,-1)),O=!Rn.test(Ne?Ne.toLowerCase():"")}B=O}if(B)De(h,"complete"),De(h,"success");else{h.o=6;try{var se=pn(h)>2?h.g.statusText:""}catch{se=""}h.l=se+" ["+h.ca()+"]",Sl(h)}}finally{ua(h)}}}}function ua(h,b){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const B=h.g;h.g=null,b||De(h,"ready");try{B.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function pn(h){return h.g?h.g.readyState:0}r.ca=function(){try{return pn(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var b=this.g.responseText;return h&&b.indexOf(h)==0&&(b=b.substring(h.length)),br(b)}};function zr(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function da(h){const b={};h=(h.g&&pn(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let O=0;O<h.length;O++){if(U(h[O]))continue;var B=Oa(h[O]);const se=B[0];if(B=B[1],typeof B!="string")continue;B=B.trim();const oe=b[se]||[];b[se]=oe,oe.push(B)}Ae(b,function(O){return O.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Mn(h,b,B){return B&&B.internalChannelParams&&B.internalChannelParams[h]||b}function Ya(h){this.za=0,this.i=[],this.j=new Us,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Mn("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Mn("baseRetryDelayMs",5e3,h),this.Za=Mn("retryDelaySeedMs",1e4,h),this.Ta=Mn("forwardChannelMaxRetries",2,h),this.va=Mn("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Tr(h&&h.concurrentRequestLimit),this.Ba=new Ga,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Ya.prototype,r.ka=8,r.I=1,r.connect=function(h,b,B,O){qt(0),this.W=h,this.H=b||{},B&&O!==void 0&&(this.H.OSID=B,this.H.OAID=O),this.F=this.X,this.J=Iu(this,null,this.W),Ln(this)};function _l(h){if(XA(h),h.I==3){var b=h.V++,B=vr(h.J);if(Ut(B,"SID",h.M),Ut(B,"RID",b),Ut(B,"TYPE","terminate"),eA(h,B),b=new Is(h,h.j,b),b.M=2,b.A=Yi(vr(B)),B=!1,u.navigator&&u.navigator.sendBeacon)try{B=u.navigator.sendBeacon(b.A.toString(),"")}catch{}!B&&u.Image&&(new Image().src=b.A,B=!0),B||(b.g=Du(b.j,null),b.g.ea(b.A)),b.F=Date.now(),It(b)}Fu(h)}function $a(h){h.g&&(Tl(h),h.g.cancel(),h.g=null)}function XA(h){$a(h),h.v&&(u.clearTimeout(h.v),h.v=null),WA(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&u.clearTimeout(h.m),h.m=null)}function Ln(h){if(!Fn(h.h)&&!h.m){h.m=!0;var b=h.Ea;$||_(),Y||($(),Y=!0),E.add(b,h),h.D=0}}function JA(h,b){return fs(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=b.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=ds(g(h.Ea,h,b),Qu(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const se=new Is(this,this.j,h);let oe=this.o;if(this.U&&(oe?(oe=P(oe),le(oe,this.U)):oe=this.U),this.u!==null||this.R||(se.J=oe,oe=null),this.S)e:{for(var b=0,B=0;B<this.i.length;B++){t:{var O=this.i[B];if("__data__"in O.map&&(O=O.map.__data__,typeof O=="string")){O=O.length;break t}O=void 0}if(O===void 0)break;if(b+=O,b>4096){b=B;break e}if(b===4096||B===this.i.length-1){b=B+1;break e}}b=1e3}else b=1e3;b=_u(this,se,b),B=vr(this.J),Ut(B,"RID",h),Ut(B,"CVER",22),this.G&&Ut(B,"X-HTTP-Session-Id",this.G),eA(this,B),oe&&(this.R?b="headers="+Fs(Xs(oe))+"&"+b:this.u&&Ji(B,this.u,oe)),In(this.h,se),this.Ra&&Ut(B,"TYPE","init"),this.S?(Ut(B,"$req",b),Ut(B,"SID","null"),se.U=!0,me(se,B,null)):me(se,B,b),this.I=2}}else this.I==3&&(h?jl(this,h):this.i.length==0||Fn(this.h)||jl(this))};function jl(h,b){var B;b?B=b.l:B=h.V++;const O=vr(h.J);Ut(O,"SID",h.M),Ut(O,"RID",B),Ut(O,"AID",h.K),eA(h,O),h.u&&h.o&&Ji(O,h.u,h.o),B=new Is(h,h.j,B,h.D+1),h.u===null&&(B.J=h.o),b&&(h.i=b.G.concat(h.i)),b=_u(h,B,1e3),B.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),In(h.h,B),me(B,O,b)}function eA(h,b){h.H&&te(h.H,function(B,O){Ut(b,O,B)}),h.l&&te({},function(B,O){Ut(b,O,B)})}function _u(h,b,B){B=Math.min(h.i.length,B);const O=h.l?g(h.l.Ka,h.l,h):null;e:{var se=h.i;let rt=-1;for(;;){const fr=["count="+B];rt==-1?B>0?(rt=se[0].g,fr.push("ofs="+rt)):rt=0:fr.push("ofs="+rt);let Ct=!0;for(let Zt=0;Zt<B;Zt++){var oe=se[Zt].g;const Js=se[Zt].map;if(oe-=rt,oe<0)rt=Math.max(0,se[Zt].g-100),Ct=!1;else try{oe="req"+oe+"_"||"";try{var Ne=Js instanceof Map?Js:Object.entries(Js);for(const[On,xn]of Ne){let yn=xn;d(xn)&&(yn=Ht(xn)),fr.push(oe+On+"="+encodeURIComponent(yn))}}catch(On){throw fr.push(oe+"type="+encodeURIComponent("_badmap")),On}}catch{O&&O(Js)}}if(Ct){Ne=fr.join("&");break e}}Ne=void 0}return h=h.i.splice(0,B),b.G=h,Ne}function ju(h){if(!h.g&&!h.v){h.Y=1;var b=h.Da;$||_(),Y||($(),Y=!0),E.add(b,h),h.A=0}}function tA(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=ds(g(h.Da,h),Qu(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,Tu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=ds(g(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,qt(10),$a(this),Tu(this))};function Tl(h){h.B!=null&&(u.clearTimeout(h.B),h.B=null)}function Tu(h){h.g=new Is(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var b=vr(h.na);Ut(b,"RID","rpc"),Ut(b,"SID",h.M),Ut(b,"AID",h.K),Ut(b,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ut(b,"TO",h.ia),Ut(b,"TYPE","xmlhttp"),eA(h,b),h.u&&h.o&&Ji(b,h.u,h.o),h.O&&(h.g.H=h.O);var B=h.g;h=h.ba,B.M=1,B.A=Yi(vr(b)),B.u=null,B.R=!0,Le(B,h)}r.Va=function(){this.C!=null&&(this.C=null,$a(this),tA(this),qt(19))};function WA(h){h.C!=null&&(u.clearTimeout(h.C),h.C=null)}function Uu(h,b){var B=null;if(h.g==b){WA(h),Tl(h),h.g=null;var O=2}else if(ms(h.h,b))B=b.G,yl(h.h,b),O=1;else return;if(h.I!=0){if(b.o)if(O==1){B=b.u?b.u.length:0,b=Date.now()-b.F;var se=h.D;O=dr(),De(O,new Ys(O,B)),Ln(h)}else ju(h);else if(se=b.m,se==3||se==0&&b.X>0||!(O==1&&JA(h,b)||O==2&&tA(h)))switch(B&&B.length>0&&(b=h.h,b.i=b.i.concat(B)),se){case 1:Hn(h,5);break;case 4:Hn(h,10);break;case 3:Hn(h,6);break;default:Hn(h,2)}}}function Qu(h,b){let B=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(B*=2),B*b}function Hn(h,b){if(h.j.info("Error code "+b),b==2){var B=g(h.bb,h),O=h.Ua;const se=!O;O=new ks(O||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Rr(O,"https"),Yi(O),se?mn(O.toString(),B):El(O.toString(),B)}else qt(2);h.I=0,h.l&&h.l.pa(b),Fu(h),XA(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),qt(2)):(this.j.info("Failed to ping google.com"),qt(1))};function Fu(h){if(h.I=0,h.ja=[],h.l){const b=bl(h.h);(b.length!=0||h.i.length!=0)&&(M(h.ja,b),M(h.ja,h.i),h.h.i.length=0,N(h.i),h.i.length=0),h.l.oa()}}function Iu(h,b,B){var O=B instanceof ks?vr(B):new ks(B);if(O.g!="")b&&(O.g=b+"."+O.g),Pa(O,O.u);else{var se=u.location;O=se.protocol,b=b?b+"."+se.hostname:se.hostname,se=+se.port;const oe=new ks(null);O&&Rr(oe,O),b&&(oe.g=b),se&&Pa(oe,se),B&&(oe.h=B),O=oe}return B=h.G,b=h.wa,B&&b&&Ut(O,B,b),Ut(O,"VER",h.ka),eA(h,O),O}function Du(h,b,B){if(b&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=h.Aa&&!h.ma?new Dt(new kn({ab:B})):new Dt(h.ma),b.Fa(h.L),b}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function ku(){}r=ku.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Xa(){}Xa.prototype.g=function(h,b){return new gs(h,b)};function gs(h,b){Je.call(this),this.g=new Ya(b),this.l=h,this.h=b&&b.messageUrlParams||null,h=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(h?h["X-WebChannel-Content-Type"]=b.messageContentType:h={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(h?h["X-WebChannel-Client-Profile"]=b.sa:h={"X-WebChannel-Client-Profile":b.sa}),this.g.U=h,(h=b&&b.Qb)&&!U(h)&&(this.g.u=h),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!U(b)&&(this.g.G=b,h=this.h,h!==null&&b in h&&(h=this.h,b in h&&delete h[b])),this.j=new ha(this)}y(gs,Je),gs.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},gs.prototype.close=function(){_l(this.g)},gs.prototype.o=function(h){var b=this.g;if(typeof h=="string"){var B={};B.__data__=h,h=B}else this.v&&(B={},B.__data__=Ht(h),h=B);b.i.push(new _t(b.Ya++,h)),b.I==3&&Ln(b)},gs.prototype.N=function(){this.g.l=null,delete this.j,_l(this.g),delete this.g,gs.Z.N.call(this)};function Ru(h){Ye.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var b=h.__sm__;if(b){e:{for(const B in b){h=B;break e}h=void 0}(this.i=h)&&(h=this.i,b=b!==null&&h in b?b[h]:void 0),this.data=b}else this.data=h}y(Ru,Ye);function Mu(){nt.call(this),this.status=1}y(Mu,nt);function ha(h){this.g=h}y(ha,ku),ha.prototype.ra=function(){De(this.g,"a")},ha.prototype.qa=function(h){De(this.g,new Ru(h))},ha.prototype.pa=function(h){De(this.g,new Mu)},ha.prototype.oa=function(){De(this.g,"b")},Xa.prototype.createWebChannel=Xa.prototype.g,gs.prototype.send=gs.prototype.o,gs.prototype.open=gs.prototype.m,gs.prototype.close=gs.prototype.close,vE=function(){return new Xa},bE=function(){return dr()},yE=Oe,Wp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Qn.NO_ERROR=0,Qn.TIMEOUT=8,Qn.HTTP_ERROR=6,Sh=Qn,Gi.COMPLETE="complete",xE=Gi,ce.EventType=Re,Re.OPEN="a",Re.CLOSE="b",Re.ERROR="c",Re.MESSAGE="d",Je.prototype.listen=Je.prototype.J,bc=ce,Dt.prototype.listenOnce=Dt.prototype.K,Dt.prototype.getLastError=Dt.prototype.Ha,Dt.prototype.getLastErrorCode=Dt.prototype.ya,Dt.prototype.getStatus=Dt.prototype.ca,Dt.prototype.getResponseJson=Dt.prototype.La,Dt.prototype.getResponseText=Dt.prototype.la,Dt.prototype.send=Dt.prototype.ea,Dt.prototype.setWithCredentials=Dt.prototype.Fa,pE=Dt}).apply(typeof Vd<"u"?Vd:typeof self<"u"?self:typeof window<"u"?window:{});let as=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};as.UNAUTHENTICATED=new as(null),as.GOOGLE_CREDENTIALS=new as("google-credentials-uid"),as.FIRST_PARTY=new as("first-party-uid"),as.MOCK_USER=new as("mock-user");let hl="12.9.0";function $Q(r){hl=r}const kA=new $x("@firebase/firestore");function Lo(){return kA.logLevel}function Qe(r,...e){if(kA.logLevel<=mt.DEBUG){const t=e.map(l0);kA.debug(`Firestore (${hl}): ${r}`,...t)}}function ka(r,...e){if(kA.logLevel<=mt.ERROR){const t=e.map(l0);kA.error(`Firestore (${hl}): ${r}`,...t)}}function RA(r,...e){if(kA.logLevel<=mt.WARN){const t=e.map(l0);kA.warn(`Firestore (${hl}): ${r}`,...t)}}function l0(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function Ge(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,wE(r,s,t)}function wE(r,e,t){let s=`FIRESTORE (${hl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw ka(s),new Error(s)}function Tt(r,e,t,s){let A="Unexpected state";typeof t=="string"?A=t:s=t,r||wE(e,A,s)}function et(r,e){return r}const we={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class He extends La{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Di{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class BE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class XQ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(as.UNAUTHENTICATED)))}shutdown(){}}class JQ{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class WQ{constructor(e){this.t=e,this.currentUser=as.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Tt(this.o===void 0,42304);let s=this.i;const A=f=>this.i!==s?(s=this.i,t(f)):Promise.resolve();let l=new Di;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Di,e.enqueueRetryable((()=>A(this.currentUser)))};const u=()=>{const f=l;e.enqueueRetryable((async()=>{await f.promise,await A(this.currentUser)}))},d=f=>{Qe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((f=>d(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(Qe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Di)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(Qe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Tt(typeof s.accessToken=="string",31837,{l:s}),new BE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Tt(e===null||typeof e=="string",2055,{h:e}),new as(e)}}class ZQ{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=as.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class eF{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new ZQ(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(as.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class nB{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tF{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Cn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Tt(this.o===void 0,3512);const s=l=>{l.error!=null&&Qe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,Qe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const A=l=>{Qe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>A(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?A(l):Qe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new nB(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Tt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new nB(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function rF(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}class c0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const A=rF(40);for(let l=0;l<A.length;++l)s.length<20&&A[l]<t&&(s+=e.charAt(A[l]%62))}return s}}function gt(r,e){return r<e?-1:r>e?1:0}function Zp(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const A=r.charAt(s),l=e.charAt(s);if(A!==l)return ep(A)===ep(l)?gt(A,l):ep(A)?1:-1}return gt(r.length,e.length)}const sF=55296,nF=57343;function ep(r){const e=r.charCodeAt(0);return e>=sF&&e<=nF}function rl(r,e,t){return r.length===e.length&&r.every(((s,A)=>t(s,e[A])))}const aB="__name__";class Yn{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ge(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ge(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Yn.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Yn?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let A=0;A<s;A++){const l=Yn.compareSegments(e.get(A),t.get(A));if(l!==0)return l}return gt(e.length,t.length)}static compareSegments(e,t){const s=Yn.isNumericId(e),A=Yn.isNumericId(t);return s&&!A?-1:!s&&A?1:s&&A?Yn.extractNumericId(e).compare(Yn.extractNumericId(t)):Zp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ii.fromString(e.substring(4,e.length-2))}}class ar extends Yn{construct(e,t,s){return new ar(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new He(we.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((A=>A.length>0)))}return new ar(t)}static emptyPath(){return new ar([])}}const aF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jr extends Yn{construct(e,t,s){return new Jr(e,t,s)}static isValidIdentifier(e){return aF.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===aB}static keyField(){return new Jr([aB])}static fromServerFormat(e){const t=[];let s="",A=0;const l=()=>{if(s.length===0)throw new He(we.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let u=!1;for(;A<e.length;){const d=e[A];if(d==="\\"){if(A+1===e.length)throw new He(we.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[A+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new He(we.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=f,A+=2}else d==="`"?(u=!u,A++):d!=="."||u?(s+=d,A++):(l(),A++)}if(l(),u)throw new He(we.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Jr(t)}static emptyPath(){return new Jr([])}}class Ve{constructor(e){this.path=e}static fromPath(e){return new Ve(ar.fromString(e))}static fromName(e){return new Ve(ar.fromString(e).popFirst(5))}static empty(){return new Ve(ar.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ar.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ar.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ve(new ar(e.slice()))}}function iF(r,e,t){if(!t)throw new He(we.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function AF(r,e,t,s){if(e===!0&&s===!0)throw new He(we.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function iB(r){if(!Ve.isDocumentKey(r))throw new He(we.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function CE(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function u0(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ge(12329,{type:typeof r})}function sl(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new He(we.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=u0(r);throw new He(we.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function _r(r,e){const t={typeString:r};return e&&(t.value=e),t}function du(r,e){if(!CE(r))throw new He(we.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const A=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const u=r[s];if(A&&typeof u!==A){t=`JSON field '${s}' must be a ${A}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new He(we.INVALID_ARGUMENT,t);return!0}const AB=-62135596800,oB=1e6;class Jt{static now(){return Jt.fromMillis(Date.now())}static fromDate(e){return Jt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*oB);return new Jt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new He(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new He(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<AB)throw new He(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new He(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/oB}_compareTo(e){return this.seconds===e.seconds?gt(this.nanoseconds,e.nanoseconds):gt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Jt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(du(e,Jt._jsonSchema))return new Jt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-AB;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Jt._jsonSchemaVersion="firestore/timestamp/1.0",Jt._jsonSchema={type:_r("string",Jt._jsonSchemaVersion),seconds:_r("number"),nanoseconds:_r("number")};class We{static fromTimestamp(e){return new We(e)}static min(){return new We(new Jt(0,0))}static max(){return new We(new Jt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const $c=-1;function oF(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,A=We.fromTimestamp(s===1e9?new Jt(t+1,0):new Jt(t,s));return new Li(A,Ve.empty(),e)}function lF(r){return new Li(r.readTime,r.key,$c)}class Li{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Li(We.min(),Ve.empty(),$c)}static max(){return new Li(We.max(),Ve.empty(),$c)}}function cF(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Ve.comparator(r.documentKey,e.documentKey),t!==0?t:gt(r.largestBatchId,e.largestBatchId))}const uF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function fl(r){if(r.code!==we.FAILED_PRECONDITION||r.message!==uF)throw r;Qe("LocalStore","Unexpectedly lost primary lease")}class be{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new be(((s,A)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,A)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,A)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof be?t:be.resolve(t)}catch(t){return be.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):be.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):be.reject(t)}static resolve(e){return new be(((t,s)=>{t(e)}))}static reject(e){return new be(((t,s)=>{s(e)}))}static waitFor(e){return new be(((t,s)=>{let A=0,l=0,u=!1;e.forEach((d=>{++A,d.next((()=>{++l,u&&l===A&&t()}),(f=>s(f)))})),u=!0,l===A&&t()}))}static or(e){let t=be.resolve(!1);for(const s of e)t=t.next((A=>A?be.resolve(A):s()));return t}static forEach(e,t){const s=[];return e.forEach(((A,l)=>{s.push(t.call(this,A,l))})),this.waitFor(s)}static mapArray(e,t){return new be(((s,A)=>{const l=e.length,u=new Array(l);let d=0;for(let f=0;f<l;f++){const g=f;t(e[g]).next((x=>{u[g]=x,++d,d===l&&s(u)}),(x=>A(x)))}}))}static doWhile(e,t){return new be(((s,A)=>{const l=()=>{e()===!0?t().next((()=>{l()}),A):s()};l()}))}}function hF(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ml(r){return r.name==="IndexedDbTransactionError"}class Bf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Bf.ce=-1;const d0=-1;function Cf(r){return r==null}function Kh(r){return r===0&&1/r==-1/0}function fF(r){return typeof r=="number"&&Number.isInteger(r)&&!Kh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const EE="";function mF(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=lB(e)),e=gF(r.get(t),e);return lB(e)}function gF(r,e){let t=e;const s=r.length;for(let A=0;A<s;A++){const l=r.charAt(A);switch(l){case"\0":t+="";break;case EE:t+="";break;default:t+=l}}return t}function lB(r){return r+EE+""}function cB(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function LA(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function NE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class Ar{constructor(e,t){this.comparator=e,this.root=t||Xr.EMPTY}insert(e,t){return new Ar(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xr.BLACK,null,null))}remove(e){return new Ar(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const A=this.comparator(e,s.key);if(A===0)return t+s.left.size;A<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zd(this.root,e,this.comparator,!1)}getReverseIterator(){return new zd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zd(this.root,e,this.comparator,!0)}}class zd{constructor(e,t,s,A){this.isReverse=A,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&A&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xr{constructor(e,t,s,A,l){this.key=e,this.value=t,this.color=s??Xr.RED,this.left=A??Xr.EMPTY,this.right=l??Xr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,A,l){return new Xr(e??this.key,t??this.value,s??this.color,A??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let A=this;const l=s(e,A.key);return A=l<0?A.copy(null,null,null,A.left.insert(e,t,s),null):l===0?A.copy(null,t,null,null,null):A.copy(null,null,null,null,A.right.insert(e,t,s)),A.fixUp()}removeMin(){if(this.left.isEmpty())return Xr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,A=this;if(t(e,A.key)<0)A.left.isEmpty()||A.left.isRed()||A.left.left.isRed()||(A=A.moveRedLeft()),A=A.copy(null,null,null,A.left.remove(e,t),null);else{if(A.left.isRed()&&(A=A.rotateRight()),A.right.isEmpty()||A.right.isRed()||A.right.left.isRed()||(A=A.moveRedRight()),t(e,A.key)===0){if(A.right.isEmpty())return Xr.EMPTY;s=A.right.min(),A=A.copy(s.key,s.value,null,null,A.right.removeMin())}A=A.copy(null,null,null,null,A.right.remove(e,t))}return A.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ge(27949);return e+(this.isRed()?0:1)}}Xr.EMPTY=null,Xr.RED=!0,Xr.BLACK=!1;Xr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ge(57766)}get value(){throw Ge(16141)}get color(){throw Ge(16727)}get left(){throw Ge(29726)}get right(){throw Ge(36894)}copy(e,t,s,A,l){return this}insert(e,t,s){return new Xr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Dr{constructor(e){this.comparator=e,this.data=new Ar(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const A=s.getNext();if(this.comparator(A.key,e[1])>=0)return;t(A.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new uB(this.data.getIterator())}getIteratorFrom(e){return new uB(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Dr)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const A=t.getNext().key,l=s.getNext().key;if(this.comparator(A,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Dr(this.comparator);return t.data=e,t}}class uB{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Nn{constructor(e){this.fields=e,e.sort(Jr.comparator)}static empty(){return new Nn([])}unionWith(e){let t=new Dr(Jr.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Nn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return rl(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}class SE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Zr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(A){try{return atob(A)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new SE("Invalid base64 string: "+l):l}})(e);return new Zr(t)}static fromUint8Array(e){const t=(function(A){let l="";for(let u=0;u<A.length;++u)l+=String.fromCharCode(A[u]);return l})(e);return new Zr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let A=0;A<t.length;A++)s[A]=t.charCodeAt(A);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return gt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zr.EMPTY_BYTE_STRING=new Zr("");const pF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hi(r){if(Tt(!!r,39018),typeof r=="string"){let e=0;const t=pF.exec(r);if(Tt(!!t,46558,{timestamp:r}),t[1]){let A=t[1];A=(A+"000000000").substr(0,9),e=Number(A)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:yr(r.seconds),nanos:yr(r.nanos)}}function yr(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Oi(r){return typeof r=="string"?Zr.fromBase64String(r):Zr.fromUint8Array(r)}const _E="server_timestamp",jE="__type__",TE="__previous_value__",UE="__local_write_time__";function h0(r){return(r?.mapValue?.fields||{})[jE]?.stringValue===_E}function Ef(r){const e=r.mapValue.fields[TE];return h0(e)?Ef(e):e}function Xc(r){const e=Hi(r.mapValue.fields[UE].timestampValue);return new Jt(e.seconds,e.nanos)}class xF{constructor(e,t,s,A,l,u,d,f,g,x,y){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=A,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=g,this.isUsingEmulator=x,this.apiKey=y}}const Gh="(default)";class Jc{constructor(e,t){this.projectId=e,this.database=t||Gh}static empty(){return new Jc("","")}get isDefaultDatabase(){return this.database===Gh}isEqual(e){return e instanceof Jc&&e.projectId===this.projectId&&e.database===this.database}}function yF(r,e){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new He(we.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jc(r.options.projectId,e)}const QE="__type__",bF="__max__",Kd={mapValue:{}},FE="__vector__",qh="value";function Pi(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?h0(r)?4:wF(r)?9007199254740991:vF(r)?10:11:Ge(28295,{value:r})}function ra(r,e){if(r===e)return!0;const t=Pi(r);if(t!==Pi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Xc(r).isEqual(Xc(e));case 3:return(function(A,l){if(typeof A.timestampValue=="string"&&typeof l.timestampValue=="string"&&A.timestampValue.length===l.timestampValue.length)return A.timestampValue===l.timestampValue;const u=Hi(A.timestampValue),d=Hi(l.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(A,l){return Oi(A.bytesValue).isEqual(Oi(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(A,l){return yr(A.geoPointValue.latitude)===yr(l.geoPointValue.latitude)&&yr(A.geoPointValue.longitude)===yr(l.geoPointValue.longitude)})(r,e);case 2:return(function(A,l){if("integerValue"in A&&"integerValue"in l)return yr(A.integerValue)===yr(l.integerValue);if("doubleValue"in A&&"doubleValue"in l){const u=yr(A.doubleValue),d=yr(l.doubleValue);return u===d?Kh(u)===Kh(d):isNaN(u)&&isNaN(d)}return!1})(r,e);case 9:return rl(r.arrayValue.values||[],e.arrayValue.values||[],ra);case 10:case 11:return(function(A,l){const u=A.mapValue.fields||{},d=l.mapValue.fields||{};if(cB(u)!==cB(d))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(d[f]===void 0||!ra(u[f],d[f])))return!1;return!0})(r,e);default:return Ge(52216,{left:r})}}function Wc(r,e){return(r.values||[]).find((t=>ra(t,e)))!==void 0}function nl(r,e){if(r===e)return 0;const t=Pi(r),s=Pi(e);if(t!==s)return gt(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return gt(r.booleanValue,e.booleanValue);case 2:return(function(l,u){const d=yr(l.integerValue||l.doubleValue),f=yr(u.integerValue||u.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1})(r,e);case 3:return dB(r.timestampValue,e.timestampValue);case 4:return dB(Xc(r),Xc(e));case 5:return Zp(r.stringValue,e.stringValue);case 6:return(function(l,u){const d=Oi(l),f=Oi(u);return d.compareTo(f)})(r.bytesValue,e.bytesValue);case 7:return(function(l,u){const d=l.split("/"),f=u.split("/");for(let g=0;g<d.length&&g<f.length;g++){const x=gt(d[g],f[g]);if(x!==0)return x}return gt(d.length,f.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,u){const d=gt(yr(l.latitude),yr(u.latitude));return d!==0?d:gt(yr(l.longitude),yr(u.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return hB(r.arrayValue,e.arrayValue);case 10:return(function(l,u){const d=l.fields||{},f=u.fields||{},g=d[qh]?.arrayValue,x=f[qh]?.arrayValue,y=gt(g?.values?.length||0,x?.values?.length||0);return y!==0?y:hB(g,x)})(r.mapValue,e.mapValue);case 11:return(function(l,u){if(l===Kd.mapValue&&u===Kd.mapValue)return 0;if(l===Kd.mapValue)return 1;if(u===Kd.mapValue)return-1;const d=l.fields||{},f=Object.keys(d),g=u.fields||{},x=Object.keys(g);f.sort(),x.sort();for(let y=0;y<f.length&&y<x.length;++y){const v=Zp(f[y],x[y]);if(v!==0)return v;const N=nl(d[f[y]],g[x[y]]);if(N!==0)return N}return gt(f.length,x.length)})(r.mapValue,e.mapValue);default:throw Ge(23264,{he:t})}}function dB(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return gt(r,e);const t=Hi(r),s=Hi(e),A=gt(t.seconds,s.seconds);return A!==0?A:gt(t.nanos,s.nanos)}function hB(r,e){const t=r.values||[],s=e.values||[];for(let A=0;A<t.length&&A<s.length;++A){const l=nl(t[A],s[A]);if(l)return l}return gt(t.length,s.length)}function al(r){return ex(r)}function ex(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=Hi(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Oi(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Ve.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",A=!0;for(const l of t.values||[])A?A=!1:s+=",",s+=ex(l);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let A="{",l=!0;for(const u of s)l?l=!1:A+=",",A+=`${u}:${ex(t.fields[u])}`;return A+"}"})(r.mapValue):Ge(61005,{value:r})}function _h(r){switch(Pi(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ef(r);return e?16+_h(e):16;case 5:return 2*r.stringValue.length;case 6:return Oi(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((A,l)=>A+_h(l)),0)})(r.arrayValue);case 10:case 11:return(function(s){let A=0;return LA(s.fields,((l,u)=>{A+=l.length+_h(u)})),A})(r.mapValue);default:throw Ge(13486,{value:r})}}function tx(r){return!!r&&"integerValue"in r}function f0(r){return!!r&&"arrayValue"in r}function fB(r){return!!r&&"nullValue"in r}function mB(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function jh(r){return!!r&&"mapValue"in r}function vF(r){return(r?.mapValue?.fields||{})[QE]?.stringValue===FE}function Dc(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return LA(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Dc(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Dc(r.arrayValue.values[t]);return e}return{...r}}function wF(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===bF}class ln{constructor(e){this.value=e}static empty(){return new ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!jh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Dc(t)}setAll(e){let t=Jr.emptyPath(),s={},A=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,s,A),s={},A=[],t=d.popLast()}u?s[d.lastSegment()]=Dc(u):A.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,A)}delete(e){const t=this.field(e.popLast());jh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ra(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let A=t.mapValue.fields[e.get(s)];jh(A)&&A.mapValue.fields||(A={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=A),t=A}return t.mapValue.fields}applyChanges(e,t,s){LA(t,((A,l)=>e[A]=l));for(const A of s)delete e[A]}clone(){return new ln(Dc(this.value))}}function IE(r){const e=[];return LA(r.fields,((t,s)=>{const A=new Jr([t]);if(jh(s)){const l=IE(s.mapValue).fields;if(l.length===0)e.push(A);else for(const u of l)e.push(A.child(u))}else e.push(A)})),new Nn(e)}class As{constructor(e,t,s,A,l,u,d){this.key=e,this.documentType=t,this.version=s,this.readTime=A,this.createTime=l,this.data=u,this.documentState=d}static newInvalidDocument(e){return new As(e,0,We.min(),We.min(),We.min(),ln.empty(),0)}static newFoundDocument(e,t,s,A){return new As(e,1,t,We.min(),s,A,0)}static newNoDocument(e,t){return new As(e,2,t,We.min(),We.min(),ln.empty(),0)}static newUnknownDocument(e,t){return new As(e,3,t,We.min(),We.min(),ln.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(We.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=We.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof As&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new As(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Yh{constructor(e,t){this.position=e,this.inclusive=t}}function gB(r,e,t){let s=0;for(let A=0;A<r.position.length;A++){const l=e[A],u=r.position[A];if(l.field.isKeyField()?s=Ve.comparator(Ve.fromName(u.referenceValue),t.key):s=nl(u,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function pB(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!ra(r.position[t],e.position[t]))return!1;return!0}class $h{constructor(e,t="asc"){this.field=e,this.dir=t}}function BF(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class DE{}class Fr extends DE{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new EF(e,t,s):t==="array-contains"?new _F(e,s):t==="in"?new jF(e,s):t==="not-in"?new TF(e,s):t==="array-contains-any"?new UF(e,s):new Fr(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new NF(e,s):new SF(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(nl(t,this.value)):t!==null&&Pi(this.value)===Pi(t)&&this.matchesComparison(nl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sa extends DE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new sa(e,t)}matches(e){return kE(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function kE(r){return r.op==="and"}function RE(r){return CF(r)&&kE(r)}function CF(r){for(const e of r.filters)if(e instanceof sa)return!1;return!0}function rx(r){if(r instanceof Fr)return r.field.canonicalString()+r.op.toString()+al(r.value);if(RE(r))return r.filters.map((e=>rx(e))).join(",");{const e=r.filters.map((t=>rx(t))).join(",");return`${r.op}(${e})`}}function ME(r,e){return r instanceof Fr?(function(s,A){return A instanceof Fr&&s.op===A.op&&s.field.isEqual(A.field)&&ra(s.value,A.value)})(r,e):r instanceof sa?(function(s,A){return A instanceof sa&&s.op===A.op&&s.filters.length===A.filters.length?s.filters.reduce(((l,u,d)=>l&&ME(u,A.filters[d])),!0):!1})(r,e):void Ge(19439)}function LE(r){return r instanceof Fr?(function(t){return`${t.field.canonicalString()} ${t.op} ${al(t.value)}`})(r):r instanceof sa?(function(t){return t.op.toString()+" {"+t.getFilters().map(LE).join(" ,")+"}"})(r):"Filter"}class EF extends Fr{constructor(e,t,s){super(e,t,s),this.key=Ve.fromName(s.referenceValue)}matches(e){const t=Ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class NF extends Fr{constructor(e,t){super(e,"in",t),this.keys=HE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class SF extends Fr{constructor(e,t){super(e,"not-in",t),this.keys=HE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function HE(r,e){return(e.arrayValue?.values||[]).map((t=>Ve.fromName(t.referenceValue)))}class _F extends Fr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return f0(t)&&Wc(t.arrayValue,this.value)}}class jF extends Fr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Wc(this.value.arrayValue,t)}}class TF extends Fr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Wc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Wc(this.value.arrayValue,t)}}class UF extends Fr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!f0(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Wc(this.value.arrayValue,s)))}}class QF{constructor(e,t=null,s=[],A=[],l=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=A,this.limit=l,this.startAt=u,this.endAt=d,this.Te=null}}function xB(r,e=null,t=[],s=[],A=null,l=null,u=null){return new QF(r,e,t,s,A,l,u)}function m0(r){const e=et(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>rx(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),Cf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>al(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>al(s))).join(",")),e.Te=t}return e.Te}function g0(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!BF(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!ME(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!pB(r.startAt,e.startAt)&&pB(r.endAt,e.endAt)}function sx(r){return Ve.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class Nf{constructor(e,t=null,s=[],A=[],l=null,u="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=A,this.limit=l,this.limitType=u,this.startAt=d,this.endAt=f,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function FF(r,e,t,s,A,l,u,d){return new Nf(r,e,t,s,A,l,u,d)}function p0(r){return new Nf(r)}function yB(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function IF(r){return Ve.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function DF(r){return r.collectionGroup!==null}function kc(r){const e=et(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Dr(Jr.comparator);return u.filters.forEach((f=>{f.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new $h(l,s))})),t.has(Jr.keyField().canonicalString())||e.Ie.push(new $h(Jr.keyField(),s))}return e.Ie}function Jn(r){const e=et(r);return e.Ee||(e.Ee=kF(e,kc(r))),e.Ee}function kF(r,e){if(r.limitType==="F")return xB(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((A=>{const l=A.dir==="desc"?"asc":"desc";return new $h(A.field,l)}));const t=r.endAt?new Yh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Yh(r.startAt.position,r.startAt.inclusive):null;return xB(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function nx(r,e,t){return new Nf(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Sf(r,e){return g0(Jn(r),Jn(e))&&r.limitType===e.limitType}function OE(r){return`${m0(Jn(r))}|lt:${r.limitType}`}function Ho(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((A=>LE(A))).join(", ")}]`),Cf(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((A=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(A))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((A=>al(A))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((A=>al(A))).join(",")),`Target(${s})`})(Jn(r))}; limitType=${r.limitType})`}function _f(r,e){return e.isFoundDocument()&&(function(s,A){const l=A.key.path;return s.collectionGroup!==null?A.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Ve.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(r,e)&&(function(s,A){for(const l of kc(s))if(!l.field.isKeyField()&&A.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(s,A){for(const l of s.filters)if(!l.matches(A))return!1;return!0})(r,e)&&(function(s,A){return!(s.startAt&&!(function(u,d,f){const g=gB(u,d,f);return u.inclusive?g<=0:g<0})(s.startAt,kc(s),A)||s.endAt&&!(function(u,d,f){const g=gB(u,d,f);return u.inclusive?g>=0:g>0})(s.endAt,kc(s),A))})(r,e)}function RF(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function PE(r){return(e,t)=>{let s=!1;for(const A of kc(r)){const l=MF(A,e,t);if(l!==0)return l;s=s||A.field.isKeyField()}return 0}}function MF(r,e,t){const s=r.field.isKeyField()?Ve.comparator(e.key,t.key):(function(l,u,d){const f=u.data.field(l),g=d.data.field(l);return f!==null&&g!==null?nl(f,g):Ge(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ge(19790,{direction:r.dir})}}class HA{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[A,l]of s)if(this.equalsFn(A,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),A=this.inner[s];if(A===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<A.length;l++)if(this.equalsFn(A[l][0],e))return void(A[l]=[e,t]);A.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let A=0;A<s.length;A++)if(this.equalsFn(s[A][0],e))return s.length===1?delete this.inner[t]:s.splice(A,1),this.innerSize--,!0;return!1}forEach(e){LA(this.inner,((t,s)=>{for(const[A,l]of s)e(A,l)}))}isEmpty(){return NE(this.inner)}size(){return this.innerSize}}const LF=new Ar(Ve.comparator);function Ra(){return LF}const VE=new Ar(Ve.comparator);function vc(...r){let e=VE;for(const t of r)e=e.insert(t.key,t);return e}function zE(r){let e=VE;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function EA(){return Rc()}function KE(){return Rc()}function Rc(){return new HA((r=>r.toString()),((r,e)=>r.isEqual(e)))}const HF=new Ar(Ve.comparator),OF=new Dr(Ve.comparator);function pt(...r){let e=OF;for(const t of r)e=e.add(t);return e}const PF=new Dr(gt);function VF(){return PF}function x0(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kh(e)?"-0":e}}function GE(r){return{integerValue:""+r}}function zF(r,e){return fF(e)?GE(e):x0(r,e)}class jf{constructor(){this._=void 0}}function KF(r,e,t){return r instanceof Xh?(function(A,l){const u={fields:{[jE]:{stringValue:_E},[UE]:{timestampValue:{seconds:A.seconds,nanos:A.nanoseconds}}}};return l&&h0(l)&&(l=Ef(l)),l&&(u.fields[TE]=l),{mapValue:u}})(t,e):r instanceof Zc?YE(r,e):r instanceof eu?$E(r,e):(function(A,l){const u=qE(A,l),d=bB(u)+bB(A.Ae);return tx(u)&&tx(A.Ae)?GE(d):x0(A.serializer,d)})(r,e)}function GF(r,e,t){return r instanceof Zc?YE(r,e):r instanceof eu?$E(r,e):t}function qE(r,e){return r instanceof Jh?(function(s){return tx(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class Xh extends jf{}class Zc extends jf{constructor(e){super(),this.elements=e}}function YE(r,e){const t=XE(e);for(const s of r.elements)t.some((A=>ra(A,s)))||t.push(s);return{arrayValue:{values:t}}}class eu extends jf{constructor(e){super(),this.elements=e}}function $E(r,e){let t=XE(e);for(const s of r.elements)t=t.filter((A=>!ra(A,s)));return{arrayValue:{values:t}}}class Jh extends jf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function bB(r){return yr(r.integerValue||r.doubleValue)}function XE(r){return f0(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function qF(r,e){return r.field.isEqual(e.field)&&(function(s,A){return s instanceof Zc&&A instanceof Zc||s instanceof eu&&A instanceof eu?rl(s.elements,A.elements,ra):s instanceof Jh&&A instanceof Jh?ra(s.Ae,A.Ae):s instanceof Xh&&A instanceof Xh})(r.transform,e.transform)}class YF{constructor(e,t){this.version=e,this.transformResults=t}}class Wn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Wn}static exists(e){return new Wn(void 0,e)}static updateTime(e){return new Wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Th(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Tf{}function JE(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new y0(r.key,Wn.none()):new hu(r.key,r.data,Wn.none());{const t=r.data,s=ln.empty();let A=new Dr(Jr.comparator);for(let l of e.fields)if(!A.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?s.delete(l):s.set(l,u),A=A.add(l)}return new OA(r.key,s,new Nn(A.toArray()),Wn.none())}}function $F(r,e,t){r instanceof hu?(function(A,l,u){const d=A.value.clone(),f=wB(A.fieldTransforms,l,u.transformResults);d.setAll(f),l.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(r,e,t):r instanceof OA?(function(A,l,u){if(!Th(A.precondition,l))return void l.convertToUnknownDocument(u.version);const d=wB(A.fieldTransforms,l,u.transformResults),f=l.data;f.setAll(WE(A)),f.setAll(d),l.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(r,e,t):(function(A,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Mc(r,e,t,s){return r instanceof hu?(function(l,u,d,f){if(!Th(l.precondition,u))return d;const g=l.value.clone(),x=BB(l.fieldTransforms,f,u);return g.setAll(x),u.convertToFoundDocument(u.version,g).setHasLocalMutations(),null})(r,e,t,s):r instanceof OA?(function(l,u,d,f){if(!Th(l.precondition,u))return d;const g=BB(l.fieldTransforms,f,u),x=u.data;return x.setAll(WE(l)),x.setAll(g),u.convertToFoundDocument(u.version,x).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((y=>y.field)))})(r,e,t,s):(function(l,u,d){return Th(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(r,e,t)}function XF(r,e){let t=null;for(const s of r.fieldTransforms){const A=e.data.field(s.field),l=qE(s.transform,A||null);l!=null&&(t===null&&(t=ln.empty()),t.set(s.field,l))}return t||null}function vB(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,A){return s===void 0&&A===void 0||!(!s||!A)&&rl(s,A,((l,u)=>qF(l,u)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class hu extends Tf{constructor(e,t,s,A=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=A,this.type=0}getFieldMask(){return null}}class OA extends Tf{constructor(e,t,s,A,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=A,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function WE(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function wB(r,e,t){const s=new Map;Tt(r.length===t.length,32656,{Ve:t.length,de:r.length});for(let A=0;A<t.length;A++){const l=r[A],u=l.transform,d=e.data.field(l.field);s.set(l.field,GF(u,d,t[A]))}return s}function BB(r,e,t){const s=new Map;for(const A of r){const l=A.transform,u=t.data.field(A.field);s.set(A.field,KF(l,u,e))}return s}class y0 extends Tf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class JF extends Tf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class WF{constructor(e,t,s,A){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=A}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let A=0;A<this.mutations.length;A++){const l=this.mutations[A];l.key.isEqual(e.key)&&$F(l,e,s[A])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Mc(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Mc(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=KE();return this.mutations.forEach((A=>{const l=e.get(A.key),u=l.overlayedDocument;let d=this.applyToLocalView(u,l.mutatedFields);d=t.has(A.key)?null:d;const f=JE(u,d);f!==null&&s.set(A.key,f),u.isValidDocument()||u.convertToNoDocument(We.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),pt())}isEqual(e){return this.batchId===e.batchId&&rl(this.mutations,e.mutations,((t,s)=>vB(t,s)))&&rl(this.baseMutations,e.baseMutations,((t,s)=>vB(t,s)))}}class b0{constructor(e,t,s,A){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=A}static from(e,t,s){Tt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let A=(function(){return HF})();const l=e.mutations;for(let u=0;u<l.length;u++)A=A.insert(l[u].key,s[u].version);return new b0(e,t,s,A)}}class ZF{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class eI{constructor(e,t){this.count=e,this.unchangedNames=t}}var Nr,bt;function tI(r){switch(r){case we.OK:return Ge(64938);case we.CANCELLED:case we.UNKNOWN:case we.DEADLINE_EXCEEDED:case we.RESOURCE_EXHAUSTED:case we.INTERNAL:case we.UNAVAILABLE:case we.UNAUTHENTICATED:return!1;case we.INVALID_ARGUMENT:case we.NOT_FOUND:case we.ALREADY_EXISTS:case we.PERMISSION_DENIED:case we.FAILED_PRECONDITION:case we.ABORTED:case we.OUT_OF_RANGE:case we.UNIMPLEMENTED:case we.DATA_LOSS:return!0;default:return Ge(15467,{code:r})}}function ZE(r){if(r===void 0)return ka("GRPC error has no .code"),we.UNKNOWN;switch(r){case Nr.OK:return we.OK;case Nr.CANCELLED:return we.CANCELLED;case Nr.UNKNOWN:return we.UNKNOWN;case Nr.DEADLINE_EXCEEDED:return we.DEADLINE_EXCEEDED;case Nr.RESOURCE_EXHAUSTED:return we.RESOURCE_EXHAUSTED;case Nr.INTERNAL:return we.INTERNAL;case Nr.UNAVAILABLE:return we.UNAVAILABLE;case Nr.UNAUTHENTICATED:return we.UNAUTHENTICATED;case Nr.INVALID_ARGUMENT:return we.INVALID_ARGUMENT;case Nr.NOT_FOUND:return we.NOT_FOUND;case Nr.ALREADY_EXISTS:return we.ALREADY_EXISTS;case Nr.PERMISSION_DENIED:return we.PERMISSION_DENIED;case Nr.FAILED_PRECONDITION:return we.FAILED_PRECONDITION;case Nr.ABORTED:return we.ABORTED;case Nr.OUT_OF_RANGE:return we.OUT_OF_RANGE;case Nr.UNIMPLEMENTED:return we.UNIMPLEMENTED;case Nr.DATA_LOSS:return we.DATA_LOSS;default:return Ge(39323,{code:r})}}(bt=Nr||(Nr={}))[bt.OK=0]="OK",bt[bt.CANCELLED=1]="CANCELLED",bt[bt.UNKNOWN=2]="UNKNOWN",bt[bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",bt[bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",bt[bt.NOT_FOUND=5]="NOT_FOUND",bt[bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",bt[bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",bt[bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",bt[bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",bt[bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",bt[bt.ABORTED=10]="ABORTED",bt[bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",bt[bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",bt[bt.INTERNAL=13]="INTERNAL",bt[bt.UNAVAILABLE=14]="UNAVAILABLE",bt[bt.DATA_LOSS=15]="DATA_LOSS";function rI(){return new TextEncoder}const sI=new Ii([4294967295,4294967295],0);function CB(r){const e=rI().encode(r),t=new gE;return t.update(e),new Uint8Array(t.digest())}function EB(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),A=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ii([t,s],0),new Ii([A,l],0)]}class v0{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new wc(`Invalid padding: ${t}`);if(s<0)throw new wc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new wc(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new wc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ii.fromNumber(this.ge)}ye(e,t,s){let A=e.add(t.multiply(Ii.fromNumber(s)));return A.compare(sI)===1&&(A=new Ii([A.getBits(0),A.getBits(1)],0)),A.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=CB(e),[s,A]=EB(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,A,l);if(!this.we(u))return!1}return!0}static create(e,t,s){const A=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new v0(l,A,t);return s.forEach((d=>u.insert(d))),u}insert(e){if(this.ge===0)return;const t=CB(e),[s,A]=EB(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,A,l);this.be(u)}}be(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class wc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Uf{constructor(e,t,s,A,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=A,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const A=new Map;return A.set(e,fu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Uf(We.min(),A,new Ar(gt),Ra(),pt())}}class fu{constructor(e,t,s,A,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=A,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new fu(s,t,pt(),pt(),pt())}}class Uh{constructor(e,t,s,A){this.Se=e,this.removedTargetIds=t,this.key=s,this.De=A}}class e2{constructor(e,t){this.targetId=e,this.Ce=t}}class t2{constructor(e,t,s=Zr.EMPTY_BYTE_STRING,A=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=A}}class NB{constructor(){this.ve=0,this.Fe=SB(),this.Me=Zr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=pt(),t=pt(),s=pt();return this.Fe.forEach(((A,l)=>{switch(l){case 0:e=e.add(A);break;case 2:t=t.add(A);break;case 1:s=s.add(A);break;default:Ge(38017,{changeType:l})}})),new fu(this.Me,this.xe,e,t,s)}Ke(){this.Oe=!1,this.Fe=SB()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Tt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class nI{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ra(),this.He=Gd(),this.Je=Gd(),this.Ze=new Ar(gt)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.We(),s.Ne||s.Ke(),s.Le(e.resumeToken);break;case 2:s.We(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.Qe(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Ge(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,A)=>{this.rt(A)&&t(A)}))}st(e){const t=e.targetId,s=e.Ce.count,A=this.ot(t);if(A){const l=A.target;if(sx(l))if(s===0){const u=new Ve(l.path);this.et(t,u,As.newNoDocument(u,We.min()))}else Tt(s===1,20013,{expectedCount:s});else{const u=this._t(t);if(u!==s){const d=this.ut(e),f=d?this.ct(d,e,u):1;if(f!==0){this.it(t);const g=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:A=0},hashCount:l=0}=t;let u,d;try{u=Oi(s).toUint8Array()}catch(f){if(f instanceof SE)return RA("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new v0(u,A,l)}catch(f){return RA(f instanceof wc?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.ge===0?null:d}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let A=0;return s.forEach((l=>{const u=this.Ge.ht(),d=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),A++)})),A}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const d=this.ot(u);if(d){if(l.current&&sx(d.target)){const f=new Ve(d.target.path);this.It(f).has(u)||this.Et(u,f)||this.et(u,f,As.newNoDocument(f,e))}l.Be&&(t.set(u,l.ke()),l.Ke())}}));let s=pt();this.Je.forEach(((l,u)=>{let d=!0;u.forEachWhile((f=>{const g=this.ot(f);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(s=s.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const A=new Uf(e,t,this.Ze,this.je,s);return this.je=Ra(),this.He=Gd(),this.Je=Gd(),this.Ze=new Ar(gt),A}Ye(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,s),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const A=this.nt(e);this.Et(e,t)?A.qe(t,1):A.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new NB,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Dr(gt),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Dr(gt),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Qe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new NB),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Gd(){return new Ar(Ve.comparator)}function SB(){return new Ar(Ve.comparator)}const aI={asc:"ASCENDING",desc:"DESCENDING"},iI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AI={and:"AND",or:"OR"};class oI{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ax(r,e){return r.useProto3Json||Cf(e)?e:{value:e}}function Wh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function r2(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function lI(r,e){return Wh(r,e.toTimestamp())}function Zn(r){return Tt(!!r,49232),We.fromTimestamp((function(t){const s=Hi(t);return new Jt(s.seconds,s.nanos)})(r))}function w0(r,e){return ix(r,e).canonicalString()}function ix(r,e){const t=(function(A){return new ar(["projects",A.projectId,"databases",A.database])})(r).child("documents");return e===void 0?t:t.child(e)}function s2(r){const e=ar.fromString(r);return Tt(o2(e),10190,{key:e.toString()}),e}function Ax(r,e){return w0(r.databaseId,e.path)}function tp(r,e){const t=s2(e);if(t.get(1)!==r.databaseId.projectId)throw new He(we.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new He(we.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Ve(a2(t))}function n2(r,e){return w0(r.databaseId,e)}function cI(r){const e=s2(r);return e.length===4?ar.emptyPath():a2(e)}function ox(r){return new ar(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function a2(r){return Tt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function _B(r,e,t){return{name:Ax(r,e),fields:t.value.mapValue.fields}}function uI(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ge(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),A=e.targetChange.targetIds||[],l=(function(g,x){return g.useProto3Json?(Tt(x===void 0||typeof x=="string",58123),Zr.fromBase64String(x||"")):(Tt(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),Zr.fromUint8Array(x||new Uint8Array))})(r,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(g){const x=g.code===void 0?we.UNKNOWN:ZE(g.code);return new He(x,g.message||"")})(u);t=new t2(s,A,l,d||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const A=tp(r,s.document.name),l=Zn(s.document.updateTime),u=s.document.createTime?Zn(s.document.createTime):We.min(),d=new ln({mapValue:{fields:s.document.fields}}),f=As.newFoundDocument(A,l,u,d),g=s.targetIds||[],x=s.removedTargetIds||[];t=new Uh(g,x,f.key,f)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const A=tp(r,s.document),l=s.readTime?Zn(s.readTime):We.min(),u=As.newNoDocument(A,l),d=s.removedTargetIds||[];t=new Uh([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const A=tp(r,s.document),l=s.removedTargetIds||[];t=new Uh([],l,A,null)}else{if(!("filter"in e))return Ge(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:A=0,unchangedNames:l}=s,u=new eI(A,l),d=s.targetId;t=new e2(d,u)}}return t}function dI(r,e){let t;if(e instanceof hu)t={update:_B(r,e.key,e.value)};else if(e instanceof y0)t={delete:Ax(r,e.key)};else if(e instanceof OA)t={update:_B(r,e.key,e.data),updateMask:vI(e.fieldMask)};else{if(!(e instanceof JF))return Ge(16599,{dt:e.type});t={verify:Ax(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,u){const d=u.transform;if(d instanceof Xh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Zc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof eu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Jh)return{fieldPath:u.field.canonicalString(),increment:d.Ae};throw Ge(20930,{transform:u.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(A,l){return l.updateTime!==void 0?{updateTime:lI(A,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ge(27497)})(r,e.precondition)),t}function hI(r,e){return r&&r.length>0?(Tt(e!==void 0,14353),r.map((t=>(function(A,l){let u=A.updateTime?Zn(A.updateTime):Zn(l);return u.isEqual(We.min())&&(u=Zn(l)),new YF(u,A.transformResults||[])})(t,e)))):[]}function fI(r,e){return{documents:[n2(r,e.path)]}}function mI(r,e){const t={structuredQuery:{}},s=e.path;let A;e.collectionGroup!==null?(A=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(A=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=n2(r,A);const l=(function(g){if(g.length!==0)return A2(sa.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(g){if(g.length!==0)return g.map((x=>(function(v){return{field:Oo(v.field),direction:xI(v.dir)}})(x)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=ax(r,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:A}}function gI(r){let e=cI(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let A=null;if(s>0){Tt(s===1,65062);const x=t.from[0];x.allDescendants?A=x.collectionId:e=e.child(x.collectionId)}let l=[];t.where&&(l=(function(y){const v=i2(y);return v instanceof sa&&RE(v)?v.getFilters():[v]})(t.where));let u=[];t.orderBy&&(u=(function(y){return y.map((v=>(function(M){return new $h(Po(M.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(M.direction))})(v)))})(t.orderBy));let d=null;t.limit&&(d=(function(y){let v;return v=typeof y=="object"?y.value:y,Cf(v)?null:v})(t.limit));let f=null;t.startAt&&(f=(function(y){const v=!!y.before,N=y.values||[];return new Yh(N,v)})(t.startAt));let g=null;return t.endAt&&(g=(function(y){const v=!y.before,N=y.values||[];return new Yh(N,v)})(t.endAt)),FF(e,A,u,l,d,"F",f,g)}function pI(r,e){const t=(function(A){switch(A){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ge(28987,{purpose:A})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function i2(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Po(t.unaryFilter.field);return Fr.create(s,"==",{doubleValue:NaN});case"IS_NULL":const A=Po(t.unaryFilter.field);return Fr.create(A,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Po(t.unaryFilter.field);return Fr.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Po(t.unaryFilter.field);return Fr.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ge(61313);default:return Ge(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Fr.create(Po(t.fieldFilter.field),(function(A){switch(A){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ge(58110);default:return Ge(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return sa.create(t.compositeFilter.filters.map((s=>i2(s))),(function(A){switch(A){case"AND":return"and";case"OR":return"or";default:return Ge(1026)}})(t.compositeFilter.op))})(r):Ge(30097,{filter:r})}function xI(r){return aI[r]}function yI(r){return iI[r]}function bI(r){return AI[r]}function Oo(r){return{fieldPath:r.canonicalString()}}function Po(r){return Jr.fromServerFormat(r.fieldPath)}function A2(r){return r instanceof Fr?(function(t){if(t.op==="=="){if(mB(t.value))return{unaryFilter:{field:Oo(t.field),op:"IS_NAN"}};if(fB(t.value))return{unaryFilter:{field:Oo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(mB(t.value))return{unaryFilter:{field:Oo(t.field),op:"IS_NOT_NAN"}};if(fB(t.value))return{unaryFilter:{field:Oo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oo(t.field),op:yI(t.op),value:t.value}}})(r):r instanceof sa?(function(t){const s=t.getFilters().map((A=>A2(A)));return s.length===1?s[0]:{compositeFilter:{op:bI(t.op),filters:s}}})(r):Ge(54877,{filter:r})}function vI(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function o2(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}function l2(r){return!!r&&typeof r._toProto=="function"&&r._protoValueType==="ProtoValue"}class Ni{constructor(e,t,s,A,l=We.min(),u=We.min(),d=Zr.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=A,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new Ni(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class wI{constructor(e){this.yt=e}}function BI(r){const e=gI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?nx(e,e.limit,"L"):e}class CI{constructor(){this.Sn=new EI}addToCollectionParentIndex(e,t){return this.Sn.add(t),be.resolve()}getCollectionParents(e,t){return be.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return be.resolve()}deleteFieldIndex(e,t){return be.resolve()}deleteAllFieldIndexes(e){return be.resolve()}createTargetIndexes(e,t){return be.resolve()}getDocumentsMatchingTarget(e,t){return be.resolve(null)}getIndexType(e,t){return be.resolve(0)}getFieldIndexes(e,t){return be.resolve([])}getNextCollectionGroupToUpdate(e){return be.resolve(null)}getMinOffset(e,t){return be.resolve(Li.min())}getMinOffsetFromCollectionGroup(e,t){return be.resolve(Li.min())}updateCollectionGroup(e,t,s){return be.resolve()}updateIndexEntries(e,t){return be.resolve()}}class EI{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),A=this.index[t]||new Dr(ar.comparator),l=!A.has(s);return this.index[t]=A.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),A=this.index[t];return A&&A.has(s)}getEntries(e){return(this.index[e]||new Dr(ar.comparator)).toArray()}}const jB={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},c2=41943040;class _s{static withCacheSize(e){return new _s(e,_s.DEFAULT_COLLECTION_PERCENTILE,_s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}_s.DEFAULT_COLLECTION_PERCENTILE=10,_s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_s.DEFAULT=new _s(c2,_s.DEFAULT_COLLECTION_PERCENTILE,_s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_s.DISABLED=new _s(-1,0,0);class il{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new il(0)}static ar(){return new il(-1)}}const TB="LruGarbageCollector",NI=1048576;function UB([r,e],[t,s]){const A=gt(r,t);return A===0?gt(e,s):A}class SI{constructor(e){this.Pr=e,this.buffer=new Dr(UB),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();UB(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class _I{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Qe(TB,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ml(t)?Qe(TB,"Ignoring IndexedDB error during garbage collection: ",t):await fl(t)}await this.Ar(3e5)}))}}class jI{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return be.resolve(Bf.ce);const s=new SI(t);return this.Vr.forEachTarget(e,(A=>s.Er(A.sequenceNumber))).next((()=>this.Vr.mr(e,(A=>s.Er(A))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Qe("LruGarbageCollector","Garbage collection skipped; disabled"),be.resolve(jB)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Qe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jB):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let s,A,l,u,d,f,g;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(Qe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),A=this.params.maximumSequenceNumbersToCollect):A=y,u=Date.now(),this.nthSequenceNumber(e,A)))).next((y=>(s=y,d=Date.now(),this.removeTargets(e,s,t)))).next((y=>(l=y,f=Date.now(),this.removeOrphanedDocuments(e,s)))).next((y=>(g=Date.now(),Lo()<=mt.DEBUG&&Qe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-x}ms
	Determined least recently used ${A} in `+(d-u)+`ms
	Removed ${l} targets in `+(f-d)+`ms
	Removed ${y} documents in `+(g-f)+`ms
Total Duration: ${g-x}ms`),be.resolve({didRun:!0,sequenceNumbersCollected:A,targetsRemoved:l,documentsRemoved:y}))))}}function TI(r,e){return new jI(r,e)}class UI{constructor(){this.changes=new HA((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,As.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?be.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class QI{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class FI{constructor(e,t,s,A){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=A}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((A=>(s=A,this.remoteDocumentCache.getEntry(e,t)))).next((A=>(s!==null&&Mc(s.mutation,A,Nn.empty(),Jt.now()),A)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,pt()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=pt()){const A=EA();return this.populateOverlays(e,A,t).next((()=>this.computeViews(e,t,A,s).next((l=>{let u=vc();return l.forEach(((d,f)=>{u=u.insert(d,f.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const s=EA();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,pt())))}populateOverlays(e,t,s){const A=[];return s.forEach((l=>{t.has(l)||A.push(l)})),this.documentOverlayCache.getOverlays(e,A).next((l=>{l.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,s,A){let l=Ra();const u=Rc(),d=(function(){return Rc()})();return t.forEach(((f,g)=>{const x=s.get(g.key);A.has(g.key)&&(x===void 0||x.mutation instanceof OA)?l=l.insert(g.key,g):x!==void 0?(u.set(g.key,x.mutation.getFieldMask()),Mc(x.mutation,g,x.mutation.getFieldMask(),Jt.now())):u.set(g.key,Nn.empty())})),this.recalculateAndSaveOverlays(e,l).next((f=>(f.forEach(((g,x)=>u.set(g,x))),t.forEach(((g,x)=>d.set(g,new QI(x,u.get(g)??null)))),d)))}recalculateAndSaveOverlays(e,t){const s=Rc();let A=new Ar(((u,d)=>u-d)),l=pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((f=>{const g=t.get(f);if(g===null)return;let x=s.get(f)||Nn.empty();x=d.applyToLocalView(g,x),s.set(f,x);const y=(A.get(d.batchId)||pt()).add(f);A=A.insert(d.batchId,y)}))})).next((()=>{const u=[],d=A.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),g=f.key,x=f.value,y=KE();x.forEach((v=>{if(!l.has(v)){const N=JE(t.get(v),s.get(v));N!==null&&y.set(v,N),l=l.add(v)}})),u.push(this.documentOverlayCache.saveOverlays(e,g,y))}return be.waitFor(u)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,A){return IF(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):DF(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,A):this.getDocumentsMatchingCollectionQuery(e,t,s,A)}getNextDocuments(e,t,s,A){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,A).next((l=>{const u=A-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,A-l.size):be.resolve(EA());let d=$c,f=l;return u.next((g=>be.forEach(g,((x,y)=>(d<y.largestBatchId&&(d=y.largestBatchId),l.get(x)?be.resolve():this.remoteDocumentCache.getEntry(e,x).next((v=>{f=f.insert(x,v)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,f,g,pt()))).next((x=>({batchId:d,changes:zE(x)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ve(t)).next((s=>{let A=vc();return s.isFoundDocument()&&(A=A.insert(s.key,s)),A}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,A){const l=t.collectionGroup;let u=vc();return this.indexManager.getCollectionParents(e,l).next((d=>be.forEach(d,(f=>{const g=(function(y,v){return new Nf(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,f.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,s,A).next((x=>{x.forEach(((y,v)=>{u=u.insert(y,v)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,s,A){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,A)))).next((u=>{l.forEach(((f,g)=>{const x=g.getKey();u.get(x)===null&&(u=u.insert(x,As.newInvalidDocument(x)))}));let d=vc();return u.forEach(((f,g)=>{const x=l.get(f);x!==void 0&&Mc(x.mutation,g,Nn.empty(),Jt.now()),_f(t,g)&&(d=d.insert(f,g))})),d}))}}class II{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return be.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(A){return{id:A.id,version:A.version,createTime:Zn(A.createTime)}})(t)),be.resolve()}getNamedQuery(e,t){return be.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(A){return{name:A.name,query:BI(A.bundledQuery),readTime:Zn(A.readTime)}})(t)),be.resolve()}}class DI{constructor(){this.overlays=new Ar(Ve.comparator),this.Lr=new Map}getOverlay(e,t){return be.resolve(this.overlays.get(t))}getOverlays(e,t){const s=EA();return be.forEach(t,(A=>this.getOverlay(e,A).next((l=>{l!==null&&s.set(A,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((A,l)=>{this.bt(e,t,l)})),be.resolve()}removeOverlaysForBatchId(e,t,s){const A=this.Lr.get(s);return A!==void 0&&(A.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(s)),be.resolve()}getOverlaysForCollection(e,t,s){const A=EA(),l=t.length+1,u=new Ve(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const f=d.getNext().value,g=f.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&f.largestBatchId>s&&A.set(f.getKey(),f)}return be.resolve(A)}getOverlaysForCollectionGroup(e,t,s,A){let l=new Ar(((g,x)=>g-x));const u=this.overlays.getIterator();for(;u.hasNext();){const g=u.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>s){let x=l.get(g.largestBatchId);x===null&&(x=EA(),l=l.insert(g.largestBatchId,x)),x.set(g.getKey(),g)}}const d=EA(),f=l.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((g,x)=>d.set(g,x))),!(d.size()>=A)););return be.resolve(d)}bt(e,t,s){const A=this.overlays.get(s.key);if(A!==null){const u=this.Lr.get(A.largestBatchId).delete(s.key);this.Lr.set(A.largestBatchId,u)}this.overlays=this.overlays.insert(s.key,new ZF(t,s));let l=this.Lr.get(t);l===void 0&&(l=pt(),this.Lr.set(t,l)),this.Lr.set(t,l.add(s.key))}}class kI{constructor(){this.sessionToken=Zr.EMPTY_BYTE_STRING}getSessionToken(e){return be.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,be.resolve()}}class B0{constructor(){this.kr=new Dr(Or.Kr),this.qr=new Dr(Or.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const s=new Or(e,t);this.kr=this.kr.add(s),this.qr=this.qr.add(s)}$r(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Wr(new Or(e,t))}Qr(e,t){e.forEach((s=>this.removeReference(s,t)))}Gr(e){const t=new Ve(new ar([])),s=new Or(t,e),A=new Or(t,e+1),l=[];return this.qr.forEachInRange([s,A],(u=>{this.Wr(u),l.push(u.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Ve(new ar([])),s=new Or(t,e),A=new Or(t,e+1);let l=pt();return this.qr.forEachInRange([s,A],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new Or(e,0),s=this.kr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Or{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Ve.comparator(e.key,t.key)||gt(e.Hr,t.Hr)}static Ur(e,t){return gt(e.Hr,t.Hr)||Ve.comparator(e.key,t.key)}}class RI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Dr(Or.Kr)}checkEmpty(e){return be.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,A){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new WF(l,t,s,A);this.mutationQueue.push(u);for(const d of A)this.Jr=this.Jr.add(new Or(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return be.resolve(u)}lookupMutationBatch(e,t){return be.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,A=this.Xr(s),l=A<0?0:A;return be.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return be.resolve(this.mutationQueue.length===0?d0:this.Yn-1)}getAllMutationBatches(e){return be.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Or(t,0),A=new Or(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([s,A],(u=>{const d=this.Zr(u.Hr);l.push(d)})),be.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Dr(gt);return t.forEach((A=>{const l=new Or(A,0),u=new Or(A,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,u],(d=>{s=s.add(d.Hr)}))})),be.resolve(this.Yr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,A=s.length+1;let l=s;Ve.isDocumentKey(l)||(l=l.child(""));const u=new Or(new Ve(l),0);let d=new Dr(gt);return this.Jr.forEachWhile((f=>{const g=f.key.path;return!!s.isPrefixOf(g)&&(g.length===A&&(d=d.add(f.Hr)),!0)}),u),be.resolve(this.Yr(d))}Yr(e){const t=[];return e.forEach((s=>{const A=this.Zr(s);A!==null&&t.push(A)})),t}removeMutationBatch(e,t){Tt(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Jr;return be.forEach(t.mutations,(A=>{const l=new Or(A.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,A.key)})).next((()=>{this.Jr=s}))}nr(e){}containsKey(e,t){const s=new Or(t,0),A=this.Jr.firstAfterOrEqual(s);return be.resolve(t.isEqual(A&&A.key))}performConsistencyCheck(e){return this.mutationQueue.length,be.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class MI{constructor(e){this.ti=e,this.docs=(function(){return new Ar(Ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,A=this.docs.get(s),l=A?A.size:0,u=this.ti(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return be.resolve(s?s.document.mutableCopy():As.newInvalidDocument(t))}getEntries(e,t){let s=Ra();return t.forEach((A=>{const l=this.docs.get(A);s=s.insert(A,l?l.document.mutableCopy():As.newInvalidDocument(A))})),be.resolve(s)}getDocumentsMatchingQuery(e,t,s,A){let l=Ra();const u=t.path,d=new Ve(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:g,value:{document:x}}=f.getNext();if(!u.isPrefixOf(g.path))break;g.path.length>u.length+1||cF(lF(x),s)<=0||(A.has(x.key)||_f(t,x))&&(l=l.insert(x.key,x.mutableCopy()))}return be.resolve(l)}getAllFromCollectionGroup(e,t,s,A){Ge(9500)}ni(e,t){return be.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new LI(this)}getSize(e){return be.resolve(this.size)}}class LI extends UI{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,A)=>{A.isValidDocument()?t.push(this.Mr.addEntry(e,A)):this.Mr.removeEntry(s)})),be.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class HI{constructor(e){this.persistence=e,this.ri=new HA((t=>m0(t)),g0),this.lastRemoteSnapshotVersion=We.min(),this.highestTargetId=0,this.ii=0,this.si=new B0,this.targetCount=0,this.oi=il._r()}forEachTarget(e,t){return this.ri.forEach(((s,A)=>t(A))),be.resolve()}getLastRemoteSnapshotVersion(e){return be.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return be.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),be.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.ii&&(this.ii=t),be.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new il(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,be.resolve()}updateTargetData(e,t){return this.lr(t),be.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,be.resolve()}removeTargets(e,t,s){let A=0;const l=[];return this.ri.forEach(((u,d)=>{d.sequenceNumber<=t&&s.get(d.targetId)===null&&(this.ri.delete(u),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),A++)})),be.waitFor(l).next((()=>A))}getTargetCount(e){return be.resolve(this.targetCount)}getTargetData(e,t){const s=this.ri.get(t)||null;return be.resolve(s)}addMatchingKeys(e,t,s){return this.si.$r(t,s),be.resolve()}removeMatchingKeys(e,t,s){this.si.Qr(t,s);const A=this.persistence.referenceDelegate,l=[];return A&&t.forEach((u=>{l.push(A.markPotentiallyOrphaned(e,u))})),be.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),be.resolve()}getMatchingKeysForTargetId(e,t){const s=this.si.jr(t);return be.resolve(s)}containsKey(e,t){return be.resolve(this.si.containsKey(t))}}class u2{constructor(e,t){this._i={},this.overlays={},this.ai=new Bf(0),this.ui=!1,this.ui=!0,this.ci=new kI,this.referenceDelegate=e(this),this.li=new HI(this),this.indexManager=new CI,this.remoteDocumentCache=(function(A){return new MI(A)})((s=>this.referenceDelegate.hi(s))),this.serializer=new wI(t),this.Pi=new II(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new DI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this._i[e.toKey()];return s||(s=new RI(t,this.referenceDelegate),this._i[e.toKey()]=s),s}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,s){Qe("MemoryPersistence","Starting transaction:",e);const A=new OI(this.ai.next());return this.referenceDelegate.Ti(),s(A).next((l=>this.referenceDelegate.Ii(A).next((()=>l)))).toPromise().then((l=>(A.raiseOnCommittedEvent(),l)))}Ei(e,t){return be.or(Object.values(this._i).map((s=>()=>s.containsKey(e,t))))}}class OI extends dF{constructor(e){super(),this.currentSequenceNumber=e}}class C0{constructor(e){this.persistence=e,this.Ri=new B0,this.Ai=null}static Vi(e){return new C0(e)}get di(){if(this.Ai)return this.Ai;throw Ge(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.di.delete(s.toString()),be.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.di.add(s.toString()),be.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),be.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((A=>this.di.add(A.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((A=>{A.forEach((l=>this.di.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return be.forEach(this.di,(s=>{const A=Ve.fromPath(s);return this.mi(e,A).next((l=>{l||t.removeEntry(A,We.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((s=>{s?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return be.or([()=>be.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Zh{constructor(e,t){this.persistence=e,this.fi=new HA((s=>mF(s.path)),((s,A)=>s.isEqual(A))),this.garbageCollector=TI(this,t)}static Vi(e,t){return new Zh(e,t)}Ti(){}Ii(e){return be.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((A=>s+A))))}pr(e){let t=0;return this.mr(e,(s=>{t++})).next((()=>t))}mr(e,t){return be.forEach(this.fi,((s,A)=>this.wr(e,s,A).next((l=>l?be.resolve():t(A)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const A=this.persistence.getRemoteDocumentCache(),l=A.newChangeBuffer();return A.ni(e,(u=>this.wr(e,u,t).next((d=>{d||(s++,l.removeEntry(u,We.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),be.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),be.resolve()}removeReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),be.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),be.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=_h(e.data.value)),t}wr(e,t,s){return be.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const A=this.fi.get(t);return be.resolve(A!==void 0&&A>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class E0{constructor(e,t,s,A){this.targetId=e,this.fromCache=t,this.Ts=s,this.Is=A}static Es(e,t){let s=pt(),A=pt();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:A=A.add(l.doc.key)}return new E0(e,t.fromCache,s,A)}}class PI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class VI{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return jj()?8:hF(ls())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,A){const l={result:null};return this.gs(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ps(e,t,A,s).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new PI;return this.ys(e,t,u).next((d=>{if(l.result=d,this.As)return this.ws(e,t,u,d.size)}))})).next((()=>l.result))}ws(e,t,s,A){return s.documentReadCount<this.Vs?(Lo()<=mt.DEBUG&&Qe("QueryEngine","SDK will not create cache indexes for query:",Ho(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),be.resolve()):(Lo()<=mt.DEBUG&&Qe("QueryEngine","Query:",Ho(t),"scans",s.documentReadCount,"local documents and returns",A,"documents as results."),s.documentReadCount>this.ds*A?(Lo()<=mt.DEBUG&&Qe("QueryEngine","The SDK decides to create cache indexes for query:",Ho(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jn(t))):be.resolve())}gs(e,t){if(yB(t))return be.resolve(null);let s=Jn(t);return this.indexManager.getIndexType(e,s).next((A=>A===0?null:(t.limit!==null&&A===1&&(t=nx(t,null,"F"),s=Jn(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const u=pt(...l);return this.fs.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,s).next((f=>{const g=this.bs(t,d);return this.Ss(t,g,u,f.readTime)?this.gs(e,nx(t,null,"F")):this.Ds(e,g,t,f)}))))})))))}ps(e,t,s,A){return yB(t)||A.isEqual(We.min())?be.resolve(null):this.fs.getDocuments(e,s).next((l=>{const u=this.bs(t,l);return this.Ss(t,u,s,A)?be.resolve(null):(Lo()<=mt.DEBUG&&Qe("QueryEngine","Re-using previous result from %s to execute query: %s",A.toString(),Ho(t)),this.Ds(e,u,t,oF(A,$c)).next((d=>d)))}))}bs(e,t){let s=new Dr(PE(e));return t.forEach(((A,l)=>{_f(e,l)&&(s=s.add(l))})),s}Ss(e,t,s,A){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(A)>0)}ys(e,t,s){return Lo()<=mt.DEBUG&&Qe("QueryEngine","Using full collection scan to execute query:",Ho(t)),this.fs.getDocumentsMatchingQuery(e,t,Li.min(),s)}Ds(e,t,s,A){return this.fs.getDocumentsMatchingQuery(e,s,A).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}const N0="LocalStore",zI=3e8;class KI{constructor(e,t,s,A){this.persistence=e,this.Cs=t,this.serializer=A,this.vs=new Ar(gt),this.Fs=new HA((l=>m0(l)),g0),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(s)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new FI(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function GI(r,e,t,s){return new KI(r,e,t,s)}async function d2(r,e){const t=et(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let A;return t.mutationQueue.getAllMutationBatches(s).next((l=>(A=l,t.Os(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const u=[],d=[];let f=pt();for(const g of A){u.push(g.batchId);for(const x of g.mutations)f=f.add(x.key)}for(const g of l){d.push(g.batchId);for(const x of g.mutations)f=f.add(x.key)}return t.localDocuments.getDocuments(s,f).next((g=>({Ns:g,removedBatchIds:u,addedBatchIds:d})))}))}))}function qI(r,e){const t=et(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const A=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(d,f,g,x){const y=g.batch,v=y.keys();let N=be.resolve();return v.forEach((M=>{N=N.next((()=>x.getEntry(f,M))).next((S=>{const V=g.docVersions.get(M);Tt(V!==null,48541),S.version.compareTo(V)<0&&(y.applyToRemoteDocument(S,g),S.isValidDocument()&&(S.setReadTime(g.commitVersion),x.addEntry(S)))}))})),N.next((()=>d.mutationQueue.removeMutationBatch(f,y)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,A,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(d){let f=pt();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(f=f.add(d.batch.mutations[g].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(s,A)))}))}function h2(r){const e=et(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function YI(r,e){const t=et(r),s=e.snapshotVersion;let A=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.xs.newChangeBuffer({trackRemovals:!0});A=t.vs;const d=[];e.targetChanges.forEach(((x,y)=>{const v=A.get(y);if(!v)return;d.push(t.li.removeMatchingKeys(l,x.removedDocuments,y).next((()=>t.li.addMatchingKeys(l,x.addedDocuments,y))));let N=v.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(y)!==null?N=N.withResumeToken(Zr.EMPTY_BYTE_STRING,We.min()).withLastLimboFreeSnapshotVersion(We.min()):x.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(x.resumeToken,s)),A=A.insert(y,N),(function(S,V,K){return S.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=zI?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0})(v,N,x)&&d.push(t.li.updateTargetData(l,N))}));let f=Ra(),g=pt();if(e.documentUpdates.forEach((x=>{e.resolvedLimboDocuments.has(x)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,x))})),d.push($I(l,u,e.documentUpdates).next((x=>{f=x.Bs,g=x.Ls}))),!s.isEqual(We.min())){const x=t.li.getLastRemoteSnapshotVersion(l).next((y=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,s)));d.push(x)}return be.waitFor(d).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,f,g))).next((()=>f))})).then((l=>(t.vs=A,l)))}function $I(r,e,t){let s=pt(),A=pt();return t.forEach((l=>s=s.add(l))),e.getEntries(r,s).next((l=>{let u=Ra();return t.forEach(((d,f)=>{const g=l.get(d);f.isFoundDocument()!==g.isFoundDocument()&&(A=A.add(d)),f.isNoDocument()&&f.version.isEqual(We.min())?(e.removeEntry(d,f.readTime),u=u.insert(d,f)):!g.isValidDocument()||f.version.compareTo(g.version)>0||f.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(f),u=u.insert(d,f)):Qe(N0,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",f.version)})),{Bs:u,Ls:A}}))}function XI(r,e){const t=et(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=d0),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function JI(r,e){const t=et(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let A;return t.li.getTargetData(s,e).next((l=>l?(A=l,be.resolve(A)):t.li.allocateTargetId(s).next((u=>(A=new Ni(e,u,"TargetPurposeListen",s.currentSequenceNumber),t.li.addTargetData(s,A).next((()=>A)))))))})).then((s=>{const A=t.vs.get(s.targetId);return(A===null||s.snapshotVersion.compareTo(A.snapshotVersion)>0)&&(t.vs=t.vs.insert(s.targetId,s),t.Fs.set(e,s.targetId)),s}))}async function lx(r,e,t){const s=et(r),A=s.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(u=>s.persistence.referenceDelegate.removeTarget(u,A)))}catch(u){if(!ml(u))throw u;Qe(N0,`Failed to update sequence numbers for target ${e}: ${u}`)}s.vs=s.vs.remove(e),s.Fs.delete(A.target)}function QB(r,e,t){const s=et(r);let A=We.min(),l=pt();return s.persistence.runTransaction("Execute query","readwrite",(u=>(function(f,g,x){const y=et(f),v=y.Fs.get(x);return v!==void 0?be.resolve(y.vs.get(v)):y.li.getTargetData(g,x)})(s,u,Jn(e)).next((d=>{if(d)return A=d.lastLimboFreeSnapshotVersion,s.li.getMatchingKeysForTargetId(u,d.targetId).next((f=>{l=f}))})).next((()=>s.Cs.getDocumentsMatchingQuery(u,e,t?A:We.min(),t?l:pt()))).next((d=>(WI(s,RF(e),d),{documents:d,ks:l})))))}function WI(r,e,t){let s=r.Ms.get(e)||We.min();t.forEach(((A,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),r.Ms.set(e,s)}class FB{constructor(){this.activeTargetIds=VF()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ZI{constructor(){this.vo=new FB,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,s){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new FB,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class e4{Mo(e){}shutdown(){}}const IB="ConnectivityMonitor";class DB{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Qe(IB,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Qe(IB,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let qd=null;function cx(){return qd===null?qd=(function(){return 268435456+Math.round(2147483648*Math.random())})():qd++,"0x"+qd.toString(16)}const rp="RestConnection",t4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class r4{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),A=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${s}/databases/${A}`,this.$o=this.databaseId.database===Gh?`project_id=${s}`:`project_id=${s}&database_id=${A}`}Wo(e,t,s,A,l){const u=cx(),d=this.Qo(e,t.toUriEncodedString());Qe(rp,`Sending RPC '${e}' ${u}:`,d,s);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(f,A,l);const{host:g}=new URL(d),x=cl(g);return this.zo(e,d,f,s,x).then((y=>(Qe(rp,`Received RPC '${e}' ${u}: `,y),y)),(y=>{throw RA(rp,`RPC '${e}' ${u} failed with error: `,y,"url: ",d,"request:",s),y}))}jo(e,t,s,A,l,u){return this.Wo(e,t,s,A,l)}Go(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+hl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((A,l)=>e[l]=A)),s&&s.headers.forEach(((A,l)=>e[l]=A))}Qo(e,t){const s=t4[e];let A=`${this.qo}/v1/${t}:${s}`;return this.databaseInfo.apiKey&&(A=`${A}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),A}terminate(){}}class s4{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const ss="WebChannelConnection",mc=(r,e,t)=>{r.listen(e,(s=>{try{t(s)}catch(A){setTimeout((()=>{throw A}),0)}}))};class Xo extends r4{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Xo.c_){const e=bE();mc(e,yE.STAT_EVENT,(t=>{t.stat===Wp.PROXY?Qe(ss,"STAT_EVENT: detected buffering proxy"):t.stat===Wp.NOPROXY&&Qe(ss,"STAT_EVENT: detected no buffering proxy")})),Xo.c_=!0}}zo(e,t,s,A,l){const u=cx();return new Promise(((d,f)=>{const g=new pE;g.setWithCredentials(!0),g.listenOnce(xE.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Sh.NO_ERROR:const y=g.getResponseJson();Qe(ss,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(y)),d(y);break;case Sh.TIMEOUT:Qe(ss,`RPC '${e}' ${u} timed out`),f(new He(we.DEADLINE_EXCEEDED,"Request time out"));break;case Sh.HTTP_ERROR:const v=g.getStatus();if(Qe(ss,`RPC '${e}' ${u} failed with status:`,v,"response text:",g.getResponseText()),v>0){let N=g.getResponseJson();Array.isArray(N)&&(N=N[0]);const M=N?.error;if(M&&M.status&&M.message){const S=(function(K){const G=K.toLowerCase().replace(/_/g,"-");return Object.values(we).indexOf(G)>=0?G:we.UNKNOWN})(M.status);f(new He(S,M.message))}else f(new He(we.UNKNOWN,"Server responded with status "+g.getStatus()))}else f(new He(we.UNAVAILABLE,"Connection failed."));break;default:Ge(9055,{l_:e,streamId:u,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{Qe(ss,`RPC '${e}' ${u} completed.`)}}));const x=JSON.stringify(A);Qe(ss,`RPC '${e}' ${u} sending request:`,A),g.send(t,"POST",x,s,15)}))}T_(e,t,s){const A=cx(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=this.createWebChannelTransport(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Go(d.initMessageHeaders,t,s),d.encodeInitMessageHeaders=!0;const g=l.join("");Qe(ss,`Creating RPC '${e}' stream ${A}: ${g}`,d);const x=u.createWebChannel(g,d);this.I_(x);let y=!1,v=!1;const N=new s4({Ho:M=>{v?Qe(ss,`Not sending because RPC '${e}' stream ${A} is closed:`,M):(y||(Qe(ss,`Opening RPC '${e}' stream ${A} transport.`),x.open(),y=!0),Qe(ss,`RPC '${e}' stream ${A} sending:`,M),x.send(M))},Jo:()=>x.close()});return mc(x,bc.EventType.OPEN,(()=>{v||(Qe(ss,`RPC '${e}' stream ${A} transport opened.`),N.i_())})),mc(x,bc.EventType.CLOSE,(()=>{v||(v=!0,Qe(ss,`RPC '${e}' stream ${A} transport closed`),N.o_(),this.E_(x))})),mc(x,bc.EventType.ERROR,(M=>{v||(v=!0,RA(ss,`RPC '${e}' stream ${A} transport errored. Name:`,M.name,"Message:",M.message),N.o_(new He(we.UNAVAILABLE,"The operation could not be completed")))})),mc(x,bc.EventType.MESSAGE,(M=>{if(!v){const S=M.data[0];Tt(!!S,16349);const V=S,K=V?.error||V[0]?.error;if(K){Qe(ss,`RPC '${e}' stream ${A} received error:`,K);const G=K.status;let z=(function(Y){const E=Nr[Y];if(E!==void 0)return ZE(E)})(G),q=K.message;G==="NOT_FOUND"&&q.includes("database")&&q.includes("does not exist")&&q.includes(this.databaseId.database)&&RA(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),z===void 0&&(z=we.INTERNAL,q="Unknown error status: "+G+" with message "+K.message),v=!0,N.o_(new He(z,q)),x.close()}else Qe(ss,`RPC '${e}' stream ${A} received:`,S),N.__(S)}})),Xo.u_(),setTimeout((()=>{N.s_()}),0),N}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,s){super.Go(e,t,s),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return vE()}}function n4(r){return new Xo(r)}function sp(){return typeof document<"u"?document:null}function Qf(r){return new oI(r,!0)}Xo.c_=!1;class f2{constructor(e,t,s=1e3,A=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=s,this.A_=A,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),s=Math.max(0,Date.now()-this.f_),A=Math.max(0,t-s);A>0&&Qe("ExponentialBackoff",`Backing off for ${A} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,A,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const kB="PersistentStream";class m2{constructor(e,t,s,A,l,u,d,f){this.Ci=e,this.b_=s,this.S_=A,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new f2(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===we.RESOURCE_EXHAUSTED?(ka(t.toString()),ka("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===we.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,A])=>{this.D_===t&&this.G_(s,A)}),(s=>{e((()=>{const A=new He(we.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(A)}))}))}G_(e,t){const s=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.Yo((()=>{s((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((A=>{s((()=>this.z_(A)))})),this.stream.onMessage((A=>{s((()=>++this.F_==1?this.H_(A):this.onNext(A)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Qe(kB,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(Qe(kB,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class a4 extends m2{constructor(e,t,s,A,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,A,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=uI(this.serializer,e),s=(function(l){if(!("targetChange"in l))return We.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?We.min():u.readTime?Zn(u.readTime):We.min()})(e);return this.listener.J_(t,s)}Z_(e){const t={};t.database=ox(this.serializer),t.addTarget=(function(l,u){let d;const f=u.target;if(d=sx(f)?{documents:fI(l,f)}:{query:mI(l,f).ft},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=r2(l,u.resumeToken);const g=ax(l,u.expectedCount);g!==null&&(d.expectedCount=g)}else if(u.snapshotVersion.compareTo(We.min())>0){d.readTime=Wh(l,u.snapshotVersion.toTimestamp());const g=ax(l,u.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const s=pI(this.serializer,e);s&&(t.labels=s),this.K_(t)}X_(e){const t={};t.database=ox(this.serializer),t.removeTarget=e,this.K_(t)}}class i4 extends m2{constructor(e,t,s,A,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,A,u),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Tt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Tt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Tt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=hI(e.writeResults,e.commitTime),s=Zn(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=ox(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>dI(this.serializer,s)))};this.K_(t)}}class A4{}class o4 extends A4{constructor(e,t,s,A){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=A,this.ia=!1}sa(){if(this.ia)throw new He(we.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,A){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Wo(e,ix(t,s),A,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new He(we.UNKNOWN,l.toString())}))}jo(e,t,s,A,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.jo(e,ix(t,s),A,u,d,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new He(we.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function l4(r,e,t,s){return new o4(r,e,t,s)}class c4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ka(t),this.aa=!1):Qe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const MA="RemoteStore";class u4{constructor(e,t,s,A,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((u=>{s.enqueueAndForget((async()=>{PA(this)&&(Qe(MA,"Restarting streams for network reachability change."),await(async function(f){const g=et(f);g.Ea.add(4),await mu(g),g.Va.set("Unknown"),g.Ea.delete(4),await Ff(g)})(this))}))})),this.Va=new c4(s,A)}}async function Ff(r){if(PA(r))for(const e of r.Ra)await e(!0)}async function mu(r){for(const e of r.Ra)await e(!1)}function g2(r,e){const t=et(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),T0(t)?j0(t):gl(t).O_()&&_0(t,e))}function S0(r,e){const t=et(r),s=gl(t);t.Ia.delete(e),s.O_()&&p2(t,e),t.Ia.size===0&&(s.O_()?s.L_():PA(t)&&t.Va.set("Unknown"))}function _0(r,e){if(r.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(We.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}gl(r).Z_(e)}function p2(r,e){r.da.$e(e),gl(r).X_(e)}function j0(r){r.da=new nI({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),gl(r).start(),r.Va.ua()}function T0(r){return PA(r)&&!gl(r).x_()&&r.Ia.size>0}function PA(r){return et(r).Ea.size===0}function x2(r){r.da=void 0}async function d4(r){r.Va.set("Online")}async function h4(r){r.Ia.forEach(((e,t)=>{_0(r,e)}))}async function f4(r,e){x2(r),T0(r)?(r.Va.ha(e),j0(r)):r.Va.set("Unknown")}async function m4(r,e,t){if(r.Va.set("Online"),e instanceof t2&&e.state===2&&e.cause)try{await(async function(A,l){const u=l.cause;for(const d of l.targetIds)A.Ia.has(d)&&(await A.remoteSyncer.rejectListen(d,u),A.Ia.delete(d),A.da.removeTarget(d))})(r,e)}catch(s){Qe(MA,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await ef(r,s)}else if(e instanceof Uh?r.da.Xe(e):e instanceof e2?r.da.st(e):r.da.tt(e),!t.isEqual(We.min()))try{const s=await h2(r.localStore);t.compareTo(s)>=0&&await(function(l,u){const d=l.da.Tt(u);return d.targetChanges.forEach(((f,g)=>{if(f.resumeToken.approximateByteSize()>0){const x=l.Ia.get(g);x&&l.Ia.set(g,x.withResumeToken(f.resumeToken,u))}})),d.targetMismatches.forEach(((f,g)=>{const x=l.Ia.get(f);if(!x)return;l.Ia.set(f,x.withResumeToken(Zr.EMPTY_BYTE_STRING,x.snapshotVersion)),p2(l,f);const y=new Ni(x.target,f,g,x.sequenceNumber);_0(l,y)})),l.remoteSyncer.applyRemoteEvent(d)})(r,t)}catch(s){Qe(MA,"Failed to raise snapshot:",s),await ef(r,s)}}async function ef(r,e,t){if(!ml(e))throw e;r.Ea.add(1),await mu(r),r.Va.set("Offline"),t||(t=()=>h2(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{Qe(MA,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Ff(r)}))}function y2(r,e){return e().catch((t=>ef(r,t,e)))}async function If(r){const e=et(r),t=Vi(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:d0;for(;g4(e);)try{const A=await XI(e.localStore,s);if(A===null){e.Ta.length===0&&t.L_();break}s=A.batchId,p4(e,A)}catch(A){await ef(e,A)}b2(e)&&v2(e)}function g4(r){return PA(r)&&r.Ta.length<10}function p4(r,e){r.Ta.push(e);const t=Vi(r);t.O_()&&t.Y_&&t.ea(e.mutations)}function b2(r){return PA(r)&&!Vi(r).x_()&&r.Ta.length>0}function v2(r){Vi(r).start()}async function x4(r){Vi(r).ra()}async function y4(r){const e=Vi(r);for(const t of r.Ta)e.ea(t.mutations)}async function b4(r,e,t){const s=r.Ta.shift(),A=b0.from(s,e,t);await y2(r,(()=>r.remoteSyncer.applySuccessfulWrite(A))),await If(r)}async function v4(r,e){e&&Vi(r).Y_&&await(async function(s,A){if((function(u){return tI(u)&&u!==we.ABORTED})(A.code)){const l=s.Ta.shift();Vi(s).B_(),await y2(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,A))),await If(s)}})(r,e),b2(r)&&v2(r)}async function RB(r,e){const t=et(r);t.asyncQueue.verifyOperationInProgress(),Qe(MA,"RemoteStore received new credentials");const s=PA(t);t.Ea.add(3),await mu(t),s&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Ff(t)}async function w4(r,e){const t=et(r);e?(t.Ea.delete(2),await Ff(t)):e||(t.Ea.add(2),await mu(t),t.Va.set("Unknown"))}function gl(r){return r.ma||(r.ma=(function(t,s,A){const l=et(t);return l.sa(),new a4(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,A)})(r.datastore,r.asyncQueue,{Zo:d4.bind(null,r),Yo:h4.bind(null,r),t_:f4.bind(null,r),J_:m4.bind(null,r)}),r.Ra.push((async e=>{e?(r.ma.B_(),T0(r)?j0(r):r.Va.set("Unknown")):(await r.ma.stop(),x2(r))}))),r.ma}function Vi(r){return r.fa||(r.fa=(function(t,s,A){const l=et(t);return l.sa(),new i4(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,A)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),Yo:x4.bind(null,r),t_:v4.bind(null,r),ta:y4.bind(null,r),na:b4.bind(null,r)}),r.Ra.push((async e=>{e?(r.fa.B_(),await If(r)):(await r.fa.stop(),r.Ta.length>0&&(Qe(MA,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class U0{constructor(e,t,s,A,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=A,this.removalCallback=l,this.deferred=new Di,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,A,l){const u=Date.now()+s,d=new U0(e,t,u,A,l);return d.start(s),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new He(we.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Q0(r,e){if(ka("AsyncQueue",`${e}: ${r}`),ml(r))return new He(we.UNAVAILABLE,`${e}: ${r}`);throw r}class Jo{static emptySet(e){return new Jo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ve.comparator(t.key,s.key):(t,s)=>Ve.comparator(t.key,s.key),this.keyedMap=vc(),this.sortedSet=new Ar(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Jo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const A=t.getNext().key,l=s.getNext().key;if(!A.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Jo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class MB{constructor(){this.ga=new Ar(Ve.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ge(63341,{Vt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Al{constructor(e,t,s,A,l,u,d,f,g){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=A,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=g}static fromInitialDocuments(e,t,s,A,l){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new Al(e,t,Jo.emptySet(t),u,s,A,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let A=0;A<t.length;A++)if(t[A].type!==s[A].type||!t[A].doc.isEqual(s[A].doc))return!1;return!0}}class B4{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class C4{constructor(){this.queries=LB(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const A=et(t),l=A.queries;A.queries=LB(),l.forEach(((u,d)=>{for(const f of d.ba)f.onError(s)}))})(this,new He(we.ABORTED,"Firestore shutting down"))}}function LB(){return new HA((r=>OE(r)),Sf)}async function E4(r,e){const t=et(r);let s=3;const A=e.query;let l=t.queries.get(A);l?!l.Sa()&&e.Da()&&(s=2):(l=new B4,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(A,!0);break;case 1:l.wa=await t.onListen(A,!1);break;case 2:await t.onFirstRemoteStoreListen(A)}}catch(u){const d=Q0(u,`Initialization of query '${Ho(e.query)}' failed`);return void e.onError(d)}t.queries.set(A,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&F0(t)}async function N4(r,e){const t=et(r),s=e.query;let A=3;const l=t.queries.get(s);if(l){const u=l.ba.indexOf(e);u>=0&&(l.ba.splice(u,1),l.ba.length===0?A=e.Da()?0:1:!l.Sa()&&e.Da()&&(A=2))}switch(A){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function S4(r,e){const t=et(r);let s=!1;for(const A of e){const l=A.query,u=t.queries.get(l);if(u){for(const d of u.ba)d.Fa(A)&&(s=!0);u.wa=A}}s&&F0(t)}function _4(r,e,t){const s=et(r),A=s.queries.get(e);if(A)for(const l of A.ba)l.onError(t);s.queries.delete(e)}function F0(r){r.Ca.forEach((e=>{e.next()}))}var ux,HB;(HB=ux||(ux={})).Ma="default",HB.Cache="cache";class j4{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const A of e.docChanges)A.type!==3&&s.push(A);e=new Al(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.Ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Al.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ux.Cache}}class w2{constructor(e){this.key=e}}class B2{constructor(e){this.key=e}}class T4{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=pt(),this.mutatedKeys=pt(),this.eu=PE(e),this.tu=new Jo(this.eu)}get nu(){return this.Za}ru(e,t){const s=t?t.iu:new MB,A=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=A,d=!1;const f=this.query.limitType==="F"&&A.size===this.query.limit?A.last():null,g=this.query.limitType==="L"&&A.size===this.query.limit?A.first():null;if(e.inorderTraversal(((x,y)=>{const v=A.get(x),N=_f(this.query,y)?y:null,M=!!v&&this.mutatedKeys.has(v.key),S=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let V=!1;v&&N?v.data.isEqual(N.data)?M!==S&&(s.track({type:3,doc:N}),V=!0):this.su(v,N)||(s.track({type:2,doc:N}),V=!0,(f&&this.eu(N,f)>0||g&&this.eu(N,g)<0)&&(d=!0)):!v&&N?(s.track({type:0,doc:N}),V=!0):v&&!N&&(s.track({type:1,doc:v}),V=!0,(f||g)&&(d=!0)),V&&(N?(u=u.add(N),l=S?l.add(x):l.delete(x)):(u=u.delete(x),l=l.delete(x)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const x=this.query.limitType==="F"?u.last():u.first();u=u.delete(x.key),l=l.delete(x.key),s.track({type:1,doc:x})}return{tu:u,iu:s,Ss:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,A){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((x,y)=>(function(N,M){const S=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ge(20277,{Vt:V})}};return S(N)-S(M)})(x.type,y.type)||this.eu(x.doc,y.doc))),this.ou(s),A=A??!1;const d=t&&!A?this._u():[],f=this.Ya.size===0&&this.current&&!A?1:0,g=f!==this.Xa;return this.Xa=f,u.length!==0||g?{snapshot:new Al(this.query,e.tu,l,u,e.mutatedKeys,f===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new MB,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=pt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Ya=this.Ya.add(s.key))}));const t=[];return e.forEach((s=>{this.Ya.has(s)||t.push(new B2(s))})),this.Ya.forEach((s=>{e.has(s)||t.push(new w2(s))})),t}cu(e){this.Za=e.ks,this.Ya=pt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Al.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const I0="SyncEngine";class U4{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class Q4{constructor(e){this.key=e,this.hu=!1}}class F4{constructor(e,t,s,A,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=A,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new HA((d=>OE(d)),Sf),this.Iu=new Map,this.Eu=new Set,this.Ru=new Ar(Ve.comparator),this.Au=new Map,this.Vu=new B0,this.du={},this.mu=new Map,this.fu=il.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function I4(r,e,t=!0){const s=j2(r);let A;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),A=l.view.lu()):A=await C2(s,e,t,!0),A}async function D4(r,e){const t=j2(r);await C2(t,e,!0,!1)}async function C2(r,e,t,s){const A=await JI(r.localStore,Jn(e)),l=A.targetId,u=r.sharedClientState.addLocalQueryTarget(l,t);let d;return s&&(d=await k4(r,e,l,u==="current",A.resumeToken)),r.isPrimaryClient&&t&&g2(r.remoteStore,A),d}async function k4(r,e,t,s,A){r.pu=(y,v,N)=>(async function(S,V,K,G){let z=V.view.ru(K);z.Ss&&(z=await QB(S.localStore,V.query,!1).then((({documents:E})=>V.view.ru(E,z))));const q=G&&G.targetChanges.get(V.targetId),$=G&&G.targetMismatches.get(V.targetId)!=null,Y=V.view.applyChanges(z,S.isPrimaryClient,q,$);return PB(S,V.targetId,Y.au),Y.snapshot})(r,y,v,N);const l=await QB(r.localStore,e,!0),u=new T4(e,l.ks),d=u.ru(l.documents),f=fu.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",A),g=u.applyChanges(d,r.isPrimaryClient,f);PB(r,t,g.au);const x=new U4(e,t,u);return r.Tu.set(e,x),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),g.snapshot}async function R4(r,e,t){const s=et(r),A=s.Tu.get(e),l=s.Iu.get(A.targetId);if(l.length>1)return s.Iu.set(A.targetId,l.filter((u=>!Sf(u,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(A.targetId),s.sharedClientState.isActiveQueryTarget(A.targetId)||await lx(s.localStore,A.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(A.targetId),t&&S0(s.remoteStore,A.targetId),dx(s,A.targetId)})).catch(fl)):(dx(s,A.targetId),await lx(s.localStore,A.targetId,!0))}async function M4(r,e){const t=et(r),s=t.Tu.get(e),A=t.Iu.get(s.targetId);t.isPrimaryClient&&A.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),S0(t.remoteStore,s.targetId))}async function L4(r,e,t){const s=G4(r);try{const A=await(function(u,d){const f=et(u),g=Jt.now(),x=d.reduce(((N,M)=>N.add(M.key)),pt());let y,v;return f.persistence.runTransaction("Locally write mutations","readwrite",(N=>{let M=Ra(),S=pt();return f.xs.getEntries(N,x).next((V=>{M=V,M.forEach(((K,G)=>{G.isValidDocument()||(S=S.add(K))}))})).next((()=>f.localDocuments.getOverlayedDocuments(N,M))).next((V=>{y=V;const K=[];for(const G of d){const z=XF(G,y.get(G.key).overlayedDocument);z!=null&&K.push(new OA(G.key,z,IE(z.value.mapValue),Wn.exists(!0)))}return f.mutationQueue.addMutationBatch(N,g,K,d)})).next((V=>{v=V;const K=V.applyToLocalDocumentSet(y,S);return f.documentOverlayCache.saveOverlays(N,V.batchId,K)}))})).then((()=>({batchId:v.batchId,changes:zE(y)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(A.batchId),(function(u,d,f){let g=u.du[u.currentUser.toKey()];g||(g=new Ar(gt)),g=g.insert(d,f),u.du[u.currentUser.toKey()]=g})(s,A.batchId,t),await gu(s,A.changes),await If(s.remoteStore)}catch(A){const l=Q0(A,"Failed to persist write");t.reject(l)}}async function E2(r,e){const t=et(r);try{const s=await YI(t.localStore,e);e.targetChanges.forEach(((A,l)=>{const u=t.Au.get(l);u&&(Tt(A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size<=1,22616),A.addedDocuments.size>0?u.hu=!0:A.modifiedDocuments.size>0?Tt(u.hu,14607):A.removedDocuments.size>0&&(Tt(u.hu,42227),u.hu=!1))})),await gu(t,s,e)}catch(s){await fl(s)}}function OB(r,e,t){const s=et(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const A=[];s.Tu.forEach(((l,u)=>{const d=u.view.va(e);d.snapshot&&A.push(d.snapshot)})),(function(u,d){const f=et(u);f.onlineState=d;let g=!1;f.queries.forEach(((x,y)=>{for(const v of y.ba)v.va(d)&&(g=!0)})),g&&F0(f)})(s.eventManager,e),A.length&&s.Pu.J_(A),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function H4(r,e,t){const s=et(r);s.sharedClientState.updateQueryState(e,"rejected",t);const A=s.Au.get(e),l=A&&A.key;if(l){let u=new Ar(Ve.comparator);u=u.insert(l,As.newNoDocument(l,We.min()));const d=pt().add(l),f=new Uf(We.min(),new Map,new Ar(gt),u,d);await E2(s,f),s.Ru=s.Ru.remove(l),s.Au.delete(e),D0(s)}else await lx(s.localStore,e,!1).then((()=>dx(s,e,t))).catch(fl)}async function O4(r,e){const t=et(r),s=e.batch.batchId;try{const A=await qI(t.localStore,e);S2(t,s,null),N2(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await gu(t,A)}catch(A){await fl(A)}}async function P4(r,e,t){const s=et(r);try{const A=await(function(u,d){const f=et(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let x;return f.mutationQueue.lookupMutationBatch(g,d).next((y=>(Tt(y!==null,37113),x=y.keys(),f.mutationQueue.removeMutationBatch(g,y)))).next((()=>f.mutationQueue.performConsistencyCheck(g))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(g,x,d))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,x))).next((()=>f.localDocuments.getDocuments(g,x)))}))})(s.localStore,e);S2(s,e,t),N2(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await gu(s,A)}catch(A){await fl(A)}}function N2(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function S2(r,e,t){const s=et(r);let A=s.du[s.currentUser.toKey()];if(A){const l=A.get(e);l&&(t?l.reject(t):l.resolve(),A=A.remove(e)),s.du[s.currentUser.toKey()]=A}}function dx(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Vu.Gr(e).forEach((s=>{r.Vu.containsKey(s)||_2(r,s)}))}function _2(r,e){r.Eu.delete(e.path.canonicalString());const t=r.Ru.get(e);t!==null&&(S0(r.remoteStore,t),r.Ru=r.Ru.remove(e),r.Au.delete(t),D0(r))}function PB(r,e,t){for(const s of t)s instanceof w2?(r.Vu.addReference(s.key,e),V4(r,s)):s instanceof B2?(Qe(I0,"Document no longer in limbo: "+s.key),r.Vu.removeReference(s.key,e),r.Vu.containsKey(s.key)||_2(r,s.key)):Ge(19791,{wu:s})}function V4(r,e){const t=e.key,s=t.path.canonicalString();r.Ru.get(t)||r.Eu.has(s)||(Qe(I0,"New document in limbo: "+t),r.Eu.add(s),D0(r))}function D0(r){for(;r.Eu.size>0&&r.Ru.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new Ve(ar.fromString(e)),s=r.fu.next();r.Au.set(s,new Q4(t)),r.Ru=r.Ru.insert(t,s),g2(r.remoteStore,new Ni(Jn(p0(t.path)),s,"TargetPurposeLimboResolution",Bf.ce))}}async function gu(r,e,t){const s=et(r),A=[],l=[],u=[];s.Tu.isEmpty()||(s.Tu.forEach(((d,f)=>{u.push(s.pu(f,e,t).then((g=>{if((g||t)&&s.isPrimaryClient){const x=g?!g.fromCache:t?.targetChanges.get(f.targetId)?.current;s.sharedClientState.updateQueryState(f.targetId,x?"current":"not-current")}if(g){A.push(g);const x=E0.Es(f.targetId,g);l.push(x)}})))})),await Promise.all(u),s.Pu.J_(A),await(async function(f,g){const x=et(f);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>be.forEach(g,(v=>be.forEach(v.Ts,(N=>x.persistence.referenceDelegate.addReference(y,v.targetId,N))).next((()=>be.forEach(v.Is,(N=>x.persistence.referenceDelegate.removeReference(y,v.targetId,N)))))))))}catch(y){if(!ml(y))throw y;Qe(N0,"Failed to update sequence numbers: "+y)}for(const y of g){const v=y.targetId;if(!y.fromCache){const N=x.vs.get(v),M=N.snapshotVersion,S=N.withLastLimboFreeSnapshotVersion(M);x.vs=x.vs.insert(v,S)}}})(s.localStore,l))}async function z4(r,e){const t=et(r);if(!t.currentUser.isEqual(e)){Qe(I0,"User change. New user:",e.toKey());const s=await d2(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((d=>{d.forEach((f=>{f.reject(new He(we.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await gu(t,s.Ns)}}function K4(r,e){const t=et(r),s=t.Au.get(e);if(s&&s.hu)return pt().add(s.key);{let A=pt();const l=t.Iu.get(e);if(!l)return A;for(const u of l){const d=t.Tu.get(u);A=A.unionWith(d.view.nu)}return A}}function j2(r){const e=et(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=E2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=K4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=H4.bind(null,e),e.Pu.J_=S4.bind(null,e.eventManager),e.Pu.yu=_4.bind(null,e.eventManager),e}function G4(r){const e=et(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=O4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=P4.bind(null,e),e}class tf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return GI(this.persistence,new VI,e.initialUser,this.serializer)}Cu(e){return new u2(C0.Vi,this.serializer)}Du(e){return new ZI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}tf.provider={build:()=>new tf};class q4 extends tf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Tt(this.persistence.referenceDelegate instanceof Zh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new _I(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?_s.withCacheSize(this.cacheSizeBytes):_s.DEFAULT;return new u2((s=>Zh.Vi(s,t)),this.serializer)}}class hx{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>OB(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=z4.bind(null,this.syncEngine),await w4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new C4})()}createDatastore(e){const t=Qf(e.databaseInfo.databaseId),s=n4(e.databaseInfo);return l4(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,A,l,u,d){return new u4(s,A,l,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>OB(this.syncEngine,t,0)),(function(){return DB.v()?new DB:new e4})())}createSyncEngine(e,t){return(function(A,l,u,d,f,g,x){const y=new F4(A,l,u,d,f,g);return x&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=et(t);Qe(MA,"RemoteStore shutting down."),s.Ea.add(5),await mu(s),s.Aa.shutdown(),s.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}hx.provider={build:()=>new hx};class Y4{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ka("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const zi="FirestoreClient";class $4{constructor(e,t,s,A,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this._databaseInfo=A,this.user=as.UNAUTHENTICATED,this.clientId=c0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async u=>{Qe(zi,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(s,(u=>(Qe(zi,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Di;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Q0(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function np(r,e){r.asyncQueue.verifyOperationInProgress(),Qe(zi,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async A=>{s.isEqual(A)||(await d2(e.localStore,A),s=A)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function VB(r,e){r.asyncQueue.verifyOperationInProgress();const t=await X4(r);Qe(zi,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>RB(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,A)=>RB(e.remoteStore,A))),r._onlineComponents=e}async function X4(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Qe(zi,"Using user provided OfflineComponentProvider");try{await np(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(A){return A.name==="FirebaseError"?A.code===we.FAILED_PRECONDITION||A.code===we.UNIMPLEMENTED:!(typeof DOMException<"u"&&A instanceof DOMException)||A.code===22||A.code===20||A.code===11})(t))throw t;RA("Error using user provided cache. Falling back to memory cache: "+t),await np(r,new tf)}}else Qe(zi,"Using default OfflineComponentProvider"),await np(r,new q4(void 0));return r._offlineComponents}async function T2(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Qe(zi,"Using user provided OnlineComponentProvider"),await VB(r,r._uninitializedComponentsProvider._online)):(Qe(zi,"Using default OnlineComponentProvider"),await VB(r,new hx))),r._onlineComponents}function J4(r){return T2(r).then((e=>e.syncEngine))}async function W4(r){const e=await T2(r),t=e.eventManager;return t.onListen=I4.bind(null,e.syncEngine),t.onUnlisten=R4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=D4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=M4.bind(null,e.syncEngine),t}function Z4(r,e,t={}){const s=new Di;return r.asyncQueue.enqueueAndForget((async()=>(function(l,u,d,f,g){const x=new Y4({next:v=>{x.Nu(),u.enqueueAndForget((()=>N4(l,y)));const N=v.docs.has(d);!N&&v.fromCache?g.reject(new He(we.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&v.fromCache&&f&&f.source==="server"?g.reject(new He(we.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(v)},error:v=>g.reject(v)}),y=new j4(p0(d.path),x,{includeMetadataChanges:!0,Ka:!0});return E4(l,y)})(await W4(r),r.asyncQueue,e,t,s))),s.promise}function eD(r,e){const t=new Di;return r.asyncQueue.enqueueAndForget((async()=>L4(await J4(r),e,t))),t.promise}function U2(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const tD="ComponentProvider",zB=new Map;function rD(r,e,t,s,A){return new xF(r,e,t,A.host,A.ssl,A.experimentalForceLongPolling,A.experimentalAutoDetectLongPolling,U2(A.experimentalLongPollingOptions),A.useFetchStreams,A.isUsingEmulator,s)}const Q2="firestore.googleapis.com",KB=!0;class GB{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new He(we.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Q2,this.ssl=KB}else this.host=e.host,this.ssl=e.ssl??KB;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=c2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<NI)throw new He(we.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=U2(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new He(we.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new He(we.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new He(we.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,A){return s.timeoutSeconds===A.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class k0{constructor(e,t,s,A){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=A,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new GB({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new He(we.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new He(we.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new GB(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new XQ;switch(s.type){case"firstParty":return new eF(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new He(we.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=zB.get(t);s&&(Qe(tD,"Removing Datastore"),zB.delete(t),s.terminate())})(this),Promise.resolve()}}function sD(r,e,t,s={}){r=sl(r,k0);const A=cl(e),l=r._getSettings(),u={...l,emulatorOptions:r._getEmulatorOptions()},d=`${e}:${t}`;A&&(Q1(`https://${d}`),F1("Firestore",!0)),l.host!==Q2&&l.host!==d&&RA("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...l,host:d,ssl:A,emulatorOptions:s};if(!FA(f,u)&&(r._setSettings(f),s.mockUserToken)){let g,x;if(typeof s.mockUserToken=="string")g=s.mockUserToken,x=as.MOCK_USER;else{g=bj(s.mockUserToken,r._app?.options.projectId);const y=s.mockUserToken.sub||s.mockUserToken.user_id;if(!y)throw new He(we.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new as(y)}r._authCredentials=new JQ(new BE(g,x))}}class R0{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new R0(this.firestore,e,this._query)}}class Pr{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pr(this.firestore,e,this._key)}toJSON(){return{type:Pr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(du(t,Pr._jsonSchema))return new Pr(e,s||null,new Ve(ar.fromString(t.referencePath)))}}Pr._jsonSchemaVersion="firestore/documentReference/1.0",Pr._jsonSchema={type:_r("string",Pr._jsonSchemaVersion),referencePath:_r("string")};class tu extends R0{constructor(e,t,s){super(e,t,p0(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pr(this.firestore,null,new Ve(e))}withConverter(e){return new tu(this.firestore,e,this._path)}}function To(r,e,...t){if(r=hn(r),arguments.length===1&&(e=c0.newId()),iF("doc","path",e),r instanceof k0){const s=ar.fromString(e,...t);return iB(s),new Pr(r,null,new Ve(s))}{if(!(r instanceof Pr||r instanceof tu))throw new He(we.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ar.fromString(e,...t));return iB(s),new Pr(r.firestore,r instanceof tu?r.converter:null,new Ve(s))}}const qB="AsyncQueue";class YB{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new f2(this,"async_queue_retry"),this._c=()=>{const s=sp();s&&Qe(qB,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=sp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=sp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Di;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!ml(e))throw e;Qe(qB,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,ka("INTERNAL UNHANDLED ERROR: ",$B(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const A=U0.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(A),A}uc(){this.nc&&Ge(47125,{Pc:$B(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function $B(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Df extends k0{constructor(e,t,s,A){super(e,t,s,A),this.type="firestore",this._queue=new YB,this._persistenceKey=A?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new YB(e),this._firestoreClient=void 0,await e}}}function F2(r,e){const t=typeof r=="object"?r:k1(),s=typeof r=="string"?r:Gh,A=Jx(t,"firestore").getImmediate({identifier:s});if(!A._initialized){const l=xj("firestore");l&&sD(A,...l)}return A}function I2(r){if(r._terminated)throw new He(we.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||nD(r),r._firestoreClient}function nD(r){const e=r._freezeSettings(),t=rD(r._databaseId,r._app?.options.appId||"",r._persistenceKey,r._app?.options.apiKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new $4(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(A){const l=A?._online.build();return{_offline:A?._offline.build(l),_online:l}})(r._componentsProvider))}class cn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new cn(Zr.fromBase64String(e))}catch(t){throw new He(we.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new cn(Zr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:cn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(du(e,cn._jsonSchema))return cn.fromBase64String(e.bytes)}}cn._jsonSchemaVersion="firestore/bytes/1.0",cn._jsonSchema={type:_r("string",cn._jsonSchemaVersion),bytes:_r("string")};class D2{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new He(we.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class k2{constructor(e){this._methodName=e}}class ea{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new He(we.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new He(we.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return gt(this._lat,e._lat)||gt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ea._jsonSchemaVersion}}static fromJSON(e){if(du(e,ea._jsonSchema))return new ea(e.latitude,e.longitude)}}ea._jsonSchemaVersion="firestore/geoPoint/1.0",ea._jsonSchema={type:_r("string",ea._jsonSchemaVersion),latitude:_r("number"),longitude:_r("number")};class _n{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,A){if(s.length!==A.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==A[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:_n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(du(e,_n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new _n(e.vectorValues);throw new He(we.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_n._jsonSchemaVersion="firestore/vectorValue/1.0",_n._jsonSchema={type:_r("string",_n._jsonSchemaVersion),vectorValues:_r("object")};const aD=/^__.*__$/;class iD{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new OA(e,this.data,this.fieldMask,t,this.fieldTransforms):new hu(e,this.data,t,this.fieldTransforms)}}function R2(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ge(40011,{dataSource:r})}}class M0{constructor(e,t,s,A,l,u){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=A,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new M0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePathSegment(e),s}childContextForFieldPath(e){const t=this.path?.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePath(),s}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return rf(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(R2(this.dataSource)&&aD.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class AD{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Qf(e)}createContext(e,t,s,A=!1){return new M0({dataSource:e,methodName:t,targetDoc:s,path:Jr.emptyPath(),arrayElement:!1,hasConverter:A},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function oD(r){const e=r._freezeSettings(),t=Qf(r._databaseId);return new AD(r._databaseId,!!e.ignoreUndefinedProperties,t)}function lD(r,e,t,s,A,l={}){const u=r.createContext(l.merge||l.mergeFields?2:0,e,t,A);O2("Data must be an object, but it was:",u,s);const d=L2(s,u);let f,g;if(l.merge)f=new Nn(u.fieldMask),g=u.fieldTransforms;else if(l.mergeFields){const x=[];for(const y of l.mergeFields){const v=L0(e,y,t);if(!u.contains(v))throw new He(we.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);dD(x,v)||x.push(v)}f=new Nn(x),g=u.fieldTransforms.filter((y=>f.covers(y.field)))}else f=null,g=u.fieldTransforms;return new iD(new ln(d),f,g)}function M2(r,e){if(H2(r=hn(r)))return O2("Unsupported field value:",e,r),L2(r,e);if(r instanceof k2)return(function(s,A){if(!R2(A.dataSource))throw A.createError(`${s._methodName}() can only be used with update() and set()`);if(!A.path)throw A.createError(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(A);l&&A.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(s,A){const l=[];let u=0;for(const d of s){let f=M2(d,A.childContextForArray(u));f==null&&(f={nullValue:"NULL_VALUE"}),l.push(f),u++}return{arrayValue:{values:l}}})(r,e)}return(function(s,A){if((s=hn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return zF(A.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=Jt.fromDate(s);return{timestampValue:Wh(A.serializer,l)}}if(s instanceof Jt){const l=new Jt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Wh(A.serializer,l)}}if(s instanceof ea)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof cn)return{bytesValue:r2(A.serializer,s._byteString)};if(s instanceof Pr){const l=A.databaseId,u=s.firestore._databaseId;if(!u.isEqual(l))throw A.createError(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:w0(s.firestore._databaseId||A.databaseId,s._key.path)}}if(s instanceof _n)return(function(u,d){const f=u instanceof _n?u.toArray():u;return{mapValue:{fields:{[QE]:{stringValue:FE},[qh]:{arrayValue:{values:f.map((x=>{if(typeof x!="number")throw d.createError("VectorValues must only contain numeric values.");return x0(d.serializer,x)}))}}}}}})(s,A);if(l2(s))return s._toProto(A.serializer);throw A.createError(`Unsupported field value: ${u0(s)}`)})(r,e)}function L2(r,e){const t={};return NE(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):LA(r,((s,A)=>{const l=M2(A,e.childContextForField(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function H2(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Jt||r instanceof ea||r instanceof cn||r instanceof Pr||r instanceof k2||r instanceof _n||l2(r))}function O2(r,e,t){if(!H2(t)||!CE(t)){const s=u0(t);throw s==="an object"?e.createError(r+" a custom object"):e.createError(r+" "+s)}}function L0(r,e,t){if((e=hn(e))instanceof D2)return e._internalPath;if(typeof e=="string")return uD(r,e);throw rf("Field path arguments must be of type string or ",r,!1,void 0,t)}const cD=new RegExp("[~\\*/\\[\\]]");function uD(r,e,t){if(e.search(cD)>=0)throw rf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new D2(...e.split("."))._internalPath}catch{throw rf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function rf(r,e,t,s,A){const l=s&&!s.isEmpty(),u=A!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(l||u)&&(f+=" (found",l&&(f+=` in field ${s}`),u&&(f+=` in document ${A}`),f+=")"),new He(we.INVALID_ARGUMENT,d+r+f)}function dD(r,e){return r.some((t=>t.isEqual(e)))}class hD{convertValue(e,t="none"){switch(Pi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Oi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ge(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return LA(e,((A,l)=>{s[A]=this.convertValue(l,t)})),s}convertVectorValue(e){const t=e.fields?.[qh].arrayValue?.values?.map((s=>yr(s.doubleValue)));return new _n(t)}convertGeoPoint(e){return new ea(yr(e.latitude),yr(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Ef(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Xc(e));default:return null}}convertTimestamp(e){const t=Hi(e);return new Jt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=ar.fromString(e);Tt(o2(s),9688,{name:e});const A=new Jc(s.get(1),s.get(3)),l=new Ve(s.popFirst(5));return A.isEqual(t)||ka(`Document ${l} contains a document reference within a different database (${A.projectId}/${A.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}class fD extends hD{constructor(e){super(),this.firestore=e}convertBytes(e){return new cn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pr(this.firestore,null,t)}}const XB="@firebase/firestore",JB="4.11.0";class P2{constructor(e,t,s,A,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=A,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Pr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new mD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(L0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class mD extends P2{data(){return super.data()}}function gD(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class Bc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _A extends P2{constructor(e,t,s,A,l,u){super(e,t,s,A,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Qh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(L0("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new He(we.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=_A._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}_A._jsonSchemaVersion="firestore/documentSnapshot/1.0",_A._jsonSchema={type:_r("string",_A._jsonSchemaVersion),bundleSource:_r("string","DocumentSnapshot"),bundleName:_r("string"),bundle:_r("string")};class Qh extends _A{data(e={}){return super.data(e)}}class Lc{constructor(e,t,s,A){this._firestore=e,this._userDataWriter=t,this._snapshot=A,this.metadata=new Bc(A.hasPendingWrites,A.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Qh(this._firestore,this._userDataWriter,s.key,s,new Bc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new He(we.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(A,l){if(A._snapshot.oldDocs.isEmpty()){let u=0;return A._snapshot.docChanges.map((d=>{const f=new Qh(A._firestore,A._userDataWriter,d.doc.key,d.doc,new Bc(A._snapshot.mutatedKeys.has(d.doc.key),A._snapshot.fromCache),A.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}}))}{let u=A._snapshot.oldDocs;return A._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const f=new Qh(A._firestore,A._userDataWriter,d.doc.key,d.doc,new Bc(A._snapshot.mutatedKeys.has(d.doc.key),A._snapshot.fromCache),A.query.converter);let g=-1,x=-1;return d.type!==0&&(g=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),x=u.indexOf(d.doc.key)),{type:pD(d.type),doc:f,oldIndex:g,newIndex:x}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new He(we.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Lc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=c0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],A=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),A.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function pD(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ge(61501,{type:r})}}Lc._jsonSchemaVersion="firestore/querySnapshot/1.0",Lc._jsonSchema={type:_r("string",Lc._jsonSchemaVersion),bundleSource:_r("string","QuerySnapshot"),bundleName:_r("string"),bundle:_r("string")};function WB(r){r=sl(r,Pr);const e=sl(r.firestore,Df),t=I2(e);return Z4(t,r._key).then((s=>yD(e,r,s)))}function xA(r,e,t){r=sl(r,Pr);const s=sl(r.firestore,Df),A=gD(r.converter,e,t),l=oD(s);return V2(s,[lD(l,"setDoc",r._key,A,r.converter!==null,t).toMutation(r._key,Wn.none())])}function xD(r){return V2(sl(r.firestore,Df),[new y0(r._key,Wn.none())])}function V2(r,e){const t=I2(r);return eD(t,e)}function yD(r,e,t){const s=t.docs.get(e._key),A=new fD(r);return new _A(r,A,e._key,s,new Bc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){$Q(ul),el(new IA("firestore",((s,{instanceIdentifier:A,options:l})=>{const u=s.getProvider("app").getImmediate(),d=new Df(new WQ(s.getProvider("auth-internal")),new tF(u,s.getProvider("app-check-internal")),yF(u,A),u);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),Fi(XB,JB,e),Fi(XB,JB,"esm2020")})();const bD={apiKey:"AIzaSyAFS5YsnbWmPKh1lmBGLsLCGtmkrnC4doM",authDomain:"cleargrad-database.firebaseapp.com",projectId:"cleargrad-database",storageBucket:"cleargrad-database.firebasestorage.app",messagingSenderId:"352836249313",appId:"1:352836249313:web:9a21623277828595f379a0",measurementId:"G-2VQBXX1ZN9"},z2=Wx(bD);mE(z2);F2(z2);new $n;const vD=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),wD=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),ZB=r=>{const e=wD(r);return e.charAt(0).toUpperCase()+e.slice(1)},K2=(...r)=>r.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),BD=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var CD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ED=k.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:A="",children:l,iconNode:u,...d},f)=>k.createElement("svg",{ref:f,...CD,width:e,height:e,stroke:r,strokeWidth:s?Number(t)*24/Number(e):t,className:K2("lucide",A),...!l&&!BD(d)&&{"aria-hidden":"true"},...d},[...u.map(([g,x])=>k.createElement(g,x)),...Array.isArray(l)?l:[l]]));const Te=(r,e)=>{const t=k.forwardRef(({className:s,...A},l)=>k.createElement(ED,{ref:l,iconNode:e,className:K2(`lucide-${vD(ZB(r))}`,`lucide-${r}`,s),...A}));return t.displayName=ZB(r),t};const ND=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],G2=Te("arrow-left",ND);const SD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],eC=Te("arrow-right",SD);const _D=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],tC=Te("bell",_D);const jD=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],rr=Te("book-open",jD);const TD=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],rC=Te("bug",TD);const UD=[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]],QD=Te("calendar-range",UD);const FD=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ol=Te("calendar",FD);const ID=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],vt=Te("check",ID);const DD=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],pu=Te("chevron-down",DD);const kD=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],RD=Te("chevron-left",kD);const MD=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],q2=Te("chevron-right",MD);const LD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ir=Te("circle-alert",LD);const HD=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],sC=Te("circle-check-big",HD);const OD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Y2=Te("circle-check",OD);const PD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],VD=Te("circle-plus",PD);const zD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],$2=Te("circle-question-mark",zD);const KD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],GD=Te("circle-x",KD);const qD=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],fx=Te("clock",qD);const YD=[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]],$D=Te("cloud-download",YD);const XD=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],JD=Te("cloud-upload",XD);const WD=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],ZD=Te("code-xml",WD);const e5=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],t5=Te("copy",e5);const r5=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],s5=Te("crown",r5);const n5=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Cc=Te("database",n5);const a5=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],kf=Te("download",a5);const i5=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Ir=Te("external-link",i5);const A5=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],o5=Te("file-braces",A5);const l5=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],os=Te("file-text",l5);const c5=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],ap=Te("funnel",c5);const u5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],H0=Te("globe",u5);const d5=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],h5=Te("graduation-cap",d5);const f5=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],m5=Te("history",f5);const g5=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],p5=Te("image",g5);const x5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],y5=Te("info",x5);const b5=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],v5=Te("instagram",b5);const w5=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],B5=Te("key",w5);const C5=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],E5=Te("link",C5);const N5=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],X2=Te("loader-circle",N5);const S5=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],_5=Te("lock-open",S5);const j5=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Ss=Te("lock",j5);const T5=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],U5=Te("log-out",T5);const Q5=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],nC=Te("mail",Q5);const F5=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],I5=Te("megaphone",F5);const D5=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],mx=Te("moon",D5);const k5=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],aC=Te("palette",k5);const R5=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],M5=Te("panels-top-left",R5);const L5=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],jr=Te("paperclip",L5);const H5=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],O0=Te("pencil",H5);const O5=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],es=Te("plus",O5);const P5=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],V5=Te("refresh-cw",P5);const z5=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],iC=Te("rotate-ccw",z5);const K5=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],AC=Te("save",K5);const G5=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],q5=Te("scroll-text",G5);const Y5=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],P0=Te("search",Y5);const $5=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],X5=Te("server",$5);const J5=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],gx=Te("sparkles",J5);const W5=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],px=Te("sun",W5);const Z5=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],J2=Te("tag",Z5);const ek=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],jn=Te("trash-2",ek);const tk=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ru=Te("trash",tk);const rk=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ys=Te("triangle-alert",rk);const sk=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],nk=Te("upload",sk);const ak=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ik=Te("user-cog",ak);const Ak=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],W2=Te("user",Ak);const ok=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],lk=Te("users",ok);const ck=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],oC=Te("wifi-off",ck);const uk=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],dk=Te("wifi",uk);const hk=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],xx=Te("wrench",hk);const fk=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],xt=Te("x",fk),lC={"A+":4.3,A:4,"A-":3.7,"B+":3.3,B:3,"B-":2.7,"C+":2.3,C:2,"C-":1.7,D:1,E:.8,F:0,FAIL:0,X:0},Z2=r=>{let e=0,t=0;for(const s of r){if(s.isWithdrawn||s.isExemption||!s.grade||s.grade==="-")continue;const A=s.grade.toUpperCase();if(A in lC){const l=lC[A],u=s.credits||0;u>0&&(e+=l*u,t+=u)}}return t===0?null:{gpa:e/t,credits:t}},mk=r=>r.length===0?null:r.reduce((t,s)=>t+s,0)/r.length,eN=r=>{const e=r.toString(),t=e.indexOf(".");return t===-1||e.length-t-1<=2?r.toFixed(2):(Math.round(r*100)/100).toFixed(2)};function tN(r){var e,t,s="";if(typeof r=="string"||typeof r=="number")s+=r;else if(typeof r=="object")if(Array.isArray(r)){var A=r.length;for(e=0;e<A;e++)r[e]&&(t=tN(r[e]))&&(s&&(s+=" "),s+=t)}else for(t in r)r[t]&&(s&&(s+=" "),s+=t);return s}function Hc(){for(var r,e,t=0,s="",A=arguments.length;t<A;t++)(r=arguments[t])&&(e=tN(r))&&(s&&(s+=" "),s+=e);return s}const Yd={total:32,crossCollege:8,boya:{total:13,dimensionsRequired:4}},Ec=["Year 1 Sem 1","Year 1 Sem 2","Year 2 Sem 1","Year 2 Sem 2","Year 3 Sem 1","Year 3 Sem 2","Year 4 Sem 1","Year 4 Sem 2"],gk=["Major Required","Major Elective","General Education","Other"],pk=["Chinese","English","Cross-College","Boya","Sports","Service","Primer"],yx=["Dimension 1","Dimension 2","Dimension 3","Dimension 4","Dimension 5","Dimension 6"],cC=[];for(let r=7;r<=22;r++)cC.push(`${r.toString().padStart(2,"0")}:00`),cC.push(`${r.toString().padStart(2,"0")}:30`);const Ks="course-card-bg",sf={"Major Required":`${Ks} border-l-[4px] !border-l-[#F26060]`,"Major Elective":`${Ks} border-l-[4px] !border-l-[#79A4E8]`,"General Education":`${Ks} border-l-[4px] !border-l-[#997FDC]`,Other:`${Ks} border-l-[4px] !border-l-[#C0D762]`,"University Way":`${Ks} border-l-[4px] !border-l-[#06D6A0]`},bx={Chinese:`${Ks} border-l-[4px] !border-l-[#EC9385]`,English:`${Ks} border-l-[4px] !border-l-[#EC9385]`,"Cross-College":`${Ks} border-l-[4px] !border-l-[#FCA269]`,Boya:`${Ks} border-l-[4px] !border-l-[#997FDC]`,Sports:`${Ks} border-l-[4px] !border-l-[#79BEB5]`,Service:`${Ks} border-l-[4px] !border-l-[#A48B78]`,Primer:`${Ks} border-l-[4px] !border-l-[#7DC174]`,"Military Training":`${Ks} border-l-[4px] !border-l-[#64748B]`},xk=(r,e,t)=>k.useMemo(()=>{let A=0,l=0,u=0,d=0,f=0,g=0,x=0,y=0,v=0,N=0;const M=new Set;let S=0;return r.forEach(K=>{if(K.isWithdrawn)return;const G=K.credits,z=["D","E","F","Fail","FAIL"].includes(K.grade||"");if(K.category==="University Way"||K.category==="General Education"&&K.genEduSubCategory==="Primer"){z||(S+=1);return}if(K.genEduSubCategory!=="Sports"&&K.genEduSubCategory!=="Military Training"&&!z&&(A+=G),!z){switch(K.category){case"Major Required":l+=G;break;case"Major Elective":u+=G;break;case"General Education":if(d+=G,K.genEduSubCategory)switch(K.genEduSubCategory){case"Chinese":case"English":f+=G;break;case"Cross-College":g+=G;break;case"Boya":v+=G,K.isEMI&&(N+=G),K.boyaDimension&&M.add(K.boyaDimension);break;case"Service":x+=G;break;case"Sports":y+=G;break}break}K.isEapEsp&&K.genEduSubCategory!=="Cross-College"&&(g+=G)}}),{total:{earned:A,required:t},majorRequired:{earned:l},majorElective:{earned:u},genEdu:{total:{earned:d,required:Yd.total},language:{earned:f,required:6},crossCollege:{earned:g,required:Yd.crossCollege},boya:{earned:v,required:Yd.boya.total,emiEarned:N,emiRequired:e?6:0},service:{earned:x},sports:{earned:y,required:4}},boyaStatus:{dimensionsCount:M.size,dimensionsRequired:Yd.boya.dimensionsRequired,uniqueDimensions:Array.from(M)},universityWay:{count:S,required:6}}},[r,e,t]),yk=(r,e)=>{if(e==="zh"){const t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:""},s=r.split(" ");if(s[0]==="Year"){const A=t[s[1]]||s[1];if(r.includes("Summer"))return`${A} `;if(r.includes("Sem 1"))return`${A} `;if(r.includes("Sem 2"))return`${A} `}return r}return r.replace("Year ","Y").replace("Sem ","S").replace("Summer","Sum")},bk=(r,e)=>{const t=r.match(/Year (\d+) Sem (\d+)/);if(t){const s=t[1],A=t[2];if(e==="zh"){const l=["","","","","","","","","","",""],u=parseInt(s);return`${l[u]?`${l[u]}`:`${s}`} ${A==="1"?"":""}`}else return`Year ${s} ${A==="1"?"Fall":"Spring"} Semester`}return r},ur=({label:r,current:e,total:t,color:s,subLabel:A,variant:l="m",labelClassName:u})=>{const d=t?Math.min(e/t*100,100):100;return a.jsxs("div",{className:"w-full mb-3",children:[a.jsxs("div",{className:"flex justify-between items-end mb-1",children:[a.jsx("span",{className:Hc("font-medium",u||"text-foreground",l==="l"?"text-lg":"text-sm"),children:r}),a.jsxs("span",{className:"text-sm text-muted",children:[a.jsx("span",{className:Hc("font-bold text-foreground",l==="l"?"text-xl":"text-base"),children:e}),t&&a.jsxs("span",{className:"text-xs",children:[" / ",t]}),A&&a.jsx("span",{className:"ml-2 text-[10px] leading-none text-muted",children:A})]})]}),a.jsx("div",{className:"w-full rounded-full h-2.5 overflow-hidden",style:{backgroundColor:"var(--color-progress-track)"},children:a.jsx("div",{className:Hc("h-2.5 rounded-full transition-all duration-500",s),style:{width:`${d}%`}})})]})},Oc="nsysu-micro-credits-data",Wo={minTotalCredits:"6",courses:[],manualSemesters:[],deletedSemesters:[],notes:""},vx=(r=113)=>Array.from({length:3},(e,t)=>r+t).flatMap(e=>[`${e}-Summer()`,`${e}-Winter()`]),vk=r=>{const e=t=>t.includes("-2")||t.includes("Spring")||t.includes("")?4:t.includes("Winter")||t.includes("")?3:t.includes("-1")||t.includes("Fall")||t.includes("")?2:t.includes("Summer")||t.includes("")?1:0;return r.sort((t,s)=>{const A=parseInt(t.split("-")[0])||0,l=parseInt(s.split("-")[0])||0;return A!==l?A-l:e(t)-e(s)})},V0=(r,e=113)=>{const t=vx(e),A=Array.from(new Set([...t,...r.manualSemesters||[],...r.courses.map(v=>v.semester).filter(Boolean)])).filter(v=>!(r.deletedSemesters||[]).includes(v)),l=vk(A),u=r.courses.reduce((v,N)=>{const M=N.semester||"Unknown";return v[M]||(v[M]=[]),v[M].push(N),v},{}),d={};let f=0;l.forEach(v=>{d[v]=0}),Object.entries(u).forEach(([v,N])=>{const M=N.filter(S=>S.completed).reduce((S,V)=>S+(parseFloat(V.credits)||0),0);d[v]=M}),l.forEach(v=>{const N=d[v];N>1&&(f+=N-1)});const g={};let x=0;return l.filter(v=>{const N=d[v];return N>0&&N<1}).forEach(v=>{if(f<=0)return;const N=d[v],M=1-N,S=Math.min(M,f);g[v]=N+S,f-=S}),l.forEach(v=>{g[v]===void 0&&(g[v]=Math.min(1,d[v])),x+=g[v]}),x=Math.floor(Math.min(6,x)),{rawStats:d,effectiveStats:g,grandTotalEffective:x,sortedSemesters:l,activeSemesters:A}},wk={en:{app:{title:"Course Tracker",settings:"Settings",addCourse:"Add Course",export:"Export JSON",import:"Import JSON",clear:"Clear All Data",coursePlan:"Course Plan",addPlan:"Add Plan",totalCourses:"courses total",deleteConfirm:"Are you sure you want to delete this course?",clearConfirm:"Are you sure you want to clear ALL data? This cannot be undone?",tracker:"Tracker",planner:"Planner",backToTracker:"Back to Tracker",fixData:"Fix Data"},common:{actions:"Actions",confirm:"Confirm",cancel:"Cancel",noMatchTitle:"No Match Found",noMatchDesc:"We couldn't find an exact match for this course in your tracker.",manualAdd:"Manual Add",perfectMatchFound:"Perfect Match Found!",matchConfirmText:"This action will sync the course data.",trackerTitle:"Select from Tracker",courseName:"Course Name",credit:"Credit",matchCourse:"Sync Course",addFromTracker:"Add from Tracker",completedCourses:"Completed Courses",plannedCourses:"Planned Courses"},settings:{title:"Settings",language:"Language / ",emiStudent:"I am an EMI Student",emiDesc:"If checked, you'll need 6 credits of Liberal Arts (General Edu) courses to be taught in English.",gradCredits:"Total Graduation Credits",liquidTheme:"Liquid Glass UI",darkMode:"Dark Mode",lightMode:"Light Mode",save:"Save & Close",profile:"Student Profile",major:"Major / Department",selectMajor:"Select Department...",entranceYear:"Entrance Year (e.g. 113)",class:"Class",emiHintActive:"EMI Liberal Arts tracking enabled",profileWarning:"Please ensure your profile is correct to get accurate search results."},dashboard:{title:"Graduation Progress",totalCredits:"Total Credits",progress:"Graduation Progress",genEdu:"General Education",majorReq:"Major Courses",majorRequired:"Major Required",majorElective:"Major Elective",langTotal:"Language Total",langDesc:"Includes Mandatory Chinese & English",crossCollege:"Inter-college Elective",universityWay:"Primer on College Life",events:"events",boya:"Liberal Arts",boyaTotal:"Liberal Arts Total",emiBoya:"EMI Liberal Arts",service:"Practical Experience / Service Learning",dimensions:"Dimensions Covered",uniqueDimensions:"Unique Dimensions",uniqueDim:"Unique Dim:",attendance:"Attendance",sportsCreditsNoCount:"Does not count towards graduation",totalGPA:"Total GPA",avgSemesters:"Avg. of Semesters",addInterdisciplinary:"Add Micro-credit, International or Interdisciplinary Learning",interdisciplinaryView:{title:"Micro-credit, International or Interdisciplinary Learning",placeholder:"Select an item from the left to view details.",sidebar:{microCredits:"Micro-credits",addMicroCredit:"Add Micro-credits",internationalOrCross:"International / Interdisciplinary (Choose 1 of 9)",international:"International Learning",crossDomain:"Interdisciplinary Learning"},requirements:{1:"Exchange or Study Abroad",2:"Approved Foreign Course",3:"Approved Foreign Study Plan",4:"Minor (Intra / Cross-school)",5:"Double Major (Intra / Cross-school)",6:"Teacher Education (Intra / Cross-school)",7:"Micro-program",8:"Integrated Program",9:"Inter-departmental Professional Program"},details:{requirementsHeader:"Requirements:",confirmationHeader:"Confirmation",1:{requirement:"Study abroad for at least 1 semester",confirmation:"I have studied abroad for at least 1 semester"},2:{requirement:`Definition: Student completes a course-based international study approved by their department and earn at least 2 credits.

Requirements (ALL must be met):
1. Location: Course must be offered by a foreign university or an academic foreign education/research institution.
2. Course Nature: Must be a 'Formal Course', with clear course name, content/syllabus, and offering unit.
3. Credit Threshold: Course credits  2 credits (if not NSYSU credit system, must be converted/recognized by department).
4. Department Review: Course must be 'approved by the department'. Retroactive or unapproved courses are not recognized.
5. Proof of Completion: Must provide at least one: Transcript or Certificate of Completion.`,confirmation:"I have completed a course-based international study that meets all valid requirements."},3:{requirement:`Definition: Student completes a program-based international study approved by their department and meets the minimum study hours.

Requirements (ALL must be met):
1. Location: Hosted by a foreign university, research institution, international organization, or their partners.
2. Program Nature: Belongs to 'Study Program / Training / Camp / Workshop / Project'. Does not require being a formal credit course.
3. Study Hours Threshold: Accumulated study hours  36 hours. Can be continuous or non-continuous (as recognized by department).
4. Department Review: Program must be 'approved by the department' and recognized as having 'learning/academic nature'.
5. Proof of Completion: Must provide at least one: Participation Certificate, Completion Certificate, or Hours Certificate issued by the organizer.`,confirmation:"I have completed a program-based international study that meets all valid requirements."}}}},form:{addTitle:"Add New Course",editTitle:"Edit Course",importCatalog:"Import from Catalog",courseName:"Course Name",credits:"Credits",grade:"Grade",semester:"Semester",category:"Category",subCategory:"Sub-Category",dimension:"Dimension",attributes:"Attributes",isEMI:"EMI Course (English Taught)",isEapEsp:"EAP/ESP Course",isWithdrawn:"Withdraw",isExemption:"Exemption",dayTime:"Day & Time (Optional)",selectDay:"Select Day",selectStart:"Start Time",selectEnd:"End Time",cancel:"Cancel",save:"Save Course",verified:"Verified"},schedule:{schedule:"Schedule",scheduledCourses:"Courses Scheduled",headers:{name:"Course Name",credits:"Credits",grade:"Grade",category:"Category"},days:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],courseName:"Course Name",credits:"Credits",grade:"Grade",category:"Category",noCourses:"No courses scheduled for this semester with time information.",exportSchedule:"Export Schedule",exportICS:"Export Calendar (.ics)"},courseSchedule:{button:"Course Selection Schedule",title:"114-2 Course Selection Schedule",inquiry:"Course Inquiry",prelim1:"Preliminary Round 1",prelim2:"Preliminary Round 2",addDrop1:"Add/Drop Round 1",addDrop2:"Add/Drop Round 2",inquiryDate:"Starting from: Jan 6 (Tue) 13:00",prelim1Date:"Jan 30 (Fri) 9:00  Feb 2 (Mon) 17:00",prelim2Date:"Feb 4 (Wed) 9:00  Feb 5 (Thu) 17:00",addDrop1Date:"Feb 9 (Mon) 9:00  Feb 10 (Tue) 17:00",addDrop2Date:"Feb 24 (Tue) 9:00  Feb 25 (Wed) 17:00",updateTime:"Update Time: 2026.01.06",reference:"Reference",warning:"Data is for reference only. Please refer to the official NSYSU announcement for actual dates."},categories:{"General Education":"General Education",Mandatory:"Mandatory",Elective:"Elective",Language:"Language","General Education (Core)":"Gen Edu (Core)","University Way":"Primer on College Life","Service Learning":"Practical Experience / Service Learning","Physical Education":"Physical Education","Major Required":"Major Required","Major Elective":"Major Elective",Other:"Other","Cross-College":"Inter-college Elective",Boya:"Liberal Arts",Chinese:"Chinese",English:"English",Sports:"Sport & Health",Service:"Practical Experience / Service Learning",Primer:"Primer on College Life","Dimension 1":"Dimension 1","Dimension 2":"Dimension 2","Dimension 3":"Dimension 3","Dimension 4":"Dimension 4","Dimension 5":"Dimension 5","Dimension 6":"Dimension 6","EAP/ESP":"EAP/ESP","Military Training":"Military Training"},semesters:{"Year 1 Sem 1":"Year 1 Fall Semester","Year 1 Sem 2":"Year 1 Spring Semester","Year 2 Sem 1":"Year 2 Fall Semester","Year 2 Sem 2":"Year 2 Spring Semester","Year 3 Sem 1":"Year 3 Fall Semester","Year 3 Sem 2":"Year 3 Spring Semester","Year 4 Sem 1":"Year 4 Fall Semester","Year 4 Sem 2":"Year 4 Spring Semester"},importModal:{title:"Overwriting Data",warning:"Importing this file will permanently replace all your existing data. This action cannot be undone.",backupRec:"We strongly recommend backing up your current data before proceeding.",backupBtn:"Backup Current Data & Import",cancel:"Cancel",overwrite:"Overwrite",trackCountPrefix:"You currently have ",trackCountSuffix:" courses tracked."},clearModal:{title:"Clear All Data",warning:"This will permanently delete all your courses and settings. This action cannot be undone.",backupRec:"We recommend backing up your data before clearing.",backupBtn:"Backup & Clear",cancel:"Cancel",clear:"Clear All Data"},courseList:{schedule:"Schedule & Grade",noCourses:"No courses",remove:"Remove",cr:"cr"},tutorial:{start:"Start Tutorial",welcome:{title:"Welcome to ClearGrad.",desc:"Take a quick interactive tour to master your graduation planning."},settings:{title:"Personalized Settings",desc:"Start here. Select your Major, Entrance Year, and EMI status to tailor your graduation requirements."},modeSwitcher:{title:"Workspace Switcher",desc:"Toggle seamlessly between your official 'Tracker' progress and your sandbox 'Planner' schedule."},plannerBoard:{title:"The Planner Board",desc:"Your safe space to draft perfect schedules. Drag, drop, and experimentthese courses won't affect your official records."},plannerSearch:{title:"Smart Course Search",desc:"Find and gather interesting courses from the official catalog to build your draft schedule."},addCourse:{title:"Manual Course Entry",desc:"Add a custom course manually if you can't find it in the official university catalog."},catalogFeature:{title:"Intelligent Import",desc:"Use 'Import from Catalog' to automatically sync course times, credits, and graduation dimensions in one click."},dataSafety:{title:"Total Data Control",desc:"Your data stays on your device. Export backups as JSON files to keep your progress safe or migrate to a new browser."},scheduleGrid:{title:"Visual Timetable",desc:"Review your weekly schedule at a glance to identify any time conflicts before the semester begins."},scheduleList:{title:"Course Roster & Grades",desc:"Scroll down to manage your enrolled courses and input your final semester grades."},dashboard:{title:"Progress Dashboard",desc:"Monitor your journey to graduation with a comprehensive breakdown of required, elective, and general education credits."},coursePlan:{title:"Academic Archive",desc:"Review your historical course records organized cleanly by completed semesters."},scheduleGrade:{title:"Semester Details",desc:"Access your detailed schedule grid and input final grades for any specific semester."},history:{title:"Release Journal",desc:"Stay updated with our latest feature releases and application improvements."},support:{title:"Help & Support",desc:"Have questions or found a bug? Check our FAQs or reach out directly for assistance."},next:"Next",prev:"Previous",skip:"Skip",done:"Done"},updates:{title:"Update Journal",desc:"Track the evolution of this project",close:"Close"},planner:{title:"Planner Board",draftBoard:"Draft Board",weekends:"Weekends",clear:"Clear",export:"Export to Tracker",importDraft:"Import Catalog",days:{any:"Any Day",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat",sun:"Sun"},depts:{all:"All Categories",cs:"CS ()",gen:"GeneralEdu"},incompleteDataWarning:"It seems like the University is adjusting course data (Total: {{count}}). Some courses might be missing.",search:{placeholder:"Search course code, name, teacher...",noResults:"Search to add courses",retry:"Retry",failed:"Failed to load courses"},courseId:"Course ID",addToDraft:"Add to Draft",alreadyAdded:"Already Added",showConflicts:"Show Conflicts",showEMIOnly:"EMI Only",delete:"Delete",edit:"Edit",courseIdCopied:"Course ID Copied!",exportPreview:{title:"Export Preview",desc:"Confirm changes before exporting to",draftSource:"Draft (Source)",destination:"Destination",current:"Current",empty:"Empty Schedule",warning:"Existing courses will remain. New courses will be added.",cancel:"Cancel",confirm:"Confirm Export"},labels:{title:"Manage Labels",library:"My Label Library",applied:"Applied to this Course",newPlaceholder:"New label name...",createFirst:"Create your first label above!",allApplied:"All labels applied!",noApplied:"No labels applied",noLabels:"No custom labels created yet.",deleteConfirm:'Delete "{{label}}" from library?',edit:"Edit",finish:"Finish",exists:"Label already exists"}},catalog:{title:"Course Catalog",subtitle:"Import from NSYSU Open Data",searchPlaceholder:"Search by Name, Teacher, or ID...",loading:"Loading courses...",noResults:"No courses found. Try searching for something else.",dataSource:"Data provided by NSYSU Open Data API",summer:"Summer",coursesFound:"courses found",includeElectives:"Electives",mode:{all:"All Courses",compulsory:"Show Major Req/Elec"},label:{major:"Major",grade:"Grade",class:"Class"},class:{none:"-",shared:"Shared ()",a:"Class A",b:"Class B",english:"English Class"},grades:{1:"Freshman",2:"Sophomore",3:"Junior",4:"Senior"}},announcement:{title:"Welcome to ClearGrad.",defaultMessage:` **ClearGrad v7.0 **

 **** Google 
 **** 
 ****  Google 100% 

 `,disclaimer:"This website is for reference only; please refer to the school for actual graduation progress.",close:"I Understand",dontShowAgain:"Don't show again until next update",version:"Version",firstTime:"First time?",startTutorial:"Start Tutorial",haveQuestions:"NEW"},support:{title:"Support",message:"If you need any support or have questions, please feel free to contact us via email.",contact:"Contact Support",email:"ouuewow@gmail.com",disclaimer:" Unofficial App. Not affiliated with NSYSU.",copyright:"Data for reference only. Please verify with school system.",faqTitle:"FAQs",faq:[{question:"How to add 'Primer on College Life'?",answer:"Select Category 'General Education' and Sub-Category 'Primer on College Life'."},{question:"How to handle course exemptions?",answer:"Check the 'Exemption' box in the Attributes section when adding/editing a course."},{question:"How to export schedule or calendar?",answer:"Click 'Schedule & Grades' on the dashboard. The export buttons are at the top right."},{question:"What are the arrows in the top right?",answer:"Down  = Export Backup (JSON). Up  = Import Backup (JSON)."},{question:"How to add custom labels?",answer:"In the Planner (right side), click the tag icon on any course card to add or create labels."},{question:"Can I search by label?",answer:"Yes! You can search for your custom labels in the Course Catalog search bar."},{question:"Do I need to download data every time?",answer:"No, data is saved automatically in your browser. However, we recommend regular backups."},{question:"What are the ways to add courses?",answer:"Two ways: 1. 'Import from Planner' (recommended). 2. Manually click 'Add Course' on the dashboard."}]},dataFix:{button:"Fix Locations",title:"Missing Data Detected",desc:"Some courses in",descSuffix:"are missing classroom information.",instruction:"Please select the original catalog semester (e.g., 114-1) to auto-fill this data.",sourceLabel:"Original Semester Source",selectPlaceholder:"Select a semester...",skip:"Skip",autoFix:"Auto Fix",success:"Success! Auto-updated",skipped:"ambiguous matches skipped",ambiguousAlert:"Found potential matches but they were ambiguous. Please refine search or use manual mode.",noMatch:"Couldn't find matching data in"},courseSelection:{title:"Multiple Matches Found",desc:"We found multiple courses that look like",select:"Please select the correct one:",teacher:"Teacher",room:"Room",time:"Time",confirm:"Confirm Selection",cancel:"Skip this Course",manualHint:"Please check these courses manually in the planner."},fixReport:{titleAttention:"Fix Report: Attention Needed",titleComplete:"Auto-Fix Complete",successUpdate:"Successfully updated",courses:"courses",unmatched:"Could not find matches for the following courses:",noChanges:"No changes were made. All courses might already be up to date.",done:"Done"},addSemester:{title:"Add New Semester",year:"Year",semester:"Semester",yearOption:"Year {year}",sem1:"Fall Semester",sem2:"Spring Semester",summer:"Summer",exists:"This semester already exists!",cancel:"Cancel",add:"Add"}},zh:{app:{title:"",settings:"",addCourse:"",export:"",import:"",clear:"",coursePlan:"",addPlan:"",totalCourses:"",deleteConfirm:"",clearConfirm:"",tracker:"",planner:"",backToTracker:"",fixData:""},common:{actions:"",confirm:"",cancel:"",noMatchTitle:"",noMatchDesc:"",manualAdd:"",perfectMatchFound:"",matchConfirmText:"",trackerTitle:"",courseName:"",credit:"",matchCourse:"",addFromTracker:"",completedCourses:"",plannedCourses:""},settings:{title:"",language:" / Language",emiStudent:" EMI ",emiDesc:" 6 ",gradCredits:"",liquidTheme:"Liquid Glass UI ()",darkMode:"Dark Mode",lightMode:"Light Mode",save:"",profile:"",major:"",selectMajor:"...",entranceYear:" 113",class:"",emiHintActive:" EMI ",profileWarning:""},dashboard:{title:"",totalCredits:"",progress:"",genEdu:"",majorReq:"",majorRequired:"",majorElective:"",langTotal:"",langDesc:"",crossCollege:"",universityWay:"",events:"",boya:"",boyaTotal:"",emiBoya:"EMI ",service:"",dimensions:"",uniqueDimensions:"",uniqueDim:"",attendance:"",sportsCreditsNoCount:"",totalGPA:" GPA",avgSemesters:"",addInterdisciplinary:"",interdisciplinaryView:{title:"",placeholder:"",sidebar:{microCredits:"",addMicroCredit:"",internationalOrCross:" / ",international:"",crossDomain:""},requirements:{1:"",2:"",3:"",4:" ",5:" ",6:" ",7:"",8:"",9:""},details:{requirementsHeader:"",confirmationHeader:"",1:{requirement:"1",confirmation:"1"},2:{requirement:` 2 

 (ALL )
1.   / 
2.  ( Course )  / 
3.   2  ()
4. 
5.  ( Transcript )   ( Certificate of Completion )`,confirmation:""},3:{requirement:`

 (ALL )
1.  
2.  /  /  /  / 
3.   36  (  )
4.  / 
5.   `,confirmation:""}}}},form:{addTitle:"",editTitle:"",importCatalog:"",courseName:"",credits:"",grade:"",semester:"",category:"",subCategory:"",dimension:"",attributes:"",isEMI:"EMI ",isEapEsp:"EAP/ESP ",isWithdrawn:"",isExemption:"",dayTime:"",selectDay:"",selectStart:"",selectEnd:"",cancel:"",save:"",verified:""},schedule:{schedule:"",scheduledCourses:"",noCourses:"",headers:{name:"",credits:"",grade:"",category:""},days:["","","","","","",""],courseName:"",credits:"",grade:"",category:"",noCoursesScheduled:"",exportSchedule:"",exportICS:".ics"},courseSchedule:{button:"",title:"114-2 ",inquiry:"",prelim1:"",prelim2:"",addDrop1:"",addDrop2:"",inquiryDate:"1/613:00",prelim1Date:"1/309:00  2/217:00",prelim2Date:"2/49:00  2/517:00",addDrop1Date:"2/99:00  2/1017:00",addDrop2Date:"2/249:00  2/2517:00",updateTime:"2026.01.06",reference:"",warning:""},categories:{"General Education":"",Mandatory:"",Elective:"",Language:"","General Education (Core)":"","University Way":"","Service Learning":"","Physical Education":"","Major Required":"","Major Elective":"",Other:"","Cross-College":"",Boya:"",Chinese:"",English:"",Sports:"",Service:"",Primer:"","Dimension 1":"","Dimension 2":"","Dimension 3":"","Dimension 4":"","Dimension 5":"","Dimension 6":"","EAP/ESP":"EAP/ESP","Military Training":""},semesters:{"Year 1 Sem 1":" ","Year 1 Sem 2":" ","Year 2 Sem 1":" ","Year 2 Sem 2":" ","Year 3 Sem 1":" ","Year 3 Sem 2":" ","Year 4 Sem 1":" ","Year 4 Sem 2":" "},importModal:{title:"",warning:"",backupRec:"",backupBtn:"",cancel:"",overwrite:"",trackCountPrefix:" ",trackCountSuffix:" "},courseList:{schedule:" & ",noCourses:"",remove:"",cr:""},clearModal:{title:"",warning:"",backupRec:"",backupBtn:"",cancel:"",clear:""},tutorial:{start:"",welcome:{title:" ClearGrad ",desc:""},settings:{title:"",desc:" EMI "},modeSwitcher:{title:"",desc:""},plannerBoard:{title:"",desc:""},plannerSearch:{title:"",desc:""},addCourse:{title:"",desc:""},catalogFeature:{title:"",desc:" EMI "},dataSafety:{title:"",desc:" JSON "},scheduleGrid:{title:"",desc:""},scheduleList:{title:"",desc:""},dashboard:{title:"",desc:""},coursePlan:{title:"",desc:""},scheduleGrade:{title:"",desc:""},history:{title:"",desc:""},support:{title:"",desc:""},next:"",prev:"",skip:"",done:""},updates:{title:"",desc:"",close:""},planner:{title:"",draftBoard:"",weekends:"",clear:"",export:"",importDraft:"",days:{any:"",mon:"",tue:"",wed:"",thu:"",fri:"",sat:"",sun:""},depts:{all:"",cs:"",ee:"",bm:"",fl:"",gen:""},incompleteDataWarning:" {{count}} ",search:{placeholder:"...",noResults:"",retry:"",failed:""},courseId:"",addToDraft:"",alreadyAdded:"",showConflicts:"",showEMIOnly:" EMI",delete:"",edit:"",courseIdCopied:"",exportPreview:{title:"",desc:"",draftSource:"",destination:"",current:"",empty:"",warning:"",cancel:"",confirm:""},labels:{title:"",library:"",applied:"",newPlaceholder:"...",createFirst:"",allApplied:"",noApplied:"",noLabels:"",deleteConfirm:' "{{label}}" ',edit:"",finish:"",exists:""}},catalog:{title:"",subtitle:"",searchPlaceholder:"...",loading:"...",noResults:"",dataSource:" API",summer:"",coursesFound:"",includeElectives:"",mode:{all:"",compulsory:""},label:{major:"",grade:"",class:""},class:{none:"-",shared:"",a:"",b:"",english:""},grades:{1:"",2:"",3:"",4:""}},announcement:{title:"Welcome to ClearGrad !",defaultMessage:` **ClearGrad v7.0 **

 **** Google 
 **** 
 ****  Google 100% 

 `,disclaimer:"",close:"",dontShowAgain:"",version:"",firstTime:"",startTutorial:"",haveQuestions:"NEW"},support:{title:"",message:"",contact:"",email:"ouuewow@gmail.com",disclaimer:" ",copyright:"",faqTitle:" (FAQs)",faq:[{question:"",answer:"+"},{question:"",answer:""},{question:"",answer:"&"},{question:"",answer:" =  (JSON) = "},{question:"",answer:""},{question:"",answer:""},{question:"",answer:""},{question:"",answer:"1.  2. "}]},dataFix:{button:"",title:"",desc:"",descSuffix:"",instruction:" 114-1",sourceLabel:"",selectPlaceholder:"...",skip:"",autoFix:"",success:"",skipped:"",ambiguousAlert:"",noMatch:""},courseSelection:{title:"",desc:"",select:"",teacher:"",room:"",time:"",confirm:"",cancel:"",manualHint:""},fixReport:{titleAttention:"",titleComplete:"",successUpdate:"",courses:"",unmatched:"",noChanges:"",done:""},addSemester:{title:"",year:"",semester:"",yearOption:"{year}",sem1:"",sem2:"",summer:"",exists:"",cancel:"",add:""}}},rN=k.createContext(void 0),Bk=({children:r})=>{const[e,t]=k.useState(()=>{const A=localStorage.getItem("nsysu-language");return A==="en"||A==="zh"?A:"zh"});k.useEffect(()=>{localStorage.setItem("nsysu-language",e),document.documentElement.lang=e},[e]);const s={language:e,setLanguage:t,t:wk[e]};return a.jsx(rN.Provider,{value:s,children:r})},At=()=>{const r=k.useContext(rN);if(r===void 0)throw new Error("useLanguage must be used within a LanguageProvider");return r},Ck=k.memo(({courses:r,isEMIStudent:e,graduationCredits:t,onOpenInterdisciplinary:s,userProfile:A})=>{const{t:l,language:u}=At(),d=xk(r,e,t),[f,g]=k.useState(0),x=()=>{try{const N=localStorage.getItem(Oc),M=N?JSON.parse(N):Wo,{grandTotalEffective:S}=V0(M,A?.entranceYear);g(S)}catch{g(0)}};k.useEffect(()=>(x(),window.addEventListener("micro-credits-updated",x),()=>window.removeEventListener("micro-credits-updated",x)),[A?.entranceYear]);const y=d.total.earned+f,v=a.jsxs("span",{children:[l.dashboard.progress,f>0&&a.jsx("span",{className:"text-muted ml-2 text-base font-normal",children:u==="zh"?`(: ${f} )`:`(Micro-credits: ${f} cr)`})]});return a.jsxs("div",{className:"bg-transparent rounded-xl max-w-[85rem] mx-auto",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-foreground pb-2",children:l.dashboard.title}),a.jsxs("button",{onClick:s,className:"flex items-center gap-2 px-3 py-1.5 bg-primary/10 hover:bg-primary/20 text-[#8D9CB2] dark:text-primary text-sm font-medium rounded-full transition-colors mb-2",children:[a.jsx(VD,{size:16}),l.dashboard.addInterdisciplinary]})]}),a.jsxs("div",{className:"flex flex-col gap-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-11 gap-6",children:[a.jsxs("div",{className:"md:col-span-7 bg-background p-6 rounded-xl border border-gray-500",children:[a.jsx("h3",{className:"text-lg font-semibold text-primary mb-4",children:l.dashboard.totalCredits}),a.jsx(ur,{label:v,current:y,total:d.total.required,color:"bg-primary",variant:"l"})]}),a.jsx("div",{className:"md:col-span-4 bg-background rounded-xl border border-gray-500 flex flex-row",children:(()=>{const N=Array.from(new Set(r.map(K=>K.semester))).sort(),M=[],S=[];N.forEach(K=>{const G=r.filter(q=>q.semester===K),z=Z2(G);z&&(M.push(z.gpa),S.push(K))});const V=mk(M);return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex-1 p-6 flex flex-col justify-between min-w-0",children:[a.jsx("h3",{className:"text-lg font-semibold text-primary mb-2 whitespace-nowrap",children:l.dashboard.totalGPA}),a.jsxs("div",{className:"flex items-end gap-2 mt-auto",children:[a.jsx("span",{className:"text-4xl font-bold text-foreground",children:V!==null?eN(V):"-.--"}),a.jsx("span",{className:"text-sm text-muted mb-1.5 font-medium",children:"/ 4.30"})]})]}),a.jsx("div",{className:"w-[1px] bg-gray-600 my-4"}),a.jsxs("div",{className:"flex-1 p-6 flex flex-col min-w-0 bg-surface/30 rounded-r-xl",children:[a.jsx("span",{className:"text-xs font-bold text-primary mb-3",children:l.dashboard.avgSemesters}),a.jsx("div",{className:"flex flex-wrap gap-1.5 content-start overflow-y-auto max-h-[80px]",children:S.length>0?S.map(K=>a.jsx("span",{className:"text-[10px] font-bold px-1.5 py-0.5 rounded bg-surface border border-gray-600 text-muted whitespace-nowrap",children:yk(K,u)},K)):a.jsx("span",{className:"text-[10px] text-muted italic",children:"-"})})]})]})})()})]}),a.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-11 gap-6",children:[a.jsxs("div",{className:"xl:col-span-2 bg-background p-6 rounded-xl border border-gray-500 flex flex-col gap-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-primary mb-4 whitespace-nowrap",children:l.dashboard.majorReq}),a.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-gray-400 flex-1 flex flex-col justify-center items-center text-center",children:[a.jsx("span",{className:"text-foreground text-sm font-medium block mb-1",children:l.dashboard.majorRequired}),a.jsx("span",{className:"text-3xl font-bold text-primary",children:d.majorRequired.earned})]}),a.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-gray-400 flex-1 flex flex-col justify-center items-center text-center",children:[a.jsx("div",{className:"text-foreground text-sm font-medium mb-1",children:l.dashboard.majorElective}),a.jsx("div",{className:"text-3xl font-bold text-primary",children:d.majorElective.earned})]})]}),a.jsxs("div",{className:"xl:col-span-9 bg-background p-6 rounded-xl border border-gray-500 flex flex-col",children:[a.jsx("h3",{className:"text-lg font-semibold text-primary mb-4",children:l.dashboard.genEdu}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-9 gap-6 flex-1",children:[a.jsxs("div",{className:"lg:col-span-5 flex flex-col gap-4 h-full",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 flex-1",children:[a.jsxs("div",{className:"bg-surface/30 p-4 rounded-lg border border-gray-600 h-full flex flex-col justify-center relative",children:[a.jsx(ur,{label:l.dashboard.langTotal,current:d.genEdu.language.earned,total:d.genEdu.language.required,color:"bg-lang",labelClassName:"text-lang"}),a.jsx("div",{className:"absolute bottom-3 left-4 text-[10px] text-muted",children:l.dashboard.langDesc})]}),a.jsxs("div",{className:"bg-surface/30 p-4 rounded-lg border border-gray-600 h-full flex flex-col justify-center relative",children:[a.jsx(ur,{label:l.categories?.Sports||"Sport & Health",current:d.genEdu.sports?.earned||0,total:d.genEdu.sports?.required||4,color:"bg-sports",labelClassName:"text-sports"}),a.jsx("div",{className:"absolute bottom-3 left-4 text-[10px] text-muted",children:l.dashboard.sportsCreditsNoCount})]}),a.jsx("div",{className:"bg-surface/30 p-4 rounded-lg border border-gray-600 h-full flex flex-col justify-center",children:a.jsx(ur,{label:l.dashboard.crossCollege,current:d.genEdu.crossCollege.earned,total:d.genEdu.crossCollege.required,color:"bg-inter",labelClassName:"text-inter"})}),a.jsx("div",{className:"bg-surface/30 p-4 rounded-lg border border-gray-600 h-full flex flex-col justify-center",children:a.jsx(ur,{label:l.dashboard.universityWay,current:d.universityWay.count,total:d.universityWay.required,color:"bg-primer",subLabel:l.dashboard.events,labelClassName:"text-primer"})})]}),a.jsxs("div",{className:Hc("flex items-center justify-between p-6 rounded-lg border transition-all",d.genEdu.service.earned>0?"bg-emerald-500/10 border-emerald-500/30":"bg-surface/30 border-gray-600"),children:[a.jsx("span",{className:"font-medium text-foreground text-sm",children:l.dashboard.service}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:Hc("text-xs font-bold",d.genEdu.service.earned>0?"text-emerald-400":"text-muted"),children:d.genEdu.service.earned>0?"Completed":"Req: 1 Course"}),d.genEdu.service.earned>0&&a.jsx(vt,{size:16,className:"text-emerald-500"})]})]})]}),a.jsxs("div",{className:"lg:col-span-4 bg-surface/30 p-6 rounded-lg border border-gray-600 flex flex-col h-full gap-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-md font-medium text-boya mb-6",children:l.dashboard.boya}),a.jsx(ur,{label:l.dashboard.boyaTotal,current:d.genEdu.boya.earned,total:d.genEdu.boya.required,color:"bg-boya"}),d.genEdu.boya.emiRequired>0&&a.jsx("div",{className:"mt-6",children:a.jsx(ur,{label:l.dashboard.emiBoya,current:d.genEdu.boya.emiEarned,total:d.genEdu.boya.emiRequired,color:"bg-boya-emi",variant:"s"})})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsx("div",{className:"text-xs font-medium text-muted",children:l.dashboard.dimensions}),a.jsxs("div",{className:"text-xs font-medium text-boya",children:[l.dashboard.uniqueDim," ",d.boyaStatus.uniqueDimensions.length," / 4"]})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:[1,2,3,4,5,6].map(N=>{const M=`Dimension ${N}`,S=d.boyaStatus.uniqueDimensions.includes(M);return a.jsxs("div",{className:`
                                                    w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold border transition-all
                                                    ${S?"bg-boya border-boya text-surface":"bg-surface/50 border-gray-600 text-muted"}
                                                `,children:["D",N]},N)})})]})]})]})]})]})]})]})}),uC="nsysu-labels-library",dC="nsysu-course-labels",ip=["#FCA5A5","#FDBA74","#FCD34D","#86EFAC","#67E8F9","#93C5FD","#C4B5FD","#F9A8D4","#CBD5E1"],hC=[{text:"Easy",color:"#22c55e"},{text:"Hard",color:"#ef4444"},{text:"Morning",color:"#f97316"},{text:"Afternoon",color:"#3b82f6"},{text:"To Take",color:"#a855f7"}],sN=k.createContext(null),Ek=({children:r})=>{const[e,t]=k.useState(()=>{const N=localStorage.getItem(uC);if(!N)return hC;try{const M=JSON.parse(N);return Array.isArray(M)&&typeof M[0]=="string"?M.map((S,V)=>({text:S.trim(),color:ip[V%ip.length]})):M.map(S=>({...S,text:S.text.trim()}))}catch(M){return console.error("Failed to parse labels",M),[]}}),[s,A]=k.useState(()=>{const N=localStorage.getItem(dC);return N?JSON.parse(N):{}});k.useEffect(()=>{localStorage.setItem(uC,JSON.stringify(e))},[e]),k.useEffect(()=>{localStorage.setItem(dC,JSON.stringify(s))},[s]);const v={allUserLabels:e,courseUserLabels:s,addLabelToLibrary:(N,M)=>{const S=N.trim();S&&t(V=>V.some(K=>K.text===S)?V:[...V,{text:S,color:M}])},removeLabelFromLibrary:N=>{t(M=>M.filter(S=>S.text!==N)),A(M=>{const S={...M};return Object.keys(S).forEach(V=>{S[V]=S[V].filter(K=>K!==N)}),S})},toggleLabelForCourse:(N,M,S)=>{const V=M.trim();if(!V)return;const K=S?`${S}_${N}`:N;A(G=>{const z=G[K]||[];if(z.includes(V)){const $=z.filter(Y=>Y!==V);if($.length===0){const{[K]:Y,...E}=G;return E}return{...G,[K]:$}}else return{...G,[K]:[...z,V]}})},setLabelForCourse:(N,M,S,V)=>{const K=M.trim();if(!K)return;const G=V?`${V}_${N}`:N;A(z=>{const q=z[G]||[],$=q.includes(K);if(S&&!$)return{...z,[G]:[...q,K]};if(!S&&$){const Y=q.filter(E=>E!==K);if(Y.length===0){const{[G]:E,..._}=z;return _}return{...z,[G]:Y}}return z})},getLabelsForCourse:(N,M)=>{const S=M?`${M}_${N}`:N;return(s[S]||[]).map(K=>e.find(G=>G.text===K)).filter(K=>!!K)},clearAllLabels:()=>{t(hC),A({})},importLabels:(N,M)=>{Array.isArray(N)&&t(N),M&&typeof M=="object"&&A(M)},DEFAULT_COLORS:ip};return a.jsx(sN.Provider,{value:v,children:r})},Nk=()=>{const r=k.useContext(sN);if(!r)throw new Error("useLabelContext must be used within a LabelProvider");return r},xu=()=>Nk(),Sk=({course:r,onEdit:e,onLabelClick:t})=>{const{t:s}=At(),{getLabelsForCourse:A}=xu(),u=r.category==="General Education"?r.genEduSubCategory?bx[r.genEduSubCategory]:sf["General Education"]:sf[r.category],d=r.genEduSubCategory,f=d?bx[d]:u,g=A(r.id);return a.jsxs("div",{className:"group/card relative bg-surface hover:bg-surface/80 transition-colors p-3 rounded-lg border border-gray-600 shadow-sm mb-2",children:[a.jsxs("div",{className:"flex justify-between items-start mb-1 gap-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold text-foreground text-sm line-clamp-2",children:r.name}),r.teacher&&a.jsx("p",{className:"text-xs text-muted/80 line-clamp-1",children:r.teacher})]}),a.jsx("div",{className:"flex flex-col items-end gap-1 flex-shrink-0",children:a.jsxs("span",{className:`text-xs font-bold px-1.5 py-0.5 rounded ${r.isWithdrawn||["D","E","F","Fail","FAIL"].includes(r.grade||"")?"bg-red-500/10 text-red-500 decoration-red-500 line-through":"text-muted bg-background"}`,children:[r.credits,s.courseList.cr]})})]}),a.jsx("div",{className:"flex flex-wrap gap-1 mt-1 mb-2",children:t&&g.map(x=>a.jsx("span",{className:"text-[10px] text-white px-2 py-0.5 rounded-full font-bold shadow-sm backdrop-blur-[2px]",style:{backgroundColor:`${x.color}99`},children:x.text},x.text))}),a.jsxs("div",{className:"flex justify-between items-end mt-2",children:[a.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.jsx("span",{className:`text-[10px] uppercase font-bold px-1.5 py-0.5 rounded ${f}`,children:r.category==="General Education"?s.categories[d]||d||"GenEdu":(s.categories[r.category]||r.category).replace("Major ","")}),r.isEMI&&!r.isExemption&&r.genEduSubCategory!=="Primer"&&a.jsx("span",{className:"text-[10px] font-bold px-1.5 py-0.5 rounded bg-warning text-black",children:"EMI"}),r.isExemption&&a.jsx("span",{className:"text-[10px] font-bold px-1.5 py-0.5 rounded bg-gray-500 text-white",children:s.form.isExemption})]}),a.jsxs("div",{className:"flex gap-1 opacity-0 group-hover/card:opacity-100 transition-all",children:[t&&a.jsx("button",{onClick:()=>t(r),className:"text-muted hover:text-primary p-1 hover:bg-surface/50 rounded",title:"Labels",children:a.jsx(J2,{size:14})}),a.jsx("button",{onClick:()=>e(r),className:"text-muted hover:text-primary p-1 hover:bg-surface/50 rounded",title:"Edit",children:a.jsx(O0,{size:14})})]})]})]})},_k=({semester:r,courses:e,onEdit:t,onViewSchedule:s,onLabelClick:A,onFixData:l})=>{const{t:u}=At(),d=f=>{if(u.semesters[f])return u.semesters[f];const g=f.split(" ");if(g.length>=2&&g[0]==="Year"){const x=g[1],y=g.slice(2).join(" ");if(u.semesters["Year 1 Sem 1"].includes("")){const N=["","","","","","","",""][parseInt(x)-1]||x;if(y==="Summer")return`${N} ${u.catalog.summer}`;if(y==="Sem 1")return`${N} `;if(y==="Sem 2")return`${N} `}else{if(y==="Sem 1")return`Year ${x} Fall Semester`;if(y==="Sem 2")return`Year ${x} Spring Semester`;if(y==="Summer")return`Year ${x} Summer`}}return f.replace("Summer",u.catalog.summer)};return a.jsxs("div",{className:"w-80 flex-shrink-0 flex flex-col h-full",children:[a.jsxs("div",{className:"mb-3 px-1",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("h3",{className:"font-bold text-foreground",children:d(r)}),(()=>{const f=Z2(e);return f?a.jsxs("span",{className:"text-xs font-bold text-primary bg-primary/10 px-2 py-1 rounded",children:["GPA ",eN(f.gpa)]}):null})()]}),a.jsx("button",{id:r==="Year 1 Sem 1"?"schedule-grade-btn":void 0,onClick:s,className:"w-full text-xs bg-surface hover:bg-primary hover:text-white text-muted px-3 py-2 rounded-lg transition-colors border border-gray-600 hover:border-primary font-medium flex items-center justify-center gap-2",children:u.courseList.schedule}),l&&e.some(f=>f.isExemption||f.category==="University Way"||f.category==="General Education"&&(f.genEduSubCategory==="Primer"||f.genEduSubCategory==="Service")||f.userLabels?.includes("manual")||!f.name.includes(`
`)&&!/[\u4e00-\u9fa5]/.test(f.name)||(f.fixAttempts||0)>=2?!1:!f.originalId||!f.originalSemester||!f.department)&&a.jsxs("button",{onClick:()=>l(r),className:"w-full mt-2 text-xs bg-red-50 hover:bg-red-100 text-red-600 px-3 py-2 rounded-lg transition-colors border border-red-200 hover:border-red-300 font-medium flex items-center justify-center gap-2",children:[a.jsx(xx,{size:12}),u.app.fixData||"Fix Data"]})]}),a.jsxs("div",{className:"flex-1 rounded-xl p-3 border-2 transition-colors min-h-[150px] bg-background border-gray-600/30 flex flex-col",children:[e.length===0&&a.jsx("div",{className:"h-full flex items-center justify-center text-slate-600 text-sm italic",children:u.courseList.noCourses}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:e.map(f=>a.jsx(Sk,{course:f,onEdit:t,onLabelClick:A},f.id))})]})]})},jk=k.memo(({semesters:r,courses:e,onEdit:t,onViewSchedule:s,onLabelClick:A,onFixData:l})=>{const u=k.useRef(null);k.useEffect(()=>{const g=localStorage.getItem("nsysu-tracker-scroll");g&&u.current&&r.length>0&&setTimeout(()=>{u.current&&(u.current.scrollLeft=Number(g))},0)},[r.length]);const d=()=>{u.current&&localStorage.setItem("nsysu-tracker-scroll",u.current.scrollLeft.toString())},f=g=>{u.current&&u.current.scrollBy({left:g,behavior:"smooth"})};return a.jsxs("div",{className:"relative group",children:[a.jsx("button",{onClick:()=>f(-300),className:"absolute -left-12 top-1/2 -translate-y-1/2 z-10 bg-surface border border-border p-2 rounded-full text-foreground shadow-lg hover:bg-primary hover:border-primary hover:text-white transition-all shadow-black/10 opacity-0 group-hover:opacity-100",title:"Scroll Left",children:a.jsx(RD,{})}),a.jsx("div",{ref:u,onScroll:d,className:"flex gap-4 overflow-x-auto pb-4 px-1 snap-x custom-scrollbar",children:r.map(g=>a.jsx("div",{className:"snap-start h-full",children:a.jsx(_k,{semester:g,courses:e.filter(x=>x.semester===g),onEdit:t,onViewSchedule:()=>s(g),onFixData:l,onLabelClick:A})},g))}),a.jsx("button",{onClick:()=>f(300),className:"absolute -right-12 top-1/2 -translate-y-1/2 z-10 bg-surface border border-border p-2 rounded-full text-foreground shadow-lg hover:bg-primary hover:border-primary hover:text-white transition-all shadow-black/10 opacity-0 group-hover:opacity-100",title:"Scroll Right",children:a.jsx(q2,{})})]})});var Wt=E1();var wx=function(r,e){return wx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var A in s)Object.prototype.hasOwnProperty.call(s,A)&&(t[A]=s[A])},wx(r,e)};function Un(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");wx(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Bx=function(){return Bx=Object.assign||function(e){for(var t,s=1,A=arguments.length;s<A;s++){t=arguments[s];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},Bx.apply(this,arguments)};function xs(r,e,t,s){function A(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function d(x){try{g(s.next(x))}catch(y){u(y)}}function f(x){try{g(s.throw(x))}catch(y){u(y)}}function g(x){x.done?l(x.value):A(x.value).then(d,f)}g((s=s.apply(r,[])).next())})}function ns(r,e){var t={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,A,l,u;return u={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function d(g){return function(x){return f([g,x])}}function f(g){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,A&&(l=g[0]&2?A.return:g[0]?A.throw||((l=A.return)&&l.call(A),0):A.next)&&!(l=l.call(A,g[1])).done)return l;switch(A=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,A=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(l=t.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){t.label=g[1];break}if(g[0]===6&&t.label<l[1]){t.label=l[1],l=g;break}if(l&&t.label<l[2]){t.label=l[2],t.ops.push(g);break}l[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(r,t)}catch(x){g=[6,x],A=0}finally{s=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}function $d(r,e,t){if(arguments.length===2)for(var s=0,A=e.length,l;s<A;s++)(l||!(s in e))&&(l||(l=Array.prototype.slice.call(e,0,s)),l[s]=e[s]);return r.concat(l||e)}var Ma=(function(){function r(e,t,s,A){this.left=e,this.top=t,this.width=s,this.height=A}return r.prototype.add=function(e,t,s,A){return new r(this.left+e,this.top+t,this.width+s,this.height+A)},r.fromClientRect=function(e,t){return new r(t.left+e.windowBounds.left,t.top+e.windowBounds.top,t.width,t.height)},r.fromDOMRectList=function(e,t){var s=Array.from(t).find(function(A){return A.width!==0});return s?new r(s.left+e.windowBounds.left,s.top+e.windowBounds.top,s.width,s.height):r.EMPTY},r.EMPTY=new r(0,0,0,0),r})(),Rf=function(r,e){return Ma.fromClientRect(r,e.getBoundingClientRect())},Tk=function(r){var e=r.body,t=r.documentElement;if(!e||!t)throw new Error("Unable to get document size");var s=Math.max(Math.max(e.scrollWidth,t.scrollWidth),Math.max(e.offsetWidth,t.offsetWidth),Math.max(e.clientWidth,t.clientWidth)),A=Math.max(Math.max(e.scrollHeight,t.scrollHeight),Math.max(e.offsetHeight,t.offsetHeight),Math.max(e.clientHeight,t.clientHeight));return new Ma(0,0,s,A)},Mf=function(r){for(var e=[],t=0,s=r.length;t<s;){var A=r.charCodeAt(t++);if(A>=55296&&A<=56319&&t<s){var l=r.charCodeAt(t++);(l&64512)===56320?e.push(((A&1023)<<10)+(l&1023)+65536):(e.push(A),t--)}else e.push(A)}return e},xr=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,r);var t=r.length;if(!t)return"";for(var s=[],A=-1,l="";++A<t;){var u=r[A];u<=65535?s.push(u):(u-=65536,s.push((u>>10)+55296,u%1024+56320)),(A+1===t||s.length>16384)&&(l+=String.fromCharCode.apply(String,s),s.length=0)}return l},fC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Uk=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Xd=0;Xd<fC.length;Xd++)Uk[fC.charCodeAt(Xd)]=Xd;var mC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Nc=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Jd=0;Jd<mC.length;Jd++)Nc[mC.charCodeAt(Jd)]=Jd;var Qk=function(r){var e=r.length*.75,t=r.length,s,A=0,l,u,d,f;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);var g=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),x=Array.isArray(g)?g:new Uint8Array(g);for(s=0;s<t;s+=4)l=Nc[r.charCodeAt(s)],u=Nc[r.charCodeAt(s+1)],d=Nc[r.charCodeAt(s+2)],f=Nc[r.charCodeAt(s+3)],x[A++]=l<<2|u>>4,x[A++]=(u&15)<<4|d>>2,x[A++]=(d&3)<<6|f&63;return g},Fk=function(r){for(var e=r.length,t=[],s=0;s<e;s+=2)t.push(r[s+1]<<8|r[s]);return t},Ik=function(r){for(var e=r.length,t=[],s=0;s<e;s+=4)t.push(r[s+3]<<24|r[s+2]<<16|r[s+1]<<8|r[s]);return t},jA=5,z0=11,Ap=2,Dk=z0-jA,nN=65536>>jA,kk=1<<jA,op=kk-1,Rk=1024>>jA,Mk=nN+Rk,Lk=Mk,Hk=32,Ok=Lk+Hk,Pk=65536>>z0,Vk=1<<Dk,zk=Vk-1,gC=function(r,e,t){return r.slice?r.slice(e,t):new Uint16Array(Array.prototype.slice.call(r,e,t))},Kk=function(r,e,t){return r.slice?r.slice(e,t):new Uint32Array(Array.prototype.slice.call(r,e,t))},Gk=function(r,e){var t=Qk(r),s=Array.isArray(t)?Ik(t):new Uint32Array(t),A=Array.isArray(t)?Fk(t):new Uint16Array(t),l=24,u=gC(A,l/2,s[4]/2),d=s[5]===2?gC(A,(l+s[4])/2):Kk(s,Math.ceil((l+s[4])/4));return new qk(s[0],s[1],s[2],s[3],u,d)},qk=(function(){function r(e,t,s,A,l,u){this.initialValue=e,this.errorValue=t,this.highStart=s,this.highValueIndex=A,this.index=l,this.data=u}return r.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>jA],t=(t<<Ap)+(e&op),this.data[t];if(e<=65535)return t=this.index[nN+(e-55296>>jA)],t=(t<<Ap)+(e&op),this.data[t];if(e<this.highStart)return t=Ok-Pk+(e>>z0),t=this.index[t],t+=e>>jA&zk,t=this.index[t],t=(t<<Ap)+(e&op),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},r})(),pC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Yk=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Wd=0;Wd<pC.length;Wd++)Yk[pC.charCodeAt(Wd)]=Wd;var $k="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",xC=50,Xk=1,aN=2,iN=3,Jk=4,Wk=5,yC=7,AN=8,bC=9,Si=10,Cx=11,vC=12,Ex=13,Zk=14,Sc=15,Nx=16,Zd=17,gc=18,eR=19,wC=20,Sx=21,pc=22,lp=23,Uo=24,zs=25,_c=26,jc=27,Qo=28,tR=29,wA=30,rR=31,eh=32,th=33,_x=34,jx=35,Tx=36,su=37,Ux=38,Fh=39,Ih=40,cp=41,oN=42,sR=43,nR=[9001,65288],lN="!",ft="",rh="",Qx=Gk($k),ja=[wA,Tx],Fx=[Xk,aN,iN,Wk],cN=[Si,AN],BC=[jc,_c],aR=Fx.concat(cN),CC=[Ux,Fh,Ih,_x,jx],iR=[Sc,Ex],AR=function(r,e){e===void 0&&(e="strict");var t=[],s=[],A=[];return r.forEach(function(l,u){var d=Qx.get(l);if(d>xC?(A.push(!0),d-=xC):A.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(l)!==-1)return s.push(u),t.push(Nx);if(d===Jk||d===Cx){if(u===0)return s.push(u),t.push(wA);var f=t[u-1];return aR.indexOf(f)===-1?(s.push(s[u-1]),t.push(f)):(s.push(u),t.push(wA))}if(s.push(u),d===rR)return t.push(e==="strict"?Sx:su);if(d===oN||d===tR)return t.push(wA);if(d===sR)return l>=131072&&l<=196605||l>=196608&&l<=262141?t.push(su):t.push(wA);t.push(d)}),[s,t,A]},up=function(r,e,t,s){var A=s[t];if(Array.isArray(r)?r.indexOf(A)!==-1:r===A)for(var l=t;l<=s.length;){l++;var u=s[l];if(u===e)return!0;if(u!==Si)break}if(A===Si)for(var l=t;l>0;){l--;var d=s[l];if(Array.isArray(r)?r.indexOf(d)!==-1:r===d)for(var f=t;f<=s.length;){f++;var u=s[f];if(u===e)return!0;if(u!==Si)break}if(d!==Si)break}return!1},EC=function(r,e){for(var t=r;t>=0;){var s=e[t];if(s===Si)t--;else return s}return 0},oR=function(r,e,t,s,A){if(t[s]===0)return ft;var l=s-1;if(Array.isArray(A)&&A[l]===!0)return ft;var u=l-1,d=l+1,f=e[l],g=u>=0?e[u]:0,x=e[d];if(f===aN&&x===iN)return ft;if(Fx.indexOf(f)!==-1)return lN;if(Fx.indexOf(x)!==-1||cN.indexOf(x)!==-1)return ft;if(EC(l,e)===AN)return rh;if(Qx.get(r[l])===Cx||(f===eh||f===th)&&Qx.get(r[d])===Cx||f===yC||x===yC||f===bC||[Si,Ex,Sc].indexOf(f)===-1&&x===bC||[Zd,gc,eR,Uo,Qo].indexOf(x)!==-1||EC(l,e)===pc||up(lp,pc,l,e)||up([Zd,gc],Sx,l,e)||up(vC,vC,l,e))return ft;if(f===Si)return rh;if(f===lp||x===lp)return ft;if(x===Nx||f===Nx)return rh;if([Ex,Sc,Sx].indexOf(x)!==-1||f===Zk||g===Tx&&iR.indexOf(f)!==-1||f===Qo&&x===Tx||x===wC||ja.indexOf(x)!==-1&&f===zs||ja.indexOf(f)!==-1&&x===zs||f===jc&&[su,eh,th].indexOf(x)!==-1||[su,eh,th].indexOf(f)!==-1&&x===_c||ja.indexOf(f)!==-1&&BC.indexOf(x)!==-1||BC.indexOf(f)!==-1&&ja.indexOf(x)!==-1||[jc,_c].indexOf(f)!==-1&&(x===zs||[pc,Sc].indexOf(x)!==-1&&e[d+1]===zs)||[pc,Sc].indexOf(f)!==-1&&x===zs||f===zs&&[zs,Qo,Uo].indexOf(x)!==-1)return ft;if([zs,Qo,Uo,Zd,gc].indexOf(x)!==-1)for(var y=l;y>=0;){var v=e[y];if(v===zs)return ft;if([Qo,Uo].indexOf(v)!==-1)y--;else break}if([jc,_c].indexOf(x)!==-1)for(var y=[Zd,gc].indexOf(f)!==-1?u:l;y>=0;){var v=e[y];if(v===zs)return ft;if([Qo,Uo].indexOf(v)!==-1)y--;else break}if(Ux===f&&[Ux,Fh,_x,jx].indexOf(x)!==-1||[Fh,_x].indexOf(f)!==-1&&[Fh,Ih].indexOf(x)!==-1||[Ih,jx].indexOf(f)!==-1&&x===Ih||CC.indexOf(f)!==-1&&[wC,_c].indexOf(x)!==-1||CC.indexOf(x)!==-1&&f===jc||ja.indexOf(f)!==-1&&ja.indexOf(x)!==-1||f===Uo&&ja.indexOf(x)!==-1||ja.concat(zs).indexOf(f)!==-1&&x===pc&&nR.indexOf(r[d])===-1||ja.concat(zs).indexOf(x)!==-1&&f===gc)return ft;if(f===cp&&x===cp){for(var N=t[l],M=1;N>0&&(N--,e[N]===cp);)M++;if(M%2!==0)return ft}return f===eh&&x===th?ft:rh},lR=function(r,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var t=AR(r,e.lineBreak),s=t[0],A=t[1],l=t[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(A=A.map(function(d){return[zs,wA,oN].indexOf(d)!==-1?su:d}));var u=e.wordBreak==="keep-all"?l.map(function(d,f){return d&&r[f]>=19968&&r[f]<=40959}):void 0;return[s,A,u]},cR=(function(){function r(e,t,s,A){this.codePoints=e,this.required=t===lN,this.start=s,this.end=A}return r.prototype.slice=function(){return xr.apply(void 0,this.codePoints.slice(this.start,this.end))},r})(),uR=function(r,e){var t=Mf(r),s=lR(t,e),A=s[0],l=s[1],u=s[2],d=t.length,f=0,g=0;return{next:function(){if(g>=d)return{done:!0,value:null};for(var x=ft;g<d&&(x=oR(t,l,A,++g,u))===ft;);if(x!==ft||g===d){var y=new cR(t,x,f,g);return f=g,{value:y,done:!1}}return{done:!0,value:null}}}},dR=1,hR=2,yu=4,NC=8,nf=10,SC=47,Pc=92,fR=9,mR=32,sh=34,xc=61,gR=35,pR=36,xR=37,nh=39,ah=40,yc=41,yR=95,js=45,bR=33,vR=60,wR=62,BR=64,CR=91,ER=93,NR=61,SR=123,ih=63,_R=125,_C=124,jR=126,TR=128,jC=65533,dp=42,NA=43,UR=44,QR=58,FR=59,nu=46,IR=0,DR=8,kR=11,RR=14,MR=31,LR=127,Gn=-1,uN=48,dN=97,hN=101,HR=102,OR=117,PR=122,fN=65,mN=69,gN=70,VR=85,zR=90,is=function(r){return r>=uN&&r<=57},KR=function(r){return r>=55296&&r<=57343},Fo=function(r){return is(r)||r>=fN&&r<=gN||r>=dN&&r<=HR},GR=function(r){return r>=dN&&r<=PR},qR=function(r){return r>=fN&&r<=zR},YR=function(r){return GR(r)||qR(r)},$R=function(r){return r>=TR},Ah=function(r){return r===nf||r===fR||r===mR},af=function(r){return YR(r)||$R(r)||r===yR},TC=function(r){return af(r)||is(r)||r===js},XR=function(r){return r>=IR&&r<=DR||r===kR||r>=RR&&r<=MR||r===LR},wi=function(r,e){return r!==Pc?!1:e!==nf},oh=function(r,e,t){return r===js?af(e)||wi(e,t):af(r)?!0:!!(r===Pc&&wi(r,e))},hp=function(r,e,t){return r===NA||r===js?is(e)?!0:e===nu&&is(t):is(r===nu?e:r)},JR=function(r){var e=0,t=1;(r[e]===NA||r[e]===js)&&(r[e]===js&&(t=-1),e++);for(var s=[];is(r[e]);)s.push(r[e++]);var A=s.length?parseInt(xr.apply(void 0,s),10):0;r[e]===nu&&e++;for(var l=[];is(r[e]);)l.push(r[e++]);var u=l.length,d=u?parseInt(xr.apply(void 0,l),10):0;(r[e]===mN||r[e]===hN)&&e++;var f=1;(r[e]===NA||r[e]===js)&&(r[e]===js&&(f=-1),e++);for(var g=[];is(r[e]);)g.push(r[e++]);var x=g.length?parseInt(xr.apply(void 0,g),10):0;return t*(A+d*Math.pow(10,-u))*Math.pow(10,f*x)},WR={type:2},ZR={type:3},e3={type:4},t3={type:13},r3={type:8},s3={type:21},n3={type:9},a3={type:10},i3={type:11},A3={type:12},o3={type:14},lh={type:23},l3={type:1},c3={type:25},u3={type:24},d3={type:26},h3={type:27},f3={type:28},m3={type:29},g3={type:31},Ix={type:32},pN=(function(){function r(){this._value=[]}return r.prototype.write=function(e){this._value=this._value.concat(Mf(e))},r.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==Ix;)e.push(t),t=this.consumeToken();return e},r.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case sh:return this.consumeStringToken(sh);case gR:var t=this.peekCodePoint(0),s=this.peekCodePoint(1),A=this.peekCodePoint(2);if(TC(t)||wi(s,A)){var l=oh(t,s,A)?hR:dR,u=this.consumeName();return{type:5,value:u,flags:l}}break;case pR:if(this.peekCodePoint(0)===xc)return this.consumeCodePoint(),t3;break;case nh:return this.consumeStringToken(nh);case ah:return WR;case yc:return ZR;case dp:if(this.peekCodePoint(0)===xc)return this.consumeCodePoint(),o3;break;case NA:if(hp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case UR:return e3;case js:var d=e,f=this.peekCodePoint(0),g=this.peekCodePoint(1);if(hp(d,f,g))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(oh(d,f,g))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(f===js&&g===wR)return this.consumeCodePoint(),this.consumeCodePoint(),u3;break;case nu:if(hp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case SC:if(this.peekCodePoint(0)===dp)for(this.consumeCodePoint();;){var x=this.consumeCodePoint();if(x===dp&&(x=this.consumeCodePoint(),x===SC))return this.consumeToken();if(x===Gn)return this.consumeToken()}break;case QR:return d3;case FR:return h3;case vR:if(this.peekCodePoint(0)===bR&&this.peekCodePoint(1)===js&&this.peekCodePoint(2)===js)return this.consumeCodePoint(),this.consumeCodePoint(),c3;break;case BR:var y=this.peekCodePoint(0),v=this.peekCodePoint(1),N=this.peekCodePoint(2);if(oh(y,v,N)){var u=this.consumeName();return{type:7,value:u}}break;case CR:return f3;case Pc:if(wi(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case ER:return m3;case NR:if(this.peekCodePoint(0)===xc)return this.consumeCodePoint(),r3;break;case SR:return i3;case _R:return A3;case OR:case VR:var M=this.peekCodePoint(0),S=this.peekCodePoint(1);return M===NA&&(Fo(S)||S===ih)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case _C:if(this.peekCodePoint(0)===xc)return this.consumeCodePoint(),n3;if(this.peekCodePoint(0)===_C)return this.consumeCodePoint(),s3;break;case jR:if(this.peekCodePoint(0)===xc)return this.consumeCodePoint(),a3;break;case Gn:return Ix}return Ah(e)?(this.consumeWhiteSpace(),g3):is(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):af(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:xr(e)}},r.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},r.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},r.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},r.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();Fo(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var s=!1;t===ih&&e.length<6;)e.push(t),t=this.consumeCodePoint(),s=!0;if(s){var A=parseInt(xr.apply(void 0,e.map(function(f){return f===ih?uN:f})),16),l=parseInt(xr.apply(void 0,e.map(function(f){return f===ih?gN:f})),16);return{type:30,start:A,end:l}}var u=parseInt(xr.apply(void 0,e),16);if(this.peekCodePoint(0)===js&&Fo(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var d=[];Fo(t)&&d.length<6;)d.push(t),t=this.consumeCodePoint();var l=parseInt(xr.apply(void 0,d),16);return{type:30,start:u,end:l}}else return{type:30,start:u,end:u}},r.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===ah?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===ah?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},r.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Gn)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===nh||t===sh){var s=this.consumeStringToken(this.consumeCodePoint());return s.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Gn||this.peekCodePoint(0)===yc)?(this.consumeCodePoint(),{type:22,value:s.value}):(this.consumeBadUrlRemnants(),lh)}for(;;){var A=this.consumeCodePoint();if(A===Gn||A===yc)return{type:22,value:xr.apply(void 0,e)};if(Ah(A))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Gn||this.peekCodePoint(0)===yc?(this.consumeCodePoint(),{type:22,value:xr.apply(void 0,e)}):(this.consumeBadUrlRemnants(),lh);if(A===sh||A===nh||A===ah||XR(A))return this.consumeBadUrlRemnants(),lh;if(A===Pc)if(wi(A,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),lh;else e.push(A)}},r.prototype.consumeWhiteSpace=function(){for(;Ah(this.peekCodePoint(0));)this.consumeCodePoint()},r.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===yc||e===Gn)return;wi(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},r.prototype.consumeStringSlice=function(e){for(var t=5e4,s="";e>0;){var A=Math.min(t,e);s+=xr.apply(void 0,this._value.splice(0,A)),e-=A}return this._value.shift(),s},r.prototype.consumeStringToken=function(e){var t="",s=0;do{var A=this._value[s];if(A===Gn||A===void 0||A===e)return t+=this.consumeStringSlice(s),{type:0,value:t};if(A===nf)return this._value.splice(0,s),l3;if(A===Pc){var l=this._value[s+1];l!==Gn&&l!==void 0&&(l===nf?(t+=this.consumeStringSlice(s),s=-1,this._value.shift()):wi(A,l)&&(t+=this.consumeStringSlice(s),t+=xr(this.consumeEscapedCodePoint()),s=-1))}s++}while(!0)},r.prototype.consumeNumber=function(){var e=[],t=yu,s=this.peekCodePoint(0);for((s===NA||s===js)&&e.push(this.consumeCodePoint());is(this.peekCodePoint(0));)e.push(this.consumeCodePoint());s=this.peekCodePoint(0);var A=this.peekCodePoint(1);if(s===nu&&is(A))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=NC;is(this.peekCodePoint(0));)e.push(this.consumeCodePoint());s=this.peekCodePoint(0),A=this.peekCodePoint(1);var l=this.peekCodePoint(2);if((s===mN||s===hN)&&((A===NA||A===js)&&is(l)||is(A)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=NC;is(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[JR(e),t]},r.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],s=e[1],A=this.peekCodePoint(0),l=this.peekCodePoint(1),u=this.peekCodePoint(2);if(oh(A,l,u)){var d=this.consumeName();return{type:15,number:t,flags:s,unit:d}}return A===xR?(this.consumeCodePoint(),{type:16,number:t,flags:s}):{type:17,number:t,flags:s}},r.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Fo(e)){for(var t=xr(e);Fo(this.peekCodePoint(0))&&t.length<6;)t+=xr(this.consumeCodePoint());Ah(this.peekCodePoint(0))&&this.consumeCodePoint();var s=parseInt(t,16);return s===0||KR(s)||s>1114111?jC:s}return e===Gn?jC:e},r.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(TC(t))e+=xr(t);else if(wi(t,this.peekCodePoint(0)))e+=xr(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(t),e}},r})(),xN=(function(){function r(e){this._tokens=e}return r.create=function(e){var t=new pN;return t.write(e),new r(t.read())},r.parseValue=function(e){return r.create(e).parseComponentValue()},r.parseValues=function(e){return r.create(e).parseComponentValues()},r.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},r.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(t.type===32)return e;e.push(t),e.push()}},r.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},r.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},s=this.consumeToken();;){if(s.type===32||x3(s,e))return t;this.reconsumeToken(s),t.values.push(this.consumeComponentValue()),s=this.consumeToken()}},r.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var s=this.consumeToken();if(s.type===32||s.type===3)return t;this.reconsumeToken(s),t.values.push(this.consumeComponentValue())}},r.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?Ix:e},r.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},r})(),bu=function(r){return r.type===15},pl=function(r){return r.type===17},Lt=function(r){return r.type===20},p3=function(r){return r.type===0},Dx=function(r,e){return Lt(r)&&r.value===e},yN=function(r){return r.type!==31},ll=function(r){return r.type!==31&&r.type!==4},ia=function(r){var e=[],t=[];return r.forEach(function(s){if(s.type===4){if(t.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(t),t=[];return}s.type!==31&&t.push(s)}),t.length&&e.push(t),e},x3=function(r,e){return e===11&&r.type===12||e===28&&r.type===29?!0:e===2&&r.type===3},Ki=function(r){return r.type===17||r.type===15},Sr=function(r){return r.type===16||Ki(r)},bN=function(r){return r.length>1?[r[0],r[1]]:[r[0]]},Wr={type:17,number:0,flags:yu},K0={type:16,number:50,flags:yu},_i={type:16,number:100,flags:yu},Tc=function(r,e,t){var s=r[0],A=r[1];return[Kt(s,e),Kt(typeof A<"u"?A:s,t)]},Kt=function(r,e){if(r.type===16)return r.number/100*e;if(bu(r))switch(r.unit){case"rem":case"em":return 16*r.number;default:return r.number}return r.number},vN="deg",wN="grad",BN="rad",CN="turn",Lf={name:"angle",parse:function(r,e){if(e.type===15)switch(e.unit){case vN:return Math.PI*e.number/180;case wN:return Math.PI/200*e.number;case BN:return e.number;case CN:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},EN=function(r){return r.type===15&&(r.unit===vN||r.unit===wN||r.unit===BN||r.unit===CN)},NN=function(r){var e=r.filter(Lt).map(function(t){return t.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Wr,Wr];case"to top":case"bottom":return un(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Wr,_i];case"to right":case"left":return un(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[_i,_i];case"to bottom":case"top":return un(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[_i,Wr];case"to left":case"right":return un(270)}return 0},un=function(r){return Math.PI*r/180},ki={name:"color",parse:function(r,e){if(e.type===18){var t=y3[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return t(r,e.values)}if(e.type===5){if(e.value.length===3){var s=e.value.substring(0,1),A=e.value.substring(1,2),l=e.value.substring(2,3);return ji(parseInt(s+s,16),parseInt(A+A,16),parseInt(l+l,16),1)}if(e.value.length===4){var s=e.value.substring(0,1),A=e.value.substring(1,2),l=e.value.substring(2,3),u=e.value.substring(3,4);return ji(parseInt(s+s,16),parseInt(A+A,16),parseInt(l+l,16),parseInt(u+u,16)/255)}if(e.value.length===6){var s=e.value.substring(0,2),A=e.value.substring(2,4),l=e.value.substring(4,6);return ji(parseInt(s,16),parseInt(A,16),parseInt(l,16),1)}if(e.value.length===8){var s=e.value.substring(0,2),A=e.value.substring(2,4),l=e.value.substring(4,6),u=e.value.substring(6,8);return ji(parseInt(s,16),parseInt(A,16),parseInt(l,16),parseInt(u,16)/255)}}if(e.type===20){var d=Fa[e.value.toUpperCase()];if(typeof d<"u")return d}return Fa.TRANSPARENT}},Ri=function(r){return(255&r)===0},Lr=function(r){var e=255&r,t=255&r>>8,s=255&r>>16,A=255&r>>24;return e<255?"rgba("+A+","+s+","+t+","+e/255+")":"rgb("+A+","+s+","+t+")"},ji=function(r,e,t,s){return(r<<24|e<<16|t<<8|Math.round(s*255)<<0)>>>0},UC=function(r,e){if(r.type===17)return r.number;if(r.type===16){var t=e===3?1:255;return e===3?r.number/100*t:Math.round(r.number/100*t)}return 0},QC=function(r,e){var t=e.filter(ll);if(t.length===3){var s=t.map(UC),A=s[0],l=s[1],u=s[2];return ji(A,l,u,1)}if(t.length===4){var d=t.map(UC),A=d[0],l=d[1],u=d[2],f=d[3];return ji(A,l,u,f)}return 0};function fp(r,e,t){return t<0&&(t+=1),t>=1&&(t-=1),t<1/6?(e-r)*t*6+r:t<1/2?e:t<2/3?(e-r)*6*(2/3-t)+r:r}var FC=function(r,e){var t=e.filter(ll),s=t[0],A=t[1],l=t[2],u=t[3],d=(s.type===17?un(s.number):Lf.parse(r,s))/(Math.PI*2),f=Sr(A)?A.number/100:0,g=Sr(l)?l.number/100:0,x=typeof u<"u"&&Sr(u)?Kt(u,1):1;if(f===0)return ji(g*255,g*255,g*255,1);var y=g<=.5?g*(f+1):g+f-g*f,v=g*2-y,N=fp(v,y,d+1/3),M=fp(v,y,d),S=fp(v,y,d-1/3);return ji(N*255,M*255,S*255,x)},y3={hsl:FC,hsla:FC,rgb:QC,rgba:QC},Vc=function(r,e){return ki.parse(r,xN.create(e).parseComponentValue())},Fa={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},b3={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(r,e){return e.map(function(t){if(Lt(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},v3={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Hf=function(r,e){var t=ki.parse(r,e[0]),s=e[1];return s&&Sr(s)?{color:t,stop:s}:{color:t,stop:null}},IC=function(r,e){var t=r[0],s=r[r.length-1];t.stop===null&&(t.stop=Wr),s.stop===null&&(s.stop=_i);for(var A=[],l=0,u=0;u<r.length;u++){var d=r[u].stop;if(d!==null){var f=Kt(d,e);f>l?A.push(f):A.push(l),l=f}else A.push(null)}for(var g=null,u=0;u<A.length;u++){var x=A[u];if(x===null)g===null&&(g=u);else if(g!==null){for(var y=u-g,v=A[g-1],N=(x-v)/(y+1),M=1;M<=y;M++)A[g+M-1]=N*M;g=null}}return r.map(function(S,V){var K=S.color;return{color:K,stop:Math.max(Math.min(1,A[V]/e),0)}})},w3=function(r,e,t){var s=e/2,A=t/2,l=Kt(r[0],e)-s,u=A-Kt(r[1],t);return(Math.atan2(u,l)+Math.PI*2)%(Math.PI*2)},B3=function(r,e,t){var s=typeof r=="number"?r:w3(r,e,t),A=Math.abs(e*Math.sin(s))+Math.abs(t*Math.cos(s)),l=e/2,u=t/2,d=A/2,f=Math.sin(s-Math.PI/2)*d,g=Math.cos(s-Math.PI/2)*d;return[A,l-g,l+g,u-f,u+f]},Bn=function(r,e){return Math.sqrt(r*r+e*e)},DC=function(r,e,t,s,A){var l=[[0,0],[0,e],[r,0],[r,e]];return l.reduce(function(u,d){var f=d[0],g=d[1],x=Bn(t-f,s-g);return(A?x<u.optimumDistance:x>u.optimumDistance)?{optimumCorner:d,optimumDistance:x}:u},{optimumDistance:A?1/0:-1/0,optimumCorner:null}).optimumCorner},C3=function(r,e,t,s,A){var l=0,u=0;switch(r.size){case 0:r.shape===0?l=u=Math.min(Math.abs(e),Math.abs(e-s),Math.abs(t),Math.abs(t-A)):r.shape===1&&(l=Math.min(Math.abs(e),Math.abs(e-s)),u=Math.min(Math.abs(t),Math.abs(t-A)));break;case 2:if(r.shape===0)l=u=Math.min(Bn(e,t),Bn(e,t-A),Bn(e-s,t),Bn(e-s,t-A));else if(r.shape===1){var d=Math.min(Math.abs(t),Math.abs(t-A))/Math.min(Math.abs(e),Math.abs(e-s)),f=DC(s,A,e,t,!0),g=f[0],x=f[1];l=Bn(g-e,(x-t)/d),u=d*l}break;case 1:r.shape===0?l=u=Math.max(Math.abs(e),Math.abs(e-s),Math.abs(t),Math.abs(t-A)):r.shape===1&&(l=Math.max(Math.abs(e),Math.abs(e-s)),u=Math.max(Math.abs(t),Math.abs(t-A)));break;case 3:if(r.shape===0)l=u=Math.max(Bn(e,t),Bn(e,t-A),Bn(e-s,t),Bn(e-s,t-A));else if(r.shape===1){var d=Math.max(Math.abs(t),Math.abs(t-A))/Math.max(Math.abs(e),Math.abs(e-s)),y=DC(s,A,e,t,!1),g=y[0],x=y[1];l=Bn(g-e,(x-t)/d),u=d*l}break}return Array.isArray(r.size)&&(l=Kt(r.size[0],s),u=r.size.length===2?Kt(r.size[1],A):l),[l,u]},E3=function(r,e){var t=un(180),s=[];return ia(e).forEach(function(A,l){if(l===0){var u=A[0];if(u.type===20&&u.value==="to"){t=NN(A);return}else if(EN(u)){t=Lf.parse(r,u);return}}var d=Hf(r,A);s.push(d)}),{angle:t,stops:s,type:1}},ch=function(r,e){var t=un(180),s=[];return ia(e).forEach(function(A,l){if(l===0){var u=A[0];if(u.type===20&&["top","left","right","bottom"].indexOf(u.value)!==-1){t=NN(A);return}else if(EN(u)){t=(Lf.parse(r,u)+un(270))%un(360);return}}var d=Hf(r,A);s.push(d)}),{angle:t,stops:s,type:1}},N3=function(r,e){var t=un(180),s=[],A=1,l=0,u=3,d=[];return ia(e).forEach(function(f,g){var x=f[0];if(g===0){if(Lt(x)&&x.value==="linear"){A=1;return}else if(Lt(x)&&x.value==="radial"){A=2;return}}if(x.type===18){if(x.name==="from"){var y=ki.parse(r,x.values[0]);s.push({stop:Wr,color:y})}else if(x.name==="to"){var y=ki.parse(r,x.values[0]);s.push({stop:_i,color:y})}else if(x.name==="color-stop"){var v=x.values.filter(ll);if(v.length===2){var y=ki.parse(r,v[1]),N=v[0];pl(N)&&s.push({stop:{type:16,number:N.number*100,flags:N.flags},color:y})}}}}),A===1?{angle:(t+un(180))%un(360),stops:s,type:A}:{size:u,shape:l,stops:s,position:d,type:A}},SN="closest-side",_N="farthest-side",jN="closest-corner",TN="farthest-corner",UN="circle",QN="ellipse",FN="cover",IN="contain",S3=function(r,e){var t=0,s=3,A=[],l=[];return ia(e).forEach(function(u,d){var f=!0;if(d===0){var g=!1;f=u.reduce(function(y,v){if(g)if(Lt(v))switch(v.value){case"center":return l.push(K0),y;case"top":case"left":return l.push(Wr),y;case"right":case"bottom":return l.push(_i),y}else(Sr(v)||Ki(v))&&l.push(v);else if(Lt(v))switch(v.value){case UN:return t=0,!1;case QN:return t=1,!1;case"at":return g=!0,!1;case SN:return s=0,!1;case FN:case _N:return s=1,!1;case IN:case jN:return s=2,!1;case TN:return s=3,!1}else if(Ki(v)||Sr(v))return Array.isArray(s)||(s=[]),s.push(v),!1;return y},f)}if(f){var x=Hf(r,u);A.push(x)}}),{size:s,shape:t,stops:A,position:l,type:2}},uh=function(r,e){var t=0,s=3,A=[],l=[];return ia(e).forEach(function(u,d){var f=!0;if(d===0?f=u.reduce(function(x,y){if(Lt(y))switch(y.value){case"center":return l.push(K0),!1;case"top":case"left":return l.push(Wr),!1;case"right":case"bottom":return l.push(_i),!1}else if(Sr(y)||Ki(y))return l.push(y),!1;return x},f):d===1&&(f=u.reduce(function(x,y){if(Lt(y))switch(y.value){case UN:return t=0,!1;case QN:return t=1,!1;case IN:case SN:return s=0,!1;case _N:return s=1,!1;case jN:return s=2,!1;case FN:case TN:return s=3,!1}else if(Ki(y)||Sr(y))return Array.isArray(s)||(s=[]),s.push(y),!1;return x},f)),f){var g=Hf(r,u);A.push(g)}}),{size:s,shape:t,stops:A,position:l,type:2}},_3=function(r){return r.type===1},j3=function(r){return r.type===2},G0={name:"image",parse:function(r,e){if(e.type===22){var t={url:e.value,type:0};return r.cache.addImage(e.value),t}if(e.type===18){var s=DN[e.name];if(typeof s>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return s(r,e.values)}throw new Error("Unsupported image type "+e.type)}};function T3(r){return!(r.type===20&&r.value==="none")&&(r.type!==18||!!DN[r.name])}var DN={"linear-gradient":E3,"-moz-linear-gradient":ch,"-ms-linear-gradient":ch,"-o-linear-gradient":ch,"-webkit-linear-gradient":ch,"radial-gradient":S3,"-moz-radial-gradient":uh,"-ms-radial-gradient":uh,"-o-radial-gradient":uh,"-webkit-radial-gradient":uh,"-webkit-gradient":N3},U3={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(r,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e.filter(function(s){return ll(s)&&T3(s)}).map(function(s){return G0.parse(r,s)})}},Q3={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(r,e){return e.map(function(t){if(Lt(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},F3={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(r,e){return ia(e).map(function(t){return t.filter(Sr)}).map(bN)}},I3={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(r,e){return ia(e).map(function(t){return t.filter(Lt).map(function(s){return s.value}).join(" ")}).map(D3)}},D3=function(r){switch(r){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}},Zo;(function(r){r.AUTO="auto",r.CONTAIN="contain",r.COVER="cover"})(Zo||(Zo={}));var k3={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(r,e){return ia(e).map(function(t){return t.filter(R3)})}},R3=function(r){return Lt(r)||Sr(r)},Of=function(r){return{name:"border-"+r+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},M3=Of("top"),L3=Of("right"),H3=Of("bottom"),O3=Of("left"),Pf=function(r){return{name:"border-radius-"+r,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return bN(t.filter(Sr))}}},P3=Pf("top-left"),V3=Pf("top-right"),z3=Pf("bottom-right"),K3=Pf("bottom-left"),Vf=function(r){return{name:"border-"+r+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},G3=Vf("top"),q3=Vf("right"),Y3=Vf("bottom"),$3=Vf("left"),zf=function(r){return{name:"border-"+r+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return bu(t)?t.number:0}}},X3=zf("top"),J3=zf("right"),W3=zf("bottom"),Z3=zf("left"),eM={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},tM={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(r,e){return e==="rtl"?1:0}},rM={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(r,e){return e.filter(Lt).reduce(function(t,s){return t|sM(s.value)},0)}},sM=function(r){switch(r){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},nM={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},aM={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(r,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},Af;(function(r){r.NORMAL="normal",r.STRICT="strict"})(Af||(Af={}));var iM={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){return e==="strict"?Af.STRICT:Af.NORMAL}},AM={name:"line-height",initialValue:"normal",prefix:!1,type:4},kC=function(r,e){return Lt(r)&&r.value==="normal"?1.2*e:r.type===17?e*r.number:Sr(r)?Kt(r,e):e},oM={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(r,e){return e.type===20&&e.value==="none"?null:G0.parse(r,e)}},lM={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(r,e){return e==="inside"?0:1}},kx={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},Kf=function(r){return{name:"margin-"+r,initialValue:"0",prefix:!1,type:4}},cM=Kf("top"),uM=Kf("right"),dM=Kf("bottom"),hM=Kf("left"),fM={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(r,e){return e.filter(Lt).map(function(t){switch(t.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}})}},mM={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){return e==="break-word"?"break-word":"normal"}},Gf=function(r){return{name:"padding-"+r,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},gM=Gf("top"),pM=Gf("right"),xM=Gf("bottom"),yM=Gf("left"),bM={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(r,e){switch(e){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},vM={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(r,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},wM={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(r,e){return e.length===1&&Dx(e[0],"none")?[]:ia(e).map(function(t){for(var s={color:Fa.TRANSPARENT,offsetX:Wr,offsetY:Wr,blur:Wr},A=0,l=0;l<t.length;l++){var u=t[l];Ki(u)?(A===0?s.offsetX=u:A===1?s.offsetY=u:s.blur=u,A++):s.color=ki.parse(r,u)}return s})}},BM={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},CM={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(r,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var t=SM[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return t(e.values)}return null}},EM=function(r){var e=r.filter(function(t){return t.type===17}).map(function(t){return t.number});return e.length===6?e:null},NM=function(r){var e=r.filter(function(f){return f.type===17}).map(function(f){return f.number}),t=e[0],s=e[1];e[2],e[3];var A=e[4],l=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var u=e[12],d=e[13];return e[14],e[15],e.length===16?[t,s,A,l,u,d]:null},SM={matrix:EM,matrix3d:NM},RC={type:16,number:50,flags:yu},_M=[RC,RC],jM={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(r,e){var t=e.filter(Sr);return t.length!==2?_M:[t[0],t[1]]}},TM={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"hidden":return 1;case"collapse":return 2;default:return 0}}},zc;(function(r){r.NORMAL="normal",r.BREAK_ALL="break-all",r.KEEP_ALL="keep-all"})(zc||(zc={}));var UM={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"break-all":return zc.BREAK_ALL;case"keep-all":return zc.KEEP_ALL;default:return zc.NORMAL}}},QM={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(r,e){if(e.type===20)return{auto:!0,order:0};if(pl(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},kN={name:"time",parse:function(r,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},FM={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(r,e){return pl(e)?e.number:1}},IM={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},DM={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(r,e){return e.filter(Lt).map(function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(t){return t!==0})}},kM={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(r,e){var t=[],s=[];return e.forEach(function(A){switch(A.type){case 20:case 0:t.push(A.value);break;case 17:t.push(A.number.toString());break;case 4:s.push(t.join(" ")),t.length=0;break}}),t.length&&s.push(t.join(" ")),s.map(function(A){return A.indexOf(" ")===-1?A:"'"+A+"'"})}},RM={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},MM={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(r,e){return pl(e)?e.number:Lt(e)&&e.value==="bold"?700:400}},LM={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(r,e){return e.filter(Lt).map(function(t){return t.value})}},HM={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},Qr=function(r,e){return(r&e)!==0},OM={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(r,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e}},PM={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(r,e){if(e.length===0)return null;var t=e[0];if(t.type===20&&t.value==="none")return null;for(var s=[],A=e.filter(yN),l=0;l<A.length;l++){var u=A[l],d=A[l+1];if(u.type===20){var f=d&&pl(d)?d.number:1;s.push({counter:u.value,increment:f})}}return s}},VM={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(r,e){if(e.length===0)return[];for(var t=[],s=e.filter(yN),A=0;A<s.length;A++){var l=s[A],u=s[A+1];if(Lt(l)&&l.value!=="none"){var d=u&&pl(u)?u.number:0;t.push({counter:l.value,reset:d})}}return t}},zM={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(r,e){return e.filter(bu).map(function(t){return kN.parse(r,t)})}},KM={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(r,e){if(e.length===0)return null;var t=e[0];if(t.type===20&&t.value==="none")return null;var s=[],A=e.filter(p3);if(A.length%2!==0)return null;for(var l=0;l<A.length;l+=2){var u=A[l].value,d=A[l+1].value;s.push({open:u,close:d})}return s}},MC=function(r,e,t){if(!r)return"";var s=r[Math.min(e,r.length-1)];return s?t?s.open:s.close:""},GM={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(r,e){return e.length===1&&Dx(e[0],"none")?[]:ia(e).map(function(t){for(var s={color:255,offsetX:Wr,offsetY:Wr,blur:Wr,spread:Wr,inset:!1},A=0,l=0;l<t.length;l++){var u=t[l];Dx(u,"inset")?s.inset=!0:Ki(u)?(A===0?s.offsetX=u:A===1?s.offsetY=u:A===2?s.blur=u:s.spread=u,A++):s.color=ki.parse(r,u)}return s})}},qM={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(r,e){var t=[0,1,2],s=[];return e.filter(Lt).forEach(function(A){switch(A.value){case"stroke":s.push(1);break;case"fill":s.push(0);break;case"markers":s.push(2);break}}),t.forEach(function(A){s.indexOf(A)===-1&&s.push(A)}),s}},YM={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},$M={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(r,e){return bu(e)?e.number:0}},XM=(function(){function r(e,t){var s,A;this.animationDuration=je(e,zM,t.animationDuration),this.backgroundClip=je(e,b3,t.backgroundClip),this.backgroundColor=je(e,v3,t.backgroundColor),this.backgroundImage=je(e,U3,t.backgroundImage),this.backgroundOrigin=je(e,Q3,t.backgroundOrigin),this.backgroundPosition=je(e,F3,t.backgroundPosition),this.backgroundRepeat=je(e,I3,t.backgroundRepeat),this.backgroundSize=je(e,k3,t.backgroundSize),this.borderTopColor=je(e,M3,t.borderTopColor),this.borderRightColor=je(e,L3,t.borderRightColor),this.borderBottomColor=je(e,H3,t.borderBottomColor),this.borderLeftColor=je(e,O3,t.borderLeftColor),this.borderTopLeftRadius=je(e,P3,t.borderTopLeftRadius),this.borderTopRightRadius=je(e,V3,t.borderTopRightRadius),this.borderBottomRightRadius=je(e,z3,t.borderBottomRightRadius),this.borderBottomLeftRadius=je(e,K3,t.borderBottomLeftRadius),this.borderTopStyle=je(e,G3,t.borderTopStyle),this.borderRightStyle=je(e,q3,t.borderRightStyle),this.borderBottomStyle=je(e,Y3,t.borderBottomStyle),this.borderLeftStyle=je(e,$3,t.borderLeftStyle),this.borderTopWidth=je(e,X3,t.borderTopWidth),this.borderRightWidth=je(e,J3,t.borderRightWidth),this.borderBottomWidth=je(e,W3,t.borderBottomWidth),this.borderLeftWidth=je(e,Z3,t.borderLeftWidth),this.boxShadow=je(e,GM,t.boxShadow),this.color=je(e,eM,t.color),this.direction=je(e,tM,t.direction),this.display=je(e,rM,t.display),this.float=je(e,nM,t.cssFloat),this.fontFamily=je(e,kM,t.fontFamily),this.fontSize=je(e,RM,t.fontSize),this.fontStyle=je(e,HM,t.fontStyle),this.fontVariant=je(e,LM,t.fontVariant),this.fontWeight=je(e,MM,t.fontWeight),this.letterSpacing=je(e,aM,t.letterSpacing),this.lineBreak=je(e,iM,t.lineBreak),this.lineHeight=je(e,AM,t.lineHeight),this.listStyleImage=je(e,oM,t.listStyleImage),this.listStylePosition=je(e,lM,t.listStylePosition),this.listStyleType=je(e,kx,t.listStyleType),this.marginTop=je(e,cM,t.marginTop),this.marginRight=je(e,uM,t.marginRight),this.marginBottom=je(e,dM,t.marginBottom),this.marginLeft=je(e,hM,t.marginLeft),this.opacity=je(e,FM,t.opacity);var l=je(e,fM,t.overflow);this.overflowX=l[0],this.overflowY=l[l.length>1?1:0],this.overflowWrap=je(e,mM,t.overflowWrap),this.paddingTop=je(e,gM,t.paddingTop),this.paddingRight=je(e,pM,t.paddingRight),this.paddingBottom=je(e,xM,t.paddingBottom),this.paddingLeft=je(e,yM,t.paddingLeft),this.paintOrder=je(e,qM,t.paintOrder),this.position=je(e,vM,t.position),this.textAlign=je(e,bM,t.textAlign),this.textDecorationColor=je(e,IM,(s=t.textDecorationColor)!==null&&s!==void 0?s:t.color),this.textDecorationLine=je(e,DM,(A=t.textDecorationLine)!==null&&A!==void 0?A:t.textDecoration),this.textShadow=je(e,wM,t.textShadow),this.textTransform=je(e,BM,t.textTransform),this.transform=je(e,CM,t.transform),this.transformOrigin=je(e,jM,t.transformOrigin),this.visibility=je(e,TM,t.visibility),this.webkitTextStrokeColor=je(e,YM,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=je(e,$M,t.webkitTextStrokeWidth),this.wordBreak=je(e,UM,t.wordBreak),this.zIndex=je(e,QM,t.zIndex)}return r.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},r.prototype.isTransparent=function(){return Ri(this.backgroundColor)},r.prototype.isTransformed=function(){return this.transform!==null},r.prototype.isPositioned=function(){return this.position!==0},r.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},r.prototype.isFloating=function(){return this.float!==0},r.prototype.isInlineLevel=function(){return Qr(this.display,4)||Qr(this.display,33554432)||Qr(this.display,268435456)||Qr(this.display,536870912)||Qr(this.display,67108864)||Qr(this.display,134217728)},r})(),JM=(function(){function r(e,t){this.content=je(e,OM,t.content),this.quotes=je(e,KM,t.quotes)}return r})(),LC=(function(){function r(e,t){this.counterIncrement=je(e,PM,t.counterIncrement),this.counterReset=je(e,VM,t.counterReset)}return r})(),je=function(r,e,t){var s=new pN,A=t!==null&&typeof t<"u"?t.toString():e.initialValue;s.write(A);var l=new xN(s.read());switch(e.type){case 2:var u=l.parseComponentValue();return e.parse(r,Lt(u)?u.value:e.initialValue);case 0:return e.parse(r,l.parseComponentValue());case 1:return e.parse(r,l.parseComponentValues());case 4:return l.parseComponentValue();case 3:switch(e.format){case"angle":return Lf.parse(r,l.parseComponentValue());case"color":return ki.parse(r,l.parseComponentValue());case"image":return G0.parse(r,l.parseComponentValue());case"length":var d=l.parseComponentValue();return Ki(d)?d:Wr;case"length-percentage":var f=l.parseComponentValue();return Sr(f)?f:Wr;case"time":return kN.parse(r,l.parseComponentValue())}break}},WM="data-html2canvas-debug",ZM=function(r){var e=r.getAttribute(WM);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},Rx=function(r,e){var t=ZM(r);return t===1||e===t},Aa=(function(){function r(e,t){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,Rx(t,3))debugger;this.styles=new XM(e,window.getComputedStyle(t,null)),Hx(t)&&(this.styles.animationDuration.some(function(s){return s>0})&&(t.style.animationDuration="0s"),this.styles.transform!==null&&(t.style.transform="none")),this.bounds=Rf(this.context,t),Rx(t,4)&&(this.flags|=16)}return r})(),eL="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",HC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Uc=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var dh=0;dh<HC.length;dh++)Uc[HC.charCodeAt(dh)]=dh;var tL=function(r){var e=r.length*.75,t=r.length,s,A=0,l,u,d,f;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);var g=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),x=Array.isArray(g)?g:new Uint8Array(g);for(s=0;s<t;s+=4)l=Uc[r.charCodeAt(s)],u=Uc[r.charCodeAt(s+1)],d=Uc[r.charCodeAt(s+2)],f=Uc[r.charCodeAt(s+3)],x[A++]=l<<2|u>>4,x[A++]=(u&15)<<4|d>>2,x[A++]=(d&3)<<6|f&63;return g},rL=function(r){for(var e=r.length,t=[],s=0;s<e;s+=2)t.push(r[s+1]<<8|r[s]);return t},sL=function(r){for(var e=r.length,t=[],s=0;s<e;s+=4)t.push(r[s+3]<<24|r[s+2]<<16|r[s+1]<<8|r[s]);return t},TA=5,q0=11,mp=2,nL=q0-TA,RN=65536>>TA,aL=1<<TA,gp=aL-1,iL=1024>>TA,AL=RN+iL,oL=AL,lL=32,cL=oL+lL,uL=65536>>q0,dL=1<<nL,hL=dL-1,OC=function(r,e,t){return r.slice?r.slice(e,t):new Uint16Array(Array.prototype.slice.call(r,e,t))},fL=function(r,e,t){return r.slice?r.slice(e,t):new Uint32Array(Array.prototype.slice.call(r,e,t))},mL=function(r,e){var t=tL(r),s=Array.isArray(t)?sL(t):new Uint32Array(t),A=Array.isArray(t)?rL(t):new Uint16Array(t),l=24,u=OC(A,l/2,s[4]/2),d=s[5]===2?OC(A,(l+s[4])/2):fL(s,Math.ceil((l+s[4])/4));return new gL(s[0],s[1],s[2],s[3],u,d)},gL=(function(){function r(e,t,s,A,l,u){this.initialValue=e,this.errorValue=t,this.highStart=s,this.highValueIndex=A,this.index=l,this.data=u}return r.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>TA],t=(t<<mp)+(e&gp),this.data[t];if(e<=65535)return t=this.index[RN+(e-55296>>TA)],t=(t<<mp)+(e&gp),this.data[t];if(e<this.highStart)return t=cL-uL+(e>>q0),t=this.index[t],t+=e>>TA&hL,t=this.index[t],t=(t<<mp)+(e&gp),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},r})(),PC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",pL=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var hh=0;hh<PC.length;hh++)pL[PC.charCodeAt(hh)]=hh;var xL=1,pp=2,xp=3,VC=4,zC=5,yL=7,KC=8,yp=9,bp=10,GC=11,qC=12,YC=13,$C=14,vp=15,bL=function(r){for(var e=[],t=0,s=r.length;t<s;){var A=r.charCodeAt(t++);if(A>=55296&&A<=56319&&t<s){var l=r.charCodeAt(t++);(l&64512)===56320?e.push(((A&1023)<<10)+(l&1023)+65536):(e.push(A),t--)}else e.push(A)}return e},vL=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,r);var t=r.length;if(!t)return"";for(var s=[],A=-1,l="";++A<t;){var u=r[A];u<=65535?s.push(u):(u-=65536,s.push((u>>10)+55296,u%1024+56320)),(A+1===t||s.length>16384)&&(l+=String.fromCharCode.apply(String,s),s.length=0)}return l},wL=mL(eL),An="",wp="",BL=function(r){return wL.get(r)},CL=function(r,e,t){var s=t-2,A=e[s],l=e[t-1],u=e[t];if(l===pp&&u===xp)return An;if(l===pp||l===xp||l===VC||u===pp||u===xp||u===VC)return wp;if(l===KC&&[KC,yp,GC,qC].indexOf(u)!==-1||(l===GC||l===yp)&&(u===yp||u===bp)||(l===qC||l===bp)&&u===bp||u===YC||u===zC||u===yL||l===xL)return An;if(l===YC&&u===$C){for(;A===zC;)A=e[--s];if(A===$C)return An}if(l===vp&&u===vp){for(var d=0;A===vp;)d++,A=e[--s];if(d%2===0)return An}return wp},EL=function(r){var e=bL(r),t=e.length,s=0,A=0,l=e.map(BL);return{next:function(){if(s>=t)return{done:!0,value:null};for(var u=An;s<t&&(u=CL(e,l,++s))===An;);if(u!==An||s===t){var d=vL.apply(null,e.slice(A,s));return A=s,{value:d,done:!1}}return{done:!0,value:null}}}},NL=function(r){for(var e=EL(r),t=[],s;!(s=e.next()).done;)s.value&&t.push(s.value.slice());return t},SL=function(r){var e=123;if(r.createRange){var t=r.createRange();if(t.getBoundingClientRect){var s=r.createElement("boundtest");s.style.height=e+"px",s.style.display="block",r.body.appendChild(s),t.selectNode(s);var A=t.getBoundingClientRect(),l=Math.round(A.height);if(r.body.removeChild(s),l===e)return!0}}return!1},_L=function(r){var e=r.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",r.body.appendChild(e);var t=r.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var s=e.firstChild,A=Mf(s.data).map(function(f){return xr(f)}),l=0,u={},d=A.every(function(f,g){t.setStart(s,l),t.setEnd(s,l+f.length);var x=t.getBoundingClientRect();l+=f.length;var y=x.x>u.x||x.y>u.y;return u=x,g===0?!0:y});return r.body.removeChild(e),d},jL=function(){return typeof new Image().crossOrigin<"u"},TL=function(){return typeof new XMLHttpRequest().responseType=="string"},UL=function(r){var e=new Image,t=r.createElement("canvas"),s=t.getContext("2d");if(!s)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{s.drawImage(e,0,0),t.toDataURL()}catch{return!1}return!0},XC=function(r){return r[0]===0&&r[1]===255&&r[2]===0&&r[3]===255},QL=function(r){var e=r.createElement("canvas"),t=100;e.width=t,e.height=t;var s=e.getContext("2d");if(!s)return Promise.reject(!1);s.fillStyle="rgb(0, 255, 0)",s.fillRect(0,0,t,t);var A=new Image,l=e.toDataURL();A.src=l;var u=Mx(t,t,0,0,A);return s.fillStyle="red",s.fillRect(0,0,t,t),JC(u).then(function(d){s.drawImage(d,0,0);var f=s.getImageData(0,0,t,t).data;s.fillStyle="red",s.fillRect(0,0,t,t);var g=r.createElement("div");return g.style.backgroundImage="url("+l+")",g.style.height=t+"px",XC(f)?JC(Mx(t,t,0,0,g)):Promise.reject(!1)}).then(function(d){return s.drawImage(d,0,0),XC(s.getImageData(0,0,t,t).data)}).catch(function(){return!1})},Mx=function(r,e,t,s,A){var l="http://www.w3.org/2000/svg",u=document.createElementNS(l,"svg"),d=document.createElementNS(l,"foreignObject");return u.setAttributeNS(null,"width",r.toString()),u.setAttributeNS(null,"height",e.toString()),d.setAttributeNS(null,"width","100%"),d.setAttributeNS(null,"height","100%"),d.setAttributeNS(null,"x",t.toString()),d.setAttributeNS(null,"y",s.toString()),d.setAttributeNS(null,"externalResourcesRequired","true"),u.appendChild(d),d.appendChild(A),u},JC=function(r){return new Promise(function(e,t){var s=new Image;s.onload=function(){return e(s)},s.onerror=t,s.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(r))})},$r={get SUPPORT_RANGE_BOUNDS(){var r=SL(document);return Object.defineProperty($r,"SUPPORT_RANGE_BOUNDS",{value:r}),r},get SUPPORT_WORD_BREAKING(){var r=$r.SUPPORT_RANGE_BOUNDS&&_L(document);return Object.defineProperty($r,"SUPPORT_WORD_BREAKING",{value:r}),r},get SUPPORT_SVG_DRAWING(){var r=UL(document);return Object.defineProperty($r,"SUPPORT_SVG_DRAWING",{value:r}),r},get SUPPORT_FOREIGNOBJECT_DRAWING(){var r=typeof Array.from=="function"&&typeof window.fetch=="function"?QL(document):Promise.resolve(!1);return Object.defineProperty($r,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:r}),r},get SUPPORT_CORS_IMAGES(){var r=jL();return Object.defineProperty($r,"SUPPORT_CORS_IMAGES",{value:r}),r},get SUPPORT_RESPONSE_TYPE(){var r=TL();return Object.defineProperty($r,"SUPPORT_RESPONSE_TYPE",{value:r}),r},get SUPPORT_CORS_XHR(){var r="withCredentials"in new XMLHttpRequest;return Object.defineProperty($r,"SUPPORT_CORS_XHR",{value:r}),r},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var r=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty($r,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:r}),r}},Kc=(function(){function r(e,t){this.text=e,this.bounds=t}return r})(),FL=function(r,e,t,s){var A=kL(e,t),l=[],u=0;return A.forEach(function(d){if(t.textDecorationLine.length||d.trim().length>0)if($r.SUPPORT_RANGE_BOUNDS){var f=WC(s,u,d.length).getClientRects();if(f.length>1){var g=Y0(d),x=0;g.forEach(function(v){l.push(new Kc(v,Ma.fromDOMRectList(r,WC(s,x+u,v.length).getClientRects()))),x+=v.length})}else l.push(new Kc(d,Ma.fromDOMRectList(r,f)))}else{var y=s.splitText(d.length);l.push(new Kc(d,IL(r,s))),s=y}else $r.SUPPORT_RANGE_BOUNDS||(s=s.splitText(d.length));u+=d.length}),l},IL=function(r,e){var t=e.ownerDocument;if(t){var s=t.createElement("html2canvaswrapper");s.appendChild(e.cloneNode(!0));var A=e.parentNode;if(A){A.replaceChild(s,e);var l=Rf(r,s);return s.firstChild&&A.replaceChild(s.firstChild,s),l}}return Ma.EMPTY},WC=function(r,e,t){var s=r.ownerDocument;if(!s)throw new Error("Node has no owner document");var A=s.createRange();return A.setStart(r,e),A.setEnd(r,e+t),A},Y0=function(r){if($r.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(r)).map(function(t){return t.segment})}return NL(r)},DL=function(r,e){if($r.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(t.segment(r)).map(function(s){return s.segment})}return ML(r,e)},kL=function(r,e){return e.letterSpacing!==0?Y0(r):DL(r,e)},RL=[32,160,4961,65792,65793,4153,4241],ML=function(r,e){for(var t=uR(r,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),s=[],A,l=function(){if(A.value){var u=A.value.slice(),d=Mf(u),f="";d.forEach(function(g){RL.indexOf(g)===-1?f+=xr(g):(f.length&&s.push(f),s.push(xr(g)),f="")}),f.length&&s.push(f)}};!(A=t.next()).done;)l();return s},LL=(function(){function r(e,t,s){this.text=HL(t.data,s.textTransform),this.textBounds=FL(e,this.text,s,t)}return r})(),HL=function(r,e){switch(e){case 1:return r.toLowerCase();case 3:return r.replace(OL,PL);case 2:return r.toUpperCase();default:return r}},OL=/(^|\s|:|-|\(|\))([a-z])/g,PL=function(r,e,t){return r.length>0?e+t.toUpperCase():r},MN=(function(r){Un(e,r);function e(t,s){var A=r.call(this,t,s)||this;return A.src=s.currentSrc||s.src,A.intrinsicWidth=s.naturalWidth,A.intrinsicHeight=s.naturalHeight,A.context.cache.addImage(A.src),A}return e})(Aa),LN=(function(r){Un(e,r);function e(t,s){var A=r.call(this,t,s)||this;return A.canvas=s,A.intrinsicWidth=s.width,A.intrinsicHeight=s.height,A}return e})(Aa),HN=(function(r){Un(e,r);function e(t,s){var A=r.call(this,t,s)||this,l=new XMLSerializer,u=Rf(t,s);return s.setAttribute("width",u.width+"px"),s.setAttribute("height",u.height+"px"),A.svg="data:image/svg+xml,"+encodeURIComponent(l.serializeToString(s)),A.intrinsicWidth=s.width.baseVal.value,A.intrinsicHeight=s.height.baseVal.value,A.context.cache.addImage(A.svg),A}return e})(Aa),ON=(function(r){Un(e,r);function e(t,s){var A=r.call(this,t,s)||this;return A.value=s.value,A}return e})(Aa),Lx=(function(r){Un(e,r);function e(t,s){var A=r.call(this,t,s)||this;return A.start=s.start,A.reversed=typeof s.reversed=="boolean"&&s.reversed===!0,A}return e})(Aa),VL=[{type:15,flags:0,unit:"px",number:3}],zL=[{type:16,flags:0,number:50}],KL=function(r){return r.width>r.height?new Ma(r.left+(r.width-r.height)/2,r.top,r.height,r.height):r.width<r.height?new Ma(r.left,r.top+(r.height-r.width)/2,r.width,r.width):r},GL=function(r){var e=r.type===qL?new Array(r.value.length+1).join(""):r.value;return e.length===0?r.placeholder||"":e},of="checkbox",lf="radio",qL="password",ZC=707406591,$0=(function(r){Un(e,r);function e(t,s){var A=r.call(this,t,s)||this;switch(A.type=s.type.toLowerCase(),A.checked=s.checked,A.value=GL(s),(A.type===of||A.type===lf)&&(A.styles.backgroundColor=3739148031,A.styles.borderTopColor=A.styles.borderRightColor=A.styles.borderBottomColor=A.styles.borderLeftColor=2779096575,A.styles.borderTopWidth=A.styles.borderRightWidth=A.styles.borderBottomWidth=A.styles.borderLeftWidth=1,A.styles.borderTopStyle=A.styles.borderRightStyle=A.styles.borderBottomStyle=A.styles.borderLeftStyle=1,A.styles.backgroundClip=[0],A.styles.backgroundOrigin=[0],A.bounds=KL(A.bounds)),A.type){case of:A.styles.borderTopRightRadius=A.styles.borderTopLeftRadius=A.styles.borderBottomRightRadius=A.styles.borderBottomLeftRadius=VL;break;case lf:A.styles.borderTopRightRadius=A.styles.borderTopLeftRadius=A.styles.borderBottomRightRadius=A.styles.borderBottomLeftRadius=zL;break}return A}return e})(Aa),PN=(function(r){Un(e,r);function e(t,s){var A=r.call(this,t,s)||this,l=s.options[s.selectedIndex||0];return A.value=l&&l.text||"",A}return e})(Aa),VN=(function(r){Un(e,r);function e(t,s){var A=r.call(this,t,s)||this;return A.value=s.value,A}return e})(Aa),zN=(function(r){Un(e,r);function e(t,s){var A=r.call(this,t,s)||this;A.src=s.src,A.width=parseInt(s.width,10)||0,A.height=parseInt(s.height,10)||0,A.backgroundColor=A.styles.backgroundColor;try{if(s.contentWindow&&s.contentWindow.document&&s.contentWindow.document.documentElement){A.tree=GN(t,s.contentWindow.document.documentElement);var l=s.contentWindow.document.documentElement?Vc(t,getComputedStyle(s.contentWindow.document.documentElement).backgroundColor):Fa.TRANSPARENT,u=s.contentWindow.document.body?Vc(t,getComputedStyle(s.contentWindow.document.body).backgroundColor):Fa.TRANSPARENT;A.backgroundColor=Ri(l)?Ri(u)?A.styles.backgroundColor:u:l}}catch{}return A}return e})(Aa),YL=["OL","UL","MENU"],Dh=function(r,e,t,s){for(var A=e.firstChild,l=void 0;A;A=l)if(l=A.nextSibling,qN(A)&&A.data.trim().length>0)t.textNodes.push(new LL(r,A,t.styles));else if(Ko(A))if(JN(A)&&A.assignedNodes)A.assignedNodes().forEach(function(d){return Dh(r,d,t,s)});else{var u=KN(r,A);u.styles.isVisible()&&($L(A,u,s)?u.flags|=4:XL(u.styles)&&(u.flags|=2),YL.indexOf(A.tagName)!==-1&&(u.flags|=8),t.elements.push(u),A.slot,A.shadowRoot?Dh(r,A.shadowRoot,u,s):!cf(A)&&!YN(A)&&!uf(A)&&Dh(r,A,u,s))}},KN=function(r,e){return Ox(e)?new MN(r,e):$N(e)?new LN(r,e):YN(e)?new HN(r,e):JL(e)?new ON(r,e):WL(e)?new Lx(r,e):ZL(e)?new $0(r,e):uf(e)?new PN(r,e):cf(e)?new VN(r,e):XN(e)?new zN(r,e):new Aa(r,e)},GN=function(r,e){var t=KN(r,e);return t.flags|=4,Dh(r,e,t,t),t},$L=function(r,e,t){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||X0(r)&&t.styles.isTransparent()},XL=function(r){return r.isPositioned()||r.isFloating()},qN=function(r){return r.nodeType===Node.TEXT_NODE},Ko=function(r){return r.nodeType===Node.ELEMENT_NODE},Hx=function(r){return Ko(r)&&typeof r.style<"u"&&!kh(r)},kh=function(r){return typeof r.className=="object"},JL=function(r){return r.tagName==="LI"},WL=function(r){return r.tagName==="OL"},ZL=function(r){return r.tagName==="INPUT"},eH=function(r){return r.tagName==="HTML"},YN=function(r){return r.tagName==="svg"},X0=function(r){return r.tagName==="BODY"},$N=function(r){return r.tagName==="CANVAS"},e1=function(r){return r.tagName==="VIDEO"},Ox=function(r){return r.tagName==="IMG"},XN=function(r){return r.tagName==="IFRAME"},t1=function(r){return r.tagName==="STYLE"},tH=function(r){return r.tagName==="SCRIPT"},cf=function(r){return r.tagName==="TEXTAREA"},uf=function(r){return r.tagName==="SELECT"},JN=function(r){return r.tagName==="SLOT"},r1=function(r){return r.tagName.indexOf("-")>0},rH=(function(){function r(){this.counters={}}return r.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},r.prototype.getCounterValues=function(e){var t=this.counters[e];return t||[]},r.prototype.pop=function(e){var t=this;e.forEach(function(s){return t.counters[s].pop()})},r.prototype.parse=function(e){var t=this,s=e.counterIncrement,A=e.counterReset,l=!0;s!==null&&s.forEach(function(d){var f=t.counters[d.counter];f&&d.increment!==0&&(l=!1,f.length||f.push(1),f[Math.max(0,f.length-1)]+=d.increment)});var u=[];return l&&A.forEach(function(d){var f=t.counters[d.counter];u.push(d.counter),f||(f=t.counters[d.counter]=[]),f.push(d.reset)}),u},r})(),s1={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},n1={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},sH={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},nH={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Io=function(r,e,t,s,A,l){return r<e||r>t?au(r,A,l.length>0):s.integers.reduce(function(u,d,f){for(;r>=d;)r-=d,u+=s.values[f];return u},"")+l},WN=function(r,e,t,s){var A="";do t||r--,A=s(r)+A,r/=e;while(r*e>=e);return A},pr=function(r,e,t,s,A){var l=t-e+1;return(r<0?"-":"")+(WN(Math.abs(r),l,s,function(u){return xr(Math.floor(u%l)+e)})+A)},yA=function(r,e,t){t===void 0&&(t=". ");var s=e.length;return WN(Math.abs(r),s,!1,function(A){return e[Math.floor(A%s)]})+t},Vo=1,bi=2,vi=4,Qc=8,Ta=function(r,e,t,s,A,l){if(r<-9999||r>9999)return au(r,4,A.length>0);var u=Math.abs(r),d=A;if(u===0)return e[0]+d;for(var f=0;u>0&&f<=4;f++){var g=u%10;g===0&&Qr(l,Vo)&&d!==""?d=e[g]+d:g>1||g===1&&f===0||g===1&&f===1&&Qr(l,bi)||g===1&&f===1&&Qr(l,vi)&&r>100||g===1&&f>1&&Qr(l,Qc)?d=e[g]+(f>0?t[f-1]:"")+d:g===1&&f>0&&(d=t[f-1]+d),u=Math.floor(u/10)}return(r<0?s:"")+d},a1="",i1="",A1="",Bp="",au=function(r,e,t){var s=t?". ":"",A=t?"":"",l=t?", ":"",u=t?" ":"";switch(e){case 0:return""+u;case 1:return""+u;case 2:return""+u;case 5:var d=pr(r,48,57,!0,s);return d.length<4?"0"+d:d;case 4:return yA(r,"",A);case 6:return Io(r,1,3999,s1,3,s).toLowerCase();case 7:return Io(r,1,3999,s1,3,s);case 8:return pr(r,945,969,!1,s);case 9:return pr(r,97,122,!1,s);case 10:return pr(r,65,90,!1,s);case 11:return pr(r,1632,1641,!0,s);case 12:case 49:return Io(r,1,9999,n1,3,s);case 35:return Io(r,1,9999,n1,3,s).toLowerCase();case 13:return pr(r,2534,2543,!0,s);case 14:case 30:return pr(r,6112,6121,!0,s);case 15:return yA(r,"",A);case 16:return yA(r,"",A);case 17:case 48:return Ta(r,"",a1,"",A,bi|vi|Qc);case 47:return Ta(r,"",i1,"",A,Vo|bi|vi|Qc);case 42:return Ta(r,"",a1,"",A,bi|vi|Qc);case 41:return Ta(r,"",i1,"",A,Vo|bi|vi|Qc);case 26:return Ta(r,"","",A1,A,0);case 25:return Ta(r,"","",A1,A,Vo|bi|vi);case 31:return Ta(r,"","",Bp,l,Vo|bi|vi);case 33:return Ta(r,"","",Bp,l,0);case 32:return Ta(r,"","",Bp,l,Vo|bi|vi);case 18:return pr(r,2406,2415,!0,s);case 20:return Io(r,1,19999,nH,3,s);case 21:return pr(r,2790,2799,!0,s);case 22:return pr(r,2662,2671,!0,s);case 22:return Io(r,1,10999,sH,3,s);case 23:return yA(r,"");case 24:return yA(r,"");case 27:return pr(r,3302,3311,!0,s);case 28:return yA(r,"",A);case 29:return yA(r,"",A);case 34:return pr(r,3792,3801,!0,s);case 37:return pr(r,6160,6169,!0,s);case 38:return pr(r,4160,4169,!0,s);case 39:return pr(r,2918,2927,!0,s);case 40:return pr(r,1776,1785,!0,s);case 43:return pr(r,3046,3055,!0,s);case 44:return pr(r,3174,3183,!0,s);case 45:return pr(r,3664,3673,!0,s);case 46:return pr(r,3872,3881,!0,s);default:return pr(r,48,57,!0,s)}},ZN="data-html2canvas-ignore",o1=(function(){function r(e,t,s){if(this.context=e,this.options=s,this.scrolledElements=[],this.referenceElement=t,this.counters=new rH,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return r.prototype.toIFrame=function(e,t){var s=this,A=aH(e,t);if(!A.contentWindow)return Promise.reject("Unable to find iframe window");var l=e.defaultView.pageXOffset,u=e.defaultView.pageYOffset,d=A.contentWindow,f=d.document,g=oH(A).then(function(){return xs(s,void 0,void 0,function(){var x,y;return ns(this,function(v){switch(v.label){case 0:return this.scrolledElements.forEach(dH),d&&(d.scrollTo(t.left,t.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(d.scrollY!==t.top||d.scrollX!==t.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(d.scrollX-t.left,d.scrollY-t.top,0,0))),x=this.options.onclone,y=this.clonedReferenceElement,typeof y>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:f.fonts&&f.fonts.ready?[4,f.fonts.ready]:[3,2];case 1:v.sent(),v.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,AH(f)]:[3,4];case 3:v.sent(),v.label=4;case 4:return typeof x=="function"?[2,Promise.resolve().then(function(){return x(f,y)}).then(function(){return A})]:[2,A]}})})});return f.open(),f.write(cH(document.doctype)+"<html></html>"),uH(this.referenceElement.ownerDocument,l,u),f.replaceChild(f.adoptNode(this.documentElement),f.documentElement),f.close(),g},r.prototype.createElementClone=function(e){if(Rx(e,2))debugger;if($N(e))return this.createCanvasClone(e);if(e1(e))return this.createVideoClone(e);if(t1(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return Ox(t)&&(Ox(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),t.loading==="lazy"&&(t.loading="eager")),r1(t)?this.createCustomElementClone(t):t},r.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return Cp(e.style,t),t},r.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var s=[].slice.call(t.cssRules,0).reduce(function(l,u){return u&&typeof u.cssText=="string"?l+u.cssText:l},""),A=e.cloneNode(!1);return A.textContent=s,A}}catch(l){if(this.context.logger.error("Unable to access cssRules property",l),l.name!=="SecurityError")throw l}return e.cloneNode(!1)},r.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var s=e.ownerDocument.createElement("img");try{return s.src=e.toDataURL(),s}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var A=e.cloneNode(!1);try{A.width=e.width,A.height=e.height;var l=e.getContext("2d"),u=A.getContext("2d");if(u)if(!this.options.allowTaint&&l)u.putImageData(l.getImageData(0,0,e.width,e.height),0,0);else{var d=(t=e.getContext("webgl2"))!==null&&t!==void 0?t:e.getContext("webgl");if(d){var f=d.getContextAttributes();f?.preserveDrawingBuffer===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}u.drawImage(e,0,0)}return A}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return A},r.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var s=t.getContext("2d");try{return s&&(s.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||s.getImageData(0,0,t.width,t.height)),t}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var A=e.ownerDocument.createElement("canvas");return A.width=e.offsetWidth,A.height=e.offsetHeight,A},r.prototype.appendChildNode=function(e,t,s){(!Ko(t)||!tH(t)&&!t.hasAttribute(ZN)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(t)))&&(!this.options.copyStyles||!Ko(t)||!t1(t))&&e.appendChild(this.cloneNode(t,s))},r.prototype.cloneChildNodes=function(e,t,s){for(var A=this,l=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;l;l=l.nextSibling)if(Ko(l)&&JN(l)&&typeof l.assignedNodes=="function"){var u=l.assignedNodes();u.length&&u.forEach(function(d){return A.appendChildNode(t,d,s)})}else this.appendChildNode(t,l,s)},r.prototype.cloneNode=function(e,t){if(qN(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var s=e.ownerDocument.defaultView;if(s&&Ko(e)&&(Hx(e)||kh(e))){var A=this.createElementClone(e);A.style.transitionProperty="none";var l=s.getComputedStyle(e),u=s.getComputedStyle(e,":before"),d=s.getComputedStyle(e,":after");this.referenceElement===e&&Hx(A)&&(this.clonedReferenceElement=A),X0(A)&&mH(A);var f=this.counters.parse(new LC(this.context,l)),g=this.resolvePseudoContent(e,A,u,Gc.BEFORE);r1(e)&&(t=!0),e1(e)||this.cloneChildNodes(e,A,t),g&&A.insertBefore(g,A.firstChild);var x=this.resolvePseudoContent(e,A,d,Gc.AFTER);return x&&A.appendChild(x),this.counters.pop(f),(l&&(this.options.copyStyles||kh(e))&&!XN(e)||t)&&Cp(l,A),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([A,e.scrollLeft,e.scrollTop]),(cf(e)||uf(e))&&(cf(A)||uf(A))&&(A.value=e.value),A}return e.cloneNode(!1)},r.prototype.resolvePseudoContent=function(e,t,s,A){var l=this;if(s){var u=s.content,d=t.ownerDocument;if(!(!d||!u||u==="none"||u==="-moz-alt-content"||s.display==="none")){this.counters.parse(new LC(this.context,s));var f=new JM(this.context,s),g=d.createElement("html2canvaspseudoelement");Cp(s,g),f.content.forEach(function(y){if(y.type===0)g.appendChild(d.createTextNode(y.value));else if(y.type===22){var v=d.createElement("img");v.src=y.value,v.style.opacity="1",g.appendChild(v)}else if(y.type===18){if(y.name==="attr"){var N=y.values.filter(Lt);N.length&&g.appendChild(d.createTextNode(e.getAttribute(N[0].value)||""))}else if(y.name==="counter"){var M=y.values.filter(ll),S=M[0],V=M[1];if(S&&Lt(S)){var K=l.counters.getCounterValue(S.value),G=V&&Lt(V)?kx.parse(l.context,V.value):3;g.appendChild(d.createTextNode(au(K,G,!1)))}}else if(y.name==="counters"){var z=y.values.filter(ll),S=z[0],q=z[1],V=z[2];if(S&&Lt(S)){var $=l.counters.getCounterValues(S.value),Y=V&&Lt(V)?kx.parse(l.context,V.value):3,E=q&&q.type===0?q.value:"",_=$.map(function(j){return au(j,Y,!1)}).join(E);g.appendChild(d.createTextNode(_))}}}else if(y.type===20)switch(y.value){case"open-quote":g.appendChild(d.createTextNode(MC(f.quotes,l.quoteDepth++,!0)));break;case"close-quote":g.appendChild(d.createTextNode(MC(f.quotes,--l.quoteDepth,!1)));break;default:g.appendChild(d.createTextNode(y.value))}}),g.className=Px+" "+Vx;var x=A===Gc.BEFORE?" "+Px:" "+Vx;return kh(t)?t.className.baseValue+=x:t.className+=x,g}}},r.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},r})(),Gc;(function(r){r[r.BEFORE=0]="BEFORE",r[r.AFTER=1]="AFTER"})(Gc||(Gc={}));var aH=function(r,e){var t=r.createElement("iframe");return t.className="html2canvas-container",t.style.visibility="hidden",t.style.position="fixed",t.style.left="-10000px",t.style.top="0px",t.style.border="0",t.width=e.width.toString(),t.height=e.height.toString(),t.scrolling="no",t.setAttribute(ZN,"true"),r.body.appendChild(t),t},iH=function(r){return new Promise(function(e){if(r.complete){e();return}if(!r.src){e();return}r.onload=e,r.onerror=e})},AH=function(r){return Promise.all([].slice.call(r.images,0).map(iH))},oH=function(r){return new Promise(function(e,t){var s=r.contentWindow;if(!s)return t("No window assigned for iframe");var A=s.document;s.onload=r.onload=function(){s.onload=r.onload=null;var l=setInterval(function(){A.body.childNodes.length>0&&A.readyState==="complete"&&(clearInterval(l),e(r))},50)}})},lH=["all","d","content"],Cp=function(r,e){for(var t=r.length-1;t>=0;t--){var s=r.item(t);lH.indexOf(s)===-1&&e.style.setProperty(s,r.getPropertyValue(s))}return e},cH=function(r){var e="";return r&&(e+="<!DOCTYPE ",r.name&&(e+=r.name),r.internalSubset&&(e+=r.internalSubset),r.publicId&&(e+='"'+r.publicId+'"'),r.systemId&&(e+='"'+r.systemId+'"'),e+=">"),e},uH=function(r,e,t){r&&r.defaultView&&(e!==r.defaultView.pageXOffset||t!==r.defaultView.pageYOffset)&&r.defaultView.scrollTo(e,t)},dH=function(r){var e=r[0],t=r[1],s=r[2];e.scrollLeft=t,e.scrollTop=s},hH=":before",fH=":after",Px="___html2canvas___pseudoelement_before",Vx="___html2canvas___pseudoelement_after",l1=`{
    content: "" !important;
    display: none !important;
}`,mH=function(r){gH(r,"."+Px+hH+l1+`
         .`+Vx+fH+l1)},gH=function(r,e){var t=r.ownerDocument;if(t){var s=t.createElement("style");s.textContent=e,r.appendChild(s)}},eS=(function(){function r(){}return r.getOrigin=function(e){var t=r._link;return t?(t.href=e,t.href=t.href,t.protocol+t.hostname+t.port):"about:blank"},r.isSameOrigin=function(e){return r.getOrigin(e)===r._origin},r.setContext=function(e){r._link=e.document.createElement("a"),r._origin=r.getOrigin(e.location.href)},r._origin="about:blank",r})(),pH=(function(){function r(e,t){this.context=e,this._options=t,this._cache={}}return r.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)||(Np(e)||vH(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),t},r.prototype.match=function(e){return this._cache[e]},r.prototype.loadImage=function(e){return xs(this,void 0,void 0,function(){var t,s,A,l,u=this;return ns(this,function(d){switch(d.label){case 0:return t=eS.isSameOrigin(e),s=!Ep(e)&&this._options.useCORS===!0&&$r.SUPPORT_CORS_IMAGES&&!t,A=!Ep(e)&&!t&&!Np(e)&&typeof this._options.proxy=="string"&&$r.SUPPORT_CORS_XHR&&!s,!t&&this._options.allowTaint===!1&&!Ep(e)&&!Np(e)&&!A&&!s?[2]:(l=e,A?[4,this.proxy(l)]:[3,2]);case 1:l=d.sent(),d.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(f,g){var x=new Image;x.onload=function(){return f(x)},x.onerror=g,(wH(l)||s)&&(x.crossOrigin="anonymous"),x.src=l,x.complete===!0&&setTimeout(function(){return f(x)},500),u._options.imageTimeout>0&&setTimeout(function(){return g("Timed out ("+u._options.imageTimeout+"ms) loading image")},u._options.imageTimeout)})];case 3:return[2,d.sent()]}})})},r.prototype.has=function(e){return typeof this._cache[e]<"u"},r.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},r.prototype.proxy=function(e){var t=this,s=this._options.proxy;if(!s)throw new Error("No proxy defined");var A=e.substring(0,256);return new Promise(function(l,u){var d=$r.SUPPORT_RESPONSE_TYPE?"blob":"text",f=new XMLHttpRequest;f.onload=function(){if(f.status===200)if(d==="text")l(f.response);else{var y=new FileReader;y.addEventListener("load",function(){return l(y.result)},!1),y.addEventListener("error",function(v){return u(v)},!1),y.readAsDataURL(f.response)}else u("Failed to proxy resource "+A+" with status code "+f.status)},f.onerror=u;var g=s.indexOf("?")>-1?"&":"?";if(f.open("GET",""+s+g+"url="+encodeURIComponent(e)+"&responseType="+d),d!=="text"&&f instanceof XMLHttpRequest&&(f.responseType=d),t._options.imageTimeout){var x=t._options.imageTimeout;f.timeout=x,f.ontimeout=function(){return u("Timed out ("+x+"ms) proxying "+A)}}f.send()})},r})(),xH=/^data:image\/svg\+xml/i,yH=/^data:image\/.*;base64,/i,bH=/^data:image\/.*/i,vH=function(r){return $r.SUPPORT_SVG_DRAWING||!BH(r)},Ep=function(r){return bH.test(r)},wH=function(r){return yH.test(r)},Np=function(r){return r.substr(0,4)==="blob"},BH=function(r){return r.substr(-3).toLowerCase()==="svg"||xH.test(r)},_e=(function(){function r(e,t){this.type=0,this.x=e,this.y=t}return r.prototype.add=function(e,t){return new r(this.x+e,this.y+t)},r})(),Do=function(r,e,t){return new _e(r.x+(e.x-r.x)*t,r.y+(e.y-r.y)*t)},fh=(function(){function r(e,t,s,A){this.type=1,this.start=e,this.startControl=t,this.endControl=s,this.end=A}return r.prototype.subdivide=function(e,t){var s=Do(this.start,this.startControl,e),A=Do(this.startControl,this.endControl,e),l=Do(this.endControl,this.end,e),u=Do(s,A,e),d=Do(A,l,e),f=Do(u,d,e);return t?new r(this.start,s,u,f):new r(f,d,l,this.end)},r.prototype.add=function(e,t){return new r(this.start.add(e,t),this.startControl.add(e,t),this.endControl.add(e,t),this.end.add(e,t))},r.prototype.reverse=function(){return new r(this.end,this.endControl,this.startControl,this.start)},r})(),on=function(r){return r.type===1},CH=(function(){function r(e){var t=e.styles,s=e.bounds,A=Tc(t.borderTopLeftRadius,s.width,s.height),l=A[0],u=A[1],d=Tc(t.borderTopRightRadius,s.width,s.height),f=d[0],g=d[1],x=Tc(t.borderBottomRightRadius,s.width,s.height),y=x[0],v=x[1],N=Tc(t.borderBottomLeftRadius,s.width,s.height),M=N[0],S=N[1],V=[];V.push((l+f)/s.width),V.push((M+y)/s.width),V.push((u+S)/s.height),V.push((g+v)/s.height);var K=Math.max.apply(Math,V);K>1&&(l/=K,u/=K,f/=K,g/=K,y/=K,v/=K,M/=K,S/=K);var G=s.width-f,z=s.height-v,q=s.width-y,$=s.height-S,Y=t.borderTopWidth,E=t.borderRightWidth,_=t.borderBottomWidth,C=t.borderLeftWidth,D=Kt(t.paddingTop,e.bounds.width),j=Kt(t.paddingRight,e.bounds.width),Q=Kt(t.paddingBottom,e.bounds.width),U=Kt(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=l>0||u>0?tr(s.left+C/3,s.top+Y/3,l-C/3,u-Y/3,jt.TOP_LEFT):new _e(s.left+C/3,s.top+Y/3),this.topRightBorderDoubleOuterBox=l>0||u>0?tr(s.left+G,s.top+Y/3,f-E/3,g-Y/3,jt.TOP_RIGHT):new _e(s.left+s.width-E/3,s.top+Y/3),this.bottomRightBorderDoubleOuterBox=y>0||v>0?tr(s.left+q,s.top+z,y-E/3,v-_/3,jt.BOTTOM_RIGHT):new _e(s.left+s.width-E/3,s.top+s.height-_/3),this.bottomLeftBorderDoubleOuterBox=M>0||S>0?tr(s.left+C/3,s.top+$,M-C/3,S-_/3,jt.BOTTOM_LEFT):new _e(s.left+C/3,s.top+s.height-_/3),this.topLeftBorderDoubleInnerBox=l>0||u>0?tr(s.left+C*2/3,s.top+Y*2/3,l-C*2/3,u-Y*2/3,jt.TOP_LEFT):new _e(s.left+C*2/3,s.top+Y*2/3),this.topRightBorderDoubleInnerBox=l>0||u>0?tr(s.left+G,s.top+Y*2/3,f-E*2/3,g-Y*2/3,jt.TOP_RIGHT):new _e(s.left+s.width-E*2/3,s.top+Y*2/3),this.bottomRightBorderDoubleInnerBox=y>0||v>0?tr(s.left+q,s.top+z,y-E*2/3,v-_*2/3,jt.BOTTOM_RIGHT):new _e(s.left+s.width-E*2/3,s.top+s.height-_*2/3),this.bottomLeftBorderDoubleInnerBox=M>0||S>0?tr(s.left+C*2/3,s.top+$,M-C*2/3,S-_*2/3,jt.BOTTOM_LEFT):new _e(s.left+C*2/3,s.top+s.height-_*2/3),this.topLeftBorderStroke=l>0||u>0?tr(s.left+C/2,s.top+Y/2,l-C/2,u-Y/2,jt.TOP_LEFT):new _e(s.left+C/2,s.top+Y/2),this.topRightBorderStroke=l>0||u>0?tr(s.left+G,s.top+Y/2,f-E/2,g-Y/2,jt.TOP_RIGHT):new _e(s.left+s.width-E/2,s.top+Y/2),this.bottomRightBorderStroke=y>0||v>0?tr(s.left+q,s.top+z,y-E/2,v-_/2,jt.BOTTOM_RIGHT):new _e(s.left+s.width-E/2,s.top+s.height-_/2),this.bottomLeftBorderStroke=M>0||S>0?tr(s.left+C/2,s.top+$,M-C/2,S-_/2,jt.BOTTOM_LEFT):new _e(s.left+C/2,s.top+s.height-_/2),this.topLeftBorderBox=l>0||u>0?tr(s.left,s.top,l,u,jt.TOP_LEFT):new _e(s.left,s.top),this.topRightBorderBox=f>0||g>0?tr(s.left+G,s.top,f,g,jt.TOP_RIGHT):new _e(s.left+s.width,s.top),this.bottomRightBorderBox=y>0||v>0?tr(s.left+q,s.top+z,y,v,jt.BOTTOM_RIGHT):new _e(s.left+s.width,s.top+s.height),this.bottomLeftBorderBox=M>0||S>0?tr(s.left,s.top+$,M,S,jt.BOTTOM_LEFT):new _e(s.left,s.top+s.height),this.topLeftPaddingBox=l>0||u>0?tr(s.left+C,s.top+Y,Math.max(0,l-C),Math.max(0,u-Y),jt.TOP_LEFT):new _e(s.left+C,s.top+Y),this.topRightPaddingBox=f>0||g>0?tr(s.left+Math.min(G,s.width-E),s.top+Y,G>s.width+E?0:Math.max(0,f-E),Math.max(0,g-Y),jt.TOP_RIGHT):new _e(s.left+s.width-E,s.top+Y),this.bottomRightPaddingBox=y>0||v>0?tr(s.left+Math.min(q,s.width-C),s.top+Math.min(z,s.height-_),Math.max(0,y-E),Math.max(0,v-_),jt.BOTTOM_RIGHT):new _e(s.left+s.width-E,s.top+s.height-_),this.bottomLeftPaddingBox=M>0||S>0?tr(s.left+C,s.top+Math.min($,s.height-_),Math.max(0,M-C),Math.max(0,S-_),jt.BOTTOM_LEFT):new _e(s.left+C,s.top+s.height-_),this.topLeftContentBox=l>0||u>0?tr(s.left+C+U,s.top+Y+D,Math.max(0,l-(C+U)),Math.max(0,u-(Y+D)),jt.TOP_LEFT):new _e(s.left+C+U,s.top+Y+D),this.topRightContentBox=f>0||g>0?tr(s.left+Math.min(G,s.width+C+U),s.top+Y+D,G>s.width+C+U?0:f-C+U,g-(Y+D),jt.TOP_RIGHT):new _e(s.left+s.width-(E+j),s.top+Y+D),this.bottomRightContentBox=y>0||v>0?tr(s.left+Math.min(q,s.width-(C+U)),s.top+Math.min(z,s.height+Y+D),Math.max(0,y-(E+j)),v-(_+Q),jt.BOTTOM_RIGHT):new _e(s.left+s.width-(E+j),s.top+s.height-(_+Q)),this.bottomLeftContentBox=M>0||S>0?tr(s.left+C+U,s.top+$,Math.max(0,M-(C+U)),S-(_+Q),jt.BOTTOM_LEFT):new _e(s.left+C+U,s.top+s.height-(_+Q))}return r})(),jt;(function(r){r[r.TOP_LEFT=0]="TOP_LEFT",r[r.TOP_RIGHT=1]="TOP_RIGHT",r[r.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",r[r.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(jt||(jt={}));var tr=function(r,e,t,s,A){var l=4*((Math.sqrt(2)-1)/3),u=t*l,d=s*l,f=r+t,g=e+s;switch(A){case jt.TOP_LEFT:return new fh(new _e(r,g),new _e(r,g-d),new _e(f-u,e),new _e(f,e));case jt.TOP_RIGHT:return new fh(new _e(r,e),new _e(r+u,e),new _e(f,g-d),new _e(f,g));case jt.BOTTOM_RIGHT:return new fh(new _e(f,e),new _e(f,e+d),new _e(r+u,g),new _e(r,g));case jt.BOTTOM_LEFT:default:return new fh(new _e(f,g),new _e(f-u,g),new _e(r,e+d),new _e(r,e))}},df=function(r){return[r.topLeftBorderBox,r.topRightBorderBox,r.bottomRightBorderBox,r.bottomLeftBorderBox]},EH=function(r){return[r.topLeftContentBox,r.topRightContentBox,r.bottomRightContentBox,r.bottomLeftContentBox]},hf=function(r){return[r.topLeftPaddingBox,r.topRightPaddingBox,r.bottomRightPaddingBox,r.bottomLeftPaddingBox]},NH=(function(){function r(e,t,s){this.offsetX=e,this.offsetY=t,this.matrix=s,this.type=0,this.target=6}return r})(),mh=(function(){function r(e,t){this.path=e,this.target=t,this.type=1}return r})(),SH=(function(){function r(e){this.opacity=e,this.type=2,this.target=6}return r})(),_H=function(r){return r.type===0},tS=function(r){return r.type===1},jH=function(r){return r.type===2},c1=function(r,e){return r.length===e.length?r.some(function(t,s){return t===e[s]}):!1},TH=function(r,e,t,s,A){return r.map(function(l,u){switch(u){case 0:return l.add(e,t);case 1:return l.add(e+s,t);case 2:return l.add(e+s,t+A);case 3:return l.add(e,t+A)}return l})},rS=(function(){function r(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return r})(),sS=(function(){function r(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new CH(this.container),this.container.styles.opacity<1&&this.effects.push(new SH(this.container.styles.opacity)),this.container.styles.transform!==null){var s=this.container.bounds.left+this.container.styles.transformOrigin[0].number,A=this.container.bounds.top+this.container.styles.transformOrigin[1].number,l=this.container.styles.transform;this.effects.push(new NH(s,A,l))}if(this.container.styles.overflowX!==0){var u=df(this.curves),d=hf(this.curves);c1(u,d)?this.effects.push(new mh(u,6)):(this.effects.push(new mh(u,2)),this.effects.push(new mh(d,4)))}}return r.prototype.getEffects=function(e){for(var t=[2,3].indexOf(this.container.styles.position)===-1,s=this.parent,A=this.effects.slice(0);s;){var l=s.effects.filter(function(f){return!tS(f)});if(t||s.container.styles.position!==0||!s.parent){if(A.unshift.apply(A,l),t=[2,3].indexOf(s.container.styles.position)===-1,s.container.styles.overflowX!==0){var u=df(s.curves),d=hf(s.curves);c1(u,d)||A.unshift(new mh(d,6))}}else A.unshift.apply(A,l);s=s.parent}return A.filter(function(f){return Qr(f.target,e)})},r})(),zx=function(r,e,t,s){r.container.elements.forEach(function(A){var l=Qr(A.flags,4),u=Qr(A.flags,2),d=new sS(A,r);Qr(A.styles.display,2048)&&s.push(d);var f=Qr(A.flags,8)?[]:s;if(l||u){var g=l||A.styles.isPositioned()?t:e,x=new rS(d);if(A.styles.isPositioned()||A.styles.opacity<1||A.styles.isTransformed()){var y=A.styles.zIndex.order;if(y<0){var v=0;g.negativeZIndex.some(function(M,S){return y>M.element.container.styles.zIndex.order?(v=S,!1):v>0}),g.negativeZIndex.splice(v,0,x)}else if(y>0){var N=0;g.positiveZIndex.some(function(M,S){return y>=M.element.container.styles.zIndex.order?(N=S+1,!1):N>0}),g.positiveZIndex.splice(N,0,x)}else g.zeroOrAutoZIndexOrTransformedOrOpacity.push(x)}else A.styles.isFloating()?g.nonPositionedFloats.push(x):g.nonPositionedInlineLevel.push(x);zx(d,x,l?x:t,f)}else A.styles.isInlineLevel()?e.inlineLevel.push(d):e.nonInlineLevel.push(d),zx(d,e,t,f);Qr(A.flags,8)&&nS(A,f)})},nS=function(r,e){for(var t=r instanceof Lx?r.start:1,s=r instanceof Lx?r.reversed:!1,A=0;A<e.length;A++){var l=e[A];l.container instanceof ON&&typeof l.container.value=="number"&&l.container.value!==0&&(t=l.container.value),l.listValue=au(t,l.container.styles.listStyleType,!0),t+=s?-1:1}},UH=function(r){var e=new sS(r,null),t=new rS(e),s=[];return zx(e,t,t,s),nS(e.container,s),t},u1=function(r,e){switch(e){case 0:return dn(r.topLeftBorderBox,r.topLeftPaddingBox,r.topRightBorderBox,r.topRightPaddingBox);case 1:return dn(r.topRightBorderBox,r.topRightPaddingBox,r.bottomRightBorderBox,r.bottomRightPaddingBox);case 2:return dn(r.bottomRightBorderBox,r.bottomRightPaddingBox,r.bottomLeftBorderBox,r.bottomLeftPaddingBox);default:return dn(r.bottomLeftBorderBox,r.bottomLeftPaddingBox,r.topLeftBorderBox,r.topLeftPaddingBox)}},QH=function(r,e){switch(e){case 0:return dn(r.topLeftBorderBox,r.topLeftBorderDoubleOuterBox,r.topRightBorderBox,r.topRightBorderDoubleOuterBox);case 1:return dn(r.topRightBorderBox,r.topRightBorderDoubleOuterBox,r.bottomRightBorderBox,r.bottomRightBorderDoubleOuterBox);case 2:return dn(r.bottomRightBorderBox,r.bottomRightBorderDoubleOuterBox,r.bottomLeftBorderBox,r.bottomLeftBorderDoubleOuterBox);default:return dn(r.bottomLeftBorderBox,r.bottomLeftBorderDoubleOuterBox,r.topLeftBorderBox,r.topLeftBorderDoubleOuterBox)}},FH=function(r,e){switch(e){case 0:return dn(r.topLeftBorderDoubleInnerBox,r.topLeftPaddingBox,r.topRightBorderDoubleInnerBox,r.topRightPaddingBox);case 1:return dn(r.topRightBorderDoubleInnerBox,r.topRightPaddingBox,r.bottomRightBorderDoubleInnerBox,r.bottomRightPaddingBox);case 2:return dn(r.bottomRightBorderDoubleInnerBox,r.bottomRightPaddingBox,r.bottomLeftBorderDoubleInnerBox,r.bottomLeftPaddingBox);default:return dn(r.bottomLeftBorderDoubleInnerBox,r.bottomLeftPaddingBox,r.topLeftBorderDoubleInnerBox,r.topLeftPaddingBox)}},IH=function(r,e){switch(e){case 0:return gh(r.topLeftBorderStroke,r.topRightBorderStroke);case 1:return gh(r.topRightBorderStroke,r.bottomRightBorderStroke);case 2:return gh(r.bottomRightBorderStroke,r.bottomLeftBorderStroke);default:return gh(r.bottomLeftBorderStroke,r.topLeftBorderStroke)}},gh=function(r,e){var t=[];return on(r)?t.push(r.subdivide(.5,!1)):t.push(r),on(e)?t.push(e.subdivide(.5,!0)):t.push(e),t},dn=function(r,e,t,s){var A=[];return on(r)?A.push(r.subdivide(.5,!1)):A.push(r),on(t)?A.push(t.subdivide(.5,!0)):A.push(t),on(s)?A.push(s.subdivide(.5,!0).reverse()):A.push(s),on(e)?A.push(e.subdivide(.5,!1).reverse()):A.push(e),A},aS=function(r){var e=r.bounds,t=r.styles;return e.add(t.borderLeftWidth,t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth),-(t.borderTopWidth+t.borderBottomWidth))},ff=function(r){var e=r.styles,t=r.bounds,s=Kt(e.paddingLeft,t.width),A=Kt(e.paddingRight,t.width),l=Kt(e.paddingTop,t.width),u=Kt(e.paddingBottom,t.width);return t.add(s+e.borderLeftWidth,l+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+s+A),-(e.borderTopWidth+e.borderBottomWidth+l+u))},DH=function(r,e){return r===0?e.bounds:r===2?ff(e):aS(e)},kH=function(r,e){return r===0?e.bounds:r===2?ff(e):aS(e)},Sp=function(r,e,t){var s=DH(zo(r.styles.backgroundOrigin,e),r),A=kH(zo(r.styles.backgroundClip,e),r),l=RH(zo(r.styles.backgroundSize,e),t,s),u=l[0],d=l[1],f=Tc(zo(r.styles.backgroundPosition,e),s.width-u,s.height-d),g=MH(zo(r.styles.backgroundRepeat,e),f,l,s,A),x=Math.round(s.left+f[0]),y=Math.round(s.top+f[1]);return[g,x,y,u,d]},ko=function(r){return Lt(r)&&r.value===Zo.AUTO},ph=function(r){return typeof r=="number"},RH=function(r,e,t){var s=e[0],A=e[1],l=e[2],u=r[0],d=r[1];if(!u)return[0,0];if(Sr(u)&&d&&Sr(d))return[Kt(u,t.width),Kt(d,t.height)];var f=ph(l);if(Lt(u)&&(u.value===Zo.CONTAIN||u.value===Zo.COVER)){if(ph(l)){var g=t.width/t.height;return g<l!=(u.value===Zo.COVER)?[t.width,t.width/l]:[t.height*l,t.height]}return[t.width,t.height]}var x=ph(s),y=ph(A),v=x||y;if(ko(u)&&(!d||ko(d))){if(x&&y)return[s,A];if(!f&&!v)return[t.width,t.height];if(v&&f){var N=x?s:A*l,M=y?A:s/l;return[N,M]}var S=x?s:t.width,V=y?A:t.height;return[S,V]}if(f){var K=0,G=0;return Sr(u)?K=Kt(u,t.width):Sr(d)&&(G=Kt(d,t.height)),ko(u)?K=G*l:(!d||ko(d))&&(G=K/l),[K,G]}var z=null,q=null;if(Sr(u)?z=Kt(u,t.width):d&&Sr(d)&&(q=Kt(d,t.height)),z!==null&&(!d||ko(d))&&(q=x&&y?z/s*A:t.height),q!==null&&ko(u)&&(z=x&&y?q/A*s:t.width),z!==null&&q!==null)return[z,q];throw new Error("Unable to calculate background-size for element")},zo=function(r,e){var t=r[e];return typeof t>"u"?r[0]:t},MH=function(r,e,t,s,A){var l=e[0],u=e[1],d=t[0],f=t[1];switch(r){case 2:return[new _e(Math.round(s.left),Math.round(s.top+u)),new _e(Math.round(s.left+s.width),Math.round(s.top+u)),new _e(Math.round(s.left+s.width),Math.round(f+s.top+u)),new _e(Math.round(s.left),Math.round(f+s.top+u))];case 3:return[new _e(Math.round(s.left+l),Math.round(s.top)),new _e(Math.round(s.left+l+d),Math.round(s.top)),new _e(Math.round(s.left+l+d),Math.round(s.height+s.top)),new _e(Math.round(s.left+l),Math.round(s.height+s.top))];case 1:return[new _e(Math.round(s.left+l),Math.round(s.top+u)),new _e(Math.round(s.left+l+d),Math.round(s.top+u)),new _e(Math.round(s.left+l+d),Math.round(s.top+u+f)),new _e(Math.round(s.left+l),Math.round(s.top+u+f))];default:return[new _e(Math.round(A.left),Math.round(A.top)),new _e(Math.round(A.left+A.width),Math.round(A.top)),new _e(Math.round(A.left+A.width),Math.round(A.height+A.top)),new _e(Math.round(A.left),Math.round(A.height+A.top))]}},LH="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",d1="Hidden Text",HH=(function(){function r(e){this._data={},this._document=e}return r.prototype.parseMetrics=function(e,t){var s=this._document.createElement("div"),A=this._document.createElement("img"),l=this._document.createElement("span"),u=this._document.body;s.style.visibility="hidden",s.style.fontFamily=e,s.style.fontSize=t,s.style.margin="0",s.style.padding="0",s.style.whiteSpace="nowrap",u.appendChild(s),A.src=LH,A.width=1,A.height=1,A.style.margin="0",A.style.padding="0",A.style.verticalAlign="baseline",l.style.fontFamily=e,l.style.fontSize=t,l.style.margin="0",l.style.padding="0",l.appendChild(this._document.createTextNode(d1)),s.appendChild(l),s.appendChild(A);var d=A.offsetTop-l.offsetTop+2;s.removeChild(l),s.appendChild(this._document.createTextNode(d1)),s.style.lineHeight="normal",A.style.verticalAlign="super";var f=A.offsetTop-s.offsetTop+2;return u.removeChild(s),{baseline:d,middle:f}},r.prototype.getMetrics=function(e,t){var s=e+" "+t;return typeof this._data[s]>"u"&&(this._data[s]=this.parseMetrics(e,t)),this._data[s]},r})(),iS=(function(){function r(e,t){this.context=e,this.options=t}return r})(),OH=1e4,PH=(function(r){Un(e,r);function e(t,s){var A=r.call(this,t,s)||this;return A._activeEffects=[],A.canvas=s.canvas?s.canvas:document.createElement("canvas"),A.ctx=A.canvas.getContext("2d"),s.canvas||(A.canvas.width=Math.floor(s.width*s.scale),A.canvas.height=Math.floor(s.height*s.scale),A.canvas.style.width=s.width+"px",A.canvas.style.height=s.height+"px"),A.fontMetrics=new HH(document),A.ctx.scale(A.options.scale,A.options.scale),A.ctx.translate(-s.x,-s.y),A.ctx.textBaseline="bottom",A._activeEffects=[],A.context.logger.debug("Canvas renderer initialized ("+s.width+"x"+s.height+") with scale "+s.scale),A}return e.prototype.applyEffects=function(t){for(var s=this;this._activeEffects.length;)this.popEffect();t.forEach(function(A){return s.applyEffect(A)})},e.prototype.applyEffect=function(t){this.ctx.save(),jH(t)&&(this.ctx.globalAlpha=t.opacity),_H(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),tS(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(t){return xs(this,void 0,void 0,function(){var s;return ns(this,function(A){switch(A.label){case 0:return s=t.element.container.styles,s.isVisible()?[4,this.renderStackContent(t)]:[3,2];case 1:A.sent(),A.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(t){return xs(this,void 0,void 0,function(){return ns(this,function(s){switch(s.label){case 0:if(Qr(t.container.flags,16))debugger;return t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return s.sent(),[4,this.renderNodeContent(t)];case 2:s.sent(),s.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(t,s,A){var l=this;if(s===0)this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+A);else{var u=Y0(t.text);u.reduce(function(d,f){return l.ctx.fillText(f,d,t.bounds.top+A),d+l.ctx.measureText(f).width},t.bounds.left)}},e.prototype.createFontStyle=function(t){var s=t.fontVariant.filter(function(u){return u==="normal"||u==="small-caps"}).join(""),A=qH(t.fontFamily).join(", "),l=bu(t.fontSize)?""+t.fontSize.number+t.fontSize.unit:t.fontSize.number+"px";return[[t.fontStyle,s,t.fontWeight,l,A].join(" "),A,l]},e.prototype.renderTextNode=function(t,s){return xs(this,void 0,void 0,function(){var A,l,u,d,f,g,x,y,v=this;return ns(this,function(N){return A=this.createFontStyle(s),l=A[0],u=A[1],d=A[2],this.ctx.font=l,this.ctx.direction=s.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",f=this.fontMetrics.getMetrics(u,d),g=f.baseline,x=f.middle,y=s.paintOrder,t.textBounds.forEach(function(M){y.forEach(function(S){switch(S){case 0:v.ctx.fillStyle=Lr(s.color),v.renderTextWithLetterSpacing(M,s.letterSpacing,g);var V=s.textShadow;V.length&&M.text.trim().length&&(V.slice(0).reverse().forEach(function(K){v.ctx.shadowColor=Lr(K.color),v.ctx.shadowOffsetX=K.offsetX.number*v.options.scale,v.ctx.shadowOffsetY=K.offsetY.number*v.options.scale,v.ctx.shadowBlur=K.blur.number,v.renderTextWithLetterSpacing(M,s.letterSpacing,g)}),v.ctx.shadowColor="",v.ctx.shadowOffsetX=0,v.ctx.shadowOffsetY=0,v.ctx.shadowBlur=0),s.textDecorationLine.length&&(v.ctx.fillStyle=Lr(s.textDecorationColor||s.color),s.textDecorationLine.forEach(function(K){switch(K){case 1:v.ctx.fillRect(M.bounds.left,Math.round(M.bounds.top+g),M.bounds.width,1);break;case 2:v.ctx.fillRect(M.bounds.left,Math.round(M.bounds.top),M.bounds.width,1);break;case 3:v.ctx.fillRect(M.bounds.left,Math.ceil(M.bounds.top+x),M.bounds.width,1);break}}));break;case 1:s.webkitTextStrokeWidth&&M.text.trim().length&&(v.ctx.strokeStyle=Lr(s.webkitTextStrokeColor),v.ctx.lineWidth=s.webkitTextStrokeWidth,v.ctx.lineJoin=window.chrome?"miter":"round",v.ctx.strokeText(M.text,M.bounds.left,M.bounds.top+g)),v.ctx.strokeStyle="",v.ctx.lineWidth=0,v.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(t,s,A){if(A&&t.intrinsicWidth>0&&t.intrinsicHeight>0){var l=ff(t),u=hf(s);this.path(u),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(A,0,0,t.intrinsicWidth,t.intrinsicHeight,l.left,l.top,l.width,l.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(t){return xs(this,void 0,void 0,function(){var s,A,l,u,d,f,G,G,g,x,y,v,q,N,M,$,S,V,K,G,z,q,$;return ns(this,function(Y){switch(Y.label){case 0:this.applyEffects(t.getEffects(4)),s=t.container,A=t.curves,l=s.styles,u=0,d=s.textNodes,Y.label=1;case 1:return u<d.length?(f=d[u],[4,this.renderTextNode(f,l)]):[3,4];case 2:Y.sent(),Y.label=3;case 3:return u++,[3,1];case 4:if(!(s instanceof MN))return[3,8];Y.label=5;case 5:return Y.trys.push([5,7,,8]),[4,this.context.cache.match(s.src)];case 6:return G=Y.sent(),this.renderReplacedElement(s,A,G),[3,8];case 7:return Y.sent(),this.context.logger.error("Error loading image "+s.src),[3,8];case 8:if(s instanceof LN&&this.renderReplacedElement(s,A,s.canvas),!(s instanceof HN))return[3,12];Y.label=9;case 9:return Y.trys.push([9,11,,12]),[4,this.context.cache.match(s.svg)];case 10:return G=Y.sent(),this.renderReplacedElement(s,A,G),[3,12];case 11:return Y.sent(),this.context.logger.error("Error loading svg "+s.svg.substring(0,255)),[3,12];case 12:return s instanceof zN&&s.tree?(g=new e(this.context,{scale:this.options.scale,backgroundColor:s.backgroundColor,x:0,y:0,width:s.width,height:s.height}),[4,g.render(s.tree)]):[3,14];case 13:x=Y.sent(),s.width&&s.height&&this.ctx.drawImage(x,0,0,s.width,s.height,s.bounds.left,s.bounds.top,s.bounds.width,s.bounds.height),Y.label=14;case 14:if(s instanceof $0&&(y=Math.min(s.bounds.width,s.bounds.height),s.type===of?s.checked&&(this.ctx.save(),this.path([new _e(s.bounds.left+y*.39363,s.bounds.top+y*.79),new _e(s.bounds.left+y*.16,s.bounds.top+y*.5549),new _e(s.bounds.left+y*.27347,s.bounds.top+y*.44071),new _e(s.bounds.left+y*.39694,s.bounds.top+y*.5649),new _e(s.bounds.left+y*.72983,s.bounds.top+y*.23),new _e(s.bounds.left+y*.84,s.bounds.top+y*.34085),new _e(s.bounds.left+y*.39363,s.bounds.top+y*.79)]),this.ctx.fillStyle=Lr(ZC),this.ctx.fill(),this.ctx.restore()):s.type===lf&&s.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(s.bounds.left+y/2,s.bounds.top+y/2,y/4,0,Math.PI*2,!0),this.ctx.fillStyle=Lr(ZC),this.ctx.fill(),this.ctx.restore())),VH(s)&&s.value.length){switch(v=this.createFontStyle(l),q=v[0],N=v[1],M=this.fontMetrics.getMetrics(q,N).baseline,this.ctx.font=q,this.ctx.fillStyle=Lr(l.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=KH(s.styles.textAlign),$=ff(s),S=0,s.styles.textAlign){case 1:S+=$.width/2;break;case 2:S+=$.width;break}V=$.add(S,0,0,-$.height/2+1),this.ctx.save(),this.path([new _e($.left,$.top),new _e($.left+$.width,$.top),new _e($.left+$.width,$.top+$.height),new _e($.left,$.top+$.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Kc(s.value,V),l.letterSpacing,M),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Qr(s.styles.display,2048))return[3,20];if(s.styles.listStyleImage===null)return[3,19];if(K=s.styles.listStyleImage,K.type!==0)return[3,18];G=void 0,z=K.url,Y.label=15;case 15:return Y.trys.push([15,17,,18]),[4,this.context.cache.match(z)];case 16:return G=Y.sent(),this.ctx.drawImage(G,s.bounds.left-(G.width+10),s.bounds.top),[3,18];case 17:return Y.sent(),this.context.logger.error("Error loading list-style-image "+z),[3,18];case 18:return[3,20];case 19:t.listValue&&s.styles.listStyleType!==-1&&(q=this.createFontStyle(l)[0],this.ctx.font=q,this.ctx.fillStyle=Lr(l.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",$=new Ma(s.bounds.left,s.bounds.top+Kt(s.styles.paddingTop,s.bounds.width),s.bounds.width,kC(l.lineHeight,l.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Kc(t.listValue,$),l.letterSpacing,kC(l.lineHeight,l.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),Y.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(t){return xs(this,void 0,void 0,function(){var s,A,K,l,u,K,d,f,K,g,x,K,y,v,K,N,M,K,S,V,K;return ns(this,function(G){switch(G.label){case 0:if(Qr(t.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:G.sent(),s=0,A=t.negativeZIndex,G.label=2;case 2:return s<A.length?(K=A[s],[4,this.renderStack(K)]):[3,5];case 3:G.sent(),G.label=4;case 4:return s++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:G.sent(),l=0,u=t.nonInlineLevel,G.label=7;case 7:return l<u.length?(K=u[l],[4,this.renderNode(K)]):[3,10];case 8:G.sent(),G.label=9;case 9:return l++,[3,7];case 10:d=0,f=t.nonPositionedFloats,G.label=11;case 11:return d<f.length?(K=f[d],[4,this.renderStack(K)]):[3,14];case 12:G.sent(),G.label=13;case 13:return d++,[3,11];case 14:g=0,x=t.nonPositionedInlineLevel,G.label=15;case 15:return g<x.length?(K=x[g],[4,this.renderStack(K)]):[3,18];case 16:G.sent(),G.label=17;case 17:return g++,[3,15];case 18:y=0,v=t.inlineLevel,G.label=19;case 19:return y<v.length?(K=v[y],[4,this.renderNode(K)]):[3,22];case 20:G.sent(),G.label=21;case 21:return y++,[3,19];case 22:N=0,M=t.zeroOrAutoZIndexOrTransformedOrOpacity,G.label=23;case 23:return N<M.length?(K=M[N],[4,this.renderStack(K)]):[3,26];case 24:G.sent(),G.label=25;case 25:return N++,[3,23];case 26:S=0,V=t.positiveZIndex,G.label=27;case 27:return S<V.length?(K=V[S],[4,this.renderStack(K)]):[3,30];case 28:G.sent(),G.label=29;case 29:return S++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},e.prototype.formatPath=function(t){var s=this;t.forEach(function(A,l){var u=on(A)?A.start:A;l===0?s.ctx.moveTo(u.x,u.y):s.ctx.lineTo(u.x,u.y),on(A)&&s.ctx.bezierCurveTo(A.startControl.x,A.startControl.y,A.endControl.x,A.endControl.y,A.end.x,A.end.y)})},e.prototype.renderRepeat=function(t,s,A,l){this.path(t),this.ctx.fillStyle=s,this.ctx.translate(A,l),this.ctx.fill(),this.ctx.translate(-A,-l)},e.prototype.resizeImage=function(t,s,A){var l;if(t.width===s&&t.height===A)return t;var u=(l=this.canvas.ownerDocument)!==null&&l!==void 0?l:document,d=u.createElement("canvas");d.width=Math.max(1,s),d.height=Math.max(1,A);var f=d.getContext("2d");return f.drawImage(t,0,0,t.width,t.height,0,0,s,A),d},e.prototype.renderBackgroundImage=function(t){return xs(this,void 0,void 0,function(){var s,A,l,u,d,f;return ns(this,function(g){switch(g.label){case 0:s=t.styles.backgroundImage.length-1,A=function(x){var y,v,N,D,H,F,U,T,_,M,D,H,F,U,T,S,V,K,G,z,q,$,Y,E,_,C,D,j,Q,U,T,W,H,F,L,te,Ae,P,J,le,ge,Ee;return ns(this,function(Ce){switch(Ce.label){case 0:if(x.type!==0)return[3,5];y=void 0,v=x.url,Ce.label=1;case 1:return Ce.trys.push([1,3,,4]),[4,l.context.cache.match(v)];case 2:return y=Ce.sent(),[3,4];case 3:return Ce.sent(),l.context.logger.error("Error loading background-image "+v),[3,4];case 4:return y&&(N=Sp(t,s,[y.width,y.height,y.width/y.height]),D=N[0],H=N[1],F=N[2],U=N[3],T=N[4],_=l.ctx.createPattern(l.resizeImage(y,U,T),"repeat"),l.renderRepeat(D,_,H,F)),[3,6];case 5:_3(x)?(M=Sp(t,s,[null,null,null]),D=M[0],H=M[1],F=M[2],U=M[3],T=M[4],S=B3(x.angle,U,T),V=S[0],K=S[1],G=S[2],z=S[3],q=S[4],$=document.createElement("canvas"),$.width=U,$.height=T,Y=$.getContext("2d"),E=Y.createLinearGradient(K,z,G,q),IC(x.stops,V).forEach(function(Se){return E.addColorStop(Se.stop,Lr(Se.color))}),Y.fillStyle=E,Y.fillRect(0,0,U,T),U>0&&T>0&&(_=l.ctx.createPattern($,"repeat"),l.renderRepeat(D,_,H,F))):j3(x)&&(C=Sp(t,s,[null,null,null]),D=C[0],j=C[1],Q=C[2],U=C[3],T=C[4],W=x.position.length===0?[K0]:x.position,H=Kt(W[0],U),F=Kt(W[W.length-1],T),L=C3(x,H,F,U,T),te=L[0],Ae=L[1],te>0&&Ae>0&&(P=l.ctx.createRadialGradient(j+H,Q+F,0,j+H,Q+F,te),IC(x.stops,te*2).forEach(function(Se){return P.addColorStop(Se.stop,Lr(Se.color))}),l.path(D),l.ctx.fillStyle=P,te!==Ae?(J=t.bounds.left+.5*t.bounds.width,le=t.bounds.top+.5*t.bounds.height,ge=Ae/te,Ee=1/ge,l.ctx.save(),l.ctx.translate(J,le),l.ctx.transform(1,0,0,ge,0,0),l.ctx.translate(-J,-le),l.ctx.fillRect(j,Ee*(Q-le)+le,U,T*Ee),l.ctx.restore()):l.ctx.fill())),Ce.label=6;case 6:return s--,[2]}})},l=this,u=0,d=t.styles.backgroundImage.slice(0).reverse(),g.label=1;case 1:return u<d.length?(f=d[u],[5,A(f)]):[3,4];case 2:g.sent(),g.label=3;case 3:return u++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(t,s,A){return xs(this,void 0,void 0,function(){return ns(this,function(l){return this.path(u1(A,s)),this.ctx.fillStyle=Lr(t),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(t,s,A,l){return xs(this,void 0,void 0,function(){var u,d;return ns(this,function(f){switch(f.label){case 0:return s<3?[4,this.renderSolidBorder(t,A,l)]:[3,2];case 1:return f.sent(),[2];case 2:return u=QH(l,A),this.path(u),this.ctx.fillStyle=Lr(t),this.ctx.fill(),d=FH(l,A),this.path(d),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(t){return xs(this,void 0,void 0,function(){var s,A,l,u,d,f,g,x,y=this;return ns(this,function(v){switch(v.label){case 0:return this.applyEffects(t.getEffects(2)),s=t.container.styles,A=!Ri(s.backgroundColor)||s.backgroundImage.length,l=[{style:s.borderTopStyle,color:s.borderTopColor,width:s.borderTopWidth},{style:s.borderRightStyle,color:s.borderRightColor,width:s.borderRightWidth},{style:s.borderBottomStyle,color:s.borderBottomColor,width:s.borderBottomWidth},{style:s.borderLeftStyle,color:s.borderLeftColor,width:s.borderLeftWidth}],u=zH(zo(s.backgroundClip,0),t.curves),A||s.boxShadow.length?(this.ctx.save(),this.path(u),this.ctx.clip(),Ri(s.backgroundColor)||(this.ctx.fillStyle=Lr(s.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:v.sent(),this.ctx.restore(),s.boxShadow.slice(0).reverse().forEach(function(N){y.ctx.save();var M=df(t.curves),S=N.inset?0:OH,V=TH(M,-S+(N.inset?1:-1)*N.spread.number,(N.inset?1:-1)*N.spread.number,N.spread.number*(N.inset?-2:2),N.spread.number*(N.inset?-2:2));N.inset?(y.path(M),y.ctx.clip(),y.mask(V)):(y.mask(M),y.ctx.clip(),y.path(V)),y.ctx.shadowOffsetX=N.offsetX.number+S,y.ctx.shadowOffsetY=N.offsetY.number,y.ctx.shadowColor=Lr(N.color),y.ctx.shadowBlur=N.blur.number,y.ctx.fillStyle=N.inset?Lr(N.color):"rgba(0,0,0,1)",y.ctx.fill(),y.ctx.restore()}),v.label=2;case 2:d=0,f=0,g=l,v.label=3;case 3:return f<g.length?(x=g[f],x.style!==0&&!Ri(x.color)&&x.width>0?x.style!==2?[3,5]:[4,this.renderDashedDottedBorder(x.color,x.width,d,t.curves,2)]:[3,11]):[3,13];case 4:return v.sent(),[3,11];case 5:return x.style!==3?[3,7]:[4,this.renderDashedDottedBorder(x.color,x.width,d,t.curves,3)];case 6:return v.sent(),[3,11];case 7:return x.style!==4?[3,9]:[4,this.renderDoubleBorder(x.color,x.width,d,t.curves)];case 8:return v.sent(),[3,11];case 9:return[4,this.renderSolidBorder(x.color,d,t.curves)];case 10:v.sent(),v.label=11;case 11:d++,v.label=12;case 12:return f++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(t,s,A,l,u){return xs(this,void 0,void 0,function(){var d,f,g,x,y,v,N,M,S,V,K,G,z,q,$,Y,$,Y;return ns(this,function(E){return this.ctx.save(),d=IH(l,A),f=u1(l,A),u===2&&(this.path(f),this.ctx.clip()),on(f[0])?(g=f[0].start.x,x=f[0].start.y):(g=f[0].x,x=f[0].y),on(f[1])?(y=f[1].end.x,v=f[1].end.y):(y=f[1].x,v=f[1].y),A===0||A===2?N=Math.abs(g-y):N=Math.abs(x-v),this.ctx.beginPath(),u===3?this.formatPath(d):this.formatPath(f.slice(0,2)),M=s<3?s*3:s*2,S=s<3?s*2:s,u===3&&(M=s,S=s),V=!0,N<=M*2?V=!1:N<=M*2+S?(K=N/(2*M+S),M*=K,S*=K):(G=Math.floor((N+S)/(M+S)),z=(N-G*M)/(G-1),q=(N-(G+1)*M)/G,S=q<=0||Math.abs(S-z)<Math.abs(S-q)?z:q),V&&(u===3?this.ctx.setLineDash([0,M+S]):this.ctx.setLineDash([M,S])),u===3?(this.ctx.lineCap="round",this.ctx.lineWidth=s):this.ctx.lineWidth=s*2+1.1,this.ctx.strokeStyle=Lr(t),this.ctx.stroke(),this.ctx.setLineDash([]),u===2&&(on(f[0])&&($=f[3],Y=f[0],this.ctx.beginPath(),this.formatPath([new _e($.end.x,$.end.y),new _e(Y.start.x,Y.start.y)]),this.ctx.stroke()),on(f[1])&&($=f[1],Y=f[2],this.ctx.beginPath(),this.formatPath([new _e($.end.x,$.end.y),new _e(Y.start.x,Y.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(t){return xs(this,void 0,void 0,function(){var s;return ns(this,function(A){switch(A.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Lr(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),s=UH(t),[4,this.renderStack(s)];case 1:return A.sent(),this.applyEffects([]),[2,this.canvas]}})})},e})(iS),VH=function(r){return r instanceof VN||r instanceof PN?!0:r instanceof $0&&r.type!==lf&&r.type!==of},zH=function(r,e){switch(r){case 0:return df(e);case 2:return EH(e);default:return hf(e)}},KH=function(r){switch(r){case 1:return"center";case 2:return"right";default:return"left"}},GH=["-apple-system","system-ui"],qH=function(r){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?r.filter(function(e){return GH.indexOf(e)===-1}):r},YH=(function(r){Un(e,r);function e(t,s){var A=r.call(this,t,s)||this;return A.canvas=s.canvas?s.canvas:document.createElement("canvas"),A.ctx=A.canvas.getContext("2d"),A.options=s,A.canvas.width=Math.floor(s.width*s.scale),A.canvas.height=Math.floor(s.height*s.scale),A.canvas.style.width=s.width+"px",A.canvas.style.height=s.height+"px",A.ctx.scale(A.options.scale,A.options.scale),A.ctx.translate(-s.x,-s.y),A.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+s.width+"x"+s.height+" at "+s.x+","+s.y+") with scale "+s.scale),A}return e.prototype.render=function(t){return xs(this,void 0,void 0,function(){var s,A;return ns(this,function(l){switch(l.label){case 0:return s=Mx(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,$H(s)];case 1:return A=l.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Lr(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(A,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e})(iS),$H=function(r){return new Promise(function(e,t){var s=new Image;s.onload=function(){e(s)},s.onerror=t,s.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(r))})},XH=(function(){function r(e){var t=e.id,s=e.enabled;this.id=t,this.enabled=s,this.start=Date.now()}return r.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,$d([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},r.prototype.getTime=function(){return Date.now()-this.start},r.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,$d([this.id,this.getTime()+"ms"],e))},r.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,$d([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},r.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,$d([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},r.instances={},r})(),JH=(function(){function r(e,t){var s;this.windowBounds=t,this.instanceName="#"+r.instanceCount++,this.logger=new XH({id:this.instanceName,enabled:e.logging}),this.cache=(s=e.cache)!==null&&s!==void 0?s:new pH(this,e)}return r.instanceCount=1,r})(),WH=function(r,e){return e===void 0&&(e={}),ZH(r,e)};typeof window<"u"&&eS.setContext(window);var ZH=function(r,e){return xs(void 0,void 0,void 0,function(){var t,s,A,l,u,d,f,g,x,y,v,N,M,S,V,K,G,z,q,$,E,Y,E,_,C,D,j,Q,U,T,W,H,F,L,te,Ae,P,J,le,ge;return ns(this,function(Ee){switch(Ee.label){case 0:if(!r||typeof r!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(t=r.ownerDocument,!t)throw new Error("Element is not attached to a Document");if(s=t.defaultView,!s)throw new Error("Document is not attached to a Window");return A={allowTaint:(_=e.allowTaint)!==null&&_!==void 0?_:!1,imageTimeout:(C=e.imageTimeout)!==null&&C!==void 0?C:15e3,proxy:e.proxy,useCORS:(D=e.useCORS)!==null&&D!==void 0?D:!1},l=Bx({logging:(j=e.logging)!==null&&j!==void 0?j:!0,cache:e.cache},A),u={windowWidth:(Q=e.windowWidth)!==null&&Q!==void 0?Q:s.innerWidth,windowHeight:(U=e.windowHeight)!==null&&U!==void 0?U:s.innerHeight,scrollX:(T=e.scrollX)!==null&&T!==void 0?T:s.pageXOffset,scrollY:(W=e.scrollY)!==null&&W!==void 0?W:s.pageYOffset},d=new Ma(u.scrollX,u.scrollY,u.windowWidth,u.windowHeight),f=new JH(l,d),g=(H=e.foreignObjectRendering)!==null&&H!==void 0?H:!1,x={allowTaint:(F=e.allowTaint)!==null&&F!==void 0?F:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:g,copyStyles:g},f.logger.debug("Starting document clone with size "+d.width+"x"+d.height+" scrolled to "+-d.left+","+-d.top),y=new o1(f,r,x),v=y.clonedReferenceElement,v?[4,y.toIFrame(t,d)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return N=Ee.sent(),M=X0(v)||eH(v)?Tk(v.ownerDocument):Rf(f,v),S=M.width,V=M.height,K=M.left,G=M.top,z=eO(f,v,e.backgroundColor),q={canvas:e.canvas,backgroundColor:z,scale:(te=(L=e.scale)!==null&&L!==void 0?L:s.devicePixelRatio)!==null&&te!==void 0?te:1,x:((Ae=e.x)!==null&&Ae!==void 0?Ae:0)+K,y:((P=e.y)!==null&&P!==void 0?P:0)+G,width:(J=e.width)!==null&&J!==void 0?J:Math.ceil(S),height:(le=e.height)!==null&&le!==void 0?le:Math.ceil(V)},g?(f.logger.debug("Document cloned, using foreign object rendering"),E=new YH(f,q),[4,E.render(v)]):[3,3];case 2:return $=Ee.sent(),[3,5];case 3:return f.logger.debug("Document cloned, element located at "+K+","+G+" with size "+S+"x"+V+" using computed rendering"),f.logger.debug("Starting DOM parsing"),Y=GN(f,v),z===Y.styles.backgroundColor&&(Y.styles.backgroundColor=Fa.TRANSPARENT),f.logger.debug("Starting renderer for element at "+q.x+","+q.y+" with size "+q.width+"x"+q.height),E=new PH(f,q),[4,E.render(Y)];case 4:$=Ee.sent(),Ee.label=5;case 5:return(!((ge=e.removeContainer)!==null&&ge!==void 0)||ge)&&(o1.destroy(N)||f.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),f.logger.debug("Finished rendering"),[2,$]}})})},eO=function(r,e,t){var s=e.ownerDocument,A=s.documentElement?Vc(r,getComputedStyle(s.documentElement).backgroundColor):Fa.TRANSPARENT,l=s.body?Vc(r,getComputedStyle(s.body).backgroundColor):Fa.TRANSPARENT,u=typeof t=="string"?Vc(r,t):t===null?Fa.TRANSPARENT:4294967295;return e===s.documentElement?Ri(A)?Ri(l)?u:l:A:u};const tO=r=>{const e=new Set,t={};return r.forEach(s=>{if(!s.day||!s.startTime||!s.endTime)return;const A=s.day;t[A]||(t[A]=[]),t[A].push(s)}),Object.values(t).forEach(s=>{if(!(s.length<2))for(let A=0;A<s.length;A++)for(let l=A+1;l<s.length;l++){const u=s[A],d=s[l];Kx(u,d)&&(e.add(u.id),e.add(d.id))}}),e},xh=r=>{const[e,t]=r.split(":").map(Number);return e*60+t},Kx=(r,e)=>{if(!r.startTime||!r.endTime||!e.startTime||!e.endTime)return!1;const t=xh(r.startTime),s=xh(r.endTime),A=xh(e.startTime),l=xh(e.endTime);return t<l&&A<s},BA={A:{start:"07:00",end:"07:50"},1:{start:"08:10",end:"09:00"},2:{start:"09:10",end:"10:00"},3:{start:"10:10",end:"11:00"},4:{start:"11:10",end:"12:00"},B:{start:"12:10",end:"13:00"},5:{start:"13:10",end:"14:00"},6:{start:"14:10",end:"15:00"},7:{start:"15:10",end:"16:00"},8:{start:"16:10",end:"17:00"},9:{start:"17:10",end:"18:00"},C:{start:"18:10",end:"19:00"},D:{start:"19:10",end:"20:00"},E:{start:"20:10",end:"21:00"},F:{start:"21:10",end:"22:00"}},qn=["A","1","2","3","4","B","5","6","7","8","9","C","D","E","F"],rO=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Mi=r=>{let e=[];if(Array.isArray(r))e=r;else if(typeof r=="string")return[];if(!e||e.length===0)return[];const t=[];for(let s=0;s<7;s++){const A=e[s];if(A&&A.length>0){const l=(s+1)%7,u=rO[l],d=A[0],f=A[A.length-1],g=BA[d]?.start,x=BA[f]?.end;g&&x&&t.push({day:u,startTime:g,endTime:x})}}return t},AS=r=>{const e=Mi(r);return e.length>0?e[0]:null},_p=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],h1=qn.indexOf("1"),f1=qn.indexOf("9"),mf=({semester:r,courses:e,onCourseClick:t,onRemoveCourse:s,id:A="schedule-visual-grid",showConflictWarnings:l=!0,readOnly:u=!1,actionType:d="delete"})=>{const{t:f}=At(),g=k.useMemo(()=>e.filter(q=>q.semester===r&&(q.classTime&&typeof q.classTime!="string"&&q.classTime.length>0||typeof q.classTime=="string"||Mi(q.classTime||[]).length>0||q.day&&q.startTime&&q.endTime)),[e,r]),x=q=>{if(!q)return-1;const[$,Y]=q.split(":").map(Number),E=$*60+Y;return qn.findIndex(_=>{const C=BA[_],[D,j]=C.start.split(":").map(Number),[Q,U]=C.end.split(":").map(Number),T=D*60+j,W=Q*60+U;return E>=T&&E<W})},y=q=>qn.findIndex($=>BA[$].end===q),{activeDays:v,startIdx:N,endIdx:M}=k.useMemo(()=>{let q=!1,$=h1,Y=f1;return g.forEach(E=>{const _=Mi(E.classTime||[]);if(_.length>0)_.forEach(C=>{(C.day==="Saturday"||C.day==="Sunday")&&(q=!0);const D=x(C.startTime),j=y(C.endTime)!==-1?y(C.endTime):x(C.endTime);D!==-1&&D<$&&($=D),j!==-1&&j>Y&&(Y=j)});else{if(E.day&&(E.day==="Saturday"||E.day==="Sunday")&&(q=!0),E.startTime){const C=x(E.startTime);C!==-1&&C<$&&($=C)}if(E.endTime){const C=y(E.endTime);if(C!==-1&&C>Y&&(Y=C),C===-1){const D=x(E.endTime);D!==-1&&D>Y&&(Y=D)}}}}),$=Math.max(0,$),Y=Math.min(qn.length-1,Y),$>Y&&($=h1,Y=f1),{activeDays:q?_p:_p.slice(1,6),startIdx:$,endIdx:Y}},[g]),S=k.useMemo(()=>qn.slice(N,M+1),[N,M]),V=k.useMemo(()=>tO(g),[g]),K=k.useMemo(()=>{const q=new Map;return g.forEach($=>{const Y=Mi($.classTime||[]);if(Y.length>0){Y.forEach(C=>{let D=x(C.startTime),j=y(C.endTime);if(D!==-1){j===-1&&(j=D);for(let Q=D;Q<=j;Q++){const U=qn[Q],T=`${C.day}-${U}`;q.has(T)||q.set(T,[]);const W=q.get(T);W.some(H=>H.id===$.id)||W.push($)}}});return}if(!$.startTime||!$.endTime||!$.day)return;let E=x($.startTime),_=y($.endTime);if(E===-1){const[C,D]=$.startTime.split(":").map(Number),j=C*60+D;E=qn.findIndex(Q=>{const U=BA[Q].start.split(":").map(Number);return U[0]*60+U[1]>=j})}if(_===-1){const[C,D]=$.endTime.split(":").map(Number),j=C*60+D;_=qn.findIndex(Q=>{const U=BA[Q].end.split(":").map(Number);return U[0]*60+U[1]>=j})}if(E!==-1){_===-1&&(_=E);for(let C=E;C<=_;C++){const D=qn[C],j=`${$.day}-${D}`;q.has(j)||q.set(j,[]),q.get(j).push($)}}}),q.forEach($=>{$.sort((Y,E)=>Y.id.localeCompare(E.id))}),q},[g,N,M]),G=q=>{let $=q;if(/[\u4e00-\u9fa5]/.test(q)){let Y=q.match(/^(.+?)(\s+[A-Za-z0-9\(])/);$=Y?Y[1]:q,$=$.replace(/\s*\(?[]\s*[\d,]+\)?\s*$/g,"")}if(/[:]/.test($)){const Y=$.split(/([:])/);return a.jsx(k.Fragment,{children:Y.map((E,_)=>a.jsxs(k.Fragment,{children:[E,/[:]/.test(E)&&_<Y.length-1&&a.jsx("br",{})]},_))})}return $},z=q=>{const $=q.match(/^[]\s*[\d,A-Za-z]+\s*\((.*?)\)$/);if($)return $[1];const Y=q.match(/^\((.*?)\)$/);return Y?Y[1]:q};return a.jsxs("div",{id:A,className:"grid bg-surface/50 border border-gray-700/50 rounded-lg overflow-hidden relative",style:{gridTemplateColumns:`60px repeat(${v.length}, minmax(0, 1fr))`,gridTemplateRows:`40px repeat(${S.length}, minmax(60px, auto))`},children:[a.jsx("div",{className:"bg-surface/80 p-2 border-r border-b border-gray-700/50 flex items-center justify-center text-xs text-muted font-mono",children:"Period"}),v.map(q=>a.jsx("div",{className:"bg-surface/80 p-2 text-center font-bold text-foreground/80 border-b border-gray-700/50 sticky top-0 z-30 backdrop-blur-md",children:f.schedule.days[_p.indexOf(q)]},q)),S.map((q,$)=>{const Y=BA[q];return a.jsxs(k.Fragment,{children:[a.jsxs("div",{className:"relative border-r border-gray-700/30 border-t border-gray-700/50 flex flex-row items-center justify-center gap-1 p-0.5",style:{gridRow:$+2,gridColumn:1,minHeight:"60px"},children:[a.jsx("span",{className:"font-bold text-sm text-primary",children:q}),a.jsxs("div",{className:"flex flex-col items-center text-[10px] text-muted leading-none opacity-80",children:[a.jsx("span",{children:Y.start}),a.jsx("span",{className:"text-[10px] leading-[0.5] opacity-50 my-0.5",children:"|"}),a.jsx("span",{children:Y.end})]})]}),v.map((E,_)=>{const C=`${E}-${q}`,D=K.get(C)||[];return a.jsx("div",{className:`
                                        border-t border-gray-300 dark:border-gray-700/50
                                        border-r border-gray-300 dark:border-gray-700/30
                                        flex flex-col gap-1 p-0.5 justify-center
                                    `,style:{gridRow:$+2,gridColumn:_+2},children:D.map((j,Q)=>{const U=V.has(j.id);let T=sf[j.category]||sf.Other;return j.category==="General Education"&&j.genEduSubCategory&&(T=bx[j.genEduSubCategory]||T),a.jsxs("div",{className:`
                                                    m-0.5 rounded-md border border-gray-200 dark:border-border
                                                    flex flex-col p-1
                                                    ${u?"cursor-default":"cursor-pointer hover:brightness-110 active:scale-95"}
                                                    items-center justify-center text-center
                                                     transition-all group
                                                    shadow-sm flex-shrink-0 relative
                                                    ${T}
                                                    ${j.isWithdrawn?"opacity-50 grayscale":""}
                                                    ${U&&l?"ring-2 ring-red-500":""}
                                                    [.export-mode_&]:pt-1 [.export-mode_&]:pb-4 [.export-mode_&]:px-1
                                                `,style:{minHeight:"52px"},onClick:()=>!u&&t(j),children:[!u&&s&&a.jsx("div",{className:`absolute -top-1 -right-1 z-50 opacity-0 group-hover:opacity-100 transition-opacity bg-white 
                                                            ${d==="delete"?"text-red-500 hover:scale-110":"text-primary hover:scale-110"} 
                                                            rounded-full shadow-md p-0.5 cursor-pointer transform`,onClick:W=>{W.stopPropagation(),s(j)},title:d==="delete"?f.planner.delete||"Remove Course":f.planner.edit||"Edit Course",children:d==="delete"?a.jsx(xt,{size:12,strokeWidth:3}):a.jsx(O0,{size:12,strokeWidth:3})}),U&&l&&a.jsx("div",{className:"absolute top-0 right-0 p-0.5 text-red-500 bg-white/90 rounded-bl-md z-30 shadow-sm",title:"Time Conflict!",children:a.jsx(ys,{size:12,strokeWidth:3})}),j.isWithdrawn&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:a.jsx(xt,{size:48,className:"text-red-500/80 font-bold",strokeWidth:3})}),a.jsx("div",{className:`
                                                    font-bold text-sm leading-snug break-words text-center mx-auto
                                                    ${j.isWithdrawn?"line-through decoration-red-500 decoration-2":""}
                                                `,children:a.jsx("div",{className:"[.export-mode_&]:-translate-y-[2px]",children:G(j.name)})}),j.room&&a.jsx("div",{className:"text-xs font-medium leading-tight mt-0.5 break-words opacity-90 mx-auto [.export-mode_&]:-translate-y-[2px]",children:z(j.room)}),j.isEMI&&a.jsx("div",{className:`absolute bottom-0 right-0 w-[28px] h-[16px] rounded-tl-xl rounded-br-md bg-amber-400 text-[10px] font-black text-amber-950 shadow-sm z-10 flex items-center justify-center leading-none pt-[1px]\r
                                                        [.export-mode_&]:pt-0 [.export-mode_&]:pb-[8px]\r
                                                    `,children:"EMI"})]},`${j.id}-${q}-${Q}`)})},`${E}-${q}`)})]},q)})]})},jp=r=>{const e=r.getFullYear(),t=String(r.getMonth()+1).padStart(2,"0"),s=String(r.getDate()).padStart(2,"0"),A=String(r.getHours()).padStart(2,"0"),l=String(r.getMinutes()).padStart(2,"0"),u=String(r.getSeconds()).padStart(2,"0");return`${e}${t}${s}T${A}${l}${u}`},oS=r=>{let e=r.trim().toLowerCase();const t=e.includes("pm")||e.includes("")||e.includes("p.m."),s=e.includes("am")||e.includes("")||e.includes("a.m."),A=e.match(/(\d{1,2}):(\d{2})/);if(A){let l=parseInt(A[1],10),u=parseInt(A[2],10);return t&&l<12?l+=12:s&&l===12&&(l=0),{hours:l,minutes:u}}return{hours:0,minutes:0}},sO=(r,e)=>{const t=new Date,s=t.getDay(),A=(r+7-s)%7,l=new Date(t);l.setDate(t.getDate()+A);const{hours:u,minutes:d}=oS(e);return l.setHours(u,d,0,0),l},nO={Sunday:"SU",Monday:"MO",Tuesday:"TU",Wednesday:"WE",Thursday:"TH",Friday:"FR",Saturday:"SA"},aO={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},iO=r=>{let e=["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//NSYSU Course Tracker//EN","CALSCALE:GREGORIAN","METHOD:PUBLISH"];return r.forEach(t=>{if(!t.day||!t.startTime||!t.endTime)return;t.day.split(/,\s*/).forEach(A=>{const l=nO[A],u=aO[A];if(!l||u===void 0)return;const d=sO(u,t.startTime),{hours:f,minutes:g}=oS(t.endTime),x=new Date(d);x.setHours(f,g,0,0);const y=`${t.id}-${l}-${Date.now()}@nsysu-tracker`,v=t.teacher||"Unknown Teacher";e.push("BEGIN:VEVENT",`UID:${y}`,`DTSTAMP:${jp(new Date)}`,`DTSTART:${jp(d)}`,`DTEND:${jp(x)}`,`SUMMARY:${t.name}`,`DESCRIPTION:ID: ${t.id}\\nTeacher: ${v}\\nCredits: ${t.credits}`,`LOCATION:${t.room||"TBA"}`,`RRULE:FREQ=WEEKLY;COUNT=18;BYDAY=${l}`,"END:VEVENT")})}),e.push("END:VCALENDAR"),e.join(`\r
`)},AO=({semester:r,courses:e,onClose:t,onEditCourse:s,onFixData:A})=>{const{t:l}=At(),[u,d]=k.useState(!1),f=k.useRef(null);k.useEffect(()=>{const S=V=>{f.current&&!f.current.contains(V.target)&&d(!1)};return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[]),k.useEffect(()=>{const S=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=S}},[]);const g=k.useMemo(()=>e.filter(S=>S.semester===r&&S.day&&S.startTime&&S.endTime&&!S.isExemption&&S.category!=="University Way"&&!(S.category==="General Education"&&S.genEduSubCategory==="Primer")),[e,r]),x=k.useMemo(()=>e.filter(S=>S.semester===r),[e,r]),y=k.useMemo(()=>e.some(S=>{const V=S.category==="General Education"&&S.genEduSubCategory==="Primer",K=S.category==="General Education"&&S.genEduSubCategory==="Service";return S.userLabels?.includes("manual")||!S.name.includes(`
`)&&!/[\u4e00-\u9fa5]/.test(S.name)||(S.fixAttempts||0)>=2?!1:S.semester===r&&!V&&!K&&S.category!=="University Way"}),[e,r]),v=S=>{if(l.semesters[S])return l.semesters[S];const V=S.split(" ");if(V.length>=2&&V[0]==="Year"){const K=V[1],G=V.slice(2).join(" ");if(l.semesters["Year 1 Sem 1"].includes("")){const q=["","","","","","","",""][parseInt(K)-1]||K;if(G==="Summer")return`${q} ${l.catalog.summer}`;if(G==="Sem 1")return`${q} `;if(G==="Sem 2")return`${q} `}else{if(G==="Sem 1")return`Year ${K} Fall Semester`;if(G==="Sem 2")return`Year ${K} Spring Semester`;if(G==="Summer")return`Year ${K} Summer`}}return S.replace("Summer",l.catalog.summer)},N=()=>{const S=iO(g),V=new Blob([S],{type:"text/calendar"}),K=URL.createObjectURL(V),G=document.createElement("a");G.href=K;const z=v(r);G.download=`${z}_schedule.ics`.replace(/\s+/g,"_"),G.click(),URL.revokeObjectURL(K),d(!1)},M=async()=>{const S=document.getElementById("schedule-visual-grid");if(S){const V=S.style.overflow;S.style.overflow="visible",S.classList.add("export-mode");try{const G=(await WH(S,{backgroundColor:getComputedStyle(document.documentElement).getPropertyValue("--color-background").trim(),scale:3,useCORS:!0,onclone:Y=>{const E=Y.getElementById("schedule-visual-grid");E&&(E.style.overflow="visible",E.style.height="auto",E.querySelectorAll("span.absolute").forEach(j=>{j.style.zIndex="10",j.style.position="absolute",j.style.top="0px",j.style.left="4px",j.style.transform="translateY(-50%)"}),E.querySelectorAll(".sticky").forEach(j=>{j.style.position="static",j.style.top="auto",j.classList.remove("sticky","top-0","backdrop-blur-md")}),E.querySelectorAll('div[class*="rounded"]').forEach(j=>{j.classList.remove("overflow-hidden"),j.style.overflow="visible",j.style.height="auto";const Q=j.querySelector(".line-clamp-3");Q&&(Q.classList.remove("line-clamp-3"),Q.style.whiteSpace="normal",Q.style.overflow="visible"),j.querySelectorAll(".truncate").forEach(T=>{T.classList.remove("truncate"),T.style.whiteSpace="normal",T.style.overflow="visible"})}))}})).toDataURL("image/png"),z=document.createElement("a");z.href=G;const q=v(r),$=l.schedule.schedule;z.download=`${q}_${$}.png`.replace(/\s+/g,"_"),z.click()}catch(K){console.error("Export failed",K),alert("Failed to generate image.")}finally{S.style.overflow=V,S.classList.remove("export-mode")}}};return Wt.createPortal(a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[9999] p-4",children:a.jsxs("div",{className:"bg-background border border-gray-600 rounded-xl w-full max-w-6xl shadow-2xl h-[90vh] flex flex-col schedule-modal-content",children:[a.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-600 bg-background/50",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-xl font-bold text-foreground",children:[v(r)," ",l.schedule.schedule]}),a.jsxs("p",{className:"text-sm text-muted",children:[g.length," ",l.schedule.scheduledCourses]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[y&&A&&a.jsxs("button",{onClick:()=>A(r),className:"flex items-center gap-2 bg-yellow-500 hover:bg-yellow-400 text-black px-3 py-2 rounded-lg text-sm font-bold shadow-lg shadow-yellow-500/20 transition-colors mr-2 animate-pulse",children:[a.jsx(ys,{size:18}),l.app.fixData||"Fix Data"]}),a.jsxs("div",{className:"relative",ref:f,children:[a.jsxs("button",{onClick:()=>d(!u),className:"flex items-center gap-2 bg-primary hover:bg-sky-400 text-white px-3 py-2 rounded-lg text-sm font-bold shadow-lg transition-colors",children:[a.jsx(kf,{size:18}),l.schedule.exportSchedule,a.jsx(pu,{size:14,className:`transition-transform duration-200 ${u?"rotate-180":""}`})]}),u&&a.jsxs("div",{className:"absolute top-full right-0 mt-2 w-56 bg-surface border border-border rounded-lg shadow-xl overflow-hidden z-50 animate-in fade-in zoom-in-95 duration-200",children:[a.jsxs("button",{onClick:M,className:"w-full text-left px-4 py-3 text-sm text-foreground hover:bg-primary/10 flex items-center gap-3 font-medium transition-colors",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500/20 text-blue-500 flex items-center justify-center",children:a.jsx(p5,{size:16})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-bold",children:"Image (.png)"}),a.jsx("div",{className:"text-xs text-muted",children:"Original format"})]})]}),a.jsxs("button",{onClick:N,className:"w-full text-left px-4 py-3 text-sm text-foreground hover:bg-primary/10 flex items-center gap-3 font-medium transition-colors border-t border-border/50",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500/20 text-purple-500 flex items-center justify-center",children:a.jsx(ol,{size:16})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-bold",children:"Calendar (.ics)"}),a.jsx("div",{className:"text-xs text-muted",children:"For Google/Apple Cal"})]})]})]})]}),a.jsx("button",{onClick:t,className:"text-muted hover:text-foreground transition-colors ml-2",children:a.jsx(xt,{size:24})})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 pb-8 custom-scrollbar",children:a.jsxs("div",{className:"min-w-[800px]",children:[a.jsx(mf,{semester:r,courses:e.filter(S=>!S.isExemption&&S.category!=="University Way"&&!(S.category==="General Education"&&S.genEduSubCategory==="Primer")),onCourseClick:s,onRemoveCourse:s,actionType:"edit"}),a.jsx("div",{id:"schedule-list",className:"mt-6 bg-surface/20 border border-gray-600 rounded-lg overflow-hidden flex flex-col",children:a.jsxs("table",{className:"w-full text-sm text-left text-muted table-fixed",children:[a.jsx("thead",{className:"bg-surface text-muted uppercase text-xs",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 w-[40%]",children:l.schedule.courseName}),a.jsx("th",{className:"px-4 py-3 w-[15%] text-center",children:l.schedule.credits}),a.jsx("th",{className:"px-4 py-3 w-[15%] text-center",children:l.schedule.grade}),a.jsx("th",{className:"px-4 py-3 w-[20%] text-center",children:l.schedule.category}),a.jsx("th",{className:"px-4 py-3 w-[10%] text-right",children:l.common?.actions||"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-600/50",children:x.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"px-4 py-4 text-center text-muted italic",children:l.schedule.noCourses})}):x.map(S=>a.jsxs("tr",{className:"hover:bg-surface/30 transition-colors group",children:[a.jsx("td",{className:"px-4 py-3 font-medium text-foreground truncate",title:S.name,children:S.name}),a.jsx("td",{className:"px-4 py-3 text-center",children:S.credits}),a.jsx("td",{className:"px-4 py-3 text-center",children:S.isExemption?a.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-bold bg-gray-500/20 text-gray-400",children:l.form.isExemption}):a.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold ${["Fail","D","E"].includes(S.grade)?"bg-red-500/20 text-red-400":S.grade?"bg-green-500/20 text-green-400":"bg-surface text-muted"}`,children:S.grade||"-"})}),a.jsxs("td",{className:"px-4 py-3 text-center",children:[l.categories[S.category]||S.category,S.category==="General Education"&&S.genEduSubCategory&&a.jsxs("span",{className:"ml-2 text-xs text-muted",children:["(",l.categories[S.genEduSubCategory]||S.genEduSubCategory,")"]})]}),a.jsx("td",{className:"px-4 py-4 text-right",children:a.jsx("button",{onClick:()=>s(S),className:"text-muted hover:text-primary transition-colors p-1 hover:bg-surface rounded",title:l.planner?.edit||"Edit",children:a.jsx(O0,{size:16})})})]},S.id))})]})})]})})]})}),document.body)},oO=({onClose:r,onAdd:e,existingSemesters:t})=>{const{t:s}=At(),[A,l]=k.useState(1),[u,d]=k.useState("Sem 1"),[f,g]=k.useState(""),x=()=>{const y=u==="Summer"?`Year ${A} Summer`:`Year ${A} ${u}`;if(t.includes(y)){g(s.addSemester?.exists||"This semester already exists!");return}e(A,u),r()};return Wt.createPortal(a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[9999] p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-surface border border-border rounded-xl w-full max-w-sm shadow-2xl p-6 relative animate-in zoom-in-95 duration-200",children:[a.jsx("button",{onClick:r,className:"absolute top-4 right-4 text-muted hover:text-foreground transition-colors",children:a.jsx(xt,{size:20})}),a.jsx("h2",{className:"text-xl font-bold mb-6 text-foreground",children:s.addSemester?.title||"Add New Semester"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-1",children:s.addSemester?.year||"Year"}),a.jsx("select",{value:A,onChange:y=>{l(Number(y.target.value)),g("")},className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:ring-2 focus:ring-primary outline-none",children:[1,2,3,4,5,6,7,8].map(y=>{const v=["","","","","","","",""],N=s.addSemester?.yearOption?.includes("")?v[y-1]:y;return a.jsx("option",{value:y,children:s.addSemester?.yearOption?.replace("{year}",String(N))||`Year ${y}`},y)})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-1",children:s.addSemester?.semester||"Semester"}),a.jsxs("select",{value:u,onChange:y=>{d(y.target.value),g("")},className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:ring-2 focus:ring-primary outline-none",children:[a.jsx("option",{value:"Sem 1",children:s.addSemester?.sem1||"Semester 1"}),a.jsx("option",{value:"Sem 2",children:s.addSemester?.sem2||"Semester 2"}),a.jsx("option",{value:"Summer",children:s.addSemester?.summer||"Summer"})]})]}),f&&a.jsx("div",{className:"text-red-500 text-sm font-medium bg-red-500/10 p-2 rounded border border-red-500/20",children:f}),a.jsxs("div",{className:"flex gap-3 mt-6 pt-2",children:[a.jsx("button",{onClick:r,className:"flex-1 px-4 py-2 rounded-lg border border-border text-foreground hover:bg-background/80 transition-colors",children:s.addSemester?.cancel||"Cancel"}),a.jsx("button",{onClick:x,className:"flex-1 px-4 py-2 rounded-lg bg-primary text-white font-bold hover:bg-sky-400 transition-colors shadow-lg shadow-primary/20",children:s.addSemester?.add||"Add"})]})]})]})}),document.body)},lO=({courses:r,semesters:e,isEMIStudent:t,graduationCredits:s,onEditCourse:A,onAddSemester:l,onFixData:u,activeScheduleSemester:d,onViewSchedule:f,onOpenInterdisciplinary:g,userProfile:x})=>{const{t:y}=At(),[v,N]=k.useState(!1);return a.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[a.jsx("section",{id:"dashboard-section",children:a.jsx(Ck,{courses:r,isEMIStudent:t,graduationCredits:s,onOpenInterdisciplinary:g,userProfile:x})}),a.jsxs("section",{id:"semester-view-section",className:"max-w-[85rem] mx-auto w-full",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h2",{className:"text-2xl font-bold",children:y.app.coursePlan}),a.jsxs("button",{onClick:()=>N(!0),className:"bg-surface border border-border hover:bg-primary/10 hover:border-primary text-muted hover:text-primary px-3 py-1.5 rounded-lg transition-all flex items-center gap-2 text-sm font-medium",title:y.app.addPlan,children:[a.jsx(es,{size:16}),y.app.addPlan]})]}),a.jsxs("div",{className:"text-sm text-muted",children:[r.length," ",y.app.totalCourses]})]}),a.jsx(jk,{semesters:e,courses:r,onEdit:A,onViewSchedule:f,onFixData:u})]}),d&&a.jsx(AO,{semester:d,courses:r,onClose:()=>f(null),onEditCourse:A,onFixData:u}),v&&a.jsx(oO,{existingSemesters:e,onClose:()=>N(!1),onAdd:l})]})},cO={:0,:1,:2,:3,:4,:5,:6},Tp=r=>{if(r.classTime&&r.classTime.some(l=>l&&l.length>0)||!r.room)return r;const e=/([])([0-9A-Z,]+)/g;let t;const s=["","","","","","",""];let A=!1;for(;(t=e.exec(r.room))!==null;){const l=t[1],u=t[2],d=cO[l];if(d!==void 0){const f=u.replace(/,/g,"");s[d]=(s[d]||"")+f,A=!0}}return A?{...r,classTime:s}:r},UA=()=>Math.random().toString(36).substring(2,9)+Date.now().toString(36),bA="https://nsysu-opendev.github.io/NSYSUCourseAPI",Up=r=>{const e=new Map;return r.forEach(t=>{const s=`${t.id}|${JSON.stringify(t.classTime)}|${t.room}|${t.teacher}|${t.department}`;if(e.has(s)){const A=e.get(s);(!A.class&&t.class||A.class===""&&t.class&&t.class!=="")&&e.set(s,t)}else e.set(s,t)}),Array.from(e.values())},lS=k.createContext(null),uO=({children:r})=>{const[e,t]=k.useState([]),[s,A]=k.useState([]),[l,u]=k.useState(!1),[d,f]=k.useState(!1),[g,x]=k.useState(null),[y,v]=k.useState(!1),[N,M]=k.useState(null),S=k.useRef(new Set),V=k.useRef({}),K=k.useRef({}),G=async(E,_)=>{try{if(localStorage.getItem("nsysu-force-offline")==="true")throw new Error("Simulated Network Error (Force Offline Mode)");const C=await fetch(E);if(!C.ok)throw new Error("Network error");return await C.json()}catch{console.warn(`API failed for ${E}, trying local fallback ${_}`);const D=await fetch(_);if(!D.ok)throw new Error("Local fallback failed");return await D.json()}};k.useEffect(()=>{let E=!0;return(async()=>{try{const C=await G(`${bA}/version.json?t=${Date.now()}`,"./Backup/version.json");if(!E)return;const D=Object.keys(C.history).sort((j,Q)=>Q.localeCompare(j));if(t(D),D.length>0){const j=D[0];console.log(`Preloading latest semester: ${j}`),q(j)}}catch(C){console.error("Failed to load semesters",C)}})(),()=>{E=!1}},[]);const z=async E=>{if(!E)return;if(S.current.has(E)){const D=K.current[E];v(D==="backup");return}u(!0),x(null);const _=e.indexOf(E),C=_!==-1&&_<=1;try{let D,j=!1;if(C){let T=V.current[E];if(!T)try{T=(await G(`${bA}/${E}/version.json?t=${Date.now()}`,"./Backup/version.json")).latest,V.current[E]=T}catch{console.warn(`Version check failed for ${E}, attempting blind fetch`)}try{if(T){const W=await fetch(`${bA}/${E}/${T}/all.json`);if(!W.ok)throw new Error("API failed");D=await W.json()}else throw new Error("No version info");j||M(Date.now())}catch{console.warn(`API load failed for ${E}, trying local...`);const H=await fetch(`./Backup/${E}.json`);if(!H.ok)throw new Error(`Local data not found for ${E}`);D=await H.json(),j=!0}}else{const T=await fetch(`./Backup/${E}.json`);if(!T.ok)throw new Error(`Backup data not found for archived semester ${E}`);D=await T.json(),j=!0}v(j),K.current[E]=j?"backup":"api";const Q=D.map(Tp),U=Up(Q).map(T=>({...T,semester:E}));A(T=>[...T.filter(H=>H.semester!==E),...U]),S.current.add(E)}catch(D){console.error(D),x(`Failed to load course data for ${E}`)}finally{u(!1)}},q=E=>{z(E)},$=async()=>{if(d)return;const E=e.filter(j=>j>="1111"&&!S.current.has(j));if(E.length===0)return;f(!0);const _=E.map(async j=>{try{let Q=null;try{let U=V.current[j];if(!U){const T=await fetch(`${bA}/${j}/version.json`);T.ok&&(U=(await T.json()).latest)}if(U){const T=await fetch(`${bA}/${j}/${U}/all.json`);T.ok&&(Q=await T.json())}}catch{}if(!Q){const U=await fetch(`./Backup/${j}.json`);U.ok&&(Q=await U.json())}if(Q){S.current.add(j);const U=Q.map(Tp);return Up(U).map(T=>({...T,semester:j}))}return[]}catch{return[]}}),D=(await Promise.all(_)).flat();D.length>0&&A(j=>[...j,...D]),f(!1)},Y=async E=>{if(!E||y)return;const _=e.indexOf(E);if(_!==-1&&_<=1)try{const j=(await G(`${bA}/${E}/version.json?t=${Date.now()}`,"./Backup/version.json")).latest,Q=V.current[E];if(j&&j!==Q){console.log(`New version detected for ${E}: ${j} (was ${Q}). Updating...`),V.current[E]=j;const U=await fetch(`${bA}/${E}/${j}/all.json`);if(!U.ok)throw new Error("API failed");const W=(await U.json()).map(Tp),H=Up(W).map(F=>({...F,semester:E}));A(F=>[...F.filter(te=>te.semester!==E),...H]),S.current.add(E)}M(Date.now())}catch(D){console.warn(`Update check failed for ${E}`,D)}};return a.jsx(lS.Provider,{value:{semesters:e,courses:s,fetchCourses:z,checkForUpdates:Y,fetchHistory:$,loading:l,loadingHistory:d,error:g,usingBackup:y,lastChecked:N},children:r})},cS=()=>{const r=k.useContext(lS);if(!r)throw new Error("useCourseDataContext must be used within a CourseDataProvider");return r},oa=()=>cS(),qf=[{category:"College of Liberal Arts",departments:["","","",""]},{category:"College of Science",departments:["","","",""]},{category:"College of Engineering",departments:["","","","",""]},{category:"College of Management",departments:["","","",""]},{category:"College of Marine Sciences",departments:["","",""]},{category:"College of Social Sciences",departments:["",""]},{category:"College of Medicine",departments:["","",""]},{category:"Si-Wan College",departments:["",""]}],uS=qf.flatMap(r=>r.departments).sort((r,e)=>r.localeCompare(e,"zh-TW")),dO=(r,e)=>{if(!e)return!1;const t=e.replace(/[]/g,"");return r.replace(/[]/g,"")===t||r.includes(t)||t.includes(r)},hO=(r,e)=>{if(!e||!r.compulsory)return!1;const t=qf.find(u=>u.departments.includes(e)||u.departments.some(d=>e.includes(d)));if(!t)return!1;const s=r.name.toLowerCase(),A=t.category.includes("Engineering")||t.category.includes("Science")||t.category.includes("Marine"),l=t.category.includes("Management");return A?["","calculus","","physics","","chemistry","","biology","","linear algebra","","differential equations","","circuits"].some(d=>s.includes(d)):l?["","calculus","","economics","","accounting","","statistics","","management"].some(d=>s.includes(d)):!1},Go=(r,e="",t=0)=>{let s="Other",A,l,u=!1;const d=r.department||"",f=r.name.toUpperCase(),g=r.department.toUpperCase(),x=r.id.substring(0,4).toUpperCase();x==="GEAE"?(s="General Education",A="Boya"):x==="GEAI"?(s="General Education",A="Cross-College"):x==="GEAP"||x==="GESP"?(s="General Education",A="Cross-College",u=!0):x==="GEPE"&&(s="General Education",A="Sports");const y=s!=="Other";if(!y&&(dO(d,e)||hO(r,e)))if(r.compulsory){const v=parseInt(r.grade||"0");t>0&&v>0&&v!==t?s="Major Elective":s="Major Required"}else s="Major Elective";else if(!y&&(r.id.startsWith("GEPE")||d.includes("")||g.includes("SPORT")||g.includes("PHYSICAL EDUCATION")))s="General Education",A="Sports";else if(y&&A==="Boya"||!y&&(d.includes("")||d.includes("General Education")||d.includes("")||Array.isArray(r.tags)&&r.tags.some(v=>v.includes("")))){y||(s="General Education",A="Boya");const v=(d+" "+(r.tags?.join(" ")||"")).toUpperCase();v.includes("")||v.includes("DIMENSION 1")?l="Dimension 1":v.includes("")||v.includes("DIMENSION 2")?l="Dimension 2":v.includes("")||v.includes("DIMENSION 3")?l="Dimension 3":v.includes("")||v.includes("DIMENSION 4")?l="Dimension 4":v.includes("")||v.includes("DIMENSION 5")?l="Dimension 5":(v.includes("")||v.includes("DIMENSION 6"))&&(l="Dimension 6")}else!y&&d.includes("")||!y&&d.includes("")?(s="General Education",A="Chinese"):y&&A==="Cross-College"||!y&&(d.includes("")||Array.isArray(r.tags)&&r.tags.includes(""))?y||(s="General Education",A="Cross-College"):!y&&(d.includes("")||g.includes("GENERAL ENGLISH")||f.includes("GENERAL ENGLISH")||["","","",""].some(v=>d.includes(v)))?(s="General Education",A="English"):!y&&r.name.includes("")&&(s="Other",A="Military Training");if(!u){const v=/\bESP\b/;(/\bEAP\b/.test(f)||v.test(f)||f.includes("ESP")||g.includes("ESP")||g.includes("EAP")||Array.isArray(r.tags)&&(r.tags.includes("ESP")||r.tags.includes("EAP")))&&(u=!0,A!=="Boya"&&A!=="Sports"&&(s==="Other"||s==="General Education")&&(s="General Education",A="Cross-College"))}return{category:s,genEduSubCategory:A,boyaDimension:l,isEMI:r.english||!1,isEapEsp:u}},J0=({isOpen:r,title:e,message:t,onConfirm:s,onCancel:A,confirmText:l,cancelText:u,isDestructive:d=!1})=>{const{t:f}=At();return r?a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[100] p-4 animate-in fade-in duration-200",children:a.jsx("div",{className:"bg-surface border border-border rounded-xl w-full max-w-sm shadow-2xl scale-100 animate-in zoom-in-95 duration-200 overflow-hidden",children:a.jsxs("div",{className:"p-6 text-center",children:[a.jsx("div",{className:`mx-auto mb-4 w-12 h-12 rounded-full flex items-center justify-center ${d?"bg-red-500/10 text-red-500":"bg-primary/10 text-primary"}`,children:d?a.jsx(ys,{size:24}):a.jsx(ys,{size:24})}),e&&a.jsx("h3",{className:"text-lg font-bold text-foreground mb-2",children:e}),a.jsx("p",{className:"text-muted text-sm mb-6",children:t}),a.jsxs("div",{className:"flex gap-3 justify-center",children:[a.jsx("button",{onClick:A,className:"px-4 py-2 rounded-lg border border-border text-muted hover:bg-surface hover:text-foreground transition-colors font-medium text-sm min-w-[80px]",children:u||f.form.cancel}),a.jsx("button",{onClick:s,className:`px-4 py-2 rounded-lg text-white font-bold transition-colors text-sm min-w-[80px] shadow-lg ${d?"bg-red-500 hover:bg-red-600 shadow-red-500/20":"bg-primary hover:bg-primary/80 shadow-primary/20"}`,children:l||"Confirm"})]})]})})}):null},fO=({courseId:r,courseName:e,semester:t,onClose:s})=>{const{t:A}=At(),l=xu(),{allUserLabels:u,toggleLabelForCourse:d,setLabelForCourse:f,getLabelsForCourse:g,addLabelToLibrary:x,removeLabelFromLibrary:y}=l,v=l.DEFAULT_COLORS||["#22c55e","#ef4444","#3b82f6"],[N,M]=k.useState(""),[S,V]=k.useState(v[0]),[K,G]=k.useState(!1),[z,q]=k.useState(null),[$,Y]=k.useState(!1),[E,_]=k.useState(null),C=k.useRef(null),D=g(r,t),j=D.map(L=>L.text),Q=u.filter(L=>!j.includes(L.text));k.useEffect(()=>{const L=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=L}},[]),k.useEffect(()=>(K&&!$?C.current=setTimeout(()=>{G(!1)},5e3):C.current&&clearTimeout(C.current),()=>{C.current&&clearTimeout(C.current)}),[K,$]);const U=()=>{if(!N.trim())return;const L=u.find(Ae=>Ae.text.toLowerCase()===N.trim().toLowerCase());if(L){f(r,L.text,!0,t),M(""),q(null);return}const te=N.trim();if(x(te,S),f(r,te,!0,t),v&&v.length>0){const Ae=(v.indexOf(S)+1)%v.length;V(v[Ae])}M(""),q(null)},T=L=>{K?(C.current&&clearTimeout(C.current),_(L),Y(!0)):d(r,L.text,t)},W=()=>{E&&(y(E.text),_(null)),Y(!1)},H=()=>{_(null),Y(!1)},F=k.useRef(null);return k.useEffect(()=>{const L=te=>{$||F.current&&!F.current.contains(te.target)&&s()};return document.addEventListener("mousedown",L),()=>document.removeEventListener("mousedown",L)},[s,$]),Wt.createPortal(a.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:[a.jsx(J0,{isOpen:$,title:A.common?.confirm||"Confirm",message:(A.planner.labels?.deleteConfirm||'Delete "{{label}}"?').replace("{{label}}",E?.text||""),onConfirm:W,onCancel:H,isDestructive:!0,confirmText:A.common?.actions||"Delete"}),a.jsxs("div",{ref:F,className:"bg-surface w-full max-w-md h-[550px] rounded-2xl shadow-2xl flex flex-col overflow-hidden border border-border animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-4 border-b border-border bg-background/50 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg",children:A.planner.labels?.title||"Manage Labels"}),a.jsx("p",{className:"text-xs text-muted truncate max-w-[250px]",children:e})]}),a.jsx("button",{onClick:s,className:"p-2 hover:bg-muted/20 rounded-full transition-colors",children:a.jsx(xt,{size:20})})]}),a.jsxs("div",{className:"flex-1 flex flex-col min-h-0 bg-background/30",children:[a.jsxs("div",{className:"p-3 border-b border-border space-y-3 bg-surface",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:N,onChange:L=>{M(L.target.value),q(null)},onKeyDown:L=>{L.nativeEvent.isComposing||L.key==="Enter"&&U()},placeholder:A.planner.labels?.newPlaceholder||"New label name...",className:`flex-1 bg-background border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary outline-none ${z?"border-red-500":"border-border"}`}),a.jsx("button",{onClick:U,disabled:!N.trim(),className:"bg-primary text-white p-2 rounded-lg hover:bg-primary/90 disabled:opacity-50 transition-colors",children:a.jsx(es,{size:20})})]}),z&&a.jsx("p",{className:"text-xs text-red-500 font-medium pl-1",children:z}),a.jsx("div",{className:"flex gap-1.5 overflow-x-auto pb-1 pt-1 mt-3 custom-scrollbar pl-2",children:v.map(L=>a.jsx("button",{onClick:()=>V(L),className:`w-6 h-6 rounded-full border-2 transition-all flex-shrink-0 ${S===L?"border-foreground scale-110 shadow-sm":"border-transparent hover:scale-110"}`,style:{backgroundColor:L}},L))})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsx("h4",{className:"text-xs font-bold text-muted uppercase tracking-wider",children:A.planner.labels?.library||"Label Library"}),u.length>0&&a.jsx("button",{onClick:()=>G(!K),className:`text-xs font-medium px-2 py-1 rounded transition-colors ${K?"bg-primary text-white":"text-primary hover:bg-primary/10"}`,children:K?A.planner.labels?.finish||"Finish":A.planner.labels?.edit||"Edit"})]}),Q.length===0&&a.jsx("div",{className:"text-center text-muted text-sm py-8 italic",children:u.length===0?A.planner.labels?.createFirst||"Create your first label above!":A.planner.labels?.allApplied||"All labels applied!"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:Q.map(L=>a.jsxs("div",{className:"relative group/item",children:[a.jsxs("button",{onClick:()=>T(L),className:`px-3 py-1.5 rounded-full text-xs font-bold text-white shadow-sm transition-all flex items-center gap-1 ${K?"ring-2 ring-red-500 ring-offset-1 cursor-pointer animate-pulse-slow":"hover:brightness-110 active:scale-95"}`,style:{backgroundColor:L.color},children:[a.jsx(es,{size:12,strokeWidth:3,className:K?"hidden":"block"}),L.text]}),K&&a.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center border border-white pointer-events-none z-10",children:a.jsx("div",{className:"w-2 h-0.5 bg-white rounded-full"})})]},L.text))})]})]}),a.jsx("div",{className:"h-1 bg-gradient-to-r from-transparent via-border to-transparent"}),a.jsxs("div",{className:"h-[25%] min-h-[120px] bg-surface flex flex-col relative",children:[a.jsx("div",{className:"p-3 bg-muted/5",children:a.jsx("h4",{className:"text-xs font-bold text-muted uppercase tracking-wider",children:A.planner.labels?.applied||"Applied to Course"})}),a.jsx("div",{className:"p-4 overflow-y-auto flex-1 pb-12",children:D.length===0?a.jsx("div",{className:"text-center text-muted text-sm italic py-2",children:A.planner.labels?.noApplied||"No labels applied"}):a.jsx("div",{className:"flex flex-wrap gap-2",children:D.map(L=>a.jsxs("button",{onClick:()=>d(r,L.text,t),className:"px-3 py-1.5 rounded-full text-xs font-bold text-white shadow-md hover:brightness-110 transition-all active:scale-95 flex items-center gap-1.5 group relative overflow-hidden",style:{backgroundColor:L.color},children:[a.jsx("div",{className:"absolute inset-0 bg-black/10 opacity-0 group-hover:opacity-100 transition-opacity"}),a.jsx(vt,{size:12,strokeWidth:3}),L.text]},L.text))})}),a.jsx("div",{className:"absolute bottom-3 right-3",children:a.jsxs("button",{onClick:s,className:"bg-primary hover:bg-primary/90 text-white px-3 py-1.5 rounded-lg text-sm font-bold shadow-lg shadow-primary/20 transition-all active:scale-95 flex items-center gap-1.5",children:[a.jsx(vt,{size:16,strokeWidth:3}),A.common?.confirm||"Done"]})})]})]})]}),document.body)},mO=k.memo(({course:r,isAdded:e,isConflicting:t,highlightedCourseId:s,onAddCourse:A,onOpenSyllabus:l,onLabelClick:u,onCopyId:d,userProfile:f,getTypeBadgeStyle:g,getTypeLabel:x,getCreditColor:y})=>{const{t:v}=At(),{getLabelsForCourse:N}=xu(),M=N(r.id,r.semester);return a.jsxs("div",{id:`course-card-${r.id}`,className:`
                bg-surface border rounded-lg p-2 shadow-sm transition-all group relative hover:shadow-md
                ${t?"border-red-500/50 bg-red-500/5":"border-border hover:border-primary"}
                ${e&&s!==r.id?"opacity-50":""}
            `,children:[s===r.id&&a.jsx("div",{className:"absolute inset-0 z-20 pointer-events-none rounded-lg border-2 border-yellow-400 shadow-[0_0_15px_rgba(250,204,21,0.6)] bg-yellow-400/10 animate-pulse"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:()=>A(r),disabled:e,className:`
                        p-2 rounded-full transition-all shrink-0
                        ${t?"bg-red-500/10 text-red-500 hover:bg-red-500 hover:text-white":"bg-primary/10 hover:bg-primary text-primary hover:text-white"}
                        ${e?"opacity-50 cursor-not-allowed bg-transparent":""}
                    `,title:e?v.planner.alreadyAdded:t?"Add anyway (Conflict)":v.planner.addToDraft,children:e?a.jsx(vt,{size:18}):t?a.jsx(ys,{size:18}):a.jsx(es,{size:18})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex justify-between items-start gap-2",children:[a.jsx("h3",{className:"font-bold text-foreground text-sm truncate cursor-pointer hover:text-primary hover:underline decoration-primary/50 underline-offset-2 transition-colors flex-1",title:`${r.name} (Click to view syllabus)`,onClick:S=>l(S,r),children:r.name}),a.jsx("button",{onClick:S=>{S.stopPropagation(),u(r)},className:"text-muted hover:text-primary transition-colors p-1",title:"Label Course",children:a.jsx(J2,{size:16})})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-1.5 text-xs text-muted",children:[a.jsx("div",{className:`flex flex-col gap-0.5 ${t?"text-red-500 font-bold":""}`,children:r.parsedTimes&&r.parsedTimes.length>0?r.parsedTimes.map((S,V)=>a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(fx,{size:10}),a.jsx("span",{children:`${{Monday:v.planner.days.mon,Tuesday:v.planner.days.tue,Wednesday:v.planner.days.wed,Thursday:v.planner.days.thu,Friday:v.planner.days.fri,Saturday:v.planner.days.sat,Sunday:v.planner.days.sun}[S.day]||S.day} ${S.startTime}-${S.endTime}`})]},V)):a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(fx,{size:10}),a.jsx("span",{children:"TBA"})]})}),a.jsx("span",{className:"text-border",children:"|"}),a.jsx("span",{children:r.department}),a.jsx("span",{className:"text-border",children:"|"}),a.jsx("span",{children:r.teacher}),r.parsedRoom&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-border",children:"|"}),a.jsx("span",{title:r.room,children:r.parsedRoom})]})]}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsxs("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${y(r.credit)}`,children:[r.credit," cr"]}),a.jsxs("span",{onClick:S=>{S.stopPropagation(),d(r.id)},title:"Click to copy ID",className:"text-[10px] text-muted font-mono bg-background px-1 rounded border border-border/50 cursor-pointer hover:border-primary hover:text-primary transition-colors select-none active:scale-95",children:[v.planner.courseId,": ",r.id]}),M.map(S=>a.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded font-bold shadow-sm backdrop-blur-[2px] border",style:{backgroundColor:`${S.color}26`,color:S.color,borderColor:`${S.color}4D`},children:S.text},S.text)),a.jsx("div",{className:"flex-1"}),r.english&&a.jsx("span",{className:`
                                text-[10px] px-1.5 py-0.5 rounded border font-bold
                                ${f?.studentClass===""?"bg-amber-500/20 text-amber-600 border-amber-500/40 shadow-[0_0_10px_rgba(245,158,11,0.2)]":"bg-amber-500/10 text-amber-600 border-amber-500/20"}
                            `,children:"EMI"}),r.name.includes("")&&a.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded border font-bold bg-slate-500/20 text-slate-500 border-slate-500/40",children:v.categories["Military Training"]||"Military Training"}),a.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${g(r)} whitespace-nowrap`,children:x(r)}),r.tags?.filter(S=>!S.includes("")&&!S.includes("")).map(S=>a.jsx("span",{className:`
                                text-[10px] px-1.5 py-0.5 rounded border bg-gray-500/10 
                                ${S.endsWith("")?"text-gray-600 border-gray-500/20 dark:text-[#C1C1C1] dark:border-[#C1C1C1]":"text-gray-600 border-gray-500/20"}
                            `,children:S},S))]})]})]})]})}),gO=r=>{switch(r.category){case"Major Required":return"bg-[#F26060]/10 text-[#F26060] border-[#F26060]/50 font-bold border-[#F26060] shadow-[0_0_8px_rgba(242,96,96,0.2)] ring-1 ring-[#F26060]/20";case"Major Elective":return"bg-[#79A4E8]/10 text-[#79A4E8] border-[#79A4E8]/20 font-medium";case"General Education":const e=r.genEduSubCategory;return e==="Boya"?"bg-[#997FDC]/10 text-[#997FDC] border-[#997FDC]/20":e==="Chinese"||e==="English"?"bg-[#EC9385]/10 text-[#EC9385] border-[#EC9385]/20":e==="Cross-College"?"bg-[#FCA269]/10 text-[#FCA269] border-[#FCA269]/20":e==="Service"?"bg-[#A48B78]/10 text-[#A48B78] border-[#A48B78]/20":e==="Sports"?"bg-[#79BEB5]/10 text-[#79BEB5] border-[#79BEB5]/20":e==="Primer"?"bg-[#7DC174]/10 text-[#7DC174] border-[#7DC174]/20":"bg-[#C0D762]/10 text-[#C0D762] border-[#C0D762]/20";case"University Way":return"bg-emerald-500/10 text-emerald-600 border-emerald-500/20";default:return"bg-[#79A4E8]/10 text-[#79A4E8] border-[#79A4E8]/20"}},pO=r=>r===1?"bg-[#7DC174]/10 text-[#7DC174] border-[#7DC174]/20":r===2?"bg-[#79A4E8]/10 text-[#79A4E8] border-[#79A4E8]/20":"bg-[#997FDC]/10 text-[#997FDC] border-[#997FDC]/20",xO=({onAddCourse:r,currentSchedule:e=[],userProfile:t,searchTerm:s,onSearchChange:A,highlightedCourseId:l,onHighlightClear:u})=>{const{t:d,language:f}=At(),{courses:g,fetchCourses:x,checkForUpdates:y,loading:v,semesters:N,error:M,usingBackup:S}=oa(),[V,K]=k.useState("");k.useEffect(()=>{!V&&N.length>0&&K(N[0])},[N]);const[G,z]=k.useState(!1),[q,$]=k.useState(""),[Y,E]=k.useState(""),[_,C]=k.useState(""),[D,j]=k.useState(!0),[Q,U]=k.useState(""),[T,W]=k.useState(""),[H,F]=k.useState(""),[L,te]=k.useState(!0),[Ae,P]=k.useState(!1),[J,le]=k.useState(null),{allUserLabels:ge,getLabelsForCourse:Ee,courseUserLabels:Ce}=xu(),[Se,ut]=k.useState([]),[qe,Gt]=k.useState(!1),Nt=k.useRef(null),he=k.useRef(null);k.useEffect(()=>{const ce=Re=>{const Ye=Nt.current&&Nt.current.contains(Re.target),nt=he.current&&he.current.contains(Re.target);!Ye&&!nt&&Gt(!1)};return document.addEventListener("mousedown",ce),()=>document.removeEventListener("mousedown",ce)},[]);const R=ce=>{ut(Re=>Re.includes(ce)?Re.filter(Ye=>Ye!==ce):[...Re,ce]),Gt(!1)},Z=ce=>{ut(Re=>Re.filter(Ye=>Ye!==ce))},[de,pe]=k.useState(null),[ze,it]=k.useState(!1);k.useEffect(()=>{if(de){it(!1);const ce=setTimeout(()=>{it(!0),setTimeout(()=>{pe(null),it(!1)},300)},2e3);return()=>clearTimeout(ce)}},[de]),k.useEffect(()=>{V&&x(V)},[V]),k.useEffect(()=>{if(!V)return;const ce=setInterval(()=>{y(V)},6e4);return()=>clearInterval(ce)},[V]);const Je=k.useRef(!1);k.useEffect(()=>{l&&(U(""),W(""),F(""),ut([]),P(!1),z(!1),Je.current=!0,setTimeout(()=>{const ce=document.getElementById(`course-card-${l}`);ce&&ce.scrollIntoView({behavior:"auto",block:"center"}),setTimeout(()=>{Je.current=!1},100)},50))},[l]);const De=()=>{l&&!Je.current&&u&&u()},Ue=(ce,Re)=>{if(ce.stopPropagation(),!Re.semester||!Re.id)return;const Ye=Re.semester.slice(0,3),Oe=Re.semester.slice(3),tt=`https://selcrs.nsysu.edu.tw/menu5/showoutline.asp?SYEAR=${Ye}&SEM=${Oe}&CrsDat=${Re.id}`;window.open(tt,"_blank")},St=ce=>{const Re=AS(ce.classTime),Ye=Mi(ce.classTime),nt=ce.room?ce.room.match(/\((.*?)\)/)?.[1]||ce.room:"";return{...ce,parsedTime:Re,parsedTimes:Ye,parsedRoom:nt}},qs=ce=>{if(!t?.major)return!1;const Re=t.major.replace(/[]/g,"");return ce.replace(/[]/g,"")===Re||ce.includes(Re)||Re.includes(ce)},Pt=V?parseInt(V.substring(0,3)):0,ve=t&&Pt?Pt-t.entranceYear+1:0;k.useEffect(()=>{if(G&&t&&V){if(t.major&&$(t.major),t.entranceYear){const ce=Pt-t.entranceYear+1;ce>=1&&ce<=4?E(ce.toString()):E("-")}t.studentClass?C(t.studentClass):C("-"),j(!0)}},[G,V,t]);const Vt=ce=>{const Re=Go(ce,t?.major,ve);return gO(Re)},sr=ce=>{const Re=Go(ce,t?.major),Ye=qs(ce.department),{compulsory:nt,grade:Oe}=ce;if(Re.category==="General Education"){const tt=Re.genEduSubCategory||"General Education";return d.categories?.[tt]||tt}return f==="en"?Ye?nt&&parseInt(Oe)===ve?"Major Req":"Major Elec":nt?"Required":"Elective":Ye?nt&&parseInt(Oe)===ve?"":"":nt?"":""},Ht=k.useMemo(()=>g.filter(ce=>ce.semester===V).length,[g,V]),br=k.useMemo(()=>v||!V||V.endsWith("3")?!1:Ht>0&&Ht<2e3,[v,V,Ht]),kr=k.useMemo(()=>g.filter(ce=>{if(ce.semester!==V)return!1;if(G){if(q&&ce.department!==q&&!ce.department.includes(q.replace(/[]/g,""))||ce.department.endsWith("")||ce.department.endsWith("")||ce.department.endsWith("")||ce.department.includes("")||ce.department.includes("")||ce.department.includes("")||Y&&Y!=="-"&&ce.grade!==Y)return!1;if(_&&_!=="-"){const Oe=ce.class||"";if(_===""){if(!(Oe.includes("")||ce.english===!0))return!1}else if(_===""){if(!Oe.includes(""))return!1}else if(_===""){if(!Oe.includes(""))return!1}else if(_===""&&!Oe.includes(""))return!1}return!(!D&&!ce.compulsory)}if(Se.length>0){const Oe=Ee(ce.id,V).map(dr=>dr.text);if(!Se.every(dr=>Oe.includes(dr)))return!1}const Re=/[\s,]+/,Ye=s.toLowerCase().split(Re).filter(Oe=>Oe.trim().length>0);if(Ye.length>0&&!Ye.every(tt=>{const dr=ce.name.toLowerCase().includes(tt)||ce.teacher.toLowerCase().includes(tt)||ce.id.toLowerCase().includes(tt)||ce.department.toLowerCase().includes(tt);let cs=!1;if(!dr)if((us=>ce.tags?.some(qt=>qt.includes(us)))(tt))cs=!0;else{const us=ce.compulsory;(tt==="required"||tt==="req"||tt===""||tt==="")&&us&&(cs=!0),(tt==="elective"||tt==="elec"||tt===""||tt==="")&&!us&&(cs=!0),tt==="emi"&&ce.english&&(cs=!0)}return dr||cs}))return!1;let nt=!0;if(Q){const Oe=Go(ce,t?.major),tt=["Boya","Sports","Cross-College","Chinese","English","Service"].includes(Q);Q==="EAP/ESP"?Oe.isEapEsp||(nt=!1):tt?(Oe.genEduSubCategory!==Q&&(nt=!1),nt&&Q==="Boya"&&T&&Oe.boyaDimension!==T&&(nt=!1)):Oe.category!==Q&&(nt=!1)}if(!nt||H&&!Mi(ce.classTime).some(tt=>tt.day.includes(H)))return!1;if(!L&&e.length>0){const Oe=Mi(ce.classTime);if(Oe.length>0&&Oe.some(dr=>{const cs={...ce,day:dr.day,startTime:dr.startTime,endTime:dr.endTime};return e.some(ts=>ts.day===cs.day&&Kx(cs,ts))}))return!1}return!(Ae&&!Go(ce,t?.major).isEMI)}).map(St),[g,V,s,Se,Q,T,H,L,Ae,e,t,Ce,G,q,Y,_,D]),Ts=k.useMemo(()=>{const ce=new Set;return e.length===0||kr.forEach(Re=>{if(!Re.parsedTimes||Re.parsedTimes.length===0)return;Re.parsedTimes.some(nt=>{const Oe={...Re,day:nt.day,startTime:nt.startTime,endTime:nt.endTime};return e.some(tt=>tt.day===Oe.day&&Kx(Oe,tt))})&&ce.add(Re.id)}),ce},[kr,e]);return a.jsxs("div",{className:"flex flex-col h-full bg-background border-l border-border",children:[a.jsxs("div",{className:"p-4 border-b border-border space-y-3 bg-background/50 backdrop-blur-sm",children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(P0,{className:"text-primary",size:20}),a.jsx("h2",{className:"font-bold text-lg",children:d.catalog.title})]}),a.jsxs("div",{className:"flex items-center gap-2 bg-background border border-border rounded-md px-2 py-1",children:[a.jsx(QD,{size:14,className:"text-muted"}),a.jsx("select",{value:V,onChange:ce=>K(ce.target.value),className:"bg-transparent text-sm outline-none text-foreground cursor-pointer",children:N.map(ce=>{const Re=ce.slice(0,3),Ye=ce.slice(3),nt=Ye==="3"?`${Re}-Summer`:`${Re}-${Ye}`;return a.jsx("option",{value:ce,className:"bg-surface text-foreground",children:ce.length===4?nt:ce},ce)})})]}),a.jsxs("div",{className:"flex items-center bg-surface/50 rounded-lg p-1 border border-border/50",children:[a.jsx("button",{onClick:()=>{z(!1),A("")},className:`px-3 py-1 rounded-md text-xs font-medium transition-all ${G?"text-muted hover:text-foreground":"bg-primary text-white dark:text-[#303030] shadow-sm"}`,children:d.catalog.mode?.all||"All Courses"}),a.jsx("button",{onClick:()=>{z(!0),A(""),ut([])},className:`px-3 py-1 rounded-md text-xs font-medium transition-all ${G?"bg-primary text-white dark:text-[#303030] shadow-sm":"text-muted hover:text-foreground"}`,children:d.catalog.mode?.compulsory||"Import Compulsory"})]})]})}),G?a.jsxs("div",{className:"w-full bg-background border border-border rounded-lg p-3 flex flex-wrap gap-4 items-center animate-in fade-in slide-in-from-top-1",children:[a.jsxs("div",{className:"flex flex-col gap-1 min-w-[130px]",children:[a.jsxs("label",{className:"text-xs text-muted flex items-center gap-1",children:[a.jsx(h5,{size:12}),d.catalog.label?.major||"Major"]}),a.jsxs("select",{value:q,onChange:ce=>$(ce.target.value),className:"text-sm bg-surface border border-border rounded px-2 py-1.5 outline-none focus:border-primary",children:[a.jsx("option",{value:"",children:"-"}),qf.map(ce=>a.jsx("optgroup",{label:ce.category,className:"text-primary font-bold",children:ce.departments.map(Re=>a.jsx("option",{value:Re,className:"text-foreground font-normal",children:Re},Re))},ce.category))]})]}),a.jsxs("div",{className:"flex flex-col gap-1 min-w-[100px]",children:[a.jsxs("label",{className:"text-xs text-muted flex items-center gap-1",children:[a.jsx(rr,{size:12}),d.catalog.label?.grade||"Grade"]}),a.jsxs("select",{value:Y,onChange:ce=>E(ce.target.value),className:"text-sm bg-surface border border-border rounded px-2 py-1.5 outline-none focus:border-primary",children:[a.jsx("option",{value:"-",children:"-"}),[1,2,3,4].map(ce=>a.jsx("option",{value:ce,children:d.catalog.grades?.[ce]||`Year ${ce}`},ce))]})]}),a.jsxs("div",{className:"flex flex-col gap-1 min-w-[140px]",children:[a.jsxs("label",{className:"text-xs text-muted flex items-center gap-1",children:[a.jsx(lk,{size:12}),d.catalog.label?.class||"Class"]}),a.jsxs("select",{value:_,onChange:ce=>C(ce.target.value),className:"text-sm bg-surface border border-border rounded px-2 py-1.5 outline-none focus:border-primary",children:[a.jsx("option",{value:"-",children:d.catalog.class?.none||"-"}),a.jsx("option",{value:"",children:d.catalog.class?.shared||"Shared"}),a.jsx("option",{value:"",children:d.catalog.class?.a||"Class A"}),a.jsx("option",{value:"",children:d.catalog.class?.b||"Class B"}),a.jsx("option",{value:"",children:d.catalog.class?.english||"English Class"})]})]}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("div",{className:"text-xs text-muted flex items-center gap-1 opacity-0 select-none",children:[a.jsx(ap,{size:12}),a.jsx("span",{children:"Spacer"})]}),a.jsxs("label",{className:"flex items-center gap-2 px-3 py-1.5 rounded border border-border bg-surface hover:bg-surface/80 cursor-pointer transition-colors select-none h-[34px]",children:[a.jsx("div",{className:`
                                    w-3.5 h-3.5 rounded border flex items-center justify-center transition-colors
                                    ${D?"bg-primary border-primary text-white":"bg-transparent border-muted text-transparent"}
                                `,children:D&&a.jsx(vt,{size:10,strokeWidth:4})}),a.jsx("input",{type:"checkbox",className:"hidden",checked:D,onChange:()=>j(!D)}),a.jsx("span",{className:`text-sm ${D?"text-primary font-medium":"text-muted-foreground"}`,children:d.catalog.includeElectives||"Include Electives"})]})]}),a.jsxs("div",{className:"ml-auto text-xs text-muted italic border-l border-border pl-3",children:["Checking ",a.jsxs("strong",{children:[q||"..."," - ",d.catalog.grades?.[Y]||"-"]}),D&&a.jsx("span",{children:" (+Electives)"})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"relative group z-20",children:[a.jsxs("div",{className:"w-full bg-background border border-border rounded-lg pl-3 pr-10 py-1.5 focus-within:ring-2 focus-within:ring-primary flex flex-wrap items-center gap-2 min-h-[42px]",children:[Se.map(ce=>{const Ye=ge.find(nt=>nt.text===ce)?.color||"#94a3b8";return a.jsxs("div",{className:"flex items-center gap-1 px-2 py-0.5 rounded-md text-xs font-medium cursor-pointer transition-all hover:ring-1 hover:ring-red-500 group/chip",style:{backgroundColor:`${Ye}20`,color:Ye,border:`1px solid ${Ye}40`},onClick:()=>Z(ce),children:[a.jsx("span",{children:ce}),a.jsx("div",{className:"hidden group-hover/chip:flex bg-red-500 text-white rounded-full w-3 h-3 items-center justify-center",children:a.jsx("svg",{width:"8",height:"8",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})})})]},ce)}),a.jsx("input",{type:"text",placeholder:Se.length>0?"":d.planner.search.placeholder,value:s,onChange:ce=>A(ce.target.value),className:"bg-transparent outline-none flex-1 min-w-[120px] text-sm py-1"})]}),a.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1",children:[v&&a.jsx(X2,{className:"animate-spin text-muted mr-1",size:16}),(s||Se.length>0)&&a.jsx("button",{onClick:()=>{A(""),ut([])},className:"text-muted hover:text-foreground p-1",children:a.jsx("div",{className:"bg-muted/20 hover:bg-muted/40 rounded-full p-0.5",children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 6 6 18"}),a.jsx("path",{d:"m6 6 12 12"})]})})}),a.jsx("button",{ref:he,onClick:()=>Gt(!qe),className:`p-1.5 rounded-md transition-colors ${Se.length>0?"text-primary bg-primary/10":"text-muted hover:text-foreground hover:bg-muted/20"}`,title:"Filter by Label",children:a.jsx(ap,{size:16})})]}),qe&&a.jsxs("div",{ref:Nt,className:"absolute top-full left-0 right-0 mt-2 p-2 bg-surface border border-border rounded-lg shadow-xl z-50 animate-in fade-in slide-in-from-top-2",children:[a.jsx("div",{className:"text-xs font-semibold text-muted mb-2 px-1 uppercase tracking-wider",children:d.planner.labels.library}),a.jsx("div",{className:"flex flex-wrap gap-2 max-h-[200px] overflow-y-auto custom-scrollbar p-1",children:ge.length===0?a.jsx("div",{className:"text-sm text-muted italic w-full text-center py-2",children:d.planner.labels.noLabels}):ge.map(ce=>{const Re=Se.includes(ce.text);return a.jsx("button",{onClick:()=>R(ce.text),className:`
                                                        px-2 py-1 rounded-md text-xs border transition-all
                                                        ${Re?"opacity-50 grayscale cursor-not-allowed":"hover:scale-105 active:scale-95"}
                                                    `,style:{backgroundColor:`${ce.color}20`,color:ce.color,borderColor:`${ce.color}40`},disabled:Re,children:ce.text},ce.text)})})]})]}),a.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-1 custom-scrollbar",children:[a.jsxs("select",{value:H,onChange:ce=>F(ce.target.value),className:"bg-background border border-border rounded-md px-2 py-1 text-sm outline-none focus:border-primary",children:[a.jsx("option",{value:"",children:d.planner.days.any}),a.jsx("option",{value:"Mon",children:d.planner.days.mon}),a.jsx("option",{value:"Tue",children:d.planner.days.tue}),a.jsx("option",{value:"Wed",children:d.planner.days.wed}),a.jsx("option",{value:"Thu",children:d.planner.days.thu}),a.jsx("option",{value:"Fri",children:d.planner.days.fri})]}),a.jsxs("select",{value:Q,onChange:ce=>{U(ce.target.value),W("")},className:"bg-background border border-border rounded-md px-2 py-1 text-sm outline-none focus:border-primary max-w-[150px]",children:[a.jsx("option",{value:"",children:d.planner.depts.all}),a.jsx("option",{value:"Major Required",children:d.categories?.["Major Required"]||"Major Required"}),a.jsx("option",{value:"Major Elective",children:d.categories?.["Major Elective"]||"Major Elective"}),a.jsx("option",{value:"Boya",children:d.categories?.Boya||"Boya"}),a.jsx("option",{value:"Sports",children:d.categories?.Sports||"Sports"}),a.jsx("option",{value:"Cross-College",children:d.categories?.["Cross-College"]||"Cross-College"}),a.jsx("option",{value:"Chinese",children:d.categories?.Chinese||"Chinese"}),a.jsx("option",{value:"English",children:d.categories?.English||"English"}),a.jsx("option",{value:"EAP/ESP",children:d.categories?.["EAP/ESP"]||"EAP / ESP"}),a.jsx("option",{value:"Other",children:d.categories?.Other||"Other"})]}),Q==="Boya"&&a.jsxs("select",{value:T,onChange:ce=>W(ce.target.value),className:"bg-background border border-border rounded-md px-2 py-1 text-sm outline-none focus:border-primary max-w-[150px] animate-in slide-in-from-left-2 fade-in duration-300",children:[a.jsx("option",{value:"",children:f==="zh"?"":"All Dimensions"}),yx.map(ce=>a.jsx("option",{value:ce,children:d.categories?.[ce]||ce},ce))]}),a.jsxs("label",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-md border border-border bg-surface hover:bg-surface/80 cursor-pointer transition-colors select-none",children:[a.jsx("div",{className:`
                                w-4 h-4 rounded border flex items-center justify-center transition-colors
                                ${L?"bg-red-500 border-red-500 text-white":"bg-transparent border-muted text-transparent"}
                            `,children:L&&a.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("polyline",{points:"20 6 9 17 4 12"})})}),a.jsx("input",{type:"checkbox",className:"hidden",checked:L,onChange:()=>te(!L)}),a.jsx("span",{className:`text-sm ${L?"text-red-500 font-medium":"text-muted-foreground"}`,children:d.planner.showConflicts})]}),a.jsxs("label",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-md border border-border bg-surface hover:bg-surface/80 cursor-pointer transition-colors select-none",children:[a.jsx("div",{className:`
                                w-4 h-4 rounded border flex items-center justify-center transition-colors
                                ${Ae?"bg-sky-500 border-sky-500 text-white":"bg-transparent border-muted text-transparent"}
                            `,children:Ae&&a.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("polyline",{points:"20 6 9 17 4 12"})})}),a.jsx("input",{type:"checkbox",className:"hidden",checked:Ae,onChange:()=>P(!Ae)}),a.jsx("span",{className:`text-sm ${Ae?"text-sky-500 font-medium":"text-muted-foreground"}`,children:d.planner.showEMIOnly||"EMI Only"})]})]})]}),a.jsxs("div",{className:"flex justify-between items-center text-xs text-muted pt-1 px-1",children:[a.jsxs("div",{className:"flex items-center gap-1.5 opacity-70",title:S?"Using offline backup":"Auto-checking for updates every 60s",children:[a.jsxs("span",{className:"relative flex h-2 w-2",children:[!S&&a.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),a.jsx("span",{className:`relative inline-flex rounded-full h-2 w-2 ${S?"bg-gray-400":"bg-green-500"}`})]}),a.jsx("span",{children:S?"Backup Course Data":"Latest Course Data"})]}),a.jsxs("span",{children:[kr.length," ",d.catalog.coursesFound]})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-2 custom-scrollbar bg-background/20 relative",onScroll:De,onClickCapture:De,children:[br&&a.jsxs("div",{className:"sticky top-0 z-10 bg-orange-500/10 border border-orange-500/20 text-orange-600 text-xs px-3 py-2 rounded-lg mb-2 flex items-start gap-2 backdrop-blur-md animate-in slide-in-from-top-2",children:[a.jsx(ys,{size:14,className:"mt-0.5 flex-shrink-0"}),a.jsx("span",{children:d.planner.incompleteDataWarning?.replace("{{count}}",Ht.toString())||`Warning: Low course count (${Ht}). University API might be updating.`})]}),M?a.jsxs("div",{className:"text-center text-red-500 py-10 flex flex-col items-center animate-in fade-in",children:[a.jsx(ys,{size:32,className:"mb-2 opacity-80"}),a.jsx("p",{className:"font-medium",children:d.planner.search.failed}),a.jsx("p",{className:"text-xs text-muted mt-1 max-w-[200px]",children:M}),a.jsx("button",{onClick:()=>V&&x(V),className:"mt-4 text-xs bg-surface border border-border px-3 py-1.5 rounded-lg hover:bg-surface/80 transition-colors",children:d.planner.search.retry})]}):kr.length===0?a.jsxs("div",{className:"text-center text-muted py-10 flex flex-col items-center",children:[a.jsx(ap,{size:32,className:"mb-2 opacity-50"}),a.jsx("p",{children:s||G?d.catalog.noResults:d.planner.search.noResults})]}):kr.map((ce,Re)=>{const Ye=Ts.has(ce.id),nt=e.some(tt=>tt.id===ce.id),Oe=tt=>pO(parseInt(tt));return a.jsx(mO,{course:ce,isAdded:nt,isConflicting:Ye,highlightedCourseId:l,onAddCourse:r,onOpenSyllabus:Ue,onLabelClick:le,onCopyId:tt=>{navigator.clipboard.writeText(tt).then(()=>{pe(d.planner.courseIdCopied)})},userProfile:t,currentGrade:ve,getTypeBadgeStyle:Vt,getTypeLabel:sr,getCreditColor:Oe},`${ce.id}-${Re}`)})]}),de&&a.jsxs("div",{className:`
                    absolute bottom-4 left-1/2 -translate-x-1/2 
                    bg-foreground text-background text-xs font-bold px-3 py-2 rounded-full shadow-lg z-50 flex items-center gap-2
                    transition-all duration-300
                    ${ze?"opacity-0 translate-y-2 scale-95":"opacity-100 translate-y-0 scale-100 animate-in slide-in-from-bottom-2 fade-in"}
                `,children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500"}),de]}),J&&a.jsx(fO,{courseId:J.id,courseName:J.name,semester:J.semester,onClose:()=>le(null)})]})},yO=({draftCourses:r,existingCourses:e,targetSemester:t,onConfirm:s,onCancel:A})=>{const{t:l,language:u}=At(),d=e.filter(y=>y.semester===t),f=r.filter(y=>d.some(v=>v.originalId===y.id&&v.originalSemester===y.originalSemester)),g=r.reduce((y,v)=>y+(Number(v.credits)||0),0),x=d.reduce((y,v)=>y+(Number(v.credits)||0),0);return a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-surface border border-border rounded-xl w-full max-w-6xl h-[90vh] flex flex-col shadow-2xl overflow-hidden",children:[a.jsxs("div",{className:"p-4 border-b border-border bg-background/50 flex justify-between items-center shrink-0",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-foreground flex items-center gap-2",children:l.planner.exportPreview?.title||"Export Preview"}),a.jsxs("p",{className:"text-sm text-muted",children:[l.planner.exportPreview?.desc||"Confirm changes before exporting to"," ",a.jsx("strong",{children:t})]})]}),a.jsx("button",{onClick:A,className:"text-muted hover:text-foreground transition-colors",children:a.jsx(xt,{size:24})})]}),a.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col md:flex-row divide-y md:divide-y-0 md:divide-x divide-border",children:[a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden bg-surface/30",children:[a.jsxs("div",{className:"p-3 bg-primary/10 border-b border-primary/20 flex justify-between items-center",children:[a.jsx("span",{className:"font-bold text-primary",children:l.planner.exportPreview?.draftSource||"Draft (Source)"}),a.jsxs("span",{className:"text-xs bg-primary/20 text-primary px-2 py-1 rounded",children:["+",r.length," ",l.app.totalCourses," (",g," cr)"]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-2 custom-scrollbar",children:a.jsx(mf,{semester:"Draft",courses:r.filter(y=>!y.isExemption),onCourseClick:()=>{},id:"preview-source-grid",readOnly:!0})})]}),a.jsx("div",{className:"hidden md:flex items-center justify-center w-12 bg-background/50 z-10",children:a.jsx("div",{className:"bg-surface border border-border p-2 rounded-full shadow-lg",children:a.jsx(eC,{className:"text-muted-foreground",size:24})})}),a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden bg-surface/30",children:[a.jsxs("div",{className:"p-3 bg-surface border-b border-border flex justify-between items-center",children:[a.jsxs("span",{className:"font-bold text-foreground",children:[l.planner.exportPreview?.destination||"Destination"," (",t,")"]}),a.jsxs("span",{className:"text-xs bg-surface border border-border text-muted px-2 py-1 rounded",children:[l.planner.exportPreview?.current||"Current",": ",d.length," ",l.app.totalCourses," (",x," cr)"]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-2 custom-scrollbar relative",children:[d.length===0&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-muted/50 font-medium",children:l.planner.exportPreview?.empty||"Empty Schedule"}),a.jsx(mf,{semester:t,courses:d,onCourseClick:()=>{},id:"preview-dest-grid",readOnly:!0})]}),d.length>0&&a.jsxs("div",{className:"p-2 bg-yellow-500/10 border-t border-yellow-500/20 text-xs text-yellow-500 flex flex-col items-center gap-1 justify-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ys,{size:14}),a.jsx("span",{children:l.planner.exportPreview?.warning||"Existing courses will remain. New courses will be added."})]}),f.length>0&&a.jsxs("div",{className:"text-red-400 font-semibold mt-1",children:[f.length," ",u==="zh"?"":"course(s) already exist and will be skipped."]})]})]})]}),a.jsxs("div",{className:"p-4 border-t border-border bg-background/50 flex justify-end gap-3 shrink-0",children:[a.jsx("button",{onClick:A,className:"px-4 py-2 rounded-lg text-sm font-medium hover:bg-surface border border-transparent hover:border-border transition-all",children:l.planner.exportPreview?.cancel||"Cancel"}),a.jsxs("button",{onClick:s,className:"bg-primary hover:bg-sky-400 text-white px-6 py-2 rounded-lg text-sm font-bold shadow-lg shadow-primary/20 transition-all flex items-center gap-2",children:[l.planner.exportPreview?.confirm||"Confirm Export",a.jsx(eC,{size:16})]})]})]})})},m1="Draft",bO=({semesters:r,onAddCourse:e,userProfile:t,existingCourses:s,onSaveCourses:A})=>{const{t:l,language:u}=At(),[d,f]=k.useState(()=>{const L=localStorage.getItem("nsysu-planner-draft");let te=L?JSON.parse(L):[];const Ae={"08:00":"08:10","09:00":"09:10","10:00":"10:10","11:00":"11:10","12:00":"12:10","13:00":"13:10","14:00":"14:10","15:00":"15:10","16:00":"16:10","17:00":"17:10","18:30":"18:10","19:30":"19:10","20:30":"20:10","21:30":"21:10"};return te=te.map(P=>P.startTime&&Ae[P.startTime]?{...P,startTime:Ae[P.startTime]}:P),te});k.useEffect(()=>{localStorage.setItem("nsysu-planner-draft",JSON.stringify(d))},[d]);const[g,x]=k.useState(!1),[y,v]=k.useState(()=>{const L=localStorage.getItem("nsysu-planner-last-export-semester");return L&&r.includes(L)?L:r.length>0?r[0]:""}),[N,M]=k.useState(""),[S,V]=k.useState(void 0),[K,G]=k.useState(!0),z=L=>{const te=AS(L.classTime);if(d.some(ge=>ge.id===L.id)){alert("Course already in draft!");return}const Ae=L.semester?L.semester.substring(0,3):r.length>0?r[0].substring(0,3):"113",P=t&&!isNaN(parseInt(Ae))?parseInt(Ae)-t.entranceYear+1:1,J=Go(L,t.major,P),le={id:L.id,name:L.name,credits:Number(L.credit)||3,grade:"",category:J.category,genEduSubCategory:J.genEduSubCategory,boyaDimension:J.boyaDimension,semester:m1,day:te?.day,startTime:te?.startTime,endTime:te?.endTime,classTime:L.classTime,room:L.room?L.room.match(/\((.*?)\)/)?.[1]||L.room:void 0,isEMI:J.isEMI,isEapEsp:J.isEapEsp,teacher:L.teacher,department:L.department,originalTags:L.tags,originalSemester:L.semester,originalId:L.id,userLabels:[]};f(ge=>[...ge,le])},[q,$]=k.useState(null),Y=L=>{$(L)},E=()=>{q&&(f(L=>L.filter(te=>te.id!==q.id)),$(null))},[_,C]=k.useState(!1);k.useEffect(()=>{if(_){const L=setTimeout(()=>C(!1),3e3);return()=>clearTimeout(L)}},[_]);const D=()=>{if(d.length===0){C(!1),alert("Draft board is already clear!");return}_?(f([]),C(!1)):C(!0)},[j,Q]=k.useState(!1),U=()=>{if(d.length!==0){if(!y){alert("Please select a semester to export to.");return}Q(!0)}},{courses:T}=oa(),W=()=>{const L=[],te=s.filter(J=>J.semester===y);let Ae=0;d.forEach(J=>{if(te.some(Ce=>Ce.originalId===J.id&&Ce.originalSemester===J.originalSemester)){Ae++;return}let ge=J;if(ge.originalId){const Ce=T.find(Se=>Se.id===ge.originalId);Ce&&(ge={...ge,room:Ce.room?Ce.room.match(/\((.*?)\)/)?.[1]||Ce.room:ge.room,teacher:Ce.teacher||ge.teacher,classTime:Ce.classTime||ge.classTime,department:Ce.department||ge.department,originalTags:Ce.tags||ge.originalTags,originalSemester:Ce.semester||ge.originalSemester,...Ce.classTime?(()=>{const Se=Mi(Ce.classTime||[]);return Se.length>0?{day:Se[0].day,startTime:Se[0].startTime,endTime:Se[0].endTime}:{}})():{}})}const Ee={...ge,id:crypto.randomUUID(),courseCode:J.id,semester:y,fromCatalog:!0};L.push(Ee)}),A?A(L):L.forEach(J=>e(J));let P=u==="zh"?` ${L.length}  ${y}`:`Successfully exported ${L.length} courses to ${y}!`;Ae>0&&(P+=u==="zh"?`
 ${Ae} `:`
Skipped ${Ae} existing duplicate courses.`),localStorage.setItem("nsysu-planner-last-export-semester",y),alert(P),x(!1),Q(!1)},H=L=>{M(""),V(L.id)},F=L=>{if(l.semesters[L])return l.semesters[L];if(u==="zh"&&L.startsWith("Year ")){const te=L.split(" "),Ae=te[1],P=te.slice(2).join(" "),le=["","","","","","","",""][parseInt(Ae)-1]||Ae;if(P==="Summer")return`${le} `;if(P==="Sem 1")return`${le} `;if(P==="Sem 2")return`${le} `}else if(L.startsWith("Year ")){const te=L.split(" "),Ae=te[1],P=te.slice(2).join(" ");if(P==="Sem 1")return`Year ${Ae} Fall Semester`;if(P==="Sem 2")return`Year ${Ae} Spring Semester`;if(P==="Summer")return`Year ${Ae} Summer`}return L};return a.jsxs("div",{className:"flex flex-col lg:flex-row h-[calc(100vh-80px)] gap-2 animate-in fade-in slide-in-from-bottom-2 duration-500 p-2",children:[a.jsxs("div",{id:"planner-draft-board",className:"flex-[2] lg:flex-[55] flex flex-col min-w-0 bg-background border border-border rounded-xl overflow-hidden shadow-sm",children:[a.jsxs("div",{className:"p-3 border-b border-border flex justify-between items-center bg-background backdrop-blur-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"bg-primary/20 p-1.5 rounded-md text-primary",children:a.jsx(AC,{size:18})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h2",{className:"font-bold text-foreground text-sm sm:text-base",children:l.planner.title}),a.jsxs("span",{className:"text-xs px-2 py-1 rounded-md bg-primary/10 text-primary font-bold border border-primary/20",children:[l.dashboard.totalCredits,": ",d.reduce((L,te)=>L+(Number(te.credits)||0),0)," cr"]})]}),a.jsx("p",{className:"text-[10px] text-muted hidden sm:block",children:"Experiment freely."})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer bg-surface border border-border px-2 py-1.5 rounded-lg hover:bg-surface/80 transition-colors",children:[a.jsx("input",{type:"checkbox",checked:K,onChange:L=>G(L.target.checked),className:"accent-red-500 w-3.5 h-3.5 cursor-pointer"}),a.jsx("span",{className:"text-xs font-medium text-muted hover:text-foreground select-none",children:l.planner.showConflicts})]}),a.jsxs("button",{onClick:D,className:`
                                px-2 py-1.5 rounded-lg text-xs font-medium transition-all border flex items-center gap-1
                                ${_?"bg-red-500 text-white border-red-500 hover:bg-red-600 animate-in fade-in zoom-in duration-200":"bg-surface hover:bg-red-500/10 text-muted hover:text-red-500 border-border hover:border-red-500/30"}
                            `,title:l.planner.clear,children:[a.jsx(ru,{size:14,className:_?"animate-pulse":""}),a.jsx("span",{className:"hidden sm:inline",children:_?"Really Clear?":l.planner.clear})]}),a.jsx("div",{className:"h-5 w-[1px] bg-border mx-1"}),g?a.jsxs("div",{className:"flex items-center gap-2 animate-in slide-in-from-right-2",children:[a.jsx("select",{value:y,onChange:L=>v(L.target.value),className:"bg-background border border-border text-foreground rounded-lg px-2 py-1 text-xs focus:ring-2 focus:ring-primary outline-none",children:r.map(L=>a.jsx("option",{value:L,children:F(L)},L))}),a.jsx("button",{onClick:U,className:"bg-primary hover:bg-[#8299BB] text-white dark:text-[#303030] px-3 py-1 rounded-lg text-xs font-bold shadow-sm transition-colors",children:"OK"}),a.jsx("button",{onClick:()=>x(!1),className:"text-muted hover:text-foreground px-1 text-xs",children:l.form.cancel})]}):a.jsxs("button",{onClick:()=>x(!0),className:"bg-primary hover:bg-[#8299BB] text-white dark:text-[#303030] px-3 py-1.5 rounded-lg text-xs font-bold shadow-lg shadow-primary/20 transition-all flex items-center gap-1",children:[a.jsx(AC,{size:14}),l.planner.export]})]})]}),a.jsx("div",{className:"flex-1 overflow-hidden relative p-1",children:a.jsx("div",{className:"h-full overflow-y-auto custom-scrollbar rounded-lg border border-border/50 bg-background/50",children:a.jsx(mf,{semester:m1,courses:d.filter(L=>!L.isExemption),onCourseClick:H,onRemoveCourse:Y,id:"planner-schedule-grid",showConflictWarnings:K})})})]}),a.jsx("div",{id:"planner-search-panel",className:"flex-1 lg:flex-[45] flex-shrink-0 h-full rounded-xl overflow-hidden shadow-xl border border-border/50",children:a.jsx(xO,{onAddCourse:z,currentSchedule:d,userProfile:t,searchTerm:N,onSearchChange:L=>{M(L),L&&V(void 0)},highlightedCourseId:S,onHighlightClear:()=>V(void 0)})}),j&&a.jsx(yO,{draftCourses:d,existingCourses:s,targetSemester:y,onConfirm:W,onCancel:()=>Q(!1)}),a.jsx(J0,{isOpen:!!q,title:u==="zh"?"":"Remove Course?",message:q?l.app.deleteConfirm||`Remove ${q.name} from draft?`:"",confirmText:l.courseList.remove||"Remove",cancelText:l.form.cancel,isDestructive:!0,onConfirm:E,onCancel:()=>$(null)})]})},vO=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Ti={A:{start:"07:00",end:"07:50"},1:{start:"08:10",end:"09:00"},2:{start:"09:10",end:"10:00"},3:{start:"10:10",end:"11:00"},4:{start:"11:10",end:"12:00"},B:{start:"12:10",end:"13:00"},5:{start:"13:10",end:"14:00"},6:{start:"14:10",end:"15:00"},7:{start:"15:10",end:"16:00"},8:{start:"16:10",end:"17:00"},9:{start:"17:10",end:"18:00"},C:{start:"18:20",end:"19:10"},D:{start:"19:15",end:"20:05"},E:{start:"20:10",end:"21:00"},F:{start:"21:05",end:"21:55"}},Gx=r=>{if(!Array.isArray(r))return null;for(let e=0;e<7;e++){const t=r[e];if(t&&t.length>0){const s=(e+1)%7,A=vO[s],l=t[0],u=t[t.length-1];let d,f;if(Ti[l]&&(d=Ti[l].start),Ti[u]&&(f=Ti[u].end),A&&d&&f)return{day:A,startTime:d,endTime:f}}}return null},VA=({onClose:r,onSelect:e,defaultSearch:t=""})=>{const{t:s}=At(),{semesters:A,courses:l,fetchCourses:u,loading:d}=oa(),[f,g]=k.useState(""),[x,y]=k.useState(t);k.useEffect(()=>{A.length>0&&!f&&(g(A[0]),u(A[0]))},[A]);const v=z=>{const q=z.target.value;g(q),u(q)},[N,M]=k.useState("");k.useEffect(()=>{const z=setTimeout(()=>{M(x)},300);return()=>clearTimeout(z)},[x]);const S=(z,q)=>{if(z.stopPropagation(),!q.semester||!q.id)return;const $=q.semester.slice(0,3),E=q.semester.slice(3),_=`https://selcrs.nsysu.edu.tw/menu5/showoutline.asp?SYEAR=${$}&SEM=${E}&CrsDat=${q.id}`;window.open(_,"_blank")},V=z=>z?z.endsWith("3")?`${z.slice(0,z.length-1)}-${s.catalog.summer}`:z.length>1?`${z.slice(0,z.length-1)}-${z.slice(z.length-1)}`:z:"",K=z=>{const q=Gx(z);if(!q)return null;const $=q.day.toLowerCase().slice(0,3);return`${s.planner?.days?.[$]||q.day} ${q.startTime}-${q.endTime}`},G=k.useMemo(()=>{if(!N)return l.filter(Q=>Q.semester===f);let z=N.toLowerCase();const q=["required","major req","compulsory",""],$=["elective","major elec","optional",""],Y=q.some(Q=>z.includes(Q)),E=$.some(Q=>z.includes(Q));Y&&q.forEach(Q=>z=z.replace(Q,"").trim()),E&&$.forEach(Q=>z=z.replace(Q,"").trim());const _=z==="boya"?"":z,C=z.includes("boya")||z.includes(""),D=Q=>Y&&!Q.compulsory||E&&Q.compulsory?!1:_?Q.name.toLowerCase().includes(_)||Q.teacher.toLowerCase().includes(_)||Q.id.toLowerCase().includes(_)||Q.department.toLowerCase().includes(_)||Q.tags&&Q.tags.some(U=>U.toLowerCase().includes(_))||C&&Q.department.includes(""):!0,j=l.filter(Q=>Q.semester===f&&D(Q));return j.length>0?j:l.filter(Q=>D(Q))},[l,f,N]);return k.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),Wt.createPortal(a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[20000] p-4",children:a.jsxs("div",{className:"bg-surface border border-border rounded-xl w-full max-w-2xl shadow-2xl overflow-hidden flex flex-col h-[85vh] animate-in fade-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-4 border-b border-border bg-background/50 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-foreground",children:s.catalog.title}),a.jsx("p",{className:"text-sm text-muted",children:s.catalog.subtitle})]}),a.jsx("button",{onClick:r,className:"text-muted hover:text-foreground transition-colors",children:a.jsx(xt,{size:24})})]}),a.jsx("div",{className:"p-4 space-y-4",children:a.jsxs("div",{className:"flex gap-4",children:[a.jsx("select",{value:f,onChange:v,className:"bg-background border border-border text-foreground rounded-lg px-3 py-2 outline-none focus:ring-2 focus:ring-primary/50",children:A.map(z=>a.jsx("option",{value:z,children:V(z)},z))}),a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(P0,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted",size:18}),a.jsx("input",{type:"text",placeholder:s.catalog.searchPlaceholder,value:x,onChange:z=>y(z.target.value),className:"w-full bg-background border border-border text-foreground rounded-lg pl-10 pr-4 py-2 outline-none focus:ring-2 focus:ring-primary/50 placeholder:text-muted/50"})]})]})}),a.jsxs("div",{className:"flex justify-end text-sm text-muted px-4",children:[G.length," ",s.catalog.coursesFound," ",N&&`for "${N}"`]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2 custom-scrollbar bg-background/30",children:d?a.jsxs("div",{className:"flex flex-col items-center justify-center h-40 text-muted",children:[a.jsx(X2,{className:"animate-spin mb-2",size:32}),s.catalog.loading]}):G.length===0?a.jsx("div",{className:"text-center text-muted py-10",children:N?s.catalog.noResults:"Select a semester to view courses"}):G.map((z,q)=>a.jsxs("div",{onClick:()=>e(z),className:"group p-3 rounded-lg border border-border/50 bg-surface hover:border-primary cursor-pointer transition-all hover:shadow-lg flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"font-bold text-foreground group-hover:text-primary transition-colors cursor-pointer hover:underline decoration-primary/50 underline-offset-2",onClick:$=>S($,z),title:"Click to view syllabus",children:z.name}),z.semester&&a.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${z.semester===f?"bg-primary/20 border-primary/30 text-primary":"bg-surface border-gray-600 text-muted"}`,children:V(z.semester)}),z.english&&a.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded border bg-purple-500/10 border-purple-500/30 text-purple-400 font-medium",children:"EMI"})]}),a.jsxs("div",{className:"text-xs text-muted mt-1 flex gap-2",children:[a.jsxs("span",{className:"bg-background/50 px-1.5 py-0.5 rounded border border-border/50",children:["ID: ",z.id]}),a.jsx("span",{className:"bg-background/50 px-1.5 py-0.5 rounded border border-border/50",children:z.teacher}),a.jsxs("span",{className:"bg-background/50 px-1.5 py-0.5 rounded border border-border/50",children:[z.credit," cr"]}),a.jsx("span",{className:"bg-background/50 px-1.5 py-0.5 rounded border border-border/50",children:z.department}),K(z.classTime)&&a.jsx("span",{className:"bg-blue-500/10 text-blue-400 px-1.5 py-0.5 rounded border border-blue-500/20",children:K(z.classTime)})]})]}),a.jsx("div",{className:"ml-4 opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(rr,{className:"text-primary",size:20})})]},`${z.id}-${z.semester}-${q}`))},N),a.jsx("div",{className:"p-4 border-t border-border bg-background/30 text-xs text-muted text-center",children:s.catalog.dataSource})]})}),document.body)},wO="ClearGradAssets",fn="files",BO=1,vu=()=>new Promise((r,e)=>{const t=indexedDB.open(wO,BO);t.onupgradeneeded=s=>{const A=s.target.result;A.objectStoreNames.contains(fn)||A.createObjectStore(fn,{keyPath:"id"})},t.onsuccess=s=>{r(s.target.result)},t.onerror=s=>{e(s.target.error)}}),Tn=async(r,e)=>{const t=await vu();return new Promise((s,A)=>{const u=t.transaction(fn,"readwrite").objectStore(fn),d={id:r,file:e,name:e.name,type:e.type,lastModified:e.lastModified},f=u.put(d);f.onsuccess=()=>s(),f.onerror=()=>A(f.error)})},na=async r=>{const e=await vu();return new Promise((t,s)=>{const u=e.transaction(fn,"readonly").objectStore(fn).get(r);u.onsuccess=()=>{const d=u.result;if(d){const f=new File([d.file],d.name,{type:d.type,lastModified:d.lastModified});t(f)}else t(null)},u.onerror=()=>s(u.error)})},aa=async r=>{const e=await vu();return new Promise((t,s)=>{const u=e.transaction(fn,"readwrite").objectStore(fn).delete(r);u.onsuccess=()=>t(),u.onerror=()=>s(u.error)})},CO=async()=>{const r=await vu();return new Promise((e,t)=>{const l=r.transaction(fn,"readwrite").objectStore(fn).clear();l.onsuccess=()=>e(),l.onerror=()=>t(l.error)})},g1=async()=>{const r=await vu();return new Promise((e,t)=>{const l=r.transaction(fn,"readonly").objectStore(fn).getAll();l.onsuccess=()=>e(l.result),l.onerror=()=>t(l.error)})},EO=r=>new Promise((e,t)=>{const s=new FileReader;s.readAsDataURL(r),s.onload=()=>e(s.result),s.onerror=A=>t(A)}),NO=async r=>(await fetch(r)).blob(),SO=async r=>{for(const e of r)if(e.id&&e.data)try{const t=await NO(e.data),s=new File([t],e.name,{type:e.type,lastModified:e.lastModified});await Tn(e.id,s)}catch(t){console.error(`Failed to restore asset ${e.id}`,t)}},_O=()=>Math.random().toString(36).substring(2,9)+Date.now().toString(36),jO={department:"",minTotalCredits:"",targetYear:"",status:"in_progress",prerequisites:{isWaived:!1,courses:[{id:"init-pre",name:"",credits:"",completed:!1,isAutoCreated:!0}]},designatedRequired:{minCredits:"",courses:[{id:"init-des",name:"",credits:"",completed:!1,isAutoCreated:!0}]},electiveRequired:{minCredits:"",courses:[{id:"init-ele",name:"",credits:"",completed:!1,isAutoCreated:!0}]},proofFileName:"",notes:""},Qp="nsysu-interdisciplinary-minor-data",TO={en:{basicInfo:"Basic Info",minorDept:"Minor Department",selectDept:"Select Department...",applicableYear:"Applicable Year",selectYear:"Select Year...",minTotalCredits:"Minimum Total Credits for Minor",totalProgress:"Total Minor Credits Progress",prerequisites:"Prerequisites",none:"None",noPrereqs:"No prerequisites required.",allPrereqsDone:"All Prerequisites Completed!",designated:"Designated Required",elective:"Elective Required",minCredits:"Min Credits:",sectionComplete:"Section Complete!",courseName:"Course Name",typeToAdd:"Type to add course...",credit:"Credit",pleaseFill:'Please fill in "Min Credits" to track progress.',pleaseFillTotal:'Please fill in "Minimum Total Credits" to track progress.',officialRegulations:"NSYSU Minor Regulations",status:"Minor Status",statusPlanned:"Planned",statusInProgress:"In Progress",statusPending:"Pending Approval",statusCompleted:"Approved / Completed",creditWarning:"Completion of credit requirements does not imply official approval; actual results are subject to NSYSU's official announcement",prerequisiteNotice:'Prerequisites are courses required before the minor. If none, check "None".',proofSection:"Approval / Proof (optional)",proofStatus:"Status:",notSubmitted:"Not Submitted",submitted:"Submitted",approved:"Approved",uploadOrLink:"Upload or Paste Link:",uploadType:"Approval Letter / System Screenshot",notes:"Notes (Optional)",viewFile:"View Attached File",uploadFile:"Upload File",safetyNotice:"Files are stored locally in your browser and are not uploaded to any server.",confirmRemove:"Are you sure you want to remove this file?",storedOnOriginalDevice:"Stored on original upload device",reUpload:"Re-upload"},zh:{basicInfo:"",minorDept:"",selectDept:"...",applicableYear:"",selectYear:"...",minTotalCredits:"",totalProgress:"",prerequisites:"",none:"",noPrereqs:"",allPrereqsDone:"",designated:"",elective:"",minCredits:"",sectionComplete:"",courseName:"",typeToAdd:"...",credit:"",pleaseFill:"",pleaseFillTotal:"",officialRegulations:"",status:"",statusPlanned:"",statusInProgress:"",statusPending:"",statusCompleted:"",creditWarning:"",prerequisiteNotice:"",proofSection:"",proofStatus:"",notSubmitted:"",submitted:"",approved:"",uploadOrLink:"",uploadType:" / ",notes:"",viewFile:"",uploadFile:"",safetyNotice:"",confirmRemove:"",storedOnOriginalDevice:"",reUpload:""}},UO=({onStatusChange:r})=>{const{language:e}=At(),t=TO[e==="zh"?"zh":"en"],{semesters:s}=oa(),[A,l]=k.useState(()=>{const T=localStorage.getItem(Qp);if(T){const W=JSON.parse(T);return W.status||(W.status="in_progress"),W}return jO}),[u,d]=k.useState(!1),[f,g]=k.useState(!1),[x,y]=k.useState(null),[v,N]=k.useState(null),[M,S]=k.useState(null);k.useEffect(()=>{na("minor_4_proof").then(T=>{T&&S(T)})},[]);const V=async T=>{if(T.target.files&&T.target.files[0]){const W=T.target.files[0];await Tn("minor_4_proof",W),S(W),z("proofFileName","",W.name)}},K=async()=>{window.confirm(t.confirmRemove)&&(await aa("minor_4_proof"),S(null),z("proofFileName","",""))};k.useEffect(()=>{const T=localStorage.getItem(Qp),W=JSON.stringify(A);T!==W&&localStorage.setItem(Qp,W)},[A]);const G=s.map(T=>{if(T.length===4){const W=T.substring(0,3),H=T.substring(3);return H==="3"?`${W}-Summer`:`${W}-${H}`}return T}),z=(T,W,H)=>{l(F=>({...F,[T]:typeof F[T]=="object"?{...F[T],[W]:H}:H}))},q=(T,W,H)=>{l(F=>({...F,[T]:{...F[T],[W]:H}}))},$=(T,W,H,F)=>{l(L=>{const te=[...L[T].courses],Ae=te.findIndex(J=>J.id===W);if(Ae===-1)return L;const P={...te[Ae],[H]:F};return P.isAutoCreated&&H==="name"&&F.trim()!==""&&(P.isAutoCreated=!1,te.push({id:_O(),name:"",credits:"",completed:!1,isAutoCreated:!0})),te[Ae]=P,{...L,[T]:{...L[T],courses:te}}})},Y=(T,W)=>{l(H=>({...H,[T]:{...H[T],courses:H[T].courses.filter(F=>F.id!==W)}}))},E=T=>{const W=A[T].courses.filter(F=>F.completed&&!F.isAutoCreated).reduce((F,L)=>F+(parseFloat(L.credits)||0),0),H=parseFloat(A[T].minCredits)||0;return{completed:W,target:H}},_=()=>{const T=A.designatedRequired.courses.filter(te=>te.completed).reduce((te,Ae)=>te+(parseFloat(Ae.credits)||0),0),W=A.electiveRequired.courses.filter(te=>te.completed).reduce((te,Ae)=>te+(parseFloat(Ae.credits)||0),0),H=A.prerequisites.isWaived?0:A.prerequisites.courses.filter(te=>te.completed).reduce((te,Ae)=>te+(parseFloat(Ae.credits)||0),0),F=T+W+H,L=parseFloat(A.minTotalCredits)||0;return{total:F,target:L}};k.useEffect(()=>{if(!r)return;const T=_(),W=E("designatedRequired"),H=E("electiveRequired"),F=T.target>0&&T.total>=T.target,L=W.target>0&&W.completed>=W.target,te=H.target>0&&H.completed>=H.target,Ae=A.prerequisites.courses.filter(le=>!le.isAutoCreated),P=A.prerequisites.isWaived||Ae.length>0&&Ae.every(le=>le.completed),J=F&&L&&te&&P&&A.status==="completed";r(J)},[A,r]);const C=T=>{x&&v&&($(x,v,"name",T.name),$(x,v,"credits",T.credit.toString()),d(!1),y(null),N(null))},D=(T,W)=>a.jsxs("div",{className:`flex items-center gap-2 mb-2 ${W.completed?"opacity-50":""}`,children:[!W.isAutoCreated&&a.jsx("div",{onClick:()=>$(T,W.id,"completed",!W.completed),className:`w-5 h-5 rounded border flex items-center justify-center cursor-pointer flex-shrink-0 transition-colors ${W.completed?"bg-emerald-500 border-emerald-500 text-white":"border-border hover:border-primary"}`,children:W.completed&&a.jsx(vt,{size:14,strokeWidth:3})}),W.isAutoCreated&&a.jsx("div",{className:"w-5 h-5 flex-shrink-0"}),a.jsxs("div",{className:"relative flex-1",children:[a.jsx("input",{type:"text",value:W.name,placeholder:W.isAutoCreated?t.typeToAdd:t.courseName,onChange:H=>$(T,W.id,"name",H.target.value),className:`w-full bg-background border border-border rounded-lg px-3 py-1.5 text-sm outline-none focus:ring-2 focus:ring-primary/50 ${W.completed?"line-through text-muted":"text-foreground"}`}),!W.completed&&a.jsx("button",{onClick:()=>{y(T),N(W.id),d(!0)},className:"absolute right-2 top-1/2 -translate-y-1/2 text-muted hover:text-primary",title:"Import from Catalog",children:a.jsx(es,{size:14})})]}),a.jsx("input",{type:"text",value:W.credits,placeholder:t.credit,onChange:H=>{/^\d*\.?\d*$/.test(H.target.value)&&$(T,W.id,"credits",H.target.value)},className:`w-20 bg-background border border-border rounded-lg px-2 py-1.5 text-sm text-center outline-none focus:ring-2 focus:ring-primary/50 ${W.completed?"line-through text-muted":"text-foreground"}`}),W.isAutoCreated?a.jsx("div",{className:"w-[26px] flex-shrink-0"}):a.jsx("button",{onClick:()=>Y(T,W.id),className:"text-muted hover:text-destructive p-1 w-[26px] flex justify-center flex-shrink-0",children:a.jsx(jn,{size:16})})]},W.id),j=_(),Q=E("designatedRequired"),U=E("electiveRequired");return a.jsxs("div",{className:"space-y-8 max-w-3xl mx-auto animate-in fade-in zoom-in-95 duration-300 pb-20",children:[a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary flex items-center gap-2",children:[a.jsx(rr,{size:20}),t.basicInfo]}),a.jsxs("a",{href:"https://oaa.nsysu.edu.tw/p/412-1003-3253.php?Lang=zh-tw",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 px-3 py-1.5 bg-primary/10 hover:bg-primary/20 text-primary text-xs font-medium rounded-lg transition-colors",children:[t.officialRegulations,a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),a.jsx("polyline",{points:"15 3 21 3 21 9"}),a.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"md:col-span-2 relative",children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:t.status}),a.jsxs("button",{onClick:()=>g(!f),className:`w-full flex items-center justify-between bg-background border rounded-lg px-3 py-2 text-sm outline-none transition-all ${f?"ring-2 ring-primary/50 border-primary":"border-border hover:border-primary/50"}`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${A.status==="planned"?"bg-warning shadow-[0_0_8px] shadow-warning/50":A.status==="in_progress"?"bg-primary shadow-[0_0_8px] shadow-primary/50":A.status==="pending"?"bg-orange-500 shadow-[0_0_8px] shadow-orange-500/50":"bg-success shadow-[0_0_8px] shadow-success/50"}`}),a.jsx("span",{className:"text-foreground",children:A.status==="planned"?t.statusPlanned:A.status==="in_progress"?t.statusInProgress:A.status==="pending"?t.statusPending:t.statusCompleted})]}),a.jsx(pu,{size:16,className:`text-muted transition-transform duration-200 ${f?"rotate-180":"rotate-0"}`})]}),f&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>g(!1)}),a.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-surface border border-border rounded-lg shadow-xl z-20 py-1 overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[{val:"planned",label:t.statusPlanned,color:"bg-warning",text:"text-warning"},{val:"in_progress",label:t.statusInProgress,color:"bg-primary",text:"text-primary"},{val:"pending",label:t.statusPending,color:"bg-orange-500",text:"text-orange-500"},{val:"completed",label:t.statusCompleted,color:"bg-success",text:"text-success"}].map(T=>a.jsxs("button",{onClick:()=>{z("status","",T.val),g(!1)},className:`w-full flex items-center gap-3 px-3 py-2.5 text-sm transition-colors ${A.status===T.val?"bg-primary/10":"hover:bg-white/5"}`,children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${T.color} ${A.status===T.val?"shadow-[0_0_6px] "+T.color:""}`}),a.jsx("span",{className:`${A.status===T.val?T.text+" font-medium":"text-foreground"}`,children:T.label}),A.status===T.val&&a.jsx(vt,{size:14,className:`ml-auto ${T.text}`})]},T.val))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:t.minorDept}),a.jsxs("select",{value:A.department,onChange:T=>z("department","",T.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50",children:[a.jsx("option",{value:"",children:t.selectDept}),uS.map(T=>a.jsx("option",{value:T,children:T},T))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:t.applicableYear}),a.jsxs("select",{value:A.targetYear,onChange:T=>z("targetYear","",T.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50",children:[a.jsx("option",{value:"",children:t.selectYear}),G.map(T=>a.jsx("option",{value:T,children:T},T))]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:t.minTotalCredits}),a.jsx("input",{type:"text",value:A.minTotalCredits,onChange:T=>/^\d*$/.test(T.target.value)&&z("minTotalCredits","",T.target.value),placeholder:"e.g. 20",className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50"})]})]})]}),a.jsx("div",{className:"bg-surface/50 p-4 rounded-xl border border-border",children:j.target>0?a.jsxs(a.Fragment,{children:[a.jsx(ur,{label:t.totalProgress,current:j.total,total:j.target,color:"bg-primary",variant:"l"}),a.jsx("div",{className:"flex justify-end mt-1",children:a.jsxs("span",{className:"text-xs text-muted flex items-center gap-1",children:[a.jsx(ir,{size:12}),t.creditWarning]})})]}):a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("span",{className:"font-medium text-foreground text-lg mb-1",children:t.totalProgress}),a.jsxs("div",{className:"text-sm text-orange-500 font-medium flex items-center gap-2 bg-orange-500/10 p-2 rounded",children:[a.jsx("span",{className:"text-lg",children:"!"})," ",t.pleaseFillTotal]})]})}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"text-lg font-bold text-primary",children:t.prerequisites}),a.jsx("span",{className:"text-xs text-muted md:hidden lg:inline-block hidden",children:t.prerequisiteNotice})]}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:A.prerequisites.isWaived,onChange:T=>q("prerequisites","isWaived",T.target.checked),className:"w-4 h-4 rounded border-border text-primary focus:ring-primary"}),a.jsx("span",{className:"text-sm text-foreground",children:t.none})]})]}),a.jsx("div",{className:"text-xs text-muted md:hidden block -mt-2 mb-2",children:t.prerequisiteNotice}),!A.prerequisites.isWaived&&a.jsxs("div",{className:"space-y-2",children:[A.prerequisites.courses.map(T=>D("prerequisites",T)),A.prerequisites.courses.every(T=>T.completed&&!T.isAutoCreated)&&A.prerequisites.courses.length>1&&a.jsx("div",{className:"text-sm text-emerald-500 font-medium text-center py-2 bg-emerald-500/10 rounded-lg",children:t.allPrereqsDone})]}),A.prerequisites.isWaived&&a.jsx("div",{className:"text-sm text-muted italic",children:t.noPrereqs})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[a.jsx("h3",{className:"text-lg font-bold text-primary",children:t.designated}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-xs text-muted whitespace-nowrap",children:t.minCredits}),a.jsx("input",{type:"text",value:A.designatedRequired.minCredits,onChange:T=>/^\d*$/.test(T.target.value)&&q("designatedRequired","minCredits",T.target.value),className:"w-16 bg-background border border-border rounded px-2 py-1 text-sm text-center outline-none focus:ring-primary/50"})]})]}),a.jsx("div",{className:"pb-4 border-b border-border/50",children:Q.target>0?a.jsxs(a.Fragment,{children:[a.jsx(ur,{label:t.designated+" Progress",current:Q.completed,total:Q.target,color:"bg-inter",variant:"s"}),Q.completed>=Q.target&&a.jsx("div",{className:"text-center text-emerald-500 font-bold text-sm mt-1",children:t.sectionComplete})]}):a.jsxs("div",{className:"text-sm text-orange-500 font-medium flex items-center gap-2 bg-orange-500/10 p-2 rounded",children:[a.jsx("span",{className:"text-lg",children:"!"})," ",t.pleaseFill]})}),a.jsx("div",{className:"space-y-2 mt-4",children:A.designatedRequired.courses.map(T=>D("designatedRequired",T))})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[a.jsx("h3",{className:"text-lg font-bold text-primary",children:t.elective}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-xs text-muted whitespace-nowrap",children:t.minCredits}),a.jsx("input",{type:"text",value:A.electiveRequired.minCredits,onChange:T=>/^\d*$/.test(T.target.value)&&q("electiveRequired","minCredits",T.target.value),className:"w-16 bg-background border border-border rounded px-2 py-1 text-sm text-center outline-none focus:ring-primary/50"})]})]}),a.jsx("div",{className:"pb-4 border-b border-border/50",children:U.target>0?a.jsxs(a.Fragment,{children:[a.jsx(ur,{label:t.elective+" Progress",current:U.completed,total:U.target,color:"bg-primer",variant:"s"}),U.completed>=U.target&&a.jsx("div",{className:"text-center text-emerald-500 font-bold text-sm mt-1",children:t.sectionComplete})]}):a.jsxs("div",{className:"text-sm text-orange-500 font-medium flex items-center gap-2 bg-orange-500/10 p-2 rounded",children:[a.jsx("span",{className:"text-lg",children:"!"})," ",t.pleaseFill]})}),a.jsx("div",{className:"space-y-2 mt-4",children:A.electiveRequired.courses.map(T=>D("electiveRequired",T))})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-6",children:[a.jsx("h3",{className:"text-lg font-bold text-primary border-b border-border/50 pb-2",children:t.proofSection}),a.jsx("div",{className:"space-y-6 pl-2",children:a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6 space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:t.proofStatus}),a.jsxs("div",{className:"space-y-2 pl-2",children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[a.jsx("input",{type:"radio",name:"proof_status",checked:A.status==="planned"||A.status==="in_progress",onChange:()=>z("status","","in_progress"),className:"w-4 h-4 text-primary bg-background border-border focus:ring-primary"}),a.jsx("span",{className:`text-sm transition-colors ${A.status==="planned"||A.status==="in_progress"?"text-foreground":"text-muted group-hover:text-foreground"}`,children:t.notSubmitted})]}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[a.jsx("input",{type:"radio",name:"proof_status",checked:A.status==="pending",onChange:()=>z("status","","pending"),className:"w-4 h-4 text-orange-500 bg-background border-border focus:ring-orange-500"}),a.jsx("span",{className:`text-sm transition-colors ${A.status==="pending"?"text-orange-500 font-medium":"text-muted group-hover:text-foreground"}`,children:t.submitted})]}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[a.jsx("input",{type:"radio",name:"proof_status",checked:A.status==="completed",onChange:()=>z("status","","completed"),className:"w-4 h-4 text-emerald-500 bg-background border-border focus:ring-emerald-500"}),a.jsx("span",{className:`text-sm transition-colors ${A.status==="completed"?"text-emerald-500 font-medium":"text-muted group-hover:text-foreground"}`,children:t.approved})]})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:t.uploadOrLink}),a.jsxs("div",{className:"pl-4 space-y-3",children:[a.jsxs("span",{className:"text-sm text-foreground block",children:[" ",t.uploadType]}),a.jsxs("div",{className:"text-xs text-muted flex items-start gap-1.5 bg-surface/50 p-2 rounded border border-border/50",children:[a.jsx(ir,{size:14,className:"mt-0.5 flex-shrink-0"}),a.jsx("span",{children:t.safetyNotice})]}),M?a.jsxs("div",{className:"flex items-center gap-3 bg-primary/10 border border-primary/20 rounded-lg p-3 max-w-md",children:[a.jsx(os,{className:"text-primary flex-shrink-0",size:20}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-primary truncate",children:M.name}),a.jsx("div",{className:"text-xs text-muted flex gap-2",children:a.jsxs("span",{children:[(M.size/1024).toFixed(1)," KB"]})})]}),a.jsx("button",{onClick:()=>{const T=URL.createObjectURL(M);window.open(T,"_blank")},className:"p-1.5 hover:bg-white/20 rounded-md text-primary transition-colors",title:t.viewFile,children:a.jsx(Ir,{size:16})}),a.jsx("button",{onClick:K,className:"p-1.5 hover:bg-white/20 rounded-md text-primary hover:text-destructive transition-colors",title:"Remove",children:a.jsx(xt,{size:16})})]}):A.proofFileName?a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 bg-surface/50 border border-dashed border-border rounded-lg p-3 max-w-md",children:[a.jsxs("div",{className:"flex items-center gap-3 opacity-70 overflow-hidden",children:[a.jsx(os,{className:"text-muted flex-shrink-0",size:20}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:A.proofFileName}),a.jsx("p",{className:"text-xs text-muted truncate",children:t.storedOnOriginalDevice})]})]}),a.jsxs("label",{className:"cursor-pointer p-1.5 hover:bg-white/10 rounded-md text-primary transition-colors text-xs flex items-center gap-1 flex-shrink-0 self-start sm:self-auto border border-primary/20 bg-primary/5",children:[a.jsx(jr,{size:14})," ",t.reUpload,a.jsx("input",{type:"file",accept:"image/*,application/pdf",className:"hidden",onChange:V})]})]}):a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("label",{className:"cursor-pointer bg-surface hover:bg-surface/80 border border-border rounded-lg px-4 py-2 flex items-center gap-2 transition-all",children:[a.jsx(jr,{size:16,className:"text-muted"}),a.jsx("span",{className:"text-sm text-foreground",children:t.uploadFile}),a.jsx("input",{type:"file",accept:"image/*,application/pdf",className:"hidden",onChange:V})]})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:t.notes}),a.jsx("textarea",{value:A.notes||"",onChange:T=>z("notes","",T.target.value),className:"w-full bg-background border border-border rounded-lg p-3 text-sm focus:ring-2 focus:ring-primary/50 outline-none min-h-[80px]",placeholder:"..."})]})]})})]}),u&&a.jsx(VA,{onClose:()=>{d(!1),y(null),N(null)},onSelect:C})]})},p1=()=>Math.random().toString(36).substring(2,9)+Date.now().toString(36),Fp={department:"",minTotalCredits:"",targetYear:"",status:"in_progress",applicationNotes:{items:[{id:"pre-1",text:"",checked:!1},{id:"pre-2",text:" GPA / ",checked:!1},{id:"pre-3",text:"",checked:!1},{id:"auto-note",text:"",checked:!1,isAutoCreated:!0}]},designatedRequired:{minCredits:"",courses:[{id:"init-des",name:"",credits:"",completed:!1,isAutoCreated:!0}]},electiveRequired:{minCredits:"",courses:[{id:"init-ele",name:"",credits:"",completed:!1,isAutoCreated:!0}]},proofFileName:"",notes:""},Ip="nsysu-interdisciplinary-double-major-data",QO={en:{basicInfo:"Basic Info",doubleMajorDept:"Double Major Department",selectDept:"Select Department...",applicableYear:"Applicable Year",selectYear:"Select Year...",minTotalCredits:"Minimum Total Credits for Double Major",totalProgress:"Total Double Major Credits Progress",appNotes:"Application / Eligibility Notes",appNotesNotice:"Check requirements before applying.",checklist_1:"Completed at least one semester",checklist_2:"Met requirements (e.g. GPA / Ranking)",checklist_3:"Submitted application during official period",checkAll:"All Requirements Met!",typeToCheck:"Type to add note...",designated:"Double Major Required Courses",elective:"Double Major Elective Courses",minCredits:"Min Credits:",sectionComplete:"Section Complete!",courseName:"Course Name",typeToAdd:"Type to add course...",credit:"Credit",pleaseFill:'Please fill in "Min Credits" to track progress.',pleaseFillTotal:'Please fill in "Minimum Total Credits" to track progress.',officialRegulations:"NSYSU Double Major Regulations",status:"Double Major Status",statusPlanned:"Planned",statusInProgress:"In Progress",statusPending:"Pending Department Approval",statusCompleted:"Approved  Double Major",creditWarning:"Completion of credit requirements does not imply official approval; actual results are subject to NSYSU's official announcement",proofSection:"Approval / Proof (optional)",proofStatus:"Status:",notSubmitted:"Not Submitted",submitted:"Submitted",approved:"Approved",uploadOrLink:"Upload or Paste Link:",uploadType:"Approval Letter / System Screenshot",notes:"Notes (Optional)",viewFile:"View Attached File",uploadFile:"Upload File",safetyNotice:"Files are stored locally in your browser and are not uploaded to any server.",confirmRemove:"Are you sure you want to remove this file?",storedOnOriginalDevice:"Stored on original upload device",reUpload:"Re-upload"},zh:{basicInfo:"",doubleMajorDept:"",selectDept:"...",applicableYear:"",selectYear:"...",minTotalCredits:"",totalProgress:"",appNotes:" / ",appNotesNotice:"",checklist_1:"",checklist_2:" GPA / ",checklist_3:"",checkAll:"",typeToCheck:"...",designated:"",elective:"",minCredits:"",sectionComplete:"",courseName:"",typeToAdd:"...",credit:"",pleaseFill:"",pleaseFillTotal:"",officialRegulations:"",status:"",statusPlanned:"",statusInProgress:"",statusPending:"",statusCompleted:"",creditWarning:"",proofSection:"",proofStatus:"",notSubmitted:"",submitted:"",approved:"",uploadOrLink:"",uploadType:" / ",notes:"",viewFile:"",uploadFile:"",safetyNotice:"",confirmRemove:"",storedOnOriginalDevice:"",reUpload:""}},FO=({onStatusChange:r})=>{const{language:e}=At(),t=QO[e==="zh"?"zh":"en"],{semesters:s}=oa(),[A,l]=k.useState(()=>{const F=localStorage.getItem(Ip);if(F){const L=JSON.parse(F);return L.status||(L.status="in_progress"),L.prerequisites&&(delete L.prerequisites,L.applicationNotes=Fp.applicationNotes),L.applicationNotes||(L.applicationNotes=Fp.applicationNotes),L}return Fp}),[u,d]=k.useState(!1),[f,g]=k.useState(!1),[x,y]=k.useState(null),[v,N]=k.useState(null),[M,S]=k.useState(null);k.useEffect(()=>{na("double_major_5_proof").then(F=>{F&&S(F)})},[]);const V=async F=>{if(F.target.files&&F.target.files[0]){const L=F.target.files[0];await Tn("double_major_5_proof",L),S(L),z("proofFileName","",L.name)}},K=async()=>{window.confirm(t.confirmRemove)&&(await aa("double_major_5_proof"),S(null),z("proofFileName","",""))};k.useEffect(()=>{const F=localStorage.getItem(Ip),L=JSON.stringify(A);F!==L&&localStorage.setItem(Ip,L)},[A]);const G=s.map(F=>{if(F.length===4){const L=F.substring(0,3),te=F.substring(3);return te==="3"?`${L}-Summer`:`${L}-${te}`}return F}),z=(F,L,te)=>{l(Ae=>({...Ae,[F]:typeof Ae[F]=="object"?{...Ae[F],[L]:te}:te}))},q=(F,L,te)=>{l(Ae=>({...Ae,[F]:{...Ae[F],[L]:te}}))},$=(F,L,te,Ae)=>{l(P=>{const J=[...P[F].courses],le=J.findIndex(Ee=>Ee.id===L);if(le===-1)return P;const ge={...J[le],[te]:Ae};return ge.isAutoCreated&&te==="name"&&Ae.trim()!==""&&(ge.isAutoCreated=!1,J.push({id:p1(),name:"",credits:"",completed:!1,isAutoCreated:!0})),J[le]=ge,{...P,[F]:{...P[F],courses:J}}})},Y=(F,L,te)=>{l(Ae=>{const P=[...Ae.applicationNotes.items],J=P.findIndex(ge=>ge.id===F);if(J===-1)return Ae;const le={...P[J],[L]:te};return le.isAutoCreated&&L==="text"&&te.trim()!==""&&(le.isAutoCreated=!1,P.push({id:p1(),text:"",checked:!1,isAutoCreated:!0})),P[J]=le,{...Ae,applicationNotes:{items:P}}})},E=(F,L)=>{l(te=>({...te,[F]:{...te[F],courses:te[F].courses.filter(Ae=>Ae.id!==L)}}))},_=F=>{l(L=>({...L,applicationNotes:{items:L.applicationNotes.items.filter(te=>te.id!==F)}}))},C=F=>{const L=A[F].courses.filter(Ae=>Ae.completed&&!Ae.isAutoCreated).reduce((Ae,P)=>Ae+(parseFloat(P.credits)||0),0),te=parseFloat(A[F].minCredits)||0;return{completed:L,target:te}},D=()=>{const F=A.designatedRequired.courses.filter(P=>P.completed).reduce((P,J)=>P+(parseFloat(J.credits)||0),0),L=A.electiveRequired.courses.filter(P=>P.completed).reduce((P,J)=>P+(parseFloat(J.credits)||0),0),te=F+L,Ae=parseFloat(A.minTotalCredits)||0;return{total:te,target:Ae}};k.useEffect(()=>{if(!r)return;const F=D(),L=C("designatedRequired"),te=C("electiveRequired"),Ae=F.target>0&&F.total>=F.target,P=L.target>0&&L.completed>=L.target,J=te.target>0&&te.completed>=te.target,le=Ae&&P&&J&&A.status==="completed";r(le)},[A,r]);const j=F=>{x&&v&&($(x,v,"name",F.name),$(x,v,"credits",F.credit.toString()),d(!1),y(null),N(null))},Q=(F,L)=>a.jsxs("div",{className:`flex items-center gap-2 mb-2 ${L.completed?"opacity-50":""}`,children:[!L.isAutoCreated&&a.jsx("div",{onClick:()=>$(F,L.id,"completed",!L.completed),className:`w-5 h-5 rounded border flex items-center justify-center cursor-pointer flex-shrink-0 transition-colors ${L.completed?"bg-emerald-500 border-emerald-500 text-white":"border-border hover:border-primary"}`,children:L.completed&&a.jsx(vt,{size:14,strokeWidth:3})}),L.isAutoCreated&&a.jsx("div",{className:"w-5 h-5 flex-shrink-0"}),a.jsxs("div",{className:"relative flex-1",children:[a.jsx("input",{type:"text",value:L.name,placeholder:L.isAutoCreated?t.typeToAdd:t.courseName,onChange:te=>$(F,L.id,"name",te.target.value),className:`w-full bg-background border border-border rounded-lg px-3 py-1.5 text-sm outline-none focus:ring-2 focus:ring-primary/50 ${L.completed?"line-through text-muted":"text-foreground"}`}),!L.completed&&a.jsx("button",{onClick:()=>{y(F),N(L.id),d(!0)},className:"absolute right-2 top-1/2 -translate-y-1/2 text-muted hover:text-primary",title:"Import from Catalog",children:a.jsx(es,{size:14})})]}),a.jsx("input",{type:"text",value:L.credits,placeholder:t.credit,onChange:te=>{/^\d*\.?\d*$/.test(te.target.value)&&$(F,L.id,"credits",te.target.value)},className:`w-20 bg-background border border-border rounded-lg px-2 py-1.5 text-sm text-center outline-none focus:ring-2 focus:ring-primary/50 ${L.completed?"line-through text-muted":"text-foreground"}`}),L.isAutoCreated?a.jsx("div",{className:"w-[26px] flex-shrink-0"}):a.jsx("button",{onClick:()=>E(F,L.id),className:"text-muted hover:text-destructive p-1 w-[26px] flex justify-center flex-shrink-0",children:a.jsx(jn,{size:16})})]},L.id),U=F=>a.jsxs("div",{className:`flex items-center gap-2 mb-2 ${F.checked?"opacity-50":""}`,children:[!F.isAutoCreated&&a.jsx("div",{onClick:()=>Y(F.id,"checked",!F.checked),className:`w-5 h-5 rounded border flex items-center justify-center cursor-pointer flex-shrink-0 transition-colors ${F.checked?"bg-emerald-500 border-emerald-500 text-white":"border-border hover:border-primary"}`,children:F.checked&&a.jsx(vt,{size:14,strokeWidth:3})}),F.isAutoCreated&&a.jsx("div",{className:"w-5 h-5 flex-shrink-0"}),a.jsx("div",{className:"relative flex-1",children:["pre-1","pre-2","pre-3"].includes(F.id)?a.jsx("div",{className:`w-full px-3 py-1.5 text-sm ${F.checked?"line-through text-muted":"text-foreground"}`,children:F.id==="pre-1"?t.checklist_1:F.id==="pre-2"?t.checklist_2:t.checklist_3}):a.jsx("input",{type:"text",value:F.text,placeholder:F.isAutoCreated?t.typeToCheck:"Requirement note...",onChange:L=>Y(F.id,"text",L.target.value),className:`w-full bg-background border border-border rounded-lg px-3 py-1.5 text-sm outline-none focus:ring-2 focus:ring-primary/50 ${F.checked?"line-through text-muted":"text-foreground"}`})}),!F.isAutoCreated&&!["pre-1","pre-2","pre-3"].includes(F.id)?a.jsx("button",{onClick:()=>_(F.id),className:"text-muted hover:text-destructive p-1 w-[26px] flex justify-center flex-shrink-0",children:a.jsx(jn,{size:16})}):a.jsx("div",{className:"w-[26px] flex-shrink-0"})]},F.id),T=D(),W=C("designatedRequired"),H=C("electiveRequired");return a.jsxs("div",{className:"space-y-8 max-w-3xl mx-auto animate-in fade-in zoom-in-95 duration-300 pb-20",children:[a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary flex items-center gap-2",children:[a.jsx(rr,{size:20}),t.basicInfo]}),a.jsxs("a",{href:"https://oaa.nsysu.edu.tw/p/412-1003-3252.php?Lang=zh-tw",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 px-3 py-1.5 bg-primary/10 hover:bg-primary/20 text-primary text-xs font-medium rounded-lg transition-colors",children:[t.officialRegulations,a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),a.jsx("polyline",{points:"15 3 21 3 21 9"}),a.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"md:col-span-2 relative",children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:t.status}),a.jsxs("button",{onClick:()=>g(!f),className:`w-full flex items-center justify-between bg-background border rounded-lg px-3 py-2 text-sm outline-none transition-all ${f?"ring-2 ring-primary/50 border-primary":"border-border hover:border-primary/50"}`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${A.status==="planned"?"bg-warning shadow-[0_0_8px] shadow-warning/50":A.status==="in_progress"?"bg-primary shadow-[0_0_8px] shadow-primary/50":A.status==="pending"?"bg-orange-500 shadow-[0_0_8px] shadow-orange-500/50":"bg-success shadow-[0_0_8px] shadow-success/50"}`}),a.jsx("span",{className:"text-foreground",children:A.status==="planned"?t.statusPlanned:A.status==="in_progress"?t.statusInProgress:A.status==="pending"?t.statusPending:t.statusCompleted})]}),a.jsx(pu,{size:16,className:`text-muted transition-transform duration-200 ${f?"rotate-180":"rotate-0"}`})]}),f&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>g(!1)}),a.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-surface border border-border rounded-lg shadow-xl z-20 py-1 overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[{val:"planned",label:t.statusPlanned,color:"bg-warning",text:"text-warning"},{val:"in_progress",label:t.statusInProgress,color:"bg-primary",text:"text-primary"},{val:"pending",label:t.statusPending,color:"bg-orange-500",text:"text-orange-500"},{val:"completed",label:t.statusCompleted,color:"bg-success",text:"text-success"}].map(F=>a.jsxs("button",{onClick:()=>{z("status","",F.val),g(!1)},className:`w-full flex items-center gap-3 px-3 py-2.5 text-sm transition-colors ${A.status===F.val?"bg-primary/10":"hover:bg-white/5"}`,children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${F.color} ${A.status===F.val?"shadow-[0_0_6px] "+F.color:""}`}),a.jsx("span",{className:`${A.status===F.val?F.text+" font-medium":"text-foreground"}`,children:F.label}),A.status===F.val&&a.jsx(vt,{size:14,className:`ml-auto ${F.text}`})]},F.val))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:t.doubleMajorDept}),a.jsxs("select",{value:A.department,onChange:F=>z("department","",F.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50",children:[a.jsx("option",{value:"",children:t.selectDept}),uS.map(F=>a.jsx("option",{value:F,children:F},F))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:t.applicableYear}),a.jsxs("select",{value:A.targetYear,onChange:F=>z("targetYear","",F.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50",children:[a.jsx("option",{value:"",children:t.selectYear}),G.map(F=>a.jsx("option",{value:F,children:F},F))]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:t.minTotalCredits}),a.jsx("input",{type:"text",value:A.minTotalCredits,onChange:F=>/^\d*$/.test(F.target.value)&&z("minTotalCredits","",F.target.value),placeholder:"e.g. 40",className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50"})]})]})]}),a.jsx("div",{className:"bg-surface/50 p-4 rounded-xl border border-border",children:T.target>0?a.jsxs(a.Fragment,{children:[a.jsx(ur,{label:t.totalProgress,current:T.total,total:T.target,color:"bg-primary",variant:"l"}),a.jsx("div",{className:"flex justify-end mt-1",children:a.jsxs("span",{className:"text-xs text-muted flex items-center gap-1",children:[a.jsx(ir,{size:12}),t.creditWarning]})})]}):a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("span",{className:"font-medium text-foreground text-lg mb-1",children:t.totalProgress}),a.jsxs("div",{className:"text-sm text-orange-500 font-medium flex items-center gap-2 bg-orange-500/10 p-2 rounded",children:[a.jsx("span",{className:"text-lg",children:"!"})," ",t.pleaseFillTotal]})]})}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsx("div",{className:"flex justify-between items-center",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"text-lg font-bold text-primary",children:t.appNotes}),a.jsx("span",{className:"text-xs text-muted md:hidden lg:inline-block hidden",children:t.appNotesNotice})]})}),a.jsx("div",{className:"text-xs text-muted md:hidden block -mt-2 mb-2",children:t.appNotesNotice}),a.jsxs("div",{className:"space-y-2",children:[A.applicationNotes.items.map(F=>U(F)),A.applicationNotes.items.every(F=>F.checked&&!F.isAutoCreated)&&A.applicationNotes.items.length>1&&a.jsx("div",{className:"text-sm text-emerald-500 font-medium text-center py-2 bg-emerald-500/10 rounded-lg",children:t.checkAll})]})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[a.jsx("h3",{className:"text-lg font-bold text-primary",children:t.designated}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-xs text-muted whitespace-nowrap",children:t.minCredits}),a.jsx("input",{type:"text",value:A.designatedRequired.minCredits,onChange:F=>/^\d*$/.test(F.target.value)&&q("designatedRequired","minCredits",F.target.value),className:"w-16 bg-background border border-border rounded px-2 py-1 text-sm text-center outline-none focus:ring-primary/50"})]})]}),a.jsx("div",{className:"pb-4 border-b border-border/50",children:W.target>0?a.jsxs(a.Fragment,{children:[a.jsx(ur,{label:t.designated+" Progress",current:W.completed,total:W.target,color:"bg-inter",variant:"s"}),W.completed>=W.target&&a.jsx("div",{className:"text-center text-emerald-500 font-bold text-sm mt-1",children:t.sectionComplete})]}):a.jsxs("div",{className:"text-sm text-orange-500 font-medium flex items-center gap-2 bg-orange-500/10 p-2 rounded",children:[a.jsx("span",{className:"text-lg",children:"!"})," ",t.pleaseFill]})}),a.jsx("div",{className:"space-y-2 mt-4",children:A.designatedRequired.courses.map(F=>Q("designatedRequired",F))})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[a.jsx("h3",{className:"text-lg font-bold text-primary",children:t.elective}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-xs text-muted whitespace-nowrap",children:t.minCredits}),a.jsx("input",{type:"text",value:A.electiveRequired.minCredits,onChange:F=>/^\d*$/.test(F.target.value)&&q("electiveRequired","minCredits",F.target.value),className:"w-16 bg-background border border-border rounded px-2 py-1 text-sm text-center outline-none focus:ring-primary/50"})]})]}),a.jsx("div",{className:"pb-4 border-b border-border/50",children:H.target>0?a.jsxs(a.Fragment,{children:[a.jsx(ur,{label:t.elective+" Progress",current:H.completed,total:H.target,color:"bg-primer",variant:"s"}),H.completed>=H.target&&a.jsx("div",{className:"text-center text-emerald-500 font-bold text-sm mt-1",children:t.sectionComplete})]}):a.jsxs("div",{className:"text-sm text-orange-500 font-medium flex items-center gap-2 bg-orange-500/10 p-2 rounded",children:[a.jsx("span",{className:"text-lg",children:"!"})," ",t.pleaseFill]})}),a.jsx("div",{className:"space-y-2 mt-4",children:A.electiveRequired.courses.map(F=>Q("electiveRequired",F))})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-6",children:[a.jsx("h3",{className:"text-lg font-bold text-primary border-b border-border/50 pb-2",children:t.proofSection}),a.jsx("div",{className:"space-y-6 pl-2",children:a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6 space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:t.proofStatus}),a.jsxs("div",{className:"space-y-2 pl-2",children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[a.jsx("input",{type:"radio",name:"proof_status",checked:A.status==="planned"||A.status==="in_progress",onChange:()=>z("status","","in_progress"),className:"w-4 h-4 text-primary bg-background border-border focus:ring-primary"}),a.jsx("span",{className:`text-sm transition-colors ${A.status==="planned"||A.status==="in_progress"?"text-foreground":"text-muted group-hover:text-foreground"}`,children:t.notSubmitted})]}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[a.jsx("input",{type:"radio",name:"proof_status",checked:A.status==="pending",onChange:()=>z("status","","pending"),className:"w-4 h-4 text-orange-500 bg-background border-border focus:ring-orange-500"}),a.jsx("span",{className:`text-sm transition-colors ${A.status==="pending"?"text-orange-500 font-medium":"text-muted group-hover:text-foreground"}`,children:t.submitted})]}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[a.jsx("input",{type:"radio",name:"proof_status",checked:A.status==="completed",onChange:()=>z("status","","completed"),className:"w-4 h-4 text-emerald-500 bg-background border-border focus:ring-emerald-500"}),a.jsx("span",{className:`text-sm transition-colors ${A.status==="completed"?"text-emerald-500 font-medium":"text-muted group-hover:text-foreground"}`,children:t.approved})]})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:t.uploadOrLink}),a.jsxs("div",{className:"pl-4 space-y-3",children:[a.jsxs("span",{className:"text-sm text-foreground block",children:[" ",t.uploadType]}),a.jsxs("div",{className:"text-xs text-muted flex items-start gap-1.5 bg-surface/50 p-2 rounded border border-border/50",children:[a.jsx(ir,{size:14,className:"mt-0.5 flex-shrink-0"}),a.jsx("span",{children:t.safetyNotice})]}),M?a.jsxs("div",{className:"flex items-center gap-3 bg-primary/10 border border-primary/20 rounded-lg p-3 max-w-md",children:[a.jsx(os,{className:"text-primary flex-shrink-0",size:20}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-primary truncate",children:M.name}),a.jsx("div",{className:"text-xs text-muted flex gap-2",children:a.jsxs("span",{children:[(M.size/1024).toFixed(1)," KB"]})})]}),a.jsx("button",{onClick:()=>{const F=URL.createObjectURL(M);window.open(F,"_blank")},className:"p-1.5 hover:bg-white/20 rounded-md text-primary transition-colors",title:t.viewFile,children:a.jsx(Ir,{size:16})}),a.jsx("button",{onClick:K,className:"p-1.5 hover:bg-white/20 rounded-md text-primary hover:text-destructive transition-colors",title:"Remove",children:a.jsx(xt,{size:16})})]}):A.proofFileName?a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 bg-surface/50 border border-dashed border-border rounded-lg p-3 max-w-md",children:[a.jsxs("div",{className:"flex items-center gap-3 opacity-70 overflow-hidden",children:[a.jsx(os,{className:"text-muted flex-shrink-0",size:20}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:A.proofFileName}),a.jsx("p",{className:"text-xs text-muted truncate",children:t.storedOnOriginalDevice})]})]}),a.jsxs("label",{className:"cursor-pointer p-1.5 hover:bg-white/10 rounded-md text-primary transition-colors text-xs flex items-center gap-1 flex-shrink-0 self-start sm:self-auto border border-primary/20 bg-primary/5",children:[a.jsx(jr,{size:14})," ",t.reUpload,a.jsx("input",{type:"file",accept:"image/*,application/pdf",className:"hidden",onChange:V})]})]}):a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("label",{className:"cursor-pointer bg-surface hover:bg-surface/80 border border-border rounded-lg px-4 py-2 flex items-center gap-2 transition-all",children:[a.jsx(jr,{size:16,className:"text-muted"}),a.jsx("span",{className:"text-sm text-foreground",children:t.uploadFile}),a.jsx("input",{type:"file",accept:"image/*,application/pdf",className:"hidden",onChange:V})]})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:t.notes}),a.jsx("textarea",{value:A.notes||"",onChange:F=>z("notes","",F.target.value),className:"w-full bg-background border border-border rounded-lg p-3 text-sm focus:ring-2 focus:ring-primary/50 outline-none min-h-[80px]",placeholder:"..."})]})]})})]}),u&&a.jsx(VA,{onClose:()=>{d(!1),y(null),N(null)},onSelect:j})]})},IO=()=>Math.random().toString(36).substring(2,9)+Date.now().toString(36),yh={department:"",minTotalCredits:"26",targetYear:"",status:"in_progress",designatedRequired:{minCredits:"",courses:[{id:"init-des",name:"",credits:"",completed:!1,isAutoCreated:!0}]},electiveRequired:{minCredits:"",courses:[{id:"init-ele",name:"",credits:"",completed:!1,isAutoCreated:!0}]},practicum:{teachingInternship:"not_started",educationalPracticum:"not_started",qualificationReview:!1,note:""},proofFileName:"",notes:""},Dp="nsysu-interdisciplinary-teacher-education-data",DO={en:{basicInfo:"Basic Info",doubleMajorDept:"Teacher Education Program",selectDept:"Select Department...",applicableYear:"Applicable Year",selectYear:"Select Year...",minTotalCredits:"Educational Professional Course Credit Requirements",totalProgress:"Teacher Education Progress",step1:"Coursework Completed",stepApply:"Eligible for Practicum Application",step2:"Qualified for Practicum",step3:"Practicum Completed",step4:"Teacher Qualification Certified (Optional)",designated:"Teacher Education Required Courses",elective:"Teacher Education Elective Courses",minCredits:"Min Credits:",sectionComplete:"Section Complete!",courseName:"Course Name",typeToAdd:"Type to add course...",credit:"Credit",earnedCredits:"Earned Educational Professional Credits",threshold:"Threshold",pleaseFill:'Please fill in "Min Credits" to track progress.',pleaseFillTotal:'Please fill in "Minimum Total Credits" to track progress.',officialRegulations:"Teacher Education Regulations",status:"Teacher Education Status",statusPlanned:"Planned",statusInProgress:"In Progress",statusPending:"Qualified for Educational Practicum",statusCompleted:"Teacher Qualification Obtained",creditWarning:"This system is for personal tracking only; official teacher qualification is subject to approval by the Teacher Education Center and the Ministry of Education.",creditPrerequisiteNotice:"Educational Professional Course credits are one of the prerequisites for qualifying for educational practicum",practicumTitle:"Practicum & Teaching Internship",teachingInternship:"Teaching Internship (In-course Practice)",educationalPracticum:"Educational Practicum (External School Teaching)",practicumNotice:"Educational practicum is a prerequisite for obtaining teacher qualification.",teachingInternshipNotice:"Teaching Internship is a professional educational course; upon completion, you may apply for the educational practicum qualification review.",qualificationReviewLabel:"Passed Educational Practicum Qualification Review (Certified by Teacher Education Center)",educationalPracticumNotice:"Educational practicum is a prerequisite for obtaining teacher qualification.",pStatus_not_started:"Not started",pStatus_in_progress:"In progress",pStatus_completed:"Completed",practicumNotePlaceholder:"Practicum School (Optional), Semester (Optional)",proofSection:"Approval & Certification",proofStatus:"Status:",notSubmitted:"Not Qualified",submitted:"Qualified for Educational Practicum",approved:"Teacher Qualification Obtained",uploadOrLink:"Upload or Paste Link:",uploadType:"Approval Letter / System Screenshot",notes:"Notes (Optional)",viewFile:"View Attached File",uploadFile:"Upload File",safetyNotice:"Files are stored locally in your browser and are not uploaded to any server.",confirmRemove:"Are you sure you want to remove this file?",storedOnOriginalDevice:"Stored on original upload device",reUpload:"Re-upload"},zh:{basicInfo:"",doubleMajorDept:"",selectDept:"...",applicableYear:"",selectYear:"...",minTotalCredits:"",totalProgress:"",step1:"",stepApply:"",step2:"",step3:"",step4:`
`,designated:"",elective:"",earnedCredits:"",threshold:"",minCredits:"",sectionComplete:"",courseName:"",typeToAdd:"...",credit:"",pleaseFill:"",pleaseFillTotal:"",officialRegulations:"",status:"",statusPlanned:"",statusInProgress:"",statusPending:"",statusCompleted:"",creditWarning:"",creditPrerequisiteNotice:"",practicumTitle:" / ",teachingInternship:"",educationalPracticum:"",practicumNotice:"",teachingInternshipNotice:"",qualificationReviewLabel:"",educationalPracticumNotice:"",pStatus_not_started:"",pStatus_in_progress:"",pStatus_completed:"",practicumNotePlaceholder:"",proofSection:"",proofStatus:"",notSubmitted:"",submitted:"",approved:"",uploadOrLink:"",uploadType:" / ",notes:"",viewFile:"",uploadFile:"",safetyNotice:"",confirmRemove:"",storedOnOriginalDevice:"",reUpload:""}},kO=({onStatusChange:r})=>{const{language:e}=At(),t=DO[e==="zh"?"zh":"en"],{semesters:s}=oa(),[A,l]=k.useState(()=>{const T=localStorage.getItem(Dp);if(T){const W=JSON.parse(T);return W.status||(W.status="in_progress"),W.department||(W.department=yh.department),W.minTotalCredits||(W.minTotalCredits=yh.minTotalCredits),W.applicationNotes&&delete W.applicationNotes,W.practicum||(W.practicum=yh.practicum),W}return yh}),[u,d]=k.useState(!1),[f,g]=k.useState(!1),[x,y]=k.useState(null),[v,N]=k.useState(null),[M,S]=k.useState(null);k.useEffect(()=>{na("teacher_education_6_proof").then(T=>{T&&S(T)})},[]);const V=async T=>{if(T.target.files&&T.target.files[0]){const W=T.target.files[0];await Tn("teacher_education_6_proof",W),S(W),z("proofFileName","",W.name)}},K=async()=>{window.confirm(t.confirmRemove)&&(await aa("teacher_education_6_proof"),S(null),z("proofFileName","",""))};k.useEffect(()=>{const T=localStorage.getItem(Dp),W=JSON.stringify(A);T!==W&&localStorage.setItem(Dp,W)},[A]);const G=s.map(T=>{if(T.length===4){const W=T.substring(0,3),H=T.substring(3);return H==="3"?`${W}-Summer`:`${W}-${H}`}return T}),z=(T,W,H)=>{l(F=>({...F,[T]:typeof F[T]=="object"?{...F[T],[W]:H}:H}))},q=(T,W,H)=>{l(F=>({...F,[T]:{...F[T],[W]:H}}))},$=(T,W,H,F)=>{l(L=>{const te=[...L[T].courses],Ae=te.findIndex(J=>J.id===W);if(Ae===-1)return L;const P={...te[Ae],[H]:F};return P.isAutoCreated&&H==="name"&&F.trim()!==""&&(P.isAutoCreated=!1,te.push({id:IO(),name:"",credits:"",completed:!1,isAutoCreated:!0})),te[Ae]=P,{...L,[T]:{...L[T],courses:te}}})},Y=(T,W)=>{l(H=>({...H,[T]:{...H[T],courses:H[T].courses.filter(F=>F.id!==W)}}))},E=T=>{const W=A[T].courses.filter(F=>F.completed&&!F.isAutoCreated).reduce((F,L)=>F+(parseFloat(L.credits)||0),0),H=parseFloat(A[T].minCredits)||0;return{completed:W,target:H}},_=()=>{const T=A.designatedRequired.courses.filter(L=>L.completed).reduce((L,te)=>L+(parseFloat(te.credits)||0),0),W=A.electiveRequired.courses.filter(L=>L.completed).reduce((L,te)=>L+(parseFloat(te.credits)||0),0),H=T+W,F=parseFloat(A.minTotalCredits)||0;return{total:H,target:F}};k.useEffect(()=>{if(!r)return;const T=_(),W=E("designatedRequired"),H=E("electiveRequired"),F=T.target>0&&T.total>=T.target,L=W.target>0&&W.completed>=W.target,te=H.target>0&&H.completed>=H.target,Ae=F&&L&&te&&(A.practicum.educationalPracticum==="completed"||A.status==="certified");r(Ae)},[A,r]);const C=T=>{x&&v&&($(x,v,"name",T.name),$(x,v,"credits",T.credit.toString()),d(!1),y(null),N(null))},D=(T,W)=>a.jsxs("div",{className:`flex items-center gap-2 mb-2 ${W.completed?"opacity-50":""}`,children:[!W.isAutoCreated&&a.jsx("div",{onClick:()=>$(T,W.id,"completed",!W.completed),className:`w-5 h-5 rounded border flex items-center justify-center cursor-pointer flex-shrink-0 transition-colors ${W.completed?"bg-emerald-500 border-emerald-500 text-white":"border-border hover:border-primary"}`,children:W.completed&&a.jsx(vt,{size:14,strokeWidth:3})}),W.isAutoCreated&&a.jsx("div",{className:"w-5 h-5 flex-shrink-0"}),a.jsxs("div",{className:"relative flex-1",children:[a.jsx("input",{type:"text",value:W.name,placeholder:W.isAutoCreated?t.typeToAdd:t.courseName,onChange:H=>$(T,W.id,"name",H.target.value),className:`w-full bg-background border border-border rounded-lg px-3 py-1.5 text-sm outline-none focus:ring-2 focus:ring-primary/50 ${W.completed?"line-through text-muted":"text-foreground"}`}),!W.completed&&a.jsx("button",{onClick:()=>{y(T),N(W.id),d(!0)},className:"absolute right-2 top-1/2 -translate-y-1/2 text-muted hover:text-primary",title:"Import from Catalog",children:a.jsx(es,{size:14})})]}),a.jsx("input",{type:"text",value:W.credits,placeholder:t.credit,onChange:H=>{/^\d*\.?\d*$/.test(H.target.value)&&$(T,W.id,"credits",H.target.value)},className:`w-20 bg-background border border-border rounded-lg px-2 py-1.5 text-sm text-center outline-none focus:ring-2 focus:ring-primary/50 ${W.completed?"line-through text-muted":"text-foreground"}`}),W.isAutoCreated?a.jsx("div",{className:"w-[26px] flex-shrink-0"}):a.jsx("button",{onClick:()=>Y(T,W.id),className:"text-muted hover:text-destructive p-1 w-[26px] flex justify-center flex-shrink-0",children:a.jsx(jn,{size:16})})]},W.id),j=_(),Q=E("designatedRequired"),U=E("electiveRequired");return k.useEffect(()=>{const W=j.target>0&&j.total>=j.target&&(Q.target>0?Q.completed>=Q.target:!0)&&(U.target>0?U.completed>=U.target:!0)&&A.practicum.teachingInternship==="completed";let H=!1,F={...A};!W&&F.practicum.qualificationReview&&(F.practicum={...F.practicum,qualificationReview:!1},H=!0),!F.practicum.qualificationReview&&F.practicum.educationalPracticum!=="not_started"&&(F.practicum={...F.practicum,educationalPracticum:"not_started"},H=!0),F.practicum.qualificationReview?(F.practicum.educationalPracticum,F.status!=="practicum"&&F.status!=="certified"&&(F.status="practicum",H=!0)):(F.status==="practicum"||F.status==="certified")&&(F.status="in_progress",H=!0),H&&l(F)},[j.target,j.total,Q.target,Q.completed,U.target,U.completed,A.practicum.teachingInternship,A.practicum.qualificationReview,A.practicum.educationalPracticum,A.status]),a.jsxs("div",{className:"space-y-8 max-w-3xl mx-auto animate-in fade-in zoom-in-95 duration-300 pb-20",children:[a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsx("div",{className:"flex justify-between items-center",children:a.jsxs("h3",{className:"text-lg font-bold text-primary flex items-center gap-2",children:[a.jsx(rr,{size:20}),t.basicInfo]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"md:col-span-2 relative",children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:t.status}),a.jsxs("button",{onClick:()=>g(!f),className:`w-full flex items-center justify-between bg-background border rounded-lg px-3 py-2 text-sm outline-none transition-all ${f?"ring-2 ring-primary/50 border-primary":"border-border hover:border-primary/50"}`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${A.status==="planned"?"bg-warning shadow-[0_0_8px] shadow-warning/50":A.status==="in_progress"?"bg-primary shadow-[0_0_8px] shadow-primary/50":A.status==="practicum"?"bg-orange-500 shadow-[0_0_8px] shadow-orange-500/50":"bg-success shadow-[0_0_8px] shadow-success/50"}`}),a.jsx("span",{className:"text-foreground",children:A.status==="planned"?t.statusPlanned:A.status==="in_progress"?t.statusInProgress:A.status==="practicum"?t.statusPending:t.statusCompleted})]}),a.jsx(pu,{size:16,className:`text-muted transition-transform duration-200 ${f?"rotate-180":"rotate-0"}`})]}),f&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>g(!1)}),a.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-surface border border-border rounded-lg shadow-xl z-20 py-1 overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[{val:"planned",label:t.statusPlanned,color:"bg-warning",text:"text-warning"},{val:"in_progress",label:t.statusInProgress,color:"bg-primary",text:"text-primary"},{val:"pending",label:t.statusPending,color:"bg-orange-500",text:"text-orange-500"},{val:"certified",label:t.statusCompleted,color:"bg-success",text:"text-success"}].map(T=>{const W=T.val==="pending"||T.val==="certified";return a.jsxs("button",{disabled:W,onClick:()=>{if(W)return;z("status","",{planned:"planned",in_progress:"in_progress",pending:"practicum",certified:"certified"}[T.val]),g(!1)},className:`w-full flex items-center gap-3 px-3 py-2.5 text-sm transition-colors ${W?"opacity-50 cursor-not-allowed bg-surface/50":T.val==="pending"&&A.status==="practicum"||T.val==="certified"&&A.status==="certified"||A.status===T.val?"bg-primary/10":"hover:bg-white/5"}`,children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${T.color} ${!W&&A.status===T.val?"shadow-[0_0_6px] "+T.color:""}`}),a.jsx("span",{className:`${!W&&A.status===T.val?T.text+" font-medium":"text-foreground"}`,children:T.label}),W&&a.jsx("div",{className:"ml-auto text-muted",children:a.jsx(ir,{size:14})}),!W&&(T.val==="pending"&&A.status==="practicum"||T.val==="certified"&&A.status==="certified"||A.status===T.val)&&a.jsx(vt,{size:14,className:`ml-auto ${T.text}`})]},T.val)})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:t.doubleMajorDept}),a.jsx("input",{type:"text",value:A.department,onChange:T=>z("department","",T.target.value),placeholder:e==="zh"?"":"Center for Teacher Education",className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:t.applicableYear}),a.jsxs("select",{value:A.targetYear,onChange:T=>z("targetYear","",T.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50",children:[a.jsx("option",{value:"",children:t.selectYear}),G.map(T=>a.jsx("option",{value:T,children:T},T))]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:t.minTotalCredits}),a.jsx("input",{type:"text",value:A.minTotalCredits,onChange:T=>/^\d*$/.test(T.target.value)&&z("minTotalCredits","",T.target.value),placeholder:"e.g. 40",className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50"})]})]})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border",children:[a.jsx("h3",{className:"text-lg font-bold text-primary mb-6",children:t.totalProgress}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute top-4 left-0 h-1 bg-border rounded-l-full -z-0",style:{width:"70%"}}),a.jsx("div",{className:"absolute top-4 left-[70%] h-1 border-t-4 border-dotted border-border -z-0",style:{width:"20%"}}),a.jsx("div",{className:"absolute top-4 left-0 h-1 bg-emerald-500 rounded-full z-0 transition-all duration-500 ease-out",style:{width:(()=>{if(!(j.target>0&&j.total>=j.target&&(Q.target>0?Q.completed>=Q.target:!0)&&(U.target>0?U.completed>=U.target:!0))){const W=j.target>0?j.total/j.target:0;return`${Math.min(1,W)*10}%`}return A.practicum.teachingInternship!=="completed"?A.practicum.teachingInternship==="in_progress"?"20%":"10%":A.practicum.qualificationReview?A.practicum.educationalPracticum!=="completed"?A.practicum.educationalPracticum==="in_progress"?"60%":"50%":A.status!=="certified"?"70%":"90%":"30%"})(),maxWidth:"100%"}}),a.jsx("div",{className:"flex justify-between relative z-10",children:[{id:1,label:t.step1,isCompleted:j.target>0&&j.total>=j.target&&(Q.target>0?Q.completed>=Q.target:!0)&&(U.target>0?U.completed>=U.target:!0)},{id:1.5,label:t.stepApply,isCompleted:j.target>0&&j.total>=j.target&&(Q.target>0?Q.completed>=Q.target:!0)&&(U.target>0?U.completed>=U.target:!0)&&A.practicum.teachingInternship==="completed"},{id:2,label:t.step2,isCompleted:A.practicum.qualificationReview},{id:3,label:t.step3,isCompleted:A.practicum.educationalPracticum==="completed"},{id:4,label:t.step4,isCompleted:A.status==="certified"}].map(T=>a.jsxs("div",{className:"flex flex-col items-center flex-1",children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 transition-all duration-300 bg-background ${T.isCompleted?"border-emerald-500 text-emerald-500 shadow-[0_0_10px_rgba(16,185,129,0.3)]":"border-border text-muted"}`,children:a.jsx(vt,{size:16,strokeWidth:3})}),a.jsx("div",{className:`text-xs text-center mt-2 px-1 transition-colors duration-300 whitespace-pre-line ${T.isCompleted?"text-emerald-500 font-medium":"text-muted"}`,children:T.label})]},T.id))})]}),j.target<=0&&a.jsxs("div",{className:"mt-6 text-sm text-orange-500 font-medium flex items-center gap-2 bg-orange-500/10 p-2 rounded",children:[a.jsx("span",{className:"text-lg",children:"!"})," ",t.pleaseFillTotal]}),j.target>0&&a.jsx("div",{className:"mt-6 pt-4 border-t border-border/50 flex justify-between items-center text-sm",children:a.jsxs("span",{className:"flex items-center flex-wrap gap-2",children:[a.jsxs("span",{className:"text-foreground",children:[t.earnedCredits,"",j.total,"",t.threshold," ",j.target,""]}),a.jsxs("span",{className:"flex items-center text-xs text-muted",children:[a.jsx(y5,{size:14,className:"mr-1"}),t.creditPrerequisiteNotice]})]})})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[a.jsx("h3",{className:"text-lg font-bold text-primary",children:t.designated}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-xs text-muted whitespace-nowrap",children:t.minCredits}),a.jsx("input",{type:"text",value:A.designatedRequired.minCredits,onChange:T=>/^\d*$/.test(T.target.value)&&q("designatedRequired","minCredits",T.target.value),className:"w-16 bg-background border border-border rounded px-2 py-1 text-sm text-center outline-none focus:ring-primary/50"})]})]}),a.jsx("div",{className:"pb-4 border-b border-border/50",children:Q.target>0?a.jsxs(a.Fragment,{children:[a.jsx(ur,{label:t.designated+" Progress",current:Q.completed,total:Q.target,color:"bg-inter",variant:"s"}),Q.completed>=Q.target&&a.jsx("div",{className:"text-center text-emerald-500 font-bold text-sm mt-1",children:t.sectionComplete})]}):a.jsxs("div",{className:"text-sm text-orange-500 font-medium flex items-center gap-2 bg-orange-500/10 p-2 rounded",children:[a.jsx("span",{className:"text-lg",children:"!"})," ",t.pleaseFill]})}),a.jsx("div",{className:"space-y-2 mt-4",children:A.designatedRequired.courses.map(T=>D("designatedRequired",T))})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[a.jsx("h3",{className:"text-lg font-bold text-primary",children:t.elective}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-xs text-muted whitespace-nowrap",children:t.minCredits}),a.jsx("input",{type:"text",value:A.electiveRequired.minCredits,onChange:T=>/^\d*$/.test(T.target.value)&&q("electiveRequired","minCredits",T.target.value),className:"w-16 bg-background border border-border rounded px-2 py-1 text-sm text-center outline-none focus:ring-primary/50"})]})]}),a.jsx("div",{className:"pb-4 border-b border-border/50",children:U.target>0?a.jsxs(a.Fragment,{children:[a.jsx(ur,{label:t.elective+" Progress",current:U.completed,total:U.target,color:"bg-primer",variant:"s"}),U.completed>=U.target&&a.jsx("div",{className:"text-center text-emerald-500 font-bold text-sm mt-1",children:t.sectionComplete})]}):a.jsxs("div",{className:"text-sm text-orange-500 font-medium flex items-center gap-2 bg-orange-500/10 p-2 rounded",children:[a.jsx("span",{className:"text-lg",children:"!"})," ",t.pleaseFill]})}),a.jsx("div",{className:"space-y-2 mt-4",children:A.electiveRequired.courses.map(T=>D("electiveRequired",T))})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsx("div",{className:"flex justify-between items-center",children:a.jsx("h3",{className:"text-lg font-bold text-primary",children:t.practicumTitle})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"p-3 bg-background/50 rounded-lg border border-border/50 space-y-2",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2",children:[a.jsx("span",{className:"text-sm font-medium text-foreground",children:t.teachingInternship}),a.jsx("div",{className:"flex items-center gap-1",children:["not_started","in_progress","completed"].map(T=>a.jsx("button",{onClick:()=>q("practicum","teachingInternship",T),className:`px-3 py-1.5 rounded-md text-xs transition-all border ${A.practicum.teachingInternship===T?T==="completed"?"bg-success/20 text-success border-success/50 font-bold":T==="in_progress"?"bg-primary/20 text-primary border-primary/50 font-bold":"bg-muted/20 text-muted-foreground border-border font-bold":"border-transparent text-muted hover:bg-surface"}`,children:T==="not_started"?t.pStatus_not_started:T==="in_progress"?t.pStatus_in_progress:t.pStatus_completed},T))})]}),a.jsxs("div",{className:"w-full text-xs text-muted flex items-center gap-1",children:["- ",t.teachingInternshipNotice]})]}),(()=>{const W=j.target>0&&j.total>=j.target&&(Q.target>0?Q.completed>=Q.target:!0)&&(U.target>0?U.completed>=U.target:!0)&&A.practicum.teachingInternship==="completed";return a.jsx("div",{className:`p-3 bg-background/50 rounded-lg border border-border/50 ${W?"":"opacity-50"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("label",{className:`flex items-center gap-3 group ${W?"cursor-pointer":"cursor-not-allowed"}`,children:[a.jsx("div",{className:`w-5 h-5 rounded border flex items-center justify-center transition-colors ${A.practicum.qualificationReview?"bg-emerald-500 border-emerald-500 text-white":"border-muted "+(W?"group-hover:border-primary":"")}`,children:A.practicum.qualificationReview&&a.jsx(vt,{size:14,strokeWidth:3})}),a.jsx("input",{type:"checkbox",className:"hidden",disabled:!W,checked:!!A.practicum.qualificationReview,onChange:H=>{const F=H.target.checked;q("practicum","qualificationReview",F),F&&z("status","","practicum")}}),a.jsx("span",{className:"text-sm transition-colors text-foreground",children:t.qualificationReviewLabel})]}),!W&&a.jsx(Ss,{size:14,className:"text-muted-foreground ml-2"})]})})})(),a.jsxs("div",{className:`p-3 bg-background/50 rounded-lg border border-border/50 space-y-2 ${A.practicum.qualificationReview?"":"opacity-50"}`,children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-medium text-foreground",children:t.educationalPracticum}),!A.practicum.qualificationReview&&a.jsx(Ss,{size:12,className:"text-muted-foreground"})]}),a.jsx("div",{className:"flex items-center gap-1",children:["not_started","in_progress","completed"].map(T=>a.jsx("button",{disabled:!A.practicum.qualificationReview,onClick:()=>q("practicum","educationalPracticum",T),className:`px-3 py-1.5 rounded-md text-xs transition-all border ${A.practicum.educationalPracticum===T?T==="completed"?"bg-success/20 text-success border-success/50 font-bold":T==="in_progress"?"bg-primary/20 text-primary border-primary/50 font-bold":"bg-muted/20 text-muted-foreground border-border font-bold":"border-transparent text-muted "+(A.practicum.qualificationReview?"hover:bg-surface":"cursor-not-allowed")}`,children:T==="not_started"?t.pStatus_not_started:T==="in_progress"?t.pStatus_in_progress:t.pStatus_completed},T))})]}),a.jsxs("div",{className:"w-full text-xs text-muted flex items-center gap-1",children:["- ",t.educationalPracticumNotice]})]}),a.jsx("div",{children:a.jsx("input",{type:"text",value:A.practicum.note||"",onChange:T=>q("practicum","note",T.target.value),placeholder:t.practicumNotePlaceholder,className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-primary/50"})})]})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-6",children:[a.jsx("h3",{className:"text-lg font-bold text-primary border-b border-border/50 pb-2",children:t.proofSection}),a.jsx("div",{className:"space-y-6 pl-2",children:a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6 space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:t.proofStatus}),a.jsxs("div",{className:"space-y-2 pl-2",children:[(()=>{const T=!A.practicum.qualificationReview;return a.jsxs("label",{className:`flex items-center gap-2 group ${T?"cursor-not-allowed opacity-50":"cursor-pointer"}`,children:[a.jsx("input",{type:"radio",name:"proof_status",disabled:T,checked:A.status==="practicum",onChange:()=>z("status","","practicum"),className:"w-4 h-4 text-orange-500 bg-background border-border focus:ring-orange-500"}),a.jsx("span",{className:`text-sm transition-colors ${A.status==="practicum"?"text-orange-500 font-medium":"text-muted "+(T?"":"group-hover:text-foreground")}`,children:t.submitted}),T&&a.jsx(Ss,{size:12,className:"text-muted-foreground ml-2"})]})})(),(()=>{const T=A.practicum.educationalPracticum!=="completed";return a.jsxs("label",{className:`flex items-center gap-2 group ${T?"cursor-not-allowed opacity-50":"cursor-pointer"}`,children:[a.jsx("input",{type:"radio",name:"proof_status",disabled:T,checked:A.status==="certified",onChange:()=>z("status","","certified"),className:"w-4 h-4 text-emerald-500 bg-background border-border focus:ring-emerald-500"}),a.jsx("span",{className:`text-sm transition-colors ${A.status==="certified"?"text-emerald-500 font-bold":"text-muted "+(T?"":"group-hover:text-foreground")}`,children:t.approved}),T&&a.jsx(Ss,{size:12,className:"text-muted-foreground ml-2"})]})})()]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:t.uploadOrLink}),M?a.jsxs("div",{className:"flex items-center gap-3 bg-primary/10 border border-primary/20 rounded-lg p-3 max-w-md",children:[a.jsx(os,{className:"text-primary flex-shrink-0",size:20}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-primary truncate",children:M.name}),a.jsx("div",{className:"text-xs text-muted flex gap-2",children:a.jsxs("span",{children:[(M.size/1024).toFixed(1)," KB"]})})]}),a.jsx("button",{onClick:()=>{const T=URL.createObjectURL(M);window.open(T,"_blank")},className:"p-1.5 hover:bg-white/20 rounded-md text-primary transition-colors",title:t.viewFile,children:a.jsx(Ir,{size:16})}),a.jsx("button",{onClick:K,className:"p-1.5 hover:bg-white/20 rounded-md text-primary hover:text-destructive transition-colors",title:"Remove",children:a.jsx(xt,{size:16})})]}):A.proofFileName?a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 bg-surface/50 border border-dashed border-border rounded-lg p-3 max-w-md",children:[a.jsxs("div",{className:"flex items-center gap-3 opacity-70 overflow-hidden",children:[a.jsx(os,{className:"text-muted flex-shrink-0",size:20}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:A.proofFileName}),a.jsx("p",{className:"text-xs text-muted truncate",children:t.storedOnOriginalDevice})]})]}),a.jsxs("label",{className:"cursor-pointer p-1.5 hover:bg-white/10 rounded-md text-primary transition-colors text-xs flex items-center gap-1 flex-shrink-0 self-start sm:self-auto border border-primary/20 bg-primary/5",children:[a.jsx(jr,{size:14})," ",t.reUpload,a.jsx("input",{type:"file",accept:"image/*,application/pdf",className:"hidden",onChange:V})]})]}):a.jsx("div",{className:"flex items-center gap-3",children:a.jsxs("label",{className:"flex items-center justify-center px-4 py-2 bg-primary/10 hover:bg-primary/20 text-primary rounded-lg cursor-pointer transition-colors border border-primary/20",children:[a.jsx(jr,{size:18,className:"mr-2"}),a.jsx("span",{className:"text-sm font-medium",children:t.uploadType}),a.jsx("input",{type:"file",accept:"image/*,application/pdf",className:"hidden",onChange:V})]})}),a.jsxs("div",{className:"mt-4 text-[10px] text-muted flex items-center gap-1",children:[a.jsx(ir,{size:10}),t.safetyNotice]})]}),a.jsx("div",{children:a.jsx("textarea",{value:A.notes,onChange:T=>z("notes","",T.target.value),placeholder:t.notes,className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-primary/50 min-h-[80px]"})})]})})]}),u&&a.jsx(VA,{onClose:()=>d(!1),onSelect:C})]})},RO=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","()","","","","","","","","","",""," Practical English Cross-Disciplinary Program (Program Taught in English)","","IC","IC","","","","","Human Rights Studies Program(Program Taught in English)","","","","()","","AI","AI","AI","AI","",""],MO=["","","",""," EMI General Education Honors Program"],LO=["","","()","  ()","","","","","","","","","","","","()","()","","","","","","","","","","","","","","","","","","","","","",""," Micro-Program of Taiwanese Culture in English(Program Taught in English)","","","","","","","STREAM ","","",""," English Micro-module: Science, Technology and the Environment (Program Taught in English)","","","","","","","","","","","","","","","","","","AI()","","","",""],HO=({candidate:r,onConfirm:e,onCancel:t,T:s})=>(k.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),Wt.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-md shadow-2xl p-6 flex flex-col gap-4 animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[a.jsx("div",{className:"mx-auto w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center text-primary mb-2",children:a.jsx(vt,{size:24,strokeWidth:3})}),a.jsx("h3",{className:"text-xl font-bold",children:s.perfectMatchFound}),a.jsx("p",{className:"text-muted text-sm",children:s.matchConfirmText})]}),a.jsxs("div",{className:"bg-surface/50 p-4 rounded-lg flex flex-col gap-2 border border-border",children:[a.jsx("div",{className:"font-bold text-center text-lg",children:r.match.name}),a.jsxs("div",{className:"flex justify-center gap-4 text-xs text-muted",children:[a.jsxs("span",{children:[r.match.credits," cr"]}),a.jsx("span",{children:""}),a.jsx("span",{children:r.match.teacher})]}),a.jsx("div",{className:"text-center text-xs text-muted/80",children:r.match.department})]}),a.jsxs("div",{className:"flex gap-3 mt-2",children:[a.jsx("button",{onClick:t,className:"flex-1 py-2.5 px-4 rounded-lg border border-border hover:bg-surface font-medium transition-colors",children:"Cancel"}),a.jsx("button",{onClick:e,className:"flex-1 py-2.5 px-4 rounded-lg bg-primary hover:bg-primary/90 text-white font-bold transition-colors shadow-lg shadow-primary/20",children:"Confirm Sync"})]})]})}),document.body)),OO=({isOpen:r,onClose:e,courses:t,onAdd:s,searchQuery:A,setSearchQuery:l,T:u})=>{if(!r)return null;const d=t.filter(f=>f.name.toLowerCase().includes(A.toLowerCase())||f.id.toLowerCase().includes(A.toLowerCase())||f.userLabels&&f.userLabels.some(g=>g.toLowerCase().includes(A.toLowerCase()))||f.originalTags&&f.originalTags.some(g=>g.toLowerCase().includes(A.toLowerCase())));return k.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),Wt.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-lg shadow-2xl max-h-[85vh] flex flex-col animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-4 border-b border-border flex justify-between items-center",children:[a.jsx("h3",{className:"font-bold text-lg",children:u.trackerTitle}),a.jsx("button",{onClick:e,children:a.jsx(xt,{size:20})})]}),a.jsx("div",{className:"p-4 border-b border-border",children:a.jsx("input",{type:"text",placeholder:"Search...",value:A,onChange:f=>l(f.target.value),autoFocus:!0,className:"w-full bg-background border border-border rounded-lg px-3 py-2 outline-none focus:ring-2 focus:ring-primary/50"})}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-2",children:[d.map(f=>a.jsxs("button",{onClick:()=>s(f),className:"w-full text-left p-3 rounded-lg hover:bg-surface/50 border border-transparent hover:border-border transition-all group flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("span",{className:"font-bold",children:f.name})}),a.jsxs("div",{className:"text-xs text-muted flex items-center gap-1",children:[a.jsxs("span",{className:"font-medium text-foreground/80",children:[f.credits," cr"]}),a.jsx("span",{children:""}),[f.teacher||(f.id&&f.id.length<20?f.id:"Custom Course"),f.department].filter(Boolean).join("  ")]})]}),a.jsx("div",{className:"p-2 bg-primary/10 text-primary rounded-full opacity-0 group-hover:opacity-100 transition-all",children:a.jsx(es,{size:16})})]},f.id)),d.length===0&&a.jsx("div",{className:"text-center p-8 text-muted",children:"No courses found"})]})]})}),document.body)},kp=()=>Math.random().toString(36).substring(2,9)+Date.now().toString(36),Rp={department:"",minTotalCredits:"9",minCoreCredits:"0",targetYear:"",status:"in_progress",courses:[],proofFileName:"",notes:"",coursePlanUrl:"",coursePlanFileName:""},Mp="nsysu-interdisciplinary-cross-disciplinary-data",PO={en:{referenceProcess:"Reference Process",step1:"Program Introduction",step1_sub1:"Go to About -> Find [Micro-Program] -> Check Rules",step1_sub2:"Scroll down to 'Micro-Program Introduction' to find your program",step1_sub3_pre:"Click ",step1_sub3_link:"'Course Plan'",step1_sub4:"Check 'Core Courses', 'Electives', and 'Credit Requirements'",step2:"Add your planned/completed courses to the list below",step2_sub1:"Fill in Basic Info",step3:"ClearGrad tracks your progress in real-time",basicInfo:"Basic Info",doubleMajorDept:"Program Name",selectDept:"Select Program...",applicableYear:"Applicable Year",selectYear:"Select Year...",minTotalCredits:"Minimum Total Credits",minCoreCredits:"Core Course Required Credits",totalProgress:"Total Credits Progress",externalCreditsCheck:"At least 3 credits from courses outside your Major, Minor, and Double Major departments",externalCreditsProgress:"External Credits: ",coursePlanInput:"Course Plan / Regulations",addFromTracker:"Add from Tracker",addFromCatalog:"Add from Catalog",trackerTitle:"Select from Tracker",syncBtn:"Sync",matchCourse:"Match/Sync",matchConfirmTitle:"Confirm Course Match",matchConfirmText:"We found a matching course in your tracker. Do you want to sync data from this course?",perfectMatchFound:"Perfect Match Found!",noMatchFound:"No exact match found in your tracker.",noMatchTitle:"No Match Found",noMatchDesc:"We couldn't find an exact match for this course in your tracker.",manualAdd:"Manual Add",cancel:"Cancel",confirm:"Confirm",deleteConfirmTitle:"Delete Course?",deleteConfirmText:"Are you sure you want to remove this course from your list? This action cannot be undone.",selectCourse:"Select Course",fromTracker:"From Tracker",uploadPlan:"Upload File",pasteLink:"Paste Link...",viewPlan:"View Plan",designated:"Required Courses",coreCourses:"Core Courses",attachments:"Attachments",completedCourses:"Completed Courses",plannedCourses:"Planned Courses",badgeCompleted:"Completed",badgePlanned:"Planned",addCourse:"Add Course",elective:"Elective Courses",minCredits:"Min Credits:",sectionComplete:"Section Complete!",courseName:"Course Name",typeToAdd:"Type to add course...",credit:"Credit",pleaseFill:'Please fill in "Min Credits" to track progress.',pleaseFillTotal:'Please fill in "Minimum Total Credits" to track progress.',officialRegulations:"Reference",status:"Status",statusPlanned:"Planned",statusInProgress:"In Progress",statusPending:"Pending Approval",statusCompleted:"Approved",creditWarning:"Completion of credit requirements does not imply official approval.",proofSection:"Approval / Proof (optional)",proofStatus:"Status:",notSubmitted:"Not Submitted",submitted:"Submitted",approved:"Approved",uploadOrLink:"Upload or Paste Link:",uploadType:"Approval Letter / System Screenshot",notes:"Notes (Optional)",viewFile:"View Attached File",uploadFile:"Upload File",safetyNotice:"Files are stored locally in your browser and are not uploaded to any server.",confirmRemove:"Are you sure you want to remove this file?",storedOnOriginalDevice:"Stored on original upload device",reUpload:"Re-upload"},zh:{referenceProcess:"",step1:"",step1_sub1:" ",step1_sub2:"",step1_sub3_pre:"",step1_sub3_link:"",step1_sub4:"",step2:"",step2_sub1:"",step3:"ClearGrad ",basicInfo:"",doubleMajorDept:"",selectDept:"...",applicableYear:"",selectYear:"...",minTotalCredits:"",minCoreCredits:"",totalProgress:"",externalCreditsCheck:" 3 ",externalCreditsProgress:"",coursePlanInput:" / ",addFromTracker:"",addFromCatalog:"",trackerTitle:"",syncBtn:"",matchCourse:"/",matchConfirmTitle:"",matchConfirmText:"",perfectMatchFound:"",noMatchFound:"",noMatchTitle:"",noMatchDesc:"",manualAdd:"",cancel:"",confirm:"",deleteConfirmTitle:"",deleteConfirmText:"",selectCourse:"",fromTracker:"",uploadPlan:"",pasteLink:"...",viewPlan:"",attachments:"",designated:"",coreCourses:"",completedCourses:"",plannedCourses:"",badgeCompleted:"",badgePlanned:"",addCourse:"",elective:"",minCredits:"",sectionComplete:"",courseName:"",typeToAdd:"...",credit:"",pleaseFill:"",pleaseFillTotal:"",officialRegulations:"",status:"",statusPlanned:"",statusInProgress:"",statusPending:"",statusCompleted:"",creditWarning:"",proofSection:"",proofStatus:"",notSubmitted:"",submitted:"",approved:"",uploadOrLink:"",uploadType:" / ",notes:"",viewFile:"",uploadFile:"",safetyNotice:"",confirmRemove:"",storedOnOriginalDevice:"",reUpload:""}},VO=({onStatusChange:r,userProfile:e,courses:t=[]})=>{const{language:s}=At(),A=PO[s==="zh"?"zh":"en"],{semesters:l}=oa(),[u,d]=k.useState(()=>{const R=localStorage.getItem(Mp);if(R)try{const Z=JSON.parse(R);if(!Array.isArray(Z.courses)){const de=[];Z.designatedRequired?.courses&&de.push(...Z.designatedRequired.courses),Z.electiveRequired?.courses&&de.push(...Z.electiveRequired.courses),Z.courses=de,Z.courses.length===0&&(Z.courses=Rp.courses)}return Z}catch(Z){return console.error("Failed to parse saved data",Z),Rp}return Rp}),[f,g]=k.useState(!1),[x,y]=k.useState(!1),[v,N]=k.useState(""),[M,S]=k.useState(""),[V,K]=k.useState(null),[G,z]=k.useState(null);k.useEffect(()=>{na("cross_disciplinary_7_proof").then(R=>{R&&K(R)}),na("cross_disciplinary_7_course_plan").then(R=>{R&&z(R)})},[]);const q=async R=>{if(R.target.files&&R.target.files[0]){const Z=R.target.files[0];await Tn("cross_disciplinary_7_proof",Z),K(Z),C("proofFileName",Z.name)}},$=async R=>{if(R.target.files&&R.target.files[0]){const Z=R.target.files[0];await Tn("cross_disciplinary_7_course_plan",Z),z(Z),C("coursePlanFileName",Z.name)}},Y=async()=>{window.confirm(A.confirmRemove)&&(await aa("cross_disciplinary_7_proof"),K(null),C("proofFileName",""))},E=async()=>{window.confirm(A.confirmRemove)&&(await aa("cross_disciplinary_7_course_plan"),z(null),C("coursePlanFileName",""))};k.useEffect(()=>{const R=localStorage.getItem(Mp),Z=JSON.stringify(u);R!==Z&&localStorage.setItem(Mp,Z)},[u]);const _=l.map(R=>{if(R.length===4){const Z=R.substring(0,3),de=R.substring(3);return de==="3"?`${Z}-Summer`:`${Z}-${de}`}return R}),C=(R,Z)=>{d(de=>({...de,[R]:Z}))},D=(R,Z,de)=>{d(pe=>{const ze=[...pe.courses],it=ze.findIndex(De=>De.id===R);if(it===-1)return pe;const Je={...ze[it],[Z]:de};return ze[it]=Je,{...pe,courses:ze}})},j=(R="core")=>{d(Z=>({...Z,courses:[...Z.courses,{id:kp(),name:"",credits:"",completed:!1,isAutoCreated:!1,category:R}]}))},Q=R=>{d(Z=>({...Z,courses:Z.courses.filter(de=>de.id!==R)}))},U=()=>{const R=u.courses.filter(de=>de.completed).reduce((de,pe)=>de+(parseFloat(pe.credits)||0),0),Z=parseFloat(u.minTotalCredits)||0;return{total:R,target:Z}},T=()=>{const R=u.courses.filter(de=>de.completed&&(de.category==="core"||!de.category)).reduce((de,pe)=>de+(parseFloat(pe.credits)||0),0),Z=parseFloat(u.minCoreCredits)||0;return{total:R,target:Z}},W=()=>{const R=new Set;e?.major&&R.add(e.major);try{const pe=JSON.parse(localStorage.getItem("nsysu-interdisciplinary-minor-data")||"{}");pe.department&&R.add(pe.department)}catch(pe){console.error("Error reading minor data",pe)}try{const pe=JSON.parse(localStorage.getItem("nsysu-interdisciplinary-double-major-data")||"{}");pe.department&&R.add(pe.department)}catch(pe){console.error("Error reading double major data",pe)}return u.courses.filter(pe=>{if(!pe.completed)return!1;if(!pe.department)return!0;for(const ze of Array.from(R))if(pe.department===ze)return!1;return!0}).reduce((pe,ze)=>pe+(parseFloat(ze.credits)||0),0)};k.useEffect(()=>{if(!r)return;const R=U(),Z=T(),de=W(),pe=R.target>0&&R.total>=R.target,ze=Z.target>0?Z.total>=Z.target:!0,it=de>=3;r(pe&&ze&&it)},[u,r,e]);const H=R=>{if(u.courses.some(pe=>pe.name===R.name&&pe.credits===R.credit.toString())){alert("This course is already in the list!");return}const de={id:kp(),name:R.name,credits:R.credit.toString(),completed:!1,isAutoCreated:!1,category:le.current,department:R.department,fromCatalog:!0};d(pe=>({...pe,courses:[...pe.courses,de]})),g(!1)},F=R=>{if(u.courses.some(pe=>pe.name===R.name&&pe.credits===R.credits.toString())){alert("This course is already in the list!");return}const de={id:kp(),name:R.name,credits:R.credits.toString(),completed:!0,isAutoCreated:!1,category:le.current,department:R.department,fromCatalog:!0};d(pe=>({...pe,courses:[...pe.courses,de]})),y(!1)},L=({onCancel:R,onManualAdd:Z,T:de})=>(k.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),Wt.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-sm shadow-2xl p-6 flex flex-col gap-4 animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[a.jsx("div",{className:"mx-auto w-12 h-12 bg-orange-500/10 rounded-full flex items-center justify-center text-orange-500 mb-2",children:a.jsx(ir,{size:24,strokeWidth:3})}),a.jsx("h3",{className:"text-xl font-bold",children:de.noMatchTitle}),a.jsx("p",{className:"text-muted text-sm text-center",children:de.noMatchDesc})]}),a.jsxs("div",{className:"flex gap-3 mt-2",children:[a.jsx("button",{onClick:R,className:"flex-1 py-2.5 px-4 rounded-lg border border-border hover:bg-surface font-medium transition-colors",children:de.cancel}),a.jsx("button",{onClick:Z,className:"flex-1 py-2.5 px-4 rounded-lg bg-primary hover:bg-primary/90 text-white font-bold transition-colors shadow-lg shadow-primary/20",children:de.manualAdd})]})]})}),document.body)),[te,Ae]=k.useState(null),[P,J]=k.useState(!1),le=k.useRef("core"),[ge,Ee]=k.useState(null),Ce=()=>{ge&&(Q(ge.id),Ee(null))},Se=({isOpen:R,onClose:Z,onConfirm:de,T:pe})=>(k.useEffect(()=>(R&&(document.body.style.overflow="hidden"),()=>{document.body.style.overflow="auto"}),[R]),R?Wt.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-sm shadow-2xl p-6 flex flex-col gap-4 animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[a.jsx("div",{className:"mx-auto w-12 h-12 bg-destructive/10 rounded-full flex items-center justify-center text-destructive mb-2",children:a.jsx(ir,{size:24,strokeWidth:3})}),a.jsx("h3",{className:"text-xl font-bold",children:pe.deleteConfirmTitle}),a.jsx("p",{className:"text-muted text-sm text-center",children:pe.deleteConfirmText})]}),a.jsxs("div",{className:"flex gap-3 mt-2",children:[a.jsx("button",{onClick:Z,className:"flex-1 py-2.5 px-4 rounded-lg border border-border hover:bg-surface font-medium transition-colors",children:pe.cancel}),a.jsx("button",{onClick:de,className:"flex-1 py-2.5 px-4 rounded-lg bg-red-500 hover:bg-red-600 text-white font-bold transition-colors shadow-lg shadow-red-500/20",children:pe.confirm})]})]})}),document.body):null),ut=()=>{if(!te)return;const{item:R,match:Z}=te;D(R.id,"completed",!0),D(R.id,"credits",Z.credits.toString()),D(R.id,"department",Z.department),D(R.id,"fromCatalog",!0),Ae(null)},qe=R=>{const Z=t.find(de=>de.id===R.id||de.name===R.name&&de.credits.toString()===R.credits);Z?Ae({item:R,match:Z}):J(!0)},Gt=({item:R})=>a.jsxs("div",{className:"group relative bg-surface hover:bg-surface/80 transition-all p-3 rounded-lg border border-border shadow-sm flex flex-col gap-2",children:[a.jsxs("div",{className:"flex justify-between items-start gap-2",children:[a.jsx("input",{type:"text",value:R.name,disabled:R.fromCatalog,placeholder:A.courseName,onChange:Z=>D(R.id,"name",Z.target.value),className:`bg-transparent border-none text-sm font-semibold text-foreground placeholder-muted w-full focus:outline-none focus:ring-1 focus:ring-primary/50 rounded px-1 -ml-1 ${R.fromCatalog?"opacity-80 cursor-not-allowed":""}`}),a.jsx("button",{onClick:()=>Ee(R),className:"text-muted hover:text-destructive p-1 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(jn,{size:14})})]}),a.jsxs("div",{className:"flex justify-between items-end",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("input",{type:"text",value:R.credits,disabled:R.fromCatalog,placeholder:"0",onChange:Z=>/^\d*\.?\d*$/.test(Z.target.value)&&D(R.id,"credits",Z.target.value),className:`w-8 bg-transparent text-xs font-bold text-center border-b border-border focus:border-primary outline-none ${R.fromCatalog?"opacity-80 cursor-not-allowed border-transparent":""}`}),a.jsx("span",{className:"text-[10px] text-muted",children:A.credit})]}),a.jsxs("div",{className:"flex gap-1",children:[!R.completed&&a.jsxs("button",{onClick:()=>qe(R),className:"text-[10px] px-2 py-1 rounded bg-surface border border-border hover:bg-surface/80 flex items-center gap-1",title:A.matchCourse,children:[a.jsx(Ir,{size:10})," ",A.syncBtn]}),a.jsx("div",{className:`text-[10px] px-2 py-1 rounded-full font-bold border transition-colors select-none ${R.completed?"bg-emerald-500/10 text-emerald-500 border-emerald-500/20":"bg-blue-500/10 text-blue-500 border-blue-500/20"}`,children:R.completed?A.badgeCompleted:A.badgePlanned})]})]})]}),Nt=({title:R,category:Z})=>{const de=u.courses.filter(Ue=>Z==="core"?Ue.category==="core"||!Ue.category:Ue.category==="elective"),pe=de.filter(Ue=>Ue.completed),ze=de.filter(Ue=>!Ue.completed),it=Z==="elective"?"text-orange-500":"text-primary",Je=Z==="elective"?"bg-orange-500 hover:bg-orange-600":"bg-primary hover:bg-primary/90",De=Z==="elective"?"bg-orange-400":"bg-emerald-500";return a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:`text-lg font-bold flex items-center gap-2 ${it}`,children:R}),a.jsxs("div",{className:"flex gap-2",children:[Z==="core"&&null,a.jsxs("button",{onClick:()=>j(Z),className:`flex items-center gap-1.5 px-3 py-1.5 text-white text-xs font-medium rounded-lg transition-colors ${Je}`,children:[a.jsx(es,{size:14}),A.addCourse]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between pb-2 border-b border-border",children:[a.jsxs("h4",{className:"font-bold text-foreground text-sm flex items-center gap-2",children:[a.jsx("span",{className:`w-2 h-2 rounded-full ${De}`}),A.completedCourses]}),a.jsxs("div",{className:"flex gap-2 items-center",children:[a.jsxs("button",{onClick:()=>{let Ue=u.department;const St=Ue.match(/(.+?)(?=\()/);St&&(Ue=St[1]),N(Ue),le.current=Z,y(!0)},className:"text-[10px] text-primary hover:underline flex items-center gap-1",children:[a.jsx(rr,{size:10})," ",A.addFromTracker]}),a.jsxs("span",{className:"text-xs text-muted",children:[pe.length," items"]})]})]}),a.jsxs("div",{className:"space-y-2 min-h-[100px]",children:[pe.map(Ue=>a.jsx(Gt,{item:Ue},Ue.id)),pe.length===0&&a.jsx("div",{className:"text-center text-muted text-xs py-8 border border-dashed border-border rounded-lg",children:"No completed courses"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between pb-2 border-b border-border",children:[a.jsxs("h4",{className:"font-bold text-foreground text-sm flex items-center gap-2",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"}),A.plannedCourses]}),a.jsxs("div",{className:"flex gap-2 items-center",children:[a.jsxs("button",{onClick:()=>{let Ue=u.department;const St=Ue.match(/(.+?)(?=\()/);St&&(Ue=St[1]),S(Ue),le.current=Z,g(!0)},className:"text-[10px] text-blue-500 hover:underline flex items-center gap-1",children:[a.jsx(rr,{size:10})," ",A.addFromCatalog]}),a.jsxs("span",{className:"text-xs text-muted",children:[ze.length," items"]})]})]}),a.jsxs("div",{className:"space-y-2 min-h-[100px]",children:[ze.map(Ue=>a.jsx(Gt,{item:Ue},Ue.id)),ze.length===0&&a.jsx("div",{className:"text-center text-muted text-xs py-8 border border-dashed border-border rounded-lg",children:"No planned courses"})]})]})]})]})},he=U();return a.jsxs("div",{className:"space-y-8 max-w-3xl mx-auto animate-in fade-in zoom-in-95 duration-300 pb-20",children:[a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary flex items-center gap-2",children:[a.jsx(rr,{size:20}),A.referenceProcess]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"pt-0.5",children:a.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-xs font-bold text-primary",children:"1"})}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("div",{className:"flex items-center gap-2 font-medium text-foreground",children:a.jsxs("a",{href:"https://ctdr.nsysu.edu.tw/class2.php",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-primary hover:underline underline-offset-4",children:[A.step1,a.jsx(Ir,{size:14})]})}),a.jsxs("ul",{className:"text-sm text-muted list-disc list-inside space-y-0.5 pl-1",children:[a.jsx("li",{children:A.step1_sub1}),a.jsx("li",{children:A.step1_sub2}),a.jsxs("li",{children:[A.step1_sub3_pre,a.jsx("span",{className:"underline decoration-primary/50 underline-offset-2",children:A.step1_sub3_link})]}),a.jsx("li",{children:A.step1_sub4})]})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"pt-0.5",children:a.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-xs font-bold text-primary",children:"2"})}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("div",{className:"font-medium text-foreground",children:A.step2}),a.jsx("ul",{className:"text-sm text-muted list-disc list-inside space-y-0.5 pl-1",children:a.jsx("li",{children:A.step2_sub1})})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"pt-0.5",children:a.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-xs font-bold text-primary",children:"3"})}),a.jsxs("div",{className:"font-medium text-foreground flex items-center gap-2",children:[A.step3,a.jsx(vt,{size:16,className:"text-primary"})]})]})]})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary flex items-center gap-2",children:[a.jsx(rr,{size:20}),A.basicInfo]}),a.jsxs("a",{href:"https://oaa.nsysu.edu.tw/static/file/3/1003/attach/20/pta_232069_5443563_94211.pdf",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 px-3 py-1.5 bg-primary/10 hover:bg-primary/20 text-primary text-xs font-medium rounded-lg transition-colors",children:[A.officialRegulations,a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),a.jsx("polyline",{points:"15 3 21 3 21 9"}),a.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:A.doubleMajorDept}),a.jsxs("select",{value:u.department,onChange:R=>C("department",R.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50",children:[a.jsx("option",{value:"",children:A.selectDept}),a.jsx("optgroup",{label:" (Micro-Programs)",children:LO.map(R=>a.jsx("option",{value:R,children:R},R))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:A.applicableYear}),a.jsxs("select",{value:u.targetYear,onChange:R=>C("targetYear",R.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50",children:[a.jsx("option",{value:"",children:A.selectYear}),_.map(R=>a.jsx("option",{value:R,children:R},R))]})]}),a.jsxs("div",{className:"md:col-span-2 grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:A.minTotalCredits}),a.jsx("input",{type:"text",value:u.minTotalCredits,onChange:R=>/^\d*$/.test(R.target.value)&&C("minTotalCredits",R.target.value),placeholder:"e.g. 9",className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:A.minCoreCredits}),a.jsx("input",{type:"text",value:u.minCoreCredits||"",onChange:R=>/^\d*$/.test(R.target.value)&&C("minCoreCredits",R.target.value),placeholder:"Optional",className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50"})]})]}),a.jsxs("div",{className:"md:col-span-2 pt-2 border-t border-border/50",children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-2",children:A.coursePlanInput}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("input",{type:"text",value:u.coursePlanUrl||"",onChange:R=>C("coursePlanUrl",R.target.value),placeholder:A.pasteLink,className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground text-sm outline-none focus:ring-2 focus:ring-primary/50"}),u.coursePlanUrl&&a.jsxs("a",{href:u.coursePlanUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-primary hover:underline mt-1 flex items-center gap-1",children:[a.jsx(Ir,{size:10}),A.viewPlan]})]}),a.jsxs("div",{children:[a.jsx("input",{type:"file",id:"course-plan-upload",className:"hidden",accept:"image/*,.pdf",onChange:$}),G?a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-primary/5 border border-primary/20 rounded-lg",children:[a.jsx("div",{className:"p-1.5 bg-primary/10 rounded-full text-primary",children:a.jsx(os,{size:14})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsx("div",{className:"text-sm font-medium text-foreground truncate",children:G.name})}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>{const R=URL.createObjectURL(G);window.open(R,"_blank")},className:"p-1 text-primary hover:bg-primary/10 rounded transition-colors",title:A.viewFile,children:a.jsx(Ir,{size:14})}),a.jsx("button",{onClick:E,className:"p-1 text-muted hover:text-destructive hover:bg-destructive/10 rounded transition-colors",children:a.jsx(xt,{size:14})})]})]}):a.jsxs("label",{htmlFor:"course-plan-upload",className:"cursor-pointer flex items-center justify-center gap-2 px-4 py-2 bg-background border border-border hover:border-primary text-foreground rounded-lg transition-all shadow-sm active:scale-95 text-sm",children:[a.jsx(jr,{size:14}),A.uploadPlan]})]})]})]})]})]}),a.jsxs("div",{className:"bg-surface/50 p-4 rounded-xl border border-border",children:[he.target>0?a.jsxs(a.Fragment,{children:[a.jsx(ur,{label:A.totalProgress,current:he.total,total:he.target,color:"bg-primary",variant:"l"}),a.jsx("div",{className:"flex justify-end mt-1",children:a.jsxs("span",{className:"text-xs text-muted flex items-center gap-1",children:[a.jsx(ir,{size:12}),A.creditWarning]})})]}):a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("span",{className:"font-medium text-foreground text-lg mb-1",children:A.totalProgress}),a.jsxs("div",{className:"text-sm text-orange-500 font-medium flex items-center gap-2 bg-orange-500/10 p-2 rounded",children:[a.jsx("span",{className:"text-lg",children:"!"})," ",A.pleaseFillTotal]})]}),T().target>0&&a.jsx("div",{className:"mt-4 pt-4 border-t border-border/50",children:a.jsx(ur,{label:A.minCoreCredits,current:T().total,total:T().target,color:"bg-emerald-500",variant:"l"})})]}),a.jsxs("div",{className:"bg-surface/50 p-4 rounded-xl border border-border flex items-center gap-4",children:[a.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center border transition-colors ${W()>=3?"bg-emerald-500 border-emerald-500 text-white":"border-muted text-transparent"}`,children:a.jsx(vt,{size:16,strokeWidth:3})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-sm font-medium text-foreground",children:A.externalCreditsCheck}),a.jsxs("div",{className:"text-xs text-muted mt-0.5",children:[A.externalCreditsProgress,a.jsx("span",{className:W()>=3?"text-emerald-500 font-bold":"text-foreground",children:W()})," / 3"]})]})]}),a.jsx(Nt,{title:A.coreCourses,category:"core"}),a.jsx(Nt,{title:A.elective,category:"elective"}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary border-b border-border/50 pb-2 flex items-center gap-2",children:[a.jsx(jr,{size:20}),A.attachments," & ",A.notes]}),a.jsxs("div",{className:"flex flex-col gap-8",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:A.uploadOrLink}),a.jsxs("div",{className:"space-y-3 pl-2",children:[a.jsxs("div",{children:[a.jsx("input",{type:"file",id:"proof-upload-7",className:"hidden",accept:"image/*,.pdf",onChange:q}),V?a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-primary/5 border border-primary/20 rounded-lg animate-in fade-in slide-in-from-left-2",children:[a.jsx("div",{className:"p-2 bg-primary/10 rounded-full text-primary",children:a.jsx(os,{size:18})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm font-medium text-foreground truncate max-w-[200px]",children:V.name}),a.jsxs("div",{className:"text-xs text-muted",children:[(V.size/1024).toFixed(1)," KB"]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>{const R=URL.createObjectURL(V);window.open(R,"_blank")},className:"p-1.5 text-primary hover:bg-primary/10 rounded-md transition-colors",title:A.viewFile,children:a.jsx(Ir,{size:16})}),a.jsx("button",{onClick:Y,className:"p-1.5 text-muted hover:text-destructive hover:bg-destructive/10 rounded-md transition-colors",children:a.jsx(xt,{size:16})})]})]}):u.proofFileName?a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 bg-surface/50 border border-dashed border-border rounded-lg p-3 max-w-md animate-in fade-in slide-in-from-left-2",children:[a.jsxs("div",{className:"flex items-center gap-3 opacity-70 overflow-hidden",children:[a.jsx(os,{className:"text-muted flex-shrink-0",size:20}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:u.proofFileName}),a.jsx("p",{className:"text-xs text-muted truncate",children:A.storedOnOriginalDevice})]})]}),a.jsxs("label",{className:"cursor-pointer p-1.5 hover:bg-white/10 rounded-md text-primary transition-colors text-xs flex items-center gap-1 flex-shrink-0 self-start sm:self-auto border border-primary/20 bg-primary/5",children:[a.jsx(jr,{size:14})," ",A.reUpload,a.jsx("input",{type:"file",accept:"image/*,application/pdf",className:"hidden",onChange:q})]})]}):a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("label",{htmlFor:"proof-upload-7",className:"cursor-pointer flex items-center gap-2 px-4 py-2 bg-background border border-border hover:border-primary text-foreground rounded-lg transition-all shadow-sm active:scale-95",children:[a.jsx(jr,{size:16}),a.jsx("span",{className:"text-sm font-medium",children:A.uploadFile})]}),a.jsx("span",{className:"text-xs text-muted",children:A.uploadType})]})]}),a.jsxs("div",{className:"text-xs text-muted flex items-center gap-1.5 mt-1",children:[a.jsx(ir,{size:10,className:"text-muted"}),A.safetyNotice]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:A.notes}),a.jsx("div",{className:"pl-2",children:a.jsx("textarea",{value:u.notes,onChange:R=>C("notes",R.target.value),placeholder:"e.g. ...",className:"w-full bg-background border border-border rounded-lg px-4 py-3 text-foreground outline-none focus:ring-2 focus:ring-primary/50 min-h-[100px] resize-y"})})]})]})]}),f&&a.jsx(VA,{onClose:()=>g(!1),onSelect:H,defaultSearch:M}),x&&a.jsx(OO,{isOpen:x,onClose:()=>y(!1),courses:t,onAdd:F,searchQuery:v,setSearchQuery:N,T:A}),te&&a.jsx(HO,{candidate:te,onConfirm:ut,onCancel:()=>Ae(null),T:A}),P&&a.jsx(L,{onCancel:()=>J(!1),onManualAdd:()=>{J(!1),N(""),y(!0)},T:A}),ge&&a.jsx(Se,{isOpen:!!ge,onClose:()=>Ee(null),onConfirm:Ce,T:A})]})},zO=({candidate:r,onConfirm:e,onCancel:t,T:s})=>(k.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),Wt.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-md shadow-2xl p-6 flex flex-col gap-4 animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[a.jsx("div",{className:"mx-auto w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center text-primary mb-2",children:a.jsx(vt,{size:24,strokeWidth:3})}),a.jsx("h3",{className:"text-xl font-bold",children:s.perfectMatchFound}),a.jsx("p",{className:"text-muted text-sm",children:s.matchConfirmText})]}),a.jsxs("div",{className:"bg-surface/50 p-4 rounded-lg flex flex-col gap-2 border border-border",children:[a.jsx("div",{className:"font-bold text-center text-lg",children:r.match.name}),a.jsxs("div",{className:"flex justify-center gap-4 text-xs text-muted",children:[a.jsxs("span",{children:[r.match.credits," cr"]}),a.jsx("span",{children:""}),a.jsx("span",{children:r.match.teacher})]}),a.jsx("div",{className:"text-center text-xs text-muted/80",children:r.match.department})]}),a.jsxs("div",{className:"flex gap-3 mt-2",children:[a.jsx("button",{onClick:t,className:"flex-1 py-2.5 px-4 rounded-lg border border-border hover:bg-surface font-medium transition-colors",children:"Cancel"}),a.jsx("button",{onClick:e,className:"flex-1 py-2.5 px-4 rounded-lg bg-primary hover:bg-primary/90 text-white font-bold transition-colors shadow-lg shadow-primary/20",children:"Confirm Sync"})]})]})}),document.body)),KO=({isOpen:r,onClose:e,courses:t,onAdd:s,searchQuery:A,setSearchQuery:l,T:u})=>{if(!r)return null;const d=t.filter(f=>f.name.toLowerCase().includes(A.toLowerCase())||f.id.toLowerCase().includes(A.toLowerCase())||f.userLabels&&f.userLabels.some(g=>g.toLowerCase().includes(A.toLowerCase()))||f.originalTags&&f.originalTags.some(g=>g.toLowerCase().includes(A.toLowerCase())));return k.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),Wt.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-lg shadow-2xl max-h-[85vh] flex flex-col animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-4 border-b border-border flex justify-between items-center",children:[a.jsx("h3",{className:"font-bold text-lg",children:u.trackerTitle}),a.jsx("button",{onClick:e,children:a.jsx(xt,{size:20})})]}),a.jsx("div",{className:"p-4 border-b border-border",children:a.jsx("input",{type:"text",placeholder:"Search...",value:A,onChange:f=>l(f.target.value),autoFocus:!0,className:"w-full bg-background border border-border rounded-lg px-3 py-2 outline-none focus:ring-2 focus:ring-primary/50"})}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-2",children:[d.map(f=>a.jsxs("button",{onClick:()=>s(f),className:"w-full text-left p-3 rounded-lg hover:bg-surface/50 border border-transparent hover:border-border transition-all group flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("span",{className:"font-bold",children:f.name})}),a.jsxs("div",{className:"text-xs text-muted flex items-center gap-1",children:[a.jsxs("span",{className:"font-medium text-foreground/80",children:[f.credits," cr"]}),a.jsx("span",{children:""}),[f.teacher||(f.id&&f.id.length<20?f.id:"Custom Course"),f.department].filter(Boolean).join("  ")]})]}),a.jsx("div",{className:"p-2 bg-primary/10 text-primary rounded-full opacity-0 group-hover:opacity-100 transition-all",children:a.jsx(es,{size:16})})]},f.id)),d.length===0&&a.jsx("div",{className:"text-center p-8 text-muted",children:"No courses found"})]})]})}),document.body)},Lp={department:"",minTotalCredits:"",minCoreCredits:"",targetYear:"",status:"in_progress",courses:[],proofFileName:"",notes:"",coursePlanUrl:"",coursePlanFileName:""},Hp="nsysu-diverse-learning-data",GO={en:{referenceProcess:"Reference Process",step1:"Program Introduction",step1_sub1:"Go to About -> Find [Integrated Program] -> Check Rules",step1_sub2:"Scroll down to 'Integrated Program Introduction' to find your program",step1_sub3_pre:"Click ",step1_sub3_link:"'Course Plan'",step1_sub4:"Check 'Core Courses', 'Electives', and 'Credit Requirements'",step2:"Add your planned/completed courses to the list below",step2_sub1:"Fill in Basic Info",step3:"ClearGrad tracks your progress in real-time",basicInfo:"Basic Info",doubleMajorDept:"Program Name",selectDept:"Select Program...",applicableYear:"Applicable Year",selectYear:"Select Year...",minTotalCredits:"Minimum Total Credits",minCoreCredits:"Core Course Required Credits",totalProgress:"Total Credits Progress",externalCreditsCheck:"At least 6 credits from courses outside your Major, Minor, and Double Major departments",externalCreditsProgress:"External Credits: ",coursePlanInput:"Course Plan / Regulations",addFromTracker:"Add from Tracker",addFromCatalog:"Add from Catalog",trackerTitle:"Select from Tracker",syncBtn:"Sync",matchCourse:"Match/Sync",matchConfirmTitle:"Confirm Course Match",matchConfirmText:"We found a matching course in your tracker. Do you want to sync data from this course?",perfectMatchFound:"Perfect Match Found!",noMatchFound:"No exact match found in your tracker.",noMatchTitle:"No Match Found",noMatchDesc:"We couldn't find an exact match for this course in your tracker.",manualAdd:"Manual Add",cancel:"Cancel",confirm:"Confirm",deleteConfirmTitle:"Delete Course?",deleteConfirmText:"Are you sure you want to remove this course from your list? This action cannot be undone.",selectCourse:"Select Course",fromTracker:"From Tracker",uploadPlan:"Upload File",pasteLink:"Paste Link...",viewPlan:"View Plan",designated:"Required Courses",coreCourses:"Core Courses",attachments:"Attachments",completedCourses:"Completed Courses",plannedCourses:"Planned Courses",badgeCompleted:"Completed",badgePlanned:"Planned",addCourse:"Add Course",elective:"Elective Courses",minCredits:"Min Credits:",sectionComplete:"Section Complete!",courseName:"Course Name",typeToAdd:"Type to add course...",credit:"Credit",pleaseFill:'Please fill in "Min Credits" to track progress.',pleaseFillTotal:'Please fill in "Minimum Total Credits" to track progress.',officialRegulations:"Reference",status:"Status",statusPlanned:"Planned",statusInProgress:"In Progress",statusPending:"Pending Approval",statusCompleted:"Approved",creditWarning:"Completion of credit requirements does not imply official approval.",proofSection:"Approval / Proof (optional)",proofStatus:"Status:",notSubmitted:"Not Submitted",submitted:"Submitted",approved:"Approved",uploadOrLink:"Upload or Paste Link:",uploadType:"Approval Letter / System Screenshot",notes:"Notes (Optional)",viewFile:"View Attached File",uploadFile:"Upload File",safetyNotice:"Files are stored locally in your browser and are not uploaded to any server.",confirmRemove:"Are you sure you want to remove this file?",storedOnOriginalDevice:"Stored on original upload device",reUpload:"Re-upload"},zh:{referenceProcess:"",step1:"",step1_sub1:" ",step1_sub2:"",step1_sub3_pre:"",step1_sub3_link:"",step1_sub4:"",step2:"",step2_sub1:"",step3:"ClearGrad ",basicInfo:"",doubleMajorDept:"",selectDept:"...",applicableYear:"",selectYear:"...",minTotalCredits:"",minCoreCredits:"",totalProgress:"",externalCreditsCheck:" 6 ",externalCreditsProgress:"",coursePlanInput:" / ",addFromTracker:"",addFromCatalog:"",trackerTitle:"",syncBtn:"",matchCourse:"/",matchConfirmTitle:"",matchConfirmText:"",perfectMatchFound:"",noMatchFound:"",noMatchTitle:"",noMatchDesc:"",manualAdd:"",cancel:"",confirm:"",deleteConfirmTitle:"",deleteConfirmText:"",selectCourse:"",fromTracker:"",uploadPlan:"",pasteLink:"...",viewPlan:"",attachments:"",designated:"",coreCourses:"",completedCourses:"",plannedCourses:"",badgeCompleted:"",badgePlanned:"",addCourse:"",elective:"",minCredits:"",sectionComplete:"",courseName:"",typeToAdd:"...",credit:"",pleaseFill:"",pleaseFillTotal:"",officialRegulations:"",status:"",statusPlanned:"",statusInProgress:"",statusPending:"",statusCompleted:"",creditWarning:"",proofSection:"",proofStatus:"",notSubmitted:"",submitted:"",approved:"",uploadOrLink:"",uploadType:" / ",notes:"",viewFile:"",uploadFile:"",safetyNotice:"",confirmRemove:"",storedOnOriginalDevice:"",reUpload:""}},qO=({onStatusChange:r,userProfile:e,courses:t=[]})=>{const{language:s}=At(),A=GO[s==="zh"?"zh":"en"],{semesters:l}=oa(),[u,d]=k.useState(()=>{const R=localStorage.getItem(Hp);if(R)try{const Z=JSON.parse(R);if(!Array.isArray(Z.courses)){const de=[];Z.designatedRequired?.courses&&de.push(...Z.designatedRequired.courses),Z.electiveRequired?.courses&&de.push(...Z.electiveRequired.courses),Z.courses=de,Z.courses.length===0&&(Z.courses=Lp.courses)}return Z}catch(Z){return console.error("Failed to parse saved data",Z),Lp}return Lp}),[f,g]=k.useState(!1),[x,y]=k.useState(!1),[v,N]=k.useState(""),[M,S]=k.useState(""),[V,K]=k.useState(null),[G,z]=k.useState(null);k.useEffect(()=>{na("diverse_learning_8_proof").then(R=>{R&&K(R)}),na("diverse_learning_8_course_plan").then(R=>{R&&z(R)})},[]);const q=async R=>{if(R.target.files&&R.target.files[0]){const Z=R.target.files[0];await Tn("diverse_learning_8_proof",Z),K(Z),C("proofFileName",Z.name)}},$=async R=>{if(R.target.files&&R.target.files[0]){const Z=R.target.files[0];await Tn("diverse_learning_8_course_plan",Z),z(Z),C("coursePlanFileName",Z.name)}},Y=async()=>{window.confirm(A.confirmRemove)&&(await aa("diverse_learning_8_proof"),K(null),C("proofFileName",""))},E=async()=>{window.confirm(A.confirmRemove)&&(await aa("diverse_learning_8_course_plan"),z(null),C("coursePlanFileName",""))};k.useEffect(()=>{const R=localStorage.getItem(Hp),Z=JSON.stringify(u);R!==Z&&localStorage.setItem(Hp,Z)},[u]);const _=l.map(R=>{if(R.length===4){const Z=R.substring(0,3),de=R.substring(3);return de==="3"?`${Z}-Summer`:`${Z}-${de}`}return R}),C=(R,Z)=>{d(de=>({...de,[R]:Z}))},D=(R,Z,de)=>{d(pe=>{const ze=[...pe.courses],it=ze.findIndex(De=>De.id===R);if(it===-1)return pe;const Je={...ze[it],[Z]:de};return ze[it]=Je,{...pe,courses:ze}})},j=(R="core")=>{d(Z=>({...Z,courses:[...Z.courses,{id:UA(),name:"",credits:"",completed:!1,isAutoCreated:!1,category:R}]}))},Q=R=>{d(Z=>({...Z,courses:Z.courses.filter(de=>de.id!==R)}))},U=()=>{const R=u.courses.filter(de=>de.completed).reduce((de,pe)=>de+(parseFloat(pe.credits)||0),0),Z=parseFloat(u.minTotalCredits)||0;return{total:R,target:Z}},T=()=>{const R=u.courses.filter(de=>de.completed&&(de.category==="core"||!de.category)).reduce((de,pe)=>de+(parseFloat(pe.credits)||0),0),Z=parseFloat(u.minCoreCredits)||0;return{total:R,target:Z}},W=()=>{const R=new Set;e?.major&&R.add(e.major);try{const pe=JSON.parse(localStorage.getItem("nsysu-interdisciplinary-minor-data")||"{}");pe.department&&R.add(pe.department)}catch(pe){console.error("Error reading minor data",pe)}try{const pe=JSON.parse(localStorage.getItem("nsysu-interdisciplinary-double-major-data")||"{}");pe.department&&R.add(pe.department)}catch(pe){console.error("Error reading double major data",pe)}return u.courses.filter(pe=>{if(!pe.completed)return!1;if(!pe.department)return!0;for(const ze of Array.from(R))if(pe.department===ze)return!1;return!0}).reduce((pe,ze)=>pe+(parseFloat(ze.credits)||0),0)};k.useEffect(()=>{if(!r)return;const R=U(),Z=T(),de=W(),pe=R.target>0&&R.total>=R.target,ze=Z.target>0?Z.total>=Z.target:!0,it=de>=6;r(pe&&ze&&it)},[u,r,e]);const H=R=>{if(u.courses.some(pe=>pe.name===R.name&&pe.credits===R.credit.toString())){alert("This course is already in the list!");return}const de={id:UA(),name:R.name,credits:R.credit.toString(),completed:!1,isAutoCreated:!1,category:le.current,department:R.department,fromCatalog:!0};d(pe=>({...pe,courses:[...pe.courses,de]})),g(!1)},F=R=>{if(u.courses.some(pe=>pe.name===R.name&&pe.credits===R.credits.toString())){alert("This course is already in the list!");return}const de={id:UA(),name:R.name,credits:R.credits.toString(),completed:!0,isAutoCreated:!1,category:le.current,department:R.department,fromCatalog:!0};d(pe=>({...pe,courses:[...pe.courses,de]})),y(!1)},L=({onCancel:R,onManualAdd:Z,T:de})=>(k.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),Wt.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-sm shadow-2xl p-6 flex flex-col gap-4 animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[a.jsx("div",{className:"mx-auto w-12 h-12 bg-orange-500/10 rounded-full flex items-center justify-center text-orange-500 mb-2",children:a.jsx(ir,{size:24,strokeWidth:3})}),a.jsx("h3",{className:"text-xl font-bold",children:de.noMatchTitle}),a.jsx("p",{className:"text-muted text-sm text-center",children:de.noMatchDesc})]}),a.jsxs("div",{className:"flex gap-3 mt-2",children:[a.jsx("button",{onClick:R,className:"flex-1 py-2.5 px-4 rounded-lg border border-border hover:bg-surface font-medium transition-colors",children:de.cancel}),a.jsx("button",{onClick:Z,className:"flex-1 py-2.5 px-4 rounded-lg bg-primary hover:bg-primary/90 text-white font-bold transition-colors shadow-lg shadow-primary/20",children:de.manualAdd})]})]})}),document.body)),[te,Ae]=k.useState(null),[P,J]=k.useState(!1),le=k.useRef("core"),[ge,Ee]=k.useState(null),Ce=()=>{ge&&(Q(ge.id),Ee(null))},Se=({isOpen:R,onClose:Z,onConfirm:de,T:pe})=>(k.useEffect(()=>(R&&(document.body.style.overflow="hidden"),()=>{document.body.style.overflow="auto"}),[R]),R?Wt.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-sm shadow-2xl p-6 flex flex-col gap-4 animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[a.jsx("div",{className:"mx-auto w-12 h-12 bg-destructive/10 rounded-full flex items-center justify-center text-destructive mb-2",children:a.jsx(ir,{size:24,strokeWidth:3})}),a.jsx("h3",{className:"text-xl font-bold",children:pe.deleteConfirmTitle}),a.jsx("p",{className:"text-muted text-sm text-center",children:pe.deleteConfirmText})]}),a.jsxs("div",{className:"flex gap-3 mt-2",children:[a.jsx("button",{onClick:Z,className:"flex-1 py-2.5 px-4 rounded-lg border border-border hover:bg-surface font-medium transition-colors",children:pe.cancel}),a.jsx("button",{onClick:de,className:"flex-1 py-2.5 px-4 rounded-lg bg-red-500 hover:bg-red-600 text-white font-bold transition-colors shadow-lg shadow-red-500/20",children:pe.confirm})]})]})}),document.body):null),ut=()=>{if(!te)return;const{item:R,match:Z}=te;D(R.id,"completed",!0),D(R.id,"credits",Z.credits.toString()),D(R.id,"department",Z.department),D(R.id,"fromCatalog",!0),Ae(null)},qe=R=>{const Z=t.find(de=>de.id===R.id||de.name===R.name&&de.credits.toString()===R.credits);Z?Ae({item:R,match:Z}):J(!0)},Gt=({item:R})=>a.jsxs("div",{className:"group relative bg-surface hover:bg-surface/80 transition-all p-3 rounded-lg border border-border shadow-sm flex flex-col gap-2",children:[a.jsxs("div",{className:"flex justify-between items-start gap-2",children:[a.jsx("input",{type:"text",value:R.name,disabled:R.fromCatalog,placeholder:A.courseName,onChange:Z=>D(R.id,"name",Z.target.value),className:`bg-transparent border-none text-sm font-semibold text-foreground placeholder-muted w-full focus:outline-none focus:ring-1 focus:ring-primary/50 rounded px-1 -ml-1 ${R.fromCatalog?"opacity-80 cursor-not-allowed":""}`}),a.jsx("button",{onClick:()=>Ee(R),className:"text-muted hover:text-destructive p-1 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(jn,{size:14})})]}),a.jsxs("div",{className:"flex justify-between items-end",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("input",{type:"text",value:R.credits,disabled:R.fromCatalog,placeholder:"0",onChange:Z=>/^\d*\.?\d*$/.test(Z.target.value)&&D(R.id,"credits",Z.target.value),className:`w-8 bg-transparent text-xs font-bold text-center border-b border-border focus:border-primary outline-none ${R.fromCatalog?"opacity-80 cursor-not-allowed border-transparent":""}`}),a.jsx("span",{className:"text-[10px] text-muted",children:A.credit})]}),a.jsxs("div",{className:"flex gap-1",children:[!R.completed&&a.jsxs("button",{onClick:()=>qe(R),className:"text-[10px] px-2 py-1 rounded bg-surface border border-border hover:bg-surface/80 flex items-center gap-1",title:A.matchCourse,children:[a.jsx(Ir,{size:10})," ",A.syncBtn]}),a.jsx("div",{className:`text-[10px] px-2 py-1 rounded-full font-bold border transition-colors select-none ${R.completed?"bg-emerald-500/10 text-emerald-500 border-emerald-500/20":"bg-blue-500/10 text-blue-500 border-blue-500/20"}`,children:R.completed?A.badgeCompleted:A.badgePlanned})]})]})]}),Nt=({title:R,category:Z})=>{const de=u.courses.filter(Ue=>Z==="core"?Ue.category==="core"||!Ue.category:Ue.category==="elective"),pe=de.filter(Ue=>Ue.completed),ze=de.filter(Ue=>!Ue.completed),it=Z==="elective"?"text-orange-500":"text-primary",Je=Z==="elective"?"bg-orange-500 hover:bg-orange-600":"bg-primary hover:bg-primary/90",De=Z==="elective"?"bg-orange-400":"bg-emerald-500";return a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:`text-lg font-bold flex items-center gap-2 ${it}`,children:R}),a.jsxs("div",{className:"flex gap-2",children:[Z==="core"&&null,a.jsxs("button",{onClick:()=>j(Z),className:`flex items-center gap-1.5 px-3 py-1.5 text-white text-xs font-medium rounded-lg transition-colors ${Je}`,children:[a.jsx(es,{size:14}),A.addCourse]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between pb-2 border-b border-border",children:[a.jsxs("h4",{className:"font-bold text-foreground text-sm flex items-center gap-2",children:[a.jsx("span",{className:`w-2 h-2 rounded-full ${De}`}),A.completedCourses]}),a.jsxs("div",{className:"flex gap-2 items-center",children:[a.jsxs("button",{onClick:()=>{let Ue=u.department;const St=Ue.match(/(.+?)(?=\()/);St&&(Ue=St[1]),N(Ue),le.current=Z,y(!0)},className:"text-[10px] text-primary hover:underline flex items-center gap-1",children:[a.jsx(rr,{size:10})," ",A.addFromTracker]}),a.jsxs("span",{className:"text-xs text-muted",children:[pe.length," items"]})]})]}),a.jsxs("div",{className:"space-y-2 min-h-[100px]",children:[pe.map(Ue=>a.jsx(Gt,{item:Ue},Ue.id)),pe.length===0&&a.jsx("div",{className:"text-center text-muted text-xs py-8 border border-dashed border-border rounded-lg",children:"No completed courses"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between pb-2 border-b border-border",children:[a.jsxs("h4",{className:"font-bold text-foreground text-sm flex items-center gap-2",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"}),A.plannedCourses]}),a.jsxs("div",{className:"flex gap-2 items-center",children:[a.jsxs("button",{onClick:()=>{let Ue=u.department;const St=Ue.match(/(.+?)(?=\()/);St&&(Ue=St[1]),S(Ue),le.current=Z,g(!0)},className:"text-[10px] text-blue-500 hover:underline flex items-center gap-1",children:[a.jsx(rr,{size:10})," ",A.addFromCatalog]}),a.jsxs("span",{className:"text-xs text-muted",children:[ze.length," items"]})]})]}),a.jsxs("div",{className:"space-y-2 min-h-[100px]",children:[ze.map(Ue=>a.jsx(Gt,{item:Ue},Ue.id)),ze.length===0&&a.jsx("div",{className:"text-center text-muted text-xs py-8 border border-dashed border-border rounded-lg",children:"No planned courses"})]})]})]})]})},he=U();return a.jsxs("div",{className:"space-y-8 max-w-3xl mx-auto animate-in fade-in zoom-in-95 duration-300 pb-20",children:[a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary flex items-center gap-2",children:[a.jsx(rr,{size:20}),A.referenceProcess]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"pt-0.5",children:a.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-xs font-bold text-primary",children:"1"})}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("div",{className:"flex items-center gap-2 font-medium text-foreground",children:a.jsxs("a",{href:"https://ctdr.nsysu.edu.tw/class2.php",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-primary hover:underline underline-offset-4",children:[A.step1,a.jsx(Ir,{size:14})]})}),a.jsxs("ul",{className:"text-sm text-muted list-disc list-inside space-y-0.5 pl-1",children:[a.jsx("li",{children:A.step1_sub1}),a.jsx("li",{children:A.step1_sub2}),a.jsxs("li",{children:[A.step1_sub3_pre,a.jsx("span",{className:"underline decoration-primary/50 underline-offset-2",children:A.step1_sub3_link})]}),a.jsx("li",{children:A.step1_sub4})]})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"pt-0.5",children:a.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-xs font-bold text-primary",children:"2"})}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("div",{className:"font-medium text-foreground",children:A.step2}),a.jsx("ul",{className:"text-sm text-muted list-disc list-inside space-y-0.5 pl-1",children:a.jsx("li",{children:A.step2_sub1})})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"pt-0.5",children:a.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-xs font-bold text-primary",children:"3"})}),a.jsxs("div",{className:"font-medium text-foreground flex items-center gap-2",children:[A.step3,a.jsx(vt,{size:16,className:"text-primary"})]})]})]})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary flex items-center gap-2",children:[a.jsx(rr,{size:20}),A.basicInfo]}),a.jsxs("a",{href:"https://oaa.nsysu.edu.tw/static/file/3/1003/attach/20/pta_232069_5443563_94211.pdf",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 px-3 py-1.5 bg-primary/10 hover:bg-primary/20 text-primary text-xs font-medium rounded-lg transition-colors",children:[A.officialRegulations,a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),a.jsx("polyline",{points:"15 3 21 3 21 9"}),a.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:A.doubleMajorDept}),a.jsxs("select",{value:u.department,onChange:R=>C("department",R.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50",children:[a.jsx("option",{value:"",children:A.selectDept}),a.jsx("optgroup",{label:" (Integrated Programs)",children:RO.map(R=>a.jsx("option",{value:R,children:R},R))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:A.applicableYear}),a.jsxs("select",{value:u.targetYear,onChange:R=>C("targetYear",R.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50",children:[a.jsx("option",{value:"",children:A.selectYear}),_.map(R=>a.jsx("option",{value:R,children:R},R))]})]}),a.jsxs("div",{className:"md:col-span-2 grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:A.minTotalCredits}),a.jsx("input",{type:"text",value:u.minTotalCredits,onChange:R=>/^\d*$/.test(R.target.value)&&C("minTotalCredits",R.target.value),placeholder:"e.g. 15",className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:A.minCoreCredits}),a.jsx("input",{type:"text",value:u.minCoreCredits||"",onChange:R=>/^\d*$/.test(R.target.value)&&C("minCoreCredits",R.target.value),placeholder:"e.g. 9",className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50"})]})]}),a.jsxs("div",{className:"md:col-span-2 pt-2 border-t border-border/50",children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-2",children:A.coursePlanInput}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("input",{type:"text",value:u.coursePlanUrl||"",onChange:R=>C("coursePlanUrl",R.target.value),placeholder:A.pasteLink,className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground text-sm outline-none focus:ring-2 focus:ring-primary/50"}),u.coursePlanUrl&&a.jsxs("a",{href:u.coursePlanUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-primary hover:underline mt-1 flex items-center gap-1",children:[a.jsx(Ir,{size:10}),A.viewPlan]})]}),a.jsxs("div",{children:[a.jsx("input",{type:"file",id:"course-plan-upload",className:"hidden",accept:"image/*,.pdf",onChange:$}),G?a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-primary/5 border border-primary/20 rounded-lg",children:[a.jsx("div",{className:"p-1.5 bg-primary/10 rounded-full text-primary",children:a.jsx(os,{size:14})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsx("div",{className:"text-sm font-medium text-foreground truncate",children:G.name})}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>{const R=URL.createObjectURL(G);window.open(R,"_blank")},className:"p-1 text-primary hover:bg-primary/10 rounded transition-colors",title:A.viewFile,children:a.jsx(Ir,{size:14})}),a.jsx("button",{onClick:E,className:"p-1 text-muted hover:text-destructive hover:bg-destructive/10 rounded transition-colors",children:a.jsx(xt,{size:14})})]})]}):a.jsxs("label",{htmlFor:"course-plan-upload",className:"cursor-pointer flex items-center justify-center gap-2 px-4 py-2 bg-background border border-border hover:border-primary text-foreground rounded-lg transition-all shadow-sm active:scale-95 text-sm",children:[a.jsx(jr,{size:14}),A.uploadPlan]})]})]})]})]})]}),a.jsxs("div",{className:"bg-surface/50 p-4 rounded-xl border border-border",children:[he.target>0?a.jsxs(a.Fragment,{children:[a.jsx(ur,{label:A.totalProgress,current:he.total,total:he.target,color:"bg-primary",variant:"l"}),a.jsx("div",{className:"flex justify-end mt-1",children:a.jsxs("span",{className:"text-xs text-muted flex items-center gap-1",children:[a.jsx(ir,{size:12}),A.creditWarning]})})]}):a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("span",{className:"font-medium text-foreground text-lg mb-1",children:A.totalProgress}),a.jsxs("div",{className:"text-sm text-orange-500 font-medium flex items-center gap-2 bg-orange-500/10 p-2 rounded",children:[a.jsx("span",{className:"text-lg",children:"!"})," ",A.pleaseFillTotal]})]}),T().target>0&&a.jsx("div",{className:"mt-4 pt-4 border-t border-border/50",children:a.jsx(ur,{label:A.minCoreCredits,current:T().total,total:T().target,color:"bg-emerald-500",variant:"l"})})]}),a.jsxs("div",{className:"bg-surface/50 p-4 rounded-xl border border-border flex items-center gap-4",children:[a.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center border transition-colors ${W()>=6?"bg-emerald-500 border-emerald-500 text-white":"border-muted text-transparent"}`,children:a.jsx(vt,{size:16,strokeWidth:3})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-sm font-medium text-foreground",children:A.externalCreditsCheck}),a.jsxs("div",{className:"text-xs text-muted mt-0.5",children:[A.externalCreditsProgress,a.jsx("span",{className:W()>=6?"text-emerald-500 font-bold":"text-foreground",children:W()})," / 6"]})]})]}),a.jsx(Nt,{title:A.coreCourses,category:"core"}),a.jsx(Nt,{title:A.elective,category:"elective"}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary border-b border-border/50 pb-2 flex items-center gap-2",children:[a.jsx(jr,{size:20}),A.attachments," & ",A.notes]}),a.jsxs("div",{className:"flex flex-col gap-8",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:A.uploadOrLink}),a.jsxs("div",{className:"space-y-3 pl-2",children:[a.jsxs("div",{children:[a.jsx("input",{type:"file",id:"proof-upload-7",className:"hidden",accept:"image/*,.pdf",onChange:q}),V?a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-primary/5 border border-primary/20 rounded-lg animate-in fade-in slide-in-from-left-2",children:[a.jsx("div",{className:"p-2 bg-primary/10 rounded-full text-primary",children:a.jsx(os,{size:18})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm font-medium text-foreground truncate max-w-[200px]",children:V.name}),a.jsxs("div",{className:"text-xs text-muted",children:[(V.size/1024).toFixed(1)," KB"]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>{const R=URL.createObjectURL(V);window.open(R,"_blank")},className:"p-1.5 text-primary hover:bg-primary/10 rounded-md transition-colors",title:A.viewFile,children:a.jsx(Ir,{size:16})}),a.jsx("button",{onClick:Y,className:"p-1.5 text-muted hover:text-destructive hover:bg-destructive/10 rounded-md transition-colors",children:a.jsx(xt,{size:16})})]})]}):u.proofFileName?a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 bg-surface/50 border border-dashed border-border rounded-lg p-3 max-w-md animate-in fade-in slide-in-from-left-2",children:[a.jsxs("div",{className:"flex items-center gap-3 opacity-70 overflow-hidden",children:[a.jsx(os,{className:"text-muted flex-shrink-0",size:20}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:u.proofFileName}),a.jsx("p",{className:"text-xs text-muted truncate",children:A.storedOnOriginalDevice})]})]}),a.jsxs("label",{className:"cursor-pointer p-1.5 hover:bg-white/10 rounded-md text-primary transition-colors text-xs flex items-center gap-1 flex-shrink-0 self-start sm:self-auto border border-primary/20 bg-primary/5",children:[a.jsx(jr,{size:14})," ",A.reUpload,a.jsx("input",{type:"file",accept:"image/*,application/pdf",className:"hidden",onChange:q})]})]}):a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("label",{htmlFor:"proof-upload-7",className:"cursor-pointer flex items-center gap-2 px-4 py-2 bg-background border border-border hover:border-primary text-foreground rounded-lg transition-all shadow-sm active:scale-95",children:[a.jsx(jr,{size:16}),a.jsx("span",{className:"text-sm font-medium",children:A.uploadFile})]}),a.jsx("span",{className:"text-xs text-muted",children:A.uploadType})]})]}),a.jsxs("div",{className:"text-xs text-muted flex items-center gap-1.5 mt-1",children:[a.jsx(ir,{size:10,className:"text-muted"}),A.safetyNotice]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:A.notes}),a.jsx("div",{className:"pl-2",children:a.jsx("textarea",{value:u.notes,onChange:R=>C("notes",R.target.value),placeholder:"e.g. ...",className:"w-full bg-background border border-border rounded-lg px-4 py-3 text-foreground outline-none focus:ring-2 focus:ring-primary/50 min-h-[100px] resize-y"})})]})]})]}),f&&a.jsx(VA,{onClose:()=>g(!1),onSelect:H,defaultSearch:M}),x&&a.jsx(KO,{isOpen:x,onClose:()=>y(!1),courses:t,onAdd:F,searchQuery:v,setSearchQuery:N,T:A}),te&&a.jsx(zO,{candidate:te,onConfirm:ut,onCancel:()=>Ae(null),T:A}),P&&a.jsx(L,{onCancel:()=>J(!1),onManualAdd:()=>{J(!1),N(""),y(!0)},T:A}),ge&&a.jsx(Se,{isOpen:!!ge,onClose:()=>Ee(null),onConfirm:Ce,T:A})]})},YO=({candidate:r,onConfirm:e,onCancel:t,T:s})=>(k.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),Wt.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-md shadow-2xl p-6 flex flex-col gap-4 animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[a.jsx("div",{className:"mx-auto w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center text-primary mb-2",children:a.jsx(vt,{size:24,strokeWidth:3})}),a.jsx("h3",{className:"text-xl font-bold",children:s.perfectMatchFound}),a.jsx("p",{className:"text-muted text-sm",children:s.matchConfirmText})]}),a.jsxs("div",{className:"bg-surface/50 p-4 rounded-lg flex flex-col gap-2 border border-border",children:[a.jsx("div",{className:"font-bold text-center text-lg",children:r.match.name}),a.jsxs("div",{className:"flex justify-center gap-4 text-xs text-muted",children:[a.jsxs("span",{children:[r.match.credits," cr"]}),a.jsx("span",{children:""}),a.jsx("span",{children:r.match.teacher})]}),a.jsx("div",{className:"text-center text-xs text-muted/80",children:r.match.department})]}),a.jsxs("div",{className:"flex gap-3 mt-2",children:[a.jsx("button",{onClick:t,className:"flex-1 py-2.5 px-4 rounded-lg border border-border hover:bg-surface font-medium transition-colors",children:"Cancel"}),a.jsx("button",{onClick:e,className:"flex-1 py-2.5 px-4 rounded-lg bg-primary hover:bg-primary/90 text-white font-bold transition-colors shadow-lg shadow-primary/20",children:"Confirm Sync"})]})]})}),document.body)),$O=({isOpen:r,onClose:e,courses:t,onAdd:s,searchQuery:A,setSearchQuery:l,T:u})=>{if(!r)return null;const d=t.filter(f=>f.name.toLowerCase().includes(A.toLowerCase())||f.id.toLowerCase().includes(A.toLowerCase())||f.userLabels&&f.userLabels.some(g=>g.toLowerCase().includes(A.toLowerCase()))||f.originalTags&&f.originalTags.some(g=>g.toLowerCase().includes(A.toLowerCase())));return k.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),Wt.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-lg shadow-2xl max-h-[85vh] flex flex-col animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-4 border-b border-border flex justify-between items-center",children:[a.jsx("h3",{className:"font-bold text-lg",children:u.trackerTitle}),a.jsx("button",{onClick:e,children:a.jsx(xt,{size:20})})]}),a.jsx("div",{className:"p-4 border-b border-border",children:a.jsx("input",{type:"text",placeholder:"Search...",value:A,onChange:f=>l(f.target.value),autoFocus:!0,className:"w-full bg-background border border-border rounded-lg px-3 py-2 outline-none focus:ring-2 focus:ring-primary/50"})}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-2",children:[d.map(f=>a.jsxs("button",{onClick:()=>s(f),className:"w-full text-left p-3 rounded-lg hover:bg-surface/50 border border-transparent hover:border-border transition-all group flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("span",{className:"font-bold",children:f.name})}),a.jsxs("div",{className:"text-xs text-muted flex items-center gap-1",children:[a.jsxs("span",{className:"font-medium text-foreground/80",children:[f.credits," cr"]}),a.jsx("span",{children:""}),[f.teacher||(f.id&&f.id.length<20?f.id:"Custom Course"),f.department].filter(Boolean).join("  ")]})]}),a.jsx("div",{className:"p-2 bg-primary/10 text-primary rounded-full opacity-0 group-hover:opacity-100 transition-all",children:a.jsx(es,{size:16})})]},f.id)),d.length===0&&a.jsx("div",{className:"text-center p-8 text-muted",children:"No courses found"})]})]})}),document.body)},Op={department:"",minTotalCredits:"",minCoreCredits:"",targetYear:"",status:"in_progress",courses:[],proofFileName:"",notes:"",coursePlanUrl:"",coursePlanFileName:""},Pp="nsysu-interdisciplinary-course-9-data",XO={en:{referenceProcess:"Reference Process",step1:"Program Introduction",step1_sub1:"Go to About -> Find [Departmental Professional Program] -> Check Rules",step1_sub2:"Scroll down to 'Departmental Professional Program Introduction' to find your program",step1_sub3_pre:"Click ",step1_sub3_link:"'Course Plan'",step1_sub4:"Check 'Professional Module Courses', 'Interdisciplinary Electives', and 'Credit Requirements'",step2:"Add your planned/completed courses to the list below",step2_sub1:"Fill in Basic Info",step3:"ClearGrad tracks your progress in real-time",basicInfo:"Basic Info",doubleMajorDept:"Program Name",selectDept:"Select Program...",applicableYear:"Applicable Year",selectYear:"Select Year...",minTotalCredits:"Minimum Total Credits",minCoreCredits:"Professional Module Course Required Credits",totalProgress:"Total Credits Progress",externalCreditsCheck:"At least 6 credits from courses outside your Major, Minor, and Double Major departments",externalCreditsProgress:"External Credits: ",coursePlanInput:"Course Plan / Regulations",addFromTracker:"Add from Tracker",addFromCatalog:"Add from Catalog",trackerTitle:"Select from Tracker",syncBtn:"Sync",matchCourse:"Match/Sync",matchConfirmTitle:"Confirm Course Match",matchConfirmText:"We found a matching course in your tracker. Do you want to sync data from this course?",perfectMatchFound:"Perfect Match Found!",noMatchFound:"No exact match found in your tracker.",noMatchTitle:"No Match Found",noMatchDesc:"We couldn't find an exact match for this course in your tracker.",manualAdd:"Manual Add",cancel:"Cancel",confirm:"Confirm",deleteConfirmTitle:"Delete Course?",deleteConfirmText:"Are you sure you want to remove this course from your list? This action cannot be undone.",selectCourse:"Select Course",fromTracker:"From Tracker",uploadPlan:"Upload File",pasteLink:"Paste Link...",viewPlan:"View Plan",designated:"Required Courses",coreCourses:"Professional Module Courses",attachments:"Attachments",completedCourses:"Completed Courses",plannedCourses:"Planned Courses",badgeCompleted:"Completed",badgePlanned:"Planned",addCourse:"Add Course",elective:"Interdisciplinary Electives",minCredits:"Min Credits:",sectionComplete:"Section Complete!",courseName:"Course Name",typeToAdd:"Type to add course...",credit:"Credit",pleaseFill:'Please fill in "Min Credits" to track progress.',pleaseFillTotal:'Please fill in "Minimum Total Credits" to track progress.',officialRegulations:"Reference",status:"Status",statusPlanned:"Planned",statusInProgress:"In Progress",statusPending:"Pending Approval",statusCompleted:"Approved",creditWarning:"Completion of credit requirements does not imply official approval.",proofSection:"Approval / Proof (optional)",proofStatus:"Status:",notSubmitted:"Not Submitted",submitted:"Submitted",approved:"Approved",uploadOrLink:"Upload or Paste Link:",uploadType:"Approval Letter / System Screenshot",notes:"Notes (Optional)",viewFile:"View Attached File",uploadFile:"Upload File",safetyNotice:"Files are stored locally in your browser and are not uploaded to any server.",confirmRemove:"Are you sure you want to remove this file?",storedOnOriginalDevice:"Stored on original upload device",reUpload:"Re-upload"},zh:{referenceProcess:"",step1:"",step1_sub1:" ()",step1_sub2:"",step1_sub3_pre:"",step1_sub3_link:"",step1_sub4:"()",step2:"",step2_sub1:"",step3:"ClearGrad ",basicInfo:"",doubleMajorDept:"",selectDept:"...",applicableYear:"",selectYear:"...",minTotalCredits:"",minCoreCredits:"",totalProgress:"",externalCreditsCheck:" 6 ",externalCreditsProgress:"",coursePlanInput:" / ",addFromTracker:"",addFromCatalog:"",trackerTitle:"",syncBtn:"",matchCourse:"/",matchConfirmTitle:"",matchConfirmText:"",perfectMatchFound:"",noMatchFound:"",noMatchTitle:"",noMatchDesc:"",manualAdd:"",cancel:"",confirm:"",deleteConfirmTitle:"",deleteConfirmText:"",selectCourse:"",fromTracker:"",uploadPlan:"",pasteLink:"...",viewPlan:"",attachments:"",designated:"",coreCourses:"",completedCourses:"",plannedCourses:"",badgeCompleted:"",badgePlanned:"",addCourse:"",elective:"",minCredits:"",sectionComplete:"",courseName:"",typeToAdd:"...",credit:"",pleaseFill:"",pleaseFillTotal:"",officialRegulations:"",status:"",statusPlanned:"",statusInProgress:"",statusPending:"",statusCompleted:"",creditWarning:"",proofSection:"",proofStatus:"",notSubmitted:"",submitted:"",approved:"",uploadOrLink:"",uploadType:" / ",notes:"",viewFile:"",uploadFile:"",safetyNotice:"",confirmRemove:"",storedOnOriginalDevice:"",reUpload:""}},JO=({onStatusChange:r,userProfile:e,courses:t=[]})=>{const{language:s}=At(),A=XO[s==="zh"?"zh":"en"],{semesters:l}=oa(),[u,d]=k.useState(()=>{const he=localStorage.getItem(Pp);if(he)try{const R=JSON.parse(he);if(!Array.isArray(R.courses)){const Z=[];R.designatedRequired?.courses&&Z.push(...R.designatedRequired.courses),R.electiveRequired?.courses&&Z.push(...R.electiveRequired.courses),R.courses=Z,R.courses.length===0&&(R.courses=Op.courses)}return R}catch(R){return console.error("Failed to parse saved data",R),Op}return Op}),[f,g]=k.useState(!1),[x,y]=k.useState(!1),[v,N]=k.useState(""),[M,S]=k.useState(""),[V,K]=k.useState(null),[G,z]=k.useState(null);k.useEffect(()=>{na("interdisciplinary_course_9_proof").then(he=>{he&&K(he)}),na("interdisciplinary_course_9_course_plan").then(he=>{he&&z(he)})},[]);const q=async he=>{if(he.target.files&&he.target.files[0]){const R=he.target.files[0];await Tn("interdisciplinary_course_9_proof",R),K(R),C("proofFileName",R.name)}},$=async he=>{if(he.target.files&&he.target.files[0]){const R=he.target.files[0];await Tn("interdisciplinary_course_9_course_plan",R),z(R),C("coursePlanFileName",R.name)}},Y=async()=>{window.confirm(A.confirmRemove)&&(await aa("interdisciplinary_course_9_proof"),K(null),C("proofFileName",""))},E=async()=>{window.confirm(A.confirmRemove)&&(await aa("interdisciplinary_course_9_course_plan"),z(null),C("coursePlanFileName",""))};k.useEffect(()=>{const he=localStorage.getItem(Pp),R=JSON.stringify(u);he!==R&&localStorage.setItem(Pp,R)},[u]);const _=l.map(he=>{if(he.length===4){const R=he.substring(0,3),Z=he.substring(3);return Z==="3"?`${R}-Summer`:`${R}-${Z}`}return he}),C=(he,R)=>{d(Z=>({...Z,[he]:R}))},D=(he,R,Z)=>{d(de=>{const pe=[...de.courses],ze=pe.findIndex(Je=>Je.id===he);if(ze===-1)return de;const it={...pe[ze],[R]:Z};return pe[ze]=it,{...de,courses:pe}})},j=(he="core")=>{d(R=>({...R,courses:[...R.courses,{id:UA(),name:"",credits:"",completed:!1,isAutoCreated:!1,category:he}]}))},Q=he=>{d(R=>({...R,courses:R.courses.filter(Z=>Z.id!==he)}))},U=()=>{const he=u.courses.filter(Z=>Z.completed).reduce((Z,de)=>Z+(parseFloat(de.credits)||0),0),R=parseFloat(u.minTotalCredits)||0;return{total:he,target:R}},T=()=>{const he=u.courses.filter(Z=>Z.completed&&(Z.category==="core"||!Z.category)).reduce((Z,de)=>Z+(parseFloat(de.credits)||0),0),R=parseFloat(u.minCoreCredits)||0;return{total:he,target:R}};k.useEffect(()=>{if(!r)return;const he=U(),R=T(),Z=he.target>0&&he.total>=he.target,de=R.target>0?R.total>=R.target:!0;r(Z&&de)},[u,r,e]);const W=he=>{if(u.courses.some(de=>de.name===he.name&&de.credits===he.credit.toString())){alert("This course is already in the list!");return}const Z={id:UA(),name:he.name,credits:he.credit.toString(),completed:!1,isAutoCreated:!1,category:J.current,department:he.department,fromCatalog:!0};d(de=>({...de,courses:[...de.courses,Z]})),g(!1)},H=he=>{if(u.courses.some(de=>de.name===he.name&&de.credits===he.credits.toString())){alert("This course is already in the list!");return}const Z={id:UA(),name:he.name,credits:he.credits.toString(),completed:!0,isAutoCreated:!1,category:J.current,department:he.department,fromCatalog:!0};d(de=>({...de,courses:[...de.courses,Z]})),y(!1)},F=({onCancel:he,onManualAdd:R,T:Z})=>(k.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),Wt.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-sm shadow-2xl p-6 flex flex-col gap-4 animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[a.jsx("div",{className:"mx-auto w-12 h-12 bg-orange-500/10 rounded-full flex items-center justify-center text-orange-500 mb-2",children:a.jsx(ir,{size:24,strokeWidth:3})}),a.jsx("h3",{className:"text-xl font-bold",children:Z.noMatchTitle}),a.jsx("p",{className:"text-muted text-sm text-center",children:Z.noMatchDesc})]}),a.jsxs("div",{className:"flex gap-3 mt-2",children:[a.jsx("button",{onClick:he,className:"flex-1 py-2.5 px-4 rounded-lg border border-border hover:bg-surface font-medium transition-colors",children:Z.cancel}),a.jsx("button",{onClick:R,className:"flex-1 py-2.5 px-4 rounded-lg bg-primary hover:bg-primary/90 text-white font-bold transition-colors shadow-lg shadow-primary/20",children:Z.manualAdd})]})]})}),document.body)),[L,te]=k.useState(null),[Ae,P]=k.useState(!1),J=k.useRef("core"),[le,ge]=k.useState(null),Ee=()=>{le&&(Q(le.id),ge(null))},Ce=({isOpen:he,onClose:R,onConfirm:Z,T:de})=>(k.useEffect(()=>(he&&(document.body.style.overflow="hidden"),()=>{document.body.style.overflow="auto"}),[he]),he?Wt.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-sm shadow-2xl p-6 flex flex-col gap-4 animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[a.jsx("div",{className:"mx-auto w-12 h-12 bg-destructive/10 rounded-full flex items-center justify-center text-destructive mb-2",children:a.jsx(ir,{size:24,strokeWidth:3})}),a.jsx("h3",{className:"text-xl font-bold",children:de.deleteConfirmTitle}),a.jsx("p",{className:"text-muted text-sm text-center",children:de.deleteConfirmText})]}),a.jsxs("div",{className:"flex gap-3 mt-2",children:[a.jsx("button",{onClick:R,className:"flex-1 py-2.5 px-4 rounded-lg border border-border hover:bg-surface font-medium transition-colors",children:de.cancel}),a.jsx("button",{onClick:Z,className:"flex-1 py-2.5 px-4 rounded-lg bg-red-500 hover:bg-red-600 text-white font-bold transition-colors shadow-lg shadow-red-500/20",children:de.confirm})]})]})}),document.body):null),Se=()=>{if(!L)return;const{item:he,match:R}=L;D(he.id,"completed",!0),D(he.id,"credits",R.credits.toString()),D(he.id,"department",R.department),D(he.id,"fromCatalog",!0),te(null)},ut=he=>{const R=t.find(Z=>Z.id===he.id||Z.name===he.name&&Z.credits.toString()===he.credits);R?te({item:he,match:R}):P(!0)},qe=({item:he})=>a.jsxs("div",{className:"group relative bg-surface hover:bg-surface/80 transition-all p-3 rounded-lg border border-border shadow-sm flex flex-col gap-2",children:[a.jsxs("div",{className:"flex justify-between items-start gap-2",children:[a.jsx("input",{type:"text",value:he.name,disabled:he.fromCatalog,placeholder:A.courseName,onChange:R=>D(he.id,"name",R.target.value),className:`bg-transparent border-none text-sm font-semibold text-foreground placeholder-muted w-full focus:outline-none focus:ring-1 focus:ring-primary/50 rounded px-1 -ml-1 ${he.fromCatalog?"opacity-80 cursor-not-allowed":""}`}),a.jsx("button",{onClick:()=>ge(he),className:"text-muted hover:text-destructive p-1 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(jn,{size:14})})]}),a.jsxs("div",{className:"flex justify-between items-end",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("input",{type:"text",value:he.credits,disabled:he.fromCatalog,placeholder:"0",onChange:R=>/^\d*\.?\d*$/.test(R.target.value)&&D(he.id,"credits",R.target.value),className:`w-8 bg-transparent text-xs font-bold text-center border-b border-border focus:border-primary outline-none ${he.fromCatalog?"opacity-80 cursor-not-allowed border-transparent":""}`}),a.jsx("span",{className:"text-[10px] text-muted",children:A.credit})]}),a.jsxs("div",{className:"flex gap-1",children:[!he.completed&&a.jsxs("button",{onClick:()=>ut(he),className:"text-[10px] px-2 py-1 rounded bg-surface border border-border hover:bg-surface/80 flex items-center gap-1",title:A.matchCourse,children:[a.jsx(Ir,{size:10})," ",A.syncBtn]}),a.jsx("div",{className:`text-[10px] px-2 py-1 rounded-full font-bold border transition-colors select-none ${he.completed?"bg-emerald-500/10 text-emerald-500 border-emerald-500/20":"bg-blue-500/10 text-blue-500 border-blue-500/20"}`,children:he.completed?A.badgeCompleted:A.badgePlanned})]})]})]}),Gt=({title:he,category:R})=>{const Z=u.courses.filter(De=>R==="core"?De.category==="core"||!De.category:De.category==="elective"),de=Z.filter(De=>De.completed),pe=Z.filter(De=>!De.completed),ze=R==="elective"?"text-orange-500":"text-primary",it=R==="elective"?"bg-orange-500 hover:bg-orange-600":"bg-primary hover:bg-primary/90",Je=R==="elective"?"bg-orange-400":"bg-emerald-500";return a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:`text-lg font-bold flex items-center gap-2 ${ze}`,children:he}),a.jsxs("div",{className:"flex gap-2",children:[R==="core"&&null,a.jsxs("button",{onClick:()=>j(R),className:`flex items-center gap-1.5 px-3 py-1.5 text-white text-xs font-medium rounded-lg transition-colors ${it}`,children:[a.jsx(es,{size:14}),A.addCourse]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between pb-2 border-b border-border",children:[a.jsxs("h4",{className:"font-bold text-foreground text-sm flex items-center gap-2",children:[a.jsx("span",{className:`w-2 h-2 rounded-full ${Je}`}),A.completedCourses]}),a.jsxs("div",{className:"flex gap-2 items-center",children:[a.jsxs("button",{onClick:()=>{let De=u.department;const Ue=De.match(/(.+?)(?=\()/);Ue&&(De=Ue[1]),N(De),J.current=R,y(!0)},className:"text-[10px] text-primary hover:underline flex items-center gap-1",children:[a.jsx(rr,{size:10})," ",A.addFromTracker]}),a.jsxs("span",{className:"text-xs text-muted",children:[de.length," items"]})]})]}),a.jsxs("div",{className:"space-y-2 min-h-[100px]",children:[de.map(De=>a.jsx(qe,{item:De},De.id)),de.length===0&&a.jsx("div",{className:"text-center text-muted text-xs py-8 border border-dashed border-border rounded-lg",children:"No completed courses"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between pb-2 border-b border-border",children:[a.jsxs("h4",{className:"font-bold text-foreground text-sm flex items-center gap-2",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"}),A.plannedCourses]}),a.jsxs("div",{className:"flex gap-2 items-center",children:[a.jsxs("button",{onClick:()=>{let De=u.department;const Ue=De.match(/(.+?)(?=\()/);Ue&&(De=Ue[1]),S(De),J.current=R,g(!0)},className:"text-[10px] text-blue-500 hover:underline flex items-center gap-1",children:[a.jsx(rr,{size:10})," ",A.addFromCatalog]}),a.jsxs("span",{className:"text-xs text-muted",children:[pe.length," items"]})]})]}),a.jsxs("div",{className:"space-y-2 min-h-[100px]",children:[pe.map(De=>a.jsx(qe,{item:De},De.id)),pe.length===0&&a.jsx("div",{className:"text-center text-muted text-xs py-8 border border-dashed border-border rounded-lg",children:"No planned courses"})]})]})]})]})},Nt=U();return a.jsxs("div",{className:"space-y-8 max-w-3xl mx-auto animate-in fade-in zoom-in-95 duration-300 pb-20",children:[a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary flex items-center gap-2",children:[a.jsx(rr,{size:20}),A.referenceProcess]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"pt-0.5",children:a.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-xs font-bold text-primary",children:"1"})}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("div",{className:"flex items-center gap-2 font-medium text-foreground",children:a.jsxs("a",{href:"https://ctdr.nsysu.edu.tw/class2.php",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-primary hover:underline underline-offset-4",children:[A.step1,a.jsx(Ir,{size:14})]})}),a.jsxs("ul",{className:"text-sm text-muted list-disc list-inside space-y-0.5 pl-1",children:[a.jsx("li",{children:A.step1_sub1}),a.jsx("li",{children:A.step1_sub2}),a.jsxs("li",{children:[A.step1_sub3_pre,a.jsx("span",{className:"underline decoration-primary/50 underline-offset-2",children:A.step1_sub3_link})]}),a.jsx("li",{children:A.step1_sub4})]})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"pt-0.5",children:a.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-xs font-bold text-primary",children:"2"})}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("div",{className:"font-medium text-foreground",children:A.step2}),a.jsx("ul",{className:"text-sm text-muted list-disc list-inside space-y-0.5 pl-1",children:a.jsx("li",{children:A.step2_sub1})})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"pt-0.5",children:a.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-xs font-bold text-primary",children:"3"})}),a.jsxs("div",{className:"font-medium text-foreground flex items-center gap-2",children:[A.step3,a.jsx(vt,{size:16,className:"text-primary"})]})]})]})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary flex items-center gap-2",children:[a.jsx(rr,{size:20}),A.basicInfo]}),a.jsxs("a",{href:"https://oaa.nsysu.edu.tw/static/file/3/1003/attach/20/pta_232069_5443563_94211.pdf",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 px-3 py-1.5 bg-primary/10 hover:bg-primary/20 text-primary text-xs font-medium rounded-lg transition-colors",children:[A.officialRegulations,a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),a.jsx("polyline",{points:"15 3 21 3 21 9"}),a.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:A.doubleMajorDept}),a.jsxs("select",{value:u.department,onChange:he=>C("department",he.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50",children:[a.jsx("option",{value:"",children:A.selectDept}),a.jsx("optgroup",{label:"() (Departmental Professional Programs)",children:MO.map(he=>a.jsx("option",{value:he,children:he},he))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:A.applicableYear}),a.jsxs("select",{value:u.targetYear,onChange:he=>C("targetYear",he.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50",children:[a.jsx("option",{value:"",children:A.selectYear}),_.map(he=>a.jsx("option",{value:he,children:he},he))]})]}),a.jsxs("div",{className:"md:col-span-2 grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:A.minTotalCredits}),a.jsx("input",{type:"text",value:u.minTotalCredits,onChange:he=>/^\d*$/.test(he.target.value)&&C("minTotalCredits",he.target.value),placeholder:"e.g. 15",className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:A.minCoreCredits}),a.jsx("input",{type:"text",value:u.minCoreCredits||"",onChange:he=>/^\d*$/.test(he.target.value)&&C("minCoreCredits",he.target.value),placeholder:"e.g. 9",className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50"})]})]}),a.jsxs("div",{className:"md:col-span-2 pt-2 border-t border-border/50",children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-2",children:A.coursePlanInput}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("input",{type:"text",value:u.coursePlanUrl||"",onChange:he=>C("coursePlanUrl",he.target.value),placeholder:A.pasteLink,className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground text-sm outline-none focus:ring-2 focus:ring-primary/50"}),u.coursePlanUrl&&a.jsxs("a",{href:u.coursePlanUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-primary hover:underline mt-1 flex items-center gap-1",children:[a.jsx(Ir,{size:10}),A.viewPlan]})]}),a.jsxs("div",{children:[a.jsx("input",{type:"file",id:"course-plan-upload",className:"hidden",accept:"image/*,.pdf",onChange:$}),G?a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-primary/5 border border-primary/20 rounded-lg",children:[a.jsx("div",{className:"p-1.5 bg-primary/10 rounded-full text-primary",children:a.jsx(os,{size:14})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsx("div",{className:"text-sm font-medium text-foreground truncate",children:G.name})}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>{const he=URL.createObjectURL(G);window.open(he,"_blank")},className:"p-1 text-primary hover:bg-primary/10 rounded transition-colors",title:A.viewFile,children:a.jsx(Ir,{size:14})}),a.jsx("button",{onClick:E,className:"p-1 text-muted hover:text-destructive hover:bg-destructive/10 rounded transition-colors",children:a.jsx(xt,{size:14})})]})]}):a.jsxs("label",{htmlFor:"course-plan-upload",className:"cursor-pointer flex items-center justify-center gap-2 px-4 py-2 bg-background border border-border hover:border-primary text-foreground rounded-lg transition-all shadow-sm active:scale-95 text-sm",children:[a.jsx(jr,{size:14}),A.uploadPlan]})]})]})]})]})]}),a.jsxs("div",{className:"bg-surface/50 p-4 rounded-xl border border-border",children:[Nt.target>0?a.jsxs(a.Fragment,{children:[a.jsx(ur,{label:A.totalProgress,current:Nt.total,total:Nt.target,color:"bg-primary",variant:"l"}),a.jsx("div",{className:"flex justify-end mt-1",children:a.jsxs("span",{className:"text-xs text-muted flex items-center gap-1",children:[a.jsx(ir,{size:12}),A.creditWarning]})})]}):a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("span",{className:"font-medium text-foreground text-lg mb-1",children:A.totalProgress}),a.jsxs("div",{className:"text-sm text-orange-500 font-medium flex items-center gap-2 bg-orange-500/10 p-2 rounded",children:[a.jsx("span",{className:"text-lg",children:"!"})," ",A.pleaseFillTotal]})]}),T().target>0&&a.jsx("div",{className:"mt-4 pt-4 border-t border-border/50",children:a.jsx(ur,{label:A.minCoreCredits,current:T().total,total:T().target,color:"bg-emerald-500",variant:"l"})})]}),a.jsx(Gt,{title:A.coreCourses,category:"core"}),a.jsx(Gt,{title:A.elective,category:"elective"}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary border-b border-border/50 pb-2 flex items-center gap-2",children:[a.jsx(jr,{size:20}),A.attachments," & ",A.notes]}),a.jsxs("div",{className:"flex flex-col gap-8",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:A.uploadOrLink}),a.jsxs("div",{className:"space-y-3 pl-2",children:[a.jsxs("div",{children:[a.jsx("input",{type:"file",id:"proof-upload-7",className:"hidden",accept:"image/*,.pdf",onChange:q}),V?a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-primary/5 border border-primary/20 rounded-lg animate-in fade-in slide-in-from-left-2",children:[a.jsx("div",{className:"p-2 bg-primary/10 rounded-full text-primary",children:a.jsx(os,{size:18})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm font-medium text-foreground truncate max-w-[200px]",children:V.name}),a.jsxs("div",{className:"text-xs text-muted",children:[(V.size/1024).toFixed(1)," KB"]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>{const he=URL.createObjectURL(V);window.open(he,"_blank")},className:"p-1.5 text-primary hover:bg-primary/10 rounded-md transition-colors",title:A.viewFile,children:a.jsx(Ir,{size:16})}),a.jsx("button",{onClick:Y,className:"p-1.5 text-muted hover:text-destructive hover:bg-destructive/10 rounded-md transition-colors",children:a.jsx(xt,{size:16})})]})]}):u.proofFileName?a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 bg-surface/50 border border-dashed border-border rounded-lg p-3 max-w-md animate-in fade-in slide-in-from-left-2",children:[a.jsxs("div",{className:"flex items-center gap-3 opacity-70 overflow-hidden",children:[a.jsx(os,{className:"text-muted flex-shrink-0",size:20}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:u.proofFileName}),a.jsx("p",{className:"text-xs text-muted truncate",children:A.storedOnOriginalDevice})]})]}),a.jsxs("label",{className:"cursor-pointer p-1.5 hover:bg-white/10 rounded-md text-primary transition-colors text-xs flex items-center gap-1 flex-shrink-0 self-start sm:self-auto border border-primary/20 bg-primary/5",children:[a.jsx(jr,{size:14})," ",A.reUpload,a.jsx("input",{type:"file",accept:"image/*,application/pdf",className:"hidden",onChange:q})]})]}):a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("label",{htmlFor:"proof-upload-7",className:"cursor-pointer flex items-center gap-2 px-4 py-2 bg-background border border-border hover:border-primary text-foreground rounded-lg transition-all shadow-sm active:scale-95",children:[a.jsx(jr,{size:16}),a.jsx("span",{className:"text-sm font-medium",children:A.uploadFile})]}),a.jsx("span",{className:"text-xs text-muted",children:A.uploadType})]})]}),a.jsxs("div",{className:"text-xs text-muted flex items-center gap-1.5 mt-1",children:[a.jsx(ir,{size:10,className:"text-muted"}),A.safetyNotice]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:A.notes}),a.jsx("div",{className:"pl-2",children:a.jsx("textarea",{value:u.notes,onChange:he=>C("notes",he.target.value),placeholder:"e.g. ...",className:"w-full bg-background border border-border rounded-lg px-4 py-3 text-foreground outline-none focus:ring-2 focus:ring-primary/50 min-h-[100px] resize-y"})})]})]})]}),f&&a.jsx(VA,{onClose:()=>g(!1),onSelect:W,defaultSearch:M}),x&&a.jsx($O,{isOpen:x,onClose:()=>y(!1),courses:t,onAdd:H,searchQuery:v,setSearchQuery:N,T:A}),L&&a.jsx(YO,{candidate:L,onConfirm:Se,onCancel:()=>te(null),T:A}),Ae&&a.jsx(F,{onCancel:()=>P(!1),onManualAdd:()=>{P(!1),N(""),y(!0)},T:A}),le&&a.jsx(Ce,{isOpen:!!le,onClose:()=>ge(null),onConfirm:Ee,T:A})]})},WO={en:{title:"Micro-credits",desc:"Track accumulation of micro-credits. Max 1 credit per semester counts towards graduation (Total Max: 6).",basicInfo:"Targets",minTotalCredits:"Target Total Credits",totalProgress:"Effective Progress",addCourse:"Add Item",courseName:"Name / Activity",hours:"Hours",credit:"Credit",completed:"Approved!",pending:"In Progress",deleteConfirmTitle:"Delete Item?",deleteConfirmText:"Are you sure you want to remove this item?",cancel:"Cancel",confirm:"Confirm",notes:"Notes",pleaseFill:"Set a target to track progress.",completedItems:"Completed Items",semTotal:"Sem Total:",effective:"Effective:",semester:"Semester",selectSem:"Select...",ruleWarning:"Need official approval every year.",maxPerSemWarning:"Max 1 credit/semester counts.",officialApproval:"Official Approval Required",semExists:"Semester already exists!"},zh:{title:"",desc:" 1  6 ",basicInfo:"",minTotalCredits:"",totalProgress:"",addCourse:"",courseName:" / ",hours:"",credit:"",completed:"",pending:"",deleteConfirmTitle:"",deleteConfirmText:"",cancel:"",confirm:"",notes:"",pleaseFill:"",completedItems:"",semTotal:"",effective:"",semester:"",selectSem:"...",ruleWarning:"",maxPerSemWarning:" 1 ",officialApproval:"",semExists:""}},ZO=({isOpen:r,onClose:e,onConfirm:t,language:s,T:A,existingSemesters:l})=>{const[u,d]=k.useState(String(new Date().getFullYear()-1911)),[f,g]=k.useState("1");if(k.useEffect(()=>{r&&(d(String(new Date().getFullYear()-1911)),g("Summer"))},[r]),!r)return null;let x="";f==="1"||f==="2"?x=`${u}-${f}`:x=`${u}-${f==="Summer"?"Summer()":"Winter()"}`;const y=l.some(v=>v===x);return Wt.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-sm shadow-2xl p-6 flex flex-col gap-4 animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[a.jsx("div",{className:"mx-auto w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center text-primary mb-2",children:a.jsx(es,{size:24,strokeWidth:3})}),a.jsx("h3",{className:"text-xl font-bold",children:s==="zh"?"":"Add Semester"}),a.jsx("p",{className:"text-muted text-sm text-center",children:s==="zh"?"":"Enter year and select semester type"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-bold text-muted uppercase mb-1 block",children:s==="zh"?"":"Year"}),a.jsx("input",{type:"number",value:u,onChange:v=>d(v.target.value),className:"w-full bg-surface border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary font-mono",autoFocus:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-bold text-muted uppercase mb-1 block",children:s==="zh"?"":"Semester"}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:f,onChange:v=>g(v.target.value),className:"w-full appearance-none bg-surface border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary font-bold cursor-pointer",children:[a.jsx("option",{value:"Summer",children:s==="zh"?"":"Summer"}),a.jsx("option",{value:"1",children:s==="zh"?"":"Fall(sem 1)"}),a.jsx("option",{value:"Winter",children:s==="zh"?"":"Winter"}),a.jsx("option",{value:"2",children:s==="zh"?"":"Spring(sem 2)"})]}),a.jsx(pu,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted pointer-events-none",size:16})]})]}),y&&a.jsxs("div",{className:"flex items-center gap-2 text-destructive text-sm font-bold justify-center bg-destructive/10 p-2 rounded",children:[a.jsx(ir,{size:16}),A.semExists]})]}),a.jsxs("div",{className:"flex gap-3 mt-2",children:[a.jsx("button",{onClick:e,className:"flex-1 py-2.5 px-4 rounded-lg border border-border hover:bg-surface font-medium transition-colors",children:A.cancel}),a.jsx("button",{onClick:()=>t(u,f),disabled:!u||y,className:"flex-1 py-2.5 px-4 rounded-lg bg-primary hover:bg-primary/90 text-white font-bold transition-colors shadow-lg shadow-primary/20 disabled:opacity-50 disabled:cursor-not-allowed",children:A.confirm})]})]})}),document.body)},e6=({onStatusChange:r,userProfile:e})=>{const{language:t}=At(),s=WO[t==="zh"?"zh":"en"],A=e?.entranceYear||113,[l,u]=k.useState(()=>{const H=localStorage.getItem(Oc);if(H)try{const F=JSON.parse(H);if(F.courses){const L=vx(A)[0];F.courses=F.courses.map(te=>{let Ae=te.semester||L||"Unknown";return(/^\d+$/.test(Ae)||/^\d+-\d+$/.test(Ae))&&(Ae=L),{...te,semester:Ae}})}return{...Wo,...F}}catch(F){return console.error("Failed to parse micro-credits data",F),Wo}return Wo}),{effectiveStats:d,grandTotalEffective:f,sortedSemesters:g,activeSemesters:x,rawStats:y}=V0(l,A),[v,N]=k.useState(null),[M,S]=k.useState(null),[V,K]=k.useState({}),[G,z]=k.useState([]),[q,$]=k.useState(!1);k.useEffect(()=>{const H=localStorage.getItem(Oc),F=JSON.stringify(l);H!==F&&(localStorage.setItem(Oc,F),window.dispatchEvent(new Event("micro-credits-updated")))},[l]);const Y=l.courses.reduce((H,F)=>{const L=F.semester||"Unknown";return H[L]||(H[L]=[]),H[L].push(F),H},{}),E=parseFloat(l.minTotalCredits)||0;k.useEffect(()=>{if(!r)return;const H=E>0&&f>=E;r(H)},[f,E,r]);const _=H=>{const F={id:UA(),name:"",credits:"",hours:"",completed:!1,semester:H};u(L=>({...L,courses:[...L.courses,F]})),K(L=>({...L,[H]:!0}))},C=(H,F,L)=>{u(te=>({...te,courses:te.courses.map(Ae=>Ae.id===H?{...Ae,[F]:L}:Ae)}))},D=()=>{v&&(u(H=>({...H,courses:H.courses.filter(F=>F.id!==v.id)})),N(null))},j=H=>{K(F=>({...F,[H]:!F[H]}))},Q=(H,F)=>{if(!H||isNaN(parseInt(H)))return;let L="";F==="1"||F==="2"?L=`${H}-${F}`:L=`${H}-${F==="Summer"?"Summer()":"Winter()"}`,x.includes(L)||(u(te=>{const Ae=te.deletedSemesters||[],P=te.manualSemesters||[],J=Ae.filter(Ee=>Ee!==L);let le=P;const ge=vx(A);return!P.includes(L)&&!ge.includes(L)&&(le=[...P,L]),{...te,manualSemesters:le,deletedSemesters:J}}),z([L]),setTimeout(()=>z([]),2e3)),$(!1)},U=()=>{M&&(u(H=>({...H,manualSemesters:(H.manualSemesters||[]).filter(F=>F!==M),deletedSemesters:[...H.deletedSemesters||[],M],courses:H.courses.filter(F=>F.semester!==M)})),S(null))},T=H=>{S(H)},W=()=>{if(!v&&!M)return null;const H=!!M,F=H?t==="zh"?"":"Delete Semester?":s.deleteConfirmTitle,L=H?t==="zh"?" ()":"Are you sure you want to remove this semester? (All items will be deleted)":s.deleteConfirmText,te=H?U:D,Ae=H?()=>S(null):()=>N(null);return Wt.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-sm shadow-2xl p-6 flex flex-col gap-4 animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[a.jsx("div",{className:"mx-auto w-12 h-12 bg-destructive/10 rounded-full flex items-center justify-center text-destructive mb-2",children:a.jsx(ir,{size:24,strokeWidth:3})}),a.jsx("h3",{className:"text-xl font-bold",children:F}),a.jsx("p",{className:"text-muted text-sm text-center",children:L})]}),a.jsxs("div",{className:"flex gap-3 mt-2",children:[a.jsx("button",{onClick:Ae,className:"flex-1 py-2.5 px-4 rounded-lg border border-border hover:bg-surface font-medium transition-colors",children:s.cancel}),a.jsx("button",{onClick:te,className:"flex-1 py-2.5 px-4 rounded-lg bg-red-500 hover:bg-red-600 text-white font-bold transition-colors shadow-lg shadow-red-500/20",children:s.confirm})]})]})}),document.body)};return a.jsxs("div",{className:"w-full max-w-4xl mx-auto space-y-8 animate-in fade-in zoom-in-95 duration-300 pb-20 px-1",children:[a.jsx(W,{}),a.jsx(ZO,{isOpen:q,onClose:()=>$(!1),onConfirm:Q,language:t,T:s,existingSemesters:x}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("h2",{className:"text-2xl font-bold text-foreground",children:s.title}),a.jsxs("div",{className:"flex items-start gap-2 text-muted text-sm bg-blue-500/10 p-3 rounded-lg border border-blue-500/20",children:[a.jsx(ir,{size:16,className:"mt-0.5 text-blue-500 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("p",{children:s.desc}),a.jsx("p",{className:"text-blue-400 mt-1 font-bold",children:s.ruleWarning})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"md:col-span-1 bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsx("h3",{className:"text-sm font-bold text-primary uppercase tracking-wider mb-4 flex items-center gap-2",children:s.basicInfo}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1.5",children:s.minTotalCredits}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",value:l.minTotalCredits,onChange:H=>{const F=H.target.value;/^\d*\.?\d*$/.test(F)&&(F===""||parseFloat(F)<=6)&&u(L=>({...L,minTotalCredits:F}))},placeholder:"6.0",className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary font-mono"}),a.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-muted font-bold",children:"Cr (Max 6)"})]})]})]}),a.jsxs("div",{className:"md:col-span-2 bg-surface/50 p-6 rounded-xl border border-border flex flex-col justify-center",children:[a.jsx("h3",{className:"text-sm font-bold text-primary uppercase tracking-wider mb-4",children:s.totalProgress}),a.jsxs("div",{className:"flex items-end gap-2 mb-2",children:[a.jsx("span",{className:`text-4xl font-bold font-mono ${E>0&&f>=E?"text-emerald-500":"text-foreground"}`,children:f}),a.jsxs("span",{className:"text-lg text-muted mb-1 font-mono",children:["/ ",E||"-"]})]}),E>0?a.jsx(ur,{label:"",current:f,total:E,color:f>=E?"bg-emerald-500":"bg-primary"}):a.jsx("div",{className:"text-sm text-muted",children:s.pleaseFill})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{onClick:()=>$(!0),className:"text-xs flex items-center gap-1 text-primary hover:text-primary/80 transition-colors font-bold bg-primary/5 px-3 py-1.5 rounded-lg border border-primary/10",children:[a.jsx(es,{size:14}),t==="zh"?"":"Add Year"]})}),g.map(H=>{const F=Y[H]||[],L=y[H]||0,te=d[H]||0,Ae=!!V[H],P=G.includes(H);return a.jsxs("div",{className:`
                                    bg-surface/50 rounded-xl border overflow-hidden transition-all duration-500
                                    ${P?"border-primary shadow-[0_0_15px_rgba(var(--primary-rgb),0.3)] scale-[1.01]":"border-border"}
                                `,children:[a.jsxs("div",{className:"group p-4 flex items-center justify-between cursor-pointer hover:bg-surface/80 transition-colors",onClick:()=>j(H),children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`p-1 rounded bg-surface border border-border transition-transform ${Ae?"rotate-90":""}`,children:a.jsx(q2,{size:14})}),a.jsx("h3",{className:"font-bold text-foreground w-40 shrink-0",children:(()=>{if(H.includes("Summer")||H.includes("")){const J=H.split("-")[0];return t==="zh"?`${J}-`:`${J}-Summer`}if(H.includes("Winter")||H.includes("")){const J=H.split("-")[0];return t==="zh"?`${J}-`:`${J}-Winter`}if(H.endsWith("-1")){const J=H.split("-")[0];return t==="zh"?`${J}-`:`${J}-Fall`}if(H.endsWith("-2")){const J=H.split("-")[0];return t==="zh"?`${J}-`:`${J}-Spring`}return H})()}),a.jsxs("div",{className:"flex items-center gap-2 text-xs ml-auto sm:ml-2",children:[a.jsxs("span",{className:"text-muted",children:[s.semTotal," ",a.jsx("span",{className:"font-mono font-bold text-foreground",children:L.toFixed(1)})]}),a.jsx("span",{className:"text-muted",children:"/"}),a.jsxs("span",{className:`${te<L?"text-orange-400":"text-emerald-500"}`,children:[s.effective," ",a.jsx("span",{className:"font-mono font-bold",children:te.toFixed(1)})]}),te<L&&a.jsx("span",{className:"text-[10px] bg-orange-500/10 text-orange-400 px-1.5 py-0.5 rounded border border-orange-500/20 hidden sm:inline-block",children:s.maxPerSemWarning})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:J=>{J.stopPropagation(),T(H)},className:"text-muted hover:text-destructive p-1.5 rounded hover:bg-surface transition-colors opacity-0 group-hover:opacity-100 duration-200",title:"Delete Semester",children:a.jsx(jn,{size:16})}),a.jsx("button",{onClick:J=>{J.stopPropagation(),_(H)},className:"bg-primary/10 hover:bg-primary text-primary hover:text-white p-1.5 rounded transition-colors",children:a.jsx(es,{size:16})})]})]}),Ae&&a.jsxs("div",{className:"p-4 space-y-3 border-t border-border/50 animate-in slide-in-from-top-2 duration-200",children:[F.length===0&&a.jsx("div",{className:"text-center py-4 text-muted text-xs italic",children:"No items"}),F.map(J=>a.jsxs("div",{className:"group relative bg-background p-3 rounded-lg border border-border flex flex-col md:flex-row gap-3 items-start md:items-center",children:[a.jsx("div",{className:"flex-1 w-full",children:a.jsx("input",{type:"text",value:J.name,placeholder:s.courseName,onChange:le=>C(J.id,"name",le.target.value),className:"bg-transparent border-none text-sm font-semibold text-foreground placeholder-muted w-full focus:outline-none focus:ring-0 px-0"})}),a.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto justify-between",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("input",{type:"text",value:J.hours||"",placeholder:"e.g. 8",onChange:le=>C(J.id,"hours",le.target.value),className:"w-16 bg-surface text-sm font-bold text-center border border-border rounded focus:border-primary outline-none py-1 placeholder:font-normal"}),a.jsx("span",{className:"text-xs text-muted",children:s.hours})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("input",{type:"text",value:J.credits,placeholder:"e.g. 0.1",onChange:le=>/^\d*\.?\d*$/.test(le.target.value)&&C(J.id,"credits",le.target.value),className:"w-20 bg-surface text-sm font-bold text-center border border-border rounded focus:border-primary outline-none py-1 placeholder:font-normal"}),a.jsx("span",{className:"text-xs text-muted",children:s.credit})]}),a.jsxs("div",{className:"flex items-center bg-surface border border-border rounded-lg p-0.5 overflow-hidden",children:[a.jsx("button",{onClick:()=>C(J.id,"completed",!1),className:`px-3 py-1.5 text-xs font-bold rounded-md transition-all ${J.completed?"text-muted hover:bg-background/50":"bg-orange-500/10 text-orange-500 shadow-sm"}`,children:s.pending}),a.jsxs("button",{onClick:()=>C(J.id,"completed",!0),className:`px-3 py-1.5 text-xs font-bold rounded-md flex items-center gap-1 transition-all ${J.completed?"bg-emerald-500 text-white shadow-sm":"text-muted hover:bg-background/50"}`,children:[J.completed&&a.jsx(Y2,{size:12}),s.completed]})]}),a.jsx("button",{onClick:()=>N(J),className:"text-muted hover:text-destructive p-1.5 rounded hover:bg-surface transition-colors opacity-0 group-hover:opacity-100 duration-200",children:a.jsx(jn,{size:14})})]})]},J.id))]})]},H)})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsx("h3",{className:"text-sm font-bold text-muted uppercase tracking-wider",children:s.notes}),a.jsx("textarea",{value:l.notes||"",onChange:H=>u(F=>({...F,notes:H.target.value})),className:"w-full h-24 bg-background border border-border rounded-lg p-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary resize-none",placeholder:"..."}),a.jsxs("p",{className:"text-xs text-muted flex items-center gap-1",children:[a.jsx(ir,{size:12}),s.ruleWarning]})]})]})},t6={en:{attachments:"Attachments",notes:"Notes (Optional)",uploadOrLink:"Upload or Paste Link:",uploadFile:"Upload File",uploadType:"Approval Letter / System Screenshot",viewFile:"View Attached File",safetyNotice:"Files are stored locally in your browser and are not uploaded to any server.",confirmRemove:"Are you sure you want to remove this file?"},zh:{attachments:"",notes:"",uploadOrLink:"",uploadFile:"",uploadType:" / ",viewFile:"",safetyNotice:"",confirmRemove:""}},r6=({storageKey:r,dbKeyPrefix:e})=>{const{language:t}=At(),s=t6[t],[A,l]=k.useState(""),[u,d]=k.useState(null);k.useEffect(()=>{const y=localStorage.getItem(r);l(y||""),(async()=>{const N=await na(`${e}proof`);d(N||null)})()},[r,e]);const f=y=>{l(y),localStorage.setItem(r,y)},g=async y=>{if(y.target.files&&y.target.files[0]){const v=y.target.files[0];await Tn(`${e}proof`,v),d(v)}},x=async()=>{window.confirm(s.confirmRemove)&&(await aa(`${e}proof`),d(null))};return a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary border-b border-border/50 pb-2 flex items-center gap-2",children:[a.jsx(jr,{size:20}),s.attachments," & ",s.notes]}),a.jsxs("div",{className:"flex flex-col gap-8",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:s.uploadOrLink}),a.jsxs("div",{className:"space-y-3 pl-2",children:[a.jsxs("div",{children:[a.jsx("input",{type:"file",id:`proof-upload-${e}`,className:"hidden",accept:"image/*,.pdf",onChange:g}),u?a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-primary/5 border border-primary/20 rounded-lg animate-in fade-in slide-in-from-left-2",children:[a.jsx("div",{className:"p-2 bg-primary/10 rounded-full text-primary",children:a.jsx(os,{size:18})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm font-medium text-foreground truncate max-w-[200px]",children:u.name}),a.jsxs("div",{className:"text-xs text-muted",children:[(u.size/1024).toFixed(1)," KB"]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>{const y=URL.createObjectURL(u);window.open(y,"_blank")},className:"p-1.5 text-primary hover:bg-primary/10 rounded-md transition-colors",title:s.viewFile,children:a.jsx(Ir,{size:16})}),a.jsx("button",{onClick:x,className:"p-1.5 text-muted hover:text-destructive hover:bg-destructive/10 rounded-md transition-colors",children:a.jsx(xt,{size:16})})]})]}):a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("label",{htmlFor:`proof-upload-${e}`,className:"cursor-pointer flex items-center gap-2 px-4 py-2 bg-background border border-border hover:border-primary text-foreground rounded-lg transition-all shadow-sm active:scale-95",children:[a.jsx(jr,{size:16}),a.jsx("span",{className:"text-sm font-medium",children:s.uploadFile})]}),a.jsx("span",{className:"text-xs text-muted",children:s.uploadType})]})]}),a.jsxs("div",{className:"text-xs text-muted flex items-center gap-1.5 mt-1",children:[a.jsx(ir,{size:10,className:"text-muted"}),s.safetyNotice]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:s.notes}),a.jsx("div",{className:"pl-2",children:a.jsx("textarea",{value:A,onChange:y=>f(y.target.value),placeholder:"...",className:"w-full bg-background border border-border rounded-lg px-4 py-3 text-foreground outline-none focus:ring-2 focus:ring-primary/50 min-h-[100px] resize-y"})})]})]})]})},s6=({theme:r,userProfile:e,courses:t})=>{const{t:s}=At(),[A,l]=k.useState(null),[u,d]=k.useState(()=>{const g=localStorage.getItem("nsysu-interdisciplinary-status");return g?JSON.parse(g):{}});k.useEffect(()=>{const g=localStorage.getItem("nsysu-interdisciplinary-status"),x=JSON.stringify(u);g!==x&&localStorage.setItem("nsysu-interdisciplinary-status",x)},[u]);const f=g=>{d(x=>({...x,[g]:!x[g]}))};return a.jsxs("div",{className:"max-w-[85rem] mx-auto animate-in fade-in duration-500",children:[a.jsxs("h1",{className:"text-2xl font-bold text-foreground mb-6 flex items-center gap-3",children:[a.jsx("img",{src:r==="dark"?"./graduation-cap-white.png":"./graduation-cap-black.png",alt:"Icon",className:"w-8 h-8 object-contain"}),s.dashboard.interdisciplinaryView?.title]}),a.jsxs("div",{className:"bg-background border border-border rounded-xl flex min-h-[70vh] overflow-hidden shadow-sm",children:[a.jsxs("div",{className:"w-[30%] flex-shrink-0 border-r border-border bg-transparent p-6 overflow-y-auto",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("div",{className:"flex items-center gap-2 mb-3",children:a.jsx("h3",{className:"text-sm font-bold text-[#8D9CB2] dark:text-[#A8C8FA] uppercase tracking-wider",children:s.dashboard.interdisciplinaryView?.sidebar?.microCredits})}),a.jsx("ul",{className:"space-y-1",children:a.jsxs("li",{onClick:()=>l(10),className:"relative flex items-center gap-3 text-sm p-2.5 rounded-lg cursor-pointer transition-all font-medium group text-foreground overflow-hidden",children:[a.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 h-7 w-full flex items-center pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:a.jsx("div",{className:"w-1 h-full bg-[#FCA269]"})}),a.jsx("div",{className:`absolute inset-0 bg-primary/5 transition-opacity duration-200 ${A===10?"opacity-100":"opacity-0"}`}),a.jsx("span",{className:`w-1.5 h-1.5 rounded-full transition-colors relative z-10 ${u[10]?"bg-emerald-500":"bg-muted group-hover:bg-[#FCA269]"}`}),a.jsx("span",{className:`leading-none pt-0.5 relative z-10 ${u[10]?"text-emerald-500":""} ${A===10?"text-primary dark:text-white":""}`,children:s.dashboard.interdisciplinaryView?.sidebar?.addMicroCredit}),u[10]&&a.jsx(vt,{size:14,className:"ml-auto text-emerald-500 relative z-10"})]})})]}),a.jsxs("div",{children:[a.jsx("div",{className:"flex items-center gap-2 mb-3",children:a.jsx("h3",{className:"text-sm font-bold text-[#8D9CB2] dark:text-[#A8C8FA] uppercase tracking-wider",children:s.dashboard.interdisciplinaryView?.sidebar?.internationalOrCross})}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h4",{className:"text-xs font-semibold text-primary/80 mb-2 px-2.5",children:s.dashboard.interdisciplinaryView?.sidebar?.international}),a.jsx("ul",{className:"space-y-1",children:[1,2,3].map(g=>a.jsxs("li",{onClick:()=>l(g),className:"relative flex items-center gap-3 text-sm p-2.5 rounded-lg cursor-pointer transition-all group overflow-hidden",children:[a.jsxs("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 h-7 w-full flex items-center pointer-events-none",children:[a.jsx("div",{className:`w-1 h-full bg-[#FCA269] transition-opacity duration-200 ${A===g?"opacity-100":"opacity-0 group-hover:opacity-100"}`}),a.jsx("div",{className:`flex-1 h-full bg-gradient-to-r from-[#303030]/10 to-transparent dark:from-[#EFEFEF]/10 transition-opacity duration-200 ${A===g?"opacity-100":"opacity-0"}`})]}),a.jsxs("span",{className:`w-5 flex-shrink-0 text-xs font-mono relative z-10 ${A===g?"text-primary dark:text-white":"text-muted group-hover:text-foreground"} ${u[g]?"!text-emerald-500":""}`,children:[g,"."]}),a.jsx("div",{className:`flex-1 leading-relaxed relative z-10 ${u[g]?"text-emerald-500":"text-foreground"}`,children:s.dashboard.interdisciplinaryView?.requirements?.[g]}),u[g]&&a.jsx(vt,{size:16,className:"text-emerald-500 relative z-10"})]},g))})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-xs font-semibold text-primary/80 mb-2 px-2.5",children:s.dashboard.interdisciplinaryView?.sidebar?.crossDomain}),a.jsx("ul",{className:"space-y-1",children:[4,5,6,7,8,9].map(g=>a.jsxs("li",{onClick:()=>l(g),className:"relative flex items-center gap-3 text-sm p-2.5 rounded-lg cursor-pointer transition-all group overflow-hidden",children:[a.jsxs("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 h-7 w-full flex items-center pointer-events-none",children:[a.jsx("div",{className:`w-1 h-full bg-[#FCA269] transition-opacity duration-200 ${A===g?"opacity-100":"opacity-0 group-hover:opacity-100"}`}),a.jsx("div",{className:`flex-1 h-full bg-gradient-to-r from-[#303030]/10 to-transparent dark:from-[#EFEFEF]/10 transition-opacity duration-200 ${A===g?"opacity-100":"opacity-0"}`})]}),a.jsxs("span",{className:`w-5 flex-shrink-0 text-xs font-mono relative z-10 ${A===g?"text-primary dark:text-white":"text-muted group-hover:text-foreground"} ${u[g]?"!text-emerald-500":""}`,children:[g,"."]}),a.jsx("div",{className:`flex-1 leading-relaxed relative z-10 ${u[g]?"text-emerald-500":"text-foreground"}`,children:s.dashboard.interdisciplinaryView?.requirements?.[g]}),u[g]&&a.jsx(vt,{size:16,className:"text-emerald-500 relative z-10"})]},g))})]})]})]}),a.jsx("div",{className:"w-[70%] bg-transparent p-12 flex flex-col justify-center relative",children:A&&[1,2,3].includes(A)?a.jsxs("div",{className:"w-full max-w-2xl mx-auto animate-in fade-in zoom-in-95 duration-300",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[a.jsx("div",{className:"p-3 bg-primary/10 rounded-xl text-primary",children:a.jsx(H0,{size:32})}),a.jsx("h2",{className:"text-2xl font-bold text-foreground",children:s.dashboard.interdisciplinaryView?.requirements?.[A]})]}),a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary mb-6 flex items-center gap-2",children:[a.jsx(q5,{size:20}),s.dashboard.interdisciplinaryView?.details?.requirementsHeader]}),(()=>{const x=(s.dashboard.interdisciplinaryView?.details?.[A]?.requirement||"").split(`

`);return a.jsx("div",{className:"space-y-6",children:x.map((y,v)=>{if(y.startsWith("Definition:")||y.startsWith("")){const N=y.includes("")?"":":",M=y.split(N)[0],S=y.substring(y.indexOf(N)+1);return a.jsxs("div",{className:"bg-primary/5 rounded-lg p-4 border border-primary/10",children:[a.jsxs("h4",{className:"font-bold text-primary mb-2 flex items-center gap-2 text-sm uppercase tracking-wide",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),M]}),a.jsx("p",{className:"text-foreground/90 leading-relaxed pl-3.5",children:S})]},v)}if(y.startsWith("Requirements")||y.startsWith("")){const N=y.split(`
`),M=N[0],S=N.slice(1);return a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-foreground mb-3 flex items-center gap-2 pl-1",children:M}),a.jsx("ul",{className:"space-y-3 pl-1",children:S.map((V,K)=>{const G=V.match(/^(\d+)\.\s*(.+)/);return G?a.jsxs("li",{className:"flex gap-3 text-foreground/80 leading-relaxed",children:[a.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-surface border border-border flex items-center justify-center text-xs font-mono text-muted-foreground mt-0.5",children:G[1]}),a.jsx("span",{children:G[2]})]},K):a.jsx("li",{className:"text-foreground/80 leading-relaxed pl-9",children:V},K)})})]},v)}return a.jsx("p",{className:"text-foreground/80 leading-relaxed whitespace-pre-wrap",children:y},v)})})})()]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary mb-4 flex items-center gap-2",children:[a.jsx(Y2,{size:20}),s.dashboard.interdisciplinaryView?.details?.confirmationHeader]}),a.jsxs("label",{className:"flex items-center gap-4 p-4 rounded-lg bg-background/50 border border-transparent hover:border-primary/30 cursor-pointer transition-all group",children:[a.jsx("div",{className:`w-6 h-6 rounded border flex items-center justify-center transition-colors ${u[A]?"bg-primary border-primary text-background":"border-muted group-hover:border-primary"}`,children:u[A]&&a.jsx(vt,{size:16,strokeWidth:3})}),a.jsx("input",{type:"checkbox",className:"hidden",checked:!!u[A],onChange:()=>f(A)}),a.jsx("span",{className:`text-lg transition-colors ${u[A]?"text-emerald-500 font-medium":"text-foreground/80"}`,children:s.dashboard.interdisciplinaryView?.details?.[A]?.confirmation})]})]}),a.jsx(r6,{storageKey:`nsysu-interdisciplinary-item-${A}-notes`,dbKeyPrefix:`interdisciplinary_item_${A}_`})]})]}):A===4?a.jsxs("div",{className:"w-full h-full overflow-y-auto pr-2",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"p-3 bg-primary/10 rounded-xl text-primary",children:a.jsx(rr,{size:28})}),a.jsx("h2",{className:"text-2xl font-bold text-foreground",children:s.dashboard.interdisciplinaryView?.requirements?.[4]})]}),a.jsx(UO,{onStatusChange:g=>{d(x=>x[4]===g?x:{...x,4:g})}})]}):A===5?a.jsxs("div",{className:"w-full h-full overflow-y-auto pr-2",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"p-3 bg-primary/10 rounded-xl text-primary",children:a.jsx(rr,{size:28})}),a.jsx("h2",{className:"text-2xl font-bold text-foreground",children:s.dashboard.interdisciplinaryView?.requirements?.[5]})]}),a.jsx(FO,{onStatusChange:g=>{d(x=>x[5]===g?x:{...x,5:g})}})]}):A===6?a.jsxs("div",{className:"w-full h-full overflow-y-auto pr-2",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"p-3 bg-primary/10 rounded-xl text-primary",children:a.jsx(rr,{size:28})}),a.jsx("h2",{className:"text-2xl font-bold text-foreground",children:s.dashboard.interdisciplinaryView?.requirements?.[6]})]}),a.jsx(kO,{onStatusChange:g=>{d(x=>x[6]===g?x:{...x,6:g})}})]}):A===7?a.jsxs("div",{className:"w-full h-full overflow-y-auto pr-2",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"p-3 bg-primary/10 rounded-xl text-primary",children:a.jsx(rr,{size:28})}),a.jsx("h2",{className:"text-2xl font-bold text-foreground",children:s.dashboard.interdisciplinaryView?.requirements?.[7]})]}),a.jsx(VO,{userProfile:e,courses:t,onStatusChange:g=>{d(x=>x[7]===g?x:{...x,7:g})}})]}):A===8?a.jsxs("div",{className:"w-full h-full overflow-y-auto pr-2",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"p-3 bg-primary/10 rounded-xl text-primary",children:a.jsx(rr,{size:28})}),a.jsx("h2",{className:"text-2xl font-bold text-foreground",children:s.dashboard.interdisciplinaryView?.requirements?.[8]})]}),a.jsx(qO,{userProfile:e,courses:t,onStatusChange:g=>{d(x=>x[8]===g?x:{...x,8:g})}})]}):A===9?a.jsxs("div",{className:"w-full h-full overflow-y-auto pr-2",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"p-3 bg-primary/10 rounded-xl text-primary",children:a.jsx(rr,{size:28})}),a.jsx("h2",{className:"text-2xl font-bold text-foreground",children:s.dashboard.interdisciplinaryView?.requirements?.[9]})]}),a.jsx(JO,{userProfile:e,courses:t,onStatusChange:g=>{d(x=>x[9]===g?x:{...x,9:g})}})]}):A===10?a.jsx("div",{className:"w-full h-full overflow-y-auto pr-2",children:a.jsx(e6,{userProfile:e,onStatusChange:g=>{d(x=>x[10]===g?x:{...x,10:g})}})}):a.jsxs("div",{className:"w-full px-8 text-center flex flex-col items-center justify-center h-full",children:[a.jsx("div",{className:"mb-6 inline-block",children:a.jsx("img",{src:r==="dark"?"./graduation-cap-white.png":"./graduation-cap-black.png",alt:"Graduation Cap",className:"w-24 h-24 object-contain"})}),a.jsx("h2",{className:"text-xl font-bold text-foreground mb-2 whitespace-nowrap",children:s.dashboard.interdisciplinaryView?.title}),a.jsx("p",{className:"text-muted",children:s.dashboard.interdisciplinaryView?.placeholder})]})})]})]})},x1=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],n6=["A+","A","A-","B+","B","B-","C+","C","C-","D","E","Fail","None"],a6=({onSave:r,onClose:e,onDelete:t,initialCourse:s,userMajor:A,theme:l="dark"})=>{const{t:u,language:d}=At(),[f,g]=k.useState(s?.name||""),[x,y]=k.useState(s?.room||""),[v,N]=k.useState(s?.credits||3),[M,S]=k.useState(s?.grade||""),[V,K]=k.useState(s?.teacher||""),[G,z]=k.useState(s?.originalTags||[]),[q,$]=k.useState(s?.originalSemester||""),[Y,E]=k.useState(s?.originalId||""),[_,C]=k.useState(s?.department||""),[D,j]=k.useState(()=>{if(s?.semester)return s.semester;const ve=localStorage.getItem("nsysu-last-semester");return ve&&Ec.includes(ve)?ve:Ec[0]}),[Q,U]=k.useState(s?.category||"Major Required"),[T,W]=k.useState(s?.genEduSubCategory),[H,F]=k.useState(s?.boyaDimension),[L,te]=k.useState(s?.isEMI||!1),[Ae,P]=k.useState(s?.isEapEsp||!1),[J,le]=k.useState(s?.isWithdrawn||!1),[ge,Ee]=k.useState(s?.isExemption||!1),[Ce,Se]=k.useState(s?.fromCatalog||!1),[ut,qe]=k.useState(!1),[Gt,Nt]=k.useState(s?.category||"Major Required"),[he,R]=k.useState(s?.genEduSubCategory),[Z,de]=k.useState(s?.day),[pe,ze]=k.useState(s?.startTime),[it,Je]=k.useState(s?.endTime),[De,Ue]=k.useState(!1),[St]=k.useState(s?.userLabels||[]);k.useEffect(()=>{Q==="University Way"||Q==="General Education"&&T==="Primer"?(N(0),S("None"),te(!1),P(!1),le(!1),Ee(!1)):Q==="Other"&&T==="Military Training"&&Ee(!1)},[Q,T]);const qs=ve=>{ve.preventDefault();let Vt=St;const sr=!!Y;!s&&!sr&&(Vt.includes("manual")||(Vt=[...Vt,"manual"]));const Ht={id:s?.id||crypto.randomUUID(),name:f,credits:v,grade:M==="None"?void 0:M,semester:D,category:Q,genEduSubCategory:Q==="General Education"||Q==="Other"?T:void 0,boyaDimension:Q==="General Education"&&T==="Boya"?H:void 0,isEMI:L,isEapEsp:Ae,isWithdrawn:J,isExemption:ge,room:x,day:Z,startTime:pe,endTime:it,userLabels:Vt,fromCatalog:s?.fromCatalog||sr,teacher:V,originalTags:G,originalSemester:q,originalId:Y,department:_};r(Ht),e()},Pt=ve=>{g(ve.name),y(ve.room||""),N(Number(ve.credit)||0),K(ve.teacher||""),z(ve.tags||[]),ve.semester&&$(ve.semester),ve.semester&&$(ve.semester),ve.id&&E(ve.id),C(ve.department||"");const Vt=Go(ve,A);if(U(Vt.category),W(Vt.genEduSubCategory),F(Vt.boyaDimension),te(Vt.isEMI),P(Vt.isEapEsp),Se(!0),Array.isArray(ve.classTime)){const sr=ve.classTime;for(let Ht=0;Ht<7;Ht++){const br=sr[Ht];if(br&&br.length>0){const kr=(Ht+1)%7;de(x1[kr]);const Ts=br[0],ce=br[br.length-1];Ti[Ts]&&ze(Ti[Ts].start),Ti[ce]&&Je(Ti[ce].end);break}}}if(ve.semester){const sr=ve.semester.slice(0,3),Ht=ve.semester.slice(3);let br="";Ht==="1"?br=`Year ${sr} Sem 1`:Ht==="2"?br=`Year ${sr} Sem 2`:Ht==="3"&&(br=`Year ${sr} Summer`),br&&Ec.includes(br)&&j(br)}qe(!1)};return Wt.createPortal(a.jsxs("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[10000] p-4",children:[ut&&a.jsx(VA,{onClose:()=>qe(!1),onSelect:Pt}),a.jsx("div",{className:"bg-surface border border-border rounded-xl w-full max-w-md shadow-2xl overflow-y-auto max-h-[90vh] custom-scrollbar",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-foreground",children:s?u.form.editTitle:u.form.addTitle}),a.jsx("button",{onClick:e,className:"text-muted hover:text-foreground transition-colors",children:a.jsx(xt,{size:24})})]}),!s&&a.jsx("div",{className:"mb-4",children:a.jsxs("button",{id:"btn-import-catalog",type:"button",onClick:()=>qe(!0),className:"w-full py-2 px-4 rounded-lg border-2 border-dashed border-primary/50 text-primary hover:bg-primary/10 transition-colors flex items-center justify-center gap-2 font-medium",children:[a.jsx(rr,{size:18}),u.form.importCatalog||"Import from Catalog"]})}),a.jsxs("form",{onSubmit:qs,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-muted mb-1 flex justify-between",children:[a.jsxs("span",{children:[u.form.courseName," ",a.jsx("span",{className:"text-red-400",children:"*"})]}),Ce&&a.jsxs("span",{className:"text-[10px] text-primary flex items-center gap-1",children:[a.jsx(Ss,{size:10}),u.form.verified]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{required:!0,type:"text",value:f,disabled:Ce,onChange:ve=>g(ve.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary disabled:opacity-50 disabled:bg-surface",placeholder:"e.g. Calculus I"}),Ce&&a.jsx("button",{type:"button",onClick:()=>Se(!1),className:"absolute right-2 top-1/2 -translate-y-1/2 text-muted hover:text-foreground transition-colors p-1",title:"Unlock to edit manually",children:a.jsx(Ss,{size:14})})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-muted mb-1 flex justify-between",children:[u.courseSelection?.teacher||"Teacher",Ce&&a.jsxs("span",{className:"text-[10px] text-primary flex items-center gap-1",children:[a.jsx(Ss,{size:10}),u.form.verified]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",value:V,disabled:Ce,onChange:ve=>K(ve.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary disabled:opacity-50 disabled:bg-surface",placeholder:"e.g. Professor Smith"}),Ce&&a.jsx("button",{type:"button",onClick:()=>Se(!1),className:"absolute right-2 top-1/2 -translate-y-1/2 text-muted hover:text-foreground transition-colors p-1",title:"Unlock to edit manually",children:a.jsx(Ss,{size:14})})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-muted mb-1 flex justify-between",children:[u.form.credits,Ce&&a.jsxs("span",{className:"text-[10px] text-primary flex items-center gap-1",children:[a.jsx(Ss,{size:10}),u.form.verified]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"number",min:"0",step:"1",value:v,onChange:ve=>N(Number(ve.target.value)),disabled:Q==="University Way"||Q==="General Education"&&T==="Primer"||Ce,className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary disabled:opacity-50 disabled:bg-surface"}),Ce&&a.jsx("button",{type:"button",onClick:()=>Se(!1),className:"absolute right-2 top-1/2 -translate-y-1/2 text-muted hover:text-foreground transition-colors p-1",title:"Unlock to edit credits manually",children:a.jsx(Ss,{size:14})}),!Ce&&s?.fromCatalog&&a.jsx("button",{type:"button",onClick:()=>Se(!0),className:"absolute right-2 top-1/2 -translate-y-1/2 text-muted hover:text-primary transition-colors p-1",title:"Lock (Verified from Catalog)",children:a.jsx(_5,{size:14})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-1",children:u.form.grade}),a.jsxs("select",{value:M||"None",onChange:ve=>S(ve.target.value),disabled:ge||J||Q==="General Education"&&T==="Primer",className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary appearance-none disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx("option",{value:"None",children:"-"}),n6.map(ve=>a.jsx("option",{value:ve,children:ve},ve))]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-1",children:u.form.semester}),a.jsx("select",{value:D,onChange:ve=>{const Vt=ve.target.value;j(Vt),localStorage.setItem("nsysu-last-semester",Vt)},className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary appearance-none",children:Ec.map(ve=>a.jsx("option",{value:ve,children:bk(ve,d)},ve))})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-muted mb-1 flex justify-between",children:[u.form.category,Ce&&a.jsxs("span",{className:"text-[10px] text-primary flex items-center gap-1",children:[a.jsx(Ss,{size:10}),u.form.verified]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("select",{value:Q,disabled:Ce,onChange:ve=>U(ve.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary appearance-none disabled:opacity-50 disabled:bg-surface",children:gk.map(ve=>a.jsxs("option",{value:ve,children:[u.categories[ve]||ve,ve==="General Education"||ve==="Other"?" ":""]},ve))}),Ce&&a.jsx("button",{type:"button",onClick:()=>Se(!1),className:"absolute right-8 top-1/2 -translate-y-1/2 text-muted hover:text-foreground transition-colors p-1",title:"Unlock to edit manually",children:a.jsx(Ss,{size:14})})]})]}),(Q==="General Education"||Q==="Other")&&a.jsxs("div",{className:"bg-background/50 p-3 rounded-lg border border-border/50 space-y-3 animate-in fade-in slide-in-from-top-1",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-1",children:u.form.subCategory}),a.jsxs("select",{value:T||"",onChange:ve=>W(ve.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary appearance-none",children:[a.jsx("option",{value:"",disabled:Q==="General Education",children:"-"}),Q==="General Education"?pk.filter(ve=>ve!=="Military Training").map(ve=>a.jsx("option",{value:ve,children:u.categories[ve]||ve},ve)):a.jsx("option",{value:"Military Training",children:u.categories["Military Training"]||"Military Training"})]})]}),T==="Boya"&&Q==="General Education"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-1",children:u.form.dimension}),a.jsx("select",{value:H||yx[0],onChange:ve=>F(ve.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary appearance-none",children:yx.map(ve=>a.jsx("option",{value:ve,children:ve},ve))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:u.form.attributes}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:`flex items-center space-x-3 cursor-pointer p-2 rounded hover:bg-surface transition-colors ${Q==="University Way"||Q==="General Education"&&T==="Primer"?"opacity-50 cursor-not-allowed":""}`,children:[a.jsx("input",{type:"checkbox",checked:L,onChange:ve=>te(ve.target.checked),disabled:Ce||Q==="University Way"||Q==="General Education"&&T==="Primer",className:"w-4 h-4 rounded border-border text-primary focus:ring-primary bg-background disabled:cursor-not-allowed disabled:opacity-50"}),a.jsx("span",{className:"text-sm text-foreground",children:u.form.isEMI}),Ce&&a.jsx("button",{type:"button",onClick:ve=>{ve.preventDefault(),Se(!1)},className:"ml-auto text-muted hover:text-foreground transition-colors p-1",title:"Unlock to edit manually",children:a.jsx(Ss,{size:14})})]}),a.jsxs("label",{className:`flex items-center space-x-3 cursor-pointer p-2 rounded hover:bg-surface transition-colors ${Q==="University Way"||Q==="General Education"&&T==="Primer"?"opacity-50 cursor-not-allowed":""}`,children:[a.jsx("input",{type:"checkbox",checked:Ae,onChange:ve=>{const Vt=ve.target.checked;P(Vt),Vt?(Nt(Q),R(T),U("General Education"),W("Cross-College")):(U(Gt),W(he))},disabled:Q==="University Way"||Q==="General Education"&&T==="Primer",className:"w-4 h-4 rounded border-border text-primary focus:ring-primary bg-background disabled:cursor-not-allowed"}),a.jsx("span",{className:"text-sm text-foreground",children:u.form.isEapEsp})]}),a.jsxs("label",{className:`flex items-center space-x-3 cursor-pointer p-2 rounded hover:bg-surface transition-colors ${Q==="University Way"||Q==="General Education"&&T==="Primer"?"opacity-50 cursor-not-allowed":""}`,children:[a.jsx("input",{type:"checkbox",checked:J,onChange:ve=>{le(ve.target.checked),ve.target.checked&&(Ee(!1),S("None"))},disabled:Q==="University Way"||Q==="General Education"&&T==="Primer",className:"w-4 h-4 rounded border-border text-red-500 focus:ring-red-500 bg-background disabled:cursor-not-allowed"}),a.jsx("span",{className:"text-sm text-foreground",children:u.form.isWithdrawn})]}),a.jsxs("label",{className:`flex items-center space-x-3 cursor-pointer p-2 rounded hover:bg-surface transition-colors ${Q==="University Way"||Q==="General Education"&&T==="Primer"||Q==="Other"&&T==="Military Training"?"opacity-50 cursor-not-allowed":""}`,children:[a.jsx("input",{type:"checkbox",checked:ge,onChange:ve=>{Ee(ve.target.checked),ve.target.checked&&(le(!1),S("None"))},disabled:Q==="University Way"||Q==="General Education"&&T==="Primer"||Q==="Other"&&T==="Military Training",className:"w-4 h-4 rounded border-border text-green-500 focus:ring-green-500 bg-background disabled:cursor-not-allowed"}),a.jsx("span",{className:"text-sm text-foreground",children:u.form.isExemption})]})]})]}),a.jsxs("div",{className:"bg-background/50 p-3 rounded-lg border border-border/50",children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:u.form.dayTime}),a.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[a.jsxs("select",{value:Z||"",onChange:ve=>de(ve.target.value?ve.target.value:void 0),className:"col-span-1 bg-background border border-border rounded-lg px-2 py-2 text-sm text-foreground focus:outline-none focus:ring-2 focus:ring-primary appearance-none",children:[a.jsx("option",{value:"",children:u.form.selectDay}),x1.map(ve=>a.jsx("option",{value:ve,children:ve},ve))]}),a.jsx("input",{type:"time",value:pe||"",onChange:ve=>ze(ve.target.value||void 0),className:"col-span-1 bg-background border border-border rounded-lg px-2 py-2 text-sm text-foreground focus:outline-none focus:ring-2 focus:ring-primary appearance-none",style:{backgroundColor:l==="light"?"#ffffff":void 0,colorScheme:l}}),a.jsx("input",{type:"time",value:it||"",onChange:ve=>Je(ve.target.value||void 0),className:"col-span-1 bg-background border border-border rounded-lg px-2 py-2 text-sm text-foreground focus:outline-none focus:ring-2 focus:ring-primary appearance-none",style:{backgroundColor:l==="light"?"#ffffff":void 0,colorScheme:l}})]})]}),a.jsxs("div",{className:"flex gap-3 pt-2",children:[s&&t&&a.jsx("button",{type:"button",onClick:()=>Ue(!0),className:"px-3 py-2 rounded-lg border border-red-500/50 text-red-400 hover:bg-red-500/10 transition-colors",title:"Delete Course",children:a.jsx(ru,{size:20})}),a.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 rounded-lg border border-border text-muted hover:bg-surface transition-colors font-medium",children:u.form.cancel}),a.jsxs("button",{type:"submit",className:"w-full bg-primary hover:bg-[var(--color-primary-hover)] text-white font-bold py-3 rounded-lg shadow-lg shadow-primary/20 transition-all flex justify-center items-center gap-2",children:[a.jsx(vt,{size:20}),u.form.save]})]})]})]})}),a.jsx(J0,{isOpen:De,title:u.courseList?.remove?`${u.courseList.remove} ${u.form.courseName}`:"Delete Course",message:u.app.deleteConfirm||"Are you sure you want to delete this course?",confirmText:"Confirm",cancelText:u.form.cancel,isDestructive:!0,onConfirm:()=>{s&&t&&(t(s.id),e())},onCancel:()=>Ue(!1)})]}),document.body)},dS=[{version:"v7.0",date:"2026.02.27",changes:[" "," Google  Firebase Auth  Firestore"," "," ","  Metadata "]},{version:"v6.3",date:"2026.02.24",changes:[" Smart Export: Planner avoids duplicating courses you've already exported."," Search Reliability: Fixed an issue preventing catalog scroll and highlight if a hidden label filter was active."," UI Polish: Added comfortable padding to the Semester Schedule grade table."]},{version:"v6.2",date:"2026.02.03",changes:[" Safe Export: Fixed data loss when exporting from Planner (Teacher/Time/Room now sync correctly)."," Smart Colors: 'Major Req' badges in Planner now correctly check the course's year instead of your current year."]},{version:"v6.1",date:"2026.01.25",changes:[" Social Connect: Added official Instagram link in Support."," Micro-credits+: Added Fall/Spring semesters & improved sorting (Chronological)."]},{version:"v6.0",date:"2026.01.21",changes:[" Rule Check Complete: Added all 9 Interdisciplinary Options (Minors, Double Major, Teacher Ed, etc.)."," Micro-credits Flow: Visualize your micro-credit accumulation with a new interactive status panel."," Data Persistence: Your progress in 'Rule Check' is now fully backed up and restored via JSON."," Complete Audit: Adjusted logic for Teacher Education, Cross-disciplinary, and Diverse Learning programs."]},{version:"v5.3",date:"2026.01.10",changes:[" Credit Locking: Official catalog courses now have locked credits to prevent accidental edits (unlockable)."," Military Training: Full support added with auto-categorization, localized badges, and exemption logic."," Support FAQs: Added a comprehensive FAQ section in the Support window to answer common questions."," UI Polish: Enhanced localized labels and interactions for a smoother experience."]},{version:"v5.2",date:"2026.01.09",changes:[" Smarter Logic: 'Primer on College Life' now auto-locks to Grade '-' and 0 credits."," Fix Location Refined: 'Primer', 'Exemption', and 'Service Learning' no longer prompt for location fixes."," Dark Mode Polish: Improved visibility for Schedule buttons and badges."," Quality of Life: Smoother interactions for Exemption/Withdraw statuses."]},{version:"v5.1",date:"2026.01.09",changes:[" Exemption Feature (): Track credit-bearing courses that don't affect GPA (e.g. transfer credits)."," Enhanced Logic: 'Exemption' and 'Withdraw' are now mutually exclusive."," Ui Refinements: Simplified labels & Grey badges for neutral status."," Support Update: Direct email integration with clearer subject lines."]},{version:"v5.0",date:"2026.01.08",changes:[" GPA Calculation: Now supporting Semester GPA & Total Average (Avg of Semesters)."," Refined Dashboard: 11-column grid layout for perfect alignment & responsiveness."," UI Polish: Optimized 'Course Plan' navigation & visual balances."," Deep Localization: Full Mandarin support for all new metrics."]},{version:"v5.0.2",date:"2026.01.09",changes:[" Catalog Upgrade: Now displays course times (e.g., Tue 10:10-12:00) in the Import from Catalog list."]},{version:"v4.5",date:"2026.01.08",changes:[" Smart Major Planning: One-click import now covers 'Major Electives' & filters out Graduate courses."," Enhanced Data Safety: Your 'Label Library' is now protected when clearing data."," 114-2 Ready: Optimized UI and performance for the upcoming course selection period."," Visual Polish: Refined alignments and interactions for a premium experience."]},{version:"v4.4",date:"2026.01.07",changes:[" Rebranding: We are now 'ClearGrad '! Refreshed identity."," Brand New UI: Total overhaul of Theme Colors for both Dark & Light modes."," Colorful Badges: Distinct, vibrant labels for Course Catalog & Schedule."," Plan Smart: Preloaded Catalog data for instant Planner switching."]},{version:"v4.3",date:"2026.01.06",changes:[" Labeling System: Organize your planner with custom colored labels (e.g. 'Backup', 'High Priority')."," Course Selection Schedule: Added detailed 114-2 timeline (accessible in Planner)."," Easter Egg: v4.3 is the highest GPA possible! Wishing everyone a perfect 4.3 semester! "]},{version:"v4.2",date:"2026.01.04",changes:[" Dashboard Redesign: New layout for Graduation Progress with clearer visuals & compaction."," Violet & Indigo Theme: Liberal Arts section now uses distinct purple shades for clarity."," Completed Localization: Fully translated all Dashboard labels (Unique Dim, Gen Edu)."," New App Icon: Updated header logo and favicon to new brand asset."]},{version:"v4.1",date:"2026.01.02",changes:[" Smart Data Warning: Auto-detects if the University Catalog data is incomplete (e.g. 114-2)."," Setup Reminder: Friendly prompt to help new users set up their profile."," Tutorial Upgrade: Interactive guide now covers the new Planner & Search features."," Fixes: Reverted EAP/ESP filter strictness & UI polish."]},{version:"v4.0",date:"2026.01.01",changes:[" Major Update: Course Planner & Classification Intelligence"," Enhanced Catalog Filters: Added ID-Based Rules (GEAE/GEAI...), EAP/ESP & EMI Filters"," UI Refinements: Enhanced Time Picker, Dark Mode & overall Visual Polish"," Copy Course ID: Click any Course ID to copy it instantly (with toast notification)"," Calendar Export: Export schedule to Google/Apple Calendar (.ics)"]},{version:"v3.2",date:"2025.12.30",changes:[" EMI Labels: English-taught courses are now clearly marked with a purple 'EMI' badge in the catalog.","Easily identify courses that meet your English graduation requirements."]},{version:"v3.1",date:"2025.12.30",changes:[" Categorized Majors: Settings now list departments by College (Arts, Science, Engineering, etc.).","Easier to find your major among 30+ options.","Verified department names against internal course data."]},{version:"v3.0",date:"2025.12.30",changes:[" Smart Graduation Audit: Set your Major in Settings!","Auto-Detect: Importing courses now checks YOUR major requirements automatically.","Know instantly if a course is 'Required' or 'Elective' for YOU.","Added Settings for 'Entrance Year' for future rule checks."]},{version:"v2.11",date:"2025.12.30",changes:["Offline Fallback: Course data (111-114) is now bundled!","If the school API goes down, the app will automatically use local data.","Includes 112 semesters as requested."]},{version:"v2.9",date:"2025.12.30",changes:["Custom Semesters: Use '+ Add Plan' to create semesters (e.g. Year 1 Summer)","Dynamic Semester Sorting: Summer and other semesters auto-arrange efficiently","114-2 Courses are now available in Catalog!"]},{version:"v2.3",date:"2025.12.30",changes:["New Announcement System: Welcome info on startup","Added Quick Language & Theme toggles in Announcement","Added 'Start Tutorial' button directly in welcome message","Smart Skip: 'Don't show again' remembers your preference until next update"]},{version:"v2.2",date:"2025.12.29",changes:["UI Improvements: More compact grid for better visibility","Tutorial Updates: Fixed highlighting issues"]},{version:"v2.1",date:"2025.12.29",changes:["Enhanced Course Search: Strictly scoped to selected semester for accuracy","Added Schedule Image Download functionality","Improved lazy loading for faster catalog performance"]},{version:"v2.0",date:"2025.12.29",changes:["Major Update: Course Catalog Integration",'Added "Import from Catalog" feature with NSYSU Open Data',"Smart Auto-fill: Schedule, Credits, and Course Name","Auto-detection for EMI, EAP/ESP, and Cross-College courses","Auto-categorization for Boya (Dimensions), Chinese, and Sports"]},{version:"v1.4",date:"2025.12.28",changes:['Introduced "Daylight Mode" (Light Theme)',"Refined Dashboard styling for better readability","Added Theme Toggle in Settings"]},{version:"v1.3",date:"2025.12.28",changes:["Improved Support Modal (Direct Gmail Link)","Optimized UI for better readability","Added edit functionality to course cards","Improved Interactive Tutorial (Better UI, Skip, Schedule Step)","Improved Course Plan navigation buttons (Always visible)"]},{version:"v1.2",date:"2025.12.28",changes:["Added 'Withdraw' () feature for course management","Added Update Journal & Support features","Improve translation functionality"]},{version:"v1.1",date:"2025.12.27",changes:["Refactored Semester Column layout","Add course schedule feature","Optimized UI for better readability"]},{version:"v1.0",date:"2025.12.26",changes:["Initial Release","Dual Language Support (English / Chinese)","Complete Graduation Credit Calculation"]}],gf=dS[0].version,i6=({onClose:r})=>{const{t:e}=At();return a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-surface border border-border rounded-xl w-full max-w-lg shadow-2xl overflow-hidden flex flex-col max-h-[85vh]",children:[a.jsxs("div",{className:"p-4 border-b border-border bg-background/50 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-foreground",children:e.updates.title}),a.jsx("p",{className:"text-sm text-muted",children:e.updates.desc})]}),a.jsx("button",{onClick:r,className:"text-muted hover:text-foreground transition-colors",children:a.jsx(xt,{size:24})})]}),a.jsx("div",{className:"overflow-y-auto p-6 space-y-6 custom-scrollbar",children:a.jsx("div",{className:"space-y-8",children:dS.map((t,s)=>{const A=t.version.startsWith("v5."),l=t.version.startsWith("v4.");let u="border-border hover:border-primary",d="border-primary",f="text-primary",g="text-muted marker:text-muted";return t.version.startsWith("v7.")?(u="border-amber-500/50 hover:border-amber-500",d="border-amber-500 shadow-[0_0_10px_rgba(245,158,11,0.5)]",f="bg-gradient-to-r from-amber-400 to-orange-500 bg-clip-text text-transparent",g="text-foreground font-medium marker:text-amber-500"):t.version.startsWith("v6.")?(u="border-emerald-500/50 hover:border-emerald-500",d="border-emerald-500 shadow-[0_0_10px_rgba(16,185,129,0.5)]",f="bg-gradient-to-r from-emerald-400 to-cyan-400 bg-clip-text text-transparent",g="text-foreground font-medium marker:text-emerald-500"):A?(u="border-sky-500/50 hover:border-sky-500",d="border-sky-500 shadow-[0_0_10px_rgba(14,165,233,0.5)]",f="bg-gradient-to-r from-sky-400 to-blue-600 bg-clip-text text-transparent",g="text-foreground font-medium marker:text-sky-500"):l&&(u="border-purple-500/50 hover:border-purple-500",d="border-purple-500 shadow-[0_0_10px_rgba(168,85,247,0.5)]",f="bg-gradient-to-r from-purple-400 to-pink-600 bg-clip-text text-transparent",g="text-foreground font-medium marker:text-purple-500"),a.jsxs("div",{className:`relative pl-6 border-l-2 transition-colors ${u}`,children:[a.jsx("div",{className:`
                                        absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-surface border-2 
                                        ${d}
                                    `}),a.jsxs("div",{className:"mb-2 flex items-baseline gap-3",children:[a.jsx("span",{className:`text-lg font-bold ${f}`,children:t.version}),a.jsxs("span",{className:"text-xs text-muted font-mono flex items-center gap-1",children:[a.jsx(ol,{size:12}),t.date]})]}),a.jsx("ul",{className:"space-y-1",children:t.changes.map((x,y)=>a.jsx("li",{className:`text-sm list-disc list-inside ${g}`,children:x},y))})]},s)})})}),a.jsx("div",{className:"p-4 border-t border-border bg-background/30",children:a.jsx("button",{onClick:r,className:"w-full bg-surface hover:bg-background text-foreground font-medium py-2 rounded-lg transition-colors border border-border",children:e.updates.close})})]})})},A6={apiKey:"AIzaSyAFS5YsnbWmPKh1lmBGLsLCGtmkrnC4doM",authDomain:"cleargrad-database.firebaseapp.com",projectId:"cleargrad-database",storageBucket:"cleargrad-database.firebasestorage.app",messagingSenderId:"352836249313",appId:"1:352836249313:web:9a21623277828595f379a0",measurementId:"G-2VQBXX1ZN9"},hS=Wx(A6),W0=mE(hS),Ro=F2(hS),o6=new $n,l6=async()=>{try{return(await sQ(W0,o6)).user}catch(r){throw console.error("Login failed:",r),r}},c6=async()=>{try{await RU(W0)}catch(r){throw console.error("Logout failed:",r),r}},fS=k.createContext(void 0),u6=({children:r})=>{const[e,t]=k.useState(null),[s,A]=k.useState(!0);k.useEffect(()=>{const d=kU(W0,f=>{t(f),A(!1)});return()=>d()},[]);const l=async()=>{try{await l6()}catch(d){console.error("Login Error:",d)}},u=async()=>{try{await c6()}catch(d){console.error("Logout Error:",d)}};return a.jsx(fS.Provider,{value:{user:e,loading:s,login:l,logout:u},children:r})},wu=()=>{const r=k.useContext(fS);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r},d6=({onClose:r})=>{const{t:e}=At(),{login:t}=wu(),[s,A]=k.useState("main");return k.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-surface border border-border rounded-xl w-full max-w-lg shadow-2xl p-6 relative overflow-hidden",children:[a.jsx("button",{onClick:r,className:"absolute top-4 right-4 text-muted hover:text-foreground transition-colors",children:a.jsx(xt,{size:24})}),s==="main"?a.jsxs("div",{className:"mt-2 text-center animate-in fade-in slide-in-from-left-4 duration-300",children:[a.jsx("div",{className:"w-16 h-16 bg-primary/20 text-primary rounded-full flex items-center justify-center mx-auto mb-4 border border-primary/20",children:a.jsx(nC,{size:32})}),a.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:e.support.title}),a.jsx("p",{className:"text-muted mb-8 leading-relaxed",children:e.support.message}),a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsxs("button",{onClick:l=>{l.preventDefault();const u=Date.now(),f=(window._supportMailClicks||[]).filter(g=>u-g<1e3);if(f.push(u),window._supportMailClicks=f,f.length>=3){window._supportMailClicks=[],r(),t();return}f.length===1&&setTimeout(()=>{(window._supportMailClicks||[]).filter(x=>Date.now()-x<1e3).length<3&&window.open("https://mail.google.com/mail/?view=cm&fs=1&to=coursetracker.supp0rt@gmail.com&su=ClearGrad.-Support&body=(Content)","_blank")},400)},className:"flex items-center justify-center gap-3 w-full bg-surface hover:bg-background border border-border text-foreground font-medium py-3 rounded-lg transition-all shadow-sm hover:shadow-md group",children:[a.jsx(nC,{className:"text-primary group-hover:scale-110 transition-transform"}),"coursetracker.supp0rt@gmail.com"]}),a.jsxs("a",{href:"https://www.instagram.com/cleargrad?igsh=ZXR5MmtyaGlrejgx&utm_source=qr",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-3 w-full bg-surface hover:bg-background border border-border text-foreground font-medium py-3 rounded-lg transition-all shadow-sm hover:shadow-md group",children:[a.jsx(v5,{className:"text-pink-600 group-hover:scale-110 transition-transform"}),"ClearGrad Instagram"]}),a.jsxs("button",{onClick:()=>A("faq"),className:"flex items-center justify-center gap-3 w-full bg-surface hover:bg-background border border-border text-foreground font-medium py-3 rounded-lg transition-all shadow-sm hover:shadow-md group",children:[a.jsx($2,{className:"text-primary group-hover:scale-110 transition-transform"}),e.support.faqTitle||"Frequently Asked Questions"]})]})]}):a.jsxs("div",{className:"mt-2 text-left animate-in fade-in slide-in-from-right-4 duration-300",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b border-border pb-2",children:[a.jsx("button",{onClick:()=>A("main"),className:"p-1 rounded-full hover:bg-surface text-muted hover:text-foreground transition-colors",children:a.jsx(G2,{size:20})}),a.jsx("h3",{className:"text-lg font-bold text-foreground",children:e.support.faqTitle||"FAQ"})]}),a.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto custom-scrollbar pr-2",children:e.support.faq&&e.support.faq.map((l,u)=>a.jsxs("details",{className:"group bg-surface/50 border border-border rounded-lg overflow-hidden",onToggle:d=>{const f=d.currentTarget;f.open&&setTimeout(()=>{f.scrollIntoView({behavior:"smooth",block:"nearest"})},100)},children:[a.jsxs("summary",{className:"flex items-center justify-between p-3 cursor-pointer hover:bg-surface transition-colors select-none font-medium text-sm text-foreground",children:[a.jsx("span",{children:l.question}),a.jsx("span",{className:"transition-transform group-open:rotate-180 text-muted",children:""})]}),a.jsx("div",{className:"p-3 pt-0 text-sm text-muted border-t border-border/50 bg-background/30 leading-relaxed",children:a.jsx("div",{className:"pt-2",children:l.answer})})]},u))})]}),a.jsxs("div",{className:"border-t border-border mt-6 pt-4 text-center",children:[a.jsx("p",{className:"text-xs text-muted/50 mb-1",children:e.support.disclaimer||" Unofficial App. Not affiliated with NSYSU."}),a.jsx("p",{className:"text-[10px] text-muted/30",children:e.support.copyright||"Data for reference only. Please verify with school system."})]})]})})},h6=({onClose:r,theme:e,setTheme:t,onStartTutorial:s})=>{const{t:A,language:l,setLanguage:u}=At(),[d,f]=k.useState(!1),{login:g}=wu();return k.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[100] p-4 animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-surface border border-border rounded-xl w-full max-w-2xl shadow-2xl overflow-hidden flex flex-col relative animate-in zoom-in-95 duration-300",children:[a.jsxs("div",{className:"absolute top-3 left-3 flex items-center gap-2 z-10",children:[a.jsx("div",{className:"px-3 py-0.5 bg-surface border border-amber-500/50 rounded-full shadow-[0_0_10px_rgba(245,158,11,0.5)]",children:a.jsx("span",{className:"text-xs font-bold bg-gradient-to-r from-amber-400 to-orange-500 bg-clip-text text-transparent",children:gf})}),a.jsx("button",{onClick:()=>u(l==="en"?"zh":"en"),className:"p-1 rounded-full bg-surface hover:bg-background border border-border text-muted hover:text-primary transition-colors",title:A.settings.language,children:a.jsx(H0,{size:14})}),a.jsx("button",{onClick:()=>t(e==="dark"?"light":"dark"),className:"p-1 rounded-full bg-surface hover:bg-background border border-border text-muted hover:text-warning transition-colors",title:e==="dark"?A.settings.lightMode:A.settings.darkMode,children:e==="dark"?a.jsx(px,{size:14}):a.jsx(mx,{size:14})})]}),a.jsx("button",{onClick:()=>r(!1),className:"absolute top-3 right-3 text-muted hover:text-foreground transition-colors p-1",children:a.jsx(xt,{size:20})}),a.jsxs("div",{className:"p-6 pb-2 text-center flex flex-col items-center mt-4",children:[a.jsx("div",{className:"bg-primary/10 p-3 rounded-full mb-3 ring-1 ring-primary/20",children:a.jsx(I5,{size:28,className:"text-primary animate-bounce-subtle"})}),a.jsx("h2",{className:"text-xl font-bold text-foreground",children:A.announcement.title})]}),a.jsx("div",{className:"px-6 py-2",children:a.jsxs("div",{className:"bg-background/50 border border-border/50 rounded-lg p-4 text-left",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3 pb-3 border-b border-border/50",children:[a.jsx("span",{className:"text-sm font-medium text-foreground",children:A.announcement.firstTime}),a.jsxs("button",{onClick:()=>{r(!1),s()},className:"flex items-center gap-1.5 px-3 py-1 bg-primary/10 hover:bg-primary/20 text-primary text-xs font-bold rounded-full border border-primary/20 transition-all hover:scale-105",children:[a.jsx(gx,{size:12}),A.announcement.startTutorial]})]}),a.jsxs("div",{className:"flex items-center gap-2 mb-3 pb-3 border-b border-border/50",children:[a.jsx("span",{className:"text-sm font-medium text-foreground",children:A.announcement.haveQuestions}),a.jsxs("button",{onClick:async()=>{r(!1),await g()},className:"flex items-center gap-2 px-4 py-1.5 bg-white hover:bg-gray-100 text-gray-800 text-sm font-bold rounded-full border border-gray-300 transition-all hover:scale-105 shadow-sm dark:bg-gray-800 dark:border-gray-600 dark:text-white dark:hover:bg-gray-700",children:[a.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",children:[a.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),a.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),a.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),a.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Log in with Google"]})]}),a.jsx("div",{className:"text-foreground/90 text-sm leading-relaxed space-y-1",children:A.announcement.defaultMessage.split(`
`).map((x,y)=>a.jsx("p",{className:`min-h-[1.25rem] ${x.trim()===""?"h-2":""}`,children:x.split(/(\*\*.*?\*\*)/).map((v,N)=>v.startsWith("**")&&v.endsWith("**")?a.jsx("strong",{className:"text-primary font-bold",children:v.slice(2,-2)},N):v)},y))})]})}),a.jsxs("div",{className:"p-6 pt-2 flex flex-col items-center gap-4",children:[a.jsx("p",{className:"text-[#EC9385] text-xs text-center font-bold px-4",children:A.announcement.disclaimer}),a.jsxs("div",{className:"w-full space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx("input",{type:"checkbox",id:"skip-announcement",checked:d,onChange:x=>f(x.target.checked),className:"w-4 h-4 rounded border-gray-600 bg-surface text-primary focus:ring-primary/50"}),a.jsx("label",{htmlFor:"skip-announcement",className:"text-xs text-muted cursor-pointer select-none",children:A.announcement.dontShowAgain})]}),a.jsx("button",{onClick:()=>r(d),className:"w-full bg-[#303030] hover:bg-[#8D9CB2] text-white dark:bg-[#EFEFEF] dark:hover:bg-[#A8C8FA] dark:text-[#303030] font-bold py-3 rounded-lg transition-all shadow-lg hover:shadow-primary/25 active:scale-95",children:A.announcement.close})]})]})]})})},f6=({semesterName:r,availableSemesters:e,onFix:t,onSkip:s,isLoading:A,missingCourses:l=[]})=>{const{t:u}=At(),[d,f]=k.useState("");return Wt.createPortal(a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[10000] p-4 animate-in fade-in duration-300",children:a.jsx("div",{className:"bg-surface border border-yellow-500/50 rounded-xl w-full max-w-md shadow-2xl p-6 relative transition-all",children:A?a.jsxs("div",{className:"flex flex-col items-center justify-center py-8 space-y-4",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-500"}),a.jsxs("p",{className:"text-lg font-bold text-foreground animate-pulse",children:[u.dataFix?.button?`${u.dataFix.autoFix}`:"Fixing...","..."]}),a.jsx("p",{className:"text-sm text-muted",children:u.dataFix?.instruction?u.dataFix.instruction.split("(")[0]:"Matching courses..."})]}):a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:s,className:"absolute right-4 top-4 text-muted hover:text-foreground transition-colors",children:a.jsx(xt,{size:20})}),a.jsxs("div",{className:"flex items-center gap-3 mb-4 text-yellow-500",children:[a.jsx("div",{className:"bg-yellow-500/10 p-2 rounded-full",children:a.jsx(ys,{size:24})}),a.jsx("h2",{className:"text-lg font-bold",children:u.dataFix?.title||"Missing Data Detected"})]}),a.jsxs("p",{className:"text-muted mb-2 leading-relaxed",children:[u.dataFix?.desc||"Some courses in"," ",a.jsx("strong",{className:"text-foreground",children:r})," ",u.dataFix?.descSuffix||"are missing details (Teacher, Department, etc)."]}),l.length>0&&a.jsxs("div",{className:"bg-surface/50 rounded-lg p-3 mb-4 border border-border/50 max-h-32 overflow-y-auto custom-scrollbar",children:[a.jsx("p",{className:"text-xs font-bold text-muted uppercase mb-2",children:"Affected Courses:"}),a.jsx("ul",{className:"list-disc list-inside text-sm text-foreground space-y-1",children:l.map((g,x)=>a.jsx("li",{className:"truncate",children:g},x))})]}),a.jsx("p",{className:"text-sm text-muted mb-6",children:u.dataFix?.instruction||"Please select the original catalog semester (e.g., 114-1) to auto-fill this data."}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-1.5",children:u.dataFix?.sourceLabel||"Original Semester Source"}),a.jsxs("select",{value:d,onChange:g=>f(g.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2.5 text-foreground focus:outline-none focus:ring-2 focus:ring-yellow-500 appearance-none",children:[a.jsx("option",{value:"",children:u.dataFix?.selectPlaceholder||"Select a semester..."}),e.map(g=>{let x=g;return g.endsWith("3")?x=`${g.slice(0,g.length-1)}-${u.catalog?.summer||"Summer"}`:g.length===4&&(x=`${g.substring(0,3)}-${g.substring(3)}`),a.jsx("option",{value:g,children:x},g)})]})]}),a.jsxs("div",{className:"flex gap-3 pt-2",children:[a.jsx("button",{onClick:s,className:"flex-1 px-4 py-2 rounded-lg border border-border text-muted hover:bg-surface transition-colors font-medium",children:u.dataFix?.skip||"Skip"}),a.jsxs("button",{onClick:()=>{d&&t(d)},disabled:!d,className:`flex-1 px-4 py-2 rounded-lg font-bold shadow-lg transition-all flex justify-center items-center gap-2 ${d?"bg-yellow-500 hover:bg-yellow-400 text-black shadow-yellow-500/20":"bg-surface border border-border text-muted cursor-not-allowed"}`,children:[a.jsx(E5,{size:18}),u.dataFix?.autoFix||"Auto Fix"]})]})]})]})})}),document.body)},m6=({candidates:r,userCourse:e,onSelect:t,onCancel:s})=>{const{t:A}=At(),[l,u]=k.useState(null);return k.useEffect(()=>{u(null)},[e.id]),Wt.createPortal(a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[10001] p-4 animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-surface border border-border rounded-xl w-full max-w-lg shadow-2xl flex flex-col max-h-[85vh]",children:[a.jsxs("div",{className:"p-4 border-b border-border bg-background/50 flex justify-between items-center",children:[a.jsx("h2",{className:"text-lg font-bold text-foreground",children:A.courseSelection?.title||"Multiple Matches Found"}),a.jsx("button",{onClick:s,className:"text-muted hover:text-foreground transition-colors",children:a.jsx(xt,{size:20})})]}),a.jsxs("div",{className:"p-4 overflow-y-auto custom-scrollbar",children:[a.jsxs("p",{className:"text-muted mb-4",children:[A.courseSelection?.desc||"We found multiple courses that look like"," ",a.jsx("strong",{className:"text-foreground",children:e.name}),". ",A.courseSelection?.select||"Please select the correct one:"]}),a.jsx("div",{className:"space-y-2",children:r.map(d=>{const f=l===d.id;return a.jsxs("div",{onClick:()=>u(d.id),className:`p-3 rounded-lg border cursor-pointer transition-all flex items-start gap-3 ${f?"bg-primary/20 border-primary shadow-lg shadow-primary/10":"bg-surface border-border hover:bg-surface/80 hover:border-primary/50"}`,children:[a.jsx("div",{className:`mt-1 w-4 h-4 rounded-full border flex items-center justify-center shrink-0 ${f?"border-primary bg-primary":"border-muted"}`,children:f&&a.jsx(vt,{size:10,className:"text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsx("h3",{className:`font-bold ${f?"text-primary":"text-foreground"}`,children:d.name}),a.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded border border-border bg-background/50 text-muted",children:d.id})]}),a.jsxs("div",{className:"text-sm text-muted mt-1 grid grid-cols-2 gap-x-4 gap-y-1",children:[a.jsxs("span",{children:[a.jsxs("span",{className:"opacity-70 mr-1",children:[A.courseSelection?.teacher||"Teacher",":"]}),d.teacher]}),a.jsxs("span",{children:[a.jsxs("span",{className:"opacity-70 mr-1",children:[A.courseSelection?.room||"Room",":"]}),d.room||"-"]})]})]})]},d.id)})})]}),a.jsxs("div",{className:"p-4 border-t border-border bg-background/50 flex gap-3 justify-end",children:[a.jsx("button",{onClick:s,className:"px-4 py-2 rounded-lg text-muted hover:text-foreground hover:bg-surface transition-colors font-medium text-sm",children:A.courseSelection?.cancel||"Skip this Course"}),a.jsx("button",{onClick:()=>{const d=r.find(f=>f.id===l);d&&t(d)},disabled:!l,className:`px-4 py-2 rounded-lg font-bold text-sm shadow-lg transition-all ${l?"bg-primary hover:bg-sky-400 text-white shadow-primary/20":"bg-surface border border-border text-muted cursor-not-allowed"}`,children:A.app.settings==="Settings"?"Confirm Selection":A.courseSelection?.confirm||"Confirm"})]})]})}),document.body)},g6=({patchedCount:r,unmatchedNames:e,onClose:t})=>{const{t:s}=At();return Wt.createPortal(a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[10002] p-4 animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-surface border border-border rounded-xl w-full max-w-md shadow-2xl p-6 relative flex flex-col max-h-[85vh]",children:[a.jsx("button",{onClick:t,className:"absolute right-4 top-4 text-muted hover:text-foreground transition-colors",children:a.jsx(xt,{size:20})}),a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.length>0?a.jsx("div",{className:"bg-red-500/10 p-2 rounded-full text-red-500",children:a.jsx(GD,{size:24})}):a.jsx("div",{className:"bg-green-500/10 p-2 rounded-full text-green-500",children:a.jsx(sC,{size:24})}),a.jsx("h2",{className:"text-lg font-bold text-foreground",children:e.length>0?s.fixReport?.titleAttention||"Fix Report: Attention Needed":s.fixReport?.titleComplete||"Auto-Fix Complete"})]}),a.jsxs("div",{className:"space-y-6 overflow-y-auto custom-scrollbar pr-2",children:[r>0&&a.jsxs("div",{className:"bg-green-500/5 border border-green-500/20 rounded-lg p-4 flex items-center gap-3",children:[a.jsx(sC,{size:20,className:"text-green-500 shrink-0"}),a.jsxs("p",{className:"text-foreground",children:[s.fixReport?.successUpdate||"Successfully updated"," ",a.jsx("strong",{className:"text-green-500",children:r})," ",s.fixReport?.courses||"courses","."]})]}),e.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsx("p",{className:"text-foreground font-medium",children:s.fixReport?.unmatched||"Could not find matches for the following courses:"}),a.jsx("div",{className:"bg-surface/50 border border-border rounded-lg p-1",children:e.map((A,l)=>a.jsxs("div",{className:"px-3 py-2 border-b last:border-0 border-border/50 text-sm text-muted flex items-start gap-2",children:[a.jsx("span",{className:"text-red-500 mt-0.5",children:""}),A]},l))}),a.jsx("p",{className:"text-xs text-muted",children:s.courseSelection?.manualHint||"Please check these courses manually in the planner."})]}),r===0&&e.length===0&&a.jsx("p",{className:"text-muted text-center py-4",children:s.fixReport?.noChanges||"No changes made. Try selecting a different source semester, or the course names might not match the catalog."})]}),a.jsx("div",{className:"mt-6 pt-4 border-t border-border flex justify-end",children:a.jsx("button",{onClick:t,className:"px-6 py-2 rounded-lg bg-primary hover:bg-sky-400 text-white font-bold shadow-lg shadow-primary/20 transition-all",children:s.fixReport?.done||"Done"})})]})}),document.body)},p6=({onConfirm:r,onBackupAndConfirm:e,onCancel:t,existingCount:s})=>{const{t:A}=At(),l=k.useRef(null);return k.useEffect(()=>{const u=d=>{l.current&&!l.current.contains(d.target)&&t()};return document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}},[t]),a.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-[100] p-4 animate-in fade-in duration-200",children:a.jsxs("div",{ref:l,className:"bg-surface border border-border rounded-xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"bg-yellow-500/10 border-b border-yellow-500/20 p-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2 text-yellow-500 font-bold text-lg",children:[a.jsx(ys,{size:24}),A.importModal.title]}),a.jsx("button",{onClick:t,className:"text-muted hover:text-foreground transition-colors",children:a.jsx(xt,{size:20})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("p",{className:"text-foreground",children:[A.importModal.trackCountPrefix," ",a.jsx("span",{className:"font-bold text-primary",children:s})," ",A.importModal.trackCountSuffix]}),a.jsx("p",{className:"text-muted text-sm",children:A.importModal.warning}),a.jsx("p",{className:"text-muted text-sm",children:A.importModal.backupRec})]}),a.jsxs("div",{className:"bg-background/50 p-4 border-t border-border flex flex-col gap-3",children:[a.jsxs("button",{onClick:e,className:"w-full bg-primary hover:bg-sky-400 text-white px-4 py-3 rounded-lg font-bold shadow-lg shadow-primary/20 transition-all flex items-center justify-center gap-2",children:[a.jsx(kf,{size:18}),A.importModal.backupBtn]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx("button",{onClick:t,className:"bg-surface hover:bg-surface/80 border border-border text-foreground px-4 py-2 rounded-lg font-medium transition-colors",children:A.importModal.cancel}),a.jsxs("button",{onClick:r,className:"bg-surface hover:bg-red-500/10 border border-border hover:border-red-500/30 text-muted hover:text-red-500 px-4 py-2 rounded-lg font-medium transition-colors flex items-center justify-center gap-2 group",children:[a.jsx("span",{className:"group-hover:hidden",children:A.importModal.overwrite}),a.jsxs("span",{className:"hidden group-hover:inline flex items-center gap-1",children:[a.jsx(Cc,{size:14}),A.importModal.overwrite]})]})]})]})]})})},x6=({onConfirm:r,onBackupAndConfirm:e,onCancel:t,existingCount:s,filesCount:A})=>{const{t:l}=At(),u=k.useRef(null);return k.useEffect(()=>{const d=f=>{u.current&&!u.current.contains(f.target)&&t()};return document.addEventListener("mousedown",d),()=>{document.removeEventListener("mousedown",d)}},[t]),a.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-[100] p-4 animate-in fade-in duration-200",children:a.jsxs("div",{ref:u,className:"bg-surface border border-border rounded-xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"bg-red-500/10 border-b border-red-500/20 p-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2 text-red-500 font-bold text-lg",children:[a.jsx(ys,{size:24}),l.clearModal.title]}),a.jsx("button",{onClick:t,className:"text-muted hover:text-foreground transition-colors",children:a.jsx(xt,{size:20})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("p",{className:"text-foreground",children:[l.importModal.trackCountPrefix," ",a.jsx("span",{className:"font-bold text-primary",children:s})," ",l.importModal.trackCountSuffix]}),A>0&&a.jsxs("p",{className:"text-foreground",children:["Uploads: ",a.jsx("span",{className:"font-bold text-primary",children:A})," file(s)."]}),a.jsx("p",{className:"text-foreground text-sm",children:"Also clearing: User settings, Custom Labels, Interdisciplinary Status, and Uploaded Files."}),a.jsx("p",{className:"text-muted text-sm",children:l.clearModal.warning}),a.jsx("p",{className:"text-muted text-sm",children:l.clearModal.backupRec})]}),a.jsxs("div",{className:"bg-background/50 p-4 border-t border-border flex flex-col gap-3",children:[a.jsxs("button",{onClick:e,className:"w-full bg-surface hover:bg-surface/80 border border-border text-foreground px-4 py-3 rounded-lg font-medium shadow-sm transition-all flex items-center justify-center gap-2",children:[a.jsx(kf,{size:18}),l.clearModal.backupBtn]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx("button",{onClick:t,className:"bg-surface hover:bg-surface/80 border border-border text-foreground px-4 py-2 rounded-lg font-medium transition-colors",children:l.clearModal.cancel}),a.jsxs("button",{onClick:r,className:"bg-red-600 hover:bg-red-700 text-white border border-red-700 hover:border-red-800 px-4 py-2 rounded-lg font-bold transition-colors flex items-center justify-center gap-2",children:[a.jsx(ru,{size:16}),l.clearModal.clear]})]})]})]})})},y6=({onClose:r,onGoToSettings:e})=>{const{language:t}=At();return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-surface border border-border rounded-xl shadow-2xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-4 border-b border-border flex justify-between items-center bg-primary/5",children:[a.jsxs("div",{className:"flex items-center gap-2 text-primary font-bold text-lg",children:[a.jsx(ik,{size:24}),a.jsx("h2",{children:t==="zh"?"":"Complete Your Profile"})]}),a.jsx("button",{onClick:r,className:"p-1 hover:bg-black/5 dark:hover:bg-white/10 rounded-full transition-colors",children:a.jsx(xt,{size:20})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("p",{className:"text-foreground/90 leading-relaxed",children:t==="zh"?"":"Hey! We noticed you haven't set up your student profile yet (Major, Year, or Credits). For accurate tracking, we recommend setting this up now!"}),a.jsx("p",{className:"text-sm text-muted",children:t==="zh"?"()":"(This notification will only show once)"})]}),a.jsxs("div",{className:"p-4 border-t border-border bg-surface/50 flex gap-3 justify-end",children:[a.jsx("button",{onClick:r,className:"px-4 py-2 rounded-lg text-sm font-medium text-muted hover:text-foreground hover:bg-primary/10 transition-colors",children:t==="zh"?"":"Set up later"}),a.jsx("button",{onClick:e,className:"px-4 py-2 rounded-lg text-sm font-bold bg-primary text-white hover:bg-primary/90 shadow-md transition-all",children:t==="zh"?"":"Go to Settings"})]})]})})},b6=({onClose:r})=>{const{t:e}=At(),t=({title:s,date:A})=>a.jsxs("div",{className:"mb-4",children:[a.jsxs("h3",{className:"text-primary font-bold text-lg mb-1 flex items-center gap-2",children:["- ",s," -"]}),a.jsx("p",{className:"text-foreground pl-4 font-medium whitespace-pre-line",children:A})]});return Wt.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-surface w-full max-w-lg rounded-2xl shadow-2xl flex flex-col overflow-hidden border border-border animate-in zoom-in-95 duration-200 component-padding",children:[a.jsxs("div",{className:"p-4 border-b border-border bg-background/50 flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"p-2 bg-primary/10 rounded-full text-primary",children:a.jsx(ol,{size:20})}),a.jsx("h2",{className:"font-bold text-lg text-foreground",children:e.courseSchedule?.title||"114-2 Course Selection Schedule"})]}),a.jsx("button",{onClick:r,className:"p-2 hover:bg-muted/20 rounded-full transition-colors text-muted hover:text-foreground",children:a.jsx(xt,{size:20})})]}),a.jsxs("div",{className:"p-6 overflow-y-auto max-h-[70vh]",children:[a.jsx(t,{title:e.courseSchedule?.inquiry||"Course Inquiry",date:e.courseSchedule?.inquiryDate||"Starting from: Jan 6 (Tue) 13:00"}),a.jsx(t,{title:e.courseSchedule?.prelim1||"Preliminary Round 1",date:e.courseSchedule?.prelim1Date||"Jan 30 (Fri) 9:00  Feb 2 (Mon) 17:00"}),a.jsx(t,{title:e.courseSchedule?.prelim2||"Preliminary Round 2",date:e.courseSchedule?.prelim2Date||"Feb 4 (Wed) 9:00  Feb 5 (Thu) 17:00"}),a.jsx(t,{title:e.courseSchedule?.addDrop1||"Add/Drop Round 1",date:e.courseSchedule?.addDrop1Date||"Feb 9 (Mon) 9:00  Feb 10 (Tue) 17:00"}),a.jsx(t,{title:e.courseSchedule?.addDrop2||"Add/Drop Round 2",date:e.courseSchedule?.addDrop2Date||"Feb 24 (Tue) 9:00  Feb 25 (Wed) 17:00"}),a.jsxs("div",{className:"mt-8 space-y-2 text-sm",children:[a.jsx("p",{className:"text-muted font-mono",children:e.courseSchedule?.updateTime||"Update Time: 2026.01.06"}),a.jsxs("p",{className:"text-muted",children:[e.courseSchedule?.reference||"Reference",":"," ",a.jsx("a",{href:"https://oaa.nsysu.edu.tw/static/file/3/1003/attach/82/pta_236821_3882484_96074.pdf",target:"_blank",rel:"noreferrer",className:"text-primary hover:underline underline-offset-4 break-all",children:"https://oaa.nsysu.edu.tw/static/file/3/1003/attach/82/pta_236821_3882484_96074.pdf"})]})]})]}),a.jsx("div",{className:"p-3 bg-red-500/10 border-t border-red-500/20 text-center",children:a.jsx("p",{className:"text-xs font-bold text-red-500",children:e.courseSchedule?.warning||"Data is for reference only."})})]})}),document.body)},v6="Brian",w6="CGmanage",B6=({onClose:r,onLogin:e})=>{const[t,s]=k.useState(""),[A,l]=k.useState(""),[u,d]=k.useState(!1),f=k.useRef(null);k.useEffect(()=>{f.current?.focus()},[]);const g=x=>{x.preventDefault();const y=t.toLowerCase();(y===v6.toLowerCase()||y==="abel")&&A===w6?(e(t),r()):(d(!0),l(""))};return Wt.createPortal(a.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-md flex items-center justify-center z-[50000] p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl w-full max-w-sm shadow-2xl p-6 relative",children:[a.jsx("button",{onClick:r,className:"absolute right-4 top-4 text-zinc-500 hover:text-white transition-colors",children:a.jsx(xt,{size:20})}),a.jsxs("div",{className:"flex flex-col items-center mb-6",children:[a.jsx("div",{className:"w-12 h-12 bg-red-500/10 text-red-500 rounded-full flex items-center justify-center mb-4 border border-red-500/20",children:a.jsx(Ss,{size:24})}),a.jsx("h2",{className:"text-xl font-bold text-white",children:"Restricted Access"}),a.jsx("p",{className:"text-sm text-zinc-500",children:"Course Data Inspector"})]}),a.jsxs("form",{onSubmit:g,className:"space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(W2,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-500",size:16}),a.jsx("input",{ref:f,type:"text",value:t,onChange:x=>{s(x.target.value),d(!1)},className:`w-full bg-black/50 border ${u?"border-red-500":"border-zinc-700"} text-white rounded-lg pl-10 pr-4 py-2.5 outline-none focus:ring-2 focus:ring-red-500/50 transition-all placeholder:text-zinc-600`,placeholder:"Admin Name"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(B5,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-500",size:16}),a.jsx("input",{type:"password",value:A,onChange:x=>{l(x.target.value),d(!1)},className:`w-full bg-black/50 border ${u?"border-red-500":"border-zinc-700"} text-white rounded-lg pl-10 pr-4 py-2.5 outline-none focus:ring-2 focus:ring-red-500/50 transition-all placeholder:text-zinc-600`,placeholder:"Passcode"})]}),u&&a.jsx("p",{className:"text-xs text-red-500 text-center font-medium animate-in fade-in slide-in-from-top-1",children:"Invalid Admin ID or Passcode"}),a.jsx("button",{type:"submit",className:"w-full bg-white hover:bg-zinc-200 text-black font-bold py-2.5 rounded-lg transition-colors",children:"Authenticate"})]})]})}),document.body)},C6=[{id:"schedule",title:"Course Selection Schedule",period:180,desc:"Update dates for Prelim, Add/Drop rounds in i18n.ts"},{id:"programs",title:"Cross-Disciplinary Programs",period:365,desc:"Scrape new programs from ctdr.nsysu.edu.tw"},{id:"gen_edu",title:"General Education Courses",period:180,desc:"Verify new sem Gen Edu categories (Primer, etc.)"},{id:"dept_codes",title:"Department Standard Codes",period:365,desc:"Check if new departments (e.g., Semiconductor) are added"},{id:"api_check",title:"API Endpoint Health",period:90,desc:"Verify NSYSU Open Data API endpoints are still valid"}],E6=({courses:r,onClose:e,adminId:t})=>{const[s,A]=k.useState(""),[l,u]=k.useState(null),[d,f]=k.useState(!1),[g,x]=k.useState("data"),{usingBackup:y,lastChecked:v,semesters:N}=cS(),M=k.useMemo(()=>{try{const C=localStorage.getItem(Oc);return C?JSON.parse(C):Wo}catch{return Wo}},[g]),S=k.useMemo(()=>V0(M,113),[M]),V=k.useMemo(()=>{try{const C=localStorage.getItem("nsysu-interdisciplinary-status");return C?JSON.parse(C):{}}catch{return{}}},[g]),[K,G]=k.useState(()=>JSON.parse(localStorage.getItem("nsysu-admin-maintenance-log")||"{}")),z=C=>{const D=Date.now(),j={...K,[C]:D};G(j),localStorage.setItem("nsysu-admin-maintenance-log",JSON.stringify(j))},q=(C,D)=>{const j=K[C];if(!j)return"overdue";const Q=(Date.now()-j)/(1e3*60*60*24);return Q>D?"overdue":Q>D*.8?"due-soon":"ok"},$=()=>{const C=localStorage.getItem("nsysu-force-offline")==="true";localStorage.setItem("nsysu-force-offline",(!C).toString()),window.location.reload()},Y=k.useMemo(()=>{if(!s)return r;const C=s.toLowerCase();return r.filter(D=>D.name.toLowerCase().includes(C)||D.id.includes(C)||D.teacher?.toLowerCase().includes(C)||D.department?.toLowerCase().includes(C))},[r,s]),E=()=>{l&&(navigator.clipboard.writeText(JSON.stringify(l,null,2)),f(!0),setTimeout(()=>f(!1),2e3))},_=(t||"").toLowerCase()==="brian";return Wt.createPortal(a.jsxs("div",{className:"fixed inset-0 bg-black/95 flex z-[50000] animate-in fade-in duration-300 font-mono text-sm",children:[a.jsxs("div",{className:"w-[400px] border-r border-zinc-800 flex flex-col bg-zinc-900/50",children:[a.jsxs("div",{className:`p-4 border-b ${_?"border-purple-900/30 bg-purple-950/10":"border-zinc-800 bg-zinc-900"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:`flex items-center gap-2 ${_?"text-purple-400":"text-emerald-400"}`,children:[_?a.jsx(ZD,{size:20}):a.jsx(Cc,{size:20}),a.jsxs("div",{children:[a.jsx("h2",{className:`font-bold text-lg ${_?"text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-amber-300":"text-white"}`,children:_?"Developer Console":"Admin Console"}),_&&a.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-amber-400/80 font-medium",children:[a.jsx(s5,{size:10})," System Architect"]})]})]}),a.jsx("div",{className:"text-xs text-zinc-500 bg-zinc-800 px-2 py-1 rounded",children:gf})]}),a.jsxs("div",{className:"flex bg-zinc-800/50 p-1 rounded-lg mb-4",children:[a.jsx("button",{onClick:()=>x("data"),className:`flex-1 py-1.5 text-xs font-bold rounded-md transition-all ${g==="data"?"bg-zinc-700 text-white shadow":"text-zinc-500 hover:text-zinc-300"}`,children:"Data"}),a.jsxs("button",{onClick:()=>x("style"),className:`flex-1 py-1.5 text-xs font-bold rounded-md transition-all flex items-center justify-center gap-1 ${g==="style"?"bg-zinc-700 text-white shadow":"text-zinc-500 hover:text-zinc-300"}`,children:[a.jsx(aC,{size:12}),"Design"]}),a.jsx("button",{onClick:()=>x("rules"),className:`flex-1 py-1.5 text-xs font-bold rounded-md transition-all ${g==="rules"?"bg-zinc-700 text-white shadow":"text-zinc-500 hover:text-zinc-300"}`,children:"Logic"}),a.jsxs("button",{onClick:()=>x("maintenance"),className:`flex-1 py-1.5 text-xs font-bold rounded-md transition-all flex items-center justify-center gap-1 ${g==="maintenance"?"bg-zinc-700 text-white shadow":"text-zinc-500 hover:text-zinc-300"}`,children:[a.jsx(tC,{size:12}),"Task"]}),(t||"").toLowerCase()!=="abel"&&a.jsxs("button",{onClick:()=>x("tools"),className:`flex-1 py-1.5 text-xs font-bold rounded-md transition-all flex items-center justify-center gap-1 ${g==="tools"?"bg-zinc-700 text-white shadow":"text-zinc-500 hover:text-zinc-300"}`,children:[a.jsx(xx,{size:12}),"Tools"]})]}),g==="data"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-4 gap-1 mb-4 text-[10px] text-zinc-500 text-center",children:[a.jsxs("div",{className:"bg-zinc-800/50 rounded py-1",children:[a.jsx("div",{className:"text-white font-bold text-xs",children:r.length}),a.jsx("div",{children:"Total"})]}),a.jsxs("div",{className:"bg-blue-500/10 rounded py-1 text-blue-400",children:[a.jsx("div",{className:"font-bold text-xs",children:r.filter(C=>C.fromCatalog).length}),a.jsx("div",{children:"Verif."})]}),a.jsxs("div",{className:"bg-yellow-500/10 rounded py-1 text-yellow-400",children:[a.jsx("div",{className:"font-bold text-xs",children:r.filter(C=>C.userLabels?.includes("manual")).length}),a.jsx("div",{children:"Man."})]}),a.jsxs("div",{className:"bg-red-500/10 rounded py-1 text-red-400",children:[a.jsx("div",{className:"font-bold text-xs",children:r.filter(C=>!C.teacher||!C.department||C.credits===0).length}),a.jsx("div",{children:"Issues"})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(P0,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-500",size:14}),a.jsx("input",{type:"text",value:s,onChange:C=>A(C.target.value),placeholder:"Search by ID, Name, Teacher...",className:"w-full bg-black border border-zinc-700 text-zinc-300 rounded pl-9 pr-3 py-2 outline-none focus:border-emerald-500"})]})]})]}),g==="data"?a.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:Y.map(C=>a.jsxs("div",{onClick:()=>u(C),className:`p-3 border-b border-zinc-800/50 cursor-pointer hover:bg-white/5 transition-colors ${l?.id===C.id?"bg-emerald-500/10 border-l-2 border-l-emerald-500":"border-l-2 border-l-transparent"}`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-1",children:[a.jsx("span",{className:`font-bold line-clamp-1 ${l?.id===C.id?"text-emerald-400":"text-zinc-200"}`,children:C.name}),a.jsx("span",{className:"text-[10px] text-zinc-500",children:C.semester})]}),a.jsxs("div",{className:"flex justify-between text-xs text-zinc-500",children:[a.jsx("span",{children:C.teacher||"<No Teacher>"}),a.jsxs("span",{className:"font-mono text-[10px] opacity-50",children:[C.id.slice(0,8),"..."]})]}),a.jsxs("div",{className:"flex gap-1 mt-2",children:[C.fromCatalog&&a.jsx("span",{className:"px-1.5 py-0.5 bg-blue-500/10 text-blue-400 text-[10px] rounded",children:"Catalog"}),C.userLabels?.includes("manual")&&a.jsx("span",{className:"px-1.5 py-0.5 bg-yellow-500/10 text-yellow-400 text-[10px] rounded",children:"Manual"}),(!C.teacher||!C.department)&&a.jsx("span",{className:"px-1.5 py-0.5 bg-red-500/10 text-red-400 text-[10px] rounded",children:"Missing Data"})]})]},C.id))}):g==="rules"?a.jsxs("div",{className:"p-4 text-zinc-500 text-xs leading-relaxed",children:[a.jsx("p",{className:"mb-4",children:"Select a Logic Flow on the right to visualize how the application calculates credits and processes data."}),a.jsxs("div",{className:"p-3 bg-zinc-800/30 rounded border border-zinc-800",children:[a.jsx("strong",{children:"Legend:"}),a.jsxs("ul",{className:"list-disc pl-4 mt-2 space-y-1",children:[a.jsxs("li",{children:[a.jsx("span",{className:"text-zinc-300",children:"Box"}),": Data or State"]}),a.jsxs("li",{children:[a.jsx("span",{className:"text-emerald-400",children:"Green"}),": Include / Pass"]}),a.jsxs("li",{children:[a.jsx("span",{className:"text-red-400",children:"Red"}),": Exclude / Fail"]})]})]})]}):g==="maintenance"?a.jsxs("div",{className:"p-4 text-zinc-500 text-xs leading-relaxed",children:[a.jsx("p",{className:"mb-4",children:"Maintenance Tasks Overview."}),a.jsx("div",{className:"p-3 bg-zinc-800/30 rounded border border-zinc-800",children:"Updates are manual. Use this checklist to keep data fresh."})]}):a.jsxs("div",{className:"p-4 text-zinc-500 text-xs leading-relaxed",children:[a.jsx("p",{className:"mb-4",children:"Developer Tools & Debugging."}),a.jsx("div",{className:"p-3 bg-zinc-800/30 rounded border border-zinc-800 text-yellow-500",children:" Use with caution. Actions here affect app state directly."})]})]}),a.jsxs("div",{className:"flex-1 flex flex-col bg-[#0d0d0d] relative",children:[a.jsx("button",{onClick:e,className:"absolute right-4 top-4 text-zinc-500 hover:text-white p-2 z-10",children:a.jsx(xt,{size:24})}),g==="style"?a.jsxs("div",{className:"flex-1 p-10 overflow-auto flex flex-col animate-in slide-in-from-bottom-4 duration-300",children:[a.jsx("div",{className:"flex items-center justify-between mb-8",children:a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[a.jsx(aC,{size:24}),"Design System"]}),a.jsx("p",{className:"text-zinc-500 text-sm mt-1",children:"Application color palette and usage guidelines."})]})}),a.jsxs("div",{className:"space-y-8 max-w-4xl",children:[a.jsxs("section",{children:[a.jsx("h3",{className:"text-sm font-bold text-zinc-400 uppercase tracking-wider mb-4 border-b border-zinc-800 pb-2",children:"Core Theme (Dark Mode)"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"p-4 bg-[#303030] rounded-xl border border-zinc-700",children:[a.jsx("div",{className:"h-12 w-full bg-[#303030] rounded mb-2 border border-white/10"}),a.jsx("div",{className:"font-bold text-white text-sm",children:"Background"}),a.jsx("div",{className:"text-[10px] text-zinc-400",children:"#303030 (App Body)"})]}),a.jsxs("div",{className:"p-4 bg-[#424242] rounded-xl border border-zinc-700",children:[a.jsx("div",{className:"h-12 w-full bg-[#424242] rounded mb-2 border border-white/10"}),a.jsx("div",{className:"font-bold text-white text-sm",children:"Surface"}),a.jsx("div",{className:"text-[10px] text-zinc-400",children:"#424242 (Cards/Modals)"})]}),a.jsxs("div",{className:"p-4 bg-[#0d0d0d] rounded-xl border border-zinc-800",children:[a.jsx("div",{className:"h-12 w-full bg-[#A8C8FA] rounded mb-2"}),a.jsx("div",{className:"font-bold text-white text-sm",children:"Primary"}),a.jsx("div",{className:"text-[10px] text-zinc-400",children:"#A8C8FA (Actions/Active)"})]}),a.jsxs("div",{className:"p-4 bg-[#0d0d0d] rounded-xl border border-zinc-800",children:[a.jsx("div",{className:"h-12 w-full bg-[#EFEFEF] rounded mb-2"}),a.jsx("div",{className:"font-bold text-white text-sm",children:"Text"}),a.jsx("div",{className:"text-[10px] text-zinc-400",children:"#EFEFEF (Headings)"})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-sm font-bold text-zinc-400 uppercase tracking-wider mb-4 border-b border-zinc-800 pb-2",children:"Course Categories"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[a.jsxs("div",{className:"bg-[#303030] p-3 rounded border border-zinc-700",children:[a.jsx("div",{style:{backgroundColor:"#FFC8BF",color:"#505050"},className:"px-2 py-1 rounded text-xs font-bold text-center mb-2",children:"Language"}),a.jsx("div",{className:"text-[10px] text-zinc-400 text-center",children:"#FFC8BF"}),a.jsx("div",{className:"text-[10px] text-zinc-500 text-center",children:"Required Foreign Lang"})]}),a.jsxs("div",{className:"bg-[#303030] p-3 rounded border border-zinc-700",children:[a.jsx("div",{style:{backgroundColor:"#FFD5AA",color:"#505050"},className:"px-2 py-1 rounded text-xs font-bold text-center mb-2",children:"Interdisc."}),a.jsx("div",{className:"text-[10px] text-zinc-400 text-center",children:"#FFD5AA"}),a.jsx("div",{className:"text-[10px] text-zinc-500 text-center",children:"Cross-Disciplinary"})]}),a.jsxs("div",{className:"bg-[#303030] p-3 rounded border border-zinc-700",children:[a.jsx("div",{style:{backgroundColor:"#DFFFFB",color:"#505050"},className:"px-2 py-1 rounded text-xs font-bold text-center mb-2",children:"Sports"}),a.jsx("div",{className:"text-[10px] text-zinc-400 text-center",children:"#DFFFFB"}),a.jsx("div",{className:"text-[10px] text-zinc-500 text-center",children:"PE / Military"})]}),a.jsxs("div",{className:"bg-[#303030] p-3 rounded border border-zinc-700",children:[a.jsx("div",{style:{backgroundColor:"#D9FFD4",color:"#505050"},className:"px-2 py-1 rounded text-xs font-bold text-center mb-2",children:"Primer"}),a.jsx("div",{className:"text-[10px] text-zinc-400 text-center",children:"#D9FFD4"}),a.jsx("div",{className:"text-[10px] text-zinc-500 text-center",children:"Gen Edu Primer"})]}),a.jsxs("div",{className:"bg-[#303030] p-3 rounded border border-zinc-700",children:[a.jsx("div",{style:{backgroundColor:"#D8C9FF",color:"#505050"},className:"px-2 py-1 rounded text-xs font-bold text-center mb-2",children:"Boya"}),a.jsx("div",{className:"text-[10px] text-zinc-400 text-center",children:"#D8C9FF"}),a.jsx("div",{className:"text-[10px] text-zinc-500 text-center",children:"Liberal Arts"})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-sm font-bold text-zinc-400 uppercase tracking-wider mb-4 border-b border-zinc-800 pb-2",children:"UI Status"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-[#0d0d0d] p-3 rounded border border-zinc-800 flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded bg-emerald-500/10 text-emerald-500 flex items-center justify-center border border-emerald-500/20",children:a.jsx(vt,{size:16})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-white font-bold",children:"Success"}),a.jsx("div",{className:"text-[10px] text-emerald-500",children:"emerald-500"})]})]}),a.jsxs("div",{className:"bg-[#0d0d0d] p-3 rounded border border-zinc-800 flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded bg-red-500/10 text-red-500 flex items-center justify-center border border-red-500/20",children:a.jsx(xt,{size:16})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-white font-bold",children:"Error/Missing"}),a.jsx("div",{className:"text-[10px] text-red-500",children:"red-500"})]})]}),a.jsxs("div",{className:"bg-[#0d0d0d] p-3 rounded border border-zinc-800 flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded bg-blue-500/10 text-blue-500 flex items-center justify-center border border-blue-500/20",children:a.jsx(Cc,{size:16})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-white font-bold",children:"Info/Catalog"}),a.jsx("div",{className:"text-[10px] text-blue-500",children:"blue-500"})]})]}),a.jsxs("div",{className:"bg-[#0d0d0d] p-3 rounded border border-zinc-800 flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded bg-yellow-500/10 text-yellow-500 flex items-center justify-center border border-yellow-500/20",children:a.jsx(ys,{size:16})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-white font-bold",children:"Warning/Manual"}),a.jsx("div",{className:"text-[10px] text-yellow-500",children:"yellow-500"})]})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-sm font-bold text-zinc-400 uppercase tracking-wider mb-4 border-b border-zinc-800 pb-2",children:"Typography"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"p-4 bg-zinc-900/30 rounded-xl border border-zinc-800",children:[a.jsx("div",{className:"text-2xl font-bold text-white mb-1",children:"Heading 1"}),a.jsx("div",{className:"text-xs text-zinc-500 font-mono",children:"text-2xl font-bold text-foreground"})]}),a.jsxs("div",{className:"p-4 bg-zinc-900/30 rounded-xl border border-zinc-800",children:[a.jsx("div",{className:"text-xl font-semibold text-primary mb-1",children:"Heading 2"}),a.jsx("div",{className:"text-xs text-zinc-500 font-mono",children:"text-xl font-semibold text-primary"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"p-4 bg-zinc-900/30 rounded-xl border border-zinc-800",children:[a.jsx("div",{className:"text-sm text-zinc-300 mb-1",children:"Body Text (Default)"}),a.jsx("div",{className:"text-xs text-zinc-500 font-mono",children:"text-sm text-zinc-300"})]}),a.jsxs("div",{className:"p-4 bg-zinc-900/30 rounded-xl border border-zinc-800",children:[a.jsx("div",{className:"text-xs text-muted mb-1",children:"Muted Text / Metadata"}),a.jsx("div",{className:"text-xs text-zinc-500 font-mono",children:"text-xs text-muted"})]}),a.jsxs("div",{className:"p-4 bg-zinc-900/30 rounded-xl border border-zinc-800",children:[a.jsx("div",{className:"text-xs font-mono text-purple-400 mb-1",children:"Monospaced Code"}),a.jsx("div",{className:"text-xs text-zinc-500 font-mono",children:"font-mono text-xs"})]})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-sm font-bold text-zinc-400 uppercase tracking-wider mb-4 border-b border-zinc-800 pb-2",children:"Components"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-xs font-bold text-zinc-500 mb-4",children:"Buttons"}),a.jsxs("div",{className:"flex flex-wrap gap-4",children:[a.jsx("button",{className:"px-4 py-2 bg-blue-500 text-white rounded-lg text-sm font-bold shadow-lg shadow-blue-500/20",children:"Primary"}),a.jsx("button",{className:"px-4 py-2 bg-zinc-700 text-white rounded-lg text-sm font-bold hover:bg-zinc-600",children:"Secondary"}),a.jsx("button",{className:"px-4 py-2 bg-red-500 text-white rounded-lg text-sm font-bold shadow-lg shadow-red-500/20",children:"Destructive"}),a.jsx("button",{className:"px-4 py-2 bg-zinc-800 text-zinc-400 rounded-lg text-sm font-bold border border-zinc-700 hover:text-white",children:"Outline"})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-xs font-bold text-zinc-500 mb-4",children:"Input Fields"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("input",{type:"text",placeholder:"Standard Input",disabled:!0,className:"w-full bg-black border border-zinc-700 text-zinc-300 rounded px-3 py-2 outline-none focus:border-emerald-500"}),a.jsxs("div",{className:"bg-surface p-3 rounded-lg border border-border flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-foreground font-medium",children:"Card Item"}),a.jsx("span",{className:"text-xs text-muted",children:"Metadata"})]})]})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-sm font-bold text-zinc-400 uppercase tracking-wider mb-4 border-b border-zinc-800 pb-2",children:"Effects & Animations"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"p-4 bg-zinc-900 rounded-xl border border-zinc-800 flex flex-col items-center justify-center gap-2",children:[a.jsx("div",{className:"w-12 h-12 bg-emerald-500/20 rounded-full animate-pulse border border-emerald-500/50"}),a.jsx("span",{className:"text-xs text-zinc-500 font-mono",children:"animate-pulse"})]}),a.jsxs("div",{className:"p-4 bg-zinc-900 rounded-xl border border-zinc-800 flex flex-col items-center justify-center gap-2",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-xl shadow-lg shadow-blue-500/50"}),a.jsx("span",{className:"text-xs text-zinc-500 font-mono",children:"shadow-lg"})]}),a.jsxs("div",{className:"p-4 bg-zinc-900 rounded-xl border border-zinc-800 flex flex-col items-center justify-center gap-2",children:[a.jsx("div",{className:"w-12 h-12 bg-purple-500/10 rounded-xl border border-purple-500/50 hover:bg-purple-500/30 transition-colors duration-300"}),a.jsx("span",{className:"text-xs text-zinc-500 font-mono",children:"transition-colors"})]}),a.jsxs("div",{className:"p-4 bg-zinc-900 rounded-xl border border-zinc-800 flex flex-col items-center justify-center gap-2",children:[a.jsxs("div",{className:"relative flex h-3 w-3",children:[a.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-sky-400 opacity-75"}),a.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-sky-500"})]}),a.jsx("span",{className:"text-xs text-zinc-500 font-mono",children:"animate-ping"})]})]})]})]})]}):g==="data"?l?a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-zinc-800 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-white mb-1",children:l.name}),a.jsx("code",{className:"text-zinc-500",children:l.id})]}),a.jsxs("button",{onClick:E,className:"flex items-center gap-2 px-3 py-1.5 bg-zinc-800 hover:bg-zinc-700 text-zinc-300 rounded transition-colors text-xs",children:[d?a.jsx(vt,{size:14,className:"text-emerald-400"}):a.jsx(t5,{size:14}),d?"Copied!":"Copy JSON"]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-8",children:[a.jsxs("section",{children:[a.jsx("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider mb-3",children:"Core Data"}),a.jsx("table",{className:"w-full text-left border-collapse",children:a.jsxs("tbody",{children:[a.jsxs("tr",{className:"border-b border-zinc-800/50",children:[a.jsx("th",{className:"py-2 text-zinc-400 font-normal w-32",children:"Credits"}),a.jsx("td",{className:"py-2 text-zinc-200",children:l.credits})]}),a.jsxs("tr",{className:"border-b border-zinc-800/50",children:[a.jsx("th",{className:"py-2 text-zinc-400 font-normal",children:"Grade"}),a.jsx("td",{className:"py-2 text-zinc-200",children:l.grade||"-"})]}),a.jsxs("tr",{className:"border-b border-zinc-800/50",children:[a.jsx("th",{className:"py-2 text-zinc-400 font-normal",children:"Category"}),a.jsx("td",{className:"py-2 text-zinc-200",children:l.category})]}),a.jsxs("tr",{className:"border-b border-zinc-800/50",children:[a.jsx("th",{className:"py-2 text-zinc-400 font-normal",children:"Sub-Cat"}),a.jsx("td",{className:"py-2 text-zinc-200",children:l.genEduSubCategory||"-"})]})]})})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider mb-3",children:"Metadata"}),a.jsx("table",{className:"w-full text-left border-collapse",children:a.jsxs("tbody",{children:[a.jsxs("tr",{className:"border-b border-zinc-800/50",children:[a.jsx("th",{className:"py-2 text-zinc-400 font-normal w-32",children:"Teacher"}),a.jsx("td",{className:"py-2 text-zinc-200",children:l.teacher||a.jsx("span",{className:"text-red-500",children:"Missing"})})]}),a.jsxs("tr",{className:"border-b border-zinc-800/50",children:[a.jsx("th",{className:"py-2 text-zinc-400 font-normal",children:"Department"}),a.jsx("td",{className:"py-2 text-zinc-200",children:l.department||a.jsx("span",{className:"text-red-500",children:"Missing"})})]}),a.jsxs("tr",{className:"border-b border-zinc-800/50",children:[a.jsx("th",{className:"py-2 text-zinc-400 font-normal",children:"Orig. ID"}),a.jsx("td",{className:"py-2 text-zinc-200",children:l.originalId||a.jsx("span",{className:"text-zinc-600",children:"N/A"})})]}),a.jsxs("tr",{className:"border-b border-zinc-800/50",children:[a.jsx("th",{className:"py-2 text-zinc-400 font-normal",children:"Orig. Sem"}),a.jsx("td",{className:"py-2 text-zinc-200",children:l.originalSemester||a.jsx("span",{className:"text-red-500",children:"Missing"})})]})]})})]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider mb-3 flex items-center gap-2",children:[a.jsx(o5,{size:14}),"Raw JSON Object"]}),a.jsx("pre",{className:"bg-[#111] border border-zinc-800 rounded-lg p-4 overflow-x-auto text-xs text-blue-300 font-mono leading-relaxed",children:JSON.stringify(l,null,2)})]})]})]}):a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-zinc-600",children:[a.jsx(Cc,{size:48,className:"mb-4 opacity-50"}),a.jsx("p",{children:"Select a course to inspect raw data"})]}):g==="rules"?a.jsxs("div",{className:"flex-1 p-10 overflow-auto flex flex-col items-center animate-in slide-in-from-bottom-4 duration-300",children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-8",children:"Credits Logic Flow"}),a.jsxs("div",{className:"flex flex-col items-center gap-6 max-w-2xl w-full",children:[a.jsx("div",{className:"bg-zinc-800 px-6 py-3 rounded-xl border border-zinc-700 font-bold text-white shadow-lg",children:"Raw Course Data"}),a.jsx("div",{className:"h-8 w-0.5 bg-zinc-700"}),a.jsxs("div",{className:"relative p-4 rounded-xl border border-zinc-700 bg-[#0d0d0d] w-full text-center group hover:border-zinc-500 transition-colors",children:[a.jsx("span",{className:"text-xs text-zinc-500 uppercase tracking-widest font-bold mb-2 block",children:"Check 1"}),a.jsx("div",{className:"text-lg text-zinc-200 font-bold",children:"Is Withdrawn?"}),a.jsx("div",{className:"absolute top-1/2 right-full w-8 h-[1px] bg-red-500/50"}),a.jsx("div",{className:"absolute top-1/2 right-full -translate-x-full -translate-y-1/2 text-red-400 text-xs px-2 whitespace-nowrap",children:"Yes  Discard"})]}),a.jsx("div",{className:"h-8 w-0.5 bg-zinc-700"}),a.jsxs("div",{className:"relative p-4 rounded-xl border border-zinc-700 bg-[#0d0d0d] w-full text-center group hover:border-zinc-500 transition-colors",children:[a.jsx("span",{className:"text-xs text-zinc-500 uppercase tracking-widest font-bold mb-2 block",children:"Check 2"}),a.jsx("div",{className:"text-lg text-zinc-200 font-bold",children:"Is Grade < 60? (or F/E)"}),a.jsx("div",{className:"absolute top-1/2 right-full w-8 h-[1px] bg-red-500/50"}),a.jsx("div",{className:"absolute top-1/2 right-full -translate-x-full -translate-y-1/2 text-red-400 text-xs px-2 whitespace-nowrap",children:"Yes  No Credit (GPA Only)"})]}),a.jsx("div",{className:"h-8 w-0.5 bg-zinc-700"}),a.jsxs("div",{className:"relative p-4 rounded-xl border border-zinc-700 bg-[#0d0d0d] w-full text-center group hover:border-zinc-500 transition-colors",children:[a.jsx("span",{className:"text-xs text-zinc-500 uppercase tracking-widest font-bold mb-2 block",children:"Check 3: Special Category"}),a.jsxs("div",{className:"text-sm text-zinc-300 grid grid-cols-2 gap-4 text-left",children:[a.jsxs("div",{className:"bg-zinc-800/50 p-2 rounded",children:[a.jsx("div",{className:"font-bold text-yellow-400",children:"University Way / Primer"}),a.jsx("div",{className:"text-[10px] text-zinc-500",children:' Adds to "Events" count'}),a.jsx("div",{className:"text-[10px] text-red-400",children:" 0 Credits for Grad"})]}),a.jsxs("div",{className:"bg-zinc-800/50 p-2 rounded",children:[a.jsx("div",{className:"font-bold text-purple-400",children:"Sports / Military"}),a.jsx("div",{className:"text-[10px] text-zinc-500",children:" Included in Transcript"}),a.jsx("div",{className:"text-[10px] text-red-400",children:" 0 Credits for Grad"})]})]})]}),a.jsx("div",{className:"h-8 w-0.5 bg-zinc-700"}),a.jsxs("div",{className:"bg-emerald-500/10 px-8 py-4 rounded-xl border-2 border-emerald-500/50 text-emerald-400 shadow-[0_0_30px_rgba(16,185,129,0.1)] text-center",children:[a.jsx("div",{className:"font-bold text-xl mb-1",children:"Add to Total Credits"}),a.jsx("div",{className:"text-xs opacity-75",children:"Used for Graduation Progress Bar"})]})]}),a.jsx("div",{className:"h-8 w-0.5 bg-zinc-700"}),a.jsxs("section",{className:"relative pl-8 pb-8 border-l-2 border-zinc-800",children:[a.jsx("div",{className:"absolute -left-[11px] top-0 w-6 h-6 rounded-full bg-zinc-800 border-2 border-zinc-600 flex items-center justify-center text-[10px] font-bold",children:"4"}),a.jsx("h3",{className:"text-xl font-bold text-zinc-300 mb-6",children:"Phase 4: GPA Calculation"}),a.jsxs("div",{className:"bg-zinc-900/30 p-4 rounded-lg border border-zinc-800",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsxs("div",{className:"p-3 bg-black/50 rounded border border-zinc-800 text-center flex-1",children:[a.jsx("strong",{className:"text-white block text-sm",children:"Valid Grades"}),a.jsx("span",{className:"text-[10px] text-zinc-400",children:"A+, A ... D, E"}),a.jsx("div",{className:"text-emerald-400 text-xs mt-1",children:"Included in GPA"})]}),a.jsx("div",{className:"text-zinc-600",children:"vs"}),a.jsxs("div",{className:"p-3 bg-black/50 rounded border border-zinc-800 text-center flex-1",children:[a.jsx("strong",{className:"text-white block text-sm",children:"Invalid / Withdraw"}),a.jsx("span",{className:"text-[10px] text-zinc-400",children:"W, X, Exemptions"}),a.jsx("div",{className:"text-red-400 text-xs mt-1",children:"Excluded from GPA"})]})]}),a.jsxs("div",{className:"p-3 bg-zinc-800/50 rounded border border-zinc-700 mb-2",children:[a.jsx("strong",{className:"text-orange-400 block text-sm mb-1",children:" Failure Case (F, Fail, Grade < 60)"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-red-500 font-bold",children:""}),a.jsxs("span",{children:["Credits: ",a.jsx("strong",{children:"0"})," (No Earned Credits)"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(vt,{size:12,className:"text-emerald-500"}),a.jsxs("span",{children:["GPA: ",a.jsx("strong",{children:"Included"})," (Points: 0)"]})]})]})]}),a.jsx("div",{className:"mt-4 p-3 border border-zinc-700 rounded bg-black/30 font-mono text-xs text-center text-zinc-400",children:"GPA = Sum(GradePoints  Credits) / Sum(Credits)"})]})]}),a.jsx("div",{className:"h-8 w-0.5 bg-zinc-700"}),a.jsxs("section",{className:"relative pl-8 pb-8 border-l-2 border-zinc-800",children:[a.jsx("div",{className:"absolute -left-[11px] top-0 w-6 h-6 rounded-full bg-indigo-900 border-2 border-indigo-500 text-indigo-100 flex items-center justify-center text-[10px] font-bold",children:"5"}),a.jsx("h3",{className:"text-xl font-bold text-zinc-300 mb-6",children:"Interdisciplinary & Micro-credits"}),a.jsxs("div",{className:"bg-zinc-900/30 p-4 rounded-lg border border-zinc-800",children:[a.jsxs("div",{className:"flex flex-col items-center gap-4 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2 w-full justify-center",children:[a.jsx("div",{className:"p-2 bg-zinc-800 rounded border border-zinc-700 text-xs text-center w-24",children:"External Activity"}),a.jsx("div",{className:"h-0.5 w-4 bg-zinc-600"}),a.jsx("div",{className:"p-2 bg-zinc-800 rounded border border-zinc-700 text-xs text-center w-24",children:"Verification"}),a.jsx("div",{className:"h-0.5 w-4 bg-zinc-600"}),a.jsx("div",{className:"p-2 bg-indigo-500/10 border border-indigo-500/50 text-indigo-300 rounded text-xs text-center w-28",children:"Micro-credit Item"})]}),a.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-zinc-500",children:[a.jsx("span",{children:"Start"}),a.jsx("div",{className:"h-0.5 w-8 bg-zinc-700"}),a.jsx("span",{className:"text-emerald-500",children:"Process"}),a.jsx("div",{className:"h-0.5 w-8 bg-zinc-700"}),a.jsx("span",{className:"text-indigo-400",children:"Result"})]}),a.jsxs("div",{className:"w-full border-t border-zinc-800 pt-4 flex justify-between items-start gap-4",children:[a.jsxs("div",{className:"flex-1 text-center",children:[a.jsx("div",{className:"text-zinc-400 text-xs font-bold mb-1",children:"Constraints"}),a.jsxs("div",{className:"text-[10px] text-zinc-500 space-y-1",children:[a.jsxs("p",{children:[" Max ",a.jsx("span",{className:"text-white",children:"1.0"})," credit / semester"]}),a.jsxs("p",{children:[" Excess credits fill ",a.jsx("span",{className:"text-white",children:"older gaps"})," priority"]})]})]}),a.jsx("div",{className:"w-px bg-zinc-800 self-stretch"}),a.jsxs("div",{className:"flex-1 text-center",children:[a.jsx("div",{className:"text-emerald-400 text-xs font-bold mb-1",children:"Output"}),a.jsxs("div",{className:"text-[10px] text-zinc-500",children:[a.jsxs("p",{children:["Added directly to ",a.jsx("span",{className:"text-white",children:"Graduation Total"})]}),a.jsx("p",{className:"text-red-400 opacity-80",children:"(Not included in GPA)"})]})]})]})]}),a.jsxs("div",{className:"bg-black/40 rounded border border-zinc-800 p-3",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"text-xs font-bold text-zinc-300",children:"Current Status (Simulated)"}),a.jsx("span",{className:"text-[10px] bg-indigo-500/20 text-indigo-300 px-1.5 py-0.5 rounded",children:"Live Data"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[a.jsxs("div",{className:"bg-zinc-800/50 rounded p-2",children:[a.jsx("div",{className:"text-[10px] text-zinc-500",children:"Total Raw"}),a.jsx("div",{className:"text-sm font-mono text-zinc-300",children:Object.values(S.rawStats).reduce((C,D)=>C+D,0).toFixed(1)})]}),a.jsxs("div",{className:"bg-indigo-500/10 border border-indigo-500/20 rounded p-2",children:[a.jsx("div",{className:"text-[10px] text-indigo-300",children:"Effective"}),a.jsxs("div",{className:"text-sm font-mono text-indigo-400 font-bold",children:[S.grandTotalEffective," / 6.0"]})]})]}),S.grandTotalEffective>0&&a.jsxs("div",{className:"mt-2 text-[10px] text-zinc-500 text-center",children:["Contributing ",a.jsxs("span",{className:"text-indigo-400 font-bold",children:["+",S.grandTotalEffective]})," to Graduation Progress"]})]})]})]}),a.jsx("div",{className:"h-8 w-0.5 bg-zinc-700"}),a.jsxs("section",{className:"relative pl-8 pb-8 border-l-2 border-zinc-800",children:[a.jsx("div",{className:"absolute -left-[11px] top-0 w-6 h-6 rounded-full bg-cyan-900 border-2 border-cyan-500 text-cyan-100 flex items-center justify-center text-[10px] font-bold",children:"6"}),a.jsx("h3",{className:"text-xl font-bold text-zinc-300 mb-6",children:"International & Interdisciplinary Limit"}),a.jsxs("div",{className:"bg-zinc-900/30 p-4 rounded-lg border border-zinc-800",children:[a.jsxs("div",{className:"flex flex-col items-center gap-4 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2 w-full justify-center",children:[a.jsx("div",{className:"grid grid-cols-3 gap-1",children:[1,2,3,4,5,6,7,8,9].map(C=>a.jsx("div",{className:"w-6 h-6 bg-zinc-800 border border-zinc-700 rounded flex items-center justify-center text-[10px] text-zinc-500",children:C},C))}),a.jsx("div",{className:"h-0.5 w-4 bg-zinc-600"}),a.jsx("div",{className:"p-2 bg-zinc-800 rounded border border-zinc-700 text-xs text-center",children:"Verify Any (1)"}),a.jsx("div",{className:"h-0.5 w-4 bg-zinc-600"}),a.jsx("div",{className:"p-2 bg-cyan-500/10 border border-cyan-500/50 text-cyan-300 rounded text-xs text-center w-28",children:"Requirement Met"})]}),a.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-zinc-500",children:[a.jsx("span",{children:"9 Options"}),a.jsx("div",{className:"h-0.5 w-8 bg-zinc-700"}),a.jsx("span",{className:"text-emerald-500",children:"Check"}),a.jsx("div",{className:"h-0.5 w-8 bg-zinc-700"}),a.jsx("span",{className:"text-cyan-400",children:"Result"})]})]}),a.jsxs("div",{className:"bg-black/40 rounded border border-zinc-800 p-3",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"text-xs font-bold text-zinc-300",children:"Current Status (Simulated)"}),a.jsx("span",{className:"text-[10px] bg-cyan-500/20 text-cyan-300 px-1.5 py-0.5 rounded",children:"Live Data"})]}),a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-[10px] text-zinc-500 mb-1",children:"Completed Items"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:[1,2,3,4,5,6,7,8,9].map(C=>{const D=V[C];return a.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center text-[10px] font-bold ${D?"bg-cyan-500 text-black":"bg-zinc-800 text-zinc-600"}`,children:C},C)})})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-[10px] text-zinc-500",children:"Status"}),[1,2,3,4,5,6,7,8,9].some(C=>V[C])?a.jsxs("div",{className:"text-emerald-400 font-bold flex items-center justify-end gap-1",children:[a.jsx(vt,{size:14})," Passed"]}):a.jsxs("div",{className:"text-red-400 font-bold flex items-center justify-end gap-1",children:[a.jsx(xt,{size:14})," Incomplete"]})]})]})]})]})]}),a.jsx("div",{className:"h-8 w-0.5 bg-zinc-700"}),a.jsxs("section",{className:"relative pl-8 pb-8 border-l-2 border-zinc-800",children:[a.jsx("div",{className:"absolute -left-[11px] top-0 w-6 h-6 rounded-full bg-purple-900 border-2 border-purple-500 text-purple-100 flex items-center justify-center text-[10px] font-bold",children:a.jsx(Cc,{size:12})}),a.jsx("h3",{className:"text-xl font-bold text-zinc-300 mb-6",children:"Backup File Structure"}),a.jsxs("div",{className:"bg-zinc-900/30 p-4 rounded-lg border border-zinc-800",children:[a.jsxs("div",{className:"font-mono text-xs space-y-2",children:[a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"version:"}),a.jsx("span",{className:"text-zinc-400",children:"number (Schema Version)"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"lastUpdated:"}),a.jsx("span",{className:"text-zinc-400",children:"ISO Date String"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"settings:"}),a.jsx("span",{className:"text-zinc-400",children:"{ studentClass, major, entranceYear, graduationCredits }"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"courses:"}),a.jsx("span",{className:"text-zinc-400",children:"Array<Course> (All added courses)"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"labels:"}),a.jsx("span",{className:"text-zinc-400",children:"{ library, map } (Custom Tags)"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"plannerDraft:"}),a.jsx("span",{className:"text-zinc-400",children:"LocalStorage Draft State"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"interdisciplinaryStatus:"}),a.jsx("span",{className:"text-zinc-400",children:"Object (Interdisciplinary Check Settings)"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"minorData:"}),a.jsx("span",{className:"text-zinc-400",children:"Object (Minor Requirement Progress)"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"microCreditsData:"}),a.jsx("span",{className:"text-zinc-400",children:"Object (Micro-credits Progress)"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"teacherEducationData:"}),a.jsx("span",{className:"text-zinc-400",children:"Object (Teacher Ed. Program Data)"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"doubleMajorData:"}),a.jsx("span",{className:"text-zinc-400",children:"Object (Double Major Data)"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"crossDisciplinaryData:"}),a.jsx("span",{className:"text-zinc-400",children:"Object (Cross-disciplinary Program Data)"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"diverseLearningData:"}),a.jsx("span",{className:"text-zinc-400",children:"Object (Diverse Learning Program Data)"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"interdisciplinaryCourseData:"}),a.jsx("span",{className:"text-zinc-400",children:"Object (Interdisciplinary Course Data)"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"interdisciplinaryNotes:"}),a.jsx("span",{className:"text-zinc-400",children:"Object (User Notes for Checks 1-10)"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"assets:"}),a.jsx("span",{className:"text-zinc-400",children:"Base64 Encoded Images (Course Cards)"})]})]}),a.jsx("div",{className:"mt-4 p-2 bg-purple-500/10 border border-purple-500/20 rounded text-[10px] text-purple-300",children:"Full state snapshot. Importing this file restores the exact user session state."})]})]}),a.jsxs("section",{className:"relative pl-8",children:[a.jsx("div",{className:"absolute -left-[11px] top-0 w-6 h-6 rounded-full bg-blue-900 border-2 border-blue-500 text-blue-100 flex items-center justify-center text-[10px] font-bold",children:"i"}),a.jsx("h3",{className:"text-xl font-bold text-zinc-300 mb-6",children:"System Status"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-zinc-900/50 p-4 rounded-xl border border-zinc-700",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2 font-bold text-zinc-300",children:[a.jsx(X5,{size:16}),"API Connection"]}),a.jsx("div",{className:"flex items-center gap-2 text-sm",children:y?a.jsxs("span",{className:"text-orange-400 flex items-center gap-1",children:[a.jsx(oC,{size:14})," Offline Mode (Backup Data)"]}):a.jsxs("span",{className:"text-emerald-400 flex items-center gap-1",children:[a.jsx(dk,{size:14})," Online (Live API)"]})}),a.jsxs("div",{className:"text-[10px] text-zinc-500 mt-2",children:["Latest Check: ",v?new Date(v).toLocaleTimeString():"Never"]})]}),a.jsxs("div",{className:"bg-zinc-900/50 p-4 rounded-xl border border-zinc-700",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3 font-bold text-zinc-300",children:[a.jsx(ol,{size:16}),"API Scope & Status"]}),a.jsx("div",{className:"flex flex-col gap-2 max-h-[120px] overflow-y-auto custom-scrollbar pr-2",children:N.map((C,D)=>{const j=D<=1;return a.jsxs("div",{className:"flex justify-between items-center text-xs p-2 bg-black/40 rounded border border-zinc-800",children:[a.jsx("span",{className:"font-mono text-zinc-200",children:C}),j?a.jsxs("span",{className:"flex items-center gap-1.5 text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded-full",children:[a.jsxs("span",{className:"relative flex h-2 w-2",children:[a.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),a.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-emerald-500"})]}),"Monitoring"]}):a.jsxs("span",{className:"text-zinc-500 bg-zinc-800 px-2 py-0.5 rounded-full flex items-center gap-1",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-zinc-600"}),"Static"]})]},C)})}),a.jsx("div",{className:"text-[10px] text-zinc-500 mt-2 text-center",children:"Only the latest 2 semesters are constantly scanned for changes. Older data is archived."})]})]})]})]}):g==="maintenance"?a.jsxs("div",{className:"flex-1 p-10 overflow-auto flex flex-col animate-in slide-in-from-bottom-4 duration-300",children:[a.jsx("div",{className:"flex items-center justify-between mb-8",children:a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[a.jsx(tC,{size:24}),"Notification Center"]}),a.jsx("p",{className:"text-zinc-500 text-sm mt-1",children:"Manual maintenance tasks and verification checklist."})]})}),a.jsx("div",{className:"grid gap-4 max-w-4xl",children:C6.map(C=>{const D=q(C.id,C.period),j=K[C.id];return a.jsxs("div",{className:`p-4 rounded-xl border flex items-center gap-4 transition-all ${D==="overdue"?"bg-red-500/5 border-red-500/30":D==="due-soon"?"bg-orange-500/5 border-orange-500/30":"bg-zinc-900/50 border-zinc-800"}`,children:[a.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${D==="overdue"?"bg-red-500/20 text-red-400":D==="due-soon"?"bg-orange-500/20 text-orange-400":"bg-zinc-800 text-zinc-400"}`,children:D==="overdue"?a.jsx(ys,{size:20}):D==="due-soon"?a.jsx(fx,{size:20}):a.jsx(vt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h3",{className:"font-bold text-zinc-200",children:C.title}),D==="overdue"&&a.jsx("span",{className:"bg-red-500 text-white text-[10px] px-1.5 py-0.5 rounded uppercase font-bold",children:"Overdue"}),D==="due-soon"&&a.jsx("span",{className:"bg-orange-500 text-white text-[10px] px-1.5 py-0.5 rounded uppercase font-bold",children:"Due Soon"})]}),a.jsx("p",{className:"text-xs text-zinc-500 truncate",children:C.desc})]}),a.jsxs("div",{className:"text-right mr-4 min-w-[120px]",children:[a.jsx("div",{className:"text-xs text-zinc-400",children:"Last Checked"}),a.jsx("div",{className:"font-mono text-sm text-zinc-200",children:j?new Date(j).toLocaleDateString():"Never"})]}),a.jsx("button",{onClick:()=>z(C.id),className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg text-xs font-bold transition-colors",children:"Mark Done"})]},C.id)})})]}):a.jsxs("div",{className:"flex-1 p-10 overflow-auto flex flex-col animate-in slide-in-from-bottom-4 duration-300",children:[a.jsx("div",{className:"flex items-center justify-between mb-8",children:a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[a.jsx(xx,{size:24}),"Developer Tools"]}),a.jsx("p",{className:"text-zinc-500 text-sm mt-1",children:"Debug utils and granular cache control."})]})}),a.jsxs("div",{className:"max-w-4xl space-y-8",children:[a.jsxs("section",{children:[a.jsxs("h3",{className:"text-sm font-bold text-zinc-400 uppercase tracking-wider mb-4 flex items-center gap-2",children:[a.jsx(iC,{size:14}),"Granular Cache Management"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 border border-zinc-800 rounded-xl bg-zinc-900/30",children:[a.jsx("div",{className:"font-bold text-zinc-200 mb-1",children:"User Settings"}),a.jsx("div",{className:"text-xs text-zinc-500 mb-4 h-8",children:"Major, Entrance Year, Theme, Language."}),a.jsxs("button",{onClick:()=>{localStorage.removeItem("nsysu-major"),localStorage.removeItem("nsysu-entrance-year"),localStorage.removeItem("nsysu-theme"),localStorage.removeItem("nsysu-student-class"),window.location.reload()},className:"w-full py-2 bg-zinc-800 hover:bg-zinc-700 text-white text-xs rounded transition-colors flex items-center justify-center gap-2",children:[a.jsx(jn,{size:12})," Clear Settings"]})]}),a.jsxs("div",{className:"p-4 border border-zinc-800 rounded-xl bg-zinc-900/30",children:[a.jsx("div",{className:"font-bold text-zinc-200 mb-1",children:"Tutorial & Tips"}),a.jsx("div",{className:"text-xs text-zinc-500 mb-4 h-8",children:'Reset "Seen" status for all tutorials.'}),a.jsxs("button",{onClick:()=>{localStorage.removeItem("nsysu-tutorial-seen"),localStorage.removeItem("nsysu-last-announcement-ver"),localStorage.removeItem("nsysu-setup-reminder-seen"),window.location.reload()},className:"w-full py-2 bg-zinc-800 hover:bg-zinc-700 text-white text-xs rounded transition-colors flex items-center justify-center gap-2",children:[a.jsx(iC,{size:12})," Reset Tutorials"]})]}),a.jsxs("div",{className:"p-4 border border-zinc-800 rounded-xl bg-zinc-900/30",children:[a.jsx("div",{className:"font-bold text-zinc-200 mb-1",children:"API Catalog Cache"}),a.jsx("div",{className:"text-xs text-zinc-500 mb-4 h-8",children:"Clears browser memory of fetched courses."}),a.jsxs("button",{onClick:()=>window.location.reload(),className:"w-full py-2 bg-blue-600 hover:bg-blue-500 text-white text-xs rounded transition-colors flex items-center justify-center gap-2",children:[a.jsx(V5,{size:12})," Force Reload"]})]})]})]}),a.jsx("div",{className:"h-px bg-zinc-800"}),a.jsxs("section",{children:[a.jsxs("h3",{className:"text-sm font-bold text-zinc-400 uppercase tracking-wider mb-4 flex items-center gap-2",children:[a.jsx(rC,{size:14}),"Feature Flags & Debug"]}),a.jsxs("div",{className:"bg-zinc-900/30 border border-zinc-800 rounded-xl overflow-hidden",children:[a.jsxs("div",{className:"p-4 flex items-center justify-between border-b border-zinc-800 last:border-0 hover:bg-zinc-800/10",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-red-500/10 text-red-400 flex items-center justify-center",children:a.jsx(oC,{size:16})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-bold text-zinc-200 text-sm",children:"Force Offline Mode"}),a.jsx("div",{className:"text-xs text-zinc-500",children:"Simulate API failure to test backup data fallback"})]})]}),a.jsx("button",{onClick:$,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${localStorage.getItem("nsysu-force-offline")==="true"?"bg-emerald-500":"bg-zinc-700"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition transition-transform ${localStorage.getItem("nsysu-force-offline")==="true"?"translate-x-6":"translate-x-1"}`})})]}),a.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-zinc-800/10 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500/10 text-purple-400 flex items-center justify-center",children:a.jsx(rC,{size:16})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-bold text-zinc-200 text-sm",children:"Debug Boundaries"}),a.jsx("div",{className:"text-xs text-zinc-500",children:"Highlight UI component boundaries (Red Outlines)"})]})]}),a.jsx("button",{onClick:()=>{const D=!(localStorage.getItem("nsysu-debug-boundaries")==="true");localStorage.setItem("nsysu-debug-boundaries",D.toString()),D?document.body.classList.add("debug-outlines"):document.body.classList.remove("debug-outlines"),G(j=>({...j}))},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${localStorage.getItem("nsysu-debug-boundaries")==="true"?"bg-purple-600":"bg-zinc-700"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition transition-transform ${localStorage.getItem("nsysu-debug-boundaries")==="true"?"translate-x-6":"translate-x-1"}`})})]})]})]})]})]})]})]}),document.body)},N6=({onAccept:r,onDecline:e,theme:t})=>{const{language:s}=At(),{logout:A}=wu(),[l,u]=k.useState(!1);k.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]);const d=async()=>{try{await A(),e()}catch(f){console.error("Failed to logout on decline",f)}};return a.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-surface border border-border rounded-xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[a.jsx("div",{className:"p-6 border-b border-border flex items-center justify-between bg-background",children:a.jsx("div",{className:"flex items-center gap-3",children:a.jsx("img",{src:t==="dark"?"./Dark_mode_full.png":"./Light_mode_full.png",alt:"ClearGrad",className:"h-8 w-auto object-contain"})})}),a.jsxs("div",{className:"p-6 overflow-y-auto flex-1 bg-surface",children:[a.jsx("h2",{className:"text-xl font-bold text-foreground mb-4",children:s==="zh"?" ClearGrad  - ":" ClearGrad - Data Usage & Disclaimer"}),a.jsx("div",{className:"space-y-4 text-sm text-foreground/90 leading-relaxed bg-background/50 p-5 rounded-lg border border-border/50",children:s==="zh"?a.jsxs(a.Fragment,{children:[a.jsx("p",{children:" ClearGrad"}),a.jsx("h3",{className:"font-semibold text-primary mt-6 mb-2",children:"1.  (Privacy & Data Collection)"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:""}),"  Google Email Google Firebase "]}),a.jsxs("li",{children:[a.jsx("strong",{children:" (Local-First)"})," /PDF"]})]}),a.jsx("h3",{className:"font-semibold text-primary mt-6 mb-2",children:"2.  (Disclaimer of Liability)"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsx("li",{children:""}),a.jsx("li",{children:""}),a.jsx("li",{children:""})]}),a.jsx("h3",{className:"font-semibold text-primary mt-6 mb-2",children:"3.  (Official Integration & Data Transfer)"}),a.jsx("p",{children:"ClearGrad "}),a.jsx("p",{children:" "}),a.jsx("h3",{className:"font-semibold text-primary mt-6 mb-2",children:"4.  (Right to Erasure)"}),a.jsx("p",{children:" Google "})]}):a.jsxs(a.Fragment,{children:[a.jsx("p",{children:"Welcome to ClearGrad! To provide a seamless cross-device experience, this system uses cloud synchronization. Before enabling, please read and agree to the following terms:"}),a.jsx("h3",{className:"font-semibold text-primary mt-6 mb-2",children:"1. Privacy & Data Collection"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Encrypted Cloud Backup:"})," When you log in with your Google account, the system collects your basic identification information (Email, Display Name) as well as your course drafts and profile settings. This data is securely encrypted and stored in the Google Firebase cloud database using the highest level security rules. No developer or third party can access or read your personal schedule except yourself."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Local-First Proof Documents:"}),' To maximize your privacy, any physical proofs such as transcripts or approval letters (images/PDF) you upload will only be encrypted and stored on your current device (browser) and will never be uploaded to our cloud servers. Only the "file name and presence flag" are synced to the cloud for cross-device identification.']})]}),a.jsx("h3",{className:"font-semibold text-primary mt-6 mb-2",children:"2. Disclaimer of Liability"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsx("li",{children:"This system is an independent open-source tool to assist students in tracking credits and is not an official university application."}),a.jsx("li",{children:"We strive to ensure the accuracy of credit calculations and requirement checks, but do not guarantee complete consistency with the university's academic affairs system."}),a.jsx("li",{children:"You understand and agree: Final graduation qualifications, credit recognition, and interdisciplinary evaluations are solely subject to the final review of your university's official academic affairs system and department office. The development team bears no legal or compensatory responsibility for misjudgments in scheduling or delayed graduation resulting from reliance on this system."})]}),a.jsx("h3",{className:"font-semibold text-primary mt-6 mb-2",children:"3. Official Integration & Data Transfer"}),a.jsx("p",{children:"ClearGrad will actively seek opportunities for official system integration or handover with universities (e.g., National Sun Yat-sen University) in the future to provide a longer-term, more stable service."}),a.jsx("p",{children:"You agree that in the event of such a system handover or merge, the development team may safely transfer your account and course data to the university's official servers in compliance with personal data protection laws. After the data transfer is complete, the management and privacy terms of your data will follow the official privacy policy published by the university."}),a.jsx("h3",{className:"font-semibold text-primary mt-6 mb-2",children:"4. Right to Erasure"}),a.jsx("p",{children:"You have full control over your personal data. You can clear your cloud backup data in the system settings at any time, or terminate the sync service by unlinking your Google account."})]})})]}),a.jsxs("div",{className:"p-6 border-t border-border bg-background flex flex-col gap-4",children:[a.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",onClick:()=>u(!l),children:[a.jsx("div",{className:`mt-0.5 w-5 h-5 rounded border flex items-center justify-center transition-colors flex-shrink-0 ${l?"bg-primary border-primary text-white":"border-gray-500 group-hover:border-primary"}`,children:l&&a.jsx(vt,{size:14})}),a.jsx("span",{className:"text-sm font-medium text-foreground select-none",children:s==="zh"?"ClearGrad ":"I have read and agree to the ClearGrad Data Usage & Disclaimer, and agree to enable cloud sync."})]}),a.jsxs("div",{className:"flex justify-between items-center mt-2",children:[a.jsx("button",{onClick:d,className:"px-4 py-2 rounded-lg text-sm font-medium text-muted hover:text-red-400 hover:bg-red-400/10 transition-colors",children:s==="zh"?"":"[ Decline & Logout ]"}),a.jsx("button",{onClick:r,disabled:!l,className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${l?"bg-primary text-white shadow-lg shadow-primary/20 hover:bg-primary/90":"bg-surface border border-border text-muted cursor-not-allowed"}`,children:s==="zh"?"":"Accept & Continue"})]})]})]})})},S6=({onConfirm:r,onCancel:e})=>{const{language:t}=At();return a.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:a.jsx("div",{className:"bg-surface border border-red-500/30 rounded-xl shadow-2xl shadow-red-500/10 w-full max-w-md overflow-hidden animate-in fade-in zoom-in duration-300",children:a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"h-12 w-12 rounded-full bg-red-500/10 text-red-500 flex items-center justify-center mb-4 border border-red-500/20",children:a.jsx(ys,{size:24,className:"animate-pulse"})}),a.jsx("h2",{className:"text-xl font-bold text-foreground mb-2",children:t==="zh"?"":"Delete Cloud Backup & Logout"}),a.jsx("p",{className:"text-sm text-muted mb-4 leading-relaxed",children:t==="zh"?"":"Are you sure you want to permanently delete all backup data on the cloud? This operation cannot be undone. Your local course scheduling data will be retained, and you will be logged out."}),a.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[a.jsx("button",{onClick:e,className:"px-4 py-2 rounded-lg text-sm font-medium text-muted hover:text-foreground hover:bg-surface/80 border border-border/50 transition-colors",children:t==="zh"?"":"Cancel"}),a.jsxs("button",{onClick:r,className:"px-6 py-2 rounded-lg text-sm font-bold bg-red-500 text-white shadow-lg shadow-red-500/20 hover:bg-red-600 transition-all flex items-center gap-2",children:[a.jsx(jn,{size:16}),t==="zh"?"":"Delete & Logout"]})]})]})})})},_6=({onResolve:r})=>{const{language:e}=At();return k.useEffect(()=>{const t=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=t}},[]),a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] flex items-center justify-center p-4",children:a.jsx("div",{className:"bg-surface border border-yellow-500/30 rounded-xl shadow-2xl shadow-yellow-500/10 w-full max-w-lg overflow-hidden animate-in fade-in zoom-in duration-300 flex flex-col max-h-[90vh]",children:a.jsxs("div",{className:"p-6 overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"h-10 w-10 rounded-full bg-yellow-500/10 text-yellow-500 flex items-center justify-center border border-yellow-500/20 flex-shrink-0",children:a.jsx(ys,{size:20,className:"animate-pulse"})}),a.jsx("h2",{className:"text-xl font-bold text-foreground",children:e==="zh"?"":"Cloud Backup Conflict Detected"})]}),a.jsxs("div",{className:"space-y-4 text-sm text-foreground/90 leading-relaxed bg-background/50 p-4 rounded-lg border border-border/50",children:[a.jsx("p",{children:e==="zh"?"":"The system detected unsynced progress on this device, but your cloud also has a previous backup."}),a.jsx("p",{className:"font-semibold text-yellow-500/90 dark:text-yellow-400",children:e==="zh"?"":"Please choose which data to keep. (Warning: Overwritten data cannot be recovered)"})]}),a.jsxs("div",{className:"mt-6 flex flex-col gap-3",children:[a.jsxs("button",{onClick:()=>r("cloud"),className:"w-full flex items-center justify-center gap-3 px-6 py-3.5 rounded-lg font-bold bg-primary text-white shadow-lg shadow-primary/20 hover:bg-primary/90 transition-all border border-transparent",children:[a.jsx($D,{size:20}),a.jsxs("div",{className:"flex flex-col items-start leading-tight",children:[a.jsx("span",{children:e==="zh"?"":"Download Cloud Backup"}),a.jsx("span",{className:"text-xs font-medium opacity-80",children:e==="zh"?"()":"(Keep old records, overwrite this device)"})]})]}),a.jsxs("button",{onClick:()=>r("local"),className:"w-full flex items-center justify-center gap-3 px-6 py-3.5 rounded-lg font-bold bg-surface text-foreground border border-border hover:bg-surface/80 hover:border-border/80 transition-all",children:[a.jsx(JD,{size:20,className:"text-muted"}),a.jsxs("div",{className:"flex flex-col items-start leading-tight",children:[a.jsx("span",{children:e==="zh"?"":"Upload Current Progress"}),a.jsx("span",{className:"text-xs font-medium text-muted",children:e==="zh"?"()":"(Keep new progress, overwrite cloud backup)"})]})]}),a.jsx("div",{className:"h-px w-full bg-border my-2"}),a.jsxs("button",{onClick:()=>r("cancel"),className:"w-full flex items-center justify-center gap-3 px-6 py-3 rounded-lg font-medium text-red-500 hover:bg-red-500/10 transition-all border border-transparent",children:[a.jsx(U5,{size:18}),a.jsx("span",{children:e==="zh"?" ()":"Cancel Login (Decide Later)"})]})]})]})})})};let qx={},mS;function Vp(r={}){qx={animate:!0,allowClose:!0,overlayClickBehavior:"close",overlayOpacity:.7,smoothScroll:!1,disableActiveInteraction:!1,showProgress:!1,stagePadding:10,stageRadius:5,popoverOffset:10,showButtons:["next","previous","close"],disableButtons:[],overlayColor:"#000",...r}}function Ie(r){return r?qx[r]:qx}function j6(r){mS=r}function Gs(){return mS}let pf={};function bh(r,e){pf[r]=e}function QA(r){var e;(e=pf[r])==null||e.call(pf)}function T6(){pf={}}function vh(r,e,t,s){return(r/=s/2)<1?t/2*r*r+e:-t/2*(--r*(r-2)-1)+e}function gS(r){const e='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])';return r.flatMap(t=>{const s=t.matches(e),A=Array.from(t.querySelectorAll(e));return[...s?[t]:[],...A]}).filter(t=>getComputedStyle(t).pointerEvents!=="none"&&F6(t))}function pS(r){if(!r||Q6(r))return;const e=Ie("smoothScroll"),t=r.offsetHeight>window.innerHeight;r.scrollIntoView({behavior:!e||U6(r)?"auto":"smooth",inline:"center",block:t?"start":"center"})}function U6(r){if(!r||!r.parentElement)return;const e=r.parentElement;return e.scrollHeight>e.clientHeight}function Q6(r){const e=r.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}function F6(r){return!!(r.offsetWidth||r.offsetHeight||r.getClientRects().length)}let xf={};function Hr(r,e){xf[r]=e}function Me(r){return r?xf[r]:xf}function y1(){xf={}}function I6(r,e,t,s){let A=Me("__activeStagePosition");const l=A||t.getBoundingClientRect(),u=s.getBoundingClientRect(),d=vh(r,l.x,u.x-l.x,e),f=vh(r,l.y,u.y-l.y,e),g=vh(r,l.width,u.width-l.width,e),x=vh(r,l.height,u.height-l.height,e);A={x:d,y:f,width:g,height:x},yS(A),Hr("__activeStagePosition",A)}function xS(r){if(!r)return;const e=r.getBoundingClientRect(),t={x:e.x,y:e.y,width:e.width,height:e.height};Hr("__activeStagePosition",t),yS(t)}function D6(){const r=Me("__activeStagePosition"),e=Me("__overlaySvg");if(!r)return;if(!e){console.warn("No stage svg found.");return}const t=window.innerWidth,s=window.innerHeight;e.setAttribute("viewBox",`0 0 ${t} ${s}`)}function k6(r){const e=R6(r);document.body.appendChild(e),wS(e,t=>{t.target.tagName==="path"&&QA("overlayClick")}),Hr("__overlaySvg",e)}function yS(r){const e=Me("__overlaySvg");if(!e){k6(r);return}const t=e.firstElementChild;if(t?.tagName!=="path")throw new Error("no path element found in stage svg");t.setAttribute("d",bS(r))}function R6(r){const e=window.innerWidth,t=window.innerHeight,s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.classList.add("driver-overlay","driver-overlay-animated"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s.setAttribute("xmlSpace","preserve"),s.setAttribute("xmlnsXlink","http://www.w3.org/1999/xlink"),s.setAttribute("version","1.1"),s.setAttribute("preserveAspectRatio","xMinYMin slice"),s.style.fillRule="evenodd",s.style.clipRule="evenodd",s.style.strokeLinejoin="round",s.style.strokeMiterlimit="2",s.style.zIndex="10000",s.style.position="fixed",s.style.top="0",s.style.left="0",s.style.width="100%",s.style.height="100%";const A=document.createElementNS("http://www.w3.org/2000/svg","path");return A.setAttribute("d",bS(r)),A.style.fill=Ie("overlayColor")||"rgb(0,0,0)",A.style.opacity=`${Ie("overlayOpacity")}`,A.style.pointerEvents="auto",A.style.cursor="auto",s.appendChild(A),s}function bS(r){const e=window.innerWidth,t=window.innerHeight,s=Ie("stagePadding")||0,A=Ie("stageRadius")||0,l=r.width+s*2,u=r.height+s*2,d=Math.min(A,l/2,u/2),f=Math.floor(Math.max(d,0)),g=r.x-s+f,x=r.y-s,y=l-f*2,v=u-f*2;return`M${e},0L0,0L0,${t}L${e},${t}L${e},0Z
    M${g},${x} h${y} a${f},${f} 0 0 1 ${f},${f} v${v} a${f},${f} 0 0 1 -${f},${f} h-${y} a${f},${f} 0 0 1 -${f},-${f} v-${v} a${f},${f} 0 0 1 ${f},-${f} z`}function M6(){const r=Me("__overlaySvg");r&&r.remove()}function L6(){const r=document.getElementById("driver-dummy-element");if(r)return r;let e=document.createElement("div");return e.id="driver-dummy-element",e.style.width="0",e.style.height="0",e.style.pointerEvents="none",e.style.opacity="0",e.style.position="fixed",e.style.top="50%",e.style.left="50%",document.body.appendChild(e),e}function b1(r){const{element:e}=r;let t=typeof e=="function"?e():typeof e=="string"?document.querySelector(e):e;t||(t=L6()),O6(t,r)}function H6(){const r=Me("__activeElement"),e=Me("__activeStep");r&&(xS(r),D6(),CS(r,e))}function O6(r,e){var t;const s=Date.now(),A=Me("__activeStep"),l=Me("__activeElement")||r,u=!l||l===r,d=r.id==="driver-dummy-element",f=l.id==="driver-dummy-element",g=Ie("animate"),x=e.onHighlightStarted||Ie("onHighlightStarted"),y=e?.onHighlighted||Ie("onHighlighted"),v=A?.onDeselected||Ie("onDeselected"),N=Ie(),M=Me();!u&&v&&v(f?void 0:l,A,{config:N,state:M,driver:Gs()}),x&&x(d?void 0:r,e,{config:N,state:M,driver:Gs()});const S=!u&&g;let V=!1;G6(),Hr("previousStep",A),Hr("previousElement",l),Hr("activeStep",e),Hr("activeElement",r);const K=()=>{if(Me("__transitionCallback")!==K)return;const G=Date.now()-s,z=400-G<=400/2;e.popover&&z&&!V&&S&&(v1(r,e),V=!0),Ie("animate")&&G<400?I6(G,400,l,r):(xS(r),y&&y(d?void 0:r,e,{config:Ie(),state:Me(),driver:Gs()}),Hr("__transitionCallback",void 0),Hr("__previousStep",A),Hr("__previousElement",l),Hr("__activeStep",e),Hr("__activeElement",r)),window.requestAnimationFrame(K)};Hr("__transitionCallback",K),window.requestAnimationFrame(K),pS(r),!S&&e.popover&&v1(r,e),l.classList.remove("driver-active-element","driver-no-interaction"),l.removeAttribute("aria-haspopup"),l.removeAttribute("aria-expanded"),l.removeAttribute("aria-controls"),((t=e.disableActiveInteraction)!=null?t:Ie("disableActiveInteraction"))&&r.classList.add("driver-no-interaction"),r.classList.add("driver-active-element"),r.setAttribute("aria-haspopup","dialog"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-controls","driver-popover-content")}function P6(){var r;(r=document.getElementById("driver-dummy-element"))==null||r.remove(),document.querySelectorAll(".driver-active-element").forEach(e=>{e.classList.remove("driver-active-element","driver-no-interaction"),e.removeAttribute("aria-haspopup"),e.removeAttribute("aria-expanded"),e.removeAttribute("aria-controls")})}function iu(){const r=Me("__resizeTimeout");r&&window.cancelAnimationFrame(r),Hr("__resizeTimeout",window.requestAnimationFrame(H6))}function V6(r){var e;if(!Me("isInitialized")||!(r.key==="Tab"||r.keyCode===9))return;const t=Me("__activeElement"),s=(e=Me("popover"))==null?void 0:e.wrapper,A=gS([...s?[s]:[],...t?[t]:[]]),l=A[0],u=A[A.length-1];if(r.preventDefault(),r.shiftKey){const d=A[A.indexOf(document.activeElement)-1]||u;d?.focus()}else{const d=A[A.indexOf(document.activeElement)+1]||l;d?.focus()}}function vS(r){var e;((e=Ie("allowKeyboardControl"))==null||e)&&(r.key==="Escape"?QA("escapePress"):r.key==="ArrowRight"?QA("arrowRightPress"):r.key==="ArrowLeft"&&QA("arrowLeftPress"))}function wS(r,e,t){const s=(A,l)=>{const u=A.target;r.contains(u)&&((!t||t(u))&&(A.preventDefault(),A.stopPropagation(),A.stopImmediatePropagation()),l?.(A))};document.addEventListener("pointerdown",s,!0),document.addEventListener("mousedown",s,!0),document.addEventListener("pointerup",s,!0),document.addEventListener("mouseup",s,!0),document.addEventListener("click",A=>{s(A,e)},!0)}function z6(){window.addEventListener("keyup",vS,!1),window.addEventListener("keydown",V6,!1),window.addEventListener("resize",iu),window.addEventListener("scroll",iu)}function K6(){window.removeEventListener("keyup",vS),window.removeEventListener("resize",iu),window.removeEventListener("scroll",iu)}function G6(){const r=Me("popover");r&&(r.wrapper.style.display="none")}function v1(r,e){var t,s;let A=Me("popover");A&&document.body.removeChild(A.wrapper),A=Y6(),document.body.appendChild(A.wrapper);const{title:l,description:u,showButtons:d,disableButtons:f,showProgress:g,nextBtnText:x=Ie("nextBtnText")||"Next &rarr;",prevBtnText:y=Ie("prevBtnText")||"&larr; Previous",progressText:v=Ie("progressText")||"{current} of {total}"}=e.popover||{};A.nextButton.innerHTML=x,A.previousButton.innerHTML=y,A.progress.innerHTML=v,l?(A.title.innerHTML=l,A.title.style.display="block"):A.title.style.display="none",u?(A.description.innerHTML=u,A.description.style.display="block"):A.description.style.display="none";const N=d||Ie("showButtons"),M=g||Ie("showProgress")||!1,S=N?.includes("next")||N?.includes("previous")||M;A.closeButton.style.display=N.includes("close")?"block":"none",S?(A.footer.style.display="flex",A.progress.style.display=M?"block":"none",A.nextButton.style.display=N.includes("next")?"block":"none",A.previousButton.style.display=N.includes("previous")?"block":"none"):A.footer.style.display="none";const V=f||Ie("disableButtons")||[];V!=null&&V.includes("next")&&(A.nextButton.disabled=!0,A.nextButton.classList.add("driver-popover-btn-disabled")),V!=null&&V.includes("previous")&&(A.previousButton.disabled=!0,A.previousButton.classList.add("driver-popover-btn-disabled")),V!=null&&V.includes("close")&&(A.closeButton.disabled=!0,A.closeButton.classList.add("driver-popover-btn-disabled"));const K=A.wrapper;K.style.display="block",K.style.left="",K.style.top="",K.style.bottom="",K.style.right="",K.id="driver-popover-content",K.setAttribute("role","dialog"),K.setAttribute("aria-labelledby","driver-popover-title"),K.setAttribute("aria-describedby","driver-popover-description");const G=A.arrow;G.className="driver-popover-arrow";const z=((t=e.popover)==null?void 0:t.popoverClass)||Ie("popoverClass")||"";K.className=`driver-popover ${z}`.trim(),wS(A.wrapper,E=>{var _,C,D;const j=E.target,Q=((_=e.popover)==null?void 0:_.onNextClick)||Ie("onNextClick"),U=((C=e.popover)==null?void 0:C.onPrevClick)||Ie("onPrevClick"),T=((D=e.popover)==null?void 0:D.onCloseClick)||Ie("onCloseClick");if(j.closest(".driver-popover-next-btn"))return Q?Q(r,e,{config:Ie(),state:Me(),driver:Gs()}):QA("nextClick");if(j.closest(".driver-popover-prev-btn"))return U?U(r,e,{config:Ie(),state:Me(),driver:Gs()}):QA("prevClick");if(j.closest(".driver-popover-close-btn"))return T?T(r,e,{config:Ie(),state:Me(),driver:Gs()}):QA("closeClick")},E=>!(A!=null&&A.description.contains(E))&&!(A!=null&&A.title.contains(E))&&typeof E.className=="string"&&E.className.includes("driver-popover")),Hr("popover",A);const q=((s=e.popover)==null?void 0:s.onPopoverRender)||Ie("onPopoverRender");q&&q(A,{config:Ie(),state:Me(),driver:Gs()}),CS(r,e),pS(K);const $=r.classList.contains("driver-dummy-element"),Y=gS([K,...$?[]:[r]]);Y.length>0&&Y[0].focus()}function BS(){const r=Me("popover");if(!(r!=null&&r.wrapper))return;const e=r.wrapper.getBoundingClientRect(),t=Ie("stagePadding")||0,s=Ie("popoverOffset")||0;return{width:e.width+t+s,height:e.height+t+s,realWidth:e.width,realHeight:e.height}}function w1(r,e){const{elementDimensions:t,popoverDimensions:s,popoverPadding:A,popoverArrowDimensions:l}=e;return r==="start"?Math.max(Math.min(t.top-A,window.innerHeight-s.realHeight-l.width),l.width):r==="end"?Math.max(Math.min(t.top-s?.realHeight+t.height+A,window.innerHeight-s?.realHeight-l.width),l.width):r==="center"?Math.max(Math.min(t.top+t.height/2-s?.realHeight/2,window.innerHeight-s?.realHeight-l.width),l.width):0}function B1(r,e){const{elementDimensions:t,popoverDimensions:s,popoverPadding:A,popoverArrowDimensions:l}=e;return r==="start"?Math.max(Math.min(t.left-A,window.innerWidth-s.realWidth-l.width),l.width):r==="end"?Math.max(Math.min(t.left-s?.realWidth+t.width+A,window.innerWidth-s?.realWidth-l.width),l.width):r==="center"?Math.max(Math.min(t.left+t.width/2-s?.realWidth/2,window.innerWidth-s?.realWidth-l.width),l.width):0}function CS(r,e){const t=Me("popover");if(!t)return;const{align:s="start",side:A="left"}=e?.popover||{},l=s,u=r.id==="driver-dummy-element"?"over":A,d=Ie("stagePadding")||0,f=BS(),g=t.arrow.getBoundingClientRect(),x=r.getBoundingClientRect(),y=x.top-f.height;let v=y>=0;const N=window.innerHeight-(x.bottom+f.height);let M=N>=0;const S=x.left-f.width;let V=S>=0;const K=window.innerWidth-(x.right+f.width);let G=K>=0;const z=!v&&!M&&!V&&!G;let q=u;if(u==="top"&&v?G=V=M=!1:u==="bottom"&&M?G=V=v=!1:u==="left"&&V?G=v=M=!1:u==="right"&&G&&(V=v=M=!1),u==="over"){const $=window.innerWidth/2-f.realWidth/2,Y=window.innerHeight/2-f.realHeight/2;t.wrapper.style.left=`${$}px`,t.wrapper.style.right="auto",t.wrapper.style.top=`${Y}px`,t.wrapper.style.bottom="auto"}else if(z){const $=window.innerWidth/2-f?.realWidth/2,Y=10;t.wrapper.style.left=`${$}px`,t.wrapper.style.right="auto",t.wrapper.style.bottom=`${Y}px`,t.wrapper.style.top="auto"}else if(V){const $=Math.min(S,window.innerWidth-f?.realWidth-g.width),Y=w1(l,{elementDimensions:x,popoverDimensions:f,popoverPadding:d,popoverArrowDimensions:g});t.wrapper.style.left=`${$}px`,t.wrapper.style.top=`${Y}px`,t.wrapper.style.bottom="auto",t.wrapper.style.right="auto",q="left"}else if(G){const $=Math.min(K,window.innerWidth-f?.realWidth-g.width),Y=w1(l,{elementDimensions:x,popoverDimensions:f,popoverPadding:d,popoverArrowDimensions:g});t.wrapper.style.right=`${$}px`,t.wrapper.style.top=`${Y}px`,t.wrapper.style.bottom="auto",t.wrapper.style.left="auto",q="right"}else if(v){const $=Math.min(y,window.innerHeight-f.realHeight-g.width);let Y=B1(l,{elementDimensions:x,popoverDimensions:f,popoverPadding:d,popoverArrowDimensions:g});t.wrapper.style.top=`${$}px`,t.wrapper.style.left=`${Y}px`,t.wrapper.style.bottom="auto",t.wrapper.style.right="auto",q="top"}else if(M){const $=Math.min(N,window.innerHeight-f?.realHeight-g.width);let Y=B1(l,{elementDimensions:x,popoverDimensions:f,popoverPadding:d,popoverArrowDimensions:g});t.wrapper.style.left=`${Y}px`,t.wrapper.style.bottom=`${$}px`,t.wrapper.style.top="auto",t.wrapper.style.right="auto",q="bottom"}z?t.arrow.classList.add("driver-popover-arrow-none"):q6(l,q,r)}function q6(r,e,t){const s=Me("popover");if(!s)return;const A=t.getBoundingClientRect(),l=BS(),u=s.arrow,d=l.width,f=window.innerWidth,g=A.width,x=A.left,y=l.height,v=window.innerHeight,N=A.top,M=A.height;u.className="driver-popover-arrow";let S=e,V=r;if(e==="top"?(x+g<=0?(S="right",V="end"):x+g-d<=0&&(S="top",V="start"),x>=f?(S="left",V="end"):x+d>=f&&(S="top",V="end")):e==="bottom"?(x+g<=0?(S="right",V="start"):x+g-d<=0&&(S="bottom",V="start"),x>=f?(S="left",V="start"):x+d>=f&&(S="bottom",V="end")):e==="left"?(N+M<=0?(S="bottom",V="end"):N+M-y<=0&&(S="left",V="start"),N>=v?(S="top",V="end"):N+y>=v&&(S="left",V="end")):e==="right"&&(N+M<=0?(S="bottom",V="start"):N+M-y<=0&&(S="right",V="start"),N>=v?(S="top",V="start"):N+y>=v&&(S="right",V="end")),!S)u.classList.add("driver-popover-arrow-none");else{u.classList.add(`driver-popover-arrow-side-${S}`),u.classList.add(`driver-popover-arrow-align-${V}`);const K=t.getBoundingClientRect(),G=u.getBoundingClientRect(),z=Ie("stagePadding")||0,q=K.left-z<window.innerWidth&&K.right+z>0&&K.top-z<window.innerHeight&&K.bottom+z>0;e==="bottom"&&q&&(G.x>K.x&&G.x+G.width<K.x+K.width?s.wrapper.style.transform="translateY(0)":(u.classList.remove(`driver-popover-arrow-align-${V}`),u.classList.add("driver-popover-arrow-none"),s.wrapper.style.transform=`translateY(-${z/2}px)`))}}function Y6(){const r=document.createElement("div");r.classList.add("driver-popover");const e=document.createElement("div");e.classList.add("driver-popover-arrow");const t=document.createElement("header");t.id="driver-popover-title",t.classList.add("driver-popover-title"),t.style.display="none",t.innerText="Popover Title";const s=document.createElement("div");s.id="driver-popover-description",s.classList.add("driver-popover-description"),s.style.display="none",s.innerText="Popover description is here";const A=document.createElement("button");A.type="button",A.classList.add("driver-popover-close-btn"),A.setAttribute("aria-label","Close"),A.innerHTML="&times;";const l=document.createElement("footer");l.classList.add("driver-popover-footer");const u=document.createElement("span");u.classList.add("driver-popover-progress-text"),u.innerText="";const d=document.createElement("span");d.classList.add("driver-popover-navigation-btns");const f=document.createElement("button");f.type="button",f.classList.add("driver-popover-prev-btn"),f.innerHTML="&larr; Previous";const g=document.createElement("button");return g.type="button",g.classList.add("driver-popover-next-btn"),g.innerHTML="Next &rarr;",d.appendChild(f),d.appendChild(g),l.appendChild(u),l.appendChild(d),r.appendChild(A),r.appendChild(e),r.appendChild(t),r.appendChild(s),r.appendChild(l),{wrapper:r,arrow:e,title:t,description:s,footer:l,previousButton:f,nextButton:g,closeButton:A,footerButtons:d,progress:u}}function $6(){var r;const e=Me("popover");e&&((r=e.wrapper.parentElement)==null||r.removeChild(e.wrapper))}function X6(r={}){Vp(r);function e(){Ie("allowClose")&&x()}function t(){const v=Ie("overlayClickBehavior");if(Ie("allowClose")&&v==="close"){x();return}if(typeof v=="function"){const N=Me("__activeStep"),M=Me("__activeElement");v(M,N,{config:Ie(),state:Me(),driver:Gs()});return}v==="nextStep"&&s()}function s(){const v=Me("activeIndex"),N=Ie("steps")||[];if(typeof v>"u")return;const M=v+1;N[M]?g(M):x()}function A(){const v=Me("activeIndex"),N=Ie("steps")||[];if(typeof v>"u")return;const M=v-1;N[M]?g(M):x()}function l(v){(Ie("steps")||[])[v]?g(v):x()}function u(){var v;if(Me("__transitionCallback"))return;const N=Me("activeIndex"),M=Me("__activeStep"),S=Me("__activeElement");if(typeof N>"u"||typeof M>"u"||typeof Me("activeIndex")>"u")return;const V=((v=M.popover)==null?void 0:v.onPrevClick)||Ie("onPrevClick");if(V)return V(S,M,{config:Ie(),state:Me(),driver:Gs()});A()}function d(){var v;if(Me("__transitionCallback"))return;const N=Me("activeIndex"),M=Me("__activeStep"),S=Me("__activeElement");if(typeof N>"u"||typeof M>"u")return;const V=((v=M.popover)==null?void 0:v.onNextClick)||Ie("onNextClick");if(V)return V(S,M,{config:Ie(),state:Me(),driver:Gs()});s()}function f(){Me("isInitialized")||(Hr("isInitialized",!0),document.body.classList.add("driver-active",Ie("animate")?"driver-fade":"driver-simple"),z6(),bh("overlayClick",t),bh("escapePress",e),bh("arrowLeftPress",u),bh("arrowRightPress",d))}function g(v=0){var N,M,S,V,K,G,z,q;const $=Ie("steps");if(!$){console.error("No steps to drive through"),x();return}if(!$[v]){x();return}Hr("__activeOnDestroyed",document.activeElement),Hr("activeIndex",v);const Y=$[v],E=$[v+1],_=$[v-1],C=((N=Y.popover)==null?void 0:N.doneBtnText)||Ie("doneBtnText")||"Done",D=Ie("allowClose"),j=typeof((M=Y.popover)==null?void 0:M.showProgress)<"u"?(S=Y.popover)==null?void 0:S.showProgress:Ie("showProgress"),Q=(((V=Y.popover)==null?void 0:V.progressText)||Ie("progressText")||"{{current}} of {{total}}").replace("{{current}}",`${v+1}`).replace("{{total}}",`${$.length}`),U=((K=Y.popover)==null?void 0:K.showButtons)||Ie("showButtons"),T=["next","previous",...D?["close"]:[]].filter(L=>!(U!=null&&U.length)||U.includes(L)),W=((G=Y.popover)==null?void 0:G.onNextClick)||Ie("onNextClick"),H=((z=Y.popover)==null?void 0:z.onPrevClick)||Ie("onPrevClick"),F=((q=Y.popover)==null?void 0:q.onCloseClick)||Ie("onCloseClick");b1({...Y,popover:{showButtons:T,nextBtnText:E?void 0:C,disableButtons:[..._?[]:["previous"]],showProgress:j,progressText:Q,onNextClick:W||(()=>{E?g(v+1):x()}),onPrevClick:H||(()=>{g(v-1)}),onCloseClick:F||(()=>{x()}),...Y?.popover||{}}})}function x(v=!0){const N=Me("__activeElement"),M=Me("__activeStep"),S=Me("__activeOnDestroyed"),V=Ie("onDestroyStarted");if(v&&V){const z=!N||N?.id==="driver-dummy-element";V(z?void 0:N,M,{config:Ie(),state:Me(),driver:Gs()});return}const K=M?.onDeselected||Ie("onDeselected"),G=Ie("onDestroyed");if(document.body.classList.remove("driver-active","driver-fade","driver-simple"),K6(),$6(),P6(),M6(),T6(),y1(),N&&M){const z=N.id==="driver-dummy-element";K&&K(z?void 0:N,M,{config:Ie(),state:Me(),driver:Gs()}),G&&G(z?void 0:N,M,{config:Ie(),state:Me(),driver:Gs()})}S&&S.focus()}const y={isActive:()=>Me("isInitialized")||!1,refresh:iu,drive:(v=0)=>{f(),g(v)},setConfig:Vp,setSteps:v=>{y1(),Vp({...Ie(),steps:v})},getConfig:Ie,getState:Me,getActiveIndex:()=>Me("activeIndex"),isFirstStep:()=>Me("activeIndex")===0,isLastStep:()=>{const v=Ie("steps")||[],N=Me("activeIndex");return N!==void 0&&N===v.length-1},getActiveStep:()=>Me("activeStep"),getActiveElement:()=>Me("activeElement"),getPreviousElement:()=>Me("previousElement"),getPreviousStep:()=>Me("previousStep"),moveNext:s,movePrevious:A,moveTo:l,hasNextStep:()=>{const v=Ie("steps")||[],N=Me("activeIndex");return N!==void 0&&!!v[N+1]},hasPreviousStep:()=>{const v=Ie("steps")||[],N=Me("activeIndex");return N!==void 0&&!!v[N-1]},highlight:v=>{f(),b1({...v,popover:v.popover?{showButtons:[],showProgress:!1,progressText:"",...v.popover}:void 0})},destroy:()=>{x(!1)}};return j6(y),y}const J6=({onOpenAddCourse:r,onCloseAddCourse:e,onOpenSchedule:t,onCloseSchedule:s,onSwitchToPlanner:A,onSwitchToTracker:l,onTutorialStart:u,onTutorialEnd:d})=>{const{t:f}=At();return k.useEffect(()=>{const x=document.createElement("style");return x.innerHTML=`
            /* Keyframes for Pop-In Animation */
            @keyframes driverPopIn {
                0% { opacity: 0; transform: scale(0.95) translateY(10px); }
                100% { opacity: 1; transform: scale(1) translateY(0); }
            }

            /* Keyframes for Active Element Beacon */
            @keyframes driverBeaconPulse {
                0% { box-shadow: 0 0 0 0 rgba(6, 182, 212, 0.7); border-color: rgba(6, 182, 212, 1); }
                70% { box-shadow: 0 0 0 10px rgba(6, 182, 212, 0); border-color: rgba(6, 182, 212, 0.5); }
                100% { box-shadow: 0 0 0 0 rgba(6, 182, 212, 0); border-color: rgba(6, 182, 212, 0.2); }
            }

            /* Premium Glassmorphism Popover Theme */
            .driver-popover.driverjs-theme {
                background: rgba(23, 23, 23, 0.85); /* Slightly translucent dark */
                backdrop-filter: blur(16px);
                -webkit-backdrop-filter: blur(16px);
                color: var(--color-text);
                border: 1px solid rgba(255, 255, 255, 0.1);
                box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.6), 0 0 0 1px rgba(255,255,255,0.05) inset;
                border-radius: 16px;
                padding: 24px;
                animation: driverPopIn 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
                z-index: 2147483647 !important; /* Ensure it stays above everything */
            }
            .driver-popover.driverjs-theme .driver-popover-title {
                color: var(--color-text);
                font-size: 1.25rem;
                font-weight: 800;
                margin-bottom: 12px;
                background: linear-gradient(to right, #38bdf8, #818cf8);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                letter-spacing: -0.02em;
            }
            .driver-popover.driverjs-theme .driver-popover-description {
                color: rgba(255, 255, 255, 0.8);
                font-size: 0.95rem;
                line-height: 1.6;
            }
            
            /* Buttons */
            .driver-popover.driverjs-theme button {
                flex: 1;
                text-align: center;
                border-radius: 9999px; /* Pill shape */
                font-weight: 700;
                padding: 10px 16px;
                font-size: 0.85rem;
                transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
            }
            
            /* Next/Done Button */
            .driver-popover.driverjs-theme .driver-popover-next-btn,
            .driver-popover.driverjs-theme .driver-popover-prev-btn {
                text-shadow: none;
            }
            .driver-popover.driverjs-theme .driver-popover-next-btn {
                background: linear-gradient(135deg, #0ea5e9, #6366f1);
                color: white;
                border: none;
                box-shadow: 0 4px 14px 0 rgba(14, 165, 233, 0.39);
            }
            .driver-popover.driverjs-theme .driver-popover-next-btn:hover {
                transform: translateY(-1px);
                box-shadow: 0 6px 20px rgba(14, 165, 233, 0.5);
                background: linear-gradient(135deg, #0284c7, #4f46e5);
            }

            /* Previous Button */
            .driver-popover.driverjs-theme .driver-popover-prev-btn {
                 background-color: rgba(255, 255, 255, 0.1);
                 border: 1px solid rgba(255, 255, 255, 0.05);
                 color: rgba(255, 255, 255, 0.8);
            }
            .driver-popover.driverjs-theme .driver-popover-prev-btn:hover {
                 background-color: rgba(255, 255, 255, 0.15);
                 color: white;
            }

            /* Skip Button - Styled as "Close" */
            .driver-popover.driverjs-theme .driver-popover-close-btn {
                text-decoration: none;
                color: rgba(255, 255, 255, 0.5);
                background: rgba(255, 255, 255, 0.05);
                border: 1px solid rgba(255, 255, 255, 0.05);
                padding: 4px 8px;
                font-size: 0.75rem;
                font-weight: 600;
                border-radius: 6px;
                position: absolute;
                top: 16px;
                right: 16px;
                display: block !important;
                flex: none;
                width: auto;
                transition: all 0.2s;
            }
            .driver-popover.driverjs-theme .driver-popover-close-btn:hover {
                color: white;
                background: rgba(239, 68, 68, 0.2); /* Soft red hover */
                border-color: rgba(239, 68, 68, 0.5);
                transform: scale(1.05);
            }

            /* Navigation Footer Layout */
            .driver-popover.driverjs-theme .driver-popover-footer {
                margin-top: 20px;
                display: flex;
                gap: 12px;
                justify-content: space-between;
                align-items: center;
            }
            
            /* Premium Active Element Highlighter (Beacon Pulse) */
            .driver-active-element {
                border: 2px solid rgba(6, 182, 212, 1) !important;
                border-radius: 8px !important; /* Slightly round the actual element */
                animation: driverBeaconPulse 2s infinite cubic-bezier(0.66, 0, 0, 1) !important;
                z-index: 2147483646 !important; /* One level below the popover */
                position: relative !important;
            }
            
            /* Driver overlay base adjustments */
            #driver-page-overlay {
                backdrop-filter: blur(2px); /* Slight background blur behind cutout */
                -webkit-backdrop-filter: blur(2px);
                background-color: rgba(0, 0, 0, 0.6) !important; /* Darker overlay */
            }

            /* Disable interactions with the app while tutorial is running */
            body.tutorial-running #root {
                pointer-events: none !important;
                user-select: none !important;
            }
            
            /* Explicitly disable interaction on the highlighted element itself */
            .driver-active-element,
            .driver-active-element * {
                pointer-events: none !important; 
            }

            /* Ensure the driver popover remains interactive */
            .driver-popover.driverjs-theme {
                pointer-events: auto !important;
            }
        `,document.head.appendChild(x),()=>{document.head.removeChild(x)}},[]),{startTutorial:()=>{const x=(v,N)=>{const M=()=>{document.querySelector(v)?N():requestAnimationFrame(M)};M()},y=X6({showProgress:!0,animate:!0,popoverClass:"driverjs-theme",stagePadding:8,stageRadius:10,popoverOffset:16,nextBtnText:f.tutorial.next,prevBtnText:f.tutorial.prev,doneBtnText:f.tutorial.done,showButtons:["next","previous","close"],onHighlightStarted:()=>{document.body.classList.add("tutorial-running"),u&&u()},onDestroyed:()=>{document.body.classList.remove("tutorial-running"),e(),s(),d&&d()},onNextClick:(v,N,M)=>{const S=N.element;S==="#header-add-course"?(r(),x("#btn-import-catalog",()=>{y.moveNext()})):S==="#btn-import-catalog"?(e(),setTimeout(()=>{y.moveNext()},100)):S==="#schedule-grade-btn"?(t(),x("#schedule-visual-grid",()=>{y.moveNext()})):S==="#schedule-list"?(s(),setTimeout(()=>{y.moveNext()},100)):S==="#header-settings"?(A(),x("#planner-draft-board",()=>{y.moveNext()})):S==="#planner-search-panel"?(l(),x("#header-add-course",()=>{y.moveNext()})):y.moveNext()},onPrevClick:(v,N,M)=>{const S=N.element;S==="#btn-import-catalog"?(e(),setTimeout(()=>{y.movePrevious()},100)):S==="#semester-view-section"?(r(),x("#btn-import-catalog",()=>{y.movePrevious()})):S==="#schedule-visual-grid"?(s(),setTimeout(()=>{y.movePrevious()},100)):S==="#dashboard-section"?(t(),x("#schedule-list",()=>{y.movePrevious()})):S==="#planner-draft-board"?(l(),setTimeout(()=>{y.movePrevious()},100)):S==="#header-add-course"?(A(),x("#planner-search-panel",()=>{y.movePrevious()})):y.movePrevious()},steps:[{element:"#header-title",popover:{title:f.tutorial.welcome.title,description:f.tutorial.welcome.desc}},{element:"#mode-switcher",popover:{title:f.tutorial.modeSwitcher.title,description:f.tutorial.modeSwitcher.desc}},{element:"#header-settings",popover:{title:f.tutorial.settings.title,description:f.tutorial.settings.desc}},{element:"#planner-draft-board",popover:{title:f.tutorial.plannerBoard.title,description:f.tutorial.plannerBoard.desc}},{element:"#planner-search-panel",popover:{title:f.tutorial.plannerSearch.title,description:f.tutorial.plannerSearch.desc}},{element:"#header-add-course",popover:{title:f.tutorial.addCourse.title,description:f.tutorial.addCourse.desc}},{element:"#btn-import-catalog",popover:{title:f.tutorial.catalogFeature.title,description:f.tutorial.catalogFeature.desc}},{element:"#semester-view-section",popover:{title:f.tutorial.coursePlan.title,description:f.tutorial.coursePlan.desc}},{element:"#schedule-grade-btn",popover:{title:f.tutorial.scheduleGrade.title,description:f.tutorial.scheduleGrade.desc}},{element:"#schedule-visual-grid",popover:{title:f.tutorial.scheduleGrid.title,description:f.tutorial.scheduleGrid.desc}},{element:"#schedule-list",popover:{title:f.tutorial.scheduleList.title,description:f.tutorial.scheduleList.desc}},{element:"#dashboard-section",popover:{title:f.tutorial.dashboard.title,description:f.tutorial.dashboard.desc}},{element:"#header-data-controls",popover:{title:f.tutorial.dataSafety.title,description:f.tutorial.dataSafety.desc}},{element:"#header-history",popover:{title:f.tutorial.history.title,description:f.tutorial.history.desc}},{element:"#header-support",popover:{title:f.tutorial.support.title,description:f.tutorial.support.desc}}]});y.drive()}}},W6=(r,e)=>{let t=e.filter(u=>u.name===r.name);if(t.length===0){const u=r.name.toLowerCase(),d=e.filter(f=>{const g=f.name.toLowerCase();return g.includes(u)||u.includes(g)});d.length>0&&(t=d)}if(t.length===0)return{match:null,candidates:[],ambiguity:!1};if(t.length===1)return{match:t[0],candidates:t,ambiguity:!1};const s=t.filter(u=>!!u.english==!!r.isEMI);if(s.length>0&&s.length<t.length&&(t=s),t.length===1)return{match:t[0],candidates:t,ambiguity:!1};const l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].indexOf(r.day||"");if(l!==-1&&r.startTime){const u=l===0?6:l-1,d=t.filter(f=>{if(!Array.isArray(f.classTime))return!1;const g=f.classTime[u];return!(!g||g.length===0)});d.length>0&&(t=d)}return t.length===1?{match:t[0],candidates:t,ambiguity:!1}:{match:null,candidates:t,ambiguity:!0}},C1="nsysu-course-pool",Z6=r=>{const[e,t]=k.useState(()=>{const s=localStorage.getItem(C1);return s?JSON.parse(s):[]});return k.useEffect(()=>{t(r),localStorage.setItem(C1,JSON.stringify(r))},[r]),{pool:e}},Mo=r=>{const e=JSON.parse(localStorage.getItem("nsysu-micro-credits-data")||"null"),t=JSON.parse(localStorage.getItem("nsysu-interdisciplinary-teacher-education-data")||"null"),s=JSON.parse(localStorage.getItem("nsysu-interdisciplinary-double-major-data")||"null"),A=JSON.parse(localStorage.getItem("nsysu-interdisciplinary-cross-disciplinary-data")||"null"),l=JSON.parse(localStorage.getItem("nsysu-diverse-learning-data")||"null"),u=JSON.parse(localStorage.getItem("nsysu-interdisciplinary-course-9-data")||"null"),d=JSON.parse(localStorage.getItem("nsysu-interdisciplinary-minor-data")||"null"),f=y=>{if(!y)return null;const v={...y};return v.proofFile!==void 0&&delete v.proofFile,v.proofBase64!==void 0&&delete v.proofBase64,v.proof!==void 0&&delete v.proof,v.hasProof=!!v.proofFileName,v},g={};for(let y=1;y<=10;y++){const v=`nsysu-interdisciplinary-item-${y}-notes`,N=localStorage.getItem(v);N&&(g[v]=N)}const x=Date.now();return localStorage.setItem("nsysu-cloud-sync-last-local-update",String(x)),{localUpdatedAt:x,settings:{studentClass:localStorage.getItem("nsysu-student-class"),graduationCredits:JSON.parse(localStorage.getItem("nsysu-grad-credits")||"128"),major:localStorage.getItem("nsysu-major"),entranceYear:Number(localStorage.getItem("nsysu-entrance-year"))||113},labels:{library:JSON.parse(localStorage.getItem("nsysu-labels-library")||"null"),map:JSON.parse(localStorage.getItem("nsysu-course-labels")||"null")},courses:r,semesters:JSON.parse(localStorage.getItem("nsysu-semesters")||"null"),plannerDraft:JSON.parse(localStorage.getItem("nsysu-planner-draft")||"[]"),plannerLastExportSemester:localStorage.getItem("nsysu-planner-last-export-semester")||null,interdisciplinaryStatus:JSON.parse(localStorage.getItem("nsysu-interdisciplinary-status")||"{}"),minorData:f(d),microCreditsData:f(e),teacherEducationData:f(t),doubleMajorData:f(s),crossDisciplinaryData:f(A),diverseLearningData:f(l),interdisciplinaryCourseData:f(u),interdisciplinaryNotes:g}},wh=r=>{if(r){window.__nsysu_pause_sync_events=!0;try{r.courses&&Array.isArray(r.courses)&&localStorage.setItem("nsysu-courses",JSON.stringify(r.courses)),r.semesters&&localStorage.setItem("nsysu-semesters",JSON.stringify(r.semesters)),r.settings&&(r.settings.studentClass&&localStorage.setItem("nsysu-student-class",r.settings.studentClass),r.settings.graduationCredits&&localStorage.setItem("nsysu-grad-credits",JSON.stringify(r.settings.graduationCredits)),r.settings.major&&localStorage.setItem("nsysu-major",r.settings.major),r.settings.entranceYear&&localStorage.setItem("nsysu-entrance-year",String(r.settings.entranceYear))),r.labels&&(r.labels.library&&localStorage.setItem("nsysu-labels-library",JSON.stringify(r.labels.library)),r.labels.map&&localStorage.setItem("nsysu-course-labels",JSON.stringify(r.labels.map))),r.plannerDraft&&localStorage.setItem("nsysu-planner-draft",JSON.stringify(r.plannerDraft)),r.plannerLastExportSemester&&localStorage.setItem("nsysu-planner-last-export-semester",r.plannerLastExportSemester),r.interdisciplinaryStatus&&localStorage.setItem("nsysu-interdisciplinary-status",JSON.stringify(r.interdisciplinaryStatus)),r.minorData&&localStorage.setItem("nsysu-interdisciplinary-minor-data",JSON.stringify(r.minorData)),r.microCreditsData&&localStorage.setItem("nsysu-micro-credits-data",JSON.stringify(r.microCreditsData)),r.teacherEducationData&&localStorage.setItem("nsysu-interdisciplinary-teacher-education-data",JSON.stringify(r.teacherEducationData)),r.doubleMajorData&&localStorage.setItem("nsysu-interdisciplinary-double-major-data",JSON.stringify(r.doubleMajorData)),r.crossDisciplinaryData&&localStorage.setItem("nsysu-interdisciplinary-cross-disciplinary-data",JSON.stringify(r.crossDisciplinaryData)),r.diverseLearningData&&localStorage.setItem("nsysu-diverse-learning-data",JSON.stringify(r.diverseLearningData)),r.interdisciplinaryCourseData&&localStorage.setItem("nsysu-interdisciplinary-course-9-data",JSON.stringify(r.interdisciplinaryCourseData)),r.interdisciplinaryNotes&&Object.entries(r.interdisciplinaryNotes).forEach(([e,t])=>{localStorage.setItem(e,t)})}finally{window.__nsysu_pause_sync_events=!1}sessionStorage.setItem("cloud-synced","true")}};function eP(r,e){const{user:t,logout:s}=wu(),[A,l]=k.useState("idle"),[u,d]=k.useState(!1),[f,g]=k.useState(null),[x,y]=k.useState(0),v=k.useRef(!0),N=k.useRef(!1);return k.useEffect(()=>{if(!window.__nsysu_proxy_installed){const z=localStorage.setItem;localStorage.setItem=function($,Y){z.apply(this,[$,Y]);const E=$==="nsysu-cloud-sync-last-local-update"||$==="nsysu-local-state-modified-at"||$==="nsysu-last-synced-cloud-time"||$==="nsysu-view-mode"||$==="nsysu-tracker-scroll"||$==="nsysu-setup-reminder-seen";$.startsWith("nsysu-")&&!E&&!window.__nsysu_pause_sync_events&&(z.apply(localStorage,["nsysu-local-state-modified-at",String(Date.now())]),window.dispatchEvent(new Event("nsysu-local-storage-update")))};const q=localStorage.removeItem;localStorage.removeItem=function($){q.apply(this,[$]);const Y=$==="nsysu-cloud-sync-last-local-update"||$==="nsysu-local-state-modified-at"||$==="nsysu-last-synced-cloud-time"||$==="nsysu-view-mode"||$==="nsysu-tracker-scroll"||$==="nsysu-setup-reminder-seen";$.startsWith("nsysu-")&&!Y&&!window.__nsysu_pause_sync_events&&(z.apply(localStorage,["nsysu-local-state-modified-at",String(Date.now())]),window.dispatchEvent(new Event("nsysu-local-storage-update")))},window.__nsysu_proxy_installed=!0}const G=()=>{y(z=>z+1)};return window.addEventListener("nsysu-local-storage-update",G),()=>window.removeEventListener("nsysu-local-storage-update",G)},[]),k.useEffect(()=>{if(!t){l("idle"),d(!1),v.current=!0;return}(async()=>{try{if(sessionStorage.getItem("cloud-synced")==="true"){sessionStorage.removeItem("cloud-synced"),l("synced"),N.current=!0,v.current=!1;return}const q=To(Ro,"users",t.uid),$=await WB(q);if($.exists()){const Y=$.data();if(Y.termsAccepted!==!0){d(!0),l("idle");return}if(Y.data){const E=localStorage.getItem("nsysu-cloud-sync-last-local-update"),_=E?parseInt(E,10):0,C=localStorage.getItem("nsysu-local-state-modified-at"),D=C?parseInt(C,10):0,j=localStorage.getItem("nsysu-last-synced-cloud-time"),Q=j?parseInt(j,10):0,U=Y.lastUpdatedAt||0,T=Math.max(_,D),W=r.length,H=Y.data.courses?.length||0;if(W===0){console.log("Local is empty. Downloading from cloud safely..."),N.current=!0,localStorage.setItem("nsysu-last-synced-cloud-time",String(U)),wh(Y.data),Y.data.courses&&e(Y.data.courses),window.location.reload();return}if(H===0){console.log("Cloud courses are empty. Pushing local changes to cloud safely...");const F=Mo(r),L=Date.now();await xA(q,{email:t.email,displayName:t.displayName,lastUpdatedAt:L,data:F},{merge:!0}),localStorage.setItem("nsysu-last-synced-cloud-time",String(L)),l("synced")}if(W>0&&H>0)if(T>U&&Q===U){console.log("Valid offline edit detected (Anchor matches). Pushing to cloud...");const F=Mo(r),L=Date.now();await xA(q,{email:t.email,displayName:t.displayName,lastUpdatedAt:L,data:F},{merge:!0}),localStorage.setItem("nsysu-last-synced-cloud-time",String(L))}else if(U>T&&T<=Q){console.log("Cloud is newer and local is untouched since last sync. Downloading from cloud..."),N.current=!0,localStorage.setItem("nsysu-last-synced-cloud-time",String(U)),wh(Y.data),Y.data.courses&&e(Y.data.courses),window.location.reload();return}else{console.log(` Conflict detected! Anchor: ${Q}, Cloud: ${U}, Local Edit: ${T}`),g(Y.data),l("conflict");return}}else{console.log("Cloud has no data, pushing local changes to cloud safely...");const E=Mo(r),_=Date.now();await xA(q,{email:t.email,displayName:t.displayName,lastUpdatedAt:_,data:E},{merge:!0}),localStorage.setItem("nsysu-last-synced-cloud-time",String(_))}}else{d(!0),l("idle");return}l("synced")}catch(z){console.error("Firebase sync error on load:",z)}finally{v.current=!1}})()},[t]),k.useEffect(()=>{if(!t||v.current)return;if(N.current){N.current=!1;return}l("editing");const G=setTimeout(async()=>{l("saving");try{const z=To(Ro,"users",t.uid),q=Mo(r),$=Date.now();await xA(z,{email:t.email,displayName:t.displayName,lastUpdatedAt:$,data:q},{merge:!0}),localStorage.setItem("nsysu-last-synced-cloud-time",String($)),l("synced")}catch(z){console.error("Firebase sync error on save:",z),l("idle")}},3e3);return()=>clearTimeout(G)},[r,t,x]),k.useEffect(()=>{const G=z=>{z.key?.startsWith("nsysu-")};return window.addEventListener("storage",G),()=>window.removeEventListener("storage",G)},[]),k.useEffect(()=>{if(!t)return;const G=async()=>{console.log("Network came back online. Triggering cloud sync resolution...");try{const z=To(Ro,"users",t.uid),q=await WB(z);if(q.exists()){const $=q.data();if($.data){const Y=localStorage.getItem("nsysu-cloud-sync-last-local-update"),E=Y?parseInt(Y,10):0,_=$.lastUpdatedAt||0;if(_>=E)console.log("Online recovery: Cloud is newer, restoring..."),N.current=!0,localStorage.setItem("nsysu-last-synced-cloud-time",String(_)),wh($.data),window.location.reload();else{console.log("Online recovery: Local is newer, pushing to cloud...");const C=Mo(r),D=Date.now();await xA(z,{email:t.email,displayName:t.displayName,lastUpdatedAt:D,data:C},{merge:!0}),localStorage.setItem("nsysu-last-synced-cloud-time",String(D))}}}}catch(z){console.error("Online recovery sync failed:",z)}};return window.addEventListener("online",G),()=>window.removeEventListener("online",G)},[t,r]),{syncState:A,needsConsent:u,acceptConsent:async()=>{if(t)try{l("saving");const G=To(Ro,"users",t.uid);await xA(G,{email:t.email,displayName:t.displayName,termsAccepted:!0,termsAcceptedAt:Date.now()},{merge:!0}),d(!1),window.location.reload()}catch(G){console.error("Failed to accept consent:",G),l("idle")}},declineConsent:()=>{d(!1)},deleteCloudData:async()=>{if(t)try{const G=To(Ro,"users",t.uid);await xD(G),l("idle"),d(!1)}catch(G){throw console.error("Failed to delete cloud data:",G),G}},resolveConflict:async G=>{if(t)if(G==="cloud")f&&(console.log("User chose to keep cloud data. Restoring..."),N.current=!0,localStorage.removeItem("nsysu-local-state-modified-at"),wh(f),window.location.reload());else if(G==="local"){console.log("User chose to keep local data. Pushing to cloud...");try{l("saving");const z=To(Ro,"users",t.uid),q=Mo(r),$=Date.now();await xA(z,{email:t.email,displayName:t.displayName,lastUpdatedAt:$,data:q},{merge:!0}),localStorage.setItem("nsysu-last-synced-cloud-time",String($)),l("synced"),v.current=!1}catch(z){console.error("Firebase sync error on conflict resolution (local choice):",z),l("idle")}g(null)}else G==="cancel"&&(console.log("User chose to cancel login at conflict. Logging out..."),g(null),l("idle"),await s(),window.location.reload())}}}function tP(){const{language:r,setLanguage:e,t}=At(),{user:s,loading:A,login:l,logout:u}=wu(),{clearAllLabels:d,allUserLabels:f,courseUserLabels:g,importLabels:x}=xu(),[y,v]=k.useState(()=>{const me=localStorage.getItem("nsysu-courses");return me?JSON.parse(me):[]}),{syncState:N,needsConsent:M,acceptConsent:S,declineConsent:V,deleteCloudData:K,resolveConflict:G}=eP(y,v),[z,q]=k.useState(()=>localStorage.getItem("nsysu-view-mode")||"tracker");k.useEffect(()=>{localStorage.getItem("nsysu-debug-boundaries")==="true"&&document.body.classList.add("debug-outlines")},[]);const[$,Y]=k.useState(!1),[E,_]=k.useState(null),[C,D]=k.useState(!1),[j,Q]=k.useState(()=>localStorage.getItem("nsysu-last-announcement-ver")!==gf),[U,T]=k.useState(!1),[W,H]=k.useState(0),[F,L]=k.useState(0),te=k.useRef(null),[Ae,P]=k.useState(null);k.useEffect(()=>{localStorage.setItem("nsysu-view-mode",z)},[z]);const[J,le]=k.useState(!1),{startTutorial:ge}=J6({onOpenAddCourse:()=>{ds(void 0),kr(!0)},onCloseAddCourse:()=>kr(!1),onOpenSchedule:()=>{q("tracker");const me=sr.length>0?sr[0]:"113-1";P(me)},onCloseSchedule:()=>P(null),onSwitchToPlanner:()=>q("planner"),onSwitchToTracker:()=>q("tracker"),onTutorialStart:()=>le(!0),onTutorialEnd:()=>le(!1)});Z6(y);const[Ee,Ce]=k.useState(()=>{const me=JSON.parse(localStorage.getItem("nsysu-emi-student")||"false"),Le=localStorage.getItem("nsysu-student-class");return Le||(me?"":"-")}),[Se,ut]=k.useState(()=>localStorage.getItem("nsysu-major")||""),[qe,Gt]=k.useState(()=>Number(localStorage.getItem("nsysu-entrance-year"))||113),[Nt,he]=k.useState(()=>JSON.parse(localStorage.getItem("nsysu-grad-credits")||"128")),[R,Z]=k.useState(()=>localStorage.getItem("nsysu-theme")||"dark"),{courses:de,fetchCourses:pe,semesters:ze}=oa(),[it,Je]=k.useState([]),[De,Ue]=k.useState(null),[St,qs]=k.useState([]),[Pt,ve]=k.useState(null);k.useEffect(()=>{if(y.length>0){const me=JSON.parse(localStorage.getItem("nsysu-skipped-fixes-v2")||"[]"),Le=new Set;y.forEach(Be=>{const ot=Be.category==="General Education"&&Be.genEduSubCategory==="Primer",Yt=Be.category==="General Education"&&Be.genEduSubCategory==="Service",It=!Be.originalId||!Be.originalSemester||!Be.department,hs=Be.name.includes(`
`),Xe=/[\u4e00-\u9fa5]/.test(Be.name),hr=!hs&&!Xe,zt=(Be.fixAttempts||0)>=2;It&&!Be.isExemption&&!ot&&!Yt&&!hr&&!zt&&(me.includes(Be.semester)||Le.add(Be.semester))})}},[y]),k.useEffect(()=>{if(j||J||!De||de.length===0)return;if(!(it.length>0&&!De)){if(De&&!(de.filter(zt=>zt.semester===De).length>0))return}if(St.length>0)return;const me=it[0];if(!me)return;let Le=0,Be=[],ot=[],Yt=[...y],It=!1;if(Yt=Yt.map(Xe=>{const hr=Xe.category==="General Education"&&Xe.genEduSubCategory==="Primer",zt=Xe.category==="General Education"&&Xe.genEduSubCategory==="Service",Vr=Xe.userLabels?.includes("manual");if(Xe.isExemption||hr||zt||Vr)return Xe;if(Xe.semester===me&&(!Xe.originalId||!Xe.originalSemester||!Xe.department)){const _t=de.filter(ms=>ms.semester===De),{match:Tr,candidates:Fn,ambiguity:fs}=W6(Xe,_t);if(Tr){Le++,It=!0;let ms={};if(Array.isArray(Tr.classTime)){const In=Gx(Tr.classTime);In&&(ms={day:In.day,startTime:In.startTime,endTime:In.endTime})}return{...Xe,room:Tr.room||Xe.room,teacher:Tr.teacher||Xe.teacher,originalTags:Tr.tags||Xe.originalTags,originalSemester:Tr.semester||Xe.originalSemester,originalId:Tr.id||Xe.originalId,department:Tr.department||Xe.department,...ms}}if(fs)Be.push({userCourse:Xe,candidates:Fn});else return ot.push(Xe.name),It=!0,{...Xe,fixAttempts:(Xe.fixAttempts||0)+1};It=!0}return Xe}),It&&v(Yt),Be.length>0){qs(Be);return}Be.length===0&&(ot.length>0||Le>0?ve({patched:Le,unmatched:ot}):Le===0&&ot.length===0&&ve({patched:0,unmatched:[]}));const hs=JSON.parse(localStorage.getItem("nsysu-skipped-fixes-v2")||"[]");hs.includes(me)||localStorage.setItem("nsysu-skipped-fixes-v2",JSON.stringify([...hs,me])),Ue(null),Je(Xe=>Xe.slice(1))},[de,De,St.length,j,J]);const Vt=me=>{const Le=St[0];Le&&(v(Be=>Be.map(ot=>{if(ot.id===Le.userCourse.id){let Yt={};if(Array.isArray(me.classTime)){const It=Gx(me.classTime);It&&(Yt={day:It.day,startTime:It.startTime,endTime:It.endTime})}return{...ot,room:me.room||ot.room,teacher:me.teacher||ot.teacher,department:me.department||ot.department,originalId:me.id,originalSemester:me.semester,originalTags:me.tags,...Yt}}return ot})),qs(Be=>Be.slice(1)))},[sr,Ht]=k.useState(()=>{const me=localStorage.getItem("nsysu-semesters");return me?JSON.parse(me):[...Ec]}),[br,kr]=k.useState(!1),[Ts,ce]=k.useState(!1),[Re,Ye]=k.useState(!1),[nt,Oe]=k.useState(!1),[tt,dr]=k.useState(!1);k.useEffect(()=>{localStorage.setItem("nsysu-semesters",JSON.stringify(sr))},[sr]),k.useEffect(()=>(document.body.style.overflow=Ts?"hidden":"auto",()=>{document.body.style.overflow="auto"}),[Ts]);const cs=(me,Le)=>{const Be=Le==="Summer"?`Year ${me} Summer`:`Year ${me} ${Le}`;Ht(ot=>[...ot,Be].sort((It,hs)=>{const Xe=hr=>{const zt=hr.split(" "),Vr=parseInt(zt[1]);let _t=0;return zt[2]==="Sem"?_t=parseInt(zt[3]):zt[2]==="Summer"&&(_t=3),Vr*10+_t};return Xe(It)-Xe(hs)}))},[ts,us]=k.useState(!1);k.useEffect(()=>{if(j||J)return;if(!localStorage.getItem("nsysu-setup-reminder-seen")&&(Se===""||qe===113||Nt===128)){const Be=setTimeout(()=>us(!0),1e3);return()=>clearTimeout(Be)}},[j,J,it.length,St.length,Pt,Se,qe,Nt]);const qt=(me=!1)=>{localStorage.setItem("nsysu-setup-reminder-seen","true"),us(!1),me&&ce(!0)},[Ys,ds]=k.useState(void 0);k.useEffect(()=>{localStorage.setItem("nsysu-courses",JSON.stringify(y))},[y]),k.useEffect(()=>{localStorage.setItem("nsysu-student-class",Ee),localStorage.setItem("nsysu-grad-credits",JSON.stringify(Nt)),localStorage.setItem("nsysu-major",Se),localStorage.setItem("nsysu-entrance-year",qe.toString())},[Ee,Nt,Se,qe]),k.useEffect(()=>{const me=document.documentElement;me.setAttribute("data-theme",R),R==="dark"?me.classList.add("dark"):me.classList.remove("dark"),localStorage.setItem("nsysu-theme",R),localStorage.setItem("nsysu-theme",R)},[R]);const[Us,Ha]=k.useState(!1),[zA,Qs]=k.useState(!1),[la,xl]=k.useState(null);k.useEffect(()=>{const me=()=>Ha(!0);return window.addEventListener("admin-login-request",me),()=>window.removeEventListener("admin-login-request",me)},[]),k.useEffect(()=>{if(ze.length>0){const me=ze[0];pe(me)}},[ze,pe]);const Qn=me=>{v(Le=>Le.some(ot=>ot.id===me.id)?Le.map(ot=>ot.id===me.id?me:ot):[...Le,me]),ds(void 0)},Gi=me=>{v(y.filter(Le=>Le.id!==me))},qi=me=>{v(Le=>{const Be=new Set(me.map(Yt=>Yt.id));return[...Le.filter(Yt=>!Be.has(Yt.id)),...me]})},ca=me=>{ds(me),kr(!0)},Fs=async()=>{const me={};try{const Le=await g1();for(const Be of Le){const ot=await EO(Be.file);me[Be.id]={name:Be.name,type:Be.type,lastModified:Be.lastModified,data:ot}}}catch(Le){console.error("Error gathering assets for export:",Le)}try{const Le=JSON.parse(localStorage.getItem("nsysu-micro-credits-data")||"null"),Be=JSON.parse(localStorage.getItem("nsysu-interdisciplinary-teacher-education-data")||"null"),ot=JSON.parse(localStorage.getItem("nsysu-interdisciplinary-double-major-data")||"null"),Yt=JSON.parse(localStorage.getItem("nsysu-interdisciplinary-cross-disciplinary-data")||"null"),It=JSON.parse(localStorage.getItem("nsysu-diverse-learning-data")||"null"),hs=JSON.parse(localStorage.getItem("nsysu-interdisciplinary-course-9-data")||"null"),Xe={};for(let Tr=1;Tr<=10;Tr++){const Fn=`nsysu-interdisciplinary-item-${Tr}-notes`,fs=localStorage.getItem(Fn);fs&&(Xe[Fn]=fs)}const hr={version:1,lastUpdated:new Date().toISOString(),settings:{studentClass:Ee,graduationCredits:Nt,major:Se,entranceYear:qe},labels:{library:f,map:g},courses:y,plannerDraft:JSON.parse(localStorage.getItem("nsysu-planner-draft")||"[]"),interdisciplinaryStatus:JSON.parse(localStorage.getItem("nsysu-interdisciplinary-status")||"{}"),minorData:JSON.parse(localStorage.getItem("nsysu-interdisciplinary-minor-data")||"null"),microCreditsData:Le,teacherEducationData:Be,doubleMajorData:ot,crossDisciplinaryData:Yt,diverseLearningData:It,interdisciplinaryCourseData:hs,interdisciplinaryNotes:Xe,assets:me},zt=new Blob([JSON.stringify(hr,null,2)],{type:"application/json"}),Vr=URL.createObjectURL(zt),_t=document.createElement("a");_t.href=Vr,_t.download=`ClearGrad._Data_${new Date().toISOString().split("T")[0]}.json`,_t.click(),URL.revokeObjectURL(Vr)}catch(Le){console.error("Export failed:",Le),alert("Export failed! Please try again.")}},Oa=async me=>{try{const Le=await me.text(),Be=JSON.parse(Le);Be.courses&&Array.isArray(Be.courses)?(v(Be.courses),localStorage.setItem("nsysu-courses",JSON.stringify(Be.courses)),Be.settings&&(Be.settings.studentClass&&(Ce(Be.settings.studentClass),localStorage.setItem("nsysu-student-class",Be.settings.studentClass)),Be.settings.graduationCredits&&(he(Be.settings.graduationCredits),localStorage.setItem("nsysu-grad-credits",JSON.stringify(Be.settings.graduationCredits))),Be.settings.major&&(ut(Be.settings.major),localStorage.setItem("nsysu-major",Be.settings.major)),Be.settings.entranceYear&&(Gt(Be.settings.entranceYear),localStorage.setItem("nsysu-entrance-year",String(Be.settings.entranceYear)))),Be.labels&&Be.labels.library&&Be.labels.map&&x(Be.labels.library,Be.labels.map),Be.plannerDraft&&localStorage.setItem("nsysu-planner-draft",JSON.stringify(Be.plannerDraft)),Be.interdisciplinaryStatus&&localStorage.setItem("nsysu-interdisciplinary-status",JSON.stringify(Be.interdisciplinaryStatus)),Be.minorData&&localStorage.setItem("nsysu-interdisciplinary-minor-data",JSON.stringify(Be.minorData)),Be.microCreditsData&&localStorage.setItem("nsysu-micro-credits-data",JSON.stringify(Be.microCreditsData)),Be.teacherEducationData&&localStorage.setItem("nsysu-interdisciplinary-teacher-education-data",JSON.stringify(Be.teacherEducationData)),Be.doubleMajorData&&localStorage.setItem("nsysu-interdisciplinary-double-major-data",JSON.stringify(Be.doubleMajorData)),Be.crossDisciplinaryData&&localStorage.setItem("nsysu-interdisciplinary-cross-disciplinary-data",JSON.stringify(Be.crossDisciplinaryData)),Be.diverseLearningData&&localStorage.setItem("nsysu-diverse-learning-data",JSON.stringify(Be.diverseLearningData)),Be.interdisciplinaryCourseData&&localStorage.setItem("nsysu-interdisciplinary-course-9-data",JSON.stringify(Be.interdisciplinaryCourseData)),Be.interdisciplinaryNotes&&Object.entries(Be.interdisciplinaryNotes).forEach(([ot,Yt])=>{localStorage.setItem(ot,Yt)}),Be.assets&&Array.isArray(Be.assets)&&(console.log(`Restoring ${Be.assets.length} assets...`),await SO(Be.assets)),alert("Import successful!"),window.location.reload()):alert("Invalid file format")}catch(Le){console.error("Import failed:",Le),alert("Import failed! Invalid JSON file.")}te.current&&(te.current.value="")},Is=me=>{const Le=me.target.files?.[0];Le&&(y.length>0?(_(Le),Y(!0),te.current&&(te.current.value="")):Oa(Le))},Ds=async()=>{try{const me=await g1();H(me.length)}catch{H(0)}T(!0)},nr=async()=>{v([]),localStorage.removeItem("nsysu-planner-draft"),localStorage.removeItem("nsysu-interdisciplinary-status"),localStorage.removeItem("nsysu-interdisciplinary-minor-data"),localStorage.removeItem("nsysu-interdisciplinary-double-major-data"),localStorage.removeItem("nsysu-interdisciplinary-teacher-education-data"),localStorage.removeItem("nsysu-micro-credits-data"),localStorage.removeItem("nsysu-interdisciplinary-cross-disciplinary-data"),localStorage.removeItem("nsysu-diverse-learning-data"),localStorage.removeItem("nsysu-interdisciplinary-course-9-data");for(let me=1;me<=10;me++)localStorage.removeItem(`nsysu-interdisciplinary-item-${me}-notes`);await CO(),d(),L(me=>me+1),T(!1),window.location.reload()},or=k.useMemo(()=>({major:Se,entranceYear:qe,studentClass:Ee}),[Se,qe,Ee]);return a.jsxs("div",{className:"min-h-screen font-sans selection:bg-primary/30 transition-colors duration-500 bg-background text-foreground",children:[a.jsx("header",{className:"sticky top-0 z-40 transition-colors duration-300 bg-surface/50 border-b border-border backdrop-blur-md",children:a.jsxs("div",{className:"w-full px-4 py-2 flex flex-wrap justify-between items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3",id:"header-title",children:[a.jsx("img",{src:R==="dark"?"./Dark_mode_full.png":"./Light_mode_full.png",alt:"ClearGrad",className:"h-8 w-auto object-contain"}),a.jsx("div",{id:"mode-switcher",className:"flex bg-background/50 p-1 rounded-lg border border-gray-300 dark:border-border/50 ml-2",children:z==="interdisciplinary"?a.jsxs("button",{onClick:()=>q("tracker"),className:"px-3 py-1.5 rounded-md text-sm font-medium transition-all duration-200 flex items-center gap-1.5 text-white bg-[#8D9CB2] hover:bg-[#8299BB] dark:text-gray-900 dark:bg-[#A8C8FA] dark:hover:bg-[#8299BB] shadow-sm",children:[a.jsx(G2,{size:16}),a.jsx("span",{children:t.app.backToTracker})]}):a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>q("tracker"),className:`flex items-center gap-2 px-3 py-1.5 rounded-md text-sm font-medium transition-all ${z==="tracker"?"bg-primary text-white dark:text-gray-700 shadow-sm":"text-muted hover:text-foreground"}`,children:[a.jsx(M5,{size:16}),a.jsx("span",{children:t.app.tracker})]}),a.jsxs("button",{onClick:()=>q("planner"),className:`flex items-center gap-2 px-3 py-1.5 rounded-md text-sm font-medium transition-all ${z==="planner"?"bg-primary text-white dark:text-gray-700 shadow-sm":"text-muted hover:text-foreground"}`,children:[a.jsx(ol,{size:16}),a.jsx("span",{children:t.app.planner})]})]})})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{id:"header-settings",onClick:()=>{document.body.classList.contains("tutorial-running")||ce(!0)},className:"bg-surface hover:bg-surface/80 text-muted hover:text-foreground px-3 py-2 rounded-lg transition-colors text-sm font-medium",children:t.app.settings}),z==="planner"&&a.jsxs("button",{onClick:()=>dr(!0),className:"bg-[#E9E1FF] hover:bg-[#DCD0FF] text-[#3F3C47] dark:bg-[#62587D]/70 dark:text-[#D8C9FF] dark:hover:bg-[#62587D]/90 px-3 py-2 rounded-lg transition-colors text-sm font-medium flex items-center gap-1.5",children:[a.jsx(ol,{size:16}),a.jsx("span",{className:"hidden sm:inline",children:t.courseSchedule?.button||"Schedule"})]}),z==="tracker"&&a.jsxs("button",{id:"header-add-course",onClick:()=>{document.body.classList.contains("tutorial-running")||(ds(void 0),kr(!0))},className:"bg-[#303030] hover:!bg-[#8D9CB2] dark:bg-[#EFEFEF] dark:hover:!bg-[#A8C8FA] text-white dark:text-gray-700 px-4 py-2 rounded-lg font-bold shadow-lg shadow-black/20 dark:shadow-white/10 transition-all flex items-center gap-2",children:[a.jsx(es,{size:18})," ",a.jsx("span",{className:"hidden sm:inline",children:t.app.addCourse})]}),a.jsx("div",{className:"h-8 w-[1px] bg-border mx-2"}),a.jsxs("div",{id:"header-data-controls",className:"flex items-center",children:[a.jsx("button",{onClick:Fs,className:"p-2 text-muted hover:text-foreground transition-colors",title:t.app.export,children:a.jsx(kf,{size:20})}),a.jsxs("label",{className:"p-2 text-muted hover:text-foreground transition-colors cursor-pointer",title:t.app.import,children:[a.jsx(nk,{size:20}),a.jsx("input",{type:"file",ref:te,onChange:Is,accept:".json",className:"hidden"})]}),!s&&a.jsx("button",{onClick:Ds,className:"p-2 text-muted hover:text-danger transition-colors",title:t.app.clear,children:a.jsx(ru,{size:20})})]}),a.jsx("div",{className:"h-8 w-[1px] bg-border mx-2"}),a.jsx("button",{id:"header-history",onClick:()=>Ye(!0),className:"p-2 text-muted hover:text-foreground transition-colors",title:t.updates.title,children:a.jsx(m5,{size:20})}),a.jsx("button",{id:"header-support",onClick:me=>{me.preventDefault();const Le=Date.now(),ot=(window._supportIconClicks||[]).filter(Yt=>Le-Yt<1e3);if(ot.push(Le),window._supportIconClicks=ot,ot.length>=3){window._supportIconClicks=[],Ha(!0);return}ot.length===1&&setTimeout(()=>{(window._supportIconClicks||[]).filter(It=>Date.now()-It<1e3).length<3&&Oe(!0)},350)},className:"p-2 text-muted hover:text-foreground transition-colors",title:t.support.title,children:a.jsx($2,{size:20})}),a.jsx("div",{className:"h-8 w-[1px] bg-border mx-2"}),!A&&(s?a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"text-xs font-medium px-2 py-1 rounded-full bg-surface/50 border border-border flex items-center gap-1.5 transition-all",children:[N==="editing"&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"animate-pulse",children:""})," ",a.jsx("span",{className:"hidden sm:inline",children:"..."})]}),N==="saving"&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"animate-spin inline-block",children:""})," ",a.jsx("span",{className:"hidden sm:inline",children:"..."})]}),N==="synced"&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""})," ",a.jsx("span",{className:"hidden sm:inline",children:""})]}),N==="idle"&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""})," ",a.jsx("span",{className:"hidden sm:inline",children:""})]})]}),a.jsxs("div",{className:"relative group/auth",children:[a.jsx("button",{className:"flex w-8 h-8 rounded-full overflow-hidden border border-border shadow-sm hover:ring-2 hover:ring-primary/50 transition-all cursor-pointer",children:s.photoURL?a.jsx("img",{src:s.photoURL,alt:s.displayName||"User",className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full bg-surface flex items-center justify-center text-primary font-bold",children:(s.displayName||s.email||"?").charAt(0).toUpperCase()})}),a.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 bg-background border border-border rounded-xl shadow-xl opacity-0 invisible group-hover/auth:opacity-100 group-hover/auth:visible transition-all duration-200 transform origin-top-right z-50 overflow-hidden",children:[a.jsxs("div",{className:"px-4 py-3 border-b border-border/50 bg-surface/30",children:[a.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:s.displayName||"User"}),a.jsx("p",{className:"text-xs text-muted truncate",children:s.email})]}),a.jsx("button",{onClick:u,className:"w-full text-left px-4 py-2 text-sm text-danger hover:bg-danger/10 transition-colors flex items-center gap-2",children:a.jsx("span",{children:"Logout"})})]})]})]}):a.jsxs("button",{onClick:l,className:"bg-surface hover:bg-surface/80 text-foreground border border-border px-3 py-1.5 rounded-lg text-sm font-medium transition-all shadow-sm flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 rounded-full overflow-hidden flex-shrink-0 bg-white p-0.5",children:a.jsxs("svg",{viewBox:"0 0 48 48",className:"w-full h-full",children:[a.jsx("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}),a.jsx("path",{fill:"#4285F4",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"}),a.jsx("path",{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}),a.jsx("path",{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"}),a.jsx("path",{fill:"none",d:"M0 0h48v48H0z"})]})}),a.jsx("span",{className:"hidden sm:inline",children:"Sign in with Google"}),a.jsx("span",{className:"sm:hidden",children:"Sign in"})]}))]})]})}),a.jsx("main",{className:"w-full px-4 py-8",children:z==="tracker"?a.jsx(lO,{courses:y,semesters:sr,isEMIStudent:Ee==="",graduationCredits:Nt,userProfile:or,onEditCourse:ca,onAddSemester:cs,onFixData:me=>{Je([me]),Ue(null)},activeScheduleSemester:Ae,onViewSchedule:P,onOpenInterdisciplinary:()=>q("interdisciplinary")}):z==="planner"?a.jsx(bO,{semesters:sr,onAddCourse:Qn,onSaveCourses:qi,userProfile:or,existingCourses:y},F):a.jsx(s6,{theme:R,userProfile:or,courses:y})}),Ts&&a.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-background border border-border rounded-xl w-full max-w-md shadow-2xl p-6 relative",children:[a.jsx("button",{onClick:()=>ce(!1),className:"absolute right-4 top-4 text-muted hover:text-foreground",children:a.jsx(xt,{size:20})}),a.jsx("h2",{className:"text-xl font-bold text-foreground mb-4",children:t.settings.title}),a.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2 custom-scrollbar",children:[a.jsxs("div",{className:"bg-surface/50 p-3 rounded-lg border border-border/60 space-y-3",children:[a.jsxs("h3",{className:"text-sm font-semibold text-primary flex items-center gap-2",children:[a.jsx(W2,{size:16}),t.settings.profile||"Student Profile"]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-1",children:t.settings.major||"Major / Department"}),a.jsxs("select",{value:Se,onChange:me=>ut(me.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary appearance-none",children:[a.jsx("option",{value:"",children:t.settings.selectMajor||"Select Department..."}),qf.map(me=>a.jsx("optgroup",{label:me.category,className:"text-primary font-bold bg-surface/80",children:me.departments.map(Le=>a.jsx("option",{value:Le,className:"text-foreground bg-background",children:Le},Le))},me.category))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-1",children:t.settings.entranceYear||"Entrance Year (e.g. 113)"}),a.jsx("input",{type:"number",min:"100",max:"120",value:qe,onChange:me=>Gt(Number(me.target.value)),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-1",children:t.settings.class||"Class"}),a.jsxs("select",{value:Ee,onChange:me=>Ce(me.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary appearance-none",children:[a.jsx("option",{value:"-",children:"-"}),a.jsx("option",{value:"",children:t.catalog.class?.shared||"Shared / No Class"}),a.jsx("option",{value:"",children:t.catalog.class?.a||"Class A"}),a.jsx("option",{value:"",children:t.catalog.class?.b||"Class B"}),a.jsx("option",{value:"",children:t.catalog.class?.english||"English Class"})]}),Ee===""&&a.jsxs("div",{className:"mt-2 p-2 bg-yellow-500/10 border border-yellow-500/20 rounded-md text-xs text-yellow-500 flex items-center gap-1.5",children:[a.jsx(gx,{size:12}),t.settings.emiHintActive||"EMI Liberal Arts tracking enabled"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-1",children:t.settings.gradCredits}),a.jsx("input",{type:"number",min:"100",max:"200",value:Nt,onChange:me=>he(Number(me.target.value)),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),a.jsxs("div",{className:"mt-2 p-2 bg-blue-500/10 border border-blue-500/20 rounded-md text-xs text-blue-400 flex items-start gap-1.5",children:[a.jsx("span",{className:"mt-0.5",children:""}),a.jsx("span",{children:t.settings.profileWarning||"Please ensure your profile is correct to get accurate search results."})]})]}),a.jsx("div",{className:"bg-surface/50 p-3 rounded-lg border border-border/60",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2 text-foreground",children:[a.jsx(H0,{size:18,className:"text-primary"}),a.jsx("span",{className:"font-medium",children:t.settings.language})]}),a.jsxs("div",{className:"flex bg-background/50 rounded-lg p-1 border border-border/60",children:[a.jsx("button",{onClick:()=>e("en"),className:`px-3 py-1 rounded-md text-sm font-medium transition-all ${r==="en"?"bg-primary text-white dark:text-[#303030] shadow":"text-muted hover:text-foreground"}`,children:"English"}),a.jsx("button",{onClick:()=>e("zh"),className:`px-3 py-1 rounded-md text-sm font-medium transition-all ${r==="zh"?"bg-primary text-white dark:text-[#303030] shadow":"text-muted hover:text-foreground"}`,children:""})]})]})}),a.jsx("div",{className:"bg-surface/50 p-3 rounded-lg border border-border/60",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2 text-foreground",children:[R==="dark"?a.jsx(mx,{size:18,className:"text-primary"}):a.jsx(px,{size:18,className:"text-warning"}),a.jsx("span",{className:"font-medium",children:R==="dark"?t.settings.darkMode:t.settings.lightMode||"Light Mode"})]}),a.jsxs("div",{className:"flex bg-background/50 rounded-lg p-1 border border-border/60",children:[a.jsx("button",{onClick:()=>Z("dark"),className:`px-3 py-1 rounded-md text-sm font-medium transition-all ${R==="dark"?"bg-primary text-white dark:text-[#303030] shadow":"text-muted hover:text-foreground"}`,children:a.jsx(mx,{size:14})}),a.jsx("button",{onClick:()=>Z("light"),className:`px-3 py-1 rounded-md text-sm font-medium transition-all ${R==="light"?"bg-warning text-black shadow":"text-muted hover:text-foreground"}`,children:a.jsx(px,{size:14})})]})]})}),s&&a.jsxs("div",{className:"mt-8 border-t border-red-500/20 pt-6 pb-2",children:[a.jsxs("h3",{className:"text-sm font-semibold text-red-500 mb-3 uppercase tracking-wider flex items-center gap-2",children:[a.jsx(ru,{size:16}),r==="zh"?" (Danger Zone)":"Danger Zone"]}),a.jsx("button",{onClick:()=>D(!0),className:"w-full flex items-center justify-center gap-2 bg-red-500/10 hover:bg-red-500/20 text-red-500 border border-red-500/20 py-2.5 rounded-lg font-medium transition-colors",children:a.jsx("span",{children:r==="zh"?" ":" Delete Cloud Backup & Logout"})})]})]}),a.jsxs("div",{className:"mt-6 flex justify-between items-center pt-4 border-t border-border",children:[a.jsxs("button",{onClick:()=>{ce(!1),ge()},className:"text-primary hover:text-[#303030] dark:hover:text-[#EFEFEF] font-medium text-sm flex items-center gap-2 hover:bg-primary/10 px-3 py-2 rounded-lg transition-colors",title:t.tutorial.start,children:[a.jsx(gx,{size:16}),t.tutorial.start]}),a.jsx("button",{onClick:()=>ce(!1),className:"bg-primary hover:bg-[var(--color-primary-hover)] text-white px-6 py-2 rounded-lg font-bold shadow-lg shadow-primary/20 transition-all",children:t.settings.save})]})]})}),br&&a.jsx(a6,{onSave:Qn,onClose:()=>kr(!1),onDelete:Gi,initialCourse:Ys,userMajor:Se,theme:R}),Re&&a.jsx(i6,{onClose:()=>Ye(!1)}),nt&&a.jsx(d6,{onClose:()=>Oe(!1)}),j&&a.jsx(h6,{theme:R,setTheme:Z,onStartTutorial:ge,onClose:me=>{me&&localStorage.setItem("nsysu-last-announcement-ver",gf),Q(!1)}}),it.length>0&&St.length===0&&!j&&!J&&a.jsx(f6,{semesterName:it[0],availableSemesters:ze,isLoading:!!De,missingCourses:y.filter(me=>me.semester===it[0]&&(!me.room||!me.teacher||!me.originalSemester||!me.department)&&!me.isExemption&&!me.isExemption&&me.category!=="University Way"&&!me.userLabels?.includes("manual")&&me.name.includes(`
`)&&/[\u4e00-\u9fa5]/.test(me.name)&&/[a-zA-Z]/.test(me.name)).map(me=>me.name),onFix:me=>{Ue(me),pe(me)},onSkip:()=>{const me=it[0],Le=JSON.parse(localStorage.getItem("nsysu-skipped-fixes-v2")||"[]");Le.includes(me)||localStorage.setItem("nsysu-skipped-fixes-v2",JSON.stringify([...Le,me])),Je(Be=>Be.slice(1))}}),St.length>0&&a.jsx(m6,{candidates:St[0].candidates,userCourse:St[0].userCourse,onSelect:Vt,onCancel:()=>{qs(me=>me.slice(1)),St.length<=1&&Ue(null)}},St[0].userCourse.id),Pt&&a.jsx(g6,{patchedCount:Pt.patched,unmatchedNames:Pt.unmatched,onClose:()=>ve(null)}),$&&E&&a.jsx(p6,{existingCount:y.length,onConfirm:()=>{Oa(E),Y(!1),_(null)},onBackupAndConfirm:async()=>{await Fs(),Oa(E),Y(!1),_(null)},onCancel:()=>{Y(!1),_(null)}}),U&&a.jsx(x6,{existingCount:y.length,filesCount:W,onConfirm:nr,onBackupAndConfirm:()=>{Fs(),nr()},onCancel:()=>T(!1)}),ts&&a.jsx(y6,{onClose:()=>qt(!1),onGoToSettings:()=>qt(!0)}),tt&&a.jsx(b6,{onClose:()=>dr(!1)}),Us&&a.jsx(B6,{onClose:()=>Ha(!1),onLogin:me=>{Ha(!1),xl(me),Qs(!0)}}),zA&&a.jsx(E6,{courses:y,adminId:la,onClose:()=>{Qs(!1),Oe(!1)}}),N==="conflict"&&a.jsx(_6,{onResolve:G}),M&&a.jsx(N6,{onDecline:V,onAccept:S,theme:R}),C&&a.jsx(S6,{onCancel:()=>D(!1),onConfirm:async()=>{try{await K(),await u(),D(!1),ce(!1),window.location.reload()}catch(me){console.error("Deletion failed:",me),alert(r==="zh"?"":"Deletion failed. Please check your connection or try again later.")}}}),a.jsx("footer",{className:"w-full py-6 text-center mt-auto",children:a.jsxs("p",{className:"text-xs text-muted/60 font-medium flex items-center justify-center gap-1",children:[a.jsx("span",{className:"opacity-75",children:" 2026 ClearGrad. "}),a.jsx("span",{className:"hidden sm:inline opacity-50",children:"|"}),a.jsx("span",{className:"block sm:inline opacity-75",children:"Created by "}),a.jsx("span",{className:"hidden sm:inline opacity-50",children:"|"}),a.jsx("span",{className:"block sm:inline opacity-75",children:"Colors by "})]})})]})}lj.createRoot(document.getElementById("root")).render(a.jsx(k.StrictMode,{children:a.jsx(u6,{children:a.jsx(Bk,{children:a.jsx(Ek,{children:a.jsx(uO,{children:a.jsx(tP,{})})})})})}));
