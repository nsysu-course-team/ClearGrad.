(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const A of document.querySelectorAll('link[rel="modulepreload"]'))s(A);new MutationObserver(A=>{for(const l of A)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function t(A){const l={};return A.integrity&&(l.integrity=A.integrity),A.referrerPolicy&&(l.referrerPolicy=A.referrerPolicy),A.crossOrigin==="use-credentials"?l.credentials="include":A.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(A){if(A.ep)return;A.ep=!0;const l=t(A);fetch(A.href,l)}})();var Vg={exports:{}},hc={};var yw;function r_(){if(yw)return hc;yw=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,A,l){var d=null;if(l!==void 0&&(d=""+l),A.key!==void 0&&(d=""+A.key),"key"in A){l={};for(var u in A)u!=="key"&&(l[u]=A[u])}else l=A;return A=l.ref,{$$typeof:r,type:s,key:d,ref:A!==void 0?A:null,props:l}}return hc.Fragment=e,hc.jsx=t,hc.jsxs=t,hc}var bw;function s_(){return bw||(bw=1,Vg.exports=r_()),Vg.exports}var a=s_(),zg={exports:{}},tt={};var vw;function n_(){if(vw)return tt;vw=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),d=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),v=Symbol.iterator;function N(O){return O===null||typeof O!="object"?null:(O=v&&O[v]||O["@@iterator"],typeof O=="function"?O:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,P={};function V(O,J,Ae){this.props=O,this.context=J,this.refs=P,this.updater=Ae||R}V.prototype.isReactComponent={},V.prototype.setState=function(O,J){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,J,"setState")},V.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function $(){}$.prototype=V.prototype;function G(O,J,Ae){this.props=O,this.context=J,this.refs=P,this.updater=Ae||R}var K=G.prototype=new $;K.constructor=G,S(K,V.prototype),K.isPureReactComponent=!0;var Y=Array.isArray;function q(){}var E={H:null,A:null,T:null,S:null},j=Object.prototype.hasOwnProperty;function B(O,J,Ae){var me=Ae.ref;return{$$typeof:r,type:O,key:J,ref:me!==void 0?me:null,props:Ae}}function I(O,J){return B(O.type,J,O.props)}function _(O){return typeof O=="object"&&O!==null&&O.$$typeof===r}function Q(O){var J={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(Ae){return J[Ae]})}var U=/\/+/g;function T(O,J){return typeof O=="object"&&O!==null&&O.key!=null?Q(""+O.key):J.toString(36)}function W(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(q,q):(O.status="pending",O.then(function(J){O.status==="pending"&&(O.status="fulfilled",O.value=J)},function(J){O.status==="pending"&&(O.status="rejected",O.reason=J)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function M(O,J,Ae,me,Ee){var Be=typeof O;(Be==="undefined"||Be==="boolean")&&(O=null);var Ue=!1;if(O===null)Ue=!0;else switch(Be){case"bigint":case"string":case"number":Ue=!0;break;case"object":switch(O.$$typeof){case r:case e:Ue=!0;break;case x:return Ue=O._init,M(Ue(O._payload),J,Ae,me,Ee)}}if(Ue)return Ee=Ee(O),Ue=me===""?"."+T(O,0):me,Y(Ee)?(Ae="",Ue!=null&&(Ae=Ue.replace(U,"$&/")+"/"),M(Ee,J,Ae,"",function(Et){return Et})):Ee!=null&&(_(Ee)&&(Ee=I(Ee,Ae+(Ee.key==null||O&&O.key===Ee.key?"":(""+Ee.key).replace(U,"$&/")+"/")+Ue)),J.push(Ee)),1;Ue=0;var Me=me===""?".":me+":";if(Y(O))for(var $e=0;$e<O.length;$e++)me=O[$e],Be=Me+T(me,$e),Ue+=M(me,J,Ae,Be,Ee);else if($e=N(O),typeof $e=="function")for(O=$e.call(O),$e=0;!(me=O.next()).done;)me=me.value,Be=Me+T(me,$e++),Ue+=M(me,J,Ae,Be,Ee);else if(Be==="object"){if(typeof O.then=="function")return M(W(O),J,Ae,me,Ee);throw J=String(O),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Ue}function F(O,J,Ae){if(O==null)return O;var me=[],Ee=0;return M(O,me,"","",function(Be){return J.call(Ae,Be,Ee++)}),me}function z(O){if(O._status===-1){var J=O._result;J=J(),J.then(function(Ae){(O._status===0||O._status===-1)&&(O._status=1,O._result=Ae)},function(Ae){(O._status===0||O._status===-1)&&(O._status=2,O._result=Ae)}),O._status===-1&&(O._status=0,O._result=J)}if(O._status===1)return O._result.default;throw O._result}var ne=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},te={map:F,forEach:function(O,J,Ae){F(O,function(){J.apply(this,arguments)},Ae)},count:function(O){var J=0;return F(O,function(){J++}),J},toArray:function(O){return F(O,function(J){return J})||[]},only:function(O){if(!_(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return tt.Activity=y,tt.Children=te,tt.Component=V,tt.Fragment=t,tt.Profiler=A,tt.PureComponent=G,tt.StrictMode=s,tt.Suspense=f,tt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,tt.__COMPILER_RUNTIME={__proto__:null,c:function(O){return E.H.useMemoCache(O)}},tt.cache=function(O){return function(){return O.apply(null,arguments)}},tt.cacheSignal=function(){return null},tt.cloneElement=function(O,J,Ae){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var me=S({},O.props),Ee=O.key;if(J!=null)for(Be in J.key!==void 0&&(Ee=""+J.key),J)!j.call(J,Be)||Be==="key"||Be==="__self"||Be==="__source"||Be==="ref"&&J.ref===void 0||(me[Be]=J[Be]);var Be=arguments.length-2;if(Be===1)me.children=Ae;else if(1<Be){for(var Ue=Array(Be),Me=0;Me<Be;Me++)Ue[Me]=arguments[Me+2];me.children=Ue}return B(O.type,Ee,me)},tt.createContext=function(O){return O={$$typeof:d,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:l,_context:O},O},tt.createElement=function(O,J,Ae){var me,Ee={},Be=null;if(J!=null)for(me in J.key!==void 0&&(Be=""+J.key),J)j.call(J,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(Ee[me]=J[me]);var Ue=arguments.length-2;if(Ue===1)Ee.children=Ae;else if(1<Ue){for(var Me=Array(Ue),$e=0;$e<Ue;$e++)Me[$e]=arguments[$e+2];Ee.children=Me}if(O&&O.defaultProps)for(me in Ue=O.defaultProps,Ue)Ee[me]===void 0&&(Ee[me]=Ue[me]);return B(O,Be,Ee)},tt.createRef=function(){return{current:null}},tt.forwardRef=function(O){return{$$typeof:u,render:O}},tt.isValidElement=_,tt.lazy=function(O){return{$$typeof:x,_payload:{_status:-1,_result:O},_init:z}},tt.memo=function(O,J){return{$$typeof:g,type:O,compare:J===void 0?null:J}},tt.startTransition=function(O){var J=E.T,Ae={};E.T=Ae;try{var me=O(),Ee=E.S;Ee!==null&&Ee(Ae,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(q,ne)}catch(Be){ne(Be)}finally{J!==null&&Ae.types!==null&&(J.types=Ae.types),E.T=J}},tt.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},tt.use=function(O){return E.H.use(O)},tt.useActionState=function(O,J,Ae){return E.H.useActionState(O,J,Ae)},tt.useCallback=function(O,J){return E.H.useCallback(O,J)},tt.useContext=function(O){return E.H.useContext(O)},tt.useDebugValue=function(){},tt.useDeferredValue=function(O,J){return E.H.useDeferredValue(O,J)},tt.useEffect=function(O,J){return E.H.useEffect(O,J)},tt.useEffectEvent=function(O){return E.H.useEffectEvent(O)},tt.useId=function(){return E.H.useId()},tt.useImperativeHandle=function(O,J,Ae){return E.H.useImperativeHandle(O,J,Ae)},tt.useInsertionEffect=function(O,J){return E.H.useInsertionEffect(O,J)},tt.useLayoutEffect=function(O,J){return E.H.useLayoutEffect(O,J)},tt.useMemo=function(O,J){return E.H.useMemo(O,J)},tt.useOptimistic=function(O,J){return E.H.useOptimistic(O,J)},tt.useReducer=function(O,J,Ae){return E.H.useReducer(O,J,Ae)},tt.useRef=function(O){return E.H.useRef(O)},tt.useState=function(O){return E.H.useState(O)},tt.useSyncExternalStore=function(O,J,Ae){return E.H.useSyncExternalStore(O,J,Ae)},tt.useTransition=function(){return E.H.useTransition()},tt.version="19.2.3",tt}var ww;function $x(){return ww||(ww=1,zg.exports=n_()),zg.exports}var k=$x(),Kg={exports:{}},fc={},Gg={exports:{}},qg={};var Bw;function a_(){return Bw||(Bw=1,(function(r){function e(M,F){var z=M.length;M.push(F);e:for(;0<z;){var ne=z-1>>>1,te=M[ne];if(0<A(te,F))M[ne]=F,M[z]=te,z=ne;else break e}}function t(M){return M.length===0?null:M[0]}function s(M){if(M.length===0)return null;var F=M[0],z=M.pop();if(z!==F){M[0]=z;e:for(var ne=0,te=M.length,O=te>>>1;ne<O;){var J=2*(ne+1)-1,Ae=M[J],me=J+1,Ee=M[me];if(0>A(Ae,z))me<te&&0>A(Ee,Ae)?(M[ne]=Ee,M[me]=z,ne=me):(M[ne]=Ae,M[J]=z,ne=J);else if(me<te&&0>A(Ee,z))M[ne]=Ee,M[me]=z,ne=me;else break e}}return F}function A(M,F){var z=M.sortIndex-F.sortIndex;return z!==0?z:M.id-F.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var d=Date,u=d.now();r.unstable_now=function(){return d.now()-u}}var f=[],g=[],x=1,y=null,v=3,N=!1,R=!1,S=!1,P=!1,V=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function K(M){for(var F=t(g);F!==null;){if(F.callback===null)s(g);else if(F.startTime<=M)s(g),F.sortIndex=F.expirationTime,e(f,F);else break;F=t(g)}}function Y(M){if(S=!1,K(M),!R)if(t(f)!==null)R=!0,q||(q=!0,Q());else{var F=t(g);F!==null&&W(Y,F.startTime-M)}}var q=!1,E=-1,j=5,B=-1;function I(){return P?!0:!(r.unstable_now()-B<j)}function _(){if(P=!1,q){var M=r.unstable_now();B=M;var F=!0;try{e:{R=!1,S&&(S=!1,$(E),E=-1),N=!0;var z=v;try{t:{for(K(M),y=t(f);y!==null&&!(y.expirationTime>M&&I());){var ne=y.callback;if(typeof ne=="function"){y.callback=null,v=y.priorityLevel;var te=ne(y.expirationTime<=M);if(M=r.unstable_now(),typeof te=="function"){y.callback=te,K(M),F=!0;break t}y===t(f)&&s(f),K(M)}else s(f);y=t(f)}if(y!==null)F=!0;else{var O=t(g);O!==null&&W(Y,O.startTime-M),F=!1}}break e}finally{y=null,v=z,N=!1}F=void 0}}finally{F?Q():q=!1}}}var Q;if(typeof G=="function")Q=function(){G(_)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,T=U.port2;U.port1.onmessage=_,Q=function(){T.postMessage(null)}}else Q=function(){V(_,0)};function W(M,F){E=V(function(){M(r.unstable_now())},F)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(M){M.callback=null},r.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<M?Math.floor(1e3/M):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_next=function(M){switch(v){case 1:case 2:case 3:var F=3;break;default:F=v}var z=v;v=F;try{return M()}finally{v=z}},r.unstable_requestPaint=function(){P=!0},r.unstable_runWithPriority=function(M,F){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var z=v;v=M;try{return F()}finally{v=z}},r.unstable_scheduleCallback=function(M,F,z){var ne=r.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?ne+z:ne):z=ne,M){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=z+te,M={id:x++,callback:F,priorityLevel:M,startTime:z,expirationTime:te,sortIndex:-1},z>ne?(M.sortIndex=z,e(g,M),t(f)===null&&M===t(g)&&(S?($(E),E=-1):S=!0,W(Y,z-ne))):(M.sortIndex=te,e(f,M),R||N||(R=!0,q||(q=!0,Q()))),M},r.unstable_shouldYield=I,r.unstable_wrapCallback=function(M){var F=v;return function(){var z=v;v=F;try{return M.apply(this,arguments)}finally{v=z}}}})(qg)),qg}var Cw;function i_(){return Cw||(Cw=1,Gg.exports=a_()),Gg.exports}var Yg={exports:{}},as={};var Ew;function A_(){if(Ew)return as;Ew=1;var r=$x();function e(f){var g="https://react.dev/errors/"+f;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)g+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+f+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},A=Symbol.for("react.portal");function l(f,g,x){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:A,key:y==null?null:""+y,children:f,containerInfo:g,implementation:x}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,g){if(f==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return as.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,as.createPortal=function(f,g){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(f,g,null,x)},as.flushSync=function(f){var g=d.T,x=s.p;try{if(d.T=null,s.p=2,f)return f()}finally{d.T=g,s.p=x,s.d.f()}},as.preconnect=function(f,g){typeof f=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(f,g))},as.prefetchDNS=function(f){typeof f=="string"&&s.d.D(f)},as.preinit=function(f,g){if(typeof f=="string"&&g&&typeof g.as=="string"){var x=g.as,y=u(x,g.crossOrigin),v=typeof g.integrity=="string"?g.integrity:void 0,N=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;x==="style"?s.d.S(f,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:N}):x==="script"&&s.d.X(f,{crossOrigin:y,integrity:v,fetchPriority:N,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},as.preinitModule=function(f,g){if(typeof f=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var x=u(g.as,g.crossOrigin);s.d.M(f,{crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(f)},as.preload=function(f,g){if(typeof f=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var x=g.as,y=u(x,g.crossOrigin);s.d.L(f,x,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},as.preloadModule=function(f,g){if(typeof f=="string")if(g){var x=u(g.as,g.crossOrigin);s.d.m(f,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(f)},as.requestFormReset=function(f){s.d.r(f)},as.unstable_batchedUpdates=function(f,g){return f(g)},as.useFormState=function(f,g,x){return d.H.useFormState(f,g,x)},as.useFormStatus=function(){return d.H.useHostTransitionStatus()},as.version="19.2.3",as}var Nw;function E1(){if(Nw)return Yg.exports;Nw=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Yg.exports=A_(),Yg.exports}var Sw;function o_(){if(Sw)return fc;Sw=1;var r=i_(),e=$x(),t=E1();function s(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function A(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var i=n,o=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(o=i.return),n=i.return;while(n)}return i.tag===3?o:null}function d(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function u(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function f(n){if(l(n)!==n)throw Error(s(188))}function g(n){var i=n.alternate;if(!i){if(i=l(n),i===null)throw Error(s(188));return i!==n?null:n}for(var o=n,c=i;;){var m=o.return;if(m===null)break;var p=m.alternate;if(p===null){if(c=m.return,c!==null){o=c;continue}break}if(m.child===p.child){for(p=m.child;p;){if(p===o)return f(m),n;if(p===c)return f(m),i;p=p.sibling}throw Error(s(188))}if(o.return!==c.return)o=m,c=p;else{for(var w=!1,D=m.child;D;){if(D===o){w=!0,o=m,c=p;break}if(D===c){w=!0,c=m,o=p;break}D=D.sibling}if(!w){for(D=p.child;D;){if(D===o){w=!0,o=p,c=m;break}if(D===c){w=!0,c=p,o=m;break}D=D.sibling}if(!w)throw Error(s(189))}}if(o.alternate!==c)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?n:i}function x(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=x(n),i!==null)return i;n=n.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),G=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),_=Symbol.iterator;function Q(n){return n===null||typeof n!="object"?null:(n=_&&n[_]||n["@@iterator"],typeof n=="function"?n:null)}var U=Symbol.for("react.client.reference");function T(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===U?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case S:return"Fragment";case V:return"Profiler";case P:return"StrictMode";case Y:return"Suspense";case q:return"SuspenseList";case B:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case R:return"Portal";case G:return n.displayName||"Context";case $:return(n._context.displayName||"Context")+".Consumer";case K:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case E:return i=n.displayName||null,i!==null?i:T(n.type)||"Memo";case j:i=n._payload,n=n._init;try{return T(n(i))}catch{}}return null}var W=Array.isArray,M=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z={pending:!1,data:null,method:null,action:null},ne=[],te=-1;function O(n){return{current:n}}function J(n){0>te||(n.current=ne[te],ne[te]=null,te--)}function Ae(n,i){te++,ne[te]=n.current,n.current=i}var me=O(null),Ee=O(null),Be=O(null),Ue=O(null);function Me(n,i){switch(Ae(Be,i),Ae(Ee,n),Ae(me,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?Pv(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=Pv(i),n=Vv(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}J(me),Ae(me,n)}function $e(){J(me),J(Ee),J(Be)}function Et(n){n.memoizedState!==null&&Ae(Ue,n);var i=me.current,o=Vv(i,n.type);i!==o&&(Ae(Ee,n),Ae(me,o))}function Vt(n){Ee.current===n&&(J(me),J(Ee)),Ue.current===n&&(J(Ue),lc._currentValue=z)}var ue,L;function Z(n){if(ue===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);ue=i&&i[1]||"",L=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ue+n+L}var he=!1;function ge(n,i){if(!n||he)return"";he=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var ye=function(){throw Error()};if(Object.defineProperty(ye.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ye,[])}catch(ce){var oe=ce}Reflect.construct(n,[],ye)}else{try{ye.call()}catch(ce){oe=ce}n.call(ye.prototype)}}else{try{throw Error()}catch(ce){oe=ce}(ye=n())&&typeof ye.catch=="function"&&ye.catch(function(){})}}catch(ce){if(ce&&oe&&typeof ce.stack=="string")return[ce.stack,oe.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=c.DetermineComponentFrameRoot(),w=p[0],D=p[1];if(w&&D){var X=w.split(`
`),ie=D.split(`
`);for(m=c=0;c<X.length&&!X[c].includes("DetermineComponentFrameRoot");)c++;for(;m<ie.length&&!ie[m].includes("DetermineComponentFrameRoot");)m++;if(c===X.length||m===ie.length)for(c=X.length-1,m=ie.length-1;1<=c&&0<=m&&X[c]!==ie[m];)m--;for(;1<=c&&0<=m;c--,m--)if(X[c]!==ie[m]){if(c!==1||m!==1)do if(c--,m--,0>m||X[c]!==ie[m]){var fe=`
`+X[c].replace(" at new "," at ");return n.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",n.displayName)),fe}while(1<=c&&0<=m);break}}}finally{he=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Z(o):""}function Ge(n,i){switch(n.tag){case 26:case 27:case 5:return Z(n.type);case 16:return Z("Lazy");case 13:return n.child!==i&&i!==null?Z("Suspense Fallback"):Z("Suspense");case 19:return Z("SuspenseList");case 0:case 15:return ge(n.type,!1);case 11:return ge(n.type.render,!1);case 1:return ge(n.type,!0);case 31:return Z("Activity");default:return""}}function ot(n){try{var i="",o=null;do i+=Ge(n,o),o=n,n=n.return;while(n);return i}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var qe=Object.prototype.hasOwnProperty,Le=r.unstable_scheduleCallback,je=r.unstable_cancelCallback,Xt=r.unstable_shouldYield,_r=r.unstable_requestPaint,zt=r.unstable_now,ve=r.unstable_getCurrentPriorityLevel,It=r.unstable_ImmediatePriority,Rr=r.unstable_UserBlockingPriority,wt=r.unstable_NormalPriority,xr=r.unstable_LowPriority,vs=r.unstable_IdlePriority,rs=r.log,de=r.unstable_setDisableYieldValue,Fe=null,We=null;function st(n){if(typeof rs=="function"&&de(n),We&&typeof We.setStrictMode=="function")try{We.setStrictMode(Fe,n)}catch{}}var Ve=Math.clz32?Math.clz32:ss,et=Math.log,yr=Math.LN2;function ss(n){return n>>>=0,n===0?32:31-(et(n)/yr|0)|0}var ns=256,ws=262144,Kt=4194304;function Is(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function qs(n,i,o){var c=n.pendingLanes;if(c===0)return 0;var m=0,p=n.suspendedLanes,w=n.pingedLanes;n=n.warmLanes;var D=c&134217727;return D!==0?(c=D&~p,c!==0?m=Is(c):(w&=D,w!==0?m=Is(w):o||(o=D&~n,o!==0&&(m=Is(o))))):(D=c&~p,D!==0?m=Is(D):w!==0?m=Is(w):o||(o=c&~n,o!==0&&(m=Is(o)))),m===0?0:i!==0&&i!==m&&(i&p)===0&&(p=m&-m,o=i&-i,p>=o||p===32&&(o&4194048)!==0)?i:m}function Kr(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function xl(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ca(){var n=Kt;return Kt<<=1,(Kt&62914560)===0&&(Kt=4194304),n}function Ys(n){for(var i=[],o=0;31>o;o++)i.push(n);return i}function Fn(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function yl(n,i,o,c,m,p){var w=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var D=n.entanglements,X=n.expirationTimes,ie=n.hiddenUpdates;for(o=w&~o;0<o;){var fe=31-Ve(o),ye=1<<fe;D[fe]=0,X[fe]=-1;var oe=ie[fe];if(oe!==null)for(ie[fe]=null,fe=0;fe<oe.length;fe++){var ce=oe[fe];ce!==null&&(ce.lane&=-536870913)}o&=~ye}c!==0&&da(n,c,0),p!==0&&m===0&&n.tag!==0&&(n.suspendedLanes|=p&~(w&~i))}function da(n,i,o){n.pendingLanes|=i,n.suspendedLanes&=~i;var c=31-Ve(i);n.entangledLanes|=i,n.entanglements[c]=n.entanglements[c]|1073741824|o&261930}function Pa(n,i){var o=n.entangledLanes|=i;for(n=n.entanglements;o;){var c=31-Ve(o),m=1<<c;m&i|n[c]&i&&(n[c]|=i),o&=~m}}function Yi(n,i){var o=i&-i;return o=(o&42)!==0?1:ua(o),(o&(n.suspendedLanes|i))!==0?0:o}function ua(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function mn(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Va(){var n=F.p;return n!==0?n:(n=window.event,n===void 0?32:uw(n.type))}function hs(n,i){var o=F.p;try{return F.p=n,i()}finally{F.p=o}}var Ds=Math.random().toString(36).slice(2),ir="__reactFiber$"+Ds,dr="__reactProps$"+Ds,Bs="__reactContainer$"+Ds,pe="__reactEvents$"+Ds,Pe="__reactListeners$"+Ds,Ce="__reactHandles$"+Ds,lt="__reactResources$"+Ds,Nt="__reactMarker$"+Ds;function Jt(n){delete n[ir],delete n[dr],delete n[pe],delete n[Pe],delete n[Ce]}function Tr(n){var i=n[ir];if(i)return i;for(var o=n.parentNode;o;){if(i=o[Bs]||o[ir]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(n=Xv(n);n!==null;){if(o=n[ir])return o;n=Xv(n)}return i}n=o,o=n.parentNode}return null}function Xe(n){if(n=n[ir]||n[Bs]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function Ar(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(s(33))}function rr(n){var i=n[lt];return i||(i=n[lt]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Ht(n){n[Nt]=!0}var fs=new Set,Ur={};function ms(n,i){gs(n,i),gs(n+"Capture",i)}function gs(n,i){for(Ur[n]=i,n=0;n<i.length;n++)fs.add(i[n])}var In=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Dn={},bl={};function Cd(n){return qe.call(bl,n)?!0:qe.call(Dn,n)?!1:In.test(n)?bl[n]=!0:(Dn[n]=!0,!1)}function GA(n,i,o){if(Cd(i))if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+o)}}function ks(n,i,o){if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+o)}}function br(n,i,o,c){if(c===null)n.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(i,o,""+c)}}function Mr(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function za(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function vl(n,i,o){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,p=c.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return m.call(this)},set:function(w){o=""+w,p.call(this,w)}}),Object.defineProperty(n,i,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(w){o=""+w},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Ut(n){if(!n._valueTracker){var i=za(n)?"checked":"value";n._valueTracker=vl(n,i,""+n[i])}}function $i(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var o=i.getValue(),c="";return n&&(c=za(n)?n.checked?"true":"false":n.value),n=c,n!==o?(i.setValue(n),!0):!1}function kn(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Xi=/[\n"\\]/g;function Cs(n){return n.replace(Xi,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function qA(n,i,o,c,m,p,w,D){n.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?n.type=w:n.removeAttribute("type"),i!=null?w==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+Mr(i)):n.value!==""+Mr(i)&&(n.value=""+Mr(i)):w!=="submit"&&w!=="reset"||n.removeAttribute("value"),i!=null?wl(n,w,Mr(i)):o!=null?wl(n,w,Mr(o)):c!=null&&n.removeAttribute("value"),m==null&&p!=null&&(n.defaultChecked=!!p),m!=null&&(n.checked=m&&typeof m!="function"&&typeof m!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?n.name=""+Mr(D):n.removeAttribute("name")}function Ed(n,i,o,c,m,p,w,D){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(n.type=p),i!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||i!=null)){Ut(n);return}o=o!=null?""+Mr(o):"",i=i!=null?""+Mr(i):o,D||i===n.value||(n.value=i),n.defaultValue=i}c=c??m,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=D?n.checked:!!c,n.defaultChecked=!!c,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(n.name=w),Ut(n)}function wl(n,i,o){i==="number"&&kn(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Ka(n,i,o,c){if(n=n.options,i){i={};for(var m=0;m<o.length;m++)i["$"+o[m]]=!0;for(o=0;o<n.length;o++)m=i.hasOwnProperty("$"+n[o].value),n[o].selected!==m&&(n[o].selected=m),m&&c&&(n[o].defaultSelected=!0)}else{for(o=""+Mr(o),i=null,m=0;m<n.length;m++){if(n[m].value===o){n[m].selected=!0,c&&(n[m].defaultSelected=!0);return}i!==null||n[m].disabled||(i=n[m])}i!==null&&(i.selected=!0)}}function Nd(n,i,o){if(i!=null&&(i=""+Mr(i),i!==n.value&&(n.value=i),o==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=o!=null?""+Mr(o):""}function Ga(n,i,o,c){if(i==null){if(c!=null){if(o!=null)throw Error(s(92));if(W(c)){if(1<c.length)throw Error(s(93));c=c[0]}o=c}o==null&&(o=""),i=o}o=Mr(i),n.defaultValue=o,c=n.textContent,c===o&&c!==""&&c!==null&&(n.value=c),Ut(n)}function Es(n,i){if(i){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=i;return}}n.textContent=i}var Sd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Bl(n,i,o){var c=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":c?n.setProperty(i,o):typeof o!="number"||o===0||Sd.has(i)?i==="float"?n.cssFloat=o:n[i]=(""+o).trim():n[i]=o+"px"}function Cl(n,i,o){if(i!=null&&typeof i!="object")throw Error(s(62));if(n=n.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var m in i)c=i[m],i.hasOwnProperty(m)&&o[m]!==c&&Bl(n,m,c)}else for(var p in i)i.hasOwnProperty(p)&&Bl(n,p,i[p])}function YA(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),qa=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $A(n){return qa.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function gn(){}var El=null;function $s(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ya=null,Rn=null;function Ji(n){var i=Xe(n);if(i&&(n=i.stateNode)){var o=n[dr]||null;e:switch(n=i.stateNode,i.type){case"input":if(qA(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Cs(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var c=o[i];if(c!==n&&c.form===n.form){var m=c[dr]||null;if(!m)throw Error(s(90));qA(c,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(i=0;i<o.length;i++)c=o[i],c.form===n.form&&$i(c)}break e;case"textarea":Nd(n,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Ka(n,!!o.multiple,i,!1)}}}var XA=!1;function $a(n,i,o){if(XA)return n(i,o);XA=!0;try{var c=n(i);return c}finally{if(XA=!1,(Ya!==null||Rn!==null)&&(vu(),Ya&&(i=Ya,n=Rn,Rn=Ya=null,Ji(i),n)))for(i=0;i<n.length;i++)Ji(n[i])}}function pn(n,i){var o=n.stateNode;if(o===null)return null;var c=o[dr]||null;if(c===null)return null;o=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(s(231,i,typeof o));return o}var Xs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wi=!1;if(Xs)try{var Dt={};Object.defineProperty(Dt,"passive",{get:function(){Wi=!0}}),window.addEventListener("test",Dt,Dt),window.removeEventListener("test",Dt,Dt)}catch{Wi=!1}var Mn=null,Nl=null,Zi=null;function Sl(){if(Zi)return Zi;var n,i=Nl,o=i.length,c,m="value"in Mn?Mn.value:Mn.textContent,p=m.length;for(n=0;n<o&&i[n]===m[n];n++);var w=o-n;for(c=1;c<=w&&i[o-c]===m[p-c];c++);return Zi=m.slice(n,1<c?1-c:void 0)}function eA(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function ha(){return!0}function xn(){return!1}function Gr(n){function i(o,c,m,p,w){this._reactName=o,this._targetInst=m,this.type=c,this.nativeEvent=p,this.target=w,this.currentTarget=null;for(var D in n)n.hasOwnProperty(D)&&(o=n[D],this[D]=o?o(p):p[D]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?ha:xn,this.isPropagationStopped=xn,this}return y(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ha)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ha)},persist:function(){},isPersistent:ha}),i}var fa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ln=Gr(fa),Xa=y({},fa,{view:0,detail:0}),jl=Gr(Xa),Ja,JA,Hn,WA=y({},Xa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wa,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Hn&&(Hn&&n.type==="mousemove"?(Ja=n.screenX-Hn.screenX,JA=n.screenY-Hn.screenY):JA=Ja=0,Hn=n),Ja)},movementY:function(n){return"movementY"in n?n.movementY:JA}}),_l=Gr(WA),tA=y({},WA,{dataTransfer:0}),_d=Gr(tA),Td=y({},Xa,{relatedTarget:0}),rA=Gr(Td),Tl=y({},fa,{animationName:0,elapsedTime:0,pseudoElement:0}),Ud=Gr(Tl),ZA=y({},fa,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Qd=Gr(ZA),Fd=y({},fa,{data:0}),On=Gr(Fd),Id={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rd(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=kd[n])?!!i[n]:!1}function Wa(){return Rd}var ps=y({},Xa,{key:function(n){if(n.key){var i=Id[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=eA(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Dd[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wa,charCode:function(n){return n.type==="keypress"?eA(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?eA(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Md=Gr(ps),Ld=y({},WA,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ma=Gr(Ld),h=y({},Xa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wa}),b=Gr(h),C=y({},fa,{propertyName:0,elapsedTime:0,pseudoElement:0}),H=Gr(C),se=y({},WA,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),le=Gr(se),Ne=y({},fa,{newState:0,oldState:0}),nt=Gr(Ne),ur=[9,13,27,32],St=Xs&&"CompositionEvent"in window,Wt=null;Xs&&"documentMode"in document&&(Wt=document.documentMode);var Js=Xs&&"TextEvent"in window&&!Wt,Pn=Xs&&(!St||Wt&&8<Wt&&11>=Wt),yn=" ",bn=!1;function sA(n,i){switch(n){case"keyup":return ur.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eo(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var to=!1;function NS(n,i){switch(n){case"compositionend":return eo(i);case"keypress":return i.which!==32?null:(bn=!0,yn);case"textInput":return n=i.data,n===yn&&bn?null:n;default:return null}}function SS(n,i){if(to)return n==="compositionend"||!St&&sA(n,i)?(n=Sl(),Zi=Nl=Mn=null,to=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Pn&&i.locale!=="ko"?null:i.data;default:return null}}var jS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Z0(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!jS[n.type]:i==="textarea"}function ey(n,i,o,c){Ya?Rn?Rn.push(c):Rn=[c]:Ya=c,i=ju(i,"onChange"),0<i.length&&(o=new Ln("onChange","change",null,o,c),n.push({event:o,listeners:i}))}var Ul=null,Ql=null;function _S(n){kv(n,0)}function Hd(n){var i=Ar(n);if($i(i))return n}function ty(n,i){if(n==="change")return i}var ry=!1;if(Xs){var Xf;if(Xs){var Jf="oninput"in document;if(!Jf){var sy=document.createElement("div");sy.setAttribute("oninput","return;"),Jf=typeof sy.oninput=="function"}Xf=Jf}else Xf=!1;ry=Xf&&(!document.documentMode||9<document.documentMode)}function ny(){Ul&&(Ul.detachEvent("onpropertychange",ay),Ql=Ul=null)}function ay(n){if(n.propertyName==="value"&&Hd(Ql)){var i=[];ey(i,Ql,n,$s(n)),$a(_S,i)}}function TS(n,i,o){n==="focusin"?(ny(),Ul=i,Ql=o,Ul.attachEvent("onpropertychange",ay)):n==="focusout"&&ny()}function US(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Hd(Ql)}function QS(n,i){if(n==="click")return Hd(i)}function FS(n,i){if(n==="input"||n==="change")return Hd(i)}function IS(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Rs=typeof Object.is=="function"?Object.is:IS;function Fl(n,i){if(Rs(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var o=Object.keys(n),c=Object.keys(i);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var m=o[c];if(!qe.call(i,m)||!Rs(n[m],i[m]))return!1}return!0}function iy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Ay(n,i){var o=iy(n);n=0;for(var c;o;){if(o.nodeType===3){if(c=n+o.textContent.length,n<=i&&c>=i)return{node:o,offset:i-n};n=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=iy(o)}}function oy(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?oy(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function ly(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=kn(n.document);i instanceof n.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)n=i.contentWindow;else break;i=kn(n.document)}return i}function Wf(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var DS=Xs&&"documentMode"in document&&11>=document.documentMode,ro=null,Zf=null,Il=null,em=!1;function cy(n,i,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;em||ro==null||ro!==kn(c)||(c=ro,"selectionStart"in c&&Wf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Il&&Fl(Il,c)||(Il=c,c=ju(Zf,"onSelect"),0<c.length&&(i=new Ln("onSelect","select",null,i,o),n.push({event:i,listeners:c}),i.target=ro)))}function nA(n,i){var o={};return o[n.toLowerCase()]=i.toLowerCase(),o["Webkit"+n]="webkit"+i,o["Moz"+n]="moz"+i,o}var so={animationend:nA("Animation","AnimationEnd"),animationiteration:nA("Animation","AnimationIteration"),animationstart:nA("Animation","AnimationStart"),transitionrun:nA("Transition","TransitionRun"),transitionstart:nA("Transition","TransitionStart"),transitioncancel:nA("Transition","TransitionCancel"),transitionend:nA("Transition","TransitionEnd")},tm={},dy={};Xs&&(dy=document.createElement("div").style,"AnimationEvent"in window||(delete so.animationend.animation,delete so.animationiteration.animation,delete so.animationstart.animation),"TransitionEvent"in window||delete so.transitionend.transition);function aA(n){if(tm[n])return tm[n];if(!so[n])return n;var i=so[n],o;for(o in i)if(i.hasOwnProperty(o)&&o in dy)return tm[n]=i[o];return n}var uy=aA("animationend"),hy=aA("animationiteration"),fy=aA("animationstart"),kS=aA("transitionrun"),RS=aA("transitionstart"),MS=aA("transitioncancel"),my=aA("transitionend"),gy=new Map,rm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");rm.push("scrollEnd");function vn(n,i){gy.set(n,i),ms(i,[n])}var Od=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Ws=[],no=0,sm=0;function Pd(){for(var n=no,i=sm=no=0;i<n;){var o=Ws[i];Ws[i++]=null;var c=Ws[i];Ws[i++]=null;var m=Ws[i];Ws[i++]=null;var p=Ws[i];if(Ws[i++]=null,c!==null&&m!==null){var w=c.pending;w===null?m.next=m:(m.next=w.next,w.next=m),c.pending=m}p!==0&&py(o,m,p)}}function Vd(n,i,o,c){Ws[no++]=n,Ws[no++]=i,Ws[no++]=o,Ws[no++]=c,sm|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function nm(n,i,o,c){return Vd(n,i,o,c),zd(n)}function iA(n,i){return Vd(n,null,null,i),zd(n)}function py(n,i,o){n.lanes|=o;var c=n.alternate;c!==null&&(c.lanes|=o);for(var m=!1,p=n.return;p!==null;)p.childLanes|=o,c=p.alternate,c!==null&&(c.childLanes|=o),p.tag===22&&(n=p.stateNode,n===null||n._visibility&1||(m=!0)),n=p,p=p.return;return n.tag===3?(p=n.stateNode,m&&i!==null&&(m=31-Ve(o),n=p.hiddenUpdates,c=n[m],c===null?n[m]=[i]:c.push(i),i.lane=o|536870912),p):null}function zd(n){if(50<rc)throw rc=0,hg=null,Error(s(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var ao={};function LS(n,i,o,c){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ms(n,i,o,c){return new LS(n,i,o,c)}function am(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ga(n,i){var o=n.alternate;return o===null?(o=Ms(n.tag,i,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=i,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,i=n.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function xy(n,i){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Kd(n,i,o,c,m,p){var w=0;if(c=n,typeof n=="function")am(n)&&(w=1);else if(typeof n=="string")w=zj(n,o,me.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case B:return n=Ms(31,o,i,m),n.elementType=B,n.lanes=p,n;case S:return AA(o.children,m,p,i);case P:w=8,m|=24;break;case V:return n=Ms(12,o,i,m|2),n.elementType=V,n.lanes=p,n;case Y:return n=Ms(13,o,i,m),n.elementType=Y,n.lanes=p,n;case q:return n=Ms(19,o,i,m),n.elementType=q,n.lanes=p,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case G:w=10;break e;case $:w=9;break e;case K:w=11;break e;case E:w=14;break e;case j:w=16,c=null;break e}w=29,o=Error(s(130,n===null?"null":typeof n,"")),c=null}return i=Ms(w,o,i,m),i.elementType=n,i.type=c,i.lanes=p,i}function AA(n,i,o,c){return n=Ms(7,n,c,i),n.lanes=o,n}function im(n,i,o){return n=Ms(6,n,null,i),n.lanes=o,n}function yy(n){var i=Ms(18,null,null,0);return i.stateNode=n,i}function Am(n,i,o){return i=Ms(4,n.children!==null?n.children:[],n.key,i),i.lanes=o,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var by=new WeakMap;function Zs(n,i){if(typeof n=="object"&&n!==null){var o=by.get(n);return o!==void 0?o:(i={value:n,source:i,stack:ot(i)},by.set(n,i),i)}return{value:n,source:i,stack:ot(i)}}var io=[],Ao=0,Gd=null,Dl=0,en=[],tn=0,Za=null,Vn=1,zn="";function pa(n,i){io[Ao++]=Dl,io[Ao++]=Gd,Gd=n,Dl=i}function vy(n,i,o){en[tn++]=Vn,en[tn++]=zn,en[tn++]=Za,Za=n;var c=Vn;n=zn;var m=32-Ve(c)-1;c&=~(1<<m),o+=1;var p=32-Ve(i)+m;if(30<p){var w=m-m%5;p=(c&(1<<w)-1).toString(32),c>>=w,m-=w,Vn=1<<32-Ve(i)+m|o<<m|c,zn=p+n}else Vn=1<<p|o<<m|c,zn=n}function om(n){n.return!==null&&(pa(n,1),vy(n,1,0))}function lm(n){for(;n===Gd;)Gd=io[--Ao],io[Ao]=null,Dl=io[--Ao],io[Ao]=null;for(;n===Za;)Za=en[--tn],en[tn]=null,zn=en[--tn],en[tn]=null,Vn=en[--tn],en[tn]=null}function wy(n,i){en[tn++]=Vn,en[tn++]=zn,en[tn++]=Za,Vn=i.id,zn=i.overflow,Za=n}var qr=null,Gt=null,yt=!1,ei=null,rn=!1,cm=Error(s(519));function ti(n){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw kl(Zs(i,n)),cm}function By(n){var i=n.stateNode,o=n.type,c=n.memoizedProps;switch(i[ir]=n,i[dr]=c,o){case"dialog":dt("cancel",i),dt("close",i);break;case"iframe":case"object":case"embed":dt("load",i);break;case"video":case"audio":for(o=0;o<nc.length;o++)dt(nc[o],i);break;case"source":dt("error",i);break;case"img":case"image":case"link":dt("error",i),dt("load",i);break;case"details":dt("toggle",i);break;case"input":dt("invalid",i),Ed(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":dt("invalid",i);break;case"textarea":dt("invalid",i),Ga(i,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||c.suppressHydrationWarning===!0||Hv(i.textContent,o)?(c.popover!=null&&(dt("beforetoggle",i),dt("toggle",i)),c.onScroll!=null&&dt("scroll",i),c.onScrollEnd!=null&&dt("scrollend",i),c.onClick!=null&&(i.onclick=gn),i=!0):i=!1,i||ti(n,!0)}function Cy(n){for(qr=n.return;qr;)switch(qr.tag){case 5:case 31:case 13:rn=!1;return;case 27:case 3:rn=!0;return;default:qr=qr.return}}function oo(n){if(n!==qr)return!1;if(!yt)return Cy(n),yt=!0,!1;var i=n.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||jg(n.type,n.memoizedProps)),o=!o),o&&Gt&&ti(n),Cy(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));Gt=$v(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));Gt=$v(n)}else i===27?(i=Gt,mi(n.type)?(n=Fg,Fg=null,Gt=n):Gt=i):Gt=qr?nn(n.stateNode.nextSibling):null;return!0}function oA(){Gt=qr=null,yt=!1}function dm(){var n=ei;return n!==null&&(_s===null?_s=n:_s.push.apply(_s,n),ei=null),n}function kl(n){ei===null?ei=[n]:ei.push(n)}var um=O(null),lA=null,xa=null;function ri(n,i,o){Ae(um,i._currentValue),i._currentValue=o}function ya(n){n._currentValue=um.current,J(um)}function hm(n,i,o){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===o)break;n=n.return}}function fm(n,i,o,c){var m=n.child;for(m!==null&&(m.return=n);m!==null;){var p=m.dependencies;if(p!==null){var w=m.child;p=p.firstContext;e:for(;p!==null;){var D=p;p=m;for(var X=0;X<i.length;X++)if(D.context===i[X]){p.lanes|=o,D=p.alternate,D!==null&&(D.lanes|=o),hm(p.return,o,n),c||(w=null);break e}p=D.next}}else if(m.tag===18){if(w=m.return,w===null)throw Error(s(341));w.lanes|=o,p=w.alternate,p!==null&&(p.lanes|=o),hm(w,o,n),w=null}else w=m.child;if(w!==null)w.return=m;else for(w=m;w!==null;){if(w===n){w=null;break}if(m=w.sibling,m!==null){m.return=w.return,w=m;break}w=w.return}m=w}}function lo(n,i,o,c){n=null;for(var m=i,p=!1;m!==null;){if(!p){if((m.flags&524288)!==0)p=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var w=m.alternate;if(w===null)throw Error(s(387));if(w=w.memoizedProps,w!==null){var D=m.type;Rs(m.pendingProps.value,w.value)||(n!==null?n.push(D):n=[D])}}else if(m===Ue.current){if(w=m.alternate,w===null)throw Error(s(387));w.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(n!==null?n.push(lc):n=[lc])}m=m.return}n!==null&&fm(i,n,o,c),i.flags|=262144}function qd(n){for(n=n.firstContext;n!==null;){if(!Rs(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function cA(n){lA=n,xa=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Yr(n){return Ey(lA,n)}function Yd(n,i){return lA===null&&cA(n),Ey(n,i)}function Ey(n,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},xa===null){if(n===null)throw Error(s(308));xa=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else xa=xa.next=i;return o}var HS=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(o,c){n.push(c)}};this.abort=function(){i.aborted=!0,n.forEach(function(o){return o()})}},OS=r.unstable_scheduleCallback,PS=r.unstable_NormalPriority,vr={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function mm(){return{controller:new HS,data:new Map,refCount:0}}function Rl(n){n.refCount--,n.refCount===0&&OS(PS,function(){n.controller.abort()})}var Ml=null,gm=0,co=0,uo=null;function VS(n,i){if(Ml===null){var o=Ml=[];gm=0,co=yg(),uo={status:"pending",value:void 0,then:function(c){o.push(c)}}}return gm++,i.then(Ny,Ny),i}function Ny(){if(--gm===0&&Ml!==null){uo!==null&&(uo.status="fulfilled");var n=Ml;Ml=null,co=0,uo=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function zS(n,i){var o=[],c={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return n.then(function(){c.status="fulfilled",c.value=i;for(var m=0;m<o.length;m++)(0,o[m])(i)},function(m){for(c.status="rejected",c.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),c}var Sy=M.S;M.S=function(n,i){cv=zt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&VS(n,i),Sy!==null&&Sy(n,i)};var dA=O(null);function pm(){var n=dA.current;return n!==null?n:Ot.pooledCache}function $d(n,i){i===null?Ae(dA,dA.current):Ae(dA,i.pool)}function jy(){var n=pm();return n===null?null:{parent:vr._currentValue,pool:n}}var ho=Error(s(460)),xm=Error(s(474)),Xd=Error(s(542)),Jd={then:function(){}};function _y(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Ty(n,i,o){switch(o=n[o],o===void 0?n.push(i):o!==i&&(i.then(gn,gn),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Qy(n),n;default:if(typeof i.status=="string")i.then(gn,gn);else{if(n=Ot,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=i,n.status="pending",n.then(function(c){if(i.status==="pending"){var m=i;m.status="fulfilled",m.value=c}},function(c){if(i.status==="pending"){var m=i;m.status="rejected",m.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Qy(n),n}throw hA=i,ho}}function uA(n){try{var i=n._init;return i(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(hA=o,ho):o}}var hA=null;function Uy(){if(hA===null)throw Error(s(459));var n=hA;return hA=null,n}function Qy(n){if(n===ho||n===Xd)throw Error(s(483))}var fo=null,Ll=0;function Wd(n){var i=Ll;return Ll+=1,fo===null&&(fo=[]),Ty(fo,n,i)}function Hl(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Zd(n,i){throw i.$$typeof===v?Error(s(525)):(n=Object.prototype.toString.call(i),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function Fy(n){function i(re,ee){if(n){var ae=re.deletions;ae===null?(re.deletions=[ee],re.flags|=16):ae.push(ee)}}function o(re,ee){if(!n)return null;for(;ee!==null;)i(re,ee),ee=ee.sibling;return null}function c(re){for(var ee=new Map;re!==null;)re.key!==null?ee.set(re.key,re):ee.set(re.index,re),re=re.sibling;return ee}function m(re,ee){return re=ga(re,ee),re.index=0,re.sibling=null,re}function p(re,ee,ae){return re.index=ae,n?(ae=re.alternate,ae!==null?(ae=ae.index,ae<ee?(re.flags|=67108866,ee):ae):(re.flags|=67108866,ee)):(re.flags|=1048576,ee)}function w(re){return n&&re.alternate===null&&(re.flags|=67108866),re}function D(re,ee,ae,xe){return ee===null||ee.tag!==6?(ee=im(ae,re.mode,xe),ee.return=re,ee):(ee=m(ee,ae),ee.return=re,ee)}function X(re,ee,ae,xe){var Oe=ae.type;return Oe===S?fe(re,ee,ae.props.children,xe,ae.key):ee!==null&&(ee.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===j&&uA(Oe)===ee.type)?(ee=m(ee,ae.props),Hl(ee,ae),ee.return=re,ee):(ee=Kd(ae.type,ae.key,ae.props,null,re.mode,xe),Hl(ee,ae),ee.return=re,ee)}function ie(re,ee,ae,xe){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==ae.containerInfo||ee.stateNode.implementation!==ae.implementation?(ee=Am(ae,re.mode,xe),ee.return=re,ee):(ee=m(ee,ae.children||[]),ee.return=re,ee)}function fe(re,ee,ae,xe,Oe){return ee===null||ee.tag!==7?(ee=AA(ae,re.mode,xe,Oe),ee.return=re,ee):(ee=m(ee,ae),ee.return=re,ee)}function ye(re,ee,ae){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return ee=im(""+ee,re.mode,ae),ee.return=re,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case N:return ae=Kd(ee.type,ee.key,ee.props,null,re.mode,ae),Hl(ae,ee),ae.return=re,ae;case R:return ee=Am(ee,re.mode,ae),ee.return=re,ee;case j:return ee=uA(ee),ye(re,ee,ae)}if(W(ee)||Q(ee))return ee=AA(ee,re.mode,ae,null),ee.return=re,ee;if(typeof ee.then=="function")return ye(re,Wd(ee),ae);if(ee.$$typeof===G)return ye(re,Yd(re,ee),ae);Zd(re,ee)}return null}function oe(re,ee,ae,xe){var Oe=ee!==null?ee.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return Oe!==null?null:D(re,ee,""+ae,xe);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case N:return ae.key===Oe?X(re,ee,ae,xe):null;case R:return ae.key===Oe?ie(re,ee,ae,xe):null;case j:return ae=uA(ae),oe(re,ee,ae,xe)}if(W(ae)||Q(ae))return Oe!==null?null:fe(re,ee,ae,xe,null);if(typeof ae.then=="function")return oe(re,ee,Wd(ae),xe);if(ae.$$typeof===G)return oe(re,ee,Yd(re,ae),xe);Zd(re,ae)}return null}function ce(re,ee,ae,xe,Oe){if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return re=re.get(ae)||null,D(ee,re,""+xe,Oe);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case N:return re=re.get(xe.key===null?ae:xe.key)||null,X(ee,re,xe,Oe);case R:return re=re.get(xe.key===null?ae:xe.key)||null,ie(ee,re,xe,Oe);case j:return xe=uA(xe),ce(re,ee,ae,xe,Oe)}if(W(xe)||Q(xe))return re=re.get(ae)||null,fe(ee,re,xe,Oe,null);if(typeof xe.then=="function")return ce(re,ee,ae,Wd(xe),Oe);if(xe.$$typeof===G)return ce(re,ee,ae,Yd(ee,xe),Oe);Zd(ee,xe)}return null}function Ie(re,ee,ae,xe){for(var Oe=null,Bt=null,ke=ee,it=ee=0,ft=null;ke!==null&&it<ae.length;it++){ke.index>it?(ft=ke,ke=null):ft=ke.sibling;var Ct=oe(re,ke,ae[it],xe);if(Ct===null){ke===null&&(ke=ft);break}n&&ke&&Ct.alternate===null&&i(re,ke),ee=p(Ct,ee,it),Bt===null?Oe=Ct:Bt.sibling=Ct,Bt=Ct,ke=ft}if(it===ae.length)return o(re,ke),yt&&pa(re,it),Oe;if(ke===null){for(;it<ae.length;it++)ke=ye(re,ae[it],xe),ke!==null&&(ee=p(ke,ee,it),Bt===null?Oe=ke:Bt.sibling=ke,Bt=ke);return yt&&pa(re,it),Oe}for(ke=c(ke);it<ae.length;it++)ft=ce(ke,re,it,ae[it],xe),ft!==null&&(n&&ft.alternate!==null&&ke.delete(ft.key===null?it:ft.key),ee=p(ft,ee,it),Bt===null?Oe=ft:Bt.sibling=ft,Bt=ft);return n&&ke.forEach(function(bi){return i(re,bi)}),yt&&pa(re,it),Oe}function Ke(re,ee,ae,xe){if(ae==null)throw Error(s(151));for(var Oe=null,Bt=null,ke=ee,it=ee=0,ft=null,Ct=ae.next();ke!==null&&!Ct.done;it++,Ct=ae.next()){ke.index>it?(ft=ke,ke=null):ft=ke.sibling;var bi=oe(re,ke,Ct.value,xe);if(bi===null){ke===null&&(ke=ft);break}n&&ke&&bi.alternate===null&&i(re,ke),ee=p(bi,ee,it),Bt===null?Oe=bi:Bt.sibling=bi,Bt=bi,ke=ft}if(Ct.done)return o(re,ke),yt&&pa(re,it),Oe;if(ke===null){for(;!Ct.done;it++,Ct=ae.next())Ct=ye(re,Ct.value,xe),Ct!==null&&(ee=p(Ct,ee,it),Bt===null?Oe=Ct:Bt.sibling=Ct,Bt=Ct);return yt&&pa(re,it),Oe}for(ke=c(ke);!Ct.done;it++,Ct=ae.next())Ct=ce(ke,re,it,Ct.value,xe),Ct!==null&&(n&&Ct.alternate!==null&&ke.delete(Ct.key===null?it:Ct.key),ee=p(Ct,ee,it),Bt===null?Oe=Ct:Bt.sibling=Ct,Bt=Ct);return n&&ke.forEach(function(t_){return i(re,t_)}),yt&&pa(re,it),Oe}function Mt(re,ee,ae,xe){if(typeof ae=="object"&&ae!==null&&ae.type===S&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case N:e:{for(var Oe=ae.key;ee!==null;){if(ee.key===Oe){if(Oe=ae.type,Oe===S){if(ee.tag===7){o(re,ee.sibling),xe=m(ee,ae.props.children),xe.return=re,re=xe;break e}}else if(ee.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===j&&uA(Oe)===ee.type){o(re,ee.sibling),xe=m(ee,ae.props),Hl(xe,ae),xe.return=re,re=xe;break e}o(re,ee);break}else i(re,ee);ee=ee.sibling}ae.type===S?(xe=AA(ae.props.children,re.mode,xe,ae.key),xe.return=re,re=xe):(xe=Kd(ae.type,ae.key,ae.props,null,re.mode,xe),Hl(xe,ae),xe.return=re,re=xe)}return w(re);case R:e:{for(Oe=ae.key;ee!==null;){if(ee.key===Oe)if(ee.tag===4&&ee.stateNode.containerInfo===ae.containerInfo&&ee.stateNode.implementation===ae.implementation){o(re,ee.sibling),xe=m(ee,ae.children||[]),xe.return=re,re=xe;break e}else{o(re,ee);break}else i(re,ee);ee=ee.sibling}xe=Am(ae,re.mode,xe),xe.return=re,re=xe}return w(re);case j:return ae=uA(ae),Mt(re,ee,ae,xe)}if(W(ae))return Ie(re,ee,ae,xe);if(Q(ae)){if(Oe=Q(ae),typeof Oe!="function")throw Error(s(150));return ae=Oe.call(ae),Ke(re,ee,ae,xe)}if(typeof ae.then=="function")return Mt(re,ee,Wd(ae),xe);if(ae.$$typeof===G)return Mt(re,ee,Yd(re,ae),xe);Zd(re,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint"?(ae=""+ae,ee!==null&&ee.tag===6?(o(re,ee.sibling),xe=m(ee,ae),xe.return=re,re=xe):(o(re,ee),xe=im(ae,re.mode,xe),xe.return=re,re=xe),w(re)):o(re,ee)}return function(re,ee,ae,xe){try{Ll=0;var Oe=Mt(re,ee,ae,xe);return fo=null,Oe}catch(ke){if(ke===ho||ke===Xd)throw ke;var Bt=Ms(29,ke,null,re.mode);return Bt.lanes=xe,Bt.return=re,Bt}}}var fA=Fy(!0),Iy=Fy(!1),si=!1;function ym(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bm(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ni(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ai(n,i,o){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(jt&2)!==0){var m=c.pending;return m===null?i.next=i:(i.next=m.next,m.next=i),c.pending=i,i=zd(n),py(n,null,o),i}return Vd(n,c,i,o),zd(n)}function Ol(n,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var c=i.lanes;c&=n.pendingLanes,o|=c,i.lanes=o,Pa(n,o)}}function vm(n,i){var o=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var m=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var w={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?m=p=w:p=p.next=w,o=o.next}while(o!==null);p===null?m=p=i:p=p.next=i}else m=p=i;o={baseState:c.baseState,firstBaseUpdate:m,lastBaseUpdate:p,shared:c.shared,callbacks:c.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=i:n.next=i,o.lastBaseUpdate=i}var wm=!1;function Pl(){if(wm){var n=uo;if(n!==null)throw n}}function Vl(n,i,o,c){wm=!1;var m=n.updateQueue;si=!1;var p=m.firstBaseUpdate,w=m.lastBaseUpdate,D=m.shared.pending;if(D!==null){m.shared.pending=null;var X=D,ie=X.next;X.next=null,w===null?p=ie:w.next=ie,w=X;var fe=n.alternate;fe!==null&&(fe=fe.updateQueue,D=fe.lastBaseUpdate,D!==w&&(D===null?fe.firstBaseUpdate=ie:D.next=ie,fe.lastBaseUpdate=X))}if(p!==null){var ye=m.baseState;w=0,fe=ie=X=null,D=p;do{var oe=D.lane&-536870913,ce=oe!==D.lane;if(ce?(ht&oe)===oe:(c&oe)===oe){oe!==0&&oe===co&&(wm=!0),fe!==null&&(fe=fe.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var Ie=n,Ke=D;oe=i;var Mt=o;switch(Ke.tag){case 1:if(Ie=Ke.payload,typeof Ie=="function"){ye=Ie.call(Mt,ye,oe);break e}ye=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=Ke.payload,oe=typeof Ie=="function"?Ie.call(Mt,ye,oe):Ie,oe==null)break e;ye=y({},ye,oe);break e;case 2:si=!0}}oe=D.callback,oe!==null&&(n.flags|=64,ce&&(n.flags|=8192),ce=m.callbacks,ce===null?m.callbacks=[oe]:ce.push(oe))}else ce={lane:oe,tag:D.tag,payload:D.payload,callback:D.callback,next:null},fe===null?(ie=fe=ce,X=ye):fe=fe.next=ce,w|=oe;if(D=D.next,D===null){if(D=m.shared.pending,D===null)break;ce=D,D=ce.next,ce.next=null,m.lastBaseUpdate=ce,m.shared.pending=null}}while(!0);fe===null&&(X=ye),m.baseState=X,m.firstBaseUpdate=ie,m.lastBaseUpdate=fe,p===null&&(m.shared.lanes=0),ci|=w,n.lanes=w,n.memoizedState=ye}}function Dy(n,i){if(typeof n!="function")throw Error(s(191,n));n.call(i)}function ky(n,i){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Dy(o[n],i)}var mo=O(null),eu=O(0);function Ry(n,i){n=ja,Ae(eu,n),Ae(mo,i),ja=n|i.baseLanes}function Bm(){Ae(eu,ja),Ae(mo,mo.current)}function Cm(){ja=eu.current,J(mo),J(eu)}var Ls=O(null),sn=null;function ii(n){var i=n.alternate;Ae(hr,hr.current&1),Ae(Ls,n),sn===null&&(i===null||mo.current!==null||i.memoizedState!==null)&&(sn=n)}function Em(n){Ae(hr,hr.current),Ae(Ls,n),sn===null&&(sn=n)}function My(n){n.tag===22?(Ae(hr,hr.current),Ae(Ls,n),sn===null&&(sn=n)):Ai()}function Ai(){Ae(hr,hr.current),Ae(Ls,Ls.current)}function Hs(n){J(Ls),sn===n&&(sn=null),J(hr)}var hr=O(0);function tu(n){for(var i=n;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Ug(o)||Qg(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var ba=0,at=null,kt=null,wr=null,ru=!1,go=!1,mA=!1,su=0,zl=0,po=null,KS=0;function or(){throw Error(s(321))}function Nm(n,i){if(i===null)return!1;for(var o=0;o<i.length&&o<n.length;o++)if(!Rs(n[o],i[o]))return!1;return!0}function Sm(n,i,o,c,m,p){return ba=p,at=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,M.H=n===null||n.memoizedState===null?vb:Pm,mA=!1,p=o(c,m),mA=!1,go&&(p=Hy(i,o,c,m)),Ly(n),p}function Ly(n){M.H=ql;var i=kt!==null&&kt.next!==null;if(ba=0,wr=kt=at=null,ru=!1,zl=0,po=null,i)throw Error(s(300));n===null||Br||(n=n.dependencies,n!==null&&qd(n)&&(Br=!0))}function Hy(n,i,o,c){at=n;var m=0;do{if(go&&(po=null),zl=0,go=!1,25<=m)throw Error(s(301));if(m+=1,wr=kt=null,n.updateQueue!=null){var p=n.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}M.H=wb,p=i(o,c)}while(go);return p}function GS(){var n=M.H,i=n.useState()[0];return i=typeof i.then=="function"?Kl(i):i,n=n.useState()[0],(kt!==null?kt.memoizedState:null)!==n&&(at.flags|=1024),i}function jm(){var n=su!==0;return su=0,n}function _m(n,i,o){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~o}function Tm(n){if(ru){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}ru=!1}ba=0,wr=kt=at=null,go=!1,zl=su=0,po=null}function xs(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wr===null?at.memoizedState=wr=n:wr=wr.next=n,wr}function fr(){if(kt===null){var n=at.alternate;n=n!==null?n.memoizedState:null}else n=kt.next;var i=wr===null?at.memoizedState:wr.next;if(i!==null)wr=i,kt=n;else{if(n===null)throw at.alternate===null?Error(s(467)):Error(s(310));kt=n,n={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},wr===null?at.memoizedState=wr=n:wr=wr.next=n}return wr}function nu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Kl(n){var i=zl;return zl+=1,po===null&&(po=[]),n=Ty(po,n,i),i=at,(wr===null?i.memoizedState:wr.next)===null&&(i=i.alternate,M.H=i===null||i.memoizedState===null?vb:Pm),n}function au(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Kl(n);if(n.$$typeof===G)return Yr(n)}throw Error(s(438,String(n)))}function Um(n){var i=null,o=at.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var c=at.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(m){return m.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=nu(),at.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(n),c=0;c<n;c++)o[c]=I;return i.index++,o}function va(n,i){return typeof i=="function"?i(n):i}function iu(n){var i=fr();return Qm(i,kt,n)}function Qm(n,i,o){var c=n.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=o;var m=n.baseQueue,p=c.pending;if(p!==null){if(m!==null){var w=m.next;m.next=p.next,p.next=w}i.baseQueue=m=p,c.pending=null}if(p=n.baseState,m===null)n.memoizedState=p;else{i=m.next;var D=w=null,X=null,ie=i,fe=!1;do{var ye=ie.lane&-536870913;if(ye!==ie.lane?(ht&ye)===ye:(ba&ye)===ye){var oe=ie.revertLane;if(oe===0)X!==null&&(X=X.next={lane:0,revertLane:0,gesture:null,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null}),ye===co&&(fe=!0);else if((ba&oe)===oe){ie=ie.next,oe===co&&(fe=!0);continue}else ye={lane:0,revertLane:ie.revertLane,gesture:null,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},X===null?(D=X=ye,w=p):X=X.next=ye,at.lanes|=oe,ci|=oe;ye=ie.action,mA&&o(p,ye),p=ie.hasEagerState?ie.eagerState:o(p,ye)}else oe={lane:ye,revertLane:ie.revertLane,gesture:ie.gesture,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},X===null?(D=X=oe,w=p):X=X.next=oe,at.lanes|=ye,ci|=ye;ie=ie.next}while(ie!==null&&ie!==i);if(X===null?w=p:X.next=D,!Rs(p,n.memoizedState)&&(Br=!0,fe&&(o=uo,o!==null)))throw o;n.memoizedState=p,n.baseState=w,n.baseQueue=X,c.lastRenderedState=p}return m===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function Fm(n){var i=fr(),o=i.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=n;var c=o.dispatch,m=o.pending,p=i.memoizedState;if(m!==null){o.pending=null;var w=m=m.next;do p=n(p,w.action),w=w.next;while(w!==m);Rs(p,i.memoizedState)||(Br=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),o.lastRenderedState=p}return[p,c]}function Oy(n,i,o){var c=at,m=fr(),p=yt;if(p){if(o===void 0)throw Error(s(407));o=o()}else o=i();var w=!Rs((kt||m).memoizedState,o);if(w&&(m.memoizedState=o,Br=!0),m=m.queue,km(zy.bind(null,c,m,n),[n]),m.getSnapshot!==i||w||wr!==null&&wr.memoizedState.tag&1){if(c.flags|=2048,xo(9,{destroy:void 0},Vy.bind(null,c,m,o,i),null),Ot===null)throw Error(s(349));p||(ba&127)!==0||Py(c,i,o)}return o}function Py(n,i,o){n.flags|=16384,n={getSnapshot:i,value:o},i=at.updateQueue,i===null?(i=nu(),at.updateQueue=i,i.stores=[n]):(o=i.stores,o===null?i.stores=[n]:o.push(n))}function Vy(n,i,o,c){i.value=o,i.getSnapshot=c,Ky(i)&&Gy(n)}function zy(n,i,o){return o(function(){Ky(i)&&Gy(n)})}function Ky(n){var i=n.getSnapshot;n=n.value;try{var o=i();return!Rs(n,o)}catch{return!0}}function Gy(n){var i=iA(n,2);i!==null&&Ts(i,n,2)}function Im(n){var i=xs();if(typeof n=="function"){var o=n;if(n=o(),mA){st(!0);try{o()}finally{st(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:n},i}function qy(n,i,o,c){return n.baseState=o,Qm(n,kt,typeof c=="function"?c:va)}function qS(n,i,o,c,m){if(lu(n))throw Error(s(485));if(n=i.action,n!==null){var p={payload:m,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){p.listeners.push(w)}};M.T!==null?o(!0):p.isTransition=!1,c(p),o=i.pending,o===null?(p.next=i.pending=p,Yy(i,p)):(p.next=o.next,i.pending=o.next=p)}}function Yy(n,i){var o=i.action,c=i.payload,m=n.state;if(i.isTransition){var p=M.T,w={};M.T=w;try{var D=o(m,c),X=M.S;X!==null&&X(w,D),$y(n,i,D)}catch(ie){Dm(n,i,ie)}finally{p!==null&&w.types!==null&&(p.types=w.types),M.T=p}}else try{p=o(m,c),$y(n,i,p)}catch(ie){Dm(n,i,ie)}}function $y(n,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){Xy(n,i,c)},function(c){return Dm(n,i,c)}):Xy(n,i,o)}function Xy(n,i,o){i.status="fulfilled",i.value=o,Jy(i),n.state=o,i=n.pending,i!==null&&(o=i.next,o===i?n.pending=null:(o=o.next,i.next=o,Yy(n,o)))}function Dm(n,i,o){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=o,Jy(i),i=i.next;while(i!==c)}n.action=null}function Jy(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function Wy(n,i){return i}function Zy(n,i){if(yt){var o=Ot.formState;if(o!==null){e:{var c=at;if(yt){if(Gt){t:{for(var m=Gt,p=rn;m.nodeType!==8;){if(!p){m=null;break t}if(m=nn(m.nextSibling),m===null){m=null;break t}}p=m.data,m=p==="F!"||p==="F"?m:null}if(m){Gt=nn(m.nextSibling),c=m.data==="F!";break e}}ti(c)}c=!1}c&&(i=o[0])}}return o=xs(),o.memoizedState=o.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wy,lastRenderedState:i},o.queue=c,o=xb.bind(null,at,c),c.dispatch=o,c=Im(!1),p=Om.bind(null,at,!1,c.queue),c=xs(),m={state:i,dispatch:null,action:n,pending:null},c.queue=m,o=qS.bind(null,at,m,p,o),m.dispatch=o,c.memoizedState=n,[i,o,!1]}function eb(n){var i=fr();return tb(i,kt,n)}function tb(n,i,o){if(i=Qm(n,i,Wy)[0],n=iu(va)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=Kl(i)}catch(w){throw w===ho?Xd:w}else c=i;i=fr();var m=i.queue,p=m.dispatch;return o!==i.memoizedState&&(at.flags|=2048,xo(9,{destroy:void 0},YS.bind(null,m,o),null)),[c,p,n]}function YS(n,i){n.action=i}function rb(n){var i=fr(),o=kt;if(o!==null)return tb(i,o,n);fr(),i=i.memoizedState,o=fr();var c=o.queue.dispatch;return o.memoizedState=n,[i,c,!1]}function xo(n,i,o,c){return n={tag:n,create:o,deps:c,inst:i,next:null},i=at.updateQueue,i===null&&(i=nu(),at.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=n.next=n:(c=o.next,o.next=n,n.next=c,i.lastEffect=n),n}function sb(){return fr().memoizedState}function Au(n,i,o,c){var m=xs();at.flags|=n,m.memoizedState=xo(1|i,{destroy:void 0},o,c===void 0?null:c)}function ou(n,i,o,c){var m=fr();c=c===void 0?null:c;var p=m.memoizedState.inst;kt!==null&&c!==null&&Nm(c,kt.memoizedState.deps)?m.memoizedState=xo(i,p,o,c):(at.flags|=n,m.memoizedState=xo(1|i,p,o,c))}function nb(n,i){Au(8390656,8,n,i)}function km(n,i){ou(2048,8,n,i)}function $S(n){at.flags|=4;var i=at.updateQueue;if(i===null)i=nu(),at.updateQueue=i,i.events=[n];else{var o=i.events;o===null?i.events=[n]:o.push(n)}}function ab(n){var i=fr().memoizedState;return $S({ref:i,nextImpl:n}),function(){if((jt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function ib(n,i){return ou(4,2,n,i)}function Ab(n,i){return ou(4,4,n,i)}function ob(n,i){if(typeof i=="function"){n=n();var o=i(n);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function lb(n,i,o){o=o!=null?o.concat([n]):null,ou(4,4,ob.bind(null,i,n),o)}function Rm(){}function cb(n,i){var o=fr();i=i===void 0?null:i;var c=o.memoizedState;return i!==null&&Nm(i,c[1])?c[0]:(o.memoizedState=[n,i],n)}function db(n,i){var o=fr();i=i===void 0?null:i;var c=o.memoizedState;if(i!==null&&Nm(i,c[1]))return c[0];if(c=n(),mA){st(!0);try{n()}finally{st(!1)}}return o.memoizedState=[c,i],c}function Mm(n,i,o){return o===void 0||(ba&1073741824)!==0&&(ht&261930)===0?n.memoizedState=i:(n.memoizedState=o,n=uv(),at.lanes|=n,ci|=n,o)}function ub(n,i,o,c){return Rs(o,i)?o:mo.current!==null?(n=Mm(n,o,c),Rs(n,i)||(Br=!0),n):(ba&42)===0||(ba&1073741824)!==0&&(ht&261930)===0?(Br=!0,n.memoizedState=o):(n=uv(),at.lanes|=n,ci|=n,i)}function hb(n,i,o,c,m){var p=F.p;F.p=p!==0&&8>p?p:8;var w=M.T,D={};M.T=D,Om(n,!1,i,o);try{var X=m(),ie=M.S;if(ie!==null&&ie(D,X),X!==null&&typeof X=="object"&&typeof X.then=="function"){var fe=zS(X,c);Gl(n,i,fe,Vs(n))}else Gl(n,i,c,Vs(n))}catch(ye){Gl(n,i,{then:function(){},status:"rejected",reason:ye},Vs())}finally{F.p=p,w!==null&&D.types!==null&&(w.types=D.types),M.T=w}}function XS(){}function Lm(n,i,o,c){if(n.tag!==5)throw Error(s(476));var m=fb(n).queue;hb(n,m,i,z,o===null?XS:function(){return mb(n),o(c)})}function fb(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:z,baseState:z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:z},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:o},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function mb(n){var i=fb(n);i.next===null&&(i=n.alternate.memoizedState),Gl(n,i.next.queue,{},Vs())}function Hm(){return Yr(lc)}function gb(){return fr().memoizedState}function pb(){return fr().memoizedState}function JS(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var o=Vs();n=ni(o);var c=ai(i,n,o);c!==null&&(Ts(c,i,o),Ol(c,i,o)),i={cache:mm()},n.payload=i;return}i=i.return}}function WS(n,i,o){var c=Vs();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},lu(n)?yb(i,o):(o=nm(n,i,o,c),o!==null&&(Ts(o,n,c),bb(o,i,c)))}function xb(n,i,o){var c=Vs();Gl(n,i,o,c)}function Gl(n,i,o,c){var m={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(lu(n))yb(i,m);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var w=i.lastRenderedState,D=p(w,o);if(m.hasEagerState=!0,m.eagerState=D,Rs(D,w))return Vd(n,i,m,0),Ot===null&&Pd(),!1}catch{}if(o=nm(n,i,m,c),o!==null)return Ts(o,n,c),bb(o,i,c),!0}return!1}function Om(n,i,o,c){if(c={lane:2,revertLane:yg(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},lu(n)){if(i)throw Error(s(479))}else i=nm(n,o,c,2),i!==null&&Ts(i,n,2)}function lu(n){var i=n.alternate;return n===at||i!==null&&i===at}function yb(n,i){go=ru=!0;var o=n.pending;o===null?i.next=i:(i.next=o.next,o.next=i),n.pending=i}function bb(n,i,o){if((o&4194048)!==0){var c=i.lanes;c&=n.pendingLanes,o|=c,i.lanes=o,Pa(n,o)}}var ql={readContext:Yr,use:au,useCallback:or,useContext:or,useEffect:or,useImperativeHandle:or,useLayoutEffect:or,useInsertionEffect:or,useMemo:or,useReducer:or,useRef:or,useState:or,useDebugValue:or,useDeferredValue:or,useTransition:or,useSyncExternalStore:or,useId:or,useHostTransitionStatus:or,useFormState:or,useActionState:or,useOptimistic:or,useMemoCache:or,useCacheRefresh:or};ql.useEffectEvent=or;var vb={readContext:Yr,use:au,useCallback:function(n,i){return xs().memoizedState=[n,i===void 0?null:i],n},useContext:Yr,useEffect:nb,useImperativeHandle:function(n,i,o){o=o!=null?o.concat([n]):null,Au(4194308,4,ob.bind(null,i,n),o)},useLayoutEffect:function(n,i){return Au(4194308,4,n,i)},useInsertionEffect:function(n,i){Au(4,2,n,i)},useMemo:function(n,i){var o=xs();i=i===void 0?null:i;var c=n();if(mA){st(!0);try{n()}finally{st(!1)}}return o.memoizedState=[c,i],c},useReducer:function(n,i,o){var c=xs();if(o!==void 0){var m=o(i);if(mA){st(!0);try{o(i)}finally{st(!1)}}}else m=i;return c.memoizedState=c.baseState=m,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:m},c.queue=n,n=n.dispatch=WS.bind(null,at,n),[c.memoizedState,n]},useRef:function(n){var i=xs();return n={current:n},i.memoizedState=n},useState:function(n){n=Im(n);var i=n.queue,o=xb.bind(null,at,i);return i.dispatch=o,[n.memoizedState,o]},useDebugValue:Rm,useDeferredValue:function(n,i){var o=xs();return Mm(o,n,i)},useTransition:function(){var n=Im(!1);return n=hb.bind(null,at,n.queue,!0,!1),xs().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,o){var c=at,m=xs();if(yt){if(o===void 0)throw Error(s(407));o=o()}else{if(o=i(),Ot===null)throw Error(s(349));(ht&127)!==0||Py(c,i,o)}m.memoizedState=o;var p={value:o,getSnapshot:i};return m.queue=p,nb(zy.bind(null,c,p,n),[n]),c.flags|=2048,xo(9,{destroy:void 0},Vy.bind(null,c,p,o,i),null),o},useId:function(){var n=xs(),i=Ot.identifierPrefix;if(yt){var o=zn,c=Vn;o=(c&~(1<<32-Ve(c)-1)).toString(32)+o,i="_"+i+"R_"+o,o=su++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=KS++,i="_"+i+"r_"+o.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:Hm,useFormState:Zy,useActionState:Zy,useOptimistic:function(n){var i=xs();i.memoizedState=i.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Om.bind(null,at,!0,o),o.dispatch=i,[n,i]},useMemoCache:Um,useCacheRefresh:function(){return xs().memoizedState=JS.bind(null,at)},useEffectEvent:function(n){var i=xs(),o={impl:n};return i.memoizedState=o,function(){if((jt&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}},Pm={readContext:Yr,use:au,useCallback:cb,useContext:Yr,useEffect:km,useImperativeHandle:lb,useInsertionEffect:ib,useLayoutEffect:Ab,useMemo:db,useReducer:iu,useRef:sb,useState:function(){return iu(va)},useDebugValue:Rm,useDeferredValue:function(n,i){var o=fr();return ub(o,kt.memoizedState,n,i)},useTransition:function(){var n=iu(va)[0],i=fr().memoizedState;return[typeof n=="boolean"?n:Kl(n),i]},useSyncExternalStore:Oy,useId:gb,useHostTransitionStatus:Hm,useFormState:eb,useActionState:eb,useOptimistic:function(n,i){var o=fr();return qy(o,kt,n,i)},useMemoCache:Um,useCacheRefresh:pb};Pm.useEffectEvent=ab;var wb={readContext:Yr,use:au,useCallback:cb,useContext:Yr,useEffect:km,useImperativeHandle:lb,useInsertionEffect:ib,useLayoutEffect:Ab,useMemo:db,useReducer:Fm,useRef:sb,useState:function(){return Fm(va)},useDebugValue:Rm,useDeferredValue:function(n,i){var o=fr();return kt===null?Mm(o,n,i):ub(o,kt.memoizedState,n,i)},useTransition:function(){var n=Fm(va)[0],i=fr().memoizedState;return[typeof n=="boolean"?n:Kl(n),i]},useSyncExternalStore:Oy,useId:gb,useHostTransitionStatus:Hm,useFormState:rb,useActionState:rb,useOptimistic:function(n,i){var o=fr();return kt!==null?qy(o,kt,n,i):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Um,useCacheRefresh:pb};wb.useEffectEvent=ab;function Vm(n,i,o,c){i=n.memoizedState,o=o(c,i),o=o==null?i:y({},i,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var zm={enqueueSetState:function(n,i,o){n=n._reactInternals;var c=Vs(),m=ni(c);m.payload=i,o!=null&&(m.callback=o),i=ai(n,m,c),i!==null&&(Ts(i,n,c),Ol(i,n,c))},enqueueReplaceState:function(n,i,o){n=n._reactInternals;var c=Vs(),m=ni(c);m.tag=1,m.payload=i,o!=null&&(m.callback=o),i=ai(n,m,c),i!==null&&(Ts(i,n,c),Ol(i,n,c))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var o=Vs(),c=ni(o);c.tag=2,i!=null&&(c.callback=i),i=ai(n,c,o),i!==null&&(Ts(i,n,o),Ol(i,n,o))}};function Bb(n,i,o,c,m,p,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,w):i.prototype&&i.prototype.isPureReactComponent?!Fl(o,c)||!Fl(m,p):!0}function Cb(n,i,o,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,c),i.state!==n&&zm.enqueueReplaceState(i,i.state,null)}function gA(n,i){var o=i;if("ref"in i){o={};for(var c in i)c!=="ref"&&(o[c]=i[c])}if(n=n.defaultProps){o===i&&(o=y({},o));for(var m in n)o[m]===void 0&&(o[m]=n[m])}return o}function Eb(n){Od(n)}function Nb(n){console.error(n)}function Sb(n){Od(n)}function cu(n,i){try{var o=n.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function jb(n,i,o){try{var c=n.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Km(n,i,o){return o=ni(o),o.tag=3,o.payload={element:null},o.callback=function(){cu(n,i)},o}function _b(n){return n=ni(n),n.tag=3,n}function Tb(n,i,o,c){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var p=c.value;n.payload=function(){return m(p)},n.callback=function(){jb(i,o,c)}}var w=o.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(n.callback=function(){jb(i,o,c),typeof m!="function"&&(di===null?di=new Set([this]):di.add(this));var D=c.stack;this.componentDidCatch(c.value,{componentStack:D!==null?D:""})})}function ZS(n,i,o,c,m){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=o.alternate,i!==null&&lo(i,o,m,!0),o=Ls.current,o!==null){switch(o.tag){case 31:case 13:return sn===null?wu():o.alternate===null&&lr===0&&(lr=3),o.flags&=-257,o.flags|=65536,o.lanes=m,c===Jd?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([c]):i.add(c),gg(n,c,m)),!1;case 22:return o.flags|=65536,c===Jd?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([c]):o.add(c)),gg(n,c,m)),!1}throw Error(s(435,o.tag))}return gg(n,c,m),wu(),!1}if(yt)return i=Ls.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=m,c!==cm&&(n=Error(s(422),{cause:c}),kl(Zs(n,o)))):(c!==cm&&(i=Error(s(423),{cause:c}),kl(Zs(i,o))),n=n.current.alternate,n.flags|=65536,m&=-m,n.lanes|=m,c=Zs(c,o),m=Km(n.stateNode,c,m),vm(n,m),lr!==4&&(lr=2)),!1;var p=Error(s(520),{cause:c});if(p=Zs(p,o),tc===null?tc=[p]:tc.push(p),lr!==4&&(lr=2),i===null)return!0;c=Zs(c,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,n=m&-m,o.lanes|=n,n=Km(o.stateNode,c,n),vm(o,n),!1;case 1:if(i=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(di===null||!di.has(p))))return o.flags|=65536,m&=-m,o.lanes|=m,m=_b(m),Tb(m,n,o,c),vm(o,m),!1}o=o.return}while(o!==null);return!1}var Gm=Error(s(461)),Br=!1;function $r(n,i,o,c){i.child=n===null?Iy(i,null,o,c):fA(i,n.child,o,c)}function Ub(n,i,o,c,m){o=o.render;var p=i.ref;if("ref"in c){var w={};for(var D in c)D!=="ref"&&(w[D]=c[D])}else w=c;return cA(i),c=Sm(n,i,o,w,p,m),D=jm(),n!==null&&!Br?(_m(n,i,m),wa(n,i,m)):(yt&&D&&om(i),i.flags|=1,$r(n,i,c,m),i.child)}function Qb(n,i,o,c,m){if(n===null){var p=o.type;return typeof p=="function"&&!am(p)&&p.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=p,Fb(n,i,p,c,m)):(n=Kd(o.type,null,c,i,i.mode,m),n.ref=i.ref,n.return=i,i.child=n)}if(p=n.child,!eg(n,m)){var w=p.memoizedProps;if(o=o.compare,o=o!==null?o:Fl,o(w,c)&&n.ref===i.ref)return wa(n,i,m)}return i.flags|=1,n=ga(p,c),n.ref=i.ref,n.return=i,i.child=n}function Fb(n,i,o,c,m){if(n!==null){var p=n.memoizedProps;if(Fl(p,c)&&n.ref===i.ref)if(Br=!1,i.pendingProps=c=p,eg(n,m))(n.flags&131072)!==0&&(Br=!0);else return i.lanes=n.lanes,wa(n,i,m)}return qm(n,i,o,c,m)}function Ib(n,i,o,c){var m=c.children,p=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((i.flags&128)!==0){if(p=p!==null?p.baseLanes|o:o,n!==null){for(c=i.child=n.child,m=0;c!==null;)m=m|c.lanes|c.childLanes,c=c.sibling;c=m&~p}else c=0,i.child=null;return Db(n,i,p,o,c)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&$d(i,p!==null?p.cachePool:null),p!==null?Ry(i,p):Bm(),My(i);else return c=i.lanes=536870912,Db(n,i,p!==null?p.baseLanes|o:o,o,c)}else p!==null?($d(i,p.cachePool),Ry(i,p),Ai(),i.memoizedState=null):(n!==null&&$d(i,null),Bm(),Ai());return $r(n,i,m,o),i.child}function Yl(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Db(n,i,o,c,m){var p=pm();return p=p===null?null:{parent:vr._currentValue,pool:p},i.memoizedState={baseLanes:o,cachePool:p},n!==null&&$d(i,null),Bm(),My(i),n!==null&&lo(n,i,c,!0),i.childLanes=m,null}function du(n,i){return i=hu({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function kb(n,i,o){return fA(i,n.child,null,o),n=du(i,i.pendingProps),n.flags|=2,Hs(i),i.memoizedState=null,n}function ej(n,i,o){var c=i.pendingProps,m=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(yt){if(c.mode==="hidden")return n=du(i,c),i.lanes=536870912,Yl(null,n);if(Em(i),(n=Gt)?(n=Yv(n,rn),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Za!==null?{id:Vn,overflow:zn}:null,retryLane:536870912,hydrationErrors:null},o=yy(n),o.return=i,i.child=o,qr=i,Gt=null)):n=null,n===null)throw ti(i);return i.lanes=536870912,null}return du(i,c)}var p=n.memoizedState;if(p!==null){var w=p.dehydrated;if(Em(i),m)if(i.flags&256)i.flags&=-257,i=kb(n,i,o);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(s(558));else if(Br||lo(n,i,o,!1),m=(o&n.childLanes)!==0,Br||m){if(c=Ot,c!==null&&(w=Yi(c,o),w!==0&&w!==p.retryLane))throw p.retryLane=w,iA(n,w),Ts(c,n,w),Gm;wu(),i=kb(n,i,o)}else n=p.treeContext,Gt=nn(w.nextSibling),qr=i,yt=!0,ei=null,rn=!1,n!==null&&wy(i,n),i=du(i,c),i.flags|=4096;return i}return n=ga(n.child,{mode:c.mode,children:c.children}),n.ref=i.ref,i.child=n,n.return=i,n}function uu(n,i){var o=i.ref;if(o===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(n===null||n.ref!==o)&&(i.flags|=4194816)}}function qm(n,i,o,c,m){return cA(i),o=Sm(n,i,o,c,void 0,m),c=jm(),n!==null&&!Br?(_m(n,i,m),wa(n,i,m)):(yt&&c&&om(i),i.flags|=1,$r(n,i,o,m),i.child)}function Rb(n,i,o,c,m,p){return cA(i),i.updateQueue=null,o=Hy(i,c,o,m),Ly(n),c=jm(),n!==null&&!Br?(_m(n,i,p),wa(n,i,p)):(yt&&c&&om(i),i.flags|=1,$r(n,i,o,p),i.child)}function Mb(n,i,o,c,m){if(cA(i),i.stateNode===null){var p=ao,w=o.contextType;typeof w=="object"&&w!==null&&(p=Yr(w)),p=new o(c,p),i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=zm,i.stateNode=p,p._reactInternals=i,p=i.stateNode,p.props=c,p.state=i.memoizedState,p.refs={},ym(i),w=o.contextType,p.context=typeof w=="object"&&w!==null?Yr(w):ao,p.state=i.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(Vm(i,o,w,c),p.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(w=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),w!==p.state&&zm.enqueueReplaceState(p,p.state,null),Vl(i,c,p,m),Pl(),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(n===null){p=i.stateNode;var D=i.memoizedProps,X=gA(o,D);p.props=X;var ie=p.context,fe=o.contextType;w=ao,typeof fe=="object"&&fe!==null&&(w=Yr(fe));var ye=o.getDerivedStateFromProps;fe=typeof ye=="function"||typeof p.getSnapshotBeforeUpdate=="function",D=i.pendingProps!==D,fe||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(D||ie!==w)&&Cb(i,p,c,w),si=!1;var oe=i.memoizedState;p.state=oe,Vl(i,c,p,m),Pl(),ie=i.memoizedState,D||oe!==ie||si?(typeof ye=="function"&&(Vm(i,o,ye,c),ie=i.memoizedState),(X=si||Bb(i,o,X,c,oe,ie,w))?(fe||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(i.flags|=4194308)):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=ie),p.props=c,p.state=ie,p.context=w,c=X):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{p=i.stateNode,bm(n,i),w=i.memoizedProps,fe=gA(o,w),p.props=fe,ye=i.pendingProps,oe=p.context,ie=o.contextType,X=ao,typeof ie=="object"&&ie!==null&&(X=Yr(ie)),D=o.getDerivedStateFromProps,(ie=typeof D=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(w!==ye||oe!==X)&&Cb(i,p,c,X),si=!1,oe=i.memoizedState,p.state=oe,Vl(i,c,p,m),Pl();var ce=i.memoizedState;w!==ye||oe!==ce||si||n!==null&&n.dependencies!==null&&qd(n.dependencies)?(typeof D=="function"&&(Vm(i,o,D,c),ce=i.memoizedState),(fe=si||Bb(i,o,fe,c,oe,ce,X)||n!==null&&n.dependencies!==null&&qd(n.dependencies))?(ie||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(c,ce,X),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(c,ce,X)),typeof p.componentDidUpdate=="function"&&(i.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof p.componentDidUpdate!="function"||w===n.memoizedProps&&oe===n.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||w===n.memoizedProps&&oe===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=ce),p.props=c,p.state=ce,p.context=X,c=fe):(typeof p.componentDidUpdate!="function"||w===n.memoizedProps&&oe===n.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||w===n.memoizedProps&&oe===n.memoizedState||(i.flags|=1024),c=!1)}return p=c,uu(n,i),c=(i.flags&128)!==0,p||c?(p=i.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:p.render(),i.flags|=1,n!==null&&c?(i.child=fA(i,n.child,null,m),i.child=fA(i,null,o,m)):$r(n,i,o,m),i.memoizedState=p.state,n=i.child):n=wa(n,i,m),n}function Lb(n,i,o,c){return oA(),i.flags|=256,$r(n,i,o,c),i.child}var Ym={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function $m(n){return{baseLanes:n,cachePool:jy()}}function Xm(n,i,o){return n=n!==null?n.childLanes&~o:0,i&&(n|=Ps),n}function Hb(n,i,o){var c=i.pendingProps,m=!1,p=(i.flags&128)!==0,w;if((w=p)||(w=n!==null&&n.memoizedState===null?!1:(hr.current&2)!==0),w&&(m=!0,i.flags&=-129),w=(i.flags&32)!==0,i.flags&=-33,n===null){if(yt){if(m?ii(i):Ai(),(n=Gt)?(n=Yv(n,rn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Za!==null?{id:Vn,overflow:zn}:null,retryLane:536870912,hydrationErrors:null},o=yy(n),o.return=i,i.child=o,qr=i,Gt=null)):n=null,n===null)throw ti(i);return Qg(n)?i.lanes=32:i.lanes=536870912,null}var D=c.children;return c=c.fallback,m?(Ai(),m=i.mode,D=hu({mode:"hidden",children:D},m),c=AA(c,m,o,null),D.return=i,c.return=i,D.sibling=c,i.child=D,c=i.child,c.memoizedState=$m(o),c.childLanes=Xm(n,w,o),i.memoizedState=Ym,Yl(null,c)):(ii(i),Jm(i,D))}var X=n.memoizedState;if(X!==null&&(D=X.dehydrated,D!==null)){if(p)i.flags&256?(ii(i),i.flags&=-257,i=Wm(n,i,o)):i.memoizedState!==null?(Ai(),i.child=n.child,i.flags|=128,i=null):(Ai(),D=c.fallback,m=i.mode,c=hu({mode:"visible",children:c.children},m),D=AA(D,m,o,null),D.flags|=2,c.return=i,D.return=i,c.sibling=D,i.child=c,fA(i,n.child,null,o),c=i.child,c.memoizedState=$m(o),c.childLanes=Xm(n,w,o),i.memoizedState=Ym,i=Yl(null,c));else if(ii(i),Qg(D)){if(w=D.nextSibling&&D.nextSibling.dataset,w)var ie=w.dgst;w=ie,c=Error(s(419)),c.stack="",c.digest=w,kl({value:c,source:null,stack:null}),i=Wm(n,i,o)}else if(Br||lo(n,i,o,!1),w=(o&n.childLanes)!==0,Br||w){if(w=Ot,w!==null&&(c=Yi(w,o),c!==0&&c!==X.retryLane))throw X.retryLane=c,iA(n,c),Ts(w,n,c),Gm;Ug(D)||wu(),i=Wm(n,i,o)}else Ug(D)?(i.flags|=192,i.child=n.child,i=null):(n=X.treeContext,Gt=nn(D.nextSibling),qr=i,yt=!0,ei=null,rn=!1,n!==null&&wy(i,n),i=Jm(i,c.children),i.flags|=4096);return i}return m?(Ai(),D=c.fallback,m=i.mode,X=n.child,ie=X.sibling,c=ga(X,{mode:"hidden",children:c.children}),c.subtreeFlags=X.subtreeFlags&65011712,ie!==null?D=ga(ie,D):(D=AA(D,m,o,null),D.flags|=2),D.return=i,c.return=i,c.sibling=D,i.child=c,Yl(null,c),c=i.child,D=n.child.memoizedState,D===null?D=$m(o):(m=D.cachePool,m!==null?(X=vr._currentValue,m=m.parent!==X?{parent:X,pool:X}:m):m=jy(),D={baseLanes:D.baseLanes|o,cachePool:m}),c.memoizedState=D,c.childLanes=Xm(n,w,o),i.memoizedState=Ym,Yl(n.child,c)):(ii(i),o=n.child,n=o.sibling,o=ga(o,{mode:"visible",children:c.children}),o.return=i,o.sibling=null,n!==null&&(w=i.deletions,w===null?(i.deletions=[n],i.flags|=16):w.push(n)),i.child=o,i.memoizedState=null,o)}function Jm(n,i){return i=hu({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function hu(n,i){return n=Ms(22,n,null,i),n.lanes=0,n}function Wm(n,i,o){return fA(i,n.child,null,o),n=Jm(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Ob(n,i,o){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),hm(n.return,i,o)}function Zm(n,i,o,c,m,p){var w=n.memoizedState;w===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:m,treeForkCount:p}:(w.isBackwards=i,w.rendering=null,w.renderingStartTime=0,w.last=c,w.tail=o,w.tailMode=m,w.treeForkCount=p)}function Pb(n,i,o){var c=i.pendingProps,m=c.revealOrder,p=c.tail;c=c.children;var w=hr.current,D=(w&2)!==0;if(D?(w=w&1|2,i.flags|=128):w&=1,Ae(hr,w),$r(n,i,c,o),c=yt?Dl:0,!D&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Ob(n,o,i);else if(n.tag===19)Ob(n,o,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(m){case"forwards":for(o=i.child,m=null;o!==null;)n=o.alternate,n!==null&&tu(n)===null&&(m=o),o=o.sibling;o=m,o===null?(m=i.child,i.child=null):(m=o.sibling,o.sibling=null),Zm(i,!1,m,o,p,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,m=i.child,i.child=null;m!==null;){if(n=m.alternate,n!==null&&tu(n)===null){i.child=m;break}n=m.sibling,m.sibling=o,o=m,m=n}Zm(i,!0,o,null,p,c);break;case"together":Zm(i,!1,null,null,void 0,c);break;default:i.memoizedState=null}return i.child}function wa(n,i,o){if(n!==null&&(i.dependencies=n.dependencies),ci|=i.lanes,(o&i.childLanes)===0)if(n!==null){if(lo(n,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(s(153));if(i.child!==null){for(n=i.child,o=ga(n,n.pendingProps),i.child=o,o.return=i;n.sibling!==null;)n=n.sibling,o=o.sibling=ga(n,n.pendingProps),o.return=i;o.sibling=null}return i.child}function eg(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&qd(n)))}function tj(n,i,o){switch(i.tag){case 3:Me(i,i.stateNode.containerInfo),ri(i,vr,n.memoizedState.cache),oA();break;case 27:case 5:Et(i);break;case 4:Me(i,i.stateNode.containerInfo);break;case 10:ri(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Em(i),null;break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(ii(i),i.flags|=128,null):(o&i.child.childLanes)!==0?Hb(n,i,o):(ii(i),n=wa(n,i,o),n!==null?n.sibling:null);ii(i);break;case 19:var m=(n.flags&128)!==0;if(c=(o&i.childLanes)!==0,c||(lo(n,i,o,!1),c=(o&i.childLanes)!==0),m){if(c)return Pb(n,i,o);i.flags|=128}if(m=i.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Ae(hr,hr.current),c)break;return null;case 22:return i.lanes=0,Ib(n,i,o,i.pendingProps);case 24:ri(i,vr,n.memoizedState.cache)}return wa(n,i,o)}function Vb(n,i,o){if(n!==null)if(n.memoizedProps!==i.pendingProps)Br=!0;else{if(!eg(n,o)&&(i.flags&128)===0)return Br=!1,tj(n,i,o);Br=(n.flags&131072)!==0}else Br=!1,yt&&(i.flags&1048576)!==0&&vy(i,Dl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var c=i.pendingProps;if(n=uA(i.elementType),i.type=n,typeof n=="function")am(n)?(c=gA(n,c),i.tag=1,i=Mb(null,i,n,c,o)):(i.tag=0,i=qm(null,i,n,c,o));else{if(n!=null){var m=n.$$typeof;if(m===K){i.tag=11,i=Ub(null,i,n,c,o);break e}else if(m===E){i.tag=14,i=Qb(null,i,n,c,o);break e}}throw i=T(n)||n,Error(s(306,i,""))}}return i;case 0:return qm(n,i,i.type,i.pendingProps,o);case 1:return c=i.type,m=gA(c,i.pendingProps),Mb(n,i,c,m,o);case 3:e:{if(Me(i,i.stateNode.containerInfo),n===null)throw Error(s(387));c=i.pendingProps;var p=i.memoizedState;m=p.element,bm(n,i),Vl(i,c,null,o);var w=i.memoizedState;if(c=w.cache,ri(i,vr,c),c!==p.cache&&fm(i,[vr],o,!0),Pl(),c=w.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:w.cache},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){i=Lb(n,i,c,o);break e}else if(c!==m){m=Zs(Error(s(424)),i),kl(m),i=Lb(n,i,c,o);break e}else for(n=i.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,Gt=nn(n.firstChild),qr=i,yt=!0,ei=null,rn=!0,o=Iy(i,null,c,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(oA(),c===m){i=wa(n,i,o);break e}$r(n,i,c,o)}i=i.child}return i;case 26:return uu(n,i),n===null?(o=ew(i.type,null,i.pendingProps,null))?i.memoizedState=o:yt||(o=i.type,n=i.pendingProps,c=_u(Be.current).createElement(o),c[ir]=i,c[dr]=n,Xr(c,o,n),Ht(c),i.stateNode=c):i.memoizedState=ew(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Et(i),n===null&&yt&&(c=i.stateNode=Jv(i.type,i.pendingProps,Be.current),qr=i,rn=!0,m=Gt,mi(i.type)?(Fg=m,Gt=nn(c.firstChild)):Gt=m),$r(n,i,i.pendingProps.children,o),uu(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&yt&&((m=c=Gt)&&(c=Uj(c,i.type,i.pendingProps,rn),c!==null?(i.stateNode=c,qr=i,Gt=nn(c.firstChild),rn=!1,m=!0):m=!1),m||ti(i)),Et(i),m=i.type,p=i.pendingProps,w=n!==null?n.memoizedProps:null,c=p.children,jg(m,p)?c=null:w!==null&&jg(m,w)&&(i.flags|=32),i.memoizedState!==null&&(m=Sm(n,i,GS,null,null,o),lc._currentValue=m),uu(n,i),$r(n,i,c,o),i.child;case 6:return n===null&&yt&&((n=o=Gt)&&(o=Qj(o,i.pendingProps,rn),o!==null?(i.stateNode=o,qr=i,Gt=null,n=!0):n=!1),n||ti(i)),null;case 13:return Hb(n,i,o);case 4:return Me(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=fA(i,null,c,o):$r(n,i,c,o),i.child;case 11:return Ub(n,i,i.type,i.pendingProps,o);case 7:return $r(n,i,i.pendingProps,o),i.child;case 8:return $r(n,i,i.pendingProps.children,o),i.child;case 12:return $r(n,i,i.pendingProps.children,o),i.child;case 10:return c=i.pendingProps,ri(i,i.type,c.value),$r(n,i,c.children,o),i.child;case 9:return m=i.type._context,c=i.pendingProps.children,cA(i),m=Yr(m),c=c(m),i.flags|=1,$r(n,i,c,o),i.child;case 14:return Qb(n,i,i.type,i.pendingProps,o);case 15:return Fb(n,i,i.type,i.pendingProps,o);case 19:return Pb(n,i,o);case 31:return ej(n,i,o);case 22:return Ib(n,i,o,i.pendingProps);case 24:return cA(i),c=Yr(vr),n===null?(m=pm(),m===null&&(m=Ot,p=mm(),m.pooledCache=p,p.refCount++,p!==null&&(m.pooledCacheLanes|=o),m=p),i.memoizedState={parent:c,cache:m},ym(i),ri(i,vr,m)):((n.lanes&o)!==0&&(bm(n,i),Vl(i,null,null,o),Pl()),m=n.memoizedState,p=i.memoizedState,m.parent!==c?(m={parent:c,cache:c},i.memoizedState=m,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=m),ri(i,vr,c)):(c=p.cache,ri(i,vr,c),c!==m.cache&&fm(i,[vr],o,!0))),$r(n,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Ba(n){n.flags|=4}function tg(n,i,o,c,m){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(m&335544128)===m)if(n.stateNode.complete)n.flags|=8192;else if(gv())n.flags|=8192;else throw hA=Jd,xm}else n.flags&=-16777217}function zb(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!aw(i))if(gv())n.flags|=8192;else throw hA=Jd,xm}function fu(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?ca():536870912,n.lanes|=i,wo|=i)}function $l(n,i){if(!yt)switch(n.tailMode){case"hidden":i=n.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function qt(n){var i=n.alternate!==null&&n.alternate.child===n.child,o=0,c=0;if(i)for(var m=n.child;m!==null;)o|=m.lanes|m.childLanes,c|=m.subtreeFlags&65011712,c|=m.flags&65011712,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)o|=m.lanes|m.childLanes,c|=m.subtreeFlags,c|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=c,n.childLanes=o,i}function rj(n,i,o){var c=i.pendingProps;switch(lm(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(i),null;case 1:return qt(i),null;case 3:return o=i.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),ya(vr),$e(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(oo(i)?Ba(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,dm())),qt(i),null;case 26:var m=i.type,p=i.memoizedState;return n===null?(Ba(i),p!==null?(qt(i),zb(i,p)):(qt(i),tg(i,m,null,c,o))):p?p!==n.memoizedState?(Ba(i),qt(i),zb(i,p)):(qt(i),i.flags&=-16777217):(n=n.memoizedProps,n!==c&&Ba(i),qt(i),tg(i,m,n,c,o)),null;case 27:if(Vt(i),o=Be.current,m=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==c&&Ba(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return qt(i),null}n=me.current,oo(i)?By(i):(n=Jv(m,c,o),i.stateNode=n,Ba(i))}return qt(i),null;case 5:if(Vt(i),m=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==c&&Ba(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return qt(i),null}if(p=me.current,oo(i))By(i);else{var w=_u(Be.current);switch(p){case 1:p=w.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:p=w.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":p=w.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":p=w.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":p=w.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof c.is=="string"?w.createElement("select",{is:c.is}):w.createElement("select"),c.multiple?p.multiple=!0:c.size&&(p.size=c.size);break;default:p=typeof c.is=="string"?w.createElement(m,{is:c.is}):w.createElement(m)}}p[ir]=i,p[dr]=c;e:for(w=i.child;w!==null;){if(w.tag===5||w.tag===6)p.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===i)break e;for(;w.sibling===null;){if(w.return===null||w.return===i)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}i.stateNode=p;e:switch(Xr(p,m,c),m){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Ba(i)}}return qt(i),tg(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,o),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==c&&Ba(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(s(166));if(n=Be.current,oo(i)){if(n=i.stateNode,o=i.memoizedProps,c=null,m=qr,m!==null)switch(m.tag){case 27:case 5:c=m.memoizedProps}n[ir]=i,n=!!(n.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||Hv(n.nodeValue,o)),n||ti(i,!0)}else n=_u(n).createTextNode(c),n[ir]=i,i.stateNode=n}return qt(i),null;case 31:if(o=i.memoizedState,n===null||n.memoizedState!==null){if(c=oo(i),o!==null){if(n===null){if(!c)throw Error(s(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[ir]=i}else oA(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;qt(i),n=!1}else o=dm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return i.flags&256?(Hs(i),i):(Hs(i),null);if((i.flags&128)!==0)throw Error(s(558))}return qt(i),null;case 13:if(c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(m=oo(i),c!==null&&c.dehydrated!==null){if(n===null){if(!m)throw Error(s(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));m[ir]=i}else oA(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;qt(i),m=!1}else m=dm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=m),m=!0;if(!m)return i.flags&256?(Hs(i),i):(Hs(i),null)}return Hs(i),(i.flags&128)!==0?(i.lanes=o,i):(o=c!==null,n=n!==null&&n.memoizedState!==null,o&&(c=i.child,m=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(m=c.alternate.memoizedState.cachePool.pool),p=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),p!==m&&(c.flags|=2048)),o!==n&&o&&(i.child.flags|=8192),fu(i,i.updateQueue),qt(i),null);case 4:return $e(),n===null&&Bg(i.stateNode.containerInfo),qt(i),null;case 10:return ya(i.type),qt(i),null;case 19:if(J(hr),c=i.memoizedState,c===null)return qt(i),null;if(m=(i.flags&128)!==0,p=c.rendering,p===null)if(m)$l(c,!1);else{if(lr!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(p=tu(n),p!==null){for(i.flags|=128,$l(c,!1),n=p.updateQueue,i.updateQueue=n,fu(i,n),i.subtreeFlags=0,n=o,o=i.child;o!==null;)xy(o,n),o=o.sibling;return Ae(hr,hr.current&1|2),yt&&pa(i,c.treeForkCount),i.child}n=n.sibling}c.tail!==null&&zt()>yu&&(i.flags|=128,m=!0,$l(c,!1),i.lanes=4194304)}else{if(!m)if(n=tu(p),n!==null){if(i.flags|=128,m=!0,n=n.updateQueue,i.updateQueue=n,fu(i,n),$l(c,!0),c.tail===null&&c.tailMode==="hidden"&&!p.alternate&&!yt)return qt(i),null}else 2*zt()-c.renderingStartTime>yu&&o!==536870912&&(i.flags|=128,m=!0,$l(c,!1),i.lanes=4194304);c.isBackwards?(p.sibling=i.child,i.child=p):(n=c.last,n!==null?n.sibling=p:i.child=p,c.last=p)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=zt(),n.sibling=null,o=hr.current,Ae(hr,m?o&1|2:o&1),yt&&pa(i,c.treeForkCount),n):(qt(i),null);case 22:case 23:return Hs(i),Cm(),c=i.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(o&536870912)!==0&&(i.flags&128)===0&&(qt(i),i.subtreeFlags&6&&(i.flags|=8192)):qt(i),o=i.updateQueue,o!==null&&fu(i,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==o&&(i.flags|=2048),n!==null&&J(dA),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),ya(vr),qt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function sj(n,i){switch(lm(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return ya(vr),$e(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Vt(i),null;case 31:if(i.memoizedState!==null){if(Hs(i),i.alternate===null)throw Error(s(340));oA()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(Hs(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(s(340));oA()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return J(hr),null;case 4:return $e(),null;case 10:return ya(i.type),null;case 22:case 23:return Hs(i),Cm(),n!==null&&J(dA),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return ya(vr),null;case 25:return null;default:return null}}function Kb(n,i){switch(lm(i),i.tag){case 3:ya(vr),$e();break;case 26:case 27:case 5:Vt(i);break;case 4:$e();break;case 31:i.memoizedState!==null&&Hs(i);break;case 13:Hs(i);break;case 19:J(hr);break;case 10:ya(i.type);break;case 22:case 23:Hs(i),Cm(),n!==null&&J(dA);break;case 24:ya(vr)}}function Xl(n,i){try{var o=i.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var m=c.next;o=m;do{if((o.tag&n)===n){c=void 0;var p=o.create,w=o.inst;c=p(),w.destroy=c}o=o.next}while(o!==m)}}catch(D){Ft(i,i.return,D)}}function oi(n,i,o){try{var c=i.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var p=m.next;c=p;do{if((c.tag&n)===n){var w=c.inst,D=w.destroy;if(D!==void 0){w.destroy=void 0,m=i;var X=o,ie=D;try{ie()}catch(fe){Ft(m,X,fe)}}}c=c.next}while(c!==p)}}catch(fe){Ft(i,i.return,fe)}}function Gb(n){var i=n.updateQueue;if(i!==null){var o=n.stateNode;try{ky(i,o)}catch(c){Ft(n,n.return,c)}}}function qb(n,i,o){o.props=gA(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(c){Ft(n,i,c)}}function Jl(n,i){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof o=="function"?n.refCleanup=o(c):o.current=c}}catch(m){Ft(n,i,m)}}function Kn(n,i){var o=n.ref,c=n.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(m){Ft(n,i,m)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){Ft(n,i,m)}else o.current=null}function Yb(n){var i=n.type,o=n.memoizedProps,c=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(m){Ft(n,n.return,m)}}function rg(n,i,o){try{var c=n.stateNode;Ej(c,n.type,o,i),c[dr]=i}catch(m){Ft(n,n.return,m)}}function $b(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&mi(n.type)||n.tag===4}function sg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||$b(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&mi(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ng(n,i,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(n),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=gn));else if(c!==4&&(c===27&&mi(n.type)&&(o=n.stateNode,i=null),n=n.child,n!==null))for(ng(n,i,o),n=n.sibling;n!==null;)ng(n,i,o),n=n.sibling}function mu(n,i,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?o.insertBefore(n,i):o.appendChild(n);else if(c!==4&&(c===27&&mi(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(mu(n,i,o),n=n.sibling;n!==null;)mu(n,i,o),n=n.sibling}function Xb(n){var i=n.stateNode,o=n.memoizedProps;try{for(var c=n.type,m=i.attributes;m.length;)i.removeAttributeNode(m[0]);Xr(i,c,o),i[ir]=n,i[dr]=o}catch(p){Ft(n,n.return,p)}}var Ca=!1,Cr=!1,ag=!1,Jb=typeof WeakSet=="function"?WeakSet:Set,Lr=null;function nj(n,i){if(n=n.containerInfo,Ng=ku,n=ly(n),Wf(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var m=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var w=0,D=-1,X=-1,ie=0,fe=0,ye=n,oe=null;t:for(;;){for(var ce;ye!==o||m!==0&&ye.nodeType!==3||(D=w+m),ye!==p||c!==0&&ye.nodeType!==3||(X=w+c),ye.nodeType===3&&(w+=ye.nodeValue.length),(ce=ye.firstChild)!==null;)oe=ye,ye=ce;for(;;){if(ye===n)break t;if(oe===o&&++ie===m&&(D=w),oe===p&&++fe===c&&(X=w),(ce=ye.nextSibling)!==null)break;ye=oe,oe=ye.parentNode}ye=ce}o=D===-1||X===-1?null:{start:D,end:X}}else o=null}o=o||{start:0,end:0}}else o=null;for(Sg={focusedElem:n,selectionRange:o},ku=!1,Lr=i;Lr!==null;)if(i=Lr,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Lr=n;else for(;Lr!==null;){switch(i=Lr,p=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)m=n[o],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&p!==null){n=void 0,o=i,m=p.memoizedProps,p=p.memoizedState,c=o.stateNode;try{var Ie=gA(o.type,m);n=c.getSnapshotBeforeUpdate(Ie,p),c.__reactInternalSnapshotBeforeUpdate=n}catch(Ke){Ft(o,o.return,Ke)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,o=n.nodeType,o===9)Tg(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Tg(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=i.sibling,n!==null){n.return=i.return,Lr=n;break}Lr=i.return}}function Wb(n,i,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Na(n,o),c&4&&Xl(5,o);break;case 1:if(Na(n,o),c&4)if(n=o.stateNode,i===null)try{n.componentDidMount()}catch(w){Ft(o,o.return,w)}else{var m=gA(o.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(m,i,n.__reactInternalSnapshotBeforeUpdate)}catch(w){Ft(o,o.return,w)}}c&64&&Gb(o),c&512&&Jl(o,o.return);break;case 3:if(Na(n,o),c&64&&(n=o.updateQueue,n!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{ky(n,i)}catch(w){Ft(o,o.return,w)}}break;case 27:i===null&&c&4&&Xb(o);case 26:case 5:Na(n,o),i===null&&c&4&&Yb(o),c&512&&Jl(o,o.return);break;case 12:Na(n,o);break;case 31:Na(n,o),c&4&&tv(n,o);break;case 13:Na(n,o),c&4&&rv(n,o),c&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=hj.bind(null,o),Fj(n,o))));break;case 22:if(c=o.memoizedState!==null||Ca,!c){i=i!==null&&i.memoizedState!==null||Cr,m=Ca;var p=Cr;Ca=c,(Cr=i)&&!p?Sa(n,o,(o.subtreeFlags&8772)!==0):Na(n,o),Ca=m,Cr=p}break;case 30:break;default:Na(n,o)}}function Zb(n){var i=n.alternate;i!==null&&(n.alternate=null,Zb(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Jt(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Zt=null,Ns=!1;function Ea(n,i,o){for(o=o.child;o!==null;)ev(n,i,o),o=o.sibling}function ev(n,i,o){if(We&&typeof We.onCommitFiberUnmount=="function")try{We.onCommitFiberUnmount(Fe,o)}catch{}switch(o.tag){case 26:Cr||Kn(o,i),Ea(n,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Cr||Kn(o,i);var c=Zt,m=Ns;mi(o.type)&&(Zt=o.stateNode,Ns=!1),Ea(n,i,o),ic(o.stateNode),Zt=c,Ns=m;break;case 5:Cr||Kn(o,i);case 6:if(c=Zt,m=Ns,Zt=null,Ea(n,i,o),Zt=c,Ns=m,Zt!==null)if(Ns)try{(Zt.nodeType===9?Zt.body:Zt.nodeName==="HTML"?Zt.ownerDocument.body:Zt).removeChild(o.stateNode)}catch(p){Ft(o,i,p)}else try{Zt.removeChild(o.stateNode)}catch(p){Ft(o,i,p)}break;case 18:Zt!==null&&(Ns?(n=Zt,Gv(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),To(n)):Gv(Zt,o.stateNode));break;case 4:c=Zt,m=Ns,Zt=o.stateNode.containerInfo,Ns=!0,Ea(n,i,o),Zt=c,Ns=m;break;case 0:case 11:case 14:case 15:oi(2,o,i),Cr||oi(4,o,i),Ea(n,i,o);break;case 1:Cr||(Kn(o,i),c=o.stateNode,typeof c.componentWillUnmount=="function"&&qb(o,i,c)),Ea(n,i,o);break;case 21:Ea(n,i,o);break;case 22:Cr=(c=Cr)||o.memoizedState!==null,Ea(n,i,o),Cr=c;break;default:Ea(n,i,o)}}function tv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{To(n)}catch(o){Ft(i,i.return,o)}}}function rv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{To(n)}catch(o){Ft(i,i.return,o)}}function aj(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new Jb),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new Jb),i;default:throw Error(s(435,n.tag))}}function gu(n,i){var o=aj(n);i.forEach(function(c){if(!o.has(c)){o.add(c);var m=fj.bind(null,n,c);c.then(m,m)}})}function Ss(n,i){var o=i.deletions;if(o!==null)for(var c=0;c<o.length;c++){var m=o[c],p=n,w=i,D=w;e:for(;D!==null;){switch(D.tag){case 27:if(mi(D.type)){Zt=D.stateNode,Ns=!1;break e}break;case 5:Zt=D.stateNode,Ns=!1;break e;case 3:case 4:Zt=D.stateNode.containerInfo,Ns=!0;break e}D=D.return}if(Zt===null)throw Error(s(160));ev(p,w,m),Zt=null,Ns=!1,p=m.alternate,p!==null&&(p.return=null),m.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)sv(i,n),i=i.sibling}var wn=null;function sv(n,i){var o=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Ss(i,n),js(n),c&4&&(oi(3,n,n.return),Xl(3,n),oi(5,n,n.return));break;case 1:Ss(i,n),js(n),c&512&&(Cr||o===null||Kn(o,o.return)),c&64&&Ca&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var m=wn;if(Ss(i,n),js(n),c&512&&(Cr||o===null||Kn(o,o.return)),c&4){var p=o!==null?o.memoizedState:null;if(c=n.memoizedState,o===null)if(c===null)if(n.stateNode===null){e:{c=n.type,o=n.memoizedProps,m=m.ownerDocument||m;t:switch(c){case"title":p=m.getElementsByTagName("title")[0],(!p||p[Nt]||p[ir]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=m.createElement(c),m.head.insertBefore(p,m.querySelector("head > title"))),Xr(p,c,o),p[ir]=n,Ht(p),c=p;break e;case"link":var w=sw("link","href",m).get(c+(o.href||""));if(w){for(var D=0;D<w.length;D++)if(p=w[D],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){w.splice(D,1);break t}}p=m.createElement(c),Xr(p,c,o),m.head.appendChild(p);break;case"meta":if(w=sw("meta","content",m).get(c+(o.content||""))){for(D=0;D<w.length;D++)if(p=w[D],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){w.splice(D,1);break t}}p=m.createElement(c),Xr(p,c,o),m.head.appendChild(p);break;default:throw Error(s(468,c))}p[ir]=n,Ht(p),c=p}n.stateNode=c}else nw(m,n.type,n.stateNode);else n.stateNode=rw(m,c,n.memoizedProps);else p!==c?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,c===null?nw(m,n.type,n.stateNode):rw(m,c,n.memoizedProps)):c===null&&n.stateNode!==null&&rg(n,n.memoizedProps,o.memoizedProps)}break;case 27:Ss(i,n),js(n),c&512&&(Cr||o===null||Kn(o,o.return)),o!==null&&c&4&&rg(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Ss(i,n),js(n),c&512&&(Cr||o===null||Kn(o,o.return)),n.flags&32){m=n.stateNode;try{Es(m,"")}catch(Ie){Ft(n,n.return,Ie)}}c&4&&n.stateNode!=null&&(m=n.memoizedProps,rg(n,m,o!==null?o.memoizedProps:m)),c&1024&&(ag=!0);break;case 6:if(Ss(i,n),js(n),c&4){if(n.stateNode===null)throw Error(s(162));c=n.memoizedProps,o=n.stateNode;try{o.nodeValue=c}catch(Ie){Ft(n,n.return,Ie)}}break;case 3:if(Qu=null,m=wn,wn=Tu(i.containerInfo),Ss(i,n),wn=m,js(n),c&4&&o!==null&&o.memoizedState.isDehydrated)try{To(i.containerInfo)}catch(Ie){Ft(n,n.return,Ie)}ag&&(ag=!1,nv(n));break;case 4:c=wn,wn=Tu(n.stateNode.containerInfo),Ss(i,n),js(n),wn=c;break;case 12:Ss(i,n),js(n);break;case 31:Ss(i,n),js(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,gu(n,c)));break;case 13:Ss(i,n),js(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(xu=zt()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,gu(n,c)));break;case 22:m=n.memoizedState!==null;var X=o!==null&&o.memoizedState!==null,ie=Ca,fe=Cr;if(Ca=ie||m,Cr=fe||X,Ss(i,n),Cr=fe,Ca=ie,js(n),c&8192)e:for(i=n.stateNode,i._visibility=m?i._visibility&-2:i._visibility|1,m&&(o===null||X||Ca||Cr||pA(n)),o=null,i=n;;){if(i.tag===5||i.tag===26){if(o===null){X=o=i;try{if(p=X.stateNode,m)w=p.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{D=X.stateNode;var ye=X.memoizedProps.style,oe=ye!=null&&ye.hasOwnProperty("display")?ye.display:null;D.style.display=oe==null||typeof oe=="boolean"?"":(""+oe).trim()}}catch(Ie){Ft(X,X.return,Ie)}}}else if(i.tag===6){if(o===null){X=i;try{X.stateNode.nodeValue=m?"":X.memoizedProps}catch(Ie){Ft(X,X.return,Ie)}}}else if(i.tag===18){if(o===null){X=i;try{var ce=X.stateNode;m?qv(ce,!0):qv(X.stateNode,!1)}catch(Ie){Ft(X,X.return,Ie)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=n.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,gu(n,o))));break;case 19:Ss(i,n),js(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,gu(n,c)));break;case 30:break;case 21:break;default:Ss(i,n),js(n)}}function js(n){var i=n.flags;if(i&2){try{for(var o,c=n.return;c!==null;){if($b(c)){o=c;break}c=c.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var m=o.stateNode,p=sg(n);mu(n,p,m);break;case 5:var w=o.stateNode;o.flags&32&&(Es(w,""),o.flags&=-33);var D=sg(n);mu(n,D,w);break;case 3:case 4:var X=o.stateNode.containerInfo,ie=sg(n);ng(n,ie,X);break;default:throw Error(s(161))}}catch(fe){Ft(n,n.return,fe)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function nv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;nv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Na(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Wb(n,i.alternate,i),i=i.sibling}function pA(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:oi(4,i,i.return),pA(i);break;case 1:Kn(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&qb(i,i.return,o),pA(i);break;case 27:ic(i.stateNode);case 26:case 5:Kn(i,i.return),pA(i);break;case 22:i.memoizedState===null&&pA(i);break;case 30:pA(i);break;default:pA(i)}n=n.sibling}}function Sa(n,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,m=n,p=i,w=p.flags;switch(p.tag){case 0:case 11:case 15:Sa(m,p,o),Xl(4,p);break;case 1:if(Sa(m,p,o),c=p,m=c.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(ie){Ft(c,c.return,ie)}if(c=p,m=c.updateQueue,m!==null){var D=c.stateNode;try{var X=m.shared.hiddenCallbacks;if(X!==null)for(m.shared.hiddenCallbacks=null,m=0;m<X.length;m++)Dy(X[m],D)}catch(ie){Ft(c,c.return,ie)}}o&&w&64&&Gb(p),Jl(p,p.return);break;case 27:Xb(p);case 26:case 5:Sa(m,p,o),o&&c===null&&w&4&&Yb(p),Jl(p,p.return);break;case 12:Sa(m,p,o);break;case 31:Sa(m,p,o),o&&w&4&&tv(m,p);break;case 13:Sa(m,p,o),o&&w&4&&rv(m,p);break;case 22:p.memoizedState===null&&Sa(m,p,o),Jl(p,p.return);break;case 30:break;default:Sa(m,p,o)}i=i.sibling}}function ig(n,i){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Rl(o))}function Ag(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Rl(n))}function Bn(n,i,o,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)av(n,i,o,c),i=i.sibling}function av(n,i,o,c){var m=i.flags;switch(i.tag){case 0:case 11:case 15:Bn(n,i,o,c),m&2048&&Xl(9,i);break;case 1:Bn(n,i,o,c);break;case 3:Bn(n,i,o,c),m&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Rl(n)));break;case 12:if(m&2048){Bn(n,i,o,c),n=i.stateNode;try{var p=i.memoizedProps,w=p.id,D=p.onPostCommit;typeof D=="function"&&D(w,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(X){Ft(i,i.return,X)}}else Bn(n,i,o,c);break;case 31:Bn(n,i,o,c);break;case 13:Bn(n,i,o,c);break;case 23:break;case 22:p=i.stateNode,w=i.alternate,i.memoizedState!==null?p._visibility&2?Bn(n,i,o,c):Wl(n,i):p._visibility&2?Bn(n,i,o,c):(p._visibility|=2,yo(n,i,o,c,(i.subtreeFlags&10256)!==0||!1)),m&2048&&ig(w,i);break;case 24:Bn(n,i,o,c),m&2048&&Ag(i.alternate,i);break;default:Bn(n,i,o,c)}}function yo(n,i,o,c,m){for(m=m&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var p=n,w=i,D=o,X=c,ie=w.flags;switch(w.tag){case 0:case 11:case 15:yo(p,w,D,X,m),Xl(8,w);break;case 23:break;case 22:var fe=w.stateNode;w.memoizedState!==null?fe._visibility&2?yo(p,w,D,X,m):Wl(p,w):(fe._visibility|=2,yo(p,w,D,X,m)),m&&ie&2048&&ig(w.alternate,w);break;case 24:yo(p,w,D,X,m),m&&ie&2048&&Ag(w.alternate,w);break;default:yo(p,w,D,X,m)}i=i.sibling}}function Wl(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=n,c=i,m=c.flags;switch(c.tag){case 22:Wl(o,c),m&2048&&ig(c.alternate,c);break;case 24:Wl(o,c),m&2048&&Ag(c.alternate,c);break;default:Wl(o,c)}i=i.sibling}}var Zl=8192;function bo(n,i,o){if(n.subtreeFlags&Zl)for(n=n.child;n!==null;)iv(n,i,o),n=n.sibling}function iv(n,i,o){switch(n.tag){case 26:bo(n,i,o),n.flags&Zl&&n.memoizedState!==null&&Kj(o,wn,n.memoizedState,n.memoizedProps);break;case 5:bo(n,i,o);break;case 3:case 4:var c=wn;wn=Tu(n.stateNode.containerInfo),bo(n,i,o),wn=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=Zl,Zl=16777216,bo(n,i,o),Zl=c):bo(n,i,o));break;default:bo(n,i,o)}}function Av(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function ec(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];Lr=c,lv(c,n)}Av(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)ov(n),n=n.sibling}function ov(n){switch(n.tag){case 0:case 11:case 15:ec(n),n.flags&2048&&oi(9,n,n.return);break;case 3:ec(n);break;case 12:ec(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,pu(n)):ec(n);break;default:ec(n)}}function pu(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];Lr=c,lv(c,n)}Av(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:oi(8,i,i.return),pu(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,pu(i));break;default:pu(i)}n=n.sibling}}function lv(n,i){for(;Lr!==null;){var o=Lr;switch(o.tag){case 0:case 11:case 15:oi(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Rl(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,Lr=c;else e:for(o=n;Lr!==null;){c=Lr;var m=c.sibling,p=c.return;if(Zb(c),c===o){Lr=null;break e}if(m!==null){m.return=p,Lr=m;break e}Lr=p}}}var ij={getCacheForType:function(n){var i=Yr(vr),o=i.data.get(n);return o===void 0&&(o=n(),i.data.set(n,o)),o},cacheSignal:function(){return Yr(vr).controller.signal}},Aj=typeof WeakMap=="function"?WeakMap:Map,jt=0,Ot=null,ct=null,ht=0,Qt=0,Os=null,li=!1,vo=!1,og=!1,ja=0,lr=0,ci=0,xA=0,lg=0,Ps=0,wo=0,tc=null,_s=null,cg=!1,xu=0,cv=0,yu=1/0,bu=null,di=null,Qr=0,ui=null,Bo=null,_a=0,dg=0,ug=null,dv=null,rc=0,hg=null;function Vs(){return(jt&2)!==0&&ht!==0?ht&-ht:M.T!==null?yg():Va()}function uv(){if(Ps===0)if((ht&536870912)===0||yt){var n=ws;ws<<=1,(ws&3932160)===0&&(ws=262144),Ps=n}else Ps=536870912;return n=Ls.current,n!==null&&(n.flags|=32),Ps}function Ts(n,i,o){(n===Ot&&(Qt===2||Qt===9)||n.cancelPendingCommit!==null)&&(Co(n,0),hi(n,ht,Ps,!1)),Fn(n,o),((jt&2)===0||n!==Ot)&&(n===Ot&&((jt&2)===0&&(xA|=o),lr===4&&hi(n,ht,Ps,!1)),Gn(n))}function hv(n,i,o){if((jt&6)!==0)throw Error(s(327));var c=!o&&(i&127)===0&&(i&n.expiredLanes)===0||Kr(n,i),m=c?cj(n,i):mg(n,i,!0),p=c;do{if(m===0){vo&&!c&&hi(n,i,0,!1);break}else{if(o=n.current.alternate,p&&!oj(o)){m=mg(n,i,!1),p=!1;continue}if(m===2){if(p=i,n.errorRecoveryDisabledLanes&p)var w=0;else w=n.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){i=w;e:{var D=n;m=tc;var X=D.current.memoizedState.isDehydrated;if(X&&(Co(D,w).flags|=256),w=mg(D,w,!1),w!==2){if(og&&!X){D.errorRecoveryDisabledLanes|=p,xA|=p,m=4;break e}p=_s,_s=m,p!==null&&(_s===null?_s=p:_s.push.apply(_s,p))}m=w}if(p=!1,m!==2)continue}}if(m===1){Co(n,0),hi(n,i,0,!0);break}e:{switch(c=n,p=m,p){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:hi(c,i,Ps,!li);break e;case 2:_s=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(m=xu+300-zt(),10<m)){if(hi(c,i,Ps,!li),qs(c,0,!0)!==0)break e;_a=i,c.timeoutHandle=zv(fv.bind(null,c,o,_s,bu,cg,i,Ps,xA,wo,li,p,"Throttled",-0,0),m);break e}fv(c,o,_s,bu,cg,i,Ps,xA,wo,li,p,null,-0,0)}}break}while(!0);Gn(n)}function fv(n,i,o,c,m,p,w,D,X,ie,fe,ye,oe,ce){if(n.timeoutHandle=-1,ye=i.subtreeFlags,ye&8192||(ye&16785408)===16785408){ye={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:gn},iv(i,p,ye);var Ie=(p&62914560)===p?xu-zt():(p&4194048)===p?cv-zt():0;if(Ie=Gj(ye,Ie),Ie!==null){_a=p,n.cancelPendingCommit=Ie(wv.bind(null,n,i,p,o,c,m,w,D,X,fe,ye,null,oe,ce)),hi(n,p,w,!ie);return}}wv(n,i,p,o,c,m,w,D,X)}function oj(n){for(var i=n;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var m=o[c],p=m.getSnapshot;m=m.value;try{if(!Rs(p(),m))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function hi(n,i,o,c){i&=~lg,i&=~xA,n.suspendedLanes|=i,n.pingedLanes&=~i,c&&(n.warmLanes|=i),c=n.expirationTimes;for(var m=i;0<m;){var p=31-Ve(m),w=1<<p;c[p]=-1,m&=~w}o!==0&&da(n,o,i)}function vu(){return(jt&6)===0?(sc(0),!1):!0}function fg(){if(ct!==null){if(Qt===0)var n=ct.return;else n=ct,xa=lA=null,Tm(n),fo=null,Ll=0,n=ct;for(;n!==null;)Kb(n.alternate,n),n=n.return;ct=null}}function Co(n,i){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,jj(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),_a=0,fg(),Ot=n,ct=o=ga(n.current,null),ht=i,Qt=0,Os=null,li=!1,vo=Kr(n,i),og=!1,wo=Ps=lg=xA=ci=lr=0,_s=tc=null,cg=!1,(i&8)!==0&&(i|=i&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=i;0<c;){var m=31-Ve(c),p=1<<m;i|=n[m],c&=~p}return ja=i,Pd(),o}function mv(n,i){at=null,M.H=ql,i===ho||i===Xd?(i=Uy(),Qt=3):i===xm?(i=Uy(),Qt=4):Qt=i===Gm?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Os=i,ct===null&&(lr=1,cu(n,Zs(i,n.current)))}function gv(){var n=Ls.current;return n===null?!0:(ht&4194048)===ht?sn===null:(ht&62914560)===ht||(ht&536870912)!==0?n===sn:!1}function pv(){var n=M.H;return M.H=ql,n===null?ql:n}function xv(){var n=M.A;return M.A=ij,n}function wu(){lr=4,li||(ht&4194048)!==ht&&Ls.current!==null||(vo=!0),(ci&134217727)===0&&(xA&134217727)===0||Ot===null||hi(Ot,ht,Ps,!1)}function mg(n,i,o){var c=jt;jt|=2;var m=pv(),p=xv();(Ot!==n||ht!==i)&&(bu=null,Co(n,i)),i=!1;var w=lr;e:do try{if(Qt!==0&&ct!==null){var D=ct,X=Os;switch(Qt){case 8:fg(),w=6;break e;case 3:case 2:case 9:case 6:Ls.current===null&&(i=!0);var ie=Qt;if(Qt=0,Os=null,Eo(n,D,X,ie),o&&vo){w=0;break e}break;default:ie=Qt,Qt=0,Os=null,Eo(n,D,X,ie)}}lj(),w=lr;break}catch(fe){mv(n,fe)}while(!0);return i&&n.shellSuspendCounter++,xa=lA=null,jt=c,M.H=m,M.A=p,ct===null&&(Ot=null,ht=0,Pd()),w}function lj(){for(;ct!==null;)yv(ct)}function cj(n,i){var o=jt;jt|=2;var c=pv(),m=xv();Ot!==n||ht!==i?(bu=null,yu=zt()+500,Co(n,i)):vo=Kr(n,i);e:do try{if(Qt!==0&&ct!==null){i=ct;var p=Os;t:switch(Qt){case 1:Qt=0,Os=null,Eo(n,i,p,1);break;case 2:case 9:if(_y(p)){Qt=0,Os=null,bv(i);break}i=function(){Qt!==2&&Qt!==9||Ot!==n||(Qt=7),Gn(n)},p.then(i,i);break e;case 3:Qt=7;break e;case 4:Qt=5;break e;case 7:_y(p)?(Qt=0,Os=null,bv(i)):(Qt=0,Os=null,Eo(n,i,p,7));break;case 5:var w=null;switch(ct.tag){case 26:w=ct.memoizedState;case 5:case 27:var D=ct;if(w?aw(w):D.stateNode.complete){Qt=0,Os=null;var X=D.sibling;if(X!==null)ct=X;else{var ie=D.return;ie!==null?(ct=ie,Bu(ie)):ct=null}break t}}Qt=0,Os=null,Eo(n,i,p,5);break;case 6:Qt=0,Os=null,Eo(n,i,p,6);break;case 8:fg(),lr=6;break e;default:throw Error(s(462))}}dj();break}catch(fe){mv(n,fe)}while(!0);return xa=lA=null,M.H=c,M.A=m,jt=o,ct!==null?0:(Ot=null,ht=0,Pd(),lr)}function dj(){for(;ct!==null&&!Xt();)yv(ct)}function yv(n){var i=Vb(n.alternate,n,ja);n.memoizedProps=n.pendingProps,i===null?Bu(n):ct=i}function bv(n){var i=n,o=i.alternate;switch(i.tag){case 15:case 0:i=Rb(o,i,i.pendingProps,i.type,void 0,ht);break;case 11:i=Rb(o,i,i.pendingProps,i.type.render,i.ref,ht);break;case 5:Tm(i);default:Kb(o,i),i=ct=xy(i,ja),i=Vb(o,i,ja)}n.memoizedProps=n.pendingProps,i===null?Bu(n):ct=i}function Eo(n,i,o,c){xa=lA=null,Tm(i),fo=null,Ll=0;var m=i.return;try{if(ZS(n,m,i,o,ht)){lr=1,cu(n,Zs(o,n.current)),ct=null;return}}catch(p){if(m!==null)throw ct=m,p;lr=1,cu(n,Zs(o,n.current)),ct=null;return}i.flags&32768?(yt||c===1?n=!0:vo||(ht&536870912)!==0?n=!1:(li=n=!0,(c===2||c===9||c===3||c===6)&&(c=Ls.current,c!==null&&c.tag===13&&(c.flags|=16384))),vv(i,n)):Bu(i)}function Bu(n){var i=n;do{if((i.flags&32768)!==0){vv(i,li);return}n=i.return;var o=rj(i.alternate,i,ja);if(o!==null){ct=o;return}if(i=i.sibling,i!==null){ct=i;return}ct=i=n}while(i!==null);lr===0&&(lr=5)}function vv(n,i){do{var o=sj(n.alternate,n);if(o!==null){o.flags&=32767,ct=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(n=n.sibling,n!==null)){ct=n;return}ct=n=o}while(n!==null);lr=6,ct=null}function wv(n,i,o,c,m,p,w,D,X){n.cancelPendingCommit=null;do Cu();while(Qr!==0);if((jt&6)!==0)throw Error(s(327));if(i!==null){if(i===n.current)throw Error(s(177));if(p=i.lanes|i.childLanes,p|=sm,yl(n,o,p,w,D,X),n===Ot&&(ct=Ot=null,ht=0),Bo=i,ui=n,_a=o,dg=p,ug=m,dv=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,mj(wt,function(){return Sv(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=M.T,M.T=null,m=F.p,F.p=2,w=jt,jt|=4;try{nj(n,i,o)}finally{jt=w,F.p=m,M.T=c}}Qr=1,Bv(),Cv(),Ev()}}function Bv(){if(Qr===1){Qr=0;var n=ui,i=Bo,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=M.T,M.T=null;var c=F.p;F.p=2;var m=jt;jt|=4;try{sv(i,n);var p=Sg,w=ly(n.containerInfo),D=p.focusedElem,X=p.selectionRange;if(w!==D&&D&&D.ownerDocument&&oy(D.ownerDocument.documentElement,D)){if(X!==null&&Wf(D)){var ie=X.start,fe=X.end;if(fe===void 0&&(fe=ie),"selectionStart"in D)D.selectionStart=ie,D.selectionEnd=Math.min(fe,D.value.length);else{var ye=D.ownerDocument||document,oe=ye&&ye.defaultView||window;if(oe.getSelection){var ce=oe.getSelection(),Ie=D.textContent.length,Ke=Math.min(X.start,Ie),Mt=X.end===void 0?Ke:Math.min(X.end,Ie);!ce.extend&&Ke>Mt&&(w=Mt,Mt=Ke,Ke=w);var re=Ay(D,Ke),ee=Ay(D,Mt);if(re&&ee&&(ce.rangeCount!==1||ce.anchorNode!==re.node||ce.anchorOffset!==re.offset||ce.focusNode!==ee.node||ce.focusOffset!==ee.offset)){var ae=ye.createRange();ae.setStart(re.node,re.offset),ce.removeAllRanges(),Ke>Mt?(ce.addRange(ae),ce.extend(ee.node,ee.offset)):(ae.setEnd(ee.node,ee.offset),ce.addRange(ae))}}}}for(ye=[],ce=D;ce=ce.parentNode;)ce.nodeType===1&&ye.push({element:ce,left:ce.scrollLeft,top:ce.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<ye.length;D++){var xe=ye[D];xe.element.scrollLeft=xe.left,xe.element.scrollTop=xe.top}}ku=!!Ng,Sg=Ng=null}finally{jt=m,F.p=c,M.T=o}}n.current=i,Qr=2}}function Cv(){if(Qr===2){Qr=0;var n=ui,i=Bo,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=M.T,M.T=null;var c=F.p;F.p=2;var m=jt;jt|=4;try{Wb(n,i.alternate,i)}finally{jt=m,F.p=c,M.T=o}}Qr=3}}function Ev(){if(Qr===4||Qr===3){Qr=0,_r();var n=ui,i=Bo,o=_a,c=dv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Qr=5:(Qr=0,Bo=ui=null,Nv(n,n.pendingLanes));var m=n.pendingLanes;if(m===0&&(di=null),mn(o),i=i.stateNode,We&&typeof We.onCommitFiberRoot=="function")try{We.onCommitFiberRoot(Fe,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=M.T,m=F.p,F.p=2,M.T=null;try{for(var p=n.onRecoverableError,w=0;w<c.length;w++){var D=c[w];p(D.value,{componentStack:D.stack})}}finally{M.T=i,F.p=m}}(_a&3)!==0&&Cu(),Gn(n),m=n.pendingLanes,(o&261930)!==0&&(m&42)!==0?n===hg?rc++:(rc=0,hg=n):rc=0,sc(0)}}function Nv(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Rl(i)))}function Cu(){return Bv(),Cv(),Ev(),Sv()}function Sv(){if(Qr!==5)return!1;var n=ui,i=dg;dg=0;var o=mn(_a),c=M.T,m=F.p;try{F.p=32>o?32:o,M.T=null,o=ug,ug=null;var p=ui,w=_a;if(Qr=0,Bo=ui=null,_a=0,(jt&6)!==0)throw Error(s(331));var D=jt;if(jt|=4,ov(p.current),av(p,p.current,w,o),jt=D,sc(0,!1),We&&typeof We.onPostCommitFiberRoot=="function")try{We.onPostCommitFiberRoot(Fe,p)}catch{}return!0}finally{F.p=m,M.T=c,Nv(n,i)}}function jv(n,i,o){i=Zs(o,i),i=Km(n.stateNode,i,2),n=ai(n,i,2),n!==null&&(Fn(n,2),Gn(n))}function Ft(n,i,o){if(n.tag===3)jv(n,n,o);else for(;i!==null;){if(i.tag===3){jv(i,n,o);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(di===null||!di.has(c))){n=Zs(o,n),o=_b(2),c=ai(i,o,2),c!==null&&(Tb(o,c,i,n),Fn(c,2),Gn(c));break}}i=i.return}}function gg(n,i,o){var c=n.pingCache;if(c===null){c=n.pingCache=new Aj;var m=new Set;c.set(i,m)}else m=c.get(i),m===void 0&&(m=new Set,c.set(i,m));m.has(o)||(og=!0,m.add(o),n=uj.bind(null,n,i,o),i.then(n,n))}function uj(n,i,o){var c=n.pingCache;c!==null&&c.delete(i),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,Ot===n&&(ht&o)===o&&(lr===4||lr===3&&(ht&62914560)===ht&&300>zt()-xu?(jt&2)===0&&Co(n,0):lg|=o,wo===ht&&(wo=0)),Gn(n)}function _v(n,i){i===0&&(i=ca()),n=iA(n,i),n!==null&&(Fn(n,i),Gn(n))}function hj(n){var i=n.memoizedState,o=0;i!==null&&(o=i.retryLane),_v(n,o)}function fj(n,i){var o=0;switch(n.tag){case 31:case 13:var c=n.stateNode,m=n.memoizedState;m!==null&&(o=m.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(i),_v(n,o)}function mj(n,i){return Le(n,i)}var Eu=null,No=null,pg=!1,Nu=!1,xg=!1,fi=0;function Gn(n){n!==No&&n.next===null&&(No===null?Eu=No=n:No=No.next=n),Nu=!0,pg||(pg=!0,pj())}function sc(n,i){if(!xg&&Nu){xg=!0;do for(var o=!1,c=Eu;c!==null;){if(n!==0){var m=c.pendingLanes;if(m===0)var p=0;else{var w=c.suspendedLanes,D=c.pingedLanes;p=(1<<31-Ve(42|n)+1)-1,p&=m&~(w&~D),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,Fv(c,p))}else p=ht,p=qs(c,c===Ot?p:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(p&3)===0||Kr(c,p)||(o=!0,Fv(c,p));c=c.next}while(o);xg=!1}}function gj(){Tv()}function Tv(){Nu=pg=!1;var n=0;fi!==0&&Sj()&&(n=fi);for(var i=zt(),o=null,c=Eu;c!==null;){var m=c.next,p=Uv(c,i);p===0?(c.next=null,o===null?Eu=m:o.next=m,m===null&&(No=o)):(o=c,(n!==0||(p&3)!==0)&&(Nu=!0)),c=m}Qr!==0&&Qr!==5||sc(n),fi!==0&&(fi=0)}function Uv(n,i){for(var o=n.suspendedLanes,c=n.pingedLanes,m=n.expirationTimes,p=n.pendingLanes&-62914561;0<p;){var w=31-Ve(p),D=1<<w,X=m[w];X===-1?((D&o)===0||(D&c)!==0)&&(m[w]=xl(D,i)):X<=i&&(n.expiredLanes|=D),p&=~D}if(i=Ot,o=ht,o=qs(n,n===i?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,o===0||n===i&&(Qt===2||Qt===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&je(c),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Kr(n,o)){if(i=o&-o,i===n.callbackPriority)return i;switch(c!==null&&je(c),mn(o)){case 2:case 8:o=Rr;break;case 32:o=wt;break;case 268435456:o=vs;break;default:o=wt}return c=Qv.bind(null,n),o=Le(o,c),n.callbackPriority=i,n.callbackNode=o,i}return c!==null&&c!==null&&je(c),n.callbackPriority=2,n.callbackNode=null,2}function Qv(n,i){if(Qr!==0&&Qr!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Cu()&&n.callbackNode!==o)return null;var c=ht;return c=qs(n,n===Ot?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(hv(n,c,i),Uv(n,zt()),n.callbackNode!=null&&n.callbackNode===o?Qv.bind(null,n):null)}function Fv(n,i){if(Cu())return null;hv(n,i,!0)}function pj(){_j(function(){(jt&6)!==0?Le(It,gj):Tv()})}function yg(){if(fi===0){var n=co;n===0&&(n=ns,ns<<=1,(ns&261888)===0&&(ns=256)),fi=n}return fi}function Iv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:$A(""+n)}function Dv(n,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,n.id&&o.setAttribute("form",n.id),i.parentNode.insertBefore(o,i),n=new FormData(n),o.parentNode.removeChild(o),n}function xj(n,i,o,c,m){if(i==="submit"&&o&&o.stateNode===m){var p=Iv((m[dr]||null).action),w=c.submitter;w&&(i=(i=w[dr]||null)?Iv(i.formAction):w.getAttribute("formAction"),i!==null&&(p=i,w=null));var D=new Ln("action","action",null,c,m);n.push({event:D,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(fi!==0){var X=w?Dv(m,w):new FormData(m);Lm(o,{pending:!0,data:X,method:m.method,action:p},null,X)}}else typeof p=="function"&&(D.preventDefault(),X=w?Dv(m,w):new FormData(m),Lm(o,{pending:!0,data:X,method:m.method,action:p},p,X))},currentTarget:m}]})}}for(var bg=0;bg<rm.length;bg++){var vg=rm[bg],yj=vg.toLowerCase(),bj=vg[0].toUpperCase()+vg.slice(1);vn(yj,"on"+bj)}vn(uy,"onAnimationEnd"),vn(hy,"onAnimationIteration"),vn(fy,"onAnimationStart"),vn("dblclick","onDoubleClick"),vn("focusin","onFocus"),vn("focusout","onBlur"),vn(kS,"onTransitionRun"),vn(RS,"onTransitionStart"),vn(MS,"onTransitionCancel"),vn(my,"onTransitionEnd"),gs("onMouseEnter",["mouseout","mouseover"]),gs("onMouseLeave",["mouseout","mouseover"]),gs("onPointerEnter",["pointerout","pointerover"]),gs("onPointerLeave",["pointerout","pointerover"]),ms("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ms("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ms("onBeforeInput",["compositionend","keypress","textInput","paste"]),ms("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ms("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ms("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vj=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(nc));function kv(n,i){i=(i&4)!==0;for(var o=0;o<n.length;o++){var c=n[o],m=c.event;c=c.listeners;e:{var p=void 0;if(i)for(var w=c.length-1;0<=w;w--){var D=c[w],X=D.instance,ie=D.currentTarget;if(D=D.listener,X!==p&&m.isPropagationStopped())break e;p=D,m.currentTarget=ie;try{p(m)}catch(fe){Od(fe)}m.currentTarget=null,p=X}else for(w=0;w<c.length;w++){if(D=c[w],X=D.instance,ie=D.currentTarget,D=D.listener,X!==p&&m.isPropagationStopped())break e;p=D,m.currentTarget=ie;try{p(m)}catch(fe){Od(fe)}m.currentTarget=null,p=X}}}}function dt(n,i){var o=i[pe];o===void 0&&(o=i[pe]=new Set);var c=n+"__bubble";o.has(c)||(Rv(i,n,2,!1),o.add(c))}function wg(n,i,o){var c=0;i&&(c|=4),Rv(o,n,c,i)}var Su="_reactListening"+Math.random().toString(36).slice(2);function Bg(n){if(!n[Su]){n[Su]=!0,fs.forEach(function(o){o!=="selectionchange"&&(vj.has(o)||wg(o,!1,n),wg(o,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Su]||(i[Su]=!0,wg("selectionchange",!1,i))}}function Rv(n,i,o,c){switch(uw(i)){case 2:var m=$j;break;case 8:m=Xj;break;default:m=Mg}o=m.bind(null,i,o,n),m=void 0,!Wi||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(m=!0),c?m!==void 0?n.addEventListener(i,o,{capture:!0,passive:m}):n.addEventListener(i,o,!0):m!==void 0?n.addEventListener(i,o,{passive:m}):n.addEventListener(i,o,!1)}function Cg(n,i,o,c,m){var p=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var D=c.stateNode.containerInfo;if(D===m)break;if(w===4)for(w=c.return;w!==null;){var X=w.tag;if((X===3||X===4)&&w.stateNode.containerInfo===m)return;w=w.return}for(;D!==null;){if(w=Tr(D),w===null)return;if(X=w.tag,X===5||X===6||X===26||X===27){c=p=w;continue e}D=D.parentNode}}c=c.return}$a(function(){var ie=p,fe=$s(o),ye=[];e:{var oe=gy.get(n);if(oe!==void 0){var ce=Ln,Ie=n;switch(n){case"keypress":if(eA(o)===0)break e;case"keydown":case"keyup":ce=Md;break;case"focusin":Ie="focus",ce=rA;break;case"focusout":Ie="blur",ce=rA;break;case"beforeblur":case"afterblur":ce=rA;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=_l;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=_d;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=b;break;case uy:case hy:case fy:ce=Ud;break;case my:ce=H;break;case"scroll":case"scrollend":ce=jl;break;case"wheel":ce=le;break;case"copy":case"cut":case"paste":ce=Qd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=ma;break;case"toggle":case"beforetoggle":ce=nt}var Ke=(i&4)!==0,Mt=!Ke&&(n==="scroll"||n==="scrollend"),re=Ke?oe!==null?oe+"Capture":null:oe;Ke=[];for(var ee=ie,ae;ee!==null;){var xe=ee;if(ae=xe.stateNode,xe=xe.tag,xe!==5&&xe!==26&&xe!==27||ae===null||re===null||(xe=pn(ee,re),xe!=null&&Ke.push(ac(ee,xe,ae))),Mt)break;ee=ee.return}0<Ke.length&&(oe=new ce(oe,Ie,null,o,fe),ye.push({event:oe,listeners:Ke}))}}if((i&7)===0){e:{if(oe=n==="mouseover"||n==="pointerover",ce=n==="mouseout"||n==="pointerout",oe&&o!==El&&(Ie=o.relatedTarget||o.fromElement)&&(Tr(Ie)||Ie[Bs]))break e;if((ce||oe)&&(oe=fe.window===fe?fe:(oe=fe.ownerDocument)?oe.defaultView||oe.parentWindow:window,ce?(Ie=o.relatedTarget||o.toElement,ce=ie,Ie=Ie?Tr(Ie):null,Ie!==null&&(Mt=l(Ie),Ke=Ie.tag,Ie!==Mt||Ke!==5&&Ke!==27&&Ke!==6)&&(Ie=null)):(ce=null,Ie=ie),ce!==Ie)){if(Ke=_l,xe="onMouseLeave",re="onMouseEnter",ee="mouse",(n==="pointerout"||n==="pointerover")&&(Ke=ma,xe="onPointerLeave",re="onPointerEnter",ee="pointer"),Mt=ce==null?oe:Ar(ce),ae=Ie==null?oe:Ar(Ie),oe=new Ke(xe,ee+"leave",ce,o,fe),oe.target=Mt,oe.relatedTarget=ae,xe=null,Tr(fe)===ie&&(Ke=new Ke(re,ee+"enter",Ie,o,fe),Ke.target=ae,Ke.relatedTarget=Mt,xe=Ke),Mt=xe,ce&&Ie)t:{for(Ke=wj,re=ce,ee=Ie,ae=0,xe=re;xe;xe=Ke(xe))ae++;xe=0;for(var Oe=ee;Oe;Oe=Ke(Oe))xe++;for(;0<ae-xe;)re=Ke(re),ae--;for(;0<xe-ae;)ee=Ke(ee),xe--;for(;ae--;){if(re===ee||ee!==null&&re===ee.alternate){Ke=re;break t}re=Ke(re),ee=Ke(ee)}Ke=null}else Ke=null;ce!==null&&Mv(ye,oe,ce,Ke,!1),Ie!==null&&Mt!==null&&Mv(ye,Mt,Ie,Ke,!0)}}e:{if(oe=ie?Ar(ie):window,ce=oe.nodeName&&oe.nodeName.toLowerCase(),ce==="select"||ce==="input"&&oe.type==="file")var Bt=ty;else if(Z0(oe))if(ry)Bt=FS;else{Bt=US;var ke=TS}else ce=oe.nodeName,!ce||ce.toLowerCase()!=="input"||oe.type!=="checkbox"&&oe.type!=="radio"?ie&&YA(ie.elementType)&&(Bt=ty):Bt=QS;if(Bt&&(Bt=Bt(n,ie))){ey(ye,Bt,o,fe);break e}ke&&ke(n,oe,ie),n==="focusout"&&ie&&oe.type==="number"&&ie.memoizedProps.value!=null&&wl(oe,"number",oe.value)}switch(ke=ie?Ar(ie):window,n){case"focusin":(Z0(ke)||ke.contentEditable==="true")&&(ro=ke,Zf=ie,Il=null);break;case"focusout":Il=Zf=ro=null;break;case"mousedown":em=!0;break;case"contextmenu":case"mouseup":case"dragend":em=!1,cy(ye,o,fe);break;case"selectionchange":if(DS)break;case"keydown":case"keyup":cy(ye,o,fe)}var it;if(St)e:{switch(n){case"compositionstart":var ft="onCompositionStart";break e;case"compositionend":ft="onCompositionEnd";break e;case"compositionupdate":ft="onCompositionUpdate";break e}ft=void 0}else to?sA(n,o)&&(ft="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(ft="onCompositionStart");ft&&(Pn&&o.locale!=="ko"&&(to||ft!=="onCompositionStart"?ft==="onCompositionEnd"&&to&&(it=Sl()):(Mn=fe,Nl="value"in Mn?Mn.value:Mn.textContent,to=!0)),ke=ju(ie,ft),0<ke.length&&(ft=new On(ft,n,null,o,fe),ye.push({event:ft,listeners:ke}),it?ft.data=it:(it=eo(o),it!==null&&(ft.data=it)))),(it=Js?NS(n,o):SS(n,o))&&(ft=ju(ie,"onBeforeInput"),0<ft.length&&(ke=new On("onBeforeInput","beforeinput",null,o,fe),ye.push({event:ke,listeners:ft}),ke.data=it)),xj(ye,n,ie,o,fe)}kv(ye,i)})}function ac(n,i,o){return{instance:n,listener:i,currentTarget:o}}function ju(n,i){for(var o=i+"Capture",c=[];n!==null;){var m=n,p=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||p===null||(m=pn(n,o),m!=null&&c.unshift(ac(n,m,p)),m=pn(n,i),m!=null&&c.push(ac(n,m,p))),n.tag===3)return c;n=n.return}return[]}function wj(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Mv(n,i,o,c,m){for(var p=i._reactName,w=[];o!==null&&o!==c;){var D=o,X=D.alternate,ie=D.stateNode;if(D=D.tag,X!==null&&X===c)break;D!==5&&D!==26&&D!==27||ie===null||(X=ie,m?(ie=pn(o,p),ie!=null&&w.unshift(ac(o,ie,X))):m||(ie=pn(o,p),ie!=null&&w.push(ac(o,ie,X)))),o=o.return}w.length!==0&&n.push({event:i,listeners:w})}var Bj=/\r\n?/g,Cj=/\u0000|\uFFFD/g;function Lv(n){return(typeof n=="string"?n:""+n).replace(Bj,`
`).replace(Cj,"")}function Hv(n,i){return i=Lv(i),Lv(n)===i}function Rt(n,i,o,c,m,p){switch(o){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||Es(n,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&Es(n,""+c);break;case"className":ks(n,"class",c);break;case"tabIndex":ks(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":ks(n,o,c);break;case"style":Cl(n,c,p);break;case"data":if(i!=="object"){ks(n,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||o!=="href")){n.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=$A(""+c),n.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(i!=="input"&&Rt(n,i,"name",m.name,m,null),Rt(n,i,"formEncType",m.formEncType,m,null),Rt(n,i,"formMethod",m.formMethod,m,null),Rt(n,i,"formTarget",m.formTarget,m,null)):(Rt(n,i,"encType",m.encType,m,null),Rt(n,i,"method",m.method,m,null),Rt(n,i,"target",m.target,m,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=$A(""+c),n.setAttribute(o,c);break;case"onClick":c!=null&&(n.onclick=gn);break;case"onScroll":c!=null&&dt("scroll",n);break;case"onScrollEnd":c!=null&&dt("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(o=c.__html,o!=null){if(m.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}o=$A(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""+c):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":c===!0?n.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,c):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(o,c):n.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(o):n.setAttribute(o,c);break;case"popover":dt("beforetoggle",n),dt("toggle",n),GA(n,"popover",c);break;case"xlinkActuate":br(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":br(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":br(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":br(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":br(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":br(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":br(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":br(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":br(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":GA(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=jd.get(o)||o,GA(n,o,c))}}function Eg(n,i,o,c,m,p){switch(o){case"style":Cl(n,c,p);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(o=c.__html,o!=null){if(m.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"children":typeof c=="string"?Es(n,c):(typeof c=="number"||typeof c=="bigint")&&Es(n,""+c);break;case"onScroll":c!=null&&dt("scroll",n);break;case"onScrollEnd":c!=null&&dt("scrollend",n);break;case"onClick":c!=null&&(n.onclick=gn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ur.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),i=o.slice(2,m?o.length-7:void 0),p=n[dr]||null,p=p!=null?p[o]:null,typeof p=="function"&&n.removeEventListener(i,p,m),typeof c=="function")){typeof p!="function"&&p!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(i,c,m);break e}o in n?n[o]=c:c===!0?n.setAttribute(o,""):GA(n,o,c)}}}function Xr(n,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":dt("error",n),dt("load",n);var c=!1,m=!1,p;for(p in o)if(o.hasOwnProperty(p)){var w=o[p];if(w!=null)switch(p){case"src":c=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Rt(n,i,p,w,o,null)}}m&&Rt(n,i,"srcSet",o.srcSet,o,null),c&&Rt(n,i,"src",o.src,o,null);return;case"input":dt("invalid",n);var D=p=w=m=null,X=null,ie=null;for(c in o)if(o.hasOwnProperty(c)){var fe=o[c];if(fe!=null)switch(c){case"name":m=fe;break;case"type":w=fe;break;case"checked":X=fe;break;case"defaultChecked":ie=fe;break;case"value":p=fe;break;case"defaultValue":D=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(s(137,i));break;default:Rt(n,i,c,fe,o,null)}}Ed(n,p,D,X,ie,w,m,!1);return;case"select":dt("invalid",n),c=w=p=null;for(m in o)if(o.hasOwnProperty(m)&&(D=o[m],D!=null))switch(m){case"value":p=D;break;case"defaultValue":w=D;break;case"multiple":c=D;default:Rt(n,i,m,D,o,null)}i=p,o=w,n.multiple=!!c,i!=null?Ka(n,!!c,i,!1):o!=null&&Ka(n,!!c,o,!0);return;case"textarea":dt("invalid",n),p=m=c=null;for(w in o)if(o.hasOwnProperty(w)&&(D=o[w],D!=null))switch(w){case"value":c=D;break;case"defaultValue":m=D;break;case"children":p=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(s(91));break;default:Rt(n,i,w,D,o,null)}Ga(n,c,m,p);return;case"option":for(X in o)o.hasOwnProperty(X)&&(c=o[X],c!=null)&&(X==="selected"?n.selected=c&&typeof c!="function"&&typeof c!="symbol":Rt(n,i,X,c,o,null));return;case"dialog":dt("beforetoggle",n),dt("toggle",n),dt("cancel",n),dt("close",n);break;case"iframe":case"object":dt("load",n);break;case"video":case"audio":for(c=0;c<nc.length;c++)dt(nc[c],n);break;case"image":dt("error",n),dt("load",n);break;case"details":dt("toggle",n);break;case"embed":case"source":case"link":dt("error",n),dt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ie in o)if(o.hasOwnProperty(ie)&&(c=o[ie],c!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Rt(n,i,ie,c,o,null)}return;default:if(YA(i)){for(fe in o)o.hasOwnProperty(fe)&&(c=o[fe],c!==void 0&&Eg(n,i,fe,c,o,void 0));return}}for(D in o)o.hasOwnProperty(D)&&(c=o[D],c!=null&&Rt(n,i,D,c,o,null))}function Ej(n,i,o,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,p=null,w=null,D=null,X=null,ie=null,fe=null;for(ce in o){var ye=o[ce];if(o.hasOwnProperty(ce)&&ye!=null)switch(ce){case"checked":break;case"value":break;case"defaultValue":X=ye;default:c.hasOwnProperty(ce)||Rt(n,i,ce,null,c,ye)}}for(var oe in c){var ce=c[oe];if(ye=o[oe],c.hasOwnProperty(oe)&&(ce!=null||ye!=null))switch(oe){case"type":p=ce;break;case"name":m=ce;break;case"checked":ie=ce;break;case"defaultChecked":fe=ce;break;case"value":w=ce;break;case"defaultValue":D=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(s(137,i));break;default:ce!==ye&&Rt(n,i,oe,ce,c,ye)}}qA(n,w,D,X,ie,fe,p,m);return;case"select":ce=w=D=oe=null;for(p in o)if(X=o[p],o.hasOwnProperty(p)&&X!=null)switch(p){case"value":break;case"multiple":ce=X;default:c.hasOwnProperty(p)||Rt(n,i,p,null,c,X)}for(m in c)if(p=c[m],X=o[m],c.hasOwnProperty(m)&&(p!=null||X!=null))switch(m){case"value":oe=p;break;case"defaultValue":D=p;break;case"multiple":w=p;default:p!==X&&Rt(n,i,m,p,c,X)}i=D,o=w,c=ce,oe!=null?Ka(n,!!o,oe,!1):!!c!=!!o&&(i!=null?Ka(n,!!o,i,!0):Ka(n,!!o,o?[]:"",!1));return;case"textarea":ce=oe=null;for(D in o)if(m=o[D],o.hasOwnProperty(D)&&m!=null&&!c.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:Rt(n,i,D,null,c,m)}for(w in c)if(m=c[w],p=o[w],c.hasOwnProperty(w)&&(m!=null||p!=null))switch(w){case"value":oe=m;break;case"defaultValue":ce=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(s(91));break;default:m!==p&&Rt(n,i,w,m,c,p)}Nd(n,oe,ce);return;case"option":for(var Ie in o)oe=o[Ie],o.hasOwnProperty(Ie)&&oe!=null&&!c.hasOwnProperty(Ie)&&(Ie==="selected"?n.selected=!1:Rt(n,i,Ie,null,c,oe));for(X in c)oe=c[X],ce=o[X],c.hasOwnProperty(X)&&oe!==ce&&(oe!=null||ce!=null)&&(X==="selected"?n.selected=oe&&typeof oe!="function"&&typeof oe!="symbol":Rt(n,i,X,oe,c,ce));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ke in o)oe=o[Ke],o.hasOwnProperty(Ke)&&oe!=null&&!c.hasOwnProperty(Ke)&&Rt(n,i,Ke,null,c,oe);for(ie in c)if(oe=c[ie],ce=o[ie],c.hasOwnProperty(ie)&&oe!==ce&&(oe!=null||ce!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(s(137,i));break;default:Rt(n,i,ie,oe,c,ce)}return;default:if(YA(i)){for(var Mt in o)oe=o[Mt],o.hasOwnProperty(Mt)&&oe!==void 0&&!c.hasOwnProperty(Mt)&&Eg(n,i,Mt,void 0,c,oe);for(fe in c)oe=c[fe],ce=o[fe],!c.hasOwnProperty(fe)||oe===ce||oe===void 0&&ce===void 0||Eg(n,i,fe,oe,c,ce);return}}for(var re in o)oe=o[re],o.hasOwnProperty(re)&&oe!=null&&!c.hasOwnProperty(re)&&Rt(n,i,re,null,c,oe);for(ye in c)oe=c[ye],ce=o[ye],!c.hasOwnProperty(ye)||oe===ce||oe==null&&ce==null||Rt(n,i,ye,oe,c,ce)}function Ov(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Nj(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var m=o[c],p=m.transferSize,w=m.initiatorType,D=m.duration;if(p&&D&&Ov(w)){for(w=0,D=m.responseEnd,c+=1;c<o.length;c++){var X=o[c],ie=X.startTime;if(ie>D)break;var fe=X.transferSize,ye=X.initiatorType;fe&&Ov(ye)&&(X=X.responseEnd,w+=fe*(X<D?1:(D-ie)/(X-ie)))}if(--c,i+=8*(p+w)/(m.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Ng=null,Sg=null;function _u(n){return n.nodeType===9?n:n.ownerDocument}function Pv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Vv(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function jg(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var _g=null;function Sj(){var n=window.event;return n&&n.type==="popstate"?n===_g?!1:(_g=n,!0):(_g=null,!1)}var zv=typeof setTimeout=="function"?setTimeout:void 0,jj=typeof clearTimeout=="function"?clearTimeout:void 0,Kv=typeof Promise=="function"?Promise:void 0,_j=typeof queueMicrotask=="function"?queueMicrotask:typeof Kv<"u"?function(n){return Kv.resolve(null).then(n).catch(Tj)}:zv;function Tj(n){setTimeout(function(){throw n})}function mi(n){return n==="head"}function Gv(n,i){var o=i,c=0;do{var m=o.nextSibling;if(n.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"||o==="/&"){if(c===0){n.removeChild(m),To(i);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")ic(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,ic(o);for(var p=o.firstChild;p;){var w=p.nextSibling,D=p.nodeName;p[Nt]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&p.rel.toLowerCase()==="stylesheet"||o.removeChild(p),p=w}}else o==="body"&&ic(n.ownerDocument.body);o=m}while(o);To(i)}function qv(n,i){var o=n;n=0;do{var c=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=c}while(o)}function Tg(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Tg(o),Jt(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function Uj(n,i,o,c){for(;n.nodeType===1;){var m=o;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[Nt])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(p=n.getAttribute("rel"),p==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(p!==m.rel||n.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||n.getAttribute("title")!==(m.title==null?null:m.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(p=n.getAttribute("src"),(p!==(m.src==null?null:m.src)||n.getAttribute("type")!==(m.type==null?null:m.type)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&p&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var p=m.name==null?null:""+m.name;if(m.type==="hidden"&&n.getAttribute("name")===p)return n}else return n;if(n=nn(n.nextSibling),n===null)break}return null}function Qj(n,i,o){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=nn(n.nextSibling),n===null))return null;return n}function Yv(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=nn(n.nextSibling),n===null))return null;return n}function Ug(n){return n.data==="$?"||n.data==="$~"}function Qg(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function Fj(n,i){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||o.readyState!=="loading")i();else{var c=function(){i(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function nn(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var Fg=null;function $v(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(i===0)return nn(n.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}n=n.nextSibling}return null}function Xv(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return n;i--}else o!=="/$"&&o!=="/&"||i++}n=n.previousSibling}return null}function Jv(n,i,o){switch(i=_u(o),n){case"html":if(n=i.documentElement,!n)throw Error(s(452));return n;case"head":if(n=i.head,!n)throw Error(s(453));return n;case"body":if(n=i.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function ic(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);Jt(n)}var an=new Map,Wv=new Set;function Tu(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Ta=F.d;F.d={f:Ij,r:Dj,D:kj,C:Rj,L:Mj,m:Lj,X:Oj,S:Hj,M:Pj};function Ij(){var n=Ta.f(),i=vu();return n||i}function Dj(n){var i=Xe(n);i!==null&&i.tag===5&&i.type==="form"?mb(i):Ta.r(n)}var So=typeof document>"u"?null:document;function Zv(n,i,o){var c=So;if(c&&typeof i=="string"&&i){var m=Cs(i);m='link[rel="'+n+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),Wv.has(m)||(Wv.add(m),n={rel:n,crossOrigin:o,href:i},c.querySelector(m)===null&&(i=c.createElement("link"),Xr(i,"link",n),Ht(i),c.head.appendChild(i)))}}function kj(n){Ta.D(n),Zv("dns-prefetch",n,null)}function Rj(n,i){Ta.C(n,i),Zv("preconnect",n,i)}function Mj(n,i,o){Ta.L(n,i,o);var c=So;if(c&&n&&i){var m='link[rel="preload"][as="'+Cs(i)+'"]';i==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+Cs(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+Cs(o.imageSizes)+'"]')):m+='[href="'+Cs(n)+'"]';var p=m;switch(i){case"style":p=jo(n);break;case"script":p=_o(n)}an.has(p)||(n=y({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:n,as:i},o),an.set(p,n),c.querySelector(m)!==null||i==="style"&&c.querySelector(Ac(p))||i==="script"&&c.querySelector(oc(p))||(i=c.createElement("link"),Xr(i,"link",n),Ht(i),c.head.appendChild(i)))}}function Lj(n,i){Ta.m(n,i);var o=So;if(o&&n){var c=i&&typeof i.as=="string"?i.as:"script",m='link[rel="modulepreload"][as="'+Cs(c)+'"][href="'+Cs(n)+'"]',p=m;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=_o(n)}if(!an.has(p)&&(n=y({rel:"modulepreload",href:n},i),an.set(p,n),o.querySelector(m)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(oc(p)))return}c=o.createElement("link"),Xr(c,"link",n),Ht(c),o.head.appendChild(c)}}}function Hj(n,i,o){Ta.S(n,i,o);var c=So;if(c&&n){var m=rr(c).hoistableStyles,p=jo(n);i=i||"default";var w=m.get(p);if(!w){var D={loading:0,preload:null};if(w=c.querySelector(Ac(p)))D.loading=5;else{n=y({rel:"stylesheet",href:n,"data-precedence":i},o),(o=an.get(p))&&Ig(n,o);var X=w=c.createElement("link");Ht(X),Xr(X,"link",n),X._p=new Promise(function(ie,fe){X.onload=ie,X.onerror=fe}),X.addEventListener("load",function(){D.loading|=1}),X.addEventListener("error",function(){D.loading|=2}),D.loading|=4,Uu(w,i,c)}w={type:"stylesheet",instance:w,count:1,state:D},m.set(p,w)}}}function Oj(n,i){Ta.X(n,i);var o=So;if(o&&n){var c=rr(o).hoistableScripts,m=_o(n),p=c.get(m);p||(p=o.querySelector(oc(m)),p||(n=y({src:n,async:!0},i),(i=an.get(m))&&Dg(n,i),p=o.createElement("script"),Ht(p),Xr(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(m,p))}}function Pj(n,i){Ta.M(n,i);var o=So;if(o&&n){var c=rr(o).hoistableScripts,m=_o(n),p=c.get(m);p||(p=o.querySelector(oc(m)),p||(n=y({src:n,async:!0,type:"module"},i),(i=an.get(m))&&Dg(n,i),p=o.createElement("script"),Ht(p),Xr(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(m,p))}}function ew(n,i,o,c){var m=(m=Be.current)?Tu(m):null;if(!m)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=jo(o.href),o=rr(m).hoistableStyles,c=o.get(i),c||(c={type:"style",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=jo(o.href);var p=rr(m).hoistableStyles,w=p.get(n);if(w||(m=m.ownerDocument||m,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(n,w),(p=m.querySelector(Ac(n)))&&!p._p&&(w.instance=p,w.state.loading=5),an.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},an.set(n,o),p||Vj(m,n,o,w.state))),i&&c===null)throw Error(s(528,""));return w}if(i&&c!==null)throw Error(s(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=_o(o),o=rr(m).hoistableScripts,c=o.get(i),c||(c={type:"script",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function jo(n){return'href="'+Cs(n)+'"'}function Ac(n){return'link[rel="stylesheet"]['+n+"]"}function tw(n){return y({},n,{"data-precedence":n.precedence,precedence:null})}function Vj(n,i,o,c){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=n.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),Xr(i,"link",o),Ht(i),n.head.appendChild(i))}function _o(n){return'[src="'+Cs(n)+'"]'}function oc(n){return"script[async]"+n}function rw(n,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var c=n.querySelector('style[data-href~="'+Cs(o.href)+'"]');if(c)return i.instance=c,Ht(c),c;var m=y({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),Ht(c),Xr(c,"style",m),Uu(c,o.precedence,n),i.instance=c;case"stylesheet":m=jo(o.href);var p=n.querySelector(Ac(m));if(p)return i.state.loading|=4,i.instance=p,Ht(p),p;c=tw(o),(m=an.get(m))&&Ig(c,m),p=(n.ownerDocument||n).createElement("link"),Ht(p);var w=p;return w._p=new Promise(function(D,X){w.onload=D,w.onerror=X}),Xr(p,"link",c),i.state.loading|=4,Uu(p,o.precedence,n),i.instance=p;case"script":return p=_o(o.src),(m=n.querySelector(oc(p)))?(i.instance=m,Ht(m),m):(c=o,(m=an.get(p))&&(c=y({},o),Dg(c,m)),n=n.ownerDocument||n,m=n.createElement("script"),Ht(m),Xr(m,"link",c),n.head.appendChild(m),i.instance=m);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,Uu(c,o.precedence,n));return i.instance}function Uu(n,i,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=c.length?c[c.length-1]:null,p=m,w=0;w<c.length;w++){var D=c[w];if(D.dataset.precedence===i)p=D;else if(p!==m)break}p?p.parentNode.insertBefore(n,p.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(n,i.firstChild))}function Ig(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function Dg(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Qu=null;function sw(n,i,o){if(Qu===null){var c=new Map,m=Qu=new Map;m.set(o,c)}else m=Qu,c=m.get(o),c||(c=new Map,m.set(o,c));if(c.has(n))return c;for(c.set(n,null),o=o.getElementsByTagName(n),m=0;m<o.length;m++){var p=o[m];if(!(p[Nt]||p[ir]||n==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var w=p.getAttribute(i)||"";w=n+w;var D=c.get(w);D?D.push(p):c.set(w,[p])}}return c}function nw(n,i,o){n=n.ownerDocument||n,n.head.insertBefore(o,i==="title"?n.querySelector("head > title"):null)}function zj(n,i,o){if(o===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(n=i.disabled,typeof i.precedence=="string"&&n==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function aw(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function Kj(n,i,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=jo(c.href),p=i.querySelector(Ac(m));if(p){i=p._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=Fu.bind(n),i.then(n,n)),o.state.loading|=4,o.instance=p,Ht(p);return}p=i.ownerDocument||i,c=tw(c),(m=an.get(m))&&Ig(c,m),p=p.createElement("link"),Ht(p);var w=p;w._p=new Promise(function(D,X){w.onload=D,w.onerror=X}),Xr(p,"link",c),o.instance=p}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=Fu.bind(n),i.addEventListener("load",o),i.addEventListener("error",o))}}var kg=0;function Gj(n,i){return n.stylesheets&&n.count===0&&Du(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var c=setTimeout(function(){if(n.stylesheets&&Du(n,n.stylesheets),n.unsuspend){var p=n.unsuspend;n.unsuspend=null,p()}},6e4+i);0<n.imgBytes&&kg===0&&(kg=62500*Nj());var m=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Du(n,n.stylesheets),n.unsuspend)){var p=n.unsuspend;n.unsuspend=null,p()}},(n.imgBytes>kg?50:800)+i);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(m)}}:null}function Fu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Du(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Iu=null;function Du(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Iu=new Map,i.forEach(qj,n),Iu=null,Fu.call(n))}function qj(n,i){if(!(i.state.loading&4)){var o=Iu.get(n);if(o)var c=o.get(null);else{o=new Map,Iu.set(n,o);for(var m=n.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<m.length;p++){var w=m[p];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(o.set(w.dataset.precedence,w),c=w)}c&&o.set(null,c)}m=i.instance,w=m.getAttribute("data-precedence"),p=o.get(w)||c,p===c&&o.set(null,m),o.set(w,m),this.count++,c=Fu.bind(this),m.addEventListener("load",c),m.addEventListener("error",c),p?p.parentNode.insertBefore(m,p.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(m,n.firstChild)),i.state.loading|=4}}var lc={$$typeof:G,Provider:null,Consumer:null,_currentValue:z,_currentValue2:z,_threadCount:0};function Yj(n,i,o,c,m,p,w,D,X){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ys(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ys(0),this.hiddenUpdates=Ys(null),this.identifierPrefix=c,this.onUncaughtError=m,this.onCaughtError=p,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=X,this.incompleteTransitions=new Map}function iw(n,i,o,c,m,p,w,D,X,ie,fe,ye){return n=new Yj(n,i,o,w,X,ie,fe,ye,D),i=1,p===!0&&(i|=24),p=Ms(3,null,null,i),n.current=p,p.stateNode=n,i=mm(),i.refCount++,n.pooledCache=i,i.refCount++,p.memoizedState={element:c,isDehydrated:o,cache:i},ym(p),n}function Aw(n){return n?(n=ao,n):ao}function ow(n,i,o,c,m,p){m=Aw(m),c.context===null?c.context=m:c.pendingContext=m,c=ni(i),c.payload={element:o},p=p===void 0?null:p,p!==null&&(c.callback=p),o=ai(n,c,i),o!==null&&(Ts(o,n,i),Ol(o,n,i))}function lw(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<i?o:i}}function Rg(n,i){lw(n,i),(n=n.alternate)&&lw(n,i)}function cw(n){if(n.tag===13||n.tag===31){var i=iA(n,67108864);i!==null&&Ts(i,n,67108864),Rg(n,67108864)}}function dw(n){if(n.tag===13||n.tag===31){var i=Vs();i=ua(i);var o=iA(n,i);o!==null&&Ts(o,n,i),Rg(n,i)}}var ku=!0;function $j(n,i,o,c){var m=M.T;M.T=null;var p=F.p;try{F.p=2,Mg(n,i,o,c)}finally{F.p=p,M.T=m}}function Xj(n,i,o,c){var m=M.T;M.T=null;var p=F.p;try{F.p=8,Mg(n,i,o,c)}finally{F.p=p,M.T=m}}function Mg(n,i,o,c){if(ku){var m=Lg(c);if(m===null)Cg(n,i,c,Ru,o),hw(n,c);else if(Wj(m,n,i,o,c))c.stopPropagation();else if(hw(n,c),i&4&&-1<Jj.indexOf(n)){for(;m!==null;){var p=Xe(m);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var w=Is(p.pendingLanes);if(w!==0){var D=p;for(D.pendingLanes|=2,D.entangledLanes|=2;w;){var X=1<<31-Ve(w);D.entanglements[1]|=X,w&=~X}Gn(p),(jt&6)===0&&(yu=zt()+500,sc(0))}}break;case 31:case 13:D=iA(p,2),D!==null&&Ts(D,p,2),vu(),Rg(p,2)}if(p=Lg(c),p===null&&Cg(n,i,c,Ru,o),p===m)break;m=p}m!==null&&c.stopPropagation()}else Cg(n,i,c,null,o)}}function Lg(n){return n=$s(n),Hg(n)}var Ru=null;function Hg(n){if(Ru=null,n=Tr(n),n!==null){var i=l(n);if(i===null)n=null;else{var o=i.tag;if(o===13){if(n=d(i),n!==null)return n;n=null}else if(o===31){if(n=u(i),n!==null)return n;n=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Ru=n,null}function uw(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ve()){case It:return 2;case Rr:return 8;case wt:case xr:return 32;case vs:return 268435456;default:return 32}default:return 32}}var Og=!1,gi=null,pi=null,xi=null,cc=new Map,dc=new Map,yi=[],Jj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function hw(n,i){switch(n){case"focusin":case"focusout":gi=null;break;case"dragenter":case"dragleave":pi=null;break;case"mouseover":case"mouseout":xi=null;break;case"pointerover":case"pointerout":cc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":dc.delete(i.pointerId)}}function uc(n,i,o,c,m,p){return n===null||n.nativeEvent!==p?(n={blockedOn:i,domEventName:o,eventSystemFlags:c,nativeEvent:p,targetContainers:[m]},i!==null&&(i=Xe(i),i!==null&&cw(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,m!==null&&i.indexOf(m)===-1&&i.push(m),n)}function Wj(n,i,o,c,m){switch(i){case"focusin":return gi=uc(gi,n,i,o,c,m),!0;case"dragenter":return pi=uc(pi,n,i,o,c,m),!0;case"mouseover":return xi=uc(xi,n,i,o,c,m),!0;case"pointerover":var p=m.pointerId;return cc.set(p,uc(cc.get(p)||null,n,i,o,c,m)),!0;case"gotpointercapture":return p=m.pointerId,dc.set(p,uc(dc.get(p)||null,n,i,o,c,m)),!0}return!1}function fw(n){var i=Tr(n.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=d(o),i!==null){n.blockedOn=i,hs(n.priority,function(){dw(o)});return}}else if(i===31){if(i=u(o),i!==null){n.blockedOn=i,hs(n.priority,function(){dw(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Mu(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var o=Lg(n.nativeEvent);if(o===null){o=n.nativeEvent;var c=new o.constructor(o.type,o);El=c,o.target.dispatchEvent(c),El=null}else return i=Xe(o),i!==null&&cw(i),n.blockedOn=o,!1;i.shift()}return!0}function mw(n,i,o){Mu(n)&&o.delete(i)}function Zj(){Og=!1,gi!==null&&Mu(gi)&&(gi=null),pi!==null&&Mu(pi)&&(pi=null),xi!==null&&Mu(xi)&&(xi=null),cc.forEach(mw),dc.forEach(mw)}function Lu(n,i){n.blockedOn===i&&(n.blockedOn=null,Og||(Og=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Zj)))}var Hu=null;function gw(n){Hu!==n&&(Hu=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Hu===n&&(Hu=null);for(var i=0;i<n.length;i+=3){var o=n[i],c=n[i+1],m=n[i+2];if(typeof c!="function"){if(Hg(c||o)===null)continue;break}var p=Xe(o);p!==null&&(n.splice(i,3),i-=3,Lm(p,{pending:!0,data:m,method:o.method,action:c},c,m))}}))}function To(n){function i(X){return Lu(X,n)}gi!==null&&Lu(gi,n),pi!==null&&Lu(pi,n),xi!==null&&Lu(xi,n),cc.forEach(i),dc.forEach(i);for(var o=0;o<yi.length;o++){var c=yi[o];c.blockedOn===n&&(c.blockedOn=null)}for(;0<yi.length&&(o=yi[0],o.blockedOn===null);)fw(o),o.blockedOn===null&&yi.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var m=o[c],p=o[c+1],w=m[dr]||null;if(typeof p=="function")w||gw(o);else if(w){var D=null;if(p&&p.hasAttribute("formAction")){if(m=p,w=p[dr]||null)D=w.formAction;else if(Hg(m)!==null)continue}else D=w.action;typeof D=="function"?o[c+1]=D:(o.splice(c,3),c-=3),gw(o)}}}function pw(){function n(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(w){return m=w})},focusReset:"manual",scroll:"manual"})}function i(){m!==null&&(m(),m=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,m=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),m!==null&&(m(),m=null)}}}function Pg(n){this._internalRoot=n}Ou.prototype.render=Pg.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(s(409));var o=i.current,c=Vs();ow(o,c,n,i,null,null)},Ou.prototype.unmount=Pg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;ow(n.current,2,null,n,null,null),vu(),i[Bs]=null}};function Ou(n){this._internalRoot=n}Ou.prototype.unstable_scheduleHydration=function(n){if(n){var i=Va();n={blockedOn:null,target:n,priority:i};for(var o=0;o<yi.length&&i!==0&&i<yi[o].priority;o++);yi.splice(o,0,n),o===0&&fw(n)}};var xw=e.version;if(xw!=="19.2.3")throw Error(s(527,xw,"19.2.3"));F.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=g(i),n=n!==null?x(n):null,n=n===null?null:n.stateNode,n};var e_={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pu.isDisabled&&Pu.supportsFiber)try{Fe=Pu.inject(e_),We=Pu}catch{}}return fc.createRoot=function(n,i){if(!A(n))throw Error(s(299));var o=!1,c="",m=Eb,p=Nb,w=Sb;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(m=i.onUncaughtError),i.onCaughtError!==void 0&&(p=i.onCaughtError),i.onRecoverableError!==void 0&&(w=i.onRecoverableError)),i=iw(n,1,!1,null,null,o,c,null,m,p,w,pw),n[Bs]=i.current,Bg(n),new Pg(i)},fc.hydrateRoot=function(n,i,o){if(!A(n))throw Error(s(299));var c=!1,m="",p=Eb,w=Nb,D=Sb,X=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(D=o.onRecoverableError),o.formState!==void 0&&(X=o.formState)),i=iw(n,1,!0,i,o??null,c,m,X,p,w,D,pw),i.context=Aw(null),o=i.current,c=Vs(),c=ua(c),m=ni(c),m.callback=null,ai(o,m,c),o=c,i.current.lanes=o,Fn(i,o),Gn(i),n[Bs]=i.current,Bg(n),new Ou(i)},fc.version="19.2.3",fc}var jw;function l_(){if(jw)return Kg.exports;jw=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Kg.exports=o_(),Kg.exports}var c_=l_();const d_=()=>{};var _w={};const N1=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let A=r.charCodeAt(s);A<128?e[t++]=A:A<2048?(e[t++]=A>>6|192,e[t++]=A&63|128):(A&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(A=65536+((A&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=A>>18|240,e[t++]=A>>12&63|128,e[t++]=A>>6&63|128,e[t++]=A&63|128):(e[t++]=A>>12|224,e[t++]=A>>6&63|128,e[t++]=A&63|128)}return e},u_=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const A=r[t++];if(A<128)e[s++]=String.fromCharCode(A);else if(A>191&&A<224){const l=r[t++];e[s++]=String.fromCharCode((A&31)<<6|l&63)}else if(A>239&&A<365){const l=r[t++],d=r[t++],u=r[t++],f=((A&7)<<18|(l&63)<<12|(d&63)<<6|u&63)-65536;e[s++]=String.fromCharCode(55296+(f>>10)),e[s++]=String.fromCharCode(56320+(f&1023))}else{const l=r[t++],d=r[t++];e[s++]=String.fromCharCode((A&15)<<12|(l&63)<<6|d&63)}}return e.join("")},S1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let A=0;A<r.length;A+=3){const l=r[A],d=A+1<r.length,u=d?r[A+1]:0,f=A+2<r.length,g=f?r[A+2]:0,x=l>>2,y=(l&3)<<4|u>>4;let v=(u&15)<<2|g>>6,N=g&63;f||(N=64,d||(v=64)),s.push(t[x],t[y],t[v],t[N])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(N1(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):u_(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let A=0;A<r.length;){const l=t[r.charAt(A++)],u=A<r.length?t[r.charAt(A)]:0;++A;const g=A<r.length?t[r.charAt(A)]:64;++A;const y=A<r.length?t[r.charAt(A)]:64;if(++A,l==null||u==null||g==null||y==null)throw new h_;const v=l<<2|u>>4;if(s.push(v),g!==64){const N=u<<4&240|g>>2;if(s.push(N),y!==64){const R=g<<6&192|y;s.push(R)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class h_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const f_=function(r){const e=N1(r);return S1.encodeByteArray(e,!0)},Lh=function(r){return f_(r).replace(/\./g,"")},j1=function(r){try{return S1.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function m_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const g_=()=>m_().__FIREBASE_DEFAULTS__,p_=()=>{if(typeof process>"u"||typeof _w>"u")return;const r=_w.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},x_=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&j1(r[1]);return e&&JSON.parse(e)},vf=()=>{try{return d_()||g_()||p_()||x_()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},_1=r=>vf()?.emulatorHosts?.[r],y_=r=>{const e=_1(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},T1=()=>vf()?.config,U1=r=>vf()?.[`_${r}`];class b_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}function cl(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Q1(r){return(await fetch(r,{credentials:"include"})).ok}function v_(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",A=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:A,exp:A+3600,auth_time:A,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Lh(JSON.stringify(t)),Lh(JSON.stringify(d)),""].join(".")}const Fc={};function w_(){const r={prod:[],emulator:[]};for(const e of Object.keys(Fc))Fc[e]?r.emulator.push(e):r.prod.push(e);return r}function B_(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Tw=!1;function F1(r,e){if(typeof window>"u"||typeof document>"u"||!cl(window.location.host)||Fc[r]===e||Fc[r]||Tw)return;Fc[r]=e;function t(v){return`__firebase__banner__${v}`}const s="__firebase__banner",l=w_().prod.length>0;function d(){const v=document.getElementById(s);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function f(v,N){v.setAttribute("width","24"),v.setAttribute("id",N),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function g(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{Tw=!0,d()},v}function x(v,N){v.setAttribute("id",N),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function y(){const v=B_(s),N=t("text"),R=document.getElementById(N)||document.createElement("span"),S=t("learnmore"),P=document.getElementById(S)||document.createElement("a"),V=t("preprendIcon"),$=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const G=v.element;u(G),x(P,S);const K=g();f($,V),G.append($,R,P,K),document.body.appendChild(G)}l?(R.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}function us(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function C_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(us())}function E_(){const r=vf()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function N_(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function S_(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function j_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function __(){const r=us();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function T_(){return!E_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function U_(){try{return typeof indexedDB=="object"}catch{return!1}}function Q_(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",A=self.indexedDB.open(s);A.onsuccess=()=>{A.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},A.onupgradeneeded=()=>{t=!1},A.onerror=()=>{e(A.error?.message||"")}}catch(t){e(t)}})}const F_="FirebaseError";class Oa extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=F_,Object.setPrototypeOf(this,Oa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,od.prototype.create)}}class od{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},A=`${this.service}/${e}`,l=this.errors[e],d=l?I_(l,s):"Error",u=`${this.serviceName}: ${d} (${A}).`;return new Oa(A,u,s)}}function I_(r,e){return r.replace(D_,(t,s)=>{const A=e[s];return A!=null?String(A):`<${s}?>`})}const D_=/\{\$([^}]+)}/g;function k_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function IA(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const A of t){if(!s.includes(A))return!1;const l=r[A],d=e[A];if(Uw(l)&&Uw(d)){if(!IA(l,d))return!1}else if(l!==d)return!1}for(const A of s)if(!t.includes(A))return!1;return!0}function Uw(r){return r!==null&&typeof r=="object"}function ld(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(A=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(A))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function R_(r,e){const t=new M_(r,e);return t.subscribe.bind(t)}class M_{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let A;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");L_(e,["next","error","complete"])?A=e:A={next:e,error:t,complete:s},A.next===void 0&&(A.next=$g),A.error===void 0&&(A.error=$g),A.complete===void 0&&(A.complete=$g);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?A.error(this.finalError):A.complete()}catch{}}),this.observers.push(A),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function L_(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function $g(){}function hn(r){return r&&r._delegate?r._delegate:r}class DA{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const wA="[DEFAULT]";class H_{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new b_;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const A=this.getOrInitializeService({instanceIdentifier:t});A&&s.resolve(A)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(A){if(s)return null;throw A}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(P_(e))try{this.getOrInitializeService({instanceIdentifier:wA})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const A=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:A});s.resolve(l)}catch{}}}}clearInstance(e=wA){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=wA){return this.instances.has(e)}getOptions(e=wA){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const A=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,d]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(l);s===u&&d.resolve(A)}return A}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),A=this.onInitCallbacks.get(s)??new Set;A.add(e),this.onInitCallbacks.set(s,A);const l=this.instances.get(s);return l&&e(l,s),()=>{A.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const A of s)try{A(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:O_(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=wA){return this.component?this.component.multipleInstances?e:wA:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function O_(r){return r===wA?void 0:r}function P_(r){return r.instantiationMode==="EAGER"}class V_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new H_(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var gt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(gt||(gt={}));const z_={debug:gt.DEBUG,verbose:gt.VERBOSE,info:gt.INFO,warn:gt.WARN,error:gt.ERROR,silent:gt.SILENT},K_=gt.INFO,G_={[gt.DEBUG]:"log",[gt.VERBOSE]:"log",[gt.INFO]:"info",[gt.WARN]:"warn",[gt.ERROR]:"error"},q_=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),A=G_[e];if(A)console[A](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let Xx=class{constructor(e){this.name=e,this._logLevel=K_,this._logHandler=q_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in gt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?z_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,gt.DEBUG,...e),this._logHandler(this,gt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,gt.VERBOSE,...e),this._logHandler(this,gt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,gt.INFO,...e),this._logHandler(this,gt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,gt.WARN,...e),this._logHandler(this,gt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,gt.ERROR,...e),this._logHandler(this,gt.ERROR,...e)}};const Y_=(r,e)=>e.some(t=>r instanceof t);let Qw,Fw;function $_(){return Qw||(Qw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function X_(){return Fw||(Fw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const I1=new WeakMap,Kp=new WeakMap,D1=new WeakMap,Xg=new WeakMap,Jx=new WeakMap;function J_(r){const e=new Promise((t,s)=>{const A=()=>{r.removeEventListener("success",l),r.removeEventListener("error",d)},l=()=>{t(Fi(r.result)),A()},d=()=>{s(r.error),A()};r.addEventListener("success",l),r.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&I1.set(t,r)}).catch(()=>{}),Jx.set(e,r),e}function W_(r){if(Kp.has(r))return;const e=new Promise((t,s)=>{const A=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",d),r.removeEventListener("abort",d)},l=()=>{t(),A()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),A()};r.addEventListener("complete",l),r.addEventListener("error",d),r.addEventListener("abort",d)});Kp.set(r,e)}let Gp={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Kp.get(r);if(e==="objectStoreNames")return r.objectStoreNames||D1.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Fi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function Z_(r){Gp=r(Gp)}function eT(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(Jg(this),e,...t);return D1.set(s,e.sort?e.sort():[e]),Fi(s)}:X_().includes(r)?function(...e){return r.apply(Jg(this),e),Fi(I1.get(this))}:function(...e){return Fi(r.apply(Jg(this),e))}}function tT(r){return typeof r=="function"?eT(r):(r instanceof IDBTransaction&&W_(r),Y_(r,$_())?new Proxy(r,Gp):r)}function Fi(r){if(r instanceof IDBRequest)return J_(r);if(Xg.has(r))return Xg.get(r);const e=tT(r);return e!==r&&(Xg.set(r,e),Jx.set(e,r)),e}const Jg=r=>Jx.get(r);function rT(r,e,{blocked:t,upgrade:s,blocking:A,terminated:l}={}){const d=indexedDB.open(r,e),u=Fi(d);return s&&d.addEventListener("upgradeneeded",f=>{s(Fi(d.result),f.oldVersion,f.newVersion,Fi(d.transaction),f)}),t&&d.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),u.then(f=>{l&&f.addEventListener("close",()=>l()),A&&f.addEventListener("versionchange",g=>A(g.oldVersion,g.newVersion,g))}).catch(()=>{}),u}const sT=["get","getKey","getAll","getAllKeys","count"],nT=["put","add","delete","clear"],Wg=new Map;function Iw(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Wg.get(e))return Wg.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,A=nT.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(A||sT.includes(t)))return;const l=async function(d,...u){const f=this.transaction(d,A?"readwrite":"readonly");let g=f.store;return s&&(g=g.index(u.shift())),(await Promise.all([g[t](...u),A&&f.done]))[0]};return Wg.set(e,l),l}Z_(r=>({...r,get:(e,t,s)=>Iw(e,t)||r.get(e,t,s),has:(e,t)=>!!Iw(e,t)||r.has(e,t)}));class aT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(iT(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function iT(r){return r.getComponent()?.type==="VERSION"}const qp="@firebase/app",Dw="0.14.8";const ka=new Xx("@firebase/app"),AT="@firebase/app-compat",oT="@firebase/analytics-compat",lT="@firebase/analytics",cT="@firebase/app-check-compat",dT="@firebase/app-check",uT="@firebase/auth",hT="@firebase/auth-compat",fT="@firebase/database",mT="@firebase/data-connect",gT="@firebase/database-compat",pT="@firebase/functions",xT="@firebase/functions-compat",yT="@firebase/installations",bT="@firebase/installations-compat",vT="@firebase/messaging",wT="@firebase/messaging-compat",BT="@firebase/performance",CT="@firebase/performance-compat",ET="@firebase/remote-config",NT="@firebase/remote-config-compat",ST="@firebase/storage",jT="@firebase/storage-compat",_T="@firebase/firestore",TT="@firebase/ai",UT="@firebase/firestore-compat",QT="firebase",FT="12.9.0";const Yp="[DEFAULT]",IT={[qp]:"fire-core",[AT]:"fire-core-compat",[lT]:"fire-analytics",[oT]:"fire-analytics-compat",[dT]:"fire-app-check",[cT]:"fire-app-check-compat",[uT]:"fire-auth",[hT]:"fire-auth-compat",[fT]:"fire-rtdb",[mT]:"fire-data-connect",[gT]:"fire-rtdb-compat",[pT]:"fire-fn",[xT]:"fire-fn-compat",[yT]:"fire-iid",[bT]:"fire-iid-compat",[vT]:"fire-fcm",[wT]:"fire-fcm-compat",[BT]:"fire-perf",[CT]:"fire-perf-compat",[ET]:"fire-rc",[NT]:"fire-rc-compat",[ST]:"fire-gcs",[jT]:"fire-gcs-compat",[_T]:"fire-fst",[UT]:"fire-fst-compat",[TT]:"fire-vertex","fire-js":"fire-js",[QT]:"fire-js-all"};const Hh=new Map,DT=new Map,$p=new Map;function kw(r,e){try{r.container.addComponent(e)}catch(t){ka.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function tl(r){const e=r.name;if($p.has(e))return ka.debug(`There were multiple attempts to register component ${e}.`),!1;$p.set(e,r);for(const t of Hh.values())kw(t,r);for(const t of DT.values())kw(t,r);return!0}function Wx(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function En(r){return r==null?!1:r.settings!==void 0}const kT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ii=new od("app","Firebase",kT);class RT{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new DA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ii.create("app-deleted",{appName:this._name})}}const dl=FT;function Zx(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:Yp,automaticDataCollectionEnabled:!0,...e},A=s.name;if(typeof A!="string"||!A)throw Ii.create("bad-app-name",{appName:String(A)});if(t||(t=T1()),!t)throw Ii.create("no-options");const l=Hh.get(A);if(l){if(IA(t,l.options)&&IA(s,l.config))return l;throw Ii.create("duplicate-app",{appName:A})}const d=new V_(A);for(const f of $p.values())d.addComponent(f);const u=new RT(t,s,d);return Hh.set(A,u),u}function k1(r=Yp){const e=Hh.get(r);if(!e&&r===Yp&&T1())return Zx();if(!e)throw Ii.create("no-app",{appName:r});return e}function Di(r,e,t){let s=IT[r]??r;t&&(s+=`-${t}`);const A=s.match(/\s|\//),l=e.match(/\s|\//);if(A||l){const d=[`Unable to register library "${s}" with version "${e}":`];A&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),A&&l&&d.push("and"),l&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ka.warn(d.join(" "));return}tl(new DA(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const MT="firebase-heartbeat-database",LT=1,qc="firebase-heartbeat-store";let Zg=null;function R1(){return Zg||(Zg=rT(MT,LT,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(qc)}catch(t){console.warn(t)}}}}).catch(r=>{throw Ii.create("idb-open",{originalErrorMessage:r.message})})),Zg}async function HT(r){try{const t=(await R1()).transaction(qc),s=await t.objectStore(qc).get(M1(r));return await t.done,s}catch(e){if(e instanceof Oa)ka.warn(e.message);else{const t=Ii.create("idb-get",{originalErrorMessage:e?.message});ka.warn(t.message)}}}async function Rw(r,e){try{const s=(await R1()).transaction(qc,"readwrite");await s.objectStore(qc).put(e,M1(r)),await s.done}catch(t){if(t instanceof Oa)ka.warn(t.message);else{const s=Ii.create("idb-set",{originalErrorMessage:t?.message});ka.warn(s.message)}}}function M1(r){return`${r.name}!${r.options.appId}`}const OT=1024,PT=30;class VT{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new KT(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Mw();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(A=>A.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>PT){const A=GT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(A,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ka.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Mw(),{heartbeatsToSend:t,unsentEntries:s}=zT(this._heartbeatsCache.heartbeats),A=Lh(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),A}catch(e){return ka.warn(e),""}}}function Mw(){return new Date().toISOString().substring(0,10)}function zT(r,e=OT){const t=[];let s=r.slice();for(const A of r){const l=t.find(d=>d.agent===A.agent);if(l){if(l.dates.push(A.date),Lw(t)>e){l.dates.pop();break}}else if(t.push({agent:A.agent,dates:[A.date]}),Lw(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class KT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return U_()?Q_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await HT(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Rw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Rw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Lw(r){return Lh(JSON.stringify({version:2,heartbeats:r})).length}function GT(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}function qT(r){tl(new DA("platform-logger",e=>new aT(e),"PRIVATE")),tl(new DA("heartbeat",e=>new VT(e),"PRIVATE")),Di(qp,Dw,r),Di(qp,Dw,"esm2020"),Di("fire-js","")}qT("");var YT="firebase",$T="12.9.0";Di(YT,$T,"app");function L1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const XT=L1,H1=new od("auth","Firebase",L1());const Oh=new Xx("@firebase/auth");function JT(r,...e){Oh.logLevel<=gt.WARN&&Oh.warn(`Auth (${dl}): ${r}`,...e)}function Eh(r,...e){Oh.logLevel<=gt.ERROR&&Oh.error(`Auth (${dl}): ${r}`,...e)}function ra(r,...e){throw t0(r,...e)}function jn(r,...e){return t0(r,...e)}function e0(r,e,t){const s={...XT(),[e]:t};return new od("auth","Firebase",s).create(e,{appName:r.name})}function jA(r){return e0(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function WT(r,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&ra(r,"argument-error"),e0(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function t0(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return H1.create(r,...e)}function Je(r,e,...t){if(!r)throw t0(e,...t)}function Fa(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Eh(e),new Error(e)}function Ra(r,e){r||Fa(e)}function Xp(){return typeof self<"u"&&self.location?.href||""}function ZT(){return Hw()==="http:"||Hw()==="https:"}function Hw(){return typeof self<"u"&&self.location?.protocol||null}function eU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ZT()||S_()||"connection"in navigator)?navigator.onLine:!0}function tU(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class cd{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ra(t>e,"Short delay should be less than long delay!"),this.isMobile=C_()||j_()}get(){return eU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function r0(r,e){Ra(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class O1{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const rU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const sU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],nU=new cd(3e4,6e4);function s0(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function ul(r,e,t,s,A={}){return P1(r,A,async()=>{let l={},d={};s&&(e==="GET"?d=s:l={body:JSON.stringify(s)});const u=ld({key:r.config.apiKey,...d}).slice(1),f=await r._getAdditionalHeaders();f["Content-Type"]="application/json",r.languageCode&&(f["X-Firebase-Locale"]=r.languageCode);const g={method:e,headers:f,...l};return N_()||(g.referrerPolicy="no-referrer"),r.emulatorConfig&&cl(r.emulatorConfig.host)&&(g.credentials="include"),O1.fetch()(await V1(r,r.config.apiHost,t,u),g)})}async function P1(r,e,t){r._canInitEmulator=!1;const s={...rU,...e};try{const A=new iU(r),l=await Promise.race([t(),A.promise]);A.clearNetworkTimeout();const d=await l.json();if("needConfirmation"in d)throw Vu(r,"account-exists-with-different-credential",d);if(l.ok&&!("errorMessage"in d))return d;{const u=l.ok?d.errorMessage:d.error.message,[f,g]=u.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vu(r,"credential-already-in-use",d);if(f==="EMAIL_EXISTS")throw Vu(r,"email-already-in-use",d);if(f==="USER_DISABLED")throw Vu(r,"user-disabled",d);const x=s[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw e0(r,x,g);ra(r,x)}}catch(A){if(A instanceof Oa)throw A;ra(r,"network-request-failed",{message:String(A)})}}async function aU(r,e,t,s,A={}){const l=await ul(r,e,t,s,A);return"mfaPendingCredential"in l&&ra(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function V1(r,e,t,s){const A=`${e}${t}?${s}`,l=r,d=l.config.emulator?r0(r.config,A):`${r.config.apiScheme}://${A}`;return sU.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(d).toString():d}class iU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(jn(this.auth,"network-request-failed")),nU.get())})}}function Vu(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const A=jn(r,e,s);return A.customData._tokenResponse=t,A}async function AU(r,e){return ul(r,"POST","/v1/accounts:delete",e)}async function Ph(r,e){return ul(r,"POST","/v1/accounts:lookup",e)}function Ic(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oU(r,e=!1){const t=hn(r),s=await t.getIdToken(e),A=n0(s);Je(A&&A.exp&&A.auth_time&&A.iat,t.auth,"internal-error");const l=typeof A.firebase=="object"?A.firebase:void 0,d=l?.sign_in_provider;return{claims:A,token:s,authTime:Ic(ep(A.auth_time)),issuedAtTime:Ic(ep(A.iat)),expirationTime:Ic(ep(A.exp)),signInProvider:d||null,signInSecondFactor:l?.sign_in_second_factor||null}}function ep(r){return Number(r)*1e3}function n0(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return Eh("JWT malformed, contained fewer than 3 sections"),null;try{const A=j1(t);return A?JSON.parse(A):(Eh("Failed to decode base64 JWT payload"),null)}catch(A){return Eh("Caught error parsing JWT payload as JSON",A?.toString()),null}}function Ow(r){const e=n0(r);return Je(e,"internal-error"),Je(typeof e.exp<"u","internal-error"),Je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Yc(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Oa&&lU(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function lU({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class cU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Jp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ic(this.lastLoginAt),this.creationTime=Ic(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Vh(r){const e=r.auth,t=await r.getIdToken(),s=await Yc(r,Ph(e,{idToken:t}));Je(s?.users.length,e,"internal-error");const A=s.users[0];r._notifyReloadListener(A);const l=A.providerUserInfo?.length?z1(A.providerUserInfo):[],d=uU(r.providerData,l),u=r.isAnonymous,f=!(r.email&&A.passwordHash)&&!d?.length,g=u?f:!1,x={uid:A.localId,displayName:A.displayName||null,photoURL:A.photoUrl||null,email:A.email||null,emailVerified:A.emailVerified||!1,phoneNumber:A.phoneNumber||null,tenantId:A.tenantId||null,providerData:d,metadata:new Jp(A.createdAt,A.lastLoginAt),isAnonymous:g};Object.assign(r,x)}async function dU(r){const e=hn(r);await Vh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function uU(r,e){return[...r.filter(s=>!e.some(A=>A.providerId===s.providerId)),...e]}function z1(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function hU(r,e){const t=await P1(r,{},async()=>{const s=ld({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:A,apiKey:l}=r.config,d=await V1(r,A,"/v1/token",`key=${l}`),u=await r._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:u,body:s};return r.emulatorConfig&&cl(r.emulatorConfig.host)&&(f.credentials="include"),O1.fetch()(d,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function fU(r,e){return ul(r,"POST","/v2/accounts:revokeToken",s0(r,e))}class Yo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Je(e.idToken,"internal-error"),Je(typeof e.idToken<"u","internal-error"),Je(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ow(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Je(e.length!==0,"internal-error");const t=Ow(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:A,expiresIn:l}=await hU(e,t);this.updateTokensAndExpiration(s,A,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:A,expirationTime:l}=t,d=new Yo;return s&&(Je(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),A&&(Je(typeof A=="string","internal-error",{appName:e}),d.accessToken=A),l&&(Je(typeof l=="number","internal-error",{appName:e}),d.expirationTime=l),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Yo,this.toJSON())}_performRefresh(){return Fa("not implemented")}}function vi(r,e){Je(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Nn{constructor({uid:e,auth:t,stsTokenManager:s,...A}){this.providerId="firebase",this.proactiveRefresh=new cU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=A.displayName||null,this.email=A.email||null,this.emailVerified=A.emailVerified||!1,this.phoneNumber=A.phoneNumber||null,this.photoURL=A.photoURL||null,this.isAnonymous=A.isAnonymous||!1,this.tenantId=A.tenantId||null,this.providerData=A.providerData?[...A.providerData]:[],this.metadata=new Jp(A.createdAt||void 0,A.lastLoginAt||void 0)}async getIdToken(e){const t=await Yc(this,this.stsTokenManager.getToken(this.auth,e));return Je(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return oU(this,e)}reload(){return dU(this)}_assign(e){this!==e&&(Je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Nn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Vh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(En(this.auth.app))return Promise.reject(jA(this.auth));const e=await this.getIdToken();return await Yc(this,AU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,A=t.email??void 0,l=t.phoneNumber??void 0,d=t.photoURL??void 0,u=t.tenantId??void 0,f=t._redirectEventId??void 0,g=t.createdAt??void 0,x=t.lastLoginAt??void 0,{uid:y,emailVerified:v,isAnonymous:N,providerData:R,stsTokenManager:S}=t;Je(y&&S,e,"internal-error");const P=Yo.fromJSON(this.name,S);Je(typeof y=="string",e,"internal-error"),vi(s,e.name),vi(A,e.name),Je(typeof v=="boolean",e,"internal-error"),Je(typeof N=="boolean",e,"internal-error"),vi(l,e.name),vi(d,e.name),vi(u,e.name),vi(f,e.name),vi(g,e.name),vi(x,e.name);const V=new Nn({uid:y,auth:e,email:A,emailVerified:v,displayName:s,isAnonymous:N,photoURL:d,phoneNumber:l,tenantId:u,stsTokenManager:P,createdAt:g,lastLoginAt:x});return R&&Array.isArray(R)&&(V.providerData=R.map($=>({...$}))),f&&(V._redirectEventId=f),V}static async _fromIdTokenResponse(e,t,s=!1){const A=new Yo;A.updateFromServerResponse(t);const l=new Nn({uid:t.localId,auth:e,stsTokenManager:A,isAnonymous:s});return await Vh(l),l}static async _fromGetAccountInfoResponse(e,t,s){const A=t.users[0];Je(A.localId!==void 0,"internal-error");const l=A.providerUserInfo!==void 0?z1(A.providerUserInfo):[],d=!(A.email&&A.passwordHash)&&!l?.length,u=new Yo;u.updateFromIdToken(s);const f=new Nn({uid:A.localId,auth:e,stsTokenManager:u,isAnonymous:d}),g={uid:A.localId,displayName:A.displayName||null,photoURL:A.photoUrl||null,email:A.email||null,emailVerified:A.emailVerified||!1,phoneNumber:A.phoneNumber||null,tenantId:A.tenantId||null,providerData:l,metadata:new Jp(A.createdAt,A.lastLoginAt),isAnonymous:!(A.email&&A.passwordHash)&&!l?.length};return Object.assign(f,g),f}}const Pw=new Map;function Ia(r){Ra(r instanceof Function,"Expected a class definition");let e=Pw.get(r);return e?(Ra(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Pw.set(r,e),e)}class K1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}K1.type="NONE";const Vw=K1;function Nh(r,e,t){return`firebase:${r}:${e}:${t}`}class $o{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:A,name:l}=this.auth;this.fullUserKey=Nh(this.userKey,A.apiKey,l),this.fullPersistenceKey=Nh("persistence",A.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ph(this.auth,{idToken:e}).catch(()=>{});return t?Nn._fromGetAccountInfoResponse(this.auth,t,e):null}return Nn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new $o(Ia(Vw),e,s);const A=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=A[0]||Ia(Vw);const d=Nh(s,e.config.apiKey,e.name);let u=null;for(const g of t)try{const x=await g._get(d);if(x){let y;if(typeof x=="string"){const v=await Ph(e,{idToken:x}).catch(()=>{});if(!v)break;y=await Nn._fromGetAccountInfoResponse(e,v,x)}else y=Nn._fromJSON(e,x);g!==l&&(u=y),l=g;break}}catch{}const f=A.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!f.length?new $o(l,e,s):(l=f[0],u&&await l._set(d,u.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(d)}catch{}})),new $o(l,e,s))}}function zw(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(G1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(J1(e))return"Blackberry";if(W1(e))return"Webos";if(q1(e))return"Safari";if((e.includes("chrome/")||Y1(e))&&!e.includes("edge/"))return"Chrome";if(X1(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if(s?.length===2)return s[1]}return"Other"}function G1(r=us()){return/firefox\//i.test(r)}function q1(r=us()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Y1(r=us()){return/crios\//i.test(r)}function $1(r=us()){return/iemobile/i.test(r)}function X1(r=us()){return/android/i.test(r)}function J1(r=us()){return/blackberry/i.test(r)}function W1(r=us()){return/webos/i.test(r)}function a0(r=us()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function mU(r=us()){return a0(r)&&!!window.navigator?.standalone}function gU(){return __()&&document.documentMode===10}function Z1(r=us()){return a0(r)||X1(r)||W1(r)||J1(r)||/windows phone/i.test(r)||$1(r)}function eE(r,e=[]){let t;switch(r){case"Browser":t=zw(us());break;case"Worker":t=`${zw(us())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${dl}/${s}`}class pU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((d,u)=>{try{const f=e(l);d(f)}catch(f){u(f)}});s.onAbort=t,this.queue.push(s);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const A of t)try{A()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function xU(r,e={}){return ul(r,"GET","/v2/passwordPolicy",s0(r,e))}const yU=6;class bU{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??yU,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,A=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),A&&(t.meetsMaxPasswordLength=e.length<=A)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let A=0;A<e.length;A++)s=e.charAt(A),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,A,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=A)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class vU{constructor(e,t,s,A){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=A,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Kw(this),this.idTokenSubscription=new Kw(this),this.beforeStateQueue=new pU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=H1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=A.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ia(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await $o.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ph(this,{idToken:e}),s=await Nn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(En(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,A=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,d=s?._redirectEventId,u=await this.tryRedirectSignIn(e);(!l||l===d)&&u?.user&&(s=u.user,A=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(A)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Vh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(En(this.app))return Promise.reject(jA(this));const t=e?hn(e):null;return t&&Je(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return En(this.app)?Promise.reject(jA(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return En(this.app)?Promise.reject(jA(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ia(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await xU(this),t=new bU(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new od("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await fU(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ia(e)||this._popupRedirectResolver;Je(t,this,"argument-error"),this.redirectPersistenceManager=await $o.create(this,[Ia(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,A){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let d=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Je(u,this,"internal-error"),u.then(()=>{d||l(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,s,A);return()=>{d=!0,f()}}else{const f=e.addObserver(t);return()=>{d=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=eE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(En(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&JT(`Error while retrieving App Check token: ${e.error}`),e?.token}}function wf(r){return hn(r)}class Kw{constructor(e){this.auth=e,this.observer=null,this.addObserver=R_(t=>this.observer=t)}get next(){return Je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let i0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wU(r){i0=r}function BU(r){return i0.loadJS(r)}function CU(){return i0.gapiScript}function EU(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function NU(r,e){const t=Wx(r,"auth");if(t.isInitialized()){const A=t.getImmediate(),l=t.getOptions();if(IA(l,e??{}))return A;ra(A,"already-initialized")}return t.initialize({options:e})}function SU(r,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(Ia);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function jU(r,e,t){const s=wf(r);Je(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const A=!1,l=tE(e),{host:d,port:u}=_U(e),f=u===null?"":`:${u}`,g={url:`${l}//${d}${f}/`},x=Object.freeze({host:d,port:u,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:A})});if(!s._canInitEmulator){Je(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Je(IA(g,s.config.emulator)&&IA(x,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=x,s.settings.appVerificationDisabledForTesting=!0,cl(d)?(Q1(`${l}//${d}${f}`),F1("Auth",!0)):TU()}function tE(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function _U(r){const e=tE(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(s);if(A){const l=A[1];return{host:l,port:Gw(s.substr(l.length+1))}}else{const[l,d]=s.split(":");return{host:l,port:Gw(d)}}}function Gw(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function TU(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class rE{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Fa("not implemented")}_getIdTokenResponse(e){return Fa("not implemented")}_linkToIdToken(e,t){return Fa("not implemented")}_getReauthenticationResolver(e){return Fa("not implemented")}}async function Xo(r,e){return aU(r,"POST","/v1/accounts:signInWithIdp",s0(r,e))}const UU="http://localhost";class kA extends rE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new kA(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ra("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:A,...l}=t;if(!s||!A)return null;const d=new kA(s,A);return d.idToken=l.idToken||void 0,d.accessToken=l.accessToken||void 0,d.secret=l.secret,d.nonce=l.nonce,d.pendingToken=l.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return Xo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Xo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Xo(e,t)}buildRequest(){const e={requestUri:UU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ld(t)}return e}}class A0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class dd extends A0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ei extends dd{constructor(){super("facebook.com")}static credential(e){return kA._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ei.credential(e.oauthAccessToken)}catch{return null}}}Ei.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ei.PROVIDER_ID="facebook.com";class Xn extends dd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return kA._fromParams({providerId:Xn.PROVIDER_ID,signInMethod:Xn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Xn.credentialFromTaggedObject(e)}static credentialFromError(e){return Xn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Xn.credential(t,s)}catch{return null}}}Xn.GOOGLE_SIGN_IN_METHOD="google.com";Xn.PROVIDER_ID="google.com";class Ni extends dd{constructor(){super("github.com")}static credential(e){return kA._fromParams({providerId:Ni.PROVIDER_ID,signInMethod:Ni.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ni.credentialFromTaggedObject(e)}static credentialFromError(e){return Ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ni.credential(e.oauthAccessToken)}catch{return null}}}Ni.GITHUB_SIGN_IN_METHOD="github.com";Ni.PROVIDER_ID="github.com";class Si extends dd{constructor(){super("twitter.com")}static credential(e,t){return kA._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Si.credential(t,s)}catch{return null}}}Si.TWITTER_SIGN_IN_METHOD="twitter.com";Si.PROVIDER_ID="twitter.com";class rl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,A=!1){const l=await Nn._fromIdTokenResponse(e,s,A),d=qw(s);return new rl({user:l,providerId:d,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const A=qw(s);return new rl({user:e,providerId:A,_tokenResponse:s,operationType:t})}}function qw(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class zh extends Oa{constructor(e,t,s,A){super(t.code,t.message),this.operationType=s,this.user=A,Object.setPrototypeOf(this,zh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,A){return new zh(e,t,s,A)}}function sE(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?zh._fromErrorAndOperation(r,l,e,s):l})}async function QU(r,e,t=!1){const s=await Yc(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return rl._forOperation(r,"link",s)}async function FU(r,e,t=!1){const{auth:s}=r;if(En(s.app))return Promise.reject(jA(s));const A="reauthenticate";try{const l=await Yc(r,sE(s,A,e,r),t);Je(l.idToken,s,"internal-error");const d=n0(l.idToken);Je(d,s,"internal-error");const{sub:u}=d;return Je(r.uid===u,s,"user-mismatch"),rl._forOperation(r,A,l)}catch(l){throw l?.code==="auth/user-not-found"&&ra(s,"user-mismatch"),l}}async function IU(r,e,t=!1){if(En(r.app))return Promise.reject(jA(r));const s="signIn",A=await sE(r,s,e),l=await rl._fromIdTokenResponse(r,s,A);return t||await r._updateCurrentUser(l.user),l}function DU(r,e,t,s){return hn(r).onIdTokenChanged(e,t,s)}function kU(r,e,t){return hn(r).beforeAuthStateChanged(e,t)}function RU(r,e,t,s){return hn(r).onAuthStateChanged(e,t,s)}function MU(r){return hn(r).signOut()}const Kh="__sak";class nE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Kh,"1"),this.storage.removeItem(Kh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const LU=1e3,HU=10;class aE extends nE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Z1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),A=this.localCache[t];s!==A&&e(t,A,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,u,f)=>{this.notifyListeners(d,f)});return}const s=e.key;t?this.detachListener():this.stopPolling();const A=()=>{const d=this.storage.getItem(s);!t&&this.localCache[s]===d||this.notifyListeners(s,d)},l=this.storage.getItem(s);gU()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(A,HU):A()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const A of Array.from(s))A(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},LU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}aE.type="LOCAL";const OU=aE;class iE extends nE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}iE.type="SESSION";const AE=iE;function PU(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Bf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(A=>A.isListeningto(e));if(t)return t;const s=new Bf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:A,data:l}=t.data,d=this.handlersMap[A];if(!d?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:A});const u=Array.from(d).map(async g=>g(t.origin,l)),f=await PU(u);t.ports[0].postMessage({status:"done",eventId:s,eventType:A,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bf.receivers=[];function o0(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}class VU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const A=typeof MessageChannel<"u"?new MessageChannel:null;if(!A)throw new Error("connection_unavailable");let l,d;return new Promise((u,f)=>{const g=o0("",20);A.port1.start();const x=setTimeout(()=>{f(new Error("unsupported_event"))},s);d={messageChannel:A,onMessage(y){const v=y;if(v.data.eventId===g)switch(v.data.status){case"ack":clearTimeout(x),l=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),u(v.data.response);break;default:clearTimeout(x),clearTimeout(l),f(new Error("invalid_response"));break}}},this.handlers.add(d),A.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[A.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function Jn(){return window}function zU(r){Jn().location.href=r}function oE(){return typeof Jn().WorkerGlobalScope<"u"&&typeof Jn().importScripts=="function"}async function KU(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function GU(){return navigator?.serviceWorker?.controller||null}function qU(){return oE()?self:null}const lE="firebaseLocalStorageDb",YU=1,Gh="firebaseLocalStorage",cE="fbase_key";class ud{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Cf(r,e){return r.transaction([Gh],e?"readwrite":"readonly").objectStore(Gh)}function $U(){const r=indexedDB.deleteDatabase(lE);return new ud(r).toPromise()}function Wp(){const r=indexedDB.open(lE,YU);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Gh,{keyPath:cE})}catch(A){t(A)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Gh)?e(s):(s.close(),await $U(),e(await Wp()))})})}async function Yw(r,e,t){const s=Cf(r,!0).put({[cE]:e,value:t});return new ud(s).toPromise()}async function XU(r,e){const t=Cf(r,!1).get(e),s=await new ud(t).toPromise();return s===void 0?null:s.value}function $w(r,e){const t=Cf(r,!0).delete(e);return new ud(t).toPromise()}const JU=800,WU=3;class dE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Wp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>WU)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return oE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bf._getInstance(qU()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await KU(),!this.activeServiceWorker)return;this.sender=new VU(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||GU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Wp();return await Yw(e,Kh,"1"),await $w(e,Kh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Yw(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>XU(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>$w(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(A=>{const l=Cf(A,!1).getAll();return new ud(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:A,value:l}of e)s.add(A),JSON.stringify(this.localCache[A])!==JSON.stringify(l)&&(this.notifyListeners(A,l),t.push(A));for(const A of Object.keys(this.localCache))this.localCache[A]&&!s.has(A)&&(this.notifyListeners(A,null),t.push(A));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const A of Array.from(s))A(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),JU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dE.type="LOCAL";const ZU=dE;new cd(3e4,6e4);function uE(r,e){return e?Ia(e):(Je(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class l0 extends rE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Xo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Xo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function e4(r){return IU(r.auth,new l0(r),r.bypassAuthState)}function t4(r){const{auth:e,user:t}=r;return Je(t,e,"internal-error"),FU(t,new l0(r),r.bypassAuthState)}async function r4(r){const{auth:e,user:t}=r;return Je(t,e,"internal-error"),QU(t,new l0(r),r.bypassAuthState)}class hE{constructor(e,t,s,A,l=!1){this.auth=e,this.resolver=s,this.user=A,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:A,tenantId:l,error:d,type:u}=e;if(d){this.reject(d);return}const f={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:A||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(f))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return e4;case"linkViaPopup":case"linkViaRedirect":return r4;case"reauthViaPopup":case"reauthViaRedirect":return t4;default:ra(this.auth,"internal-error")}}resolve(e){Ra(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ra(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const s4=new cd(2e3,1e4);async function n4(r,e,t){if(En(r.app))return Promise.reject(jn(r,"operation-not-supported-in-this-environment"));const s=wf(r);WT(r,e,A0);const A=uE(s,t);return new EA(s,"signInViaPopup",e,A).executeNotNull()}class EA extends hE{constructor(e,t,s,A,l){super(e,t,A,l),this.provider=s,this.authWindow=null,this.pollId=null,EA.currentPopupAction&&EA.currentPopupAction.cancel(),EA.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Je(e,this.auth,"internal-error"),e}async onExecution(){Ra(this.filter.length===1,"Popup operations only handle one event");const e=o0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(jn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(jn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,EA.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(jn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,s4.get())};e()}}EA.currentPopupAction=null;const a4="pendingRedirect",Sh=new Map;class i4 extends hE{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Sh.get(this.auth._key());if(!e){try{const s=await A4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Sh.set(this.auth._key(),e)}return this.bypassAuthState||Sh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function A4(r,e){const t=c4(e),s=l4(r);if(!await s._isAvailable())return!1;const A=await s._get(t)==="true";return await s._remove(t),A}function o4(r,e){Sh.set(r._key(),e)}function l4(r){return Ia(r._redirectPersistence)}function c4(r){return Nh(a4,r.config.apiKey,r.name)}async function d4(r,e,t=!1){if(En(r.app))return Promise.reject(jA(r));const s=wf(r),A=uE(s,e),d=await new i4(s,A,t).execute();return d&&!t&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}const u4=600*1e3;class h4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!f4(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!fE(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(jn(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=u4&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xw(e))}saveEventToCache(e){this.cachedEventUids.add(Xw(e)),this.lastProcessedEventTime=Date.now()}}function Xw(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function fE({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function f4(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fE(r);default:return!1}}async function m4(r,e={}){return ul(r,"GET","/v1/projects",e)}const g4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,p4=/^https?/;async function x4(r){if(r.config.emulator)return;const{authorizedDomains:e}=await m4(r);for(const t of e)try{if(y4(t))return}catch{}ra(r,"unauthorized-domain")}function y4(r){const e=Xp(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===s}if(!p4.test(t))return!1;if(g4.test(r))return s===r;const A=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(s)}const b4=new cd(3e4,6e4);function Jw(){const r=Jn().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function v4(r){return new Promise((e,t)=>{function s(){Jw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Jw(),t(jn(r,"network-request-failed"))},timeout:b4.get()})}if(Jn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Jn().gapi?.load)s();else{const A=EU("iframefcb");return Jn()[A]=()=>{gapi.load?s():t(jn(r,"network-request-failed"))},BU(`${CU()}?onload=${A}`).catch(l=>t(l))}}).catch(e=>{throw jh=null,e})}let jh=null;function w4(r){return jh=jh||v4(r),jh}const B4=new cd(5e3,15e3),C4="__/auth/iframe",E4="emulator/auth/iframe",N4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},S4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function j4(r){const e=r.config;Je(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?r0(e,E4):`https://${r.config.authDomain}/${C4}`,s={apiKey:e.apiKey,appName:r.name,v:dl},A=S4.get(r.config.apiHost);A&&(s.eid=A);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${ld(s).slice(1)}`}async function _4(r){const e=await w4(r),t=Jn().gapi;return Je(t,r,"internal-error"),e.open({where:document.body,url:j4(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:N4,dontclear:!0},s=>new Promise(async(A,l)=>{await s.restyle({setHideOnLeave:!1});const d=jn(r,"network-request-failed"),u=Jn().setTimeout(()=>{l(d)},B4.get());function f(){Jn().clearTimeout(u),A(s)}s.ping(f).then(f,()=>{l(d)})}))}const T4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},U4=500,Q4=600,F4="_blank",I4="http://localhost";class Ww{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function D4(r,e,t,s=U4,A=Q4){const l=Math.max((window.screen.availHeight-A)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let u="";const f={...T4,width:s.toString(),height:A.toString(),top:l,left:d},g=us().toLowerCase();t&&(u=Y1(g)?F4:t),G1(g)&&(e=e||I4,f.scrollbars="yes");const x=Object.entries(f).reduce((v,[N,R])=>`${v}${N}=${R},`,"");if(mU(g)&&u!=="_self")return k4(e||"",u),new Ww(null);const y=window.open(e||"",u,x);Je(y,r,"popup-blocked");try{y.focus()}catch{}return new Ww(y)}function k4(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}const R4="__/auth/handler",M4="emulator/auth/handler",L4=encodeURIComponent("fac");async function Zw(r,e,t,s,A,l){Je(r.config.authDomain,r,"auth-domain-config-required"),Je(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:dl,eventId:A};if(e instanceof A0){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",k_(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,y]of Object.entries({}))d[x]=y}if(e instanceof dd){const x=e.getScopes().filter(y=>y!=="");x.length>0&&(d.scopes=x.join(","))}r.tenantId&&(d.tid=r.tenantId);const u=d;for(const x of Object.keys(u))u[x]===void 0&&delete u[x];const f=await r._getAppCheckToken(),g=f?`#${L4}=${encodeURIComponent(f)}`:"";return`${H4(r)}?${ld(u).slice(1)}${g}`}function H4({config:r}){return r.emulator?r0(r,M4):`https://${r.authDomain}/${R4}`}const tp="webStorageSupport";class O4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=AE,this._completeRedirectFn=d4,this._overrideRedirectResult=o4}async _openPopup(e,t,s,A){Ra(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await Zw(e,t,s,Xp(),A);return D4(e,l,o0())}async _openRedirect(e,t,s,A){await this._originValidation(e);const l=await Zw(e,t,s,Xp(),A);return zU(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:A,promise:l}=this.eventManagers[t];return A?Promise.resolve(A):(Ra(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await _4(e),s=new h4(e);return t.register("authEvent",A=>(Je(A?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(A.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(tp,{type:tp},A=>{const l=A?.[0]?.[tp];l!==void 0&&t(!!l),ra(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=x4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Z1()||q1()||a0()}}const P4=O4;var eB="@firebase/auth",tB="1.12.0";class V4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function z4(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function K4(r){tl(new DA("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),A=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:d,authDomain:u}=s.options;Je(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const f={apiKey:d,authDomain:u,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eE(r)},g=new vU(s,A,l,f);return SU(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),tl(new DA("auth-internal",e=>{const t=wf(e.getProvider("auth").getImmediate());return(s=>new V4(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Di(eB,tB,z4(r)),Di(eB,tB,"esm2020")}const G4=300,q4=U1("authIdTokenMaxAge")||G4;let rB=null;const Y4=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>q4)return;const A=t?.token;rB!==A&&(rB=A,await fetch(r,{method:A?"POST":"DELETE",headers:A?{Authorization:`Bearer ${A}`}:{}}))};function mE(r=k1()){const e=Wx(r,"auth");if(e.isInitialized())return e.getImmediate();const t=NU(r,{popupRedirectResolver:P4,persistence:[ZU,OU,AE]}),s=U1("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const d=Y4(l.toString());kU(t,d,()=>d(t.currentUser)),DU(t,u=>d(u))}}const A=_1("auth");return A&&jU(t,`http://${A}`),t}function $4(){return document.getElementsByTagName("head")?.[0]??document}wU({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=A=>{const l=jn("internal-error");l.customData=A,t(l)},s.type="text/javascript",s.charset="UTF-8",$4().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});K4("Browser");var sB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ki,gE;(function(){var r;function e(E,j){function B(){}B.prototype=j.prototype,E.F=j.prototype,E.prototype=new B,E.prototype.constructor=E,E.D=function(I,_,Q){for(var U=Array(arguments.length-2),T=2;T<arguments.length;T++)U[T-2]=arguments[T];return j.prototype[_].apply(I,U)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function A(E,j,B){B||(B=0);const I=Array(16);if(typeof j=="string")for(var _=0;_<16;++_)I[_]=j.charCodeAt(B++)|j.charCodeAt(B++)<<8|j.charCodeAt(B++)<<16|j.charCodeAt(B++)<<24;else for(_=0;_<16;++_)I[_]=j[B++]|j[B++]<<8|j[B++]<<16|j[B++]<<24;j=E.g[0],B=E.g[1],_=E.g[2];let Q=E.g[3],U;U=j+(Q^B&(_^Q))+I[0]+3614090360&4294967295,j=B+(U<<7&4294967295|U>>>25),U=Q+(_^j&(B^_))+I[1]+3905402710&4294967295,Q=j+(U<<12&4294967295|U>>>20),U=_+(B^Q&(j^B))+I[2]+606105819&4294967295,_=Q+(U<<17&4294967295|U>>>15),U=B+(j^_&(Q^j))+I[3]+3250441966&4294967295,B=_+(U<<22&4294967295|U>>>10),U=j+(Q^B&(_^Q))+I[4]+4118548399&4294967295,j=B+(U<<7&4294967295|U>>>25),U=Q+(_^j&(B^_))+I[5]+1200080426&4294967295,Q=j+(U<<12&4294967295|U>>>20),U=_+(B^Q&(j^B))+I[6]+2821735955&4294967295,_=Q+(U<<17&4294967295|U>>>15),U=B+(j^_&(Q^j))+I[7]+4249261313&4294967295,B=_+(U<<22&4294967295|U>>>10),U=j+(Q^B&(_^Q))+I[8]+1770035416&4294967295,j=B+(U<<7&4294967295|U>>>25),U=Q+(_^j&(B^_))+I[9]+2336552879&4294967295,Q=j+(U<<12&4294967295|U>>>20),U=_+(B^Q&(j^B))+I[10]+4294925233&4294967295,_=Q+(U<<17&4294967295|U>>>15),U=B+(j^_&(Q^j))+I[11]+2304563134&4294967295,B=_+(U<<22&4294967295|U>>>10),U=j+(Q^B&(_^Q))+I[12]+1804603682&4294967295,j=B+(U<<7&4294967295|U>>>25),U=Q+(_^j&(B^_))+I[13]+4254626195&4294967295,Q=j+(U<<12&4294967295|U>>>20),U=_+(B^Q&(j^B))+I[14]+2792965006&4294967295,_=Q+(U<<17&4294967295|U>>>15),U=B+(j^_&(Q^j))+I[15]+1236535329&4294967295,B=_+(U<<22&4294967295|U>>>10),U=j+(_^Q&(B^_))+I[1]+4129170786&4294967295,j=B+(U<<5&4294967295|U>>>27),U=Q+(B^_&(j^B))+I[6]+3225465664&4294967295,Q=j+(U<<9&4294967295|U>>>23),U=_+(j^B&(Q^j))+I[11]+643717713&4294967295,_=Q+(U<<14&4294967295|U>>>18),U=B+(Q^j&(_^Q))+I[0]+3921069994&4294967295,B=_+(U<<20&4294967295|U>>>12),U=j+(_^Q&(B^_))+I[5]+3593408605&4294967295,j=B+(U<<5&4294967295|U>>>27),U=Q+(B^_&(j^B))+I[10]+38016083&4294967295,Q=j+(U<<9&4294967295|U>>>23),U=_+(j^B&(Q^j))+I[15]+3634488961&4294967295,_=Q+(U<<14&4294967295|U>>>18),U=B+(Q^j&(_^Q))+I[4]+3889429448&4294967295,B=_+(U<<20&4294967295|U>>>12),U=j+(_^Q&(B^_))+I[9]+568446438&4294967295,j=B+(U<<5&4294967295|U>>>27),U=Q+(B^_&(j^B))+I[14]+3275163606&4294967295,Q=j+(U<<9&4294967295|U>>>23),U=_+(j^B&(Q^j))+I[3]+4107603335&4294967295,_=Q+(U<<14&4294967295|U>>>18),U=B+(Q^j&(_^Q))+I[8]+1163531501&4294967295,B=_+(U<<20&4294967295|U>>>12),U=j+(_^Q&(B^_))+I[13]+2850285829&4294967295,j=B+(U<<5&4294967295|U>>>27),U=Q+(B^_&(j^B))+I[2]+4243563512&4294967295,Q=j+(U<<9&4294967295|U>>>23),U=_+(j^B&(Q^j))+I[7]+1735328473&4294967295,_=Q+(U<<14&4294967295|U>>>18),U=B+(Q^j&(_^Q))+I[12]+2368359562&4294967295,B=_+(U<<20&4294967295|U>>>12),U=j+(B^_^Q)+I[5]+4294588738&4294967295,j=B+(U<<4&4294967295|U>>>28),U=Q+(j^B^_)+I[8]+2272392833&4294967295,Q=j+(U<<11&4294967295|U>>>21),U=_+(Q^j^B)+I[11]+1839030562&4294967295,_=Q+(U<<16&4294967295|U>>>16),U=B+(_^Q^j)+I[14]+4259657740&4294967295,B=_+(U<<23&4294967295|U>>>9),U=j+(B^_^Q)+I[1]+2763975236&4294967295,j=B+(U<<4&4294967295|U>>>28),U=Q+(j^B^_)+I[4]+1272893353&4294967295,Q=j+(U<<11&4294967295|U>>>21),U=_+(Q^j^B)+I[7]+4139469664&4294967295,_=Q+(U<<16&4294967295|U>>>16),U=B+(_^Q^j)+I[10]+3200236656&4294967295,B=_+(U<<23&4294967295|U>>>9),U=j+(B^_^Q)+I[13]+681279174&4294967295,j=B+(U<<4&4294967295|U>>>28),U=Q+(j^B^_)+I[0]+3936430074&4294967295,Q=j+(U<<11&4294967295|U>>>21),U=_+(Q^j^B)+I[3]+3572445317&4294967295,_=Q+(U<<16&4294967295|U>>>16),U=B+(_^Q^j)+I[6]+76029189&4294967295,B=_+(U<<23&4294967295|U>>>9),U=j+(B^_^Q)+I[9]+3654602809&4294967295,j=B+(U<<4&4294967295|U>>>28),U=Q+(j^B^_)+I[12]+3873151461&4294967295,Q=j+(U<<11&4294967295|U>>>21),U=_+(Q^j^B)+I[15]+530742520&4294967295,_=Q+(U<<16&4294967295|U>>>16),U=B+(_^Q^j)+I[2]+3299628645&4294967295,B=_+(U<<23&4294967295|U>>>9),U=j+(_^(B|~Q))+I[0]+4096336452&4294967295,j=B+(U<<6&4294967295|U>>>26),U=Q+(B^(j|~_))+I[7]+1126891415&4294967295,Q=j+(U<<10&4294967295|U>>>22),U=_+(j^(Q|~B))+I[14]+2878612391&4294967295,_=Q+(U<<15&4294967295|U>>>17),U=B+(Q^(_|~j))+I[5]+4237533241&4294967295,B=_+(U<<21&4294967295|U>>>11),U=j+(_^(B|~Q))+I[12]+1700485571&4294967295,j=B+(U<<6&4294967295|U>>>26),U=Q+(B^(j|~_))+I[3]+2399980690&4294967295,Q=j+(U<<10&4294967295|U>>>22),U=_+(j^(Q|~B))+I[10]+4293915773&4294967295,_=Q+(U<<15&4294967295|U>>>17),U=B+(Q^(_|~j))+I[1]+2240044497&4294967295,B=_+(U<<21&4294967295|U>>>11),U=j+(_^(B|~Q))+I[8]+1873313359&4294967295,j=B+(U<<6&4294967295|U>>>26),U=Q+(B^(j|~_))+I[15]+4264355552&4294967295,Q=j+(U<<10&4294967295|U>>>22),U=_+(j^(Q|~B))+I[6]+2734768916&4294967295,_=Q+(U<<15&4294967295|U>>>17),U=B+(Q^(_|~j))+I[13]+1309151649&4294967295,B=_+(U<<21&4294967295|U>>>11),U=j+(_^(B|~Q))+I[4]+4149444226&4294967295,j=B+(U<<6&4294967295|U>>>26),U=Q+(B^(j|~_))+I[11]+3174756917&4294967295,Q=j+(U<<10&4294967295|U>>>22),U=_+(j^(Q|~B))+I[2]+718787259&4294967295,_=Q+(U<<15&4294967295|U>>>17),U=B+(Q^(_|~j))+I[9]+3951481745&4294967295,E.g[0]=E.g[0]+j&4294967295,E.g[1]=E.g[1]+(_+(U<<21&4294967295|U>>>11))&4294967295,E.g[2]=E.g[2]+_&4294967295,E.g[3]=E.g[3]+Q&4294967295}s.prototype.v=function(E,j){j===void 0&&(j=E.length);const B=j-this.blockSize,I=this.C;let _=this.h,Q=0;for(;Q<j;){if(_==0)for(;Q<=B;)A(this,E,Q),Q+=this.blockSize;if(typeof E=="string"){for(;Q<j;)if(I[_++]=E.charCodeAt(Q++),_==this.blockSize){A(this,I),_=0;break}}else for(;Q<j;)if(I[_++]=E[Q++],_==this.blockSize){A(this,I),_=0;break}}this.h=_,this.o+=j},s.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var j=1;j<E.length-8;++j)E[j]=0;j=this.o*8;for(var B=E.length-8;B<E.length;++B)E[B]=j&255,j/=256;for(this.v(E),E=Array(16),j=0,B=0;B<4;++B)for(let I=0;I<32;I+=8)E[j++]=this.g[B]>>>I&255;return E};function l(E,j){var B=u;return Object.prototype.hasOwnProperty.call(B,E)?B[E]:B[E]=j(E)}function d(E,j){this.h=j;const B=[];let I=!0;for(let _=E.length-1;_>=0;_--){const Q=E[_]|0;I&&Q==j||(B[_]=Q,I=!1)}this.g=B}var u={};function f(E){return-128<=E&&E<128?l(E,function(j){return new d([j|0],j<0?-1:0)}):new d([E|0],E<0?-1:0)}function g(E){if(isNaN(E)||!isFinite(E))return y;if(E<0)return P(g(-E));const j=[];let B=1;for(let I=0;E>=B;I++)j[I]=E/B|0,B*=4294967296;return new d(j,0)}function x(E,j){if(E.length==0)throw Error("number format error: empty string");if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(E.charAt(0)=="-")return P(x(E.substring(1),j));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const B=g(Math.pow(j,8));let I=y;for(let Q=0;Q<E.length;Q+=8){var _=Math.min(8,E.length-Q);const U=parseInt(E.substring(Q,Q+_),j);_<8?(_=g(Math.pow(j,_)),I=I.j(_).add(g(U))):(I=I.j(B),I=I.add(g(U)))}return I}var y=f(0),v=f(1),N=f(16777216);r=d.prototype,r.m=function(){if(S(this))return-P(this).m();let E=0,j=1;for(let B=0;B<this.g.length;B++){const I=this.i(B);E+=(I>=0?I:4294967296+I)*j,j*=4294967296}return E},r.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(R(this))return"0";if(S(this))return"-"+P(this).toString(E);const j=g(Math.pow(E,6));var B=this;let I="";for(;;){const _=K(B,j).g;B=V(B,_.j(j));let Q=((B.g.length>0?B.g[0]:B.h)>>>0).toString(E);if(B=_,R(B))return Q+I;for(;Q.length<6;)Q="0"+Q;I=Q+I}},r.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function R(E){if(E.h!=0)return!1;for(let j=0;j<E.g.length;j++)if(E.g[j]!=0)return!1;return!0}function S(E){return E.h==-1}r.l=function(E){return E=V(this,E),S(E)?-1:R(E)?0:1};function P(E){const j=E.g.length,B=[];for(let I=0;I<j;I++)B[I]=~E.g[I];return new d(B,~E.h).add(v)}r.abs=function(){return S(this)?P(this):this},r.add=function(E){const j=Math.max(this.g.length,E.g.length),B=[];let I=0;for(let _=0;_<=j;_++){let Q=I+(this.i(_)&65535)+(E.i(_)&65535),U=(Q>>>16)+(this.i(_)>>>16)+(E.i(_)>>>16);I=U>>>16,Q&=65535,U&=65535,B[_]=U<<16|Q}return new d(B,B[B.length-1]&-2147483648?-1:0)};function V(E,j){return E.add(P(j))}r.j=function(E){if(R(this)||R(E))return y;if(S(this))return S(E)?P(this).j(P(E)):P(P(this).j(E));if(S(E))return P(this.j(P(E)));if(this.l(N)<0&&E.l(N)<0)return g(this.m()*E.m());const j=this.g.length+E.g.length,B=[];for(var I=0;I<2*j;I++)B[I]=0;for(I=0;I<this.g.length;I++)for(let _=0;_<E.g.length;_++){const Q=this.i(I)>>>16,U=this.i(I)&65535,T=E.i(_)>>>16,W=E.i(_)&65535;B[2*I+2*_]+=U*W,$(B,2*I+2*_),B[2*I+2*_+1]+=Q*W,$(B,2*I+2*_+1),B[2*I+2*_+1]+=U*T,$(B,2*I+2*_+1),B[2*I+2*_+2]+=Q*T,$(B,2*I+2*_+2)}for(E=0;E<j;E++)B[E]=B[2*E+1]<<16|B[2*E];for(E=j;E<2*j;E++)B[E]=0;return new d(B,0)};function $(E,j){for(;(E[j]&65535)!=E[j];)E[j+1]+=E[j]>>>16,E[j]&=65535,j++}function G(E,j){this.g=E,this.h=j}function K(E,j){if(R(j))throw Error("division by zero");if(R(E))return new G(y,y);if(S(E))return j=K(P(E),j),new G(P(j.g),P(j.h));if(S(j))return j=K(E,P(j)),new G(P(j.g),j.h);if(E.g.length>30){if(S(E)||S(j))throw Error("slowDivide_ only works with positive integers.");for(var B=v,I=j;I.l(E)<=0;)B=Y(B),I=Y(I);var _=q(B,1),Q=q(I,1);for(I=q(I,2),B=q(B,2);!R(I);){var U=Q.add(I);U.l(E)<=0&&(_=_.add(B),Q=U),I=q(I,1),B=q(B,1)}return j=V(E,_.j(j)),new G(_,j)}for(_=y;E.l(j)>=0;){for(B=Math.max(1,Math.floor(E.m()/j.m())),I=Math.ceil(Math.log(B)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),Q=g(B),U=Q.j(j);S(U)||U.l(E)>0;)B-=I,Q=g(B),U=Q.j(j);R(Q)&&(Q=v),_=_.add(Q),E=V(E,U)}return new G(_,E)}r.B=function(E){return K(this,E).h},r.and=function(E){const j=Math.max(this.g.length,E.g.length),B=[];for(let I=0;I<j;I++)B[I]=this.i(I)&E.i(I);return new d(B,this.h&E.h)},r.or=function(E){const j=Math.max(this.g.length,E.g.length),B=[];for(let I=0;I<j;I++)B[I]=this.i(I)|E.i(I);return new d(B,this.h|E.h)},r.xor=function(E){const j=Math.max(this.g.length,E.g.length),B=[];for(let I=0;I<j;I++)B[I]=this.i(I)^E.i(I);return new d(B,this.h^E.h)};function Y(E){const j=E.g.length+1,B=[];for(let I=0;I<j;I++)B[I]=E.i(I)<<1|E.i(I-1)>>>31;return new d(B,E.h)}function q(E,j){const B=j>>5;j%=32;const I=E.g.length-B,_=[];for(let Q=0;Q<I;Q++)_[Q]=j>0?E.i(Q+B)>>>j|E.i(Q+B+1)<<32-j:E.i(Q+B);return new d(_,E.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,gE=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=g,d.fromString=x,ki=d}).apply(typeof sB<"u"?sB:typeof self<"u"?self:typeof window<"u"?window:{});var zu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var pE,bc,xE,_h,Zp,yE,bE,vE;(function(){var r,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof zu=="object"&&zu];for(var b=0;b<h.length;++b){var C=h[b];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var s=t(this);function A(h,b){if(b)e:{var C=s;h=h.split(".");for(var H=0;H<h.length-1;H++){var se=h[H];if(!(se in C))break e;C=C[se]}h=h[h.length-1],H=C[h],b=b(H),b!=H&&b!=null&&e(C,h,{configurable:!0,writable:!0,value:b})}}A("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),A("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),A("Object.entries",function(h){return h||function(b){var C=[],H;for(H in b)Object.prototype.hasOwnProperty.call(b,H)&&C.push([H,b[H]]);return C}});var l=l||{},d=this||self;function u(h){var b=typeof h;return b=="object"&&h!=null||b=="function"}function f(h,b,C){return h.call.apply(h.bind,arguments)}function g(h,b,C){return g=f,g.apply(null,arguments)}function x(h,b){var C=Array.prototype.slice.call(arguments,1);return function(){var H=C.slice();return H.push.apply(H,arguments),h.apply(this,H)}}function y(h,b){function C(){}C.prototype=b.prototype,h.Z=b.prototype,h.prototype=new C,h.prototype.constructor=h,h.Ob=function(H,se,le){for(var Ne=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)Ne[nt-2]=arguments[nt];return b.prototype[se].apply(H,Ne)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function N(h){const b=h.length;if(b>0){const C=Array(b);for(let H=0;H<b;H++)C[H]=h[H];return C}return[]}function R(h,b){for(let H=1;H<arguments.length;H++){const se=arguments[H];var C=typeof se;if(C=C!="object"?C:se?Array.isArray(se)?"array":C:"null",C=="array"||C=="object"&&typeof se.length=="number"){C=h.length||0;const le=se.length||0;h.length=C+le;for(let Ne=0;Ne<le;Ne++)h[C+Ne]=se[Ne]}else h.push(se)}}class S{constructor(b,C){this.i=b,this.j=C,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function P(h){d.setTimeout(()=>{throw h},0)}function V(){var h=E;let b=null;return h.g&&(b=h.g,h.g=h.g.next,h.g||(h.h=null),b.next=null),b}class ${constructor(){this.h=this.g=null}add(b,C){const H=G.get();H.set(b,C),this.h?this.h.next=H:this.g=H,this.h=H}}var G=new S(()=>new K,h=>h.reset());class K{constructor(){this.next=this.g=this.h=null}set(b,C){this.h=b,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,q=!1,E=new $,j=()=>{const h=Promise.resolve(void 0);Y=()=>{h.then(B)}};function B(){for(var h;h=V();){try{h.h.call(h.g)}catch(C){P(C)}var b=G;b.j(h),b.h<100&&(b.h++,h.next=b.g,b.g=h)}q=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _(h,b){this.type=h,this.g=this.target=b,this.defaultPrevented=!1}_.prototype.h=function(){this.defaultPrevented=!0};var Q=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,b=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const C=()=>{};d.addEventListener("test",C,b),d.removeEventListener("test",C,b)}catch{}return h})();function U(h){return/^[\s\xa0]*$/.test(h)}function T(h,b){_.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,b)}y(T,_),T.prototype.init=function(h,b){const C=this.type=h.type,H=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=b,b=h.relatedTarget,b||(C=="mouseover"?b=h.fromElement:C=="mouseout"&&(b=h.toElement)),this.relatedTarget=b,H?(this.clientX=H.clientX!==void 0?H.clientX:H.pageX,this.clientY=H.clientY!==void 0?H.clientY:H.pageY,this.screenX=H.screenX||0,this.screenY=H.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&T.Z.h.call(this)},T.prototype.h=function(){T.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var W="closure_listenable_"+(Math.random()*1e6|0),M=0;function F(h,b,C,H,se){this.listener=h,this.proxy=null,this.src=b,this.type=C,this.capture=!!H,this.ha=se,this.key=++M,this.da=this.fa=!1}function z(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ne(h,b,C){for(const H in h)b.call(C,h[H],H,h)}function te(h,b){for(const C in h)b.call(void 0,h[C],C,h)}function O(h){const b={};for(const C in h)b[C]=h[C];return b}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ae(h,b){let C,H;for(let se=1;se<arguments.length;se++){H=arguments[se];for(C in H)h[C]=H[C];for(let le=0;le<J.length;le++)C=J[le],Object.prototype.hasOwnProperty.call(H,C)&&(h[C]=H[C])}}function me(h){this.src=h,this.g={},this.h=0}me.prototype.add=function(h,b,C,H,se){const le=h.toString();h=this.g[le],h||(h=this.g[le]=[],this.h++);const Ne=Be(h,b,H,se);return Ne>-1?(b=h[Ne],C||(b.fa=!1)):(b=new F(b,this.src,le,!!H,se),b.fa=C,h.push(b)),b};function Ee(h,b){const C=b.type;if(C in h.g){var H=h.g[C],se=Array.prototype.indexOf.call(H,b,void 0),le;(le=se>=0)&&Array.prototype.splice.call(H,se,1),le&&(z(b),h.g[C].length==0&&(delete h.g[C],h.h--))}}function Be(h,b,C,H){for(let se=0;se<h.length;++se){const le=h[se];if(!le.da&&le.listener==b&&le.capture==!!C&&le.ha==H)return se}return-1}var Ue="closure_lm_"+(Math.random()*1e6|0),Me={};function $e(h,b,C,H,se){if(Array.isArray(b)){for(let le=0;le<b.length;le++)$e(h,b[le],C,H,se);return null}return C=ot(C),h&&h[W]?h.J(b,C,u(H)?!!H.capture:!1,se):Et(h,b,C,!1,H,se)}function Et(h,b,C,H,se,le){if(!b)throw Error("Invalid event type");const Ne=u(se)?!!se.capture:!!se;let nt=ge(h);if(nt||(h[Ue]=nt=new me(h)),C=nt.add(b,C,H,Ne,le),C.proxy)return C;if(H=Vt(),C.proxy=H,H.src=h,H.listener=C,h.addEventListener)Q||(se=Ne),se===void 0&&(se=!1),h.addEventListener(b.toString(),H,se);else if(h.attachEvent)h.attachEvent(Z(b.toString()),H);else if(h.addListener&&h.removeListener)h.addListener(H);else throw Error("addEventListener and attachEvent are unavailable.");return C}function Vt(){function h(C){return b.call(h.src,h.listener,C)}const b=he;return h}function ue(h,b,C,H,se){if(Array.isArray(b))for(var le=0;le<b.length;le++)ue(h,b[le],C,H,se);else H=u(H)?!!H.capture:!!H,C=ot(C),h&&h[W]?(h=h.i,le=String(b).toString(),le in h.g&&(b=h.g[le],C=Be(b,C,H,se),C>-1&&(z(b[C]),Array.prototype.splice.call(b,C,1),b.length==0&&(delete h.g[le],h.h--)))):h&&(h=ge(h))&&(b=h.g[b.toString()],h=-1,b&&(h=Be(b,C,H,se)),(C=h>-1?b[h]:null)&&L(C))}function L(h){if(typeof h!="number"&&h&&!h.da){var b=h.src;if(b&&b[W])Ee(b.i,h);else{var C=h.type,H=h.proxy;b.removeEventListener?b.removeEventListener(C,H,h.capture):b.detachEvent?b.detachEvent(Z(C),H):b.addListener&&b.removeListener&&b.removeListener(H),(C=ge(b))?(Ee(C,h),C.h==0&&(C.src=null,b[Ue]=null)):z(h)}}}function Z(h){return h in Me?Me[h]:Me[h]="on"+h}function he(h,b){if(h.da)h=!0;else{b=new T(b,this);const C=h.listener,H=h.ha||h.src;h.fa&&L(h),h=C.call(H,b)}return h}function ge(h){return h=h[Ue],h instanceof me?h:null}var Ge="__closure_events_fn_"+(Math.random()*1e9>>>0);function ot(h){return typeof h=="function"?h:(h[Ge]||(h[Ge]=function(b){return h.handleEvent(b)}),h[Ge])}function qe(){I.call(this),this.i=new me(this),this.M=this,this.G=null}y(qe,I),qe.prototype[W]=!0,qe.prototype.removeEventListener=function(h,b,C,H){ue(this,h,b,C,H)};function Le(h,b){var C,H=h.G;if(H)for(C=[];H;H=H.G)C.push(H);if(h=h.M,H=b.type||b,typeof b=="string")b=new _(b,h);else if(b instanceof _)b.target=b.target||h;else{var se=b;b=new _(H,h),Ae(b,se)}se=!0;let le,Ne;if(C)for(Ne=C.length-1;Ne>=0;Ne--)le=b.g=C[Ne],se=je(le,H,!0,b)&&se;if(le=b.g=h,se=je(le,H,!0,b)&&se,se=je(le,H,!1,b)&&se,C)for(Ne=0;Ne<C.length;Ne++)le=b.g=C[Ne],se=je(le,H,!1,b)&&se}qe.prototype.N=function(){if(qe.Z.N.call(this),this.i){var h=this.i;for(const b in h.g){const C=h.g[b];for(let H=0;H<C.length;H++)z(C[H]);delete h.g[b],h.h--}}this.G=null},qe.prototype.J=function(h,b,C,H){return this.i.add(String(h),b,!1,C,H)},qe.prototype.K=function(h,b,C,H){return this.i.add(String(h),b,!0,C,H)};function je(h,b,C,H){if(b=h.i.g[String(b)],!b)return!0;b=b.concat();let se=!0;for(let le=0;le<b.length;++le){const Ne=b[le];if(Ne&&!Ne.da&&Ne.capture==C){const nt=Ne.listener,ur=Ne.ha||Ne.src;Ne.fa&&Ee(h.i,Ne),se=nt.call(ur,H)!==!1&&se}}return se&&!H.defaultPrevented}function Xt(h,b){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:d.setTimeout(h,b||0)}function _r(h){h.g=Xt(()=>{h.g=null,h.i&&(h.i=!1,_r(h))},h.l);const b=h.h;h.h=null,h.m.apply(null,b)}class zt extends I{constructor(b,C){super(),this.m=b,this.l=C,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:_r(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ve(h){I.call(this),this.h=h,this.g={}}y(ve,I);var It=[];function Rr(h){ne(h.g,function(b,C){this.g.hasOwnProperty(C)&&L(b)},h),h.g={}}ve.prototype.N=function(){ve.Z.N.call(this),Rr(this)},ve.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wt=d.JSON.stringify,xr=d.JSON.parse,vs=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function rs(){}function de(){}var Fe={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function We(){_.call(this,"d")}y(We,_);function st(){_.call(this,"c")}y(st,_);var Ve={},et=null;function yr(){return et=et||new qe}Ve.Ia="serverreachability";function ss(h){_.call(this,Ve.Ia,h)}y(ss,_);function ns(h){const b=yr();Le(b,new ss(b))}Ve.STAT_EVENT="statevent";function ws(h,b){_.call(this,Ve.STAT_EVENT,h),this.stat=b}y(ws,_);function Kt(h){const b=yr();Le(b,new ws(b,h))}Ve.Ja="timingevent";function Is(h,b){_.call(this,Ve.Ja,h),this.size=b}y(Is,_);function qs(h,b){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},b)}function Kr(){this.g=!0}Kr.prototype.ua=function(){this.g=!1};function xl(h,b,C,H,se,le){h.info(function(){if(h.g)if(le){var Ne="",nt=le.split("&");for(let St=0;St<nt.length;St++){var ur=nt[St].split("=");if(ur.length>1){const Wt=ur[0];ur=ur[1];const Js=Wt.split("_");Ne=Js.length>=2&&Js[1]=="type"?Ne+(Wt+"="+ur+"&"):Ne+(Wt+"=redacted&")}}}else Ne=null;else Ne=le;return"XMLHTTP REQ ("+H+") [attempt "+se+"]: "+b+`
`+C+`
`+Ne})}function ca(h,b,C,H,se,le,Ne){h.info(function(){return"XMLHTTP RESP ("+H+") [ attempt "+se+"]: "+b+`
`+C+`
`+le+" "+Ne})}function Ys(h,b,C,H){h.info(function(){return"XMLHTTP TEXT ("+b+"): "+yl(h,C)+(H?" "+H:"")})}function Fn(h,b){h.info(function(){return"TIMEOUT: "+b})}Kr.prototype.info=function(){};function yl(h,b){if(!h.g)return b;if(!b)return null;try{const le=JSON.parse(b);if(le){for(h=0;h<le.length;h++)if(Array.isArray(le[h])){var C=le[h];if(!(C.length<2)){var H=C[1];if(Array.isArray(H)&&!(H.length<1)){var se=H[0];if(se!="noop"&&se!="stop"&&se!="close")for(let Ne=1;Ne<H.length;Ne++)H[Ne]=""}}}}return wt(le)}catch{return b}}var da={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Pa={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Yi;function ua(){}y(ua,rs),ua.prototype.g=function(){return new XMLHttpRequest},Yi=new ua;function mn(h){return encodeURIComponent(String(h))}function Va(h){var b=1;h=h.split(":");const C=[];for(;b>0&&h.length;)C.push(h.shift()),b--;return h.length&&C.push(h.join(":")),C}function hs(h,b,C,H){this.j=h,this.i=b,this.l=C,this.S=H||1,this.V=new ve(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ds}function Ds(){this.i=null,this.g="",this.h=!1}var ir={},dr={};function Bs(h,b,C){h.M=1,h.A=$i(br(b)),h.u=C,h.R=!0,pe(h,null)}function pe(h,b){h.F=Date.now(),Nt(h),h.B=br(h.A);var C=h.B,H=h.S;Array.isArray(H)||(H=[String(H)]),YA(C.i,"t",H),h.C=0,C=h.j.L,h.h=new Ds,h.g=kd(h.j,C?b:null,!h.u),h.P>0&&(h.O=new zt(g(h.Y,h,h.g),h.P)),b=h.V,C=h.g,H=h.ba;var se="readystatechange";Array.isArray(se)||(se&&(It[0]=se.toString()),se=It);for(let le=0;le<se.length;le++){const Ne=$e(C,se[le],H||b.handleEvent,!1,b.h||b);if(!Ne)break;b.g[Ne.key]=Ne}b=h.J?O(h.J):{},h.u?(h.v||(h.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,b)):(h.v="GET",h.g.ea(h.B,h.v,null,b)),ns(),xl(h.i,h.v,h.B,h.l,h.S,h.u)}hs.prototype.ba=function(h){h=h.target;const b=this.O;b&&xn(h)==3?b.j():this.Y(h)},hs.prototype.Y=function(h){try{if(h==this.g)e:{const nt=xn(this.g),ur=this.g.ya(),St=this.g.ca();if(!(nt<3)&&(nt!=3||this.g&&(this.h.h||this.g.la()||Gr(this.g)))){this.K||nt!=4||ur==7||(ur==8||St<=0?ns(3):ns(2)),Tr(this);var b=this.g.ca();this.X=b;var C=Pe(this);if(this.o=b==200,ca(this.i,this.v,this.B,this.l,this.S,nt,b),this.o){if(this.U&&!this.L){t:{if(this.g){var H,se=this.g;if((H=se.g?se.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(H)){var le=H;break t}}le=null}if(h=le)Ys(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,rr(this,h);else{this.o=!1,this.m=3,Kt(12),Ar(this),Xe(this);break e}}if(this.R){h=!0;let Wt;for(;!this.K&&this.C<C.length;)if(Wt=lt(this,C),Wt==dr){nt==4&&(this.m=4,Kt(14),h=!1),Ys(this.i,this.l,null,"[Incomplete Response]");break}else if(Wt==ir){this.m=4,Kt(15),Ys(this.i,this.l,C,"[Invalid Chunk]"),h=!1;break}else Ys(this.i,this.l,Wt,null),rr(this,Wt);if(Ce(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),nt!=4||C.length!=0||this.h.h||(this.m=1,Kt(16),h=!1),this.o=this.o&&h,!h)Ys(this.i,this.l,C,"[Invalid Chunked Response]"),Ar(this),Xe(this);else if(C.length>0&&!this.W){this.W=!0;var Ne=this.j;Ne.g==this&&Ne.aa&&!Ne.P&&(Ne.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),Tl(Ne),Ne.P=!0,Kt(11))}}else Ys(this.i,this.l,C,null),rr(this,C);nt==4&&Ar(this),this.o&&!this.K&&(nt==4?Qd(this.j,this):(this.o=!1,Nt(this)))}else fa(this.g),b==400&&C.indexOf("Unknown SID")>0?(this.m=3,Kt(12)):(this.m=0,Kt(13)),Ar(this),Xe(this)}}}catch{}};function Pe(h){if(!Ce(h))return h.g.la();const b=Gr(h.g);if(b==="")return"";let C="";const H=b.length,se=xn(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Ar(h),Xe(h),"";h.h.i=new d.TextDecoder}for(let le=0;le<H;le++)h.h.h=!0,C+=h.h.i.decode(b[le],{stream:!(se&&le==H-1)});return b.length=0,h.h.g+=C,h.C=0,h.h.g}function Ce(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function lt(h,b){var C=h.C,H=b.indexOf(`
`,C);return H==-1?dr:(C=Number(b.substring(C,H)),isNaN(C)?ir:(H+=1,H+C>b.length?dr:(b=b.slice(H,H+C),h.C=H+C,b)))}hs.prototype.cancel=function(){this.K=!0,Ar(this)};function Nt(h){h.T=Date.now()+h.H,Jt(h,h.H)}function Jt(h,b){if(h.D!=null)throw Error("WatchDog timer not null");h.D=qs(g(h.aa,h),b)}function Tr(h){h.D&&(d.clearTimeout(h.D),h.D=null)}hs.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Fn(this.i,this.B),this.M!=2&&(ns(),Kt(17)),Ar(this),this.m=2,Xe(this)):Jt(this,this.T-h)};function Xe(h){h.j.I==0||h.K||Qd(h.j,h)}function Ar(h){Tr(h);var b=h.O;b&&typeof b.dispose=="function"&&b.dispose(),h.O=null,Rr(h.V),h.g&&(b=h.g,h.g=null,b.abort(),b.dispose())}function rr(h,b){try{var C=h.j;if(C.I!=0&&(C.g==h||gs(C.h,h))){if(!h.L&&gs(C.h,h)&&C.I==3){try{var H=C.Ba.g.parse(b)}catch{H=null}if(Array.isArray(H)&&H.length==3){var se=H;if(se[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<h.F)ZA(C),Ja(C);else break e;rA(C),Kt(18)}}else C.xa=se[1],0<C.xa-C.K&&se[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=qs(g(C.Va,C),6e3));ms(C.h)<=1&&C.ta&&(C.ta=void 0)}else On(C,11)}else if((h.L||C.g==h)&&ZA(C),!U(b))for(se=C.Ba.g.parse(b),b=0;b<se.length;b++){let St=se[b];const Wt=St[0];if(!(Wt<=C.K))if(C.K=Wt,St=St[1],C.I==2)if(St[0]=="c"){C.M=St[1],C.ba=St[2];const Js=St[3];Js!=null&&(C.ka=Js,C.j.info("VER="+C.ka));const Pn=St[4];Pn!=null&&(C.za=Pn,C.j.info("SVER="+C.za));const yn=St[5];yn!=null&&typeof yn=="number"&&yn>0&&(H=1.5*yn,C.O=H,C.j.info("backChannelRequestTimeoutMs_="+H)),H=C;const bn=h.g;if(bn){const sA=bn.g?bn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(sA){var le=H.h;le.g||sA.indexOf("spdy")==-1&&sA.indexOf("quic")==-1&&sA.indexOf("h2")==-1||(le.j=le.l,le.g=new Set,le.h&&(In(le,le.h),le.h=null))}if(H.G){const eo=bn.g?bn.g.getResponseHeader("X-HTTP-Session-Id"):null;eo&&(H.wa=eo,Ut(H.J,H.G,eo))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-h.F,C.j.info("Handshake RTT: "+C.T+"ms")),H=C;var Ne=h;if(H.na=Dd(H,H.L?H.ba:null,H.W),Ne.L){Dn(H.h,Ne);var nt=Ne,ur=H.O;ur&&(nt.H=ur),nt.D&&(Tr(nt),Nt(nt)),H.g=Ne}else Td(H);C.i.length>0&&Hn(C)}else St[0]!="stop"&&St[0]!="close"||On(C,7);else C.I==3&&(St[0]=="stop"||St[0]=="close"?St[0]=="stop"?On(C,7):jl(C):St[0]!="noop"&&C.l&&C.l.qa(St),C.A=0)}}ns(4)}catch{}}var Ht=class{constructor(h,b){this.g=h,this.map=b}};function fs(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ur(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ms(h){return h.h?1:h.g?h.g.size:0}function gs(h,b){return h.h?h.h==b:h.g?h.g.has(b):!1}function In(h,b){h.g?h.g.add(b):h.h=b}function Dn(h,b){h.h&&h.h==b?h.h=null:h.g&&h.g.has(b)&&h.g.delete(b)}fs.prototype.cancel=function(){if(this.i=bl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function bl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let b=h.i;for(const C of h.g.values())b=b.concat(C.G);return b}return N(h.i)}var Cd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function GA(h,b){if(h){h=h.split("&");for(let C=0;C<h.length;C++){const H=h[C].indexOf("=");let se,le=null;H>=0?(se=h[C].substring(0,H),le=h[C].substring(H+1)):se=h[C],b(se,le?decodeURIComponent(le.replace(/\+/g," ")):"")}}}function ks(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;h instanceof ks?(this.l=h.l,Mr(this,h.j),this.o=h.o,this.g=h.g,za(this,h.u),this.h=h.h,vl(this,jd(h.i)),this.m=h.m):h&&(b=String(h).match(Cd))?(this.l=!1,Mr(this,b[1]||"",!0),this.o=kn(b[2]||""),this.g=kn(b[3]||"",!0),za(this,b[4]),this.h=kn(b[5]||"",!0),vl(this,b[6]||"",!0),this.m=kn(b[7]||"")):(this.l=!1,this.i=new Ga(null,this.l))}ks.prototype.toString=function(){const h=[];var b=this.j;b&&h.push(Xi(b,qA,!0),":");var C=this.g;return(C||b=="file")&&(h.push("//"),(b=this.o)&&h.push(Xi(b,qA,!0),"@"),h.push(mn(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&h.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&h.push("/"),h.push(Xi(C,C.charAt(0)=="/"?wl:Ed,!0))),(C=this.i.toString())&&h.push("?",C),(C=this.m)&&h.push("#",Xi(C,Nd)),h.join("")},ks.prototype.resolve=function(h){const b=br(this);let C=!!h.j;C?Mr(b,h.j):C=!!h.o,C?b.o=h.o:C=!!h.g,C?b.g=h.g:C=h.u!=null;var H=h.h;if(C)za(b,h.u);else if(C=!!h.h){if(H.charAt(0)!="/")if(this.g&&!this.h)H="/"+H;else{var se=b.h.lastIndexOf("/");se!=-1&&(H=b.h.slice(0,se+1)+H)}if(se=H,se==".."||se==".")H="";else if(se.indexOf("./")!=-1||se.indexOf("/.")!=-1){H=se.lastIndexOf("/",0)==0,se=se.split("/");const le=[];for(let Ne=0;Ne<se.length;){const nt=se[Ne++];nt=="."?H&&Ne==se.length&&le.push(""):nt==".."?((le.length>1||le.length==1&&le[0]!="")&&le.pop(),H&&Ne==se.length&&le.push("")):(le.push(nt),H=!0)}H=le.join("/")}else H=se}return C?b.h=H:C=h.i.toString()!=="",C?vl(b,jd(h.i)):C=!!h.m,C&&(b.m=h.m),b};function br(h){return new ks(h)}function Mr(h,b,C){h.j=C?kn(b,!0):b,h.j&&(h.j=h.j.replace(/:$/,""))}function za(h,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);h.u=b}else h.u=null}function vl(h,b,C){b instanceof Ga?(h.i=b,$A(h.i,h.l)):(C||(b=Xi(b,Ka)),h.i=new Ga(b,h.l))}function Ut(h,b,C){h.i.set(b,C)}function $i(h){return Ut(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function kn(h,b){return h?b?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Xi(h,b,C){return typeof h=="string"?(h=encodeURI(h).replace(b,Cs),C&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Cs(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var qA=/[#\/\?@]/g,Ed=/[#\?:]/g,wl=/[#\?]/g,Ka=/[#\?@]/g,Nd=/#/g;function Ga(h,b){this.h=this.g=null,this.i=h||null,this.j=!!b}function Es(h){h.g||(h.g=new Map,h.h=0,h.i&&GA(h.i,function(b,C){h.add(decodeURIComponent(b.replace(/\+/g," ")),C)}))}r=Ga.prototype,r.add=function(h,b){Es(this),this.i=null,h=qa(this,h);let C=this.g.get(h);return C||this.g.set(h,C=[]),C.push(b),this.h+=1,this};function Sd(h,b){Es(h),b=qa(h,b),h.g.has(b)&&(h.i=null,h.h-=h.g.get(b).length,h.g.delete(b))}function Bl(h,b){return Es(h),b=qa(h,b),h.g.has(b)}r.forEach=function(h,b){Es(this),this.g.forEach(function(C,H){C.forEach(function(se){h.call(b,se,H,this)},this)},this)};function Cl(h,b){Es(h);let C=[];if(typeof b=="string")Bl(h,b)&&(C=C.concat(h.g.get(qa(h,b))));else for(h=Array.from(h.g.values()),b=0;b<h.length;b++)C=C.concat(h[b]);return C}r.set=function(h,b){return Es(this),this.i=null,h=qa(this,h),Bl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[b]),this.h+=1,this},r.get=function(h,b){return h?(h=Cl(this,h),h.length>0?String(h[0]):b):b};function YA(h,b,C){Sd(h,b),C.length>0&&(h.i=null,h.g.set(qa(h,b),N(C)),h.h+=C.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],b=Array.from(this.g.keys());for(let H=0;H<b.length;H++){var C=b[H];const se=mn(C);C=Cl(this,C);for(let le=0;le<C.length;le++){let Ne=se;C[le]!==""&&(Ne+="="+mn(C[le])),h.push(Ne)}}return this.i=h.join("&")};function jd(h){const b=new Ga;return b.i=h.i,h.g&&(b.g=new Map(h.g),b.h=h.h),b}function qa(h,b){return b=String(b),h.j&&(b=b.toLowerCase()),b}function $A(h,b){b&&!h.j&&(Es(h),h.i=null,h.g.forEach(function(C,H){const se=H.toLowerCase();H!=se&&(Sd(this,H),YA(this,se,C))},h)),h.j=b}function gn(h,b){const C=new Kr;if(d.Image){const H=new Image;H.onload=x($s,C,"TestLoadImage: loaded",!0,b,H),H.onerror=x($s,C,"TestLoadImage: error",!1,b,H),H.onabort=x($s,C,"TestLoadImage: abort",!1,b,H),H.ontimeout=x($s,C,"TestLoadImage: timeout",!1,b,H),d.setTimeout(function(){H.ontimeout&&H.ontimeout()},1e4),H.src=h}else b(!1)}function El(h,b){const C=new Kr,H=new AbortController,se=setTimeout(()=>{H.abort(),$s(C,"TestPingServer: timeout",!1,b)},1e4);fetch(h,{signal:H.signal}).then(le=>{clearTimeout(se),le.ok?$s(C,"TestPingServer: ok",!0,b):$s(C,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(se),$s(C,"TestPingServer: error",!1,b)})}function $s(h,b,C,H,se){try{se&&(se.onload=null,se.onerror=null,se.onabort=null,se.ontimeout=null),H(C)}catch{}}function Ya(){this.g=new vs}function Rn(h){this.i=h.Sb||null,this.h=h.ab||!1}y(Rn,rs),Rn.prototype.g=function(){return new Ji(this.i,this.h)};function Ji(h,b){qe.call(this),this.H=h,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(Ji,qe),r=Ji.prototype,r.open=function(h,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=b,this.readyState=1,pn(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(b.body=h),(this.H||d).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,$a(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,pn(this)),this.g&&(this.readyState=3,pn(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;XA(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function XA(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var b=h.value?h.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!h.done}))&&(this.response=this.responseText+=b)}h.done?$a(this):pn(this),this.readyState==3&&XA(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,$a(this))},r.Na=function(h){this.g&&(this.response=h,$a(this))},r.ga=function(){this.g&&$a(this)};function $a(h){h.readyState=4,h.l=null,h.j=null,h.B=null,pn(h)}r.setRequestHeader=function(h,b){this.A.append(h,b)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],b=this.h.entries();for(var C=b.next();!C.done;)C=C.value,h.push(C[0]+": "+C[1]),C=b.next();return h.join(`\r
`)};function pn(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ji.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Xs(h){let b="";return ne(h,function(C,H){b+=H,b+=":",b+=C,b+=`\r
`}),b}function Wi(h,b,C){e:{for(H in C){var H=!1;break e}H=!0}H||(C=Xs(C),typeof h=="string"?C!=null&&mn(C):Ut(h,b,C))}function Dt(h){qe.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(Dt,qe);var Mn=/^https?$/i,Nl=["POST","PUT"];r=Dt.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,b,C,H){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);b=b?b.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Yi.g(),this.g.onreadystatechange=v(g(this.Ca,this));try{this.B=!0,this.g.open(b,String(h),!0),this.B=!1}catch(le){Zi(this,le);return}if(h=C||"",C=new Map(this.headers),H)if(Object.getPrototypeOf(H)===Object.prototype)for(var se in H)C.set(se,H[se]);else if(typeof H.keys=="function"&&typeof H.get=="function")for(const le of H.keys())C.set(le,H.get(le));else throw Error("Unknown input type for opt_headers: "+String(H));H=Array.from(C.keys()).find(le=>le.toLowerCase()=="content-type"),se=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(Nl,b,void 0)>=0)||H||se||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[le,Ne]of C)this.g.setRequestHeader(le,Ne);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(le){Zi(this,le)}};function Zi(h,b){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=b,h.o=5,Sl(h),ha(h)}function Sl(h){h.A||(h.A=!0,Le(h,"complete"),Le(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Le(this,"complete"),Le(this,"abort"),ha(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ha(this,!0)),Dt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?eA(this):this.Xa())},r.Xa=function(){eA(this)};function eA(h){if(h.h&&typeof l<"u"){if(h.v&&xn(h)==4)setTimeout(h.Ca.bind(h),0);else if(Le(h,"readystatechange"),xn(h)==4){h.h=!1;try{const le=h.ca();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var C;if(!(C=b)){var H;if(H=le===0){let Ne=String(h.D).match(Cd)[1]||null;!Ne&&d.self&&d.self.location&&(Ne=d.self.location.protocol.slice(0,-1)),H=!Mn.test(Ne?Ne.toLowerCase():"")}C=H}if(C)Le(h,"complete"),Le(h,"success");else{h.o=6;try{var se=xn(h)>2?h.g.statusText:""}catch{se=""}h.l=se+" ["+h.ca()+"]",Sl(h)}}finally{ha(h)}}}}function ha(h,b){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const C=h.g;h.g=null,b||Le(h,"ready");try{C.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function xn(h){return h.g?h.g.readyState:0}r.ca=function(){try{return xn(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var b=this.g.responseText;return h&&b.indexOf(h)==0&&(b=b.substring(h.length)),xr(b)}};function Gr(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function fa(h){const b={};h=(h.g&&xn(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let H=0;H<h.length;H++){if(U(h[H]))continue;var C=Va(h[H]);const se=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const le=b[se]||[];b[se]=le,le.push(C)}te(b,function(H){return H.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ln(h,b,C){return C&&C.internalChannelParams&&C.internalChannelParams[h]||b}function Xa(h){this.za=0,this.i=[],this.j=new Kr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ln("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ln("baseRetryDelayMs",5e3,h),this.Za=Ln("retryDelaySeedMs",1e4,h),this.Ta=Ln("forwardChannelMaxRetries",2,h),this.va=Ln("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new fs(h&&h.concurrentRequestLimit),this.Ba=new Ya,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Xa.prototype,r.ka=8,r.I=1,r.connect=function(h,b,C,H){Kt(0),this.W=h,this.H=b||{},C&&H!==void 0&&(this.H.OSID=C,this.H.OAID=H),this.F=this.X,this.J=Dd(this,null,this.W),Hn(this)};function jl(h){if(JA(h),h.I==3){var b=h.V++,C=br(h.J);if(Ut(C,"SID",h.M),Ut(C,"RID",b),Ut(C,"TYPE","terminate"),tA(h,C),b=new hs(h,h.j,b),b.M=2,b.A=$i(br(C)),C=!1,d.navigator&&d.navigator.sendBeacon)try{C=d.navigator.sendBeacon(b.A.toString(),"")}catch{}!C&&d.Image&&(new Image().src=b.A,C=!0),C||(b.g=kd(b.j,null),b.g.ea(b.A)),b.F=Date.now(),Nt(b)}Id(h)}function Ja(h){h.g&&(Tl(h),h.g.cancel(),h.g=null)}function JA(h){Ja(h),h.v&&(d.clearTimeout(h.v),h.v=null),ZA(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function Hn(h){if(!Ur(h.h)&&!h.m){h.m=!0;var b=h.Ea;Y||j(),q||(Y(),q=!0),E.add(b,h),h.D=0}}function WA(h,b){return ms(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=b.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=qs(g(h.Ea,h,b),Fd(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const se=new hs(this,this.j,h);let le=this.o;if(this.U&&(le?(le=O(le),Ae(le,this.U)):le=this.U),this.u!==null||this.R||(se.J=le,le=null),this.S)e:{for(var b=0,C=0;C<this.i.length;C++){t:{var H=this.i[C];if("__data__"in H.map&&(H=H.map.__data__,typeof H=="string")){H=H.length;break t}H=void 0}if(H===void 0)break;if(b+=H,b>4096){b=C;break e}if(b===4096||C===this.i.length-1){b=C+1;break e}}b=1e3}else b=1e3;b=_d(this,se,b),C=br(this.J),Ut(C,"RID",h),Ut(C,"CVER",22),this.G&&Ut(C,"X-HTTP-Session-Id",this.G),tA(this,C),le&&(this.R?b="headers="+mn(Xs(le))+"&"+b:this.u&&Wi(C,this.u,le)),In(this.h,se),this.Ra&&Ut(C,"TYPE","init"),this.S?(Ut(C,"$req",b),Ut(C,"SID","null"),se.U=!0,Bs(se,C,null)):Bs(se,C,b),this.I=2}}else this.I==3&&(h?_l(this,h):this.i.length==0||Ur(this.h)||_l(this))};function _l(h,b){var C;b?C=b.l:C=h.V++;const H=br(h.J);Ut(H,"SID",h.M),Ut(H,"RID",C),Ut(H,"AID",h.K),tA(h,H),h.u&&h.o&&Wi(H,h.u,h.o),C=new hs(h,h.j,C,h.D+1),h.u===null&&(C.J=h.o),b&&(h.i=b.G.concat(h.i)),b=_d(h,C,1e3),C.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),In(h.h,C),Bs(C,H,b)}function tA(h,b){h.H&&ne(h.H,function(C,H){Ut(b,H,C)}),h.l&&ne({},function(C,H){Ut(b,H,C)})}function _d(h,b,C){C=Math.min(h.i.length,C);const H=h.l?g(h.l.Ka,h.l,h):null;e:{var se=h.i;let nt=-1;for(;;){const ur=["count="+C];nt==-1?C>0?(nt=se[0].g,ur.push("ofs="+nt)):nt=0:ur.push("ofs="+nt);let St=!0;for(let Wt=0;Wt<C;Wt++){var le=se[Wt].g;const Js=se[Wt].map;if(le-=nt,le<0)nt=Math.max(0,se[Wt].g-100),St=!1;else try{le="req"+le+"_"||"";try{var Ne=Js instanceof Map?Js:Object.entries(Js);for(const[Pn,yn]of Ne){let bn=yn;u(yn)&&(bn=wt(yn)),ur.push(le+Pn+"="+encodeURIComponent(bn))}}catch(Pn){throw ur.push(le+"type="+encodeURIComponent("_badmap")),Pn}}catch{H&&H(Js)}}if(St){Ne=ur.join("&");break e}}Ne=void 0}return h=h.i.splice(0,C),b.G=h,Ne}function Td(h){if(!h.g&&!h.v){h.Y=1;var b=h.Da;Y||j(),q||(Y(),q=!0),E.add(b,h),h.A=0}}function rA(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=qs(g(h.Da,h),Fd(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,Ud(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=qs(g(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Kt(10),Ja(this),Ud(this))};function Tl(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function Ud(h){h.g=new hs(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var b=br(h.na);Ut(b,"RID","rpc"),Ut(b,"SID",h.M),Ut(b,"AID",h.K),Ut(b,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ut(b,"TO",h.ia),Ut(b,"TYPE","xmlhttp"),tA(h,b),h.u&&h.o&&Wi(b,h.u,h.o),h.O&&(h.g.H=h.O);var C=h.g;h=h.ba,C.M=1,C.A=$i(br(b)),C.u=null,C.R=!0,pe(C,h)}r.Va=function(){this.C!=null&&(this.C=null,Ja(this),rA(this),Kt(19))};function ZA(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Qd(h,b){var C=null;if(h.g==b){ZA(h),Tl(h),h.g=null;var H=2}else if(gs(h.h,b))C=b.G,Dn(h.h,b),H=1;else return;if(h.I!=0){if(b.o)if(H==1){C=b.u?b.u.length:0,b=Date.now()-b.F;var se=h.D;H=yr(),Le(H,new Is(H,C)),Hn(h)}else Td(h);else if(se=b.m,se==3||se==0&&b.X>0||!(H==1&&WA(h,b)||H==2&&rA(h)))switch(C&&C.length>0&&(b=h.h,b.i=b.i.concat(C)),se){case 1:On(h,5);break;case 4:On(h,10);break;case 3:On(h,6);break;default:On(h,2)}}}function Fd(h,b){let C=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(C*=2),C*b}function On(h,b){if(h.j.info("Error code "+b),b==2){var C=g(h.bb,h),H=h.Ua;const se=!H;H=new ks(H||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Mr(H,"https"),$i(H),se?gn(H.toString(),C):El(H.toString(),C)}else Kt(2);h.I=0,h.l&&h.l.pa(b),Id(h),JA(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Kt(2)):(this.j.info("Failed to ping google.com"),Kt(1))};function Id(h){if(h.I=0,h.ja=[],h.l){const b=bl(h.h);(b.length!=0||h.i.length!=0)&&(R(h.ja,b),R(h.ja,h.i),h.h.i.length=0,N(h.i),h.i.length=0),h.l.oa()}}function Dd(h,b,C){var H=C instanceof ks?br(C):new ks(C);if(H.g!="")b&&(H.g=b+"."+H.g),za(H,H.u);else{var se=d.location;H=se.protocol,b=b?b+"."+se.hostname:se.hostname,se=+se.port;const le=new ks(null);H&&Mr(le,H),b&&(le.g=b),se&&za(le,se),C&&(le.h=C),H=le}return C=h.G,b=h.wa,C&&b&&Ut(H,C,b),Ut(H,"VER",h.ka),tA(h,H),H}function kd(h,b,C){if(b&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=h.Aa&&!h.ma?new Dt(new Rn({ab:C})):new Dt(h.ma),b.Fa(h.L),b}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Rd(){}r=Rd.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Wa(){}Wa.prototype.g=function(h,b){return new ps(h,b)};function ps(h,b){qe.call(this),this.g=new Xa(b),this.l=h,this.h=b&&b.messageUrlParams||null,h=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(h?h["X-WebChannel-Content-Type"]=b.messageContentType:h={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(h?h["X-WebChannel-Client-Profile"]=b.sa:h={"X-WebChannel-Client-Profile":b.sa}),this.g.U=h,(h=b&&b.Qb)&&!U(h)&&(this.g.u=h),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!U(b)&&(this.g.G=b,h=this.h,h!==null&&b in h&&(h=this.h,b in h&&delete h[b])),this.j=new ma(this)}y(ps,qe),ps.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ps.prototype.close=function(){jl(this.g)},ps.prototype.o=function(h){var b=this.g;if(typeof h=="string"){var C={};C.__data__=h,h=C}else this.v&&(C={},C.__data__=wt(h),h=C);b.i.push(new Ht(b.Ya++,h)),b.I==3&&Hn(b)},ps.prototype.N=function(){this.g.l=null,delete this.j,jl(this.g),delete this.g,ps.Z.N.call(this)};function Md(h){We.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var b=h.__sm__;if(b){e:{for(const C in b){h=C;break e}h=void 0}(this.i=h)&&(h=this.i,b=b!==null&&h in b?b[h]:void 0),this.data=b}else this.data=h}y(Md,We);function Ld(){st.call(this),this.status=1}y(Ld,st);function ma(h){this.g=h}y(ma,Rd),ma.prototype.ra=function(){Le(this.g,"a")},ma.prototype.qa=function(h){Le(this.g,new Md(h))},ma.prototype.pa=function(h){Le(this.g,new Ld)},ma.prototype.oa=function(){Le(this.g,"b")},Wa.prototype.createWebChannel=Wa.prototype.g,ps.prototype.send=ps.prototype.o,ps.prototype.open=ps.prototype.m,ps.prototype.close=ps.prototype.close,vE=function(){return new Wa},bE=function(){return yr()},yE=Ve,Zp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},da.NO_ERROR=0,da.TIMEOUT=8,da.HTTP_ERROR=6,_h=da,Pa.COMPLETE="complete",xE=Pa,de.EventType=Fe,Fe.OPEN="a",Fe.CLOSE="b",Fe.ERROR="c",Fe.MESSAGE="d",qe.prototype.listen=qe.prototype.J,bc=de,Dt.prototype.listenOnce=Dt.prototype.K,Dt.prototype.getLastError=Dt.prototype.Ha,Dt.prototype.getLastErrorCode=Dt.prototype.ya,Dt.prototype.getStatus=Dt.prototype.ca,Dt.prototype.getResponseJson=Dt.prototype.La,Dt.prototype.getResponseText=Dt.prototype.la,Dt.prototype.send=Dt.prototype.ea,Dt.prototype.setWithCredentials=Dt.prototype.Fa,pE=Dt}).apply(typeof zu<"u"?zu:typeof self<"u"?self:typeof window<"u"?window:{});let os=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};os.UNAUTHENTICATED=new os(null),os.GOOGLE_CREDENTIALS=new os("google-credentials-uid"),os.FIRST_PARTY=new os("first-party-uid"),os.MOCK_USER=new os("mock-user");let hl="12.9.0";function X4(r){hl=r}const RA=new Xx("@firebase/firestore");function Ho(){return RA.logLevel}function Qe(r,...e){if(RA.logLevel<=gt.DEBUG){const t=e.map(c0);RA.debug(`Firestore (${hl}): ${r}`,...t)}}function Ma(r,...e){if(RA.logLevel<=gt.ERROR){const t=e.map(c0);RA.error(`Firestore (${hl}): ${r}`,...t)}}function MA(r,...e){if(RA.logLevel<=gt.WARN){const t=e.map(c0);RA.warn(`Firestore (${hl}): ${r}`,...t)}}function c0(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function Ye(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,wE(r,s,t)}function wE(r,e,t){let s=`FIRESTORE (${hl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Ma(s),new Error(s)}function Tt(r,e,t,s){let A="Unexpected state";typeof t=="string"?A=t:s=t,r||wE(e,A,s)}function rt(r,e){return r}const we={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class He extends Oa{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ri{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class BE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class J4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(os.UNAUTHENTICATED)))}shutdown(){}}class W4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Z4{constructor(e){this.t=e,this.currentUser=os.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Tt(this.o===void 0,42304);let s=this.i;const A=f=>this.i!==s?(s=this.i,t(f)):Promise.resolve();let l=new Ri;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ri,e.enqueueRetryable((()=>A(this.currentUser)))};const d=()=>{const f=l;e.enqueueRetryable((async()=>{await f.promise,await A(this.currentUser)}))},u=f=>{Qe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((f=>u(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?u(f):(Qe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ri)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(Qe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Tt(typeof s.accessToken=="string",31837,{l:s}),new BE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Tt(e===null||typeof e=="string",2055,{h:e}),new os(e)}}class eQ{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=os.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class tQ{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new eQ(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(os.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class nB{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rQ{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,En(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Tt(this.o===void 0,3512);const s=l=>{l.error!=null&&Qe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.m;return this.m=l.token,Qe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const A=l=>{Qe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>A(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?A(l):Qe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new nB(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Tt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new nB(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function sQ(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}class d0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const A=sQ(40);for(let l=0;l<A.length;++l)s.length<20&&A[l]<t&&(s+=e.charAt(A[l]%62))}return s}}function pt(r,e){return r<e?-1:r>e?1:0}function ex(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const A=r.charAt(s),l=e.charAt(s);if(A!==l)return rp(A)===rp(l)?pt(A,l):rp(A)?1:-1}return pt(r.length,e.length)}const nQ=55296,aQ=57343;function rp(r){const e=r.charCodeAt(0);return e>=nQ&&e<=aQ}function sl(r,e,t){return r.length===e.length&&r.every(((s,A)=>t(s,e[A])))}const aB="__name__";class $n{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ye(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ye(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return $n.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof $n?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let A=0;A<s;A++){const l=$n.compareSegments(e.get(A),t.get(A));if(l!==0)return l}return pt(e.length,t.length)}static compareSegments(e,t){const s=$n.isNumericId(e),A=$n.isNumericId(t);return s&&!A?-1:!s&&A?1:s&&A?$n.extractNumericId(e).compare($n.extractNumericId(t)):ex(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ki.fromString(e.substring(4,e.length-2))}}class sr extends $n{construct(e,t,s){return new sr(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new He(we.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((A=>A.length>0)))}return new sr(t)}static emptyPath(){return new sr([])}}const iQ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zr extends $n{construct(e,t,s){return new Zr(e,t,s)}static isValidIdentifier(e){return iQ.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===aB}static keyField(){return new Zr([aB])}static fromServerFormat(e){const t=[];let s="",A=0;const l=()=>{if(s.length===0)throw new He(we.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let d=!1;for(;A<e.length;){const u=e[A];if(u==="\\"){if(A+1===e.length)throw new He(we.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[A+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new He(we.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=f,A+=2}else u==="`"?(d=!d,A++):u!=="."||d?(s+=u,A++):(l(),A++)}if(l(),d)throw new He(we.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zr(t)}static emptyPath(){return new Zr([])}}class ze{constructor(e){this.path=e}static fromPath(e){return new ze(sr.fromString(e))}static fromName(e){return new ze(sr.fromString(e).popFirst(5))}static empty(){return new ze(sr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&sr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return sr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ze(new sr(e.slice()))}}function AQ(r,e,t){if(!t)throw new He(we.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function oQ(r,e,t,s){if(e===!0&&s===!0)throw new He(we.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function iB(r){if(!ze.isDocumentKey(r))throw new He(we.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function CE(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function u0(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ye(12329,{type:typeof r})}function nl(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new He(we.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=u0(r);throw new He(we.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function Sr(r,e){const t={typeString:r};return e&&(t.value=e),t}function hd(r,e){if(!CE(r))throw new He(we.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const A=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const d=r[s];if(A&&typeof d!==A){t=`JSON field '${s}' must be a ${A}.`;break}if(l!==void 0&&d!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new He(we.INVALID_ARGUMENT,t);return!0}const AB=-62135596800,oB=1e6;class Yt{static now(){return Yt.fromMillis(Date.now())}static fromDate(e){return Yt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*oB);return new Yt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new He(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new He(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<AB)throw new He(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new He(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/oB}_compareTo(e){return this.seconds===e.seconds?pt(this.nanoseconds,e.nanoseconds):pt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Yt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(hd(e,Yt._jsonSchema))return new Yt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-AB;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Yt._jsonSchemaVersion="firestore/timestamp/1.0",Yt._jsonSchema={type:Sr("string",Yt._jsonSchemaVersion),seconds:Sr("number"),nanoseconds:Sr("number")};class Ze{static fromTimestamp(e){return new Ze(e)}static min(){return new Ze(new Yt(0,0))}static max(){return new Ze(new Yt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const $c=-1;function lQ(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,A=Ze.fromTimestamp(s===1e9?new Yt(t+1,0):new Yt(t,s));return new Oi(A,ze.empty(),e)}function cQ(r){return new Oi(r.readTime,r.key,$c)}class Oi{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Oi(Ze.min(),ze.empty(),$c)}static max(){return new Oi(Ze.max(),ze.empty(),$c)}}function dQ(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ze.comparator(r.documentKey,e.documentKey),t!==0?t:pt(r.largestBatchId,e.largestBatchId))}const uQ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hQ{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function fl(r){if(r.code!==we.FAILED_PRECONDITION||r.message!==uQ)throw r;Qe("LocalStore","Unexpectedly lost primary lease")}class be{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ye(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new be(((s,A)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,A)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,A)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof be?t:be.resolve(t)}catch(t){return be.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):be.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):be.reject(t)}static resolve(e){return new be(((t,s)=>{t(e)}))}static reject(e){return new be(((t,s)=>{s(e)}))}static waitFor(e){return new be(((t,s)=>{let A=0,l=0,d=!1;e.forEach((u=>{++A,u.next((()=>{++l,d&&l===A&&t()}),(f=>s(f)))})),d=!0,l===A&&t()}))}static or(e){let t=be.resolve(!1);for(const s of e)t=t.next((A=>A?be.resolve(A):s()));return t}static forEach(e,t){const s=[];return e.forEach(((A,l)=>{s.push(t.call(this,A,l))})),this.waitFor(s)}static mapArray(e,t){return new be(((s,A)=>{const l=e.length,d=new Array(l);let u=0;for(let f=0;f<l;f++){const g=f;t(e[g]).next((x=>{d[g]=x,++u,u===l&&s(d)}),(x=>A(x)))}}))}static doWhile(e,t){return new be(((s,A)=>{const l=()=>{e()===!0?t().next((()=>{l()}),A):s()};l()}))}}function fQ(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ml(r){return r.name==="IndexedDbTransactionError"}class Ef{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ef.ce=-1;const h0=-1;function Nf(r){return r==null}function qh(r){return r===0&&1/r==-1/0}function mQ(r){return typeof r=="number"&&Number.isInteger(r)&&!qh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const EE="";function gQ(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=lB(e)),e=pQ(r.get(t),e);return lB(e)}function pQ(r,e){let t=e;const s=r.length;for(let A=0;A<s;A++){const l=r.charAt(A);switch(l){case"\0":t+="";break;case EE:t+="";break;default:t+=l}}return t}function lB(r){return r+EE+""}function cB(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function OA(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function NE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class ar{constructor(e,t){this.comparator=e,this.root=t||Wr.EMPTY}insert(e,t){return new ar(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Wr.BLACK,null,null))}remove(e){return new ar(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const A=this.comparator(e,s.key);if(A===0)return t+s.left.size;A<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ku(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ku(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ku(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ku(this.root,e,this.comparator,!0)}}class Ku{constructor(e,t,s,A){this.isReverse=A,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&A&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wr{constructor(e,t,s,A,l){this.key=e,this.value=t,this.color=s??Wr.RED,this.left=A??Wr.EMPTY,this.right=l??Wr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,A,l){return new Wr(e??this.key,t??this.value,s??this.color,A??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let A=this;const l=s(e,A.key);return A=l<0?A.copy(null,null,null,A.left.insert(e,t,s),null):l===0?A.copy(null,t,null,null,null):A.copy(null,null,null,null,A.right.insert(e,t,s)),A.fixUp()}removeMin(){if(this.left.isEmpty())return Wr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,A=this;if(t(e,A.key)<0)A.left.isEmpty()||A.left.isRed()||A.left.left.isRed()||(A=A.moveRedLeft()),A=A.copy(null,null,null,A.left.remove(e,t),null);else{if(A.left.isRed()&&(A=A.rotateRight()),A.right.isEmpty()||A.right.isRed()||A.right.left.isRed()||(A=A.moveRedRight()),t(e,A.key)===0){if(A.right.isEmpty())return Wr.EMPTY;s=A.right.min(),A=A.copy(s.key,s.value,null,null,A.right.removeMin())}A=A.copy(null,null,null,null,A.right.remove(e,t))}return A.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ye(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ye(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ye(27949);return e+(this.isRed()?0:1)}}Wr.EMPTY=null,Wr.RED=!0,Wr.BLACK=!1;Wr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ye(57766)}get value(){throw Ye(16141)}get color(){throw Ye(16727)}get left(){throw Ye(29726)}get right(){throw Ye(36894)}copy(e,t,s,A,l){return this}insert(e,t,s){return new Wr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class kr{constructor(e){this.comparator=e,this.data=new ar(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const A=s.getNext();if(this.comparator(A.key,e[1])>=0)return;t(A.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new dB(this.data.getIterator())}getIteratorFrom(e){return new dB(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof kr)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const A=t.getNext().key,l=s.getNext().key;if(this.comparator(A,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new kr(this.comparator);return t.data=e,t}}class dB{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Sn{constructor(e){this.fields=e,e.sort(Zr.comparator)}static empty(){return new Sn([])}unionWith(e){let t=new kr(Zr.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Sn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return sl(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}class SE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ts{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(A){try{return atob(A)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new SE("Invalid base64 string: "+l):l}})(e);return new ts(t)}static fromUint8Array(e){const t=(function(A){let l="";for(let d=0;d<A.length;++d)l+=String.fromCharCode(A[d]);return l})(e);return new ts(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let A=0;A<t.length;A++)s[A]=t.charCodeAt(A);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ts.EMPTY_BYTE_STRING=new ts("");const xQ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pi(r){if(Tt(!!r,39018),typeof r=="string"){let e=0;const t=xQ.exec(r);if(Tt(!!t,46558,{timestamp:r}),t[1]){let A=t[1];A=(A+"000000000").substr(0,9),e=Number(A)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:pr(r.seconds),nanos:pr(r.nanos)}}function pr(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Vi(r){return typeof r=="string"?ts.fromBase64String(r):ts.fromUint8Array(r)}const jE="server_timestamp",_E="__type__",TE="__previous_value__",UE="__local_write_time__";function f0(r){return(r?.mapValue?.fields||{})[_E]?.stringValue===jE}function Sf(r){const e=r.mapValue.fields[TE];return f0(e)?Sf(e):e}function Xc(r){const e=Pi(r.mapValue.fields[UE].timestampValue);return new Yt(e.seconds,e.nanos)}class yQ{constructor(e,t,s,A,l,d,u,f,g,x,y){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=A,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=u,this.longPollingOptions=f,this.useFetchStreams=g,this.isUsingEmulator=x,this.apiKey=y}}const Yh="(default)";class Jc{constructor(e,t){this.projectId=e,this.database=t||Yh}static empty(){return new Jc("","")}get isDefaultDatabase(){return this.database===Yh}isEqual(e){return e instanceof Jc&&e.projectId===this.projectId&&e.database===this.database}}function bQ(r,e){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new He(we.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jc(r.options.projectId,e)}const QE="__type__",vQ="__max__",Gu={mapValue:{}},FE="__vector__",$h="value";function zi(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?f0(r)?4:BQ(r)?9007199254740991:wQ(r)?10:11:Ye(28295,{value:r})}function sa(r,e){if(r===e)return!0;const t=zi(r);if(t!==zi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Xc(r).isEqual(Xc(e));case 3:return(function(A,l){if(typeof A.timestampValue=="string"&&typeof l.timestampValue=="string"&&A.timestampValue.length===l.timestampValue.length)return A.timestampValue===l.timestampValue;const d=Pi(A.timestampValue),u=Pi(l.timestampValue);return d.seconds===u.seconds&&d.nanos===u.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(A,l){return Vi(A.bytesValue).isEqual(Vi(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(A,l){return pr(A.geoPointValue.latitude)===pr(l.geoPointValue.latitude)&&pr(A.geoPointValue.longitude)===pr(l.geoPointValue.longitude)})(r,e);case 2:return(function(A,l){if("integerValue"in A&&"integerValue"in l)return pr(A.integerValue)===pr(l.integerValue);if("doubleValue"in A&&"doubleValue"in l){const d=pr(A.doubleValue),u=pr(l.doubleValue);return d===u?qh(d)===qh(u):isNaN(d)&&isNaN(u)}return!1})(r,e);case 9:return sl(r.arrayValue.values||[],e.arrayValue.values||[],sa);case 10:case 11:return(function(A,l){const d=A.mapValue.fields||{},u=l.mapValue.fields||{};if(cB(d)!==cB(u))return!1;for(const f in d)if(d.hasOwnProperty(f)&&(u[f]===void 0||!sa(d[f],u[f])))return!1;return!0})(r,e);default:return Ye(52216,{left:r})}}function Wc(r,e){return(r.values||[]).find((t=>sa(t,e)))!==void 0}function al(r,e){if(r===e)return 0;const t=zi(r),s=zi(e);if(t!==s)return pt(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return pt(r.booleanValue,e.booleanValue);case 2:return(function(l,d){const u=pr(l.integerValue||l.doubleValue),f=pr(d.integerValue||d.doubleValue);return u<f?-1:u>f?1:u===f?0:isNaN(u)?isNaN(f)?0:-1:1})(r,e);case 3:return uB(r.timestampValue,e.timestampValue);case 4:return uB(Xc(r),Xc(e));case 5:return ex(r.stringValue,e.stringValue);case 6:return(function(l,d){const u=Vi(l),f=Vi(d);return u.compareTo(f)})(r.bytesValue,e.bytesValue);case 7:return(function(l,d){const u=l.split("/"),f=d.split("/");for(let g=0;g<u.length&&g<f.length;g++){const x=pt(u[g],f[g]);if(x!==0)return x}return pt(u.length,f.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,d){const u=pt(pr(l.latitude),pr(d.latitude));return u!==0?u:pt(pr(l.longitude),pr(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return hB(r.arrayValue,e.arrayValue);case 10:return(function(l,d){const u=l.fields||{},f=d.fields||{},g=u[$h]?.arrayValue,x=f[$h]?.arrayValue,y=pt(g?.values?.length||0,x?.values?.length||0);return y!==0?y:hB(g,x)})(r.mapValue,e.mapValue);case 11:return(function(l,d){if(l===Gu.mapValue&&d===Gu.mapValue)return 0;if(l===Gu.mapValue)return 1;if(d===Gu.mapValue)return-1;const u=l.fields||{},f=Object.keys(u),g=d.fields||{},x=Object.keys(g);f.sort(),x.sort();for(let y=0;y<f.length&&y<x.length;++y){const v=ex(f[y],x[y]);if(v!==0)return v;const N=al(u[f[y]],g[x[y]]);if(N!==0)return N}return pt(f.length,x.length)})(r.mapValue,e.mapValue);default:throw Ye(23264,{he:t})}}function uB(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return pt(r,e);const t=Pi(r),s=Pi(e),A=pt(t.seconds,s.seconds);return A!==0?A:pt(t.nanos,s.nanos)}function hB(r,e){const t=r.values||[],s=e.values||[];for(let A=0;A<t.length&&A<s.length;++A){const l=al(t[A],s[A]);if(l)return l}return pt(t.length,s.length)}function il(r){return tx(r)}function tx(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=Pi(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Vi(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return ze.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",A=!0;for(const l of t.values||[])A?A=!1:s+=",",s+=tx(l);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let A="{",l=!0;for(const d of s)l?l=!1:A+=",",A+=`${d}:${tx(t.fields[d])}`;return A+"}"})(r.mapValue):Ye(61005,{value:r})}function Th(r){switch(zi(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Sf(r);return e?16+Th(e):16;case 5:return 2*r.stringValue.length;case 6:return Vi(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((A,l)=>A+Th(l)),0)})(r.arrayValue);case 10:case 11:return(function(s){let A=0;return OA(s.fields,((l,d)=>{A+=l.length+Th(d)})),A})(r.mapValue);default:throw Ye(13486,{value:r})}}function rx(r){return!!r&&"integerValue"in r}function m0(r){return!!r&&"arrayValue"in r}function fB(r){return!!r&&"nullValue"in r}function mB(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Uh(r){return!!r&&"mapValue"in r}function wQ(r){return(r?.mapValue?.fields||{})[QE]?.stringValue===FE}function Dc(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return OA(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Dc(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Dc(r.arrayValue.values[t]);return e}return{...r}}function BQ(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===vQ}class ln{constructor(e){this.value=e}static empty(){return new ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Uh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Dc(t)}setAll(e){let t=Zr.emptyPath(),s={},A=[];e.forEach(((d,u)=>{if(!t.isImmediateParentOf(u)){const f=this.getFieldsMap(t);this.applyChanges(f,s,A),s={},A=[],t=u.popLast()}d?s[u.lastSegment()]=Dc(d):A.push(u.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,A)}delete(e){const t=this.field(e.popLast());Uh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return sa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let A=t.mapValue.fields[e.get(s)];Uh(A)&&A.mapValue.fields||(A={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=A),t=A}return t.mapValue.fields}applyChanges(e,t,s){OA(t,((A,l)=>e[A]=l));for(const A of s)delete e[A]}clone(){return new ln(Dc(this.value))}}function IE(r){const e=[];return OA(r.fields,((t,s)=>{const A=new Zr([t]);if(Uh(s)){const l=IE(s.mapValue).fields;if(l.length===0)e.push(A);else for(const d of l)e.push(A.child(d))}else e.push(A)})),new Sn(e)}class cs{constructor(e,t,s,A,l,d,u){this.key=e,this.documentType=t,this.version=s,this.readTime=A,this.createTime=l,this.data=d,this.documentState=u}static newInvalidDocument(e){return new cs(e,0,Ze.min(),Ze.min(),Ze.min(),ln.empty(),0)}static newFoundDocument(e,t,s,A){return new cs(e,1,t,Ze.min(),s,A,0)}static newNoDocument(e,t){return new cs(e,2,t,Ze.min(),Ze.min(),ln.empty(),0)}static newUnknownDocument(e,t){return new cs(e,3,t,Ze.min(),Ze.min(),ln.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Xh{constructor(e,t){this.position=e,this.inclusive=t}}function gB(r,e,t){let s=0;for(let A=0;A<r.position.length;A++){const l=e[A],d=r.position[A];if(l.field.isKeyField()?s=ze.comparator(ze.fromName(d.referenceValue),t.key):s=al(d,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function pB(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!sa(r.position[t],e.position[t]))return!1;return!0}class Jh{constructor(e,t="asc"){this.field=e,this.dir=t}}function CQ(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class DE{}class Ir extends DE{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new NQ(e,t,s):t==="array-contains"?new _Q(e,s):t==="in"?new TQ(e,s):t==="not-in"?new UQ(e,s):t==="array-contains-any"?new QQ(e,s):new Ir(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new SQ(e,s):new jQ(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(al(t,this.value)):t!==null&&zi(this.value)===zi(t)&&this.matchesComparison(al(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ye(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class na extends DE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new na(e,t)}matches(e){return kE(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function kE(r){return r.op==="and"}function RE(r){return EQ(r)&&kE(r)}function EQ(r){for(const e of r.filters)if(e instanceof na)return!1;return!0}function sx(r){if(r instanceof Ir)return r.field.canonicalString()+r.op.toString()+il(r.value);if(RE(r))return r.filters.map((e=>sx(e))).join(",");{const e=r.filters.map((t=>sx(t))).join(",");return`${r.op}(${e})`}}function ME(r,e){return r instanceof Ir?(function(s,A){return A instanceof Ir&&s.op===A.op&&s.field.isEqual(A.field)&&sa(s.value,A.value)})(r,e):r instanceof na?(function(s,A){return A instanceof na&&s.op===A.op&&s.filters.length===A.filters.length?s.filters.reduce(((l,d,u)=>l&&ME(d,A.filters[u])),!0):!1})(r,e):void Ye(19439)}function LE(r){return r instanceof Ir?(function(t){return`${t.field.canonicalString()} ${t.op} ${il(t.value)}`})(r):r instanceof na?(function(t){return t.op.toString()+" {"+t.getFilters().map(LE).join(" ,")+"}"})(r):"Filter"}class NQ extends Ir{constructor(e,t,s){super(e,t,s),this.key=ze.fromName(s.referenceValue)}matches(e){const t=ze.comparator(e.key,this.key);return this.matchesComparison(t)}}class SQ extends Ir{constructor(e,t){super(e,"in",t),this.keys=HE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class jQ extends Ir{constructor(e,t){super(e,"not-in",t),this.keys=HE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function HE(r,e){return(e.arrayValue?.values||[]).map((t=>ze.fromName(t.referenceValue)))}class _Q extends Ir{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return m0(t)&&Wc(t.arrayValue,this.value)}}class TQ extends Ir{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Wc(this.value.arrayValue,t)}}class UQ extends Ir{constructor(e,t){super(e,"not-in",t)}matches(e){if(Wc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Wc(this.value.arrayValue,t)}}class QQ extends Ir{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!m0(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Wc(this.value.arrayValue,s)))}}class FQ{constructor(e,t=null,s=[],A=[],l=null,d=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=A,this.limit=l,this.startAt=d,this.endAt=u,this.Te=null}}function xB(r,e=null,t=[],s=[],A=null,l=null,d=null){return new FQ(r,e,t,s,A,l,d)}function g0(r){const e=rt(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>sx(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),Nf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>il(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>il(s))).join(",")),e.Te=t}return e.Te}function p0(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!CQ(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!ME(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!pB(r.startAt,e.startAt)&&pB(r.endAt,e.endAt)}function nx(r){return ze.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class jf{constructor(e,t=null,s=[],A=[],l=null,d="F",u=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=A,this.limit=l,this.limitType=d,this.startAt=u,this.endAt=f,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function IQ(r,e,t,s,A,l,d,u){return new jf(r,e,t,s,A,l,d,u)}function x0(r){return new jf(r)}function yB(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function DQ(r){return ze.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function kQ(r){return r.collectionGroup!==null}function kc(r){const e=rt(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let u=new kr(Zr.comparator);return d.filters.forEach((f=>{f.getFlattenedFilters().forEach((g=>{g.isInequality()&&(u=u.add(g.field))}))})),u})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Jh(l,s))})),t.has(Zr.keyField().canonicalString())||e.Ie.push(new Jh(Zr.keyField(),s))}return e.Ie}function Wn(r){const e=rt(r);return e.Ee||(e.Ee=RQ(e,kc(r))),e.Ee}function RQ(r,e){if(r.limitType==="F")return xB(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((A=>{const l=A.dir==="desc"?"asc":"desc";return new Jh(A.field,l)}));const t=r.endAt?new Xh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Xh(r.startAt.position,r.startAt.inclusive):null;return xB(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function ax(r,e,t){return new jf(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function _f(r,e){return p0(Wn(r),Wn(e))&&r.limitType===e.limitType}function OE(r){return`${g0(Wn(r))}|lt:${r.limitType}`}function Oo(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((A=>LE(A))).join(", ")}]`),Nf(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((A=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(A))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((A=>il(A))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((A=>il(A))).join(",")),`Target(${s})`})(Wn(r))}; limitType=${r.limitType})`}function Tf(r,e){return e.isFoundDocument()&&(function(s,A){const l=A.key.path;return s.collectionGroup!==null?A.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):ze.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(r,e)&&(function(s,A){for(const l of kc(s))if(!l.field.isKeyField()&&A.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(s,A){for(const l of s.filters)if(!l.matches(A))return!1;return!0})(r,e)&&(function(s,A){return!(s.startAt&&!(function(d,u,f){const g=gB(d,u,f);return d.inclusive?g<=0:g<0})(s.startAt,kc(s),A)||s.endAt&&!(function(d,u,f){const g=gB(d,u,f);return d.inclusive?g>=0:g>0})(s.endAt,kc(s),A))})(r,e)}function MQ(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function PE(r){return(e,t)=>{let s=!1;for(const A of kc(r)){const l=LQ(A,e,t);if(l!==0)return l;s=s||A.field.isKeyField()}return 0}}function LQ(r,e,t){const s=r.field.isKeyField()?ze.comparator(e.key,t.key):(function(l,d,u){const f=d.data.field(l),g=u.data.field(l);return f!==null&&g!==null?al(f,g):Ye(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ye(19790,{direction:r.dir})}}class PA{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[A,l]of s)if(this.equalsFn(A,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),A=this.inner[s];if(A===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<A.length;l++)if(this.equalsFn(A[l][0],e))return void(A[l]=[e,t]);A.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let A=0;A<s.length;A++)if(this.equalsFn(s[A][0],e))return s.length===1?delete this.inner[t]:s.splice(A,1),this.innerSize--,!0;return!1}forEach(e){OA(this.inner,((t,s)=>{for(const[A,l]of s)e(A,l)}))}isEmpty(){return NE(this.inner)}size(){return this.innerSize}}const HQ=new ar(ze.comparator);function La(){return HQ}const VE=new ar(ze.comparator);function vc(...r){let e=VE;for(const t of r)e=e.insert(t.key,t);return e}function zE(r){let e=VE;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function NA(){return Rc()}function KE(){return Rc()}function Rc(){return new PA((r=>r.toString()),((r,e)=>r.isEqual(e)))}const OQ=new ar(ze.comparator),PQ=new kr(ze.comparator);function xt(...r){let e=PQ;for(const t of r)e=e.add(t);return e}const VQ=new kr(pt);function zQ(){return VQ}function y0(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qh(e)?"-0":e}}function GE(r){return{integerValue:""+r}}function KQ(r,e){return mQ(e)?GE(e):y0(r,e)}class Uf{constructor(){this._=void 0}}function GQ(r,e,t){return r instanceof Wh?(function(A,l){const d={fields:{[_E]:{stringValue:jE},[UE]:{timestampValue:{seconds:A.seconds,nanos:A.nanoseconds}}}};return l&&f0(l)&&(l=Sf(l)),l&&(d.fields[TE]=l),{mapValue:d}})(t,e):r instanceof Zc?YE(r,e):r instanceof ed?$E(r,e):(function(A,l){const d=qE(A,l),u=bB(d)+bB(A.Ae);return rx(d)&&rx(A.Ae)?GE(u):y0(A.serializer,u)})(r,e)}function qQ(r,e,t){return r instanceof Zc?YE(r,e):r instanceof ed?$E(r,e):t}function qE(r,e){return r instanceof Zh?(function(s){return rx(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class Wh extends Uf{}class Zc extends Uf{constructor(e){super(),this.elements=e}}function YE(r,e){const t=XE(e);for(const s of r.elements)t.some((A=>sa(A,s)))||t.push(s);return{arrayValue:{values:t}}}class ed extends Uf{constructor(e){super(),this.elements=e}}function $E(r,e){let t=XE(e);for(const s of r.elements)t=t.filter((A=>!sa(A,s)));return{arrayValue:{values:t}}}class Zh extends Uf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function bB(r){return pr(r.integerValue||r.doubleValue)}function XE(r){return m0(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function YQ(r,e){return r.field.isEqual(e.field)&&(function(s,A){return s instanceof Zc&&A instanceof Zc||s instanceof ed&&A instanceof ed?sl(s.elements,A.elements,sa):s instanceof Zh&&A instanceof Zh?sa(s.Ae,A.Ae):s instanceof Wh&&A instanceof Wh})(r.transform,e.transform)}class $Q{constructor(e,t){this.version=e,this.transformResults=t}}class Zn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Zn}static exists(e){return new Zn(void 0,e)}static updateTime(e){return new Zn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Qf{}function JE(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new b0(r.key,Zn.none()):new fd(r.key,r.data,Zn.none());{const t=r.data,s=ln.empty();let A=new kr(Zr.comparator);for(let l of e.fields)if(!A.has(l)){let d=t.field(l);d===null&&l.length>1&&(l=l.popLast(),d=t.field(l)),d===null?s.delete(l):s.set(l,d),A=A.add(l)}return new VA(r.key,s,new Sn(A.toArray()),Zn.none())}}function XQ(r,e,t){r instanceof fd?(function(A,l,d){const u=A.value.clone(),f=wB(A.fieldTransforms,l,d.transformResults);u.setAll(f),l.convertToFoundDocument(d.version,u).setHasCommittedMutations()})(r,e,t):r instanceof VA?(function(A,l,d){if(!Qh(A.precondition,l))return void l.convertToUnknownDocument(d.version);const u=wB(A.fieldTransforms,l,d.transformResults),f=l.data;f.setAll(WE(A)),f.setAll(u),l.convertToFoundDocument(d.version,f).setHasCommittedMutations()})(r,e,t):(function(A,l,d){l.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function Mc(r,e,t,s){return r instanceof fd?(function(l,d,u,f){if(!Qh(l.precondition,d))return u;const g=l.value.clone(),x=BB(l.fieldTransforms,f,d);return g.setAll(x),d.convertToFoundDocument(d.version,g).setHasLocalMutations(),null})(r,e,t,s):r instanceof VA?(function(l,d,u,f){if(!Qh(l.precondition,d))return u;const g=BB(l.fieldTransforms,f,d),x=d.data;return x.setAll(WE(l)),x.setAll(g),d.convertToFoundDocument(d.version,x).setHasLocalMutations(),u===null?null:u.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((y=>y.field)))})(r,e,t,s):(function(l,d,u){return Qh(l.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):u})(r,e,t)}function JQ(r,e){let t=null;for(const s of r.fieldTransforms){const A=e.data.field(s.field),l=qE(s.transform,A||null);l!=null&&(t===null&&(t=ln.empty()),t.set(s.field,l))}return t||null}function vB(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,A){return s===void 0&&A===void 0||!(!s||!A)&&sl(s,A,((l,d)=>YQ(l,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class fd extends Qf{constructor(e,t,s,A=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=A,this.type=0}getFieldMask(){return null}}class VA extends Qf{constructor(e,t,s,A,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=A,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function WE(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function wB(r,e,t){const s=new Map;Tt(r.length===t.length,32656,{Ve:t.length,de:r.length});for(let A=0;A<t.length;A++){const l=r[A],d=l.transform,u=e.data.field(l.field);s.set(l.field,qQ(d,u,t[A]))}return s}function BB(r,e,t){const s=new Map;for(const A of r){const l=A.transform,d=t.data.field(A.field);s.set(A.field,GQ(l,d,e))}return s}class b0 extends Qf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class WQ extends Qf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ZQ{constructor(e,t,s,A){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=A}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let A=0;A<this.mutations.length;A++){const l=this.mutations[A];l.key.isEqual(e.key)&&XQ(l,e,s[A])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Mc(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Mc(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=KE();return this.mutations.forEach((A=>{const l=e.get(A.key),d=l.overlayedDocument;let u=this.applyToLocalView(d,l.mutatedFields);u=t.has(A.key)?null:u;const f=JE(d,u);f!==null&&s.set(A.key,f),d.isValidDocument()||d.convertToNoDocument(Ze.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),xt())}isEqual(e){return this.batchId===e.batchId&&sl(this.mutations,e.mutations,((t,s)=>vB(t,s)))&&sl(this.baseMutations,e.baseMutations,((t,s)=>vB(t,s)))}}class v0{constructor(e,t,s,A){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=A}static from(e,t,s){Tt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let A=(function(){return OQ})();const l=e.mutations;for(let d=0;d<l.length;d++)A=A.insert(l[d].key,s[d].version);return new v0(e,t,s,A)}}class eF{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class tF{constructor(e,t){this.count=e,this.unchangedNames=t}}var Er,bt;function rF(r){switch(r){case we.OK:return Ye(64938);case we.CANCELLED:case we.UNKNOWN:case we.DEADLINE_EXCEEDED:case we.RESOURCE_EXHAUSTED:case we.INTERNAL:case we.UNAVAILABLE:case we.UNAUTHENTICATED:return!1;case we.INVALID_ARGUMENT:case we.NOT_FOUND:case we.ALREADY_EXISTS:case we.PERMISSION_DENIED:case we.FAILED_PRECONDITION:case we.ABORTED:case we.OUT_OF_RANGE:case we.UNIMPLEMENTED:case we.DATA_LOSS:return!0;default:return Ye(15467,{code:r})}}function ZE(r){if(r===void 0)return Ma("GRPC error has no .code"),we.UNKNOWN;switch(r){case Er.OK:return we.OK;case Er.CANCELLED:return we.CANCELLED;case Er.UNKNOWN:return we.UNKNOWN;case Er.DEADLINE_EXCEEDED:return we.DEADLINE_EXCEEDED;case Er.RESOURCE_EXHAUSTED:return we.RESOURCE_EXHAUSTED;case Er.INTERNAL:return we.INTERNAL;case Er.UNAVAILABLE:return we.UNAVAILABLE;case Er.UNAUTHENTICATED:return we.UNAUTHENTICATED;case Er.INVALID_ARGUMENT:return we.INVALID_ARGUMENT;case Er.NOT_FOUND:return we.NOT_FOUND;case Er.ALREADY_EXISTS:return we.ALREADY_EXISTS;case Er.PERMISSION_DENIED:return we.PERMISSION_DENIED;case Er.FAILED_PRECONDITION:return we.FAILED_PRECONDITION;case Er.ABORTED:return we.ABORTED;case Er.OUT_OF_RANGE:return we.OUT_OF_RANGE;case Er.UNIMPLEMENTED:return we.UNIMPLEMENTED;case Er.DATA_LOSS:return we.DATA_LOSS;default:return Ye(39323,{code:r})}}(bt=Er||(Er={}))[bt.OK=0]="OK",bt[bt.CANCELLED=1]="CANCELLED",bt[bt.UNKNOWN=2]="UNKNOWN",bt[bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",bt[bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",bt[bt.NOT_FOUND=5]="NOT_FOUND",bt[bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",bt[bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",bt[bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",bt[bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",bt[bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",bt[bt.ABORTED=10]="ABORTED",bt[bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",bt[bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",bt[bt.INTERNAL=13]="INTERNAL",bt[bt.UNAVAILABLE=14]="UNAVAILABLE",bt[bt.DATA_LOSS=15]="DATA_LOSS";function sF(){return new TextEncoder}const nF=new ki([4294967295,4294967295],0);function CB(r){const e=sF().encode(r),t=new gE;return t.update(e),new Uint8Array(t.digest())}function EB(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),A=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ki([t,s],0),new ki([A,l],0)]}class w0{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new wc(`Invalid padding: ${t}`);if(s<0)throw new wc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new wc(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new wc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ki.fromNumber(this.ge)}ye(e,t,s){let A=e.add(t.multiply(ki.fromNumber(s)));return A.compare(nF)===1&&(A=new ki([A.getBits(0),A.getBits(1)],0)),A.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=CB(e),[s,A]=EB(t);for(let l=0;l<this.hashCount;l++){const d=this.ye(s,A,l);if(!this.we(d))return!1}return!0}static create(e,t,s){const A=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),d=new w0(l,A,t);return s.forEach((u=>d.insert(u))),d}insert(e){if(this.ge===0)return;const t=CB(e),[s,A]=EB(t);for(let l=0;l<this.hashCount;l++){const d=this.ye(s,A,l);this.be(d)}}be(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class wc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ff{constructor(e,t,s,A,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=A,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const A=new Map;return A.set(e,md.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Ff(Ze.min(),A,new ar(pt),La(),xt())}}class md{constructor(e,t,s,A,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=A,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new md(s,t,xt(),xt(),xt())}}class Fh{constructor(e,t,s,A){this.Se=e,this.removedTargetIds=t,this.key=s,this.De=A}}class e2{constructor(e,t){this.targetId=e,this.Ce=t}}class t2{constructor(e,t,s=ts.EMPTY_BYTE_STRING,A=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=A}}class NB{constructor(){this.ve=0,this.Fe=SB(),this.Me=ts.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=xt(),t=xt(),s=xt();return this.Fe.forEach(((A,l)=>{switch(l){case 0:e=e.add(A);break;case 2:t=t.add(A);break;case 1:s=s.add(A);break;default:Ye(38017,{changeType:l})}})),new md(this.Me,this.xe,e,t,s)}Ke(){this.Oe=!1,this.Fe=SB()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Tt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class aF{constructor(e){this.Ge=e,this.ze=new Map,this.je=La(),this.He=qu(),this.Je=qu(),this.Ze=new ar(pt)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.We(),s.Ne||s.Ke(),s.Le(e.resumeToken);break;case 2:s.We(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.Qe(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Ye(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,A)=>{this.rt(A)&&t(A)}))}st(e){const t=e.targetId,s=e.Ce.count,A=this.ot(t);if(A){const l=A.target;if(nx(l))if(s===0){const d=new ze(l.path);this.et(t,d,cs.newNoDocument(d,Ze.min()))}else Tt(s===1,20013,{expectedCount:s});else{const d=this._t(t);if(d!==s){const u=this.ut(e),f=u?this.ct(u,e,d):1;if(f!==0){this.it(t);const g=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:A=0},hashCount:l=0}=t;let d,u;try{d=Vi(s).toUint8Array()}catch(f){if(f instanceof SE)return MA("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{u=new w0(d,A,l)}catch(f){return MA(f instanceof wc?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return u.ge===0?null:u}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let A=0;return s.forEach((l=>{const d=this.Ge.ht(),u=`projects/${d.projectId}/databases/${d.database}/documents/${l.path.canonicalString()}`;e.mightContain(u)||(this.et(t,l,null),A++)})),A}Tt(e){const t=new Map;this.ze.forEach(((l,d)=>{const u=this.ot(d);if(u){if(l.current&&nx(u.target)){const f=new ze(u.target.path);this.It(f).has(d)||this.Et(d,f)||this.et(d,f,cs.newNoDocument(f,e))}l.Be&&(t.set(d,l.ke()),l.Ke())}}));let s=xt();this.Je.forEach(((l,d)=>{let u=!0;d.forEachWhile((f=>{const g=this.ot(f);return!g||g.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(s=s.add(l))})),this.je.forEach(((l,d)=>d.setReadTime(e)));const A=new Ff(e,t,this.Ze,this.je,s);return this.je=La(),this.He=qu(),this.Je=qu(),this.Ze=new ar(pt),A}Ye(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,s),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const A=this.nt(e);this.Et(e,t)?A.qe(t,1):A.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new NB,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new kr(pt),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new kr(pt),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Qe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new NB),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function qu(){return new ar(ze.comparator)}function SB(){return new ar(ze.comparator)}const iF={asc:"ASCENDING",desc:"DESCENDING"},AF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oF={and:"AND",or:"OR"};class lF{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ix(r,e){return r.useProto3Json||Nf(e)?e:{value:e}}function ef(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function r2(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function cF(r,e){return ef(r,e.toTimestamp())}function ea(r){return Tt(!!r,49232),Ze.fromTimestamp((function(t){const s=Pi(t);return new Yt(s.seconds,s.nanos)})(r))}function B0(r,e){return Ax(r,e).canonicalString()}function Ax(r,e){const t=(function(A){return new sr(["projects",A.projectId,"databases",A.database])})(r).child("documents");return e===void 0?t:t.child(e)}function s2(r){const e=sr.fromString(r);return Tt(o2(e),10190,{key:e.toString()}),e}function ox(r,e){return B0(r.databaseId,e.path)}function sp(r,e){const t=s2(e);if(t.get(1)!==r.databaseId.projectId)throw new He(we.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new He(we.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ze(a2(t))}function n2(r,e){return B0(r.databaseId,e)}function dF(r){const e=s2(r);return e.length===4?sr.emptyPath():a2(e)}function lx(r){return new sr(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function a2(r){return Tt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function jB(r,e,t){return{name:ox(r,e),fields:t.value.mapValue.fields}}function uF(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ye(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),A=e.targetChange.targetIds||[],l=(function(g,x){return g.useProto3Json?(Tt(x===void 0||typeof x=="string",58123),ts.fromBase64String(x||"")):(Tt(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),ts.fromUint8Array(x||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,u=d&&(function(g){const x=g.code===void 0?we.UNKNOWN:ZE(g.code);return new He(x,g.message||"")})(d);t=new t2(s,A,l,u||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const A=sp(r,s.document.name),l=ea(s.document.updateTime),d=s.document.createTime?ea(s.document.createTime):Ze.min(),u=new ln({mapValue:{fields:s.document.fields}}),f=cs.newFoundDocument(A,l,d,u),g=s.targetIds||[],x=s.removedTargetIds||[];t=new Fh(g,x,f.key,f)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const A=sp(r,s.document),l=s.readTime?ea(s.readTime):Ze.min(),d=cs.newNoDocument(A,l),u=s.removedTargetIds||[];t=new Fh([],u,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const A=sp(r,s.document),l=s.removedTargetIds||[];t=new Fh([],l,A,null)}else{if(!("filter"in e))return Ye(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:A=0,unchangedNames:l}=s,d=new tF(A,l),u=s.targetId;t=new e2(u,d)}}return t}function hF(r,e){let t;if(e instanceof fd)t={update:jB(r,e.key,e.value)};else if(e instanceof b0)t={delete:ox(r,e.key)};else if(e instanceof VA)t={update:jB(r,e.key,e.data),updateMask:wF(e.fieldMask)};else{if(!(e instanceof WQ))return Ye(16599,{dt:e.type});t={verify:ox(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,d){const u=d.transform;if(u instanceof Wh)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Zc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof ed)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Zh)return{fieldPath:d.field.canonicalString(),increment:u.Ae};throw Ye(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(A,l){return l.updateTime!==void 0?{updateTime:cF(A,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ye(27497)})(r,e.precondition)),t}function fF(r,e){return r&&r.length>0?(Tt(e!==void 0,14353),r.map((t=>(function(A,l){let d=A.updateTime?ea(A.updateTime):ea(l);return d.isEqual(Ze.min())&&(d=ea(l)),new $Q(d,A.transformResults||[])})(t,e)))):[]}function mF(r,e){return{documents:[n2(r,e.path)]}}function gF(r,e){const t={structuredQuery:{}},s=e.path;let A;e.collectionGroup!==null?(A=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(A=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=n2(r,A);const l=(function(g){if(g.length!==0)return A2(na.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const d=(function(g){if(g.length!==0)return g.map((x=>(function(v){return{field:Po(v.field),direction:yF(v.dir)}})(x)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const u=ix(r,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:A}}function pF(r){let e=dF(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let A=null;if(s>0){Tt(s===1,65062);const x=t.from[0];x.allDescendants?A=x.collectionId:e=e.child(x.collectionId)}let l=[];t.where&&(l=(function(y){const v=i2(y);return v instanceof na&&RE(v)?v.getFilters():[v]})(t.where));let d=[];t.orderBy&&(d=(function(y){return y.map((v=>(function(R){return new Jh(Vo(R.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(v)))})(t.orderBy));let u=null;t.limit&&(u=(function(y){let v;return v=typeof y=="object"?y.value:y,Nf(v)?null:v})(t.limit));let f=null;t.startAt&&(f=(function(y){const v=!!y.before,N=y.values||[];return new Xh(N,v)})(t.startAt));let g=null;return t.endAt&&(g=(function(y){const v=!y.before,N=y.values||[];return new Xh(N,v)})(t.endAt)),IQ(e,A,d,l,u,"F",f,g)}function xF(r,e){const t=(function(A){switch(A){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ye(28987,{purpose:A})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function i2(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Vo(t.unaryFilter.field);return Ir.create(s,"==",{doubleValue:NaN});case"IS_NULL":const A=Vo(t.unaryFilter.field);return Ir.create(A,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Vo(t.unaryFilter.field);return Ir.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Vo(t.unaryFilter.field);return Ir.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ye(61313);default:return Ye(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Ir.create(Vo(t.fieldFilter.field),(function(A){switch(A){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ye(58110);default:return Ye(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return na.create(t.compositeFilter.filters.map((s=>i2(s))),(function(A){switch(A){case"AND":return"and";case"OR":return"or";default:return Ye(1026)}})(t.compositeFilter.op))})(r):Ye(30097,{filter:r})}function yF(r){return iF[r]}function bF(r){return AF[r]}function vF(r){return oF[r]}function Po(r){return{fieldPath:r.canonicalString()}}function Vo(r){return Zr.fromServerFormat(r.fieldPath)}function A2(r){return r instanceof Ir?(function(t){if(t.op==="=="){if(mB(t.value))return{unaryFilter:{field:Po(t.field),op:"IS_NAN"}};if(fB(t.value))return{unaryFilter:{field:Po(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(mB(t.value))return{unaryFilter:{field:Po(t.field),op:"IS_NOT_NAN"}};if(fB(t.value))return{unaryFilter:{field:Po(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Po(t.field),op:bF(t.op),value:t.value}}})(r):r instanceof na?(function(t){const s=t.getFilters().map((A=>A2(A)));return s.length===1?s[0]:{compositeFilter:{op:vF(t.op),filters:s}}})(r):Ye(54877,{filter:r})}function wF(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function o2(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}function l2(r){return!!r&&typeof r._toProto=="function"&&r._protoValueType==="ProtoValue"}class ji{constructor(e,t,s,A,l=Ze.min(),d=Ze.min(),u=ts.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=A,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=u,this.expectedCount=f}withSequenceNumber(e){return new ji(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class BF{constructor(e){this.yt=e}}function CF(r){const e=pF({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?ax(e,e.limit,"L"):e}class EF{constructor(){this.Sn=new NF}addToCollectionParentIndex(e,t){return this.Sn.add(t),be.resolve()}getCollectionParents(e,t){return be.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return be.resolve()}deleteFieldIndex(e,t){return be.resolve()}deleteAllFieldIndexes(e){return be.resolve()}createTargetIndexes(e,t){return be.resolve()}getDocumentsMatchingTarget(e,t){return be.resolve(null)}getIndexType(e,t){return be.resolve(0)}getFieldIndexes(e,t){return be.resolve([])}getNextCollectionGroupToUpdate(e){return be.resolve(null)}getMinOffset(e,t){return be.resolve(Oi.min())}getMinOffsetFromCollectionGroup(e,t){return be.resolve(Oi.min())}updateCollectionGroup(e,t,s){return be.resolve()}updateIndexEntries(e,t){return be.resolve()}}class NF{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),A=this.index[t]||new kr(sr.comparator),l=!A.has(s);return this.index[t]=A.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),A=this.index[t];return A&&A.has(s)}getEntries(e){return(this.index[e]||new kr(sr.comparator)).toArray()}}const _B={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},c2=41943040;class Qs{static withCacheSize(e){return new Qs(e,Qs.DEFAULT_COLLECTION_PERCENTILE,Qs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}Qs.DEFAULT_COLLECTION_PERCENTILE=10,Qs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qs.DEFAULT=new Qs(c2,Qs.DEFAULT_COLLECTION_PERCENTILE,Qs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qs.DISABLED=new Qs(-1,0,0);class Al{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Al(0)}static ar(){return new Al(-1)}}const TB="LruGarbageCollector",SF=1048576;function UB([r,e],[t,s]){const A=pt(r,t);return A===0?pt(e,s):A}class jF{constructor(e){this.Pr=e,this.buffer=new kr(UB),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();UB(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class _F{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Qe(TB,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ml(t)?Qe(TB,"Ignoring IndexedDB error during garbage collection: ",t):await fl(t)}await this.Ar(3e5)}))}}class TF{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return be.resolve(Ef.ce);const s=new jF(t);return this.Vr.forEachTarget(e,(A=>s.Er(A.sequenceNumber))).next((()=>this.Vr.mr(e,(A=>s.Er(A))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Qe("LruGarbageCollector","Garbage collection skipped; disabled"),be.resolve(_B)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Qe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_B):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let s,A,l,d,u,f,g;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(Qe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),A=this.params.maximumSequenceNumbersToCollect):A=y,d=Date.now(),this.nthSequenceNumber(e,A)))).next((y=>(s=y,u=Date.now(),this.removeTargets(e,s,t)))).next((y=>(l=y,f=Date.now(),this.removeOrphanedDocuments(e,s)))).next((y=>(g=Date.now(),Ho()<=gt.DEBUG&&Qe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-x}ms
	Determined least recently used ${A} in `+(u-d)+`ms
	Removed ${l} targets in `+(f-u)+`ms
	Removed ${y} documents in `+(g-f)+`ms
Total Duration: ${g-x}ms`),be.resolve({didRun:!0,sequenceNumbersCollected:A,targetsRemoved:l,documentsRemoved:y}))))}}function UF(r,e){return new TF(r,e)}class QF{constructor(){this.changes=new PA((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,cs.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?be.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class FF{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class IF{constructor(e,t,s,A){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=A}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((A=>(s=A,this.remoteDocumentCache.getEntry(e,t)))).next((A=>(s!==null&&Mc(s.mutation,A,Sn.empty(),Yt.now()),A)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,xt()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=xt()){const A=NA();return this.populateOverlays(e,A,t).next((()=>this.computeViews(e,t,A,s).next((l=>{let d=vc();return l.forEach(((u,f)=>{d=d.insert(u,f.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const s=NA();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,xt())))}populateOverlays(e,t,s){const A=[];return s.forEach((l=>{t.has(l)||A.push(l)})),this.documentOverlayCache.getOverlays(e,A).next((l=>{l.forEach(((d,u)=>{t.set(d,u)}))}))}computeViews(e,t,s,A){let l=La();const d=Rc(),u=(function(){return Rc()})();return t.forEach(((f,g)=>{const x=s.get(g.key);A.has(g.key)&&(x===void 0||x.mutation instanceof VA)?l=l.insert(g.key,g):x!==void 0?(d.set(g.key,x.mutation.getFieldMask()),Mc(x.mutation,g,x.mutation.getFieldMask(),Yt.now())):d.set(g.key,Sn.empty())})),this.recalculateAndSaveOverlays(e,l).next((f=>(f.forEach(((g,x)=>d.set(g,x))),t.forEach(((g,x)=>u.set(g,new FF(x,d.get(g)??null)))),u)))}recalculateAndSaveOverlays(e,t){const s=Rc();let A=new ar(((d,u)=>d-u)),l=xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const u of d)u.keys().forEach((f=>{const g=t.get(f);if(g===null)return;let x=s.get(f)||Sn.empty();x=u.applyToLocalView(g,x),s.set(f,x);const y=(A.get(u.batchId)||xt()).add(f);A=A.insert(u.batchId,y)}))})).next((()=>{const d=[],u=A.getReverseIterator();for(;u.hasNext();){const f=u.getNext(),g=f.key,x=f.value,y=KE();x.forEach((v=>{if(!l.has(v)){const N=JE(t.get(v),s.get(v));N!==null&&y.set(v,N),l=l.add(v)}})),d.push(this.documentOverlayCache.saveOverlays(e,g,y))}return be.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,A){return DQ(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):kQ(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,A):this.getDocumentsMatchingCollectionQuery(e,t,s,A)}getNextDocuments(e,t,s,A){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,A).next((l=>{const d=A-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,A-l.size):be.resolve(NA());let u=$c,f=l;return d.next((g=>be.forEach(g,((x,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),l.get(x)?be.resolve():this.remoteDocumentCache.getEntry(e,x).next((v=>{f=f.insert(x,v)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,f,g,xt()))).next((x=>({batchId:u,changes:zE(x)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ze(t)).next((s=>{let A=vc();return s.isFoundDocument()&&(A=A.insert(s.key,s)),A}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,A){const l=t.collectionGroup;let d=vc();return this.indexManager.getCollectionParents(e,l).next((u=>be.forEach(u,(f=>{const g=(function(y,v){return new jf(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,f.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,s,A).next((x=>{x.forEach(((y,v)=>{d=d.insert(y,v)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,s,A){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((d=>(l=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,A)))).next((d=>{l.forEach(((f,g)=>{const x=g.getKey();d.get(x)===null&&(d=d.insert(x,cs.newInvalidDocument(x)))}));let u=vc();return d.forEach(((f,g)=>{const x=l.get(f);x!==void 0&&Mc(x.mutation,g,Sn.empty(),Yt.now()),Tf(t,g)&&(u=u.insert(f,g))})),u}))}}class DF{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return be.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(A){return{id:A.id,version:A.version,createTime:ea(A.createTime)}})(t)),be.resolve()}getNamedQuery(e,t){return be.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(A){return{name:A.name,query:CF(A.bundledQuery),readTime:ea(A.readTime)}})(t)),be.resolve()}}class kF{constructor(){this.overlays=new ar(ze.comparator),this.Lr=new Map}getOverlay(e,t){return be.resolve(this.overlays.get(t))}getOverlays(e,t){const s=NA();return be.forEach(t,(A=>this.getOverlay(e,A).next((l=>{l!==null&&s.set(A,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((A,l)=>{this.bt(e,t,l)})),be.resolve()}removeOverlaysForBatchId(e,t,s){const A=this.Lr.get(s);return A!==void 0&&(A.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(s)),be.resolve()}getOverlaysForCollection(e,t,s){const A=NA(),l=t.length+1,d=new ze(t.child("")),u=this.overlays.getIteratorFrom(d);for(;u.hasNext();){const f=u.getNext().value,g=f.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&f.largestBatchId>s&&A.set(f.getKey(),f)}return be.resolve(A)}getOverlaysForCollectionGroup(e,t,s,A){let l=new ar(((g,x)=>g-x));const d=this.overlays.getIterator();for(;d.hasNext();){const g=d.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>s){let x=l.get(g.largestBatchId);x===null&&(x=NA(),l=l.insert(g.largestBatchId,x)),x.set(g.getKey(),g)}}const u=NA(),f=l.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((g,x)=>u.set(g,x))),!(u.size()>=A)););return be.resolve(u)}bt(e,t,s){const A=this.overlays.get(s.key);if(A!==null){const d=this.Lr.get(A.largestBatchId).delete(s.key);this.Lr.set(A.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new eF(t,s));let l=this.Lr.get(t);l===void 0&&(l=xt(),this.Lr.set(t,l)),this.Lr.set(t,l.add(s.key))}}class RF{constructor(){this.sessionToken=ts.EMPTY_BYTE_STRING}getSessionToken(e){return be.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,be.resolve()}}class C0{constructor(){this.kr=new kr(Pr.Kr),this.qr=new kr(Pr.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const s=new Pr(e,t);this.kr=this.kr.add(s),this.qr=this.qr.add(s)}$r(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Wr(new Pr(e,t))}Qr(e,t){e.forEach((s=>this.removeReference(s,t)))}Gr(e){const t=new ze(new sr([])),s=new Pr(t,e),A=new Pr(t,e+1),l=[];return this.qr.forEachInRange([s,A],(d=>{this.Wr(d),l.push(d.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new ze(new sr([])),s=new Pr(t,e),A=new Pr(t,e+1);let l=xt();return this.qr.forEachInRange([s,A],(d=>{l=l.add(d.key)})),l}containsKey(e){const t=new Pr(e,0),s=this.kr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Pr{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return ze.comparator(e.key,t.key)||pt(e.Hr,t.Hr)}static Ur(e,t){return pt(e.Hr,t.Hr)||ze.comparator(e.key,t.key)}}class MF{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new kr(Pr.Kr)}checkEmpty(e){return be.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,A){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new ZQ(l,t,s,A);this.mutationQueue.push(d);for(const u of A)this.Jr=this.Jr.add(new Pr(u.key,l)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return be.resolve(d)}lookupMutationBatch(e,t){return be.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,A=this.Xr(s),l=A<0?0:A;return be.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return be.resolve(this.mutationQueue.length===0?h0:this.Yn-1)}getAllMutationBatches(e){return be.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Pr(t,0),A=new Pr(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([s,A],(d=>{const u=this.Zr(d.Hr);l.push(u)})),be.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new kr(pt);return t.forEach((A=>{const l=new Pr(A,0),d=new Pr(A,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,d],(u=>{s=s.add(u.Hr)}))})),be.resolve(this.Yr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,A=s.length+1;let l=s;ze.isDocumentKey(l)||(l=l.child(""));const d=new Pr(new ze(l),0);let u=new kr(pt);return this.Jr.forEachWhile((f=>{const g=f.key.path;return!!s.isPrefixOf(g)&&(g.length===A&&(u=u.add(f.Hr)),!0)}),d),be.resolve(this.Yr(u))}Yr(e){const t=[];return e.forEach((s=>{const A=this.Zr(s);A!==null&&t.push(A)})),t}removeMutationBatch(e,t){Tt(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Jr;return be.forEach(t.mutations,(A=>{const l=new Pr(A.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,A.key)})).next((()=>{this.Jr=s}))}nr(e){}containsKey(e,t){const s=new Pr(t,0),A=this.Jr.firstAfterOrEqual(s);return be.resolve(t.isEqual(A&&A.key))}performConsistencyCheck(e){return this.mutationQueue.length,be.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class LF{constructor(e){this.ti=e,this.docs=(function(){return new ar(ze.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,A=this.docs.get(s),l=A?A.size:0,d=this.ti(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return be.resolve(s?s.document.mutableCopy():cs.newInvalidDocument(t))}getEntries(e,t){let s=La();return t.forEach((A=>{const l=this.docs.get(A);s=s.insert(A,l?l.document.mutableCopy():cs.newInvalidDocument(A))})),be.resolve(s)}getDocumentsMatchingQuery(e,t,s,A){let l=La();const d=t.path,u=new ze(d.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(u);for(;f.hasNext();){const{key:g,value:{document:x}}=f.getNext();if(!d.isPrefixOf(g.path))break;g.path.length>d.length+1||dQ(cQ(x),s)<=0||(A.has(x.key)||Tf(t,x))&&(l=l.insert(x.key,x.mutableCopy()))}return be.resolve(l)}getAllFromCollectionGroup(e,t,s,A){Ye(9500)}ni(e,t){return be.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new HF(this)}getSize(e){return be.resolve(this.size)}}class HF extends QF{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,A)=>{A.isValidDocument()?t.push(this.Mr.addEntry(e,A)):this.Mr.removeEntry(s)})),be.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class OF{constructor(e){this.persistence=e,this.ri=new PA((t=>g0(t)),p0),this.lastRemoteSnapshotVersion=Ze.min(),this.highestTargetId=0,this.ii=0,this.si=new C0,this.targetCount=0,this.oi=Al._r()}forEachTarget(e,t){return this.ri.forEach(((s,A)=>t(A))),be.resolve()}getLastRemoteSnapshotVersion(e){return be.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return be.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),be.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.ii&&(this.ii=t),be.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Al(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,be.resolve()}updateTargetData(e,t){return this.lr(t),be.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,be.resolve()}removeTargets(e,t,s){let A=0;const l=[];return this.ri.forEach(((d,u)=>{u.sequenceNumber<=t&&s.get(u.targetId)===null&&(this.ri.delete(d),l.push(this.removeMatchingKeysForTargetId(e,u.targetId)),A++)})),be.waitFor(l).next((()=>A))}getTargetCount(e){return be.resolve(this.targetCount)}getTargetData(e,t){const s=this.ri.get(t)||null;return be.resolve(s)}addMatchingKeys(e,t,s){return this.si.$r(t,s),be.resolve()}removeMatchingKeys(e,t,s){this.si.Qr(t,s);const A=this.persistence.referenceDelegate,l=[];return A&&t.forEach((d=>{l.push(A.markPotentiallyOrphaned(e,d))})),be.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),be.resolve()}getMatchingKeysForTargetId(e,t){const s=this.si.jr(t);return be.resolve(s)}containsKey(e,t){return be.resolve(this.si.containsKey(t))}}class d2{constructor(e,t){this._i={},this.overlays={},this.ai=new Ef(0),this.ui=!1,this.ui=!0,this.ci=new RF,this.referenceDelegate=e(this),this.li=new OF(this),this.indexManager=new EF,this.remoteDocumentCache=(function(A){return new LF(A)})((s=>this.referenceDelegate.hi(s))),this.serializer=new BF(t),this.Pi=new DF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new kF,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this._i[e.toKey()];return s||(s=new MF(t,this.referenceDelegate),this._i[e.toKey()]=s),s}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,s){Qe("MemoryPersistence","Starting transaction:",e);const A=new PF(this.ai.next());return this.referenceDelegate.Ti(),s(A).next((l=>this.referenceDelegate.Ii(A).next((()=>l)))).toPromise().then((l=>(A.raiseOnCommittedEvent(),l)))}Ei(e,t){return be.or(Object.values(this._i).map((s=>()=>s.containsKey(e,t))))}}class PF extends hQ{constructor(e){super(),this.currentSequenceNumber=e}}class E0{constructor(e){this.persistence=e,this.Ri=new C0,this.Ai=null}static Vi(e){return new E0(e)}get di(){if(this.Ai)return this.Ai;throw Ye(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.di.delete(s.toString()),be.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.di.add(s.toString()),be.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),be.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((A=>this.di.add(A.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((A=>{A.forEach((l=>this.di.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return be.forEach(this.di,(s=>{const A=ze.fromPath(s);return this.mi(e,A).next((l=>{l||t.removeEntry(A,Ze.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((s=>{s?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return be.or([()=>be.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class tf{constructor(e,t){this.persistence=e,this.fi=new PA((s=>gQ(s.path)),((s,A)=>s.isEqual(A))),this.garbageCollector=UF(this,t)}static Vi(e,t){return new tf(e,t)}Ti(){}Ii(e){return be.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((A=>s+A))))}pr(e){let t=0;return this.mr(e,(s=>{t++})).next((()=>t))}mr(e,t){return be.forEach(this.fi,((s,A)=>this.wr(e,s,A).next((l=>l?be.resolve():t(A)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const A=this.persistence.getRemoteDocumentCache(),l=A.newChangeBuffer();return A.ni(e,(d=>this.wr(e,d,t).next((u=>{u||(s++,l.removeEntry(d,Ze.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),be.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),be.resolve()}removeReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),be.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),be.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Th(e.data.value)),t}wr(e,t,s){return be.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const A=this.fi.get(t);return be.resolve(A!==void 0&&A>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class N0{constructor(e,t,s,A){this.targetId=e,this.fromCache=t,this.Ts=s,this.Is=A}static Es(e,t){let s=xt(),A=xt();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:A=A.add(l.doc.key)}return new N0(e,t.fromCache,s,A)}}class VF{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class zF{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return T_()?8:fQ(us())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,A){const l={result:null};return this.gs(e,t).next((d=>{l.result=d})).next((()=>{if(!l.result)return this.ps(e,t,A,s).next((d=>{l.result=d}))})).next((()=>{if(l.result)return;const d=new VF;return this.ys(e,t,d).next((u=>{if(l.result=u,this.As)return this.ws(e,t,d,u.size)}))})).next((()=>l.result))}ws(e,t,s,A){return s.documentReadCount<this.Vs?(Ho()<=gt.DEBUG&&Qe("QueryEngine","SDK will not create cache indexes for query:",Oo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),be.resolve()):(Ho()<=gt.DEBUG&&Qe("QueryEngine","Query:",Oo(t),"scans",s.documentReadCount,"local documents and returns",A,"documents as results."),s.documentReadCount>this.ds*A?(Ho()<=gt.DEBUG&&Qe("QueryEngine","The SDK decides to create cache indexes for query:",Oo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wn(t))):be.resolve())}gs(e,t){if(yB(t))return be.resolve(null);let s=Wn(t);return this.indexManager.getIndexType(e,s).next((A=>A===0?null:(t.limit!==null&&A===1&&(t=ax(t,null,"F"),s=Wn(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const d=xt(...l);return this.fs.getDocuments(e,d).next((u=>this.indexManager.getMinOffset(e,s).next((f=>{const g=this.bs(t,u);return this.Ss(t,g,d,f.readTime)?this.gs(e,ax(t,null,"F")):this.Ds(e,g,t,f)}))))})))))}ps(e,t,s,A){return yB(t)||A.isEqual(Ze.min())?be.resolve(null):this.fs.getDocuments(e,s).next((l=>{const d=this.bs(t,l);return this.Ss(t,d,s,A)?be.resolve(null):(Ho()<=gt.DEBUG&&Qe("QueryEngine","Re-using previous result from %s to execute query: %s",A.toString(),Oo(t)),this.Ds(e,d,t,lQ(A,$c)).next((u=>u)))}))}bs(e,t){let s=new kr(PE(e));return t.forEach(((A,l)=>{Tf(e,l)&&(s=s.add(l))})),s}Ss(e,t,s,A){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(A)>0)}ys(e,t,s){return Ho()<=gt.DEBUG&&Qe("QueryEngine","Using full collection scan to execute query:",Oo(t)),this.fs.getDocumentsMatchingQuery(e,t,Oi.min(),s)}Ds(e,t,s,A){return this.fs.getDocumentsMatchingQuery(e,s,A).next((l=>(t.forEach((d=>{l=l.insert(d.key,d)})),l)))}}const S0="LocalStore",KF=3e8;class GF{constructor(e,t,s,A){this.persistence=e,this.Cs=t,this.serializer=A,this.vs=new ar(pt),this.Fs=new PA((l=>g0(l)),p0),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(s)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new IF(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function qF(r,e,t,s){return new GF(r,e,t,s)}async function u2(r,e){const t=rt(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let A;return t.mutationQueue.getAllMutationBatches(s).next((l=>(A=l,t.Os(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const d=[],u=[];let f=xt();for(const g of A){d.push(g.batchId);for(const x of g.mutations)f=f.add(x.key)}for(const g of l){u.push(g.batchId);for(const x of g.mutations)f=f.add(x.key)}return t.localDocuments.getDocuments(s,f).next((g=>({Ns:g,removedBatchIds:d,addedBatchIds:u})))}))}))}function YF(r,e){const t=rt(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const A=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(u,f,g,x){const y=g.batch,v=y.keys();let N=be.resolve();return v.forEach((R=>{N=N.next((()=>x.getEntry(f,R))).next((S=>{const P=g.docVersions.get(R);Tt(P!==null,48541),S.version.compareTo(P)<0&&(y.applyToRemoteDocument(S,g),S.isValidDocument()&&(S.setReadTime(g.commitVersion),x.addEntry(S)))}))})),N.next((()=>u.mutationQueue.removeMutationBatch(f,y)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,A,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(u){let f=xt();for(let g=0;g<u.mutationResults.length;++g)u.mutationResults[g].transformResults.length>0&&(f=f.add(u.batch.mutations[g].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(s,A)))}))}function h2(r){const e=rt(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function $F(r,e){const t=rt(r),s=e.snapshotVersion;let A=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const d=t.xs.newChangeBuffer({trackRemovals:!0});A=t.vs;const u=[];e.targetChanges.forEach(((x,y)=>{const v=A.get(y);if(!v)return;u.push(t.li.removeMatchingKeys(l,x.removedDocuments,y).next((()=>t.li.addMatchingKeys(l,x.addedDocuments,y))));let N=v.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(y)!==null?N=N.withResumeToken(ts.EMPTY_BYTE_STRING,Ze.min()).withLastLimboFreeSnapshotVersion(Ze.min()):x.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(x.resumeToken,s)),A=A.insert(y,N),(function(S,P,V){return S.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=KF?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(v,N,x)&&u.push(t.li.updateTargetData(l,N))}));let f=La(),g=xt();if(e.documentUpdates.forEach((x=>{e.resolvedLimboDocuments.has(x)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(l,x))})),u.push(XF(l,d,e.documentUpdates).next((x=>{f=x.Bs,g=x.Ls}))),!s.isEqual(Ze.min())){const x=t.li.getLastRemoteSnapshotVersion(l).next((y=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,s)));u.push(x)}return be.waitFor(u).next((()=>d.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,f,g))).next((()=>f))})).then((l=>(t.vs=A,l)))}function XF(r,e,t){let s=xt(),A=xt();return t.forEach((l=>s=s.add(l))),e.getEntries(r,s).next((l=>{let d=La();return t.forEach(((u,f)=>{const g=l.get(u);f.isFoundDocument()!==g.isFoundDocument()&&(A=A.add(u)),f.isNoDocument()&&f.version.isEqual(Ze.min())?(e.removeEntry(u,f.readTime),d=d.insert(u,f)):!g.isValidDocument()||f.version.compareTo(g.version)>0||f.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(f),d=d.insert(u,f)):Qe(S0,"Ignoring outdated watch update for ",u,". Current version:",g.version," Watch version:",f.version)})),{Bs:d,Ls:A}}))}function JF(r,e){const t=rt(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=h0),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function WF(r,e){const t=rt(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let A;return t.li.getTargetData(s,e).next((l=>l?(A=l,be.resolve(A)):t.li.allocateTargetId(s).next((d=>(A=new ji(e,d,"TargetPurposeListen",s.currentSequenceNumber),t.li.addTargetData(s,A).next((()=>A)))))))})).then((s=>{const A=t.vs.get(s.targetId);return(A===null||s.snapshotVersion.compareTo(A.snapshotVersion)>0)&&(t.vs=t.vs.insert(s.targetId,s),t.Fs.set(e,s.targetId)),s}))}async function cx(r,e,t){const s=rt(r),A=s.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(d=>s.persistence.referenceDelegate.removeTarget(d,A)))}catch(d){if(!ml(d))throw d;Qe(S0,`Failed to update sequence numbers for target ${e}: ${d}`)}s.vs=s.vs.remove(e),s.Fs.delete(A.target)}function QB(r,e,t){const s=rt(r);let A=Ze.min(),l=xt();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(f,g,x){const y=rt(f),v=y.Fs.get(x);return v!==void 0?be.resolve(y.vs.get(v)):y.li.getTargetData(g,x)})(s,d,Wn(e)).next((u=>{if(u)return A=u.lastLimboFreeSnapshotVersion,s.li.getMatchingKeysForTargetId(d,u.targetId).next((f=>{l=f}))})).next((()=>s.Cs.getDocumentsMatchingQuery(d,e,t?A:Ze.min(),t?l:xt()))).next((u=>(ZF(s,MQ(e),u),{documents:u,ks:l})))))}function ZF(r,e,t){let s=r.Ms.get(e)||Ze.min();t.forEach(((A,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),r.Ms.set(e,s)}class FB{constructor(){this.activeTargetIds=zQ()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eI{constructor(){this.vo=new FB,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,s){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new FB,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class tI{Mo(e){}shutdown(){}}const IB="ConnectivityMonitor";class DB{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Qe(IB,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Qe(IB,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Yu=null;function dx(){return Yu===null?Yu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Yu++,"0x"+Yu.toString(16)}const np="RestConnection",rI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class sI{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),A=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${s}/databases/${A}`,this.$o=this.databaseId.database===Yh?`project_id=${s}`:`project_id=${s}&database_id=${A}`}Wo(e,t,s,A,l){const d=dx(),u=this.Qo(e,t.toUriEncodedString());Qe(np,`Sending RPC '${e}' ${d}:`,u,s);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(f,A,l);const{host:g}=new URL(u),x=cl(g);return this.zo(e,u,f,s,x).then((y=>(Qe(np,`Received RPC '${e}' ${d}: `,y),y)),(y=>{throw MA(np,`RPC '${e}' ${d} failed with error: `,y,"url: ",u,"request:",s),y}))}jo(e,t,s,A,l,d){return this.Wo(e,t,s,A,l)}Go(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+hl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((A,l)=>e[l]=A)),s&&s.headers.forEach(((A,l)=>e[l]=A))}Qo(e,t){const s=rI[e];let A=`${this.qo}/v1/${t}:${s}`;return this.databaseInfo.apiKey&&(A=`${A}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),A}terminate(){}}class nI{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const is="WebChannelConnection",mc=(r,e,t)=>{r.listen(e,(s=>{try{t(s)}catch(A){setTimeout((()=>{throw A}),0)}}))};class Jo extends sI{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Jo.c_){const e=bE();mc(e,yE.STAT_EVENT,(t=>{t.stat===Zp.PROXY?Qe(is,"STAT_EVENT: detected buffering proxy"):t.stat===Zp.NOPROXY&&Qe(is,"STAT_EVENT: detected no buffering proxy")})),Jo.c_=!0}}zo(e,t,s,A,l){const d=dx();return new Promise(((u,f)=>{const g=new pE;g.setWithCredentials(!0),g.listenOnce(xE.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case _h.NO_ERROR:const y=g.getResponseJson();Qe(is,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(y)),u(y);break;case _h.TIMEOUT:Qe(is,`RPC '${e}' ${d} timed out`),f(new He(we.DEADLINE_EXCEEDED,"Request time out"));break;case _h.HTTP_ERROR:const v=g.getStatus();if(Qe(is,`RPC '${e}' ${d} failed with status:`,v,"response text:",g.getResponseText()),v>0){let N=g.getResponseJson();Array.isArray(N)&&(N=N[0]);const R=N?.error;if(R&&R.status&&R.message){const S=(function(V){const $=V.toLowerCase().replace(/_/g,"-");return Object.values(we).indexOf($)>=0?$:we.UNKNOWN})(R.status);f(new He(S,R.message))}else f(new He(we.UNKNOWN,"Server responded with status "+g.getStatus()))}else f(new He(we.UNAVAILABLE,"Connection failed."));break;default:Ye(9055,{l_:e,streamId:d,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{Qe(is,`RPC '${e}' ${d} completed.`)}}));const x=JSON.stringify(A);Qe(is,`RPC '${e}' ${d} sending request:`,A),g.send(t,"POST",x,s,15)}))}T_(e,t,s){const A=dx(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=this.createWebChannelTransport(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Go(u.initMessageHeaders,t,s),u.encodeInitMessageHeaders=!0;const g=l.join("");Qe(is,`Creating RPC '${e}' stream ${A}: ${g}`,u);const x=d.createWebChannel(g,u);this.I_(x);let y=!1,v=!1;const N=new nI({Ho:R=>{v?Qe(is,`Not sending because RPC '${e}' stream ${A} is closed:`,R):(y||(Qe(is,`Opening RPC '${e}' stream ${A} transport.`),x.open(),y=!0),Qe(is,`RPC '${e}' stream ${A} sending:`,R),x.send(R))},Jo:()=>x.close()});return mc(x,bc.EventType.OPEN,(()=>{v||(Qe(is,`RPC '${e}' stream ${A} transport opened.`),N.i_())})),mc(x,bc.EventType.CLOSE,(()=>{v||(v=!0,Qe(is,`RPC '${e}' stream ${A} transport closed`),N.o_(),this.E_(x))})),mc(x,bc.EventType.ERROR,(R=>{v||(v=!0,MA(is,`RPC '${e}' stream ${A} transport errored. Name:`,R.name,"Message:",R.message),N.o_(new He(we.UNAVAILABLE,"The operation could not be completed")))})),mc(x,bc.EventType.MESSAGE,(R=>{if(!v){const S=R.data[0];Tt(!!S,16349);const P=S,V=P?.error||P[0]?.error;if(V){Qe(is,`RPC '${e}' stream ${A} received error:`,V);const $=V.status;let G=(function(q){const E=Er[q];if(E!==void 0)return ZE(E)})($),K=V.message;$==="NOT_FOUND"&&K.includes("database")&&K.includes("does not exist")&&K.includes(this.databaseId.database)&&MA(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),G===void 0&&(G=we.INTERNAL,K="Unknown error status: "+$+" with message "+V.message),v=!0,N.o_(new He(G,K)),x.close()}else Qe(is,`RPC '${e}' stream ${A} received:`,S),N.__(S)}})),Jo.u_(),setTimeout((()=>{N.s_()}),0),N}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,s){super.Go(e,t,s),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return vE()}}function aI(r){return new Jo(r)}function ap(){return typeof document<"u"?document:null}function If(r){return new lF(r,!0)}Jo.c_=!1;class f2{constructor(e,t,s=1e3,A=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=s,this.A_=A,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),s=Math.max(0,Date.now()-this.f_),A=Math.max(0,t-s);A>0&&Qe("ExponentialBackoff",`Backing off for ${A} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,A,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const kB="PersistentStream";class m2{constructor(e,t,s,A,l,d,u,f){this.Ci=e,this.b_=s,this.S_=A,this.connection=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=u,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new f2(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===we.RESOURCE_EXHAUSTED?(Ma(t.toString()),Ma("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===we.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,A])=>{this.D_===t&&this.G_(s,A)}),(s=>{e((()=>{const A=new He(we.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(A)}))}))}G_(e,t){const s=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.Yo((()=>{s((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((A=>{s((()=>this.z_(A)))})),this.stream.onMessage((A=>{s((()=>++this.F_==1?this.H_(A):this.onNext(A)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Qe(kB,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(Qe(kB,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class iI extends m2{constructor(e,t,s,A,l,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,A,d),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=uF(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Ze.min();const d=l.targetChange;return d.targetIds&&d.targetIds.length?Ze.min():d.readTime?ea(d.readTime):Ze.min()})(e);return this.listener.J_(t,s)}Z_(e){const t={};t.database=lx(this.serializer),t.addTarget=(function(l,d){let u;const f=d.target;if(u=nx(f)?{documents:mF(l,f)}:{query:gF(l,f).ft},u.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){u.resumeToken=r2(l,d.resumeToken);const g=ix(l,d.expectedCount);g!==null&&(u.expectedCount=g)}else if(d.snapshotVersion.compareTo(Ze.min())>0){u.readTime=ef(l,d.snapshotVersion.toTimestamp());const g=ix(l,d.expectedCount);g!==null&&(u.expectedCount=g)}return u})(this.serializer,e);const s=xF(this.serializer,e);s&&(t.labels=s),this.K_(t)}X_(e){const t={};t.database=lx(this.serializer),t.removeTarget=e,this.K_(t)}}class AI extends m2{constructor(e,t,s,A,l,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,A,d),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Tt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Tt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Tt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=fF(e.writeResults,e.commitTime),s=ea(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=lx(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>hF(this.serializer,s)))};this.K_(t)}}class oI{}class lI extends oI{constructor(e,t,s,A){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=A,this.ia=!1}sa(){if(this.ia)throw new He(we.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,A){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,d])=>this.connection.Wo(e,Ax(t,s),A,l,d))).catch((l=>{throw l.name==="FirebaseError"?(l.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new He(we.UNKNOWN,l.toString())}))}jo(e,t,s,A,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,u])=>this.connection.jo(e,Ax(t,s),A,d,u,l))).catch((d=>{throw d.name==="FirebaseError"?(d.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new He(we.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function cI(r,e,t,s){return new lI(r,e,t,s)}class dI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ma(t),this.aa=!1):Qe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const LA="RemoteStore";class uI{constructor(e,t,s,A,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((d=>{s.enqueueAndForget((async()=>{zA(this)&&(Qe(LA,"Restarting streams for network reachability change."),await(async function(f){const g=rt(f);g.Ea.add(4),await gd(g),g.Va.set("Unknown"),g.Ea.delete(4),await Df(g)})(this))}))})),this.Va=new dI(s,A)}}async function Df(r){if(zA(r))for(const e of r.Ra)await e(!0)}async function gd(r){for(const e of r.Ra)await e(!1)}function g2(r,e){const t=rt(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),U0(t)?T0(t):gl(t).O_()&&_0(t,e))}function j0(r,e){const t=rt(r),s=gl(t);t.Ia.delete(e),s.O_()&&p2(t,e),t.Ia.size===0&&(s.O_()?s.L_():zA(t)&&t.Va.set("Unknown"))}function _0(r,e){if(r.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ze.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}gl(r).Z_(e)}function p2(r,e){r.da.$e(e),gl(r).X_(e)}function T0(r){r.da=new aF({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),gl(r).start(),r.Va.ua()}function U0(r){return zA(r)&&!gl(r).x_()&&r.Ia.size>0}function zA(r){return rt(r).Ea.size===0}function x2(r){r.da=void 0}async function hI(r){r.Va.set("Online")}async function fI(r){r.Ia.forEach(((e,t)=>{_0(r,e)}))}async function mI(r,e){x2(r),U0(r)?(r.Va.ha(e),T0(r)):r.Va.set("Unknown")}async function gI(r,e,t){if(r.Va.set("Online"),e instanceof t2&&e.state===2&&e.cause)try{await(async function(A,l){const d=l.cause;for(const u of l.targetIds)A.Ia.has(u)&&(await A.remoteSyncer.rejectListen(u,d),A.Ia.delete(u),A.da.removeTarget(u))})(r,e)}catch(s){Qe(LA,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await rf(r,s)}else if(e instanceof Fh?r.da.Xe(e):e instanceof e2?r.da.st(e):r.da.tt(e),!t.isEqual(Ze.min()))try{const s=await h2(r.localStore);t.compareTo(s)>=0&&await(function(l,d){const u=l.da.Tt(d);return u.targetChanges.forEach(((f,g)=>{if(f.resumeToken.approximateByteSize()>0){const x=l.Ia.get(g);x&&l.Ia.set(g,x.withResumeToken(f.resumeToken,d))}})),u.targetMismatches.forEach(((f,g)=>{const x=l.Ia.get(f);if(!x)return;l.Ia.set(f,x.withResumeToken(ts.EMPTY_BYTE_STRING,x.snapshotVersion)),p2(l,f);const y=new ji(x.target,f,g,x.sequenceNumber);_0(l,y)})),l.remoteSyncer.applyRemoteEvent(u)})(r,t)}catch(s){Qe(LA,"Failed to raise snapshot:",s),await rf(r,s)}}async function rf(r,e,t){if(!ml(e))throw e;r.Ea.add(1),await gd(r),r.Va.set("Offline"),t||(t=()=>h2(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{Qe(LA,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Df(r)}))}function y2(r,e){return e().catch((t=>rf(r,t,e)))}async function kf(r){const e=rt(r),t=Ki(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:h0;for(;pI(e);)try{const A=await JF(e.localStore,s);if(A===null){e.Ta.length===0&&t.L_();break}s=A.batchId,xI(e,A)}catch(A){await rf(e,A)}b2(e)&&v2(e)}function pI(r){return zA(r)&&r.Ta.length<10}function xI(r,e){r.Ta.push(e);const t=Ki(r);t.O_()&&t.Y_&&t.ea(e.mutations)}function b2(r){return zA(r)&&!Ki(r).x_()&&r.Ta.length>0}function v2(r){Ki(r).start()}async function yI(r){Ki(r).ra()}async function bI(r){const e=Ki(r);for(const t of r.Ta)e.ea(t.mutations)}async function vI(r,e,t){const s=r.Ta.shift(),A=v0.from(s,e,t);await y2(r,(()=>r.remoteSyncer.applySuccessfulWrite(A))),await kf(r)}async function wI(r,e){e&&Ki(r).Y_&&await(async function(s,A){if((function(d){return rF(d)&&d!==we.ABORTED})(A.code)){const l=s.Ta.shift();Ki(s).B_(),await y2(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,A))),await kf(s)}})(r,e),b2(r)&&v2(r)}async function RB(r,e){const t=rt(r);t.asyncQueue.verifyOperationInProgress(),Qe(LA,"RemoteStore received new credentials");const s=zA(t);t.Ea.add(3),await gd(t),s&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Df(t)}async function BI(r,e){const t=rt(r);e?(t.Ea.delete(2),await Df(t)):e||(t.Ea.add(2),await gd(t),t.Va.set("Unknown"))}function gl(r){return r.ma||(r.ma=(function(t,s,A){const l=rt(t);return l.sa(),new iI(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,A)})(r.datastore,r.asyncQueue,{Zo:hI.bind(null,r),Yo:fI.bind(null,r),t_:mI.bind(null,r),J_:gI.bind(null,r)}),r.Ra.push((async e=>{e?(r.ma.B_(),U0(r)?T0(r):r.Va.set("Unknown")):(await r.ma.stop(),x2(r))}))),r.ma}function Ki(r){return r.fa||(r.fa=(function(t,s,A){const l=rt(t);return l.sa(),new AI(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,A)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),Yo:yI.bind(null,r),t_:wI.bind(null,r),ta:bI.bind(null,r),na:vI.bind(null,r)}),r.Ra.push((async e=>{e?(r.fa.B_(),await kf(r)):(await r.fa.stop(),r.Ta.length>0&&(Qe(LA,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class Q0{constructor(e,t,s,A,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=A,this.removalCallback=l,this.deferred=new Ri,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,A,l){const d=Date.now()+s,u=new Q0(e,t,d,A,l);return u.start(s),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new He(we.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function F0(r,e){if(Ma("AsyncQueue",`${e}: ${r}`),ml(r))return new He(we.UNAVAILABLE,`${e}: ${r}`);throw r}class Wo{static emptySet(e){return new Wo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||ze.comparator(t.key,s.key):(t,s)=>ze.comparator(t.key,s.key),this.keyedMap=vc(),this.sortedSet=new ar(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Wo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const A=t.getNext().key,l=s.getNext().key;if(!A.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Wo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class MB{constructor(){this.ga=new ar(ze.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ye(63341,{Vt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class ol{constructor(e,t,s,A,l,d,u,f,g){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=A,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=u,this.excludesMetadataChanges=f,this.hasCachedResults=g}static fromInitialDocuments(e,t,s,A,l){const d=[];return t.forEach((u=>{d.push({type:0,doc:u})})),new ol(e,t,Wo.emptySet(t),d,s,A,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_f(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let A=0;A<t.length;A++)if(t[A].type!==s[A].type||!t[A].doc.isEqual(s[A].doc))return!1;return!0}}class CI{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class EI{constructor(){this.queries=LB(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const A=rt(t),l=A.queries;A.queries=LB(),l.forEach(((d,u)=>{for(const f of u.ba)f.onError(s)}))})(this,new He(we.ABORTED,"Firestore shutting down"))}}function LB(){return new PA((r=>OE(r)),_f)}async function NI(r,e){const t=rt(r);let s=3;const A=e.query;let l=t.queries.get(A);l?!l.Sa()&&e.Da()&&(s=2):(l=new CI,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(A,!0);break;case 1:l.wa=await t.onListen(A,!1);break;case 2:await t.onFirstRemoteStoreListen(A)}}catch(d){const u=F0(d,`Initialization of query '${Oo(e.query)}' failed`);return void e.onError(u)}t.queries.set(A,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&I0(t)}async function SI(r,e){const t=rt(r),s=e.query;let A=3;const l=t.queries.get(s);if(l){const d=l.ba.indexOf(e);d>=0&&(l.ba.splice(d,1),l.ba.length===0?A=e.Da()?0:1:!l.Sa()&&e.Da()&&(A=2))}switch(A){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function jI(r,e){const t=rt(r);let s=!1;for(const A of e){const l=A.query,d=t.queries.get(l);if(d){for(const u of d.ba)u.Fa(A)&&(s=!0);d.wa=A}}s&&I0(t)}function _I(r,e,t){const s=rt(r),A=s.queries.get(e);if(A)for(const l of A.ba)l.onError(t);s.queries.delete(e)}function I0(r){r.Ca.forEach((e=>{e.next()}))}var ux,HB;(HB=ux||(ux={})).Ma="default",HB.Cache="cache";class TI{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const A of e.docChanges)A.type!==3&&s.push(A);e=new ol(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.Ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ol.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ux.Cache}}class w2{constructor(e){this.key=e}}class B2{constructor(e){this.key=e}}class UI{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=xt(),this.mutatedKeys=xt(),this.eu=PE(e),this.tu=new Wo(this.eu)}get nu(){return this.Za}ru(e,t){const s=t?t.iu:new MB,A=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,d=A,u=!1;const f=this.query.limitType==="F"&&A.size===this.query.limit?A.last():null,g=this.query.limitType==="L"&&A.size===this.query.limit?A.first():null;if(e.inorderTraversal(((x,y)=>{const v=A.get(x),N=Tf(this.query,y)?y:null,R=!!v&&this.mutatedKeys.has(v.key),S=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let P=!1;v&&N?v.data.isEqual(N.data)?R!==S&&(s.track({type:3,doc:N}),P=!0):this.su(v,N)||(s.track({type:2,doc:N}),P=!0,(f&&this.eu(N,f)>0||g&&this.eu(N,g)<0)&&(u=!0)):!v&&N?(s.track({type:0,doc:N}),P=!0):v&&!N&&(s.track({type:1,doc:v}),P=!0,(f||g)&&(u=!0)),P&&(N?(d=d.add(N),l=S?l.add(x):l.delete(x)):(d=d.delete(x),l=l.delete(x)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const x=this.query.limitType==="F"?d.last():d.first();d=d.delete(x.key),l=l.delete(x.key),s.track({type:1,doc:x})}return{tu:d,iu:s,Ss:u,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,A){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((x,y)=>(function(N,R){const S=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ye(20277,{Vt:P})}};return S(N)-S(R)})(x.type,y.type)||this.eu(x.doc,y.doc))),this.ou(s),A=A??!1;const u=t&&!A?this._u():[],f=this.Ya.size===0&&this.current&&!A?1:0,g=f!==this.Xa;return this.Xa=f,d.length!==0||g?{snapshot:new ol(this.query,e.tu,l,d,e.mutatedKeys,f===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new MB,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=xt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Ya=this.Ya.add(s.key))}));const t=[];return e.forEach((s=>{this.Ya.has(s)||t.push(new B2(s))})),this.Ya.forEach((s=>{e.has(s)||t.push(new w2(s))})),t}cu(e){this.Za=e.ks,this.Ya=xt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ol.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const D0="SyncEngine";class QI{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class FI{constructor(e){this.key=e,this.hu=!1}}class II{constructor(e,t,s,A,l,d){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=A,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new PA((u=>OE(u)),_f),this.Iu=new Map,this.Eu=new Set,this.Ru=new ar(ze.comparator),this.Au=new Map,this.Vu=new C0,this.du={},this.mu=new Map,this.fu=Al.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function DI(r,e,t=!0){const s=_2(r);let A;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),A=l.view.lu()):A=await C2(s,e,t,!0),A}async function kI(r,e){const t=_2(r);await C2(t,e,!0,!1)}async function C2(r,e,t,s){const A=await WF(r.localStore,Wn(e)),l=A.targetId,d=r.sharedClientState.addLocalQueryTarget(l,t);let u;return s&&(u=await RI(r,e,l,d==="current",A.resumeToken)),r.isPrimaryClient&&t&&g2(r.remoteStore,A),u}async function RI(r,e,t,s,A){r.pu=(y,v,N)=>(async function(S,P,V,$){let G=P.view.ru(V);G.Ss&&(G=await QB(S.localStore,P.query,!1).then((({documents:E})=>P.view.ru(E,G))));const K=$&&$.targetChanges.get(P.targetId),Y=$&&$.targetMismatches.get(P.targetId)!=null,q=P.view.applyChanges(G,S.isPrimaryClient,K,Y);return PB(S,P.targetId,q.au),q.snapshot})(r,y,v,N);const l=await QB(r.localStore,e,!0),d=new UI(e,l.ks),u=d.ru(l.documents),f=md.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",A),g=d.applyChanges(u,r.isPrimaryClient,f);PB(r,t,g.au);const x=new QI(e,t,d);return r.Tu.set(e,x),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),g.snapshot}async function MI(r,e,t){const s=rt(r),A=s.Tu.get(e),l=s.Iu.get(A.targetId);if(l.length>1)return s.Iu.set(A.targetId,l.filter((d=>!_f(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(A.targetId),s.sharedClientState.isActiveQueryTarget(A.targetId)||await cx(s.localStore,A.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(A.targetId),t&&j0(s.remoteStore,A.targetId),hx(s,A.targetId)})).catch(fl)):(hx(s,A.targetId),await cx(s.localStore,A.targetId,!0))}async function LI(r,e){const t=rt(r),s=t.Tu.get(e),A=t.Iu.get(s.targetId);t.isPrimaryClient&&A.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),j0(t.remoteStore,s.targetId))}async function HI(r,e,t){const s=qI(r);try{const A=await(function(d,u){const f=rt(d),g=Yt.now(),x=u.reduce(((N,R)=>N.add(R.key)),xt());let y,v;return f.persistence.runTransaction("Locally write mutations","readwrite",(N=>{let R=La(),S=xt();return f.xs.getEntries(N,x).next((P=>{R=P,R.forEach(((V,$)=>{$.isValidDocument()||(S=S.add(V))}))})).next((()=>f.localDocuments.getOverlayedDocuments(N,R))).next((P=>{y=P;const V=[];for(const $ of u){const G=JQ($,y.get($.key).overlayedDocument);G!=null&&V.push(new VA($.key,G,IE(G.value.mapValue),Zn.exists(!0)))}return f.mutationQueue.addMutationBatch(N,g,V,u)})).next((P=>{v=P;const V=P.applyToLocalDocumentSet(y,S);return f.documentOverlayCache.saveOverlays(N,P.batchId,V)}))})).then((()=>({batchId:v.batchId,changes:zE(y)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(A.batchId),(function(d,u,f){let g=d.du[d.currentUser.toKey()];g||(g=new ar(pt)),g=g.insert(u,f),d.du[d.currentUser.toKey()]=g})(s,A.batchId,t),await pd(s,A.changes),await kf(s.remoteStore)}catch(A){const l=F0(A,"Failed to persist write");t.reject(l)}}async function E2(r,e){const t=rt(r);try{const s=await $F(t.localStore,e);e.targetChanges.forEach(((A,l)=>{const d=t.Au.get(l);d&&(Tt(A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size<=1,22616),A.addedDocuments.size>0?d.hu=!0:A.modifiedDocuments.size>0?Tt(d.hu,14607):A.removedDocuments.size>0&&(Tt(d.hu,42227),d.hu=!1))})),await pd(t,s,e)}catch(s){await fl(s)}}function OB(r,e,t){const s=rt(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const A=[];s.Tu.forEach(((l,d)=>{const u=d.view.va(e);u.snapshot&&A.push(u.snapshot)})),(function(d,u){const f=rt(d);f.onlineState=u;let g=!1;f.queries.forEach(((x,y)=>{for(const v of y.ba)v.va(u)&&(g=!0)})),g&&I0(f)})(s.eventManager,e),A.length&&s.Pu.J_(A),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function OI(r,e,t){const s=rt(r);s.sharedClientState.updateQueryState(e,"rejected",t);const A=s.Au.get(e),l=A&&A.key;if(l){let d=new ar(ze.comparator);d=d.insert(l,cs.newNoDocument(l,Ze.min()));const u=xt().add(l),f=new Ff(Ze.min(),new Map,new ar(pt),d,u);await E2(s,f),s.Ru=s.Ru.remove(l),s.Au.delete(e),k0(s)}else await cx(s.localStore,e,!1).then((()=>hx(s,e,t))).catch(fl)}async function PI(r,e){const t=rt(r),s=e.batch.batchId;try{const A=await YF(t.localStore,e);S2(t,s,null),N2(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await pd(t,A)}catch(A){await fl(A)}}async function VI(r,e,t){const s=rt(r);try{const A=await(function(d,u){const f=rt(d);return f.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let x;return f.mutationQueue.lookupMutationBatch(g,u).next((y=>(Tt(y!==null,37113),x=y.keys(),f.mutationQueue.removeMutationBatch(g,y)))).next((()=>f.mutationQueue.performConsistencyCheck(g))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(g,x,u))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,x))).next((()=>f.localDocuments.getDocuments(g,x)))}))})(s.localStore,e);S2(s,e,t),N2(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await pd(s,A)}catch(A){await fl(A)}}function N2(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function S2(r,e,t){const s=rt(r);let A=s.du[s.currentUser.toKey()];if(A){const l=A.get(e);l&&(t?l.reject(t):l.resolve(),A=A.remove(e)),s.du[s.currentUser.toKey()]=A}}function hx(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Vu.Gr(e).forEach((s=>{r.Vu.containsKey(s)||j2(r,s)}))}function j2(r,e){r.Eu.delete(e.path.canonicalString());const t=r.Ru.get(e);t!==null&&(j0(r.remoteStore,t),r.Ru=r.Ru.remove(e),r.Au.delete(t),k0(r))}function PB(r,e,t){for(const s of t)s instanceof w2?(r.Vu.addReference(s.key,e),zI(r,s)):s instanceof B2?(Qe(D0,"Document no longer in limbo: "+s.key),r.Vu.removeReference(s.key,e),r.Vu.containsKey(s.key)||j2(r,s.key)):Ye(19791,{wu:s})}function zI(r,e){const t=e.key,s=t.path.canonicalString();r.Ru.get(t)||r.Eu.has(s)||(Qe(D0,"New document in limbo: "+t),r.Eu.add(s),k0(r))}function k0(r){for(;r.Eu.size>0&&r.Ru.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new ze(sr.fromString(e)),s=r.fu.next();r.Au.set(s,new FI(t)),r.Ru=r.Ru.insert(t,s),g2(r.remoteStore,new ji(Wn(x0(t.path)),s,"TargetPurposeLimboResolution",Ef.ce))}}async function pd(r,e,t){const s=rt(r),A=[],l=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((u,f)=>{d.push(s.pu(f,e,t).then((g=>{if((g||t)&&s.isPrimaryClient){const x=g?!g.fromCache:t?.targetChanges.get(f.targetId)?.current;s.sharedClientState.updateQueryState(f.targetId,x?"current":"not-current")}if(g){A.push(g);const x=N0.Es(f.targetId,g);l.push(x)}})))})),await Promise.all(d),s.Pu.J_(A),await(async function(f,g){const x=rt(f);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>be.forEach(g,(v=>be.forEach(v.Ts,(N=>x.persistence.referenceDelegate.addReference(y,v.targetId,N))).next((()=>be.forEach(v.Is,(N=>x.persistence.referenceDelegate.removeReference(y,v.targetId,N)))))))))}catch(y){if(!ml(y))throw y;Qe(S0,"Failed to update sequence numbers: "+y)}for(const y of g){const v=y.targetId;if(!y.fromCache){const N=x.vs.get(v),R=N.snapshotVersion,S=N.withLastLimboFreeSnapshotVersion(R);x.vs=x.vs.insert(v,S)}}})(s.localStore,l))}async function KI(r,e){const t=rt(r);if(!t.currentUser.isEqual(e)){Qe(D0,"User change. New user:",e.toKey());const s=await u2(t.localStore,e);t.currentUser=e,(function(l,d){l.mu.forEach((u=>{u.forEach((f=>{f.reject(new He(we.CANCELLED,d))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await pd(t,s.Ns)}}function GI(r,e){const t=rt(r),s=t.Au.get(e);if(s&&s.hu)return xt().add(s.key);{let A=xt();const l=t.Iu.get(e);if(!l)return A;for(const d of l){const u=t.Tu.get(d);A=A.unionWith(u.view.nu)}return A}}function _2(r){const e=rt(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=E2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=GI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=OI.bind(null,e),e.Pu.J_=jI.bind(null,e.eventManager),e.Pu.yu=_I.bind(null,e.eventManager),e}function qI(r){const e=rt(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=PI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=VI.bind(null,e),e}class sf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=If(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return qF(this.persistence,new zF,e.initialUser,this.serializer)}Cu(e){return new d2(E0.Vi,this.serializer)}Du(e){return new eI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sf.provider={build:()=>new sf};class YI extends sf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Tt(this.persistence.referenceDelegate instanceof tf,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new _F(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Qs.withCacheSize(this.cacheSizeBytes):Qs.DEFAULT;return new d2((s=>tf.Vi(s,t)),this.serializer)}}class fx{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>OB(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=KI.bind(null,this.syncEngine),await BI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new EI})()}createDatastore(e){const t=If(e.databaseInfo.databaseId),s=aI(e.databaseInfo);return cI(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,A,l,d,u){return new uI(s,A,l,d,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>OB(this.syncEngine,t,0)),(function(){return DB.v()?new DB:new tI})())}createSyncEngine(e,t){return(function(A,l,d,u,f,g,x){const y=new II(A,l,d,u,f,g);return x&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=rt(t);Qe(LA,"RemoteStore shutting down."),s.Ea.add(5),await gd(s),s.Aa.shutdown(),s.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}fx.provider={build:()=>new fx};class $I{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ma("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Gi="FirestoreClient";class XI{constructor(e,t,s,A,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this._databaseInfo=A,this.user=os.UNAUTHENTICATED,this.clientId=d0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async d=>{Qe(Gi,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(Qe(Gi,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ri;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=F0(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function ip(r,e){r.asyncQueue.verifyOperationInProgress(),Qe(Gi,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async A=>{s.isEqual(A)||(await u2(e.localStore,A),s=A)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function VB(r,e){r.asyncQueue.verifyOperationInProgress();const t=await JI(r);Qe(Gi,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>RB(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,A)=>RB(e.remoteStore,A))),r._onlineComponents=e}async function JI(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Qe(Gi,"Using user provided OfflineComponentProvider");try{await ip(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(A){return A.name==="FirebaseError"?A.code===we.FAILED_PRECONDITION||A.code===we.UNIMPLEMENTED:!(typeof DOMException<"u"&&A instanceof DOMException)||A.code===22||A.code===20||A.code===11})(t))throw t;MA("Error using user provided cache. Falling back to memory cache: "+t),await ip(r,new sf)}}else Qe(Gi,"Using default OfflineComponentProvider"),await ip(r,new YI(void 0));return r._offlineComponents}async function T2(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Qe(Gi,"Using user provided OnlineComponentProvider"),await VB(r,r._uninitializedComponentsProvider._online)):(Qe(Gi,"Using default OnlineComponentProvider"),await VB(r,new fx))),r._onlineComponents}function WI(r){return T2(r).then((e=>e.syncEngine))}async function ZI(r){const e=await T2(r),t=e.eventManager;return t.onListen=DI.bind(null,e.syncEngine),t.onUnlisten=MI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=kI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=LI.bind(null,e.syncEngine),t}function eD(r,e,t={}){const s=new Ri;return r.asyncQueue.enqueueAndForget((async()=>(function(l,d,u,f,g){const x=new $I({next:v=>{x.Nu(),d.enqueueAndForget((()=>SI(l,y)));const N=v.docs.has(u);!N&&v.fromCache?g.reject(new He(we.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&v.fromCache&&f&&f.source==="server"?g.reject(new He(we.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(v)},error:v=>g.reject(v)}),y=new TI(x0(u.path),x,{includeMetadataChanges:!0,Ka:!0});return NI(l,y)})(await ZI(r),r.asyncQueue,e,t,s))),s.promise}function tD(r,e){const t=new Ri;return r.asyncQueue.enqueueAndForget((async()=>HI(await WI(r),e,t))),t.promise}function U2(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const rD="ComponentProvider",zB=new Map;function sD(r,e,t,s,A){return new yQ(r,e,t,A.host,A.ssl,A.experimentalForceLongPolling,A.experimentalAutoDetectLongPolling,U2(A.experimentalLongPollingOptions),A.useFetchStreams,A.isUsingEmulator,s)}const Q2="firestore.googleapis.com",KB=!0;class GB{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new He(we.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Q2,this.ssl=KB}else this.host=e.host,this.ssl=e.ssl??KB;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=c2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<SF)throw new He(we.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}oQ("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=U2(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new He(we.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new He(we.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new He(we.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,A){return s.timeoutSeconds===A.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class R0{constructor(e,t,s,A){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=A,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new GB({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new He(we.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new He(we.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new GB(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new J4;switch(s.type){case"firstParty":return new tQ(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new He(we.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=zB.get(t);s&&(Qe(rD,"Removing Datastore"),zB.delete(t),s.terminate())})(this),Promise.resolve()}}function nD(r,e,t,s={}){r=nl(r,R0);const A=cl(e),l=r._getSettings(),d={...l,emulatorOptions:r._getEmulatorOptions()},u=`${e}:${t}`;A&&(Q1(`https://${u}`),F1("Firestore",!0)),l.host!==Q2&&l.host!==u&&MA("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...l,host:u,ssl:A,emulatorOptions:s};if(!IA(f,d)&&(r._setSettings(f),s.mockUserToken)){let g,x;if(typeof s.mockUserToken=="string")g=s.mockUserToken,x=os.MOCK_USER;else{g=v_(s.mockUserToken,r._app?.options.projectId);const y=s.mockUserToken.sub||s.mockUserToken.user_id;if(!y)throw new He(we.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new os(y)}r._authCredentials=new W4(new BE(g,x))}}class M0{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new M0(this.firestore,e,this._query)}}class Vr{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new td(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vr(this.firestore,e,this._key)}toJSON(){return{type:Vr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(hd(t,Vr._jsonSchema))return new Vr(e,s||null,new ze(sr.fromString(t.referencePath)))}}Vr._jsonSchemaVersion="firestore/documentReference/1.0",Vr._jsonSchema={type:Sr("string",Vr._jsonSchemaVersion),referencePath:Sr("string")};class td extends M0{constructor(e,t,s){super(e,t,x0(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vr(this.firestore,null,new ze(e))}withConverter(e){return new td(this.firestore,e,this._path)}}function Uo(r,e,...t){if(r=hn(r),arguments.length===1&&(e=d0.newId()),AQ("doc","path",e),r instanceof R0){const s=sr.fromString(e,...t);return iB(s),new Vr(r,null,new ze(s))}{if(!(r instanceof Vr||r instanceof td))throw new He(we.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(sr.fromString(e,...t));return iB(s),new Vr(r.firestore,r instanceof td?r.converter:null,new ze(s))}}const qB="AsyncQueue";class YB{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new f2(this,"async_queue_retry"),this._c=()=>{const s=ap();s&&Qe(qB,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=ap();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=ap();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ri;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!ml(e))throw e;Qe(qB,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Ma("INTERNAL UNHANDLED ERROR: ",$B(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const A=Q0.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(A),A}uc(){this.nc&&Ye(47125,{Pc:$B(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function $B(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Rf extends R0{constructor(e,t,s,A){super(e,t,s,A),this.type="firestore",this._queue=new YB,this._persistenceKey=A?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new YB(e),this._firestoreClient=void 0,await e}}}function F2(r,e){const t=typeof r=="object"?r:k1(),s=typeof r=="string"?r:Yh,A=Wx(t,"firestore").getImmediate({identifier:s});if(!A._initialized){const l=y_("firestore");l&&nD(A,...l)}return A}function I2(r){if(r._terminated)throw new He(we.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||aD(r),r._firestoreClient}function aD(r){const e=r._freezeSettings(),t=sD(r._databaseId,r._app?.options.appId||"",r._persistenceKey,r._app?.options.apiKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new XI(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(A){const l=A?._online.build();return{_offline:A?._offline.build(l),_online:l}})(r._componentsProvider))}class cn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new cn(ts.fromBase64String(e))}catch(t){throw new He(we.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new cn(ts.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:cn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(hd(e,cn._jsonSchema))return cn.fromBase64String(e.bytes)}}cn._jsonSchemaVersion="firestore/bytes/1.0",cn._jsonSchema={type:Sr("string",cn._jsonSchemaVersion),bytes:Sr("string")};class D2{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new He(we.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class k2{constructor(e){this._methodName=e}}class ta{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new He(we.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new He(we.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return pt(this._lat,e._lat)||pt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ta._jsonSchemaVersion}}static fromJSON(e){if(hd(e,ta._jsonSchema))return new ta(e.latitude,e.longitude)}}ta._jsonSchemaVersion="firestore/geoPoint/1.0",ta._jsonSchema={type:Sr("string",ta._jsonSchemaVersion),latitude:Sr("number"),longitude:Sr("number")};class _n{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,A){if(s.length!==A.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==A[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:_n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(hd(e,_n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new _n(e.vectorValues);throw new He(we.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_n._jsonSchemaVersion="firestore/vectorValue/1.0",_n._jsonSchema={type:Sr("string",_n._jsonSchemaVersion),vectorValues:Sr("object")};const iD=/^__.*__$/;class AD{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new VA(e,this.data,this.fieldMask,t,this.fieldTransforms):new fd(e,this.data,t,this.fieldTransforms)}}function R2(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ye(40011,{dataSource:r})}}class L0{constructor(e,t,s,A,l,d){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=A,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new L0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePathSegment(e),s}childContextForFieldPath(e){const t=this.path?.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePath(),s}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return nf(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(R2(this.dataSource)&&iD.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class oD{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||If(e)}createContext(e,t,s,A=!1){return new L0({dataSource:e,methodName:t,targetDoc:s,path:Zr.emptyPath(),arrayElement:!1,hasConverter:A},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lD(r){const e=r._freezeSettings(),t=If(r._databaseId);return new oD(r._databaseId,!!e.ignoreUndefinedProperties,t)}function cD(r,e,t,s,A,l={}){const d=r.createContext(l.merge||l.mergeFields?2:0,e,t,A);O2("Data must be an object, but it was:",d,s);const u=L2(s,d);let f,g;if(l.merge)f=new Sn(d.fieldMask),g=d.fieldTransforms;else if(l.mergeFields){const x=[];for(const y of l.mergeFields){const v=H0(e,y,t);if(!d.contains(v))throw new He(we.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);hD(x,v)||x.push(v)}f=new Sn(x),g=d.fieldTransforms.filter((y=>f.covers(y.field)))}else f=null,g=d.fieldTransforms;return new AD(new ln(u),f,g)}function M2(r,e){if(H2(r=hn(r)))return O2("Unsupported field value:",e,r),L2(r,e);if(r instanceof k2)return(function(s,A){if(!R2(A.dataSource))throw A.createError(`${s._methodName}() can only be used with update() and set()`);if(!A.path)throw A.createError(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(A);l&&A.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(s,A){const l=[];let d=0;for(const u of s){let f=M2(u,A.childContextForArray(d));f==null&&(f={nullValue:"NULL_VALUE"}),l.push(f),d++}return{arrayValue:{values:l}}})(r,e)}return(function(s,A){if((s=hn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return KQ(A.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=Yt.fromDate(s);return{timestampValue:ef(A.serializer,l)}}if(s instanceof Yt){const l=new Yt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ef(A.serializer,l)}}if(s instanceof ta)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof cn)return{bytesValue:r2(A.serializer,s._byteString)};if(s instanceof Vr){const l=A.databaseId,d=s.firestore._databaseId;if(!d.isEqual(l))throw A.createError(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:B0(s.firestore._databaseId||A.databaseId,s._key.path)}}if(s instanceof _n)return(function(d,u){const f=d instanceof _n?d.toArray():d;return{mapValue:{fields:{[QE]:{stringValue:FE},[$h]:{arrayValue:{values:f.map((x=>{if(typeof x!="number")throw u.createError("VectorValues must only contain numeric values.");return y0(u.serializer,x)}))}}}}}})(s,A);if(l2(s))return s._toProto(A.serializer);throw A.createError(`Unsupported field value: ${u0(s)}`)})(r,e)}function L2(r,e){const t={};return NE(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):OA(r,((s,A)=>{const l=M2(A,e.childContextForField(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function H2(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Yt||r instanceof ta||r instanceof cn||r instanceof Vr||r instanceof k2||r instanceof _n||l2(r))}function O2(r,e,t){if(!H2(t)||!CE(t)){const s=u0(t);throw s==="an object"?e.createError(r+" a custom object"):e.createError(r+" "+s)}}function H0(r,e,t){if((e=hn(e))instanceof D2)return e._internalPath;if(typeof e=="string")return uD(r,e);throw nf("Field path arguments must be of type string or ",r,!1,void 0,t)}const dD=new RegExp("[~\\*/\\[\\]]");function uD(r,e,t){if(e.search(dD)>=0)throw nf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new D2(...e.split("."))._internalPath}catch{throw nf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function nf(r,e,t,s,A){const l=s&&!s.isEmpty(),d=A!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let f="";return(l||d)&&(f+=" (found",l&&(f+=` in field ${s}`),d&&(f+=` in document ${A}`),f+=")"),new He(we.INVALID_ARGUMENT,u+r+f)}function hD(r,e){return r.some((t=>t.isEqual(e)))}class fD{convertValue(e,t="none"){switch(zi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Vi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ye(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return OA(e,((A,l)=>{s[A]=this.convertValue(l,t)})),s}convertVectorValue(e){const t=e.fields?.[$h].arrayValue?.values?.map((s=>pr(s.doubleValue)));return new _n(t)}convertGeoPoint(e){return new ta(pr(e.latitude),pr(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Sf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Xc(e));default:return null}}convertTimestamp(e){const t=Pi(e);return new Yt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=sr.fromString(e);Tt(o2(s),9688,{name:e});const A=new Jc(s.get(1),s.get(3)),l=new ze(s.popFirst(5));return A.isEqual(t)||Ma(`Document ${l} contains a document reference within a different database (${A.projectId}/${A.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}class mD extends fD{constructor(e){super(),this.firestore=e}convertBytes(e){return new cn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vr(this.firestore,null,t)}}const XB="@firebase/firestore",JB="4.11.0";class P2{constructor(e,t,s,A,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=A,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Vr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new gD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(H0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class gD extends P2{data(){return super.data()}}function pD(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class Bc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _A extends P2{constructor(e,t,s,A,l,d){super(e,t,s,A,d),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ih(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(H0("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new He(we.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=_A._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}_A._jsonSchemaVersion="firestore/documentSnapshot/1.0",_A._jsonSchema={type:Sr("string",_A._jsonSchemaVersion),bundleSource:Sr("string","DocumentSnapshot"),bundleName:Sr("string"),bundle:Sr("string")};class Ih extends _A{data(e={}){return super.data(e)}}class Lc{constructor(e,t,s,A){this._firestore=e,this._userDataWriter=t,this._snapshot=A,this.metadata=new Bc(A.hasPendingWrites,A.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Ih(this._firestore,this._userDataWriter,s.key,s,new Bc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new He(we.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(A,l){if(A._snapshot.oldDocs.isEmpty()){let d=0;return A._snapshot.docChanges.map((u=>{const f=new Ih(A._firestore,A._userDataWriter,u.doc.key,u.doc,new Bc(A._snapshot.mutatedKeys.has(u.doc.key),A._snapshot.fromCache),A.query.converter);return u.doc,{type:"added",doc:f,oldIndex:-1,newIndex:d++}}))}{let d=A._snapshot.oldDocs;return A._snapshot.docChanges.filter((u=>l||u.type!==3)).map((u=>{const f=new Ih(A._firestore,A._userDataWriter,u.doc.key,u.doc,new Bc(A._snapshot.mutatedKeys.has(u.doc.key),A._snapshot.fromCache),A.query.converter);let g=-1,x=-1;return u.type!==0&&(g=d.indexOf(u.doc.key),d=d.delete(u.doc.key)),u.type!==1&&(d=d.add(u.doc),x=d.indexOf(u.doc.key)),{type:xD(u.type),doc:f,oldIndex:g,newIndex:x}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new He(we.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Lc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=d0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],A=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),A.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function xD(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ye(61501,{type:r})}}Lc._jsonSchemaVersion="firestore/querySnapshot/1.0",Lc._jsonSchema={type:Sr("string",Lc._jsonSchemaVersion),bundleSource:Sr("string","QuerySnapshot"),bundleName:Sr("string"),bundle:Sr("string")};function WB(r){r=nl(r,Vr);const e=nl(r.firestore,Rf),t=I2(e);return eD(t,r._key).then((s=>bD(e,r,s)))}function yA(r,e,t){r=nl(r,Vr);const s=nl(r.firestore,Rf),A=pD(r.converter,e,t),l=lD(s);return V2(s,[cD(l,"setDoc",r._key,A,r.converter!==null,t).toMutation(r._key,Zn.none())])}function yD(r){return V2(nl(r.firestore,Rf),[new b0(r._key,Zn.none())])}function V2(r,e){const t=I2(r);return tD(t,e)}function bD(r,e,t){const s=t.docs.get(e._key),A=new mD(r);return new _A(r,A,e._key,s,new Bc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){X4(dl),tl(new DA("firestore",((s,{instanceIdentifier:A,options:l})=>{const d=s.getProvider("app").getImmediate(),u=new Rf(new Z4(s.getProvider("auth-internal")),new rQ(d,s.getProvider("app-check-internal")),bQ(d,A),d);return l={useFetchStreams:t,...l},u._setSettings(l),u}),"PUBLIC").setMultipleInstances(!0)),Di(XB,JB,e),Di(XB,JB,"esm2020")})();const vD={apiKey:"AIzaSyAFS5YsnbWmPKh1lmBGLsLCGtmkrnC4doM",authDomain:"cleargrad-database.firebaseapp.com",projectId:"cleargrad-database",storageBucket:"cleargrad-database.firebasestorage.app",messagingSenderId:"352836249313",appId:"1:352836249313:web:9a21623277828595f379a0",measurementId:"G-2VQBXX1ZN9"},z2=Zx(vD);mE(z2);F2(z2);new Xn;const wD=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),BD=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),ZB=r=>{const e=BD(r);return e.charAt(0).toUpperCase()+e.slice(1)},K2=(...r)=>r.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),CD=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var ED={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ND=k.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:A="",children:l,iconNode:d,...u},f)=>k.createElement("svg",{ref:f,...ED,width:e,height:e,stroke:r,strokeWidth:s?Number(t)*24/Number(e):t,className:K2("lucide",A),...!l&&!CD(u)&&{"aria-hidden":"true"},...u},[...d.map(([g,x])=>k.createElement(g,x)),...Array.isArray(l)?l:[l]]));const _e=(r,e)=>{const t=k.forwardRef(({className:s,...A},l)=>k.createElement(ND,{ref:l,iconNode:e,className:K2(`lucide-${wD(ZB(r))}`,`lucide-${r}`,s),...A}));return t.displayName=ZB(r),t};const SD=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],G2=_e("arrow-left",SD);const jD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],eC=_e("arrow-right",jD);const _D=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],tC=_e("bell",_D);const TD=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],tr=_e("book-open",TD);const UD=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],rC=_e("bug",UD);const QD=[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]],FD=_e("calendar-range",QD);const ID=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],HA=_e("calendar",ID);const DD=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],vt=_e("check",DD);const kD=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],xd=_e("chevron-down",kD);const RD=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],MD=_e("chevron-left",RD);const LD=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],q2=_e("chevron-right",LD);const HD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],nr=_e("circle-alert",HD);const OD=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],sC=_e("circle-check-big",OD);const PD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Y2=_e("circle-check",PD);const VD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],zD=_e("circle-plus",VD);const KD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],$2=_e("circle-question-mark",KD);const GD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],qD=_e("circle-x",GD);const YD=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],mx=_e("clock",YD);const $D=[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]],XD=_e("cloud-download",$D);const JD=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],WD=_e("cloud-upload",JD);const ZD=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],e5=_e("code-xml",ZD);const t5=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],r5=_e("copy",t5);const s5=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],n5=_e("crown",s5);const a5=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Cc=_e("database",a5);const i5=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Mf=_e("download",i5);const A5=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Dr=_e("external-link",A5);const o5=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],l5=_e("file-braces",o5);const c5=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ds=_e("file-text",c5);const d5=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Ap=_e("funnel",d5);const u5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],O0=_e("globe",u5);const h5=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],f5=_e("graduation-cap",h5);const m5=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],g5=_e("history",m5);const p5=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],x5=_e("image",p5);const y5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],b5=_e("info",y5);const v5=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],w5=_e("instagram",v5);const B5=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],C5=_e("key",B5);const E5=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],N5=_e("link",E5);const S5=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],X2=_e("loader-circle",S5);const j5=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],_5=_e("lock-open",j5);const T5=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Us=_e("lock",T5);const U5=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Q5=_e("log-out",U5);const F5=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],nC=_e("mail",F5);const I5=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],D5=_e("megaphone",I5);const k5=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],gx=_e("moon",k5);const R5=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],aC=_e("palette",R5);const M5=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],J2=_e("panels-top-left",M5);const L5=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],jr=_e("paperclip",L5);const H5=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],P0=_e("pencil",H5);const O5=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],zr=_e("plus",O5);const P5=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],V5=_e("refresh-cw",P5);const z5=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],iC=_e("rotate-ccw",z5);const K5=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],AC=_e("save",K5);const G5=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],q5=_e("scroll-text",G5);const Y5=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],rd=_e("search",Y5);const $5=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],X5=_e("server",$5);const J5=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],W5=_e("settings",J5);const Z5=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],px=_e("sparkles",Z5);const ek=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],xx=_e("sun",ek);const tk=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],W2=_e("tag",tk);const rk=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Tn=_e("trash-2",rk);const sk=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],sd=_e("trash",sk);const nk=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],bs=_e("triangle-alert",nk);const ak=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],ik=_e("upload",ak);const Ak=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ok=_e("user-cog",Ak);const lk=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Z2=_e("user",lk);const ck=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],dk=_e("users",ck);const uk=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],oC=_e("wifi-off",uk);const hk=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],fk=_e("wifi",hk);const mk=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],yx=_e("wrench",mk);const gk=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ut=_e("x",gk),lC={"A+":4.3,A:4,"A-":3.7,"B+":3.3,B:3,"B-":2.7,"C+":2.3,C:2,"C-":1.7,D:1,E:.8,F:0,FAIL:0,X:0},eN=r=>{let e=0,t=0;for(const s of r){if(s.isWithdrawn||s.isExemption||!s.grade||s.grade==="-")continue;const A=s.grade.toUpperCase();if(A in lC){const l=lC[A],d=s.credits||0;d>0&&(e+=l*d,t+=d)}}return t===0?null:{gpa:e/t,credits:t}},pk=r=>r.length===0?null:r.reduce((t,s)=>t+s,0)/r.length,tN=r=>{const e=r.toString(),t=e.indexOf(".");return t===-1||e.length-t-1<=2?r.toFixed(2):(Math.round(r*100)/100).toFixed(2)};function rN(r){var e,t,s="";if(typeof r=="string"||typeof r=="number")s+=r;else if(typeof r=="object")if(Array.isArray(r)){var A=r.length;for(e=0;e<A;e++)r[e]&&(t=rN(r[e]))&&(s&&(s+=" "),s+=t)}else for(t in r)r[t]&&(s&&(s+=" "),s+=t);return s}function Hc(){for(var r,e,t=0,s="",A=arguments.length;t<A;t++)(r=arguments[t])&&(e=rN(r))&&(s&&(s+=" "),s+=e);return s}const $u={total:32,crossCollege:8,boya:{total:13,dimensionsRequired:4}},Ec=["Year 1 Sem 1","Year 1 Sem 2","Year 2 Sem 1","Year 2 Sem 2","Year 3 Sem 1","Year 3 Sem 2","Year 4 Sem 1","Year 4 Sem 2"],xk=["Major Required","Major Elective","General Education","Other"],yk=["Chinese","English","Cross-College","Boya","Sports","Service","Primer"],bx=["Dimension 1","Dimension 2","Dimension 3","Dimension 4","Dimension 5","Dimension 6"],cC=[];for(let r=7;r<=22;r++)cC.push(`${r.toString().padStart(2,"0")}:00`),cC.push(`${r.toString().padStart(2,"0")}:30`);const Ks="course-card-bg",af={"Major Required":`${Ks} border-l-[4px] !border-l-[#F26060]`,"Major Elective":`${Ks} border-l-[4px] !border-l-[#79A4E8]`,"General Education":`${Ks} border-l-[4px] !border-l-[#997FDC]`,Other:`${Ks} border-l-[4px] !border-l-[#C0D762]`,"University Way":`${Ks} border-l-[4px] !border-l-[#06D6A0]`},vx={Chinese:`${Ks} border-l-[4px] !border-l-[#EC9385]`,English:`${Ks} border-l-[4px] !border-l-[#EC9385]`,"Cross-College":`${Ks} border-l-[4px] !border-l-[#FCA269]`,Boya:`${Ks} border-l-[4px] !border-l-[#997FDC]`,Sports:`${Ks} border-l-[4px] !border-l-[#79BEB5]`,Service:`${Ks} border-l-[4px] !border-l-[#A48B78]`,Primer:`${Ks} border-l-[4px] !border-l-[#7DC174]`,"Military Training":`${Ks} border-l-[4px] !border-l-[#64748B]`},bk=(r,e,t)=>k.useMemo(()=>{let A=0,l=0,d=0,u=0,f=0,g=0,x=0,y=0,v=0,N=0;const R=new Set;let S=0;return r.forEach(V=>{if(V.isWithdrawn)return;const $=V.credits,G=["D","E","F","Fail","FAIL"].includes(V.grade||"");if(V.category==="University Way"||V.category==="General Education"&&V.genEduSubCategory==="Primer"){G||(S+=1);return}if(V.genEduSubCategory!=="Sports"&&V.genEduSubCategory!=="Military Training"&&!G&&(A+=$),!G){switch(V.category){case"Major Required":l+=$;break;case"Major Elective":d+=$;break;case"General Education":if(u+=$,V.genEduSubCategory)switch(V.genEduSubCategory){case"Chinese":case"English":f+=$;break;case"Cross-College":g+=$;break;case"Boya":v+=$,V.isEMI&&(N+=$),V.boyaDimension&&R.add(V.boyaDimension);break;case"Service":x+=$;break;case"Sports":y+=$;break}break}V.isEapEsp&&V.genEduSubCategory!=="Cross-College"&&(g+=$)}}),{total:{earned:A,required:t},majorRequired:{earned:l},majorElective:{earned:d},genEdu:{total:{earned:u,required:$u.total},language:{earned:f,required:6},crossCollege:{earned:g,required:$u.crossCollege},boya:{earned:v,required:$u.boya.total,emiEarned:N,emiRequired:e?6:0},service:{earned:x},sports:{earned:y,required:4}},boyaStatus:{dimensionsCount:R.size,dimensionsRequired:$u.boya.dimensionsRequired,uniqueDimensions:Array.from(R)},universityWay:{count:S,required:6}}},[r,e,t]),vk=(r,e)=>{if(e==="zh"){const t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:""},s=r.split(" ");if(s[0]==="Year"){const A=t[s[1]]||s[1];if(r.includes("Summer"))return`${A} `;if(r.includes("Sem 1"))return`${A} `;if(r.includes("Sem 2"))return`${A} `}return r}return r.replace("Year ","Y").replace("Sem ","S").replace("Summer","Sum")},wk=(r,e)=>{const t=r.match(/Year (\d+) Sem (\d+)/);if(t){const s=t[1],A=t[2];if(e==="zh"){const l=["","","","","","","","","","",""],d=parseInt(s);return`${l[d]?`${l[d]}`:`${s}`} ${A==="1"?"":""}`}else return`Year ${s} ${A==="1"?"Fall":"Spring"} Semester`}return r},cr=({label:r,current:e,total:t,color:s,subLabel:A,variant:l="m",labelClassName:d})=>{const u=t?Math.min(e/t*100,100):100;return a.jsxs("div",{className:"w-full mb-3",children:[a.jsxs("div",{className:"flex justify-between items-end mb-1",children:[a.jsx("span",{className:Hc("font-medium",d||"text-foreground",l==="l"?"text-lg":"text-sm"),children:r}),a.jsxs("span",{className:"text-sm text-muted",children:[a.jsx("span",{className:Hc("font-bold text-foreground",l==="l"?"text-xl":"text-base"),children:e}),t&&a.jsxs("span",{className:"text-xs",children:[" / ",t]}),A&&a.jsx("span",{className:"ml-2 text-[10px] leading-none text-muted",children:A})]})]}),a.jsx("div",{className:"w-full rounded-full h-2.5 overflow-hidden",style:{backgroundColor:"var(--color-progress-track)"},children:a.jsx("div",{className:Hc("h-2.5 rounded-full transition-all duration-500",s),style:{width:`${u}%`}})})]})},Oc="nsysu-micro-credits-data",Zo={minTotalCredits:"6",courses:[],manualSemesters:[],deletedSemesters:[],notes:""},wx=(r=113)=>Array.from({length:3},(e,t)=>r+t).flatMap(e=>[`${e}-Summer()`,`${e}-Winter()`]),Bk=r=>{const e=t=>t.includes("-2")||t.includes("Spring")||t.includes("")?4:t.includes("Winter")||t.includes("")?3:t.includes("-1")||t.includes("Fall")||t.includes("")?2:t.includes("Summer")||t.includes("")?1:0;return r.sort((t,s)=>{const A=parseInt(t.split("-")[0])||0,l=parseInt(s.split("-")[0])||0;return A!==l?A-l:e(t)-e(s)})},V0=(r,e=113)=>{const t=wx(e),A=Array.from(new Set([...t,...r.manualSemesters||[],...r.courses.map(v=>v.semester).filter(Boolean)])).filter(v=>!(r.deletedSemesters||[]).includes(v)),l=Bk(A),d=r.courses.reduce((v,N)=>{const R=N.semester||"Unknown";return v[R]||(v[R]=[]),v[R].push(N),v},{}),u={};let f=0;l.forEach(v=>{u[v]=0}),Object.entries(d).forEach(([v,N])=>{const R=N.filter(S=>S.completed).reduce((S,P)=>S+(parseFloat(P.credits)||0),0);u[v]=R}),l.forEach(v=>{const N=u[v];N>1&&(f+=N-1)});const g={};let x=0;return l.filter(v=>{const N=u[v];return N>0&&N<1}).forEach(v=>{if(f<=0)return;const N=u[v],R=1-N,S=Math.min(R,f);g[v]=N+S,f-=S}),l.forEach(v=>{g[v]===void 0&&(g[v]=Math.min(1,u[v])),x+=g[v]}),x=Math.floor(Math.min(6,x)),{rawStats:u,effectiveStats:g,grandTotalEffective:x,sortedSemesters:l,activeSemesters:A}},Ck={en:{app:{title:"Course Tracker",settings:"Settings",addCourse:"Add Course",export:"Export JSON",import:"Import JSON",clear:"Clear All Data",coursePlan:"Course Plan",addPlan:"Add Plan",totalCourses:"courses total",deleteConfirm:"Are you sure you want to delete this course?",clearConfirm:"Are you sure you want to clear ALL data? This cannot be undone?",tracker:"Tracker",planner:"Planner",backToTracker:"Back to Tracker",fixData:"Fix Data"},common:{actions:"Actions",confirm:"Confirm",cancel:"Cancel",noMatchTitle:"No Match Found",noMatchDesc:"We couldn't find an exact match for this course in your tracker.",manualAdd:"Manual Add",perfectMatchFound:"Perfect Match Found!",matchConfirmText:"This action will sync the course data.",trackerTitle:"Select from Tracker",courseName:"Course Name",credit:"Credit",matchCourse:"Sync Course",addFromTracker:"Add from Tracker",completedCourses:"Completed Courses",plannedCourses:"Planned Courses"},settings:{title:"Settings",language:"Language / ",emiStudent:"I am an EMI Student",emiDesc:"If checked, you'll need 6 credits of Liberal Arts (General Edu) courses to be taught in English.",gradCredits:"Total Graduation Credits",liquidTheme:"Liquid Glass UI",darkMode:"Dark Mode",lightMode:"Light Mode",save:"Save & Close",profile:"Student Profile",major:"Major / Department",selectMajor:"Select Department...",entranceYear:"Entrance Year (e.g. 113)",class:"Class",emiHintActive:"EMI Liberal Arts tracking enabled",profileWarning:"Please ensure your profile is correct to get accurate search results."},dashboard:{title:"Graduation Progress",totalCredits:"Total Credits",progress:"Graduation Progress",genEdu:"General Education",majorReq:"Major Courses",majorRequired:"Major Required",majorElective:"Major Elective",langTotal:"Language Total",langDesc:"Includes Mandatory Chinese & English",crossCollege:"Inter-college Elective",universityWay:"Primer on College Life",events:"events",boya:"Liberal Arts",boyaTotal:"Liberal Arts Total",emiBoya:"EMI Liberal Arts",service:"Practical Experience / Service Learning",dimensions:"Dimensions Covered",uniqueDimensions:"Unique Dimensions",uniqueDim:"Unique Dim:",attendance:"Attendance",sportsCreditsNoCount:"Does not count towards graduation",totalGPA:"Total GPA",avgSemesters:"Avg. of Semesters",addInterdisciplinary:"Add Micro-credit, International or Interdisciplinary Learning",interdisciplinaryView:{title:"Micro-credit, International or Interdisciplinary Learning",placeholder:"Select an item from the left to view details.",sidebar:{microCredits:"Micro-credits",addMicroCredit:"Add Micro-credits",internationalOrCross:"International / Interdisciplinary (Choose 1 of 9)",international:"International Learning",crossDomain:"Interdisciplinary Learning"},requirements:{1:"Exchange or Study Abroad",2:"Approved Foreign Course",3:"Approved Foreign Study Plan",4:"Minor (Intra / Cross-school)",5:"Double Major (Intra / Cross-school)",6:"Teacher Education (Intra / Cross-school)",7:"Micro-program",8:"Integrated Program",9:"Inter-departmental Professional Program"},details:{requirementsHeader:"Requirements:",confirmationHeader:"Confirmation",1:{requirement:"Study abroad for at least 1 semester",confirmation:"I have studied abroad for at least 1 semester"},2:{requirement:`Definition: Student completes a course-based international study approved by their department and earn at least 2 credits.

Requirements (ALL must be met):
1. Location: Course must be offered by a foreign university or an academic foreign education/research institution.
2. Course Nature: Must be a 'Formal Course', with clear course name, content/syllabus, and offering unit.
3. Credit Threshold: Course credits  2 credits (if not NSYSU credit system, must be converted/recognized by department).
4. Department Review: Course must be 'approved by the department'. Retroactive or unapproved courses are not recognized.
5. Proof of Completion: Must provide at least one: Transcript or Certificate of Completion.`,confirmation:"I have completed a course-based international study that meets all valid requirements."},3:{requirement:`Definition: Student completes a program-based international study approved by their department and meets the minimum study hours.

Requirements (ALL must be met):
1. Location: Hosted by a foreign university, research institution, international organization, or their partners.
2. Program Nature: Belongs to 'Study Program / Training / Camp / Workshop / Project'. Does not require being a formal credit course.
3. Study Hours Threshold: Accumulated study hours  36 hours. Can be continuous or non-continuous (as recognized by department).
4. Department Review: Program must be 'approved by the department' and recognized as having 'learning/academic nature'.
5. Proof of Completion: Must provide at least one: Participation Certificate, Completion Certificate, or Hours Certificate issued by the organizer.`,confirmation:"I have completed a program-based international study that meets all valid requirements."}}}},form:{addTitle:"Add New Course",editTitle:"Edit Course",importCatalog:"Import from Catalog",courseName:"Course Name",credits:"Credits",grade:"Grade",semester:"Semester",category:"Category",subCategory:"Sub-Category",dimension:"Dimension",attributes:"Attributes",isEMI:"EMI Course (English Taught)",isEapEsp:"EAP/ESP Course",isWithdrawn:"Withdraw",isExemption:"Exemption",dayTime:"Day & Time (Optional)",selectDay:"Select Day",selectStart:"Start Time",selectEnd:"End Time",cancel:"Cancel",save:"Save Course",verified:"Verified"},schedule:{schedule:"Schedule",scheduledCourses:"Courses Scheduled",headers:{name:"Course Name",credits:"Credits",grade:"Grade",category:"Category"},days:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],courseName:"Course Name",credits:"Credits",grade:"Grade",category:"Category",noCourses:"No courses scheduled for this semester with time information.",exportSchedule:"Export Schedule",exportICS:"Export Calendar (.ics)"},courseSchedule:{button:"Course Selection Schedule",title:"114-2 Course Selection Schedule",inquiry:"Course Inquiry",prelim1:"Preliminary Round 1",prelim2:"Preliminary Round 2",addDrop1:"Add/Drop Round 1",addDrop2:"Add/Drop Round 2",inquiryDate:"Starting from: Jan 6 (Tue) 13:00",prelim1Date:"Jan 30 (Fri) 9:00  Feb 2 (Mon) 17:00",prelim2Date:"Feb 4 (Wed) 9:00  Feb 5 (Thu) 17:00",addDrop1Date:"Feb 9 (Mon) 9:00  Feb 10 (Tue) 17:00",addDrop2Date:"Feb 24 (Tue) 9:00  Feb 25 (Wed) 17:00",updateTime:"Update Time: 2026.01.06",reference:"Reference",warning:"Data is for reference only. Please refer to the official NSYSU announcement for actual dates."},categories:{"General Education":"General Education",Mandatory:"Mandatory",Elective:"Elective",Language:"Language","General Education (Core)":"Gen Edu (Core)","University Way":"Primer on College Life","Service Learning":"Practical Experience / Service Learning","Physical Education":"Physical Education","Major Required":"Major Required","Major Elective":"Major Elective",Other:"Other","Cross-College":"Inter-college Elective",Boya:"Liberal Arts",Chinese:"Chinese",English:"English",Sports:"Sport & Health",Service:"Practical Experience / Service Learning",Primer:"Primer on College Life","Dimension 1":"Dimension 1","Dimension 2":"Dimension 2","Dimension 3":"Dimension 3","Dimension 4":"Dimension 4","Dimension 5":"Dimension 5","Dimension 6":"Dimension 6","EAP/ESP":"EAP/ESP","Military Training":"Military Training"},semesters:{"Year 1 Sem 1":"Year 1 Fall Semester","Year 1 Sem 2":"Year 1 Spring Semester","Year 2 Sem 1":"Year 2 Fall Semester","Year 2 Sem 2":"Year 2 Spring Semester","Year 3 Sem 1":"Year 3 Fall Semester","Year 3 Sem 2":"Year 3 Spring Semester","Year 4 Sem 1":"Year 4 Fall Semester","Year 4 Sem 2":"Year 4 Spring Semester"},importModal:{title:"Overwriting Data",warning:"Importing this file will permanently replace all your existing data. This action cannot be undone.",backupRec:"We strongly recommend backing up your current data before proceeding.",backupBtn:"Backup Current Data & Import",cancel:"Cancel",overwrite:"Overwrite",trackCountPrefix:"You currently have ",trackCountSuffix:" courses tracked."},clearModal:{title:"Clear All Data",warning:"This will permanently delete all your courses and settings. This action cannot be undone.",backupRec:"We recommend backing up your data before clearing.",backupBtn:"Backup & Clear",cancel:"Cancel",clear:"Clear All Data"},courseList:{schedule:"Schedule & Grade",noCourses:"No courses",remove:"Remove",cr:"cr"},tutorial:{start:"Start Tutorial",welcome:{title:"Welcome to ClearGrad.",desc:"Take a quick interactive tour to master your graduation planning."},settings:{title:"Personalized Settings",desc:"Start here. Select your Major, Entrance Year, and EMI status to tailor your graduation requirements."},modeSwitcher:{title:"Workspace Switcher",desc:"Toggle seamlessly between your official 'Tracker' progress and your sandbox 'Planner' schedule."},plannerBoard:{title:"The Planner Board",desc:"Your safe space to draft perfect schedules. Drag, drop, and experimentthese courses won't affect your official records."},plannerSearch:{title:"Smart Course Search",desc:"Find and gather interesting courses from the official catalog to build your draft schedule."},addCourse:{title:"Manual Course Entry",desc:"Add a custom course manually if you can't find it in the official university catalog."},catalogFeature:{title:"Intelligent Import",desc:"Use 'Import from Catalog' to automatically sync course times, credits, and graduation dimensions in one click."},dataSafety:{title:"Total Data Control",desc:"Your data stays on your device. Export backups as JSON files to keep your progress safe or migrate to a new browser."},scheduleGrid:{title:"Visual Timetable",desc:"Review your weekly schedule at a glance to identify any time conflicts before the semester begins."},scheduleList:{title:"Course Roster & Grades",desc:"Scroll down to manage your enrolled courses and input your final semester grades."},dashboard:{title:"Progress Dashboard",desc:"Monitor your journey to graduation with a comprehensive breakdown of required, elective, and general education credits."},coursePlan:{title:"Academic Archive",desc:"Review your historical course records organized cleanly by completed semesters."},scheduleGrade:{title:"Semester Details",desc:"Access your detailed schedule grid and input final grades for any specific semester."},history:{title:"Release Journal",desc:"Stay updated with our latest feature releases and application improvements."},support:{title:"Help & Support",desc:"Have questions or found a bug? Check our FAQs or reach out directly for assistance."},next:"Next",prev:"Previous",skip:"Skip",done:"Done"},updates:{title:"Update Journal",desc:"Track the evolution of this project",close:"Close"},planner:{title:"Planner Board",draftBoard:"Draft Board",weekends:"Weekends",clear:"Clear",export:"Export to Tracker",importDraft:"Import Catalog",days:{any:"Any Day",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat",sun:"Sun"},depts:{all:"All Categories",cs:"CS ()",gen:"GeneralEdu"},incompleteDataWarning:"It seems like the University is adjusting course data (Total: {{count}}). Some courses might be missing.",search:{placeholder:"Search course code, name, teacher...",noResults:"Search to add courses",retry:"Retry",failed:"Failed to load courses"},courseId:"Course ID",addToDraft:"Add to Draft",alreadyAdded:"Already Added",showConflicts:"Show Conflicts",showEMIOnly:"EMI Only",delete:"Delete",edit:"Edit",courseIdCopied:"Course ID Copied!",exportPreview:{title:"Export Preview",desc:"Confirm changes before exporting to",draftSource:"Draft (Source)",destination:"Destination",current:"Current",empty:"Empty Schedule",warning:"Existing courses will remain. New courses will be added.",cancel:"Cancel",confirm:"Confirm Export"},labels:{title:"Manage Labels",library:"My Label Library",applied:"Applied to this Course",newPlaceholder:"New label name...",createFirst:"Create your first label above!",allApplied:"All labels applied!",noApplied:"No labels applied",noLabels:"No custom labels created yet.",deleteConfirm:'Delete "{{label}}" from library?',edit:"Edit",finish:"Finish",exists:"Label already exists"}},catalog:{title:"Course Catalog",subtitle:"Import from NSYSU Open Data",searchPlaceholder:"Search by Name, Teacher, or ID...",loading:"Loading courses...",noResults:"No courses found. Try searching for something else.",dataSource:"Data provided by NSYSU Open Data API",summer:"Summer",coursesFound:"courses found",includeElectives:"Electives",mode:{all:"All Courses",compulsory:"Show Major Req/Elec"},label:{major:"Major",grade:"Grade",class:"Class"},class:{none:"-",shared:"Shared ()",a:"Class A",b:"Class B",english:"English Class"},grades:{1:"Freshman",2:"Sophomore",3:"Junior",4:"Senior"}},announcement:{title:"Welcome to ClearGrad.",defaultMessage:` **ClearGrad v7.0 Major Update: Cloud Sync is Live!**

 **Seamless Cross-Device Sync**
Click 'Sign in with Google' above to automatically and securely back up your drafts. Switch between your phone and laptop without interruption!
 **Offline Planning**
Plan your courses even without an internet connection. Your progress won't be lost.
 **Ultimate Privacy**
Your schedule is protected by Google's enterprise-grade encryption. Any uploaded transcripts or screenshots will **only be stored locally on your device**. We only sync progress data, ensuring 100% privacy!`,disclaimer:"This website is for reference only; please refer to the school for actual graduation progress.",close:"I Understand",dontShowAgain:"Don't show again until next update",version:"Version",firstTime:"First time?",startTutorial:"Start Tutorial",haveQuestions:"Cloud Sync (NEW):"},syncState:{editing:"Editing...",saving:"Saving...",synced:"Synced",idle:"Idle",bound:"Connected"},support:{title:"Support",message:"If you need any support or have questions, please feel free to contact us via email.",contact:"Contact Support",email:"ouuewow@gmail.com",disclaimer:" Unofficial App. Not affiliated with NSYSU.",copyright:"Data for reference only. Please verify with school system.",faqTitle:"FAQs",faq:[{question:"How to add 'Primer on College Life'?",answer:"Select Category 'General Education' and Sub-Category 'Primer on College Life'."},{question:"How to handle course exemptions?",answer:"Check the 'Exemption' box in the Attributes section when adding/editing a course."},{question:"How to export schedule or calendar?",answer:"Click 'Schedule & Grades' on the dashboard. The export buttons are at the top right."},{question:"What are the arrows in the top right?",answer:"Down  = Export Backup (JSON). Up  = Import Backup (JSON)."},{question:"How to add custom labels?",answer:"In the Planner (right side), click the tag icon on any course card to add or create labels."},{question:"Can I search by label?",answer:"Yes! You can search for your custom labels in the Course Catalog search bar."},{question:"Do I need to download data every time?",answer:"No, data is saved automatically in your browser. However, we recommend regular backups."},{question:"What are the ways to add courses?",answer:"Two ways: 1. 'Import from Planner' (recommended). 2. Manually click 'Add Course' on the dashboard."}]},dataFix:{button:"Fix Locations",title:"Missing Data Detected",desc:"Some courses in",descSuffix:"are missing classroom information.",instruction:"Please select the original catalog semester (e.g., 114-1) to auto-fill this data.",sourceLabel:"Original Semester Source",selectPlaceholder:"Select a semester...",skip:"Skip",autoFix:"Auto Fix",success:"Success! Auto-updated",skipped:"ambiguous matches skipped",ambiguousAlert:"Found potential matches but they were ambiguous. Please refine search or use manual mode.",noMatch:"Couldn't find matching data in"},courseSelection:{title:"Multiple Matches Found",desc:"We found multiple courses that look like",select:"Please select the correct one:",teacher:"Teacher",room:"Room",time:"Time",confirm:"Confirm Selection",cancel:"Skip this Course",manualHint:"Please check these courses manually in the planner."},fixReport:{titleAttention:"Fix Report: Attention Needed",titleComplete:"Auto-Fix Complete",successUpdate:"Successfully updated",courses:"courses",unmatched:"Could not find matches for the following courses:",noChanges:"No changes were made. All courses might already be up to date.",done:"Done"},addSemester:{title:"Add New Semester",year:"Year",semester:"Semester",yearOption:"Year {year}",sem1:"Fall Semester",sem2:"Spring Semester",summer:"Summer",exists:"This semester already exists!",cancel:"Cancel",add:"Add"}},zh:{app:{title:"",settings:"",addCourse:"",export:"",import:"",clear:"",coursePlan:"",addPlan:"",totalCourses:"",deleteConfirm:"",clearConfirm:"",tracker:"",planner:"",backToTracker:"",fixData:""},common:{actions:"",confirm:"",cancel:"",noMatchTitle:"",noMatchDesc:"",manualAdd:"",perfectMatchFound:"",matchConfirmText:"",trackerTitle:"",courseName:"",credit:"",matchCourse:"",addFromTracker:"",completedCourses:"",plannedCourses:""},settings:{title:"",language:" / Language",emiStudent:" EMI ",emiDesc:" 6 ",gradCredits:"",liquidTheme:"Liquid Glass UI ()",darkMode:"Dark Mode",lightMode:"Light Mode",save:"",profile:"",major:"",selectMajor:"...",entranceYear:" 113",class:"",emiHintActive:" EMI ",profileWarning:""},dashboard:{title:"",totalCredits:"",progress:"",genEdu:"",majorReq:"",majorRequired:"",majorElective:"",langTotal:"",langDesc:"",crossCollege:"",universityWay:"",events:"",boya:"",boyaTotal:"",emiBoya:"EMI ",service:"",dimensions:"",uniqueDimensions:"",uniqueDim:"",attendance:"",sportsCreditsNoCount:"",totalGPA:" GPA",avgSemesters:"",addInterdisciplinary:"",interdisciplinaryView:{title:"",placeholder:"",sidebar:{microCredits:"",addMicroCredit:"",internationalOrCross:" / ",international:"",crossDomain:""},requirements:{1:"",2:"",3:"",4:" ",5:" ",6:" ",7:"",8:"",9:""},details:{requirementsHeader:"",confirmationHeader:"",1:{requirement:"1",confirmation:"1"},2:{requirement:` 2 

 (ALL )
1.   / 
2.  ( Course )  / 
3.   2  ()
4. 
5.  ( Transcript )   ( Certificate of Completion )`,confirmation:""},3:{requirement:`

 (ALL )
1.  
2.  /  /  /  / 
3.   36  (  )
4.  / 
5.   `,confirmation:""}}}},form:{addTitle:"",editTitle:"",importCatalog:"",courseName:"",credits:"",grade:"",semester:"",category:"",subCategory:"",dimension:"",attributes:"",isEMI:"EMI ",isEapEsp:"EAP/ESP ",isWithdrawn:"",isExemption:"",dayTime:"",selectDay:"",selectStart:"",selectEnd:"",cancel:"",save:"",verified:""},schedule:{schedule:"",scheduledCourses:"",noCourses:"",headers:{name:"",credits:"",grade:"",category:""},days:["","","","","","",""],courseName:"",credits:"",grade:"",category:"",noCoursesScheduled:"",exportSchedule:"",exportICS:".ics"},courseSchedule:{button:"",title:"114-2 ",inquiry:"",prelim1:"",prelim2:"",addDrop1:"",addDrop2:"",inquiryDate:"1/613:00",prelim1Date:"1/309:00  2/217:00",prelim2Date:"2/49:00  2/517:00",addDrop1Date:"2/99:00  2/1017:00",addDrop2Date:"2/249:00  2/2517:00",updateTime:"2026.01.06",reference:"",warning:""},categories:{"General Education":"",Mandatory:"",Elective:"",Language:"","General Education (Core)":"","University Way":"","Service Learning":"","Physical Education":"","Major Required":"","Major Elective":"",Other:"","Cross-College":"",Boya:"",Chinese:"",English:"",Sports:"",Service:"",Primer:"","Dimension 1":"","Dimension 2":"","Dimension 3":"","Dimension 4":"","Dimension 5":"","Dimension 6":"","EAP/ESP":"EAP/ESP","Military Training":""},semesters:{"Year 1 Sem 1":" ","Year 1 Sem 2":" ","Year 2 Sem 1":" ","Year 2 Sem 2":" ","Year 3 Sem 1":" ","Year 3 Sem 2":" ","Year 4 Sem 1":" ","Year 4 Sem 2":" "},importModal:{title:"",warning:"",backupRec:"",backupBtn:"",cancel:"",overwrite:"",trackCountPrefix:" ",trackCountSuffix:" "},courseList:{schedule:" & ",noCourses:"",remove:"",cr:""},clearModal:{title:"",warning:"",backupRec:"",backupBtn:"",cancel:"",clear:""},tutorial:{start:"",welcome:{title:" ClearGrad ",desc:""},settings:{title:"",desc:" EMI "},modeSwitcher:{title:"",desc:""},plannerBoard:{title:"",desc:""},plannerSearch:{title:"",desc:""},addCourse:{title:"",desc:""},catalogFeature:{title:"",desc:" EMI "},dataSafety:{title:"",desc:" JSON "},scheduleGrid:{title:"",desc:""},scheduleList:{title:"",desc:""},dashboard:{title:"",desc:""},coursePlan:{title:"",desc:""},scheduleGrade:{title:"",desc:""},history:{title:"",desc:""},support:{title:"",desc:""},next:"",prev:"",skip:"",done:""},updates:{title:"",desc:"",close:""},planner:{title:"",draftBoard:"",weekends:"",clear:"",export:"",importDraft:"",days:{any:"",mon:"",tue:"",wed:"",thu:"",fri:"",sat:"",sun:""},depts:{all:"",cs:"",ee:"",bm:"",fl:"",gen:""},incompleteDataWarning:" {{count}} ",search:{placeholder:"...",noResults:"",retry:"",failed:""},courseId:"",addToDraft:"",alreadyAdded:"",showConflicts:"",showEMIOnly:" EMI",delete:"",edit:"",courseIdCopied:"",exportPreview:{title:"",desc:"",draftSource:"",destination:"",current:"",empty:"",warning:"",cancel:"",confirm:""},labels:{title:"",library:"",applied:"",newPlaceholder:"...",createFirst:"",allApplied:"",noApplied:"",noLabels:"",deleteConfirm:' "{{label}}" ',edit:"",finish:"",exists:""}},catalog:{title:"",subtitle:"",searchPlaceholder:"...",loading:"...",noResults:"",dataSource:" API",summer:"",coursesFound:"",includeElectives:"",mode:{all:"",compulsory:""},label:{major:"",grade:"",class:""},class:{none:"-",shared:"",a:"",b:"",english:""},grades:{1:"",2:"",3:"",4:""}},announcement:{title:"Welcome to ClearGrad !",defaultMessage:` **ClearGrad v7.0 **

 ****
Google 
 ****

 ****
 Google 100% `,disclaimer:"",close:"",dontShowAgain:"",version:"",firstTime:"",startTutorial:"",haveQuestions:"NEW"},syncState:{editing:"...",saving:"...",synced:"",idle:"",bound:""},support:{title:"",message:"",contact:"",email:"ouuewow@gmail.com",disclaimer:" ",copyright:"",faqTitle:" (FAQs)",faq:[{question:"",answer:"+"},{question:"",answer:""},{question:"",answer:"&"},{question:"",answer:" =  (JSON) = "},{question:"",answer:""},{question:"",answer:""},{question:"",answer:""},{question:"",answer:"1.  2. "}]},dataFix:{button:"",title:"",desc:"",descSuffix:"",instruction:" 114-1",sourceLabel:"",selectPlaceholder:"...",skip:"",autoFix:"",success:"",skipped:"",ambiguousAlert:"",noMatch:""},courseSelection:{title:"",desc:"",select:"",teacher:"",room:"",time:"",confirm:"",cancel:"",manualHint:""},fixReport:{titleAttention:"",titleComplete:"",successUpdate:"",courses:"",unmatched:"",noChanges:"",done:""},addSemester:{title:"",year:"",semester:"",yearOption:"{year}",sem1:"",sem2:"",summer:"",exists:"",cancel:"",add:""}}},sN=k.createContext(void 0),Ek=({children:r})=>{const[e,t]=k.useState(()=>{const A=localStorage.getItem("nsysu-language");return A==="en"||A==="zh"?A:"zh"});k.useEffect(()=>{localStorage.setItem("nsysu-language",e),document.documentElement.lang=e},[e]);const s={language:e,setLanguage:t,t:Ck[e]};return a.jsx(sN.Provider,{value:s,children:r})},At=()=>{const r=k.useContext(sN);if(r===void 0)throw new Error("useLanguage must be used within a LanguageProvider");return r},Nk=k.memo(({courses:r,isEMIStudent:e,graduationCredits:t,onOpenInterdisciplinary:s,userProfile:A})=>{const{t:l,language:d}=At(),u=bk(r,e,t),[f,g]=k.useState(0),x=()=>{try{const N=localStorage.getItem(Oc),R=N?JSON.parse(N):Zo,{grandTotalEffective:S}=V0(R,A?.entranceYear);g(S)}catch{g(0)}};k.useEffect(()=>(x(),window.addEventListener("micro-credits-updated",x),()=>window.removeEventListener("micro-credits-updated",x)),[A?.entranceYear]);const y=u.total.earned+f,v=a.jsxs("span",{children:[l.dashboard.progress,f>0&&a.jsx("span",{className:"text-muted ml-2 text-base font-normal",children:d==="zh"?`(: ${f} )`:`(Micro-credits: ${f} cr)`})]});return a.jsxs("div",{className:"bg-transparent rounded-xl max-w-[85rem] mx-auto",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-foreground pb-2",children:l.dashboard.title}),a.jsxs("button",{onClick:s,className:"flex items-center gap-2 px-3 py-1.5 bg-primary/10 hover:bg-primary/20 text-[#8D9CB2] dark:text-primary text-sm font-medium rounded-full transition-colors mb-2",children:[a.jsx(zD,{size:16}),l.dashboard.addInterdisciplinary]})]}),a.jsxs("div",{className:"flex flex-col gap-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-11 gap-6",children:[a.jsxs("div",{className:"md:col-span-7 bg-background p-6 rounded-xl border border-gray-500",children:[a.jsx("h3",{className:"text-lg font-semibold text-primary mb-4",children:l.dashboard.totalCredits}),a.jsx(cr,{label:v,current:y,total:u.total.required,color:"bg-primary",variant:"l"})]}),a.jsx("div",{className:"md:col-span-4 bg-background rounded-xl border border-gray-500 flex flex-row",children:(()=>{const N=Array.from(new Set(r.map(V=>V.semester))).sort(),R=[],S=[];N.forEach(V=>{const $=r.filter(K=>K.semester===V),G=eN($);G&&(R.push(G.gpa),S.push(V))});const P=pk(R);return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex-1 p-6 flex flex-col justify-between min-w-0",children:[a.jsx("h3",{className:"text-lg font-semibold text-primary mb-2 whitespace-nowrap",children:l.dashboard.totalGPA}),a.jsxs("div",{className:"flex items-end gap-2 mt-auto",children:[a.jsx("span",{className:"text-4xl font-bold text-foreground",children:P!==null?tN(P):"-.--"}),a.jsx("span",{className:"text-sm text-muted mb-1.5 font-medium",children:"/ 4.30"})]})]}),a.jsx("div",{className:"w-[1px] bg-gray-600 my-4"}),a.jsxs("div",{className:"flex-1 p-6 flex flex-col min-w-0 bg-surface/30 rounded-r-xl",children:[a.jsx("span",{className:"text-xs font-bold text-primary mb-3",children:l.dashboard.avgSemesters}),a.jsx("div",{className:"flex flex-wrap gap-1.5 content-start overflow-y-auto max-h-[80px]",children:S.length>0?S.map(V=>a.jsx("span",{className:"text-[10px] font-bold px-1.5 py-0.5 rounded bg-surface border border-gray-600 text-muted whitespace-nowrap",children:vk(V,d)},V)):a.jsx("span",{className:"text-[10px] text-muted italic",children:"-"})})]})]})})()})]}),a.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-11 gap-6",children:[a.jsxs("div",{className:"xl:col-span-2 bg-background p-6 rounded-xl border border-gray-500 flex flex-col gap-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-primary mb-4 whitespace-nowrap",children:l.dashboard.majorReq}),a.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-gray-400 flex-1 flex flex-col justify-center items-center text-center",children:[a.jsx("span",{className:"text-foreground text-sm font-medium block mb-1",children:l.dashboard.majorRequired}),a.jsx("span",{className:"text-3xl font-bold text-primary",children:u.majorRequired.earned})]}),a.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-gray-400 flex-1 flex flex-col justify-center items-center text-center",children:[a.jsx("div",{className:"text-foreground text-sm font-medium mb-1",children:l.dashboard.majorElective}),a.jsx("div",{className:"text-3xl font-bold text-primary",children:u.majorElective.earned})]})]}),a.jsxs("div",{className:"xl:col-span-9 bg-background p-6 rounded-xl border border-gray-500 flex flex-col",children:[a.jsx("h3",{className:"text-lg font-semibold text-primary mb-4",children:l.dashboard.genEdu}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-9 gap-6 flex-1",children:[a.jsxs("div",{className:"lg:col-span-5 flex flex-col gap-4 h-full",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 flex-1",children:[a.jsxs("div",{className:"bg-surface/30 p-4 rounded-lg border border-gray-600 h-full flex flex-col justify-center relative",children:[a.jsx(cr,{label:l.dashboard.langTotal,current:u.genEdu.language.earned,total:u.genEdu.language.required,color:"bg-lang",labelClassName:"text-lang"}),a.jsx("div",{className:"absolute bottom-3 left-4 text-[10px] text-muted",children:l.dashboard.langDesc})]}),a.jsxs("div",{className:"bg-surface/30 p-4 rounded-lg border border-gray-600 h-full flex flex-col justify-center relative",children:[a.jsx(cr,{label:l.categories?.Sports||"Sport & Health",current:u.genEdu.sports?.earned||0,total:u.genEdu.sports?.required||4,color:"bg-sports",labelClassName:"text-sports"}),a.jsx("div",{className:"absolute bottom-3 left-4 text-[10px] text-muted",children:l.dashboard.sportsCreditsNoCount})]}),a.jsx("div",{className:"bg-surface/30 p-4 rounded-lg border border-gray-600 h-full flex flex-col justify-center",children:a.jsx(cr,{label:l.dashboard.crossCollege,current:u.genEdu.crossCollege.earned,total:u.genEdu.crossCollege.required,color:"bg-inter",labelClassName:"text-inter"})}),a.jsx("div",{className:"bg-surface/30 p-4 rounded-lg border border-gray-600 h-full flex flex-col justify-center",children:a.jsx(cr,{label:l.dashboard.universityWay,current:u.universityWay.count,total:u.universityWay.required,color:"bg-primer",subLabel:l.dashboard.events,labelClassName:"text-primer"})})]}),a.jsxs("div",{className:Hc("flex items-center justify-between p-6 rounded-lg border transition-all",u.genEdu.service.earned>0?"bg-emerald-500/10 border-emerald-500/30":"bg-surface/30 border-gray-600"),children:[a.jsx("span",{className:"font-medium text-foreground text-sm",children:l.dashboard.service}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:Hc("text-xs font-bold",u.genEdu.service.earned>0?"text-emerald-400":"text-muted"),children:u.genEdu.service.earned>0?"Completed":"Req: 1 Course"}),u.genEdu.service.earned>0&&a.jsx(vt,{size:16,className:"text-emerald-500"})]})]})]}),a.jsxs("div",{className:"lg:col-span-4 bg-surface/30 p-6 rounded-lg border border-gray-600 flex flex-col h-full gap-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-md font-medium text-boya mb-6",children:l.dashboard.boya}),a.jsx(cr,{label:l.dashboard.boyaTotal,current:u.genEdu.boya.earned,total:u.genEdu.boya.required,color:"bg-boya"}),u.genEdu.boya.emiRequired>0&&a.jsx("div",{className:"mt-6",children:a.jsx(cr,{label:l.dashboard.emiBoya,current:u.genEdu.boya.emiEarned,total:u.genEdu.boya.emiRequired,color:"bg-boya-emi",variant:"s"})})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsx("div",{className:"text-xs font-medium text-muted",children:l.dashboard.dimensions}),a.jsxs("div",{className:"text-xs font-medium text-boya",children:[l.dashboard.uniqueDim," ",u.boyaStatus.uniqueDimensions.length," / 4"]})]}),a.jsx("div",{className:"flex flex-wrap justify-start sm:justify-start gap-1.5 sm:gap-2",children:[1,2,3,4,5,6].map(N=>{const R=`Dimension ${N}`,S=u.boyaStatus.uniqueDimensions.includes(R);return a.jsxs("div",{className:`
                                                    w-8 h-8 sm:w-10 sm:h-10 rounded-full flex items-center justify-center text-xs sm:text-sm font-bold border transition-all
                                                    ${S?"bg-boya border-boya text-surface":"bg-surface/50 border-gray-600 text-muted"}
                                                `,children:["D",N]},N)})})]})]})]})]})]})]})]})}),dC="nsysu-labels-library",uC="nsysu-course-labels",op=["#FCA5A5","#FDBA74","#FCD34D","#86EFAC","#67E8F9","#93C5FD","#C4B5FD","#F9A8D4","#CBD5E1"],hC=[{text:"Easy",color:"#22c55e"},{text:"Hard",color:"#ef4444"},{text:"Morning",color:"#f97316"},{text:"Afternoon",color:"#3b82f6"},{text:"To Take",color:"#a855f7"}],nN=k.createContext(null),Sk=({children:r})=>{const[e,t]=k.useState(()=>{const N=localStorage.getItem(dC);if(!N)return hC;try{const R=JSON.parse(N);return Array.isArray(R)&&typeof R[0]=="string"?R.map((S,P)=>({text:S.trim(),color:op[P%op.length]})):R.map(S=>({...S,text:S.text.trim()}))}catch(R){return console.error("Failed to parse labels",R),[]}}),[s,A]=k.useState(()=>{const N=localStorage.getItem(uC);return N?JSON.parse(N):{}});k.useEffect(()=>{localStorage.setItem(dC,JSON.stringify(e))},[e]),k.useEffect(()=>{localStorage.setItem(uC,JSON.stringify(s))},[s]);const v={allUserLabels:e,courseUserLabels:s,addLabelToLibrary:(N,R)=>{const S=N.trim();S&&t(P=>P.some(V=>V.text===S)?P:[...P,{text:S,color:R}])},removeLabelFromLibrary:N=>{t(R=>R.filter(S=>S.text!==N)),A(R=>{const S={...R};return Object.keys(S).forEach(P=>{S[P]=S[P].filter(V=>V!==N)}),S})},toggleLabelForCourse:(N,R,S)=>{const P=R.trim();if(!P)return;const V=S?`${S}_${N}`:N;A($=>{const G=$[V]||[];if(G.includes(P)){const Y=G.filter(q=>q!==P);if(Y.length===0){const{[V]:q,...E}=$;return E}return{...$,[V]:Y}}else return{...$,[V]:[...G,P]}})},setLabelForCourse:(N,R,S,P)=>{const V=R.trim();if(!V)return;const $=P?`${P}_${N}`:N;A(G=>{const K=G[$]||[],Y=K.includes(V);if(S&&!Y)return{...G,[$]:[...K,V]};if(!S&&Y){const q=K.filter(E=>E!==V);if(q.length===0){const{[$]:E,...j}=G;return j}return{...G,[$]:q}}return G})},getLabelsForCourse:(N,R)=>{const S=R?`${R}_${N}`:N;return(s[S]||[]).map(V=>e.find($=>$.text===V)).filter(V=>!!V)},clearAllLabels:()=>{t(hC),A({})},importLabels:(N,R)=>{Array.isArray(N)&&t(N),R&&typeof R=="object"&&A(R)},DEFAULT_COLORS:op};return a.jsx(nN.Provider,{value:v,children:r})},jk=()=>{const r=k.useContext(nN);if(!r)throw new Error("useLabelContext must be used within a LabelProvider");return r},yd=()=>jk(),_k=({course:r,onEdit:e,onLabelClick:t})=>{const{t:s}=At(),{getLabelsForCourse:A}=yd(),d=r.category==="General Education"?r.genEduSubCategory?vx[r.genEduSubCategory]:af["General Education"]:af[r.category],u=r.genEduSubCategory,f=u?vx[u]:d,g=A(r.id);return a.jsxs("div",{className:"group/card relative bg-surface hover:bg-surface/80 transition-colors p-3 rounded-lg border border-gray-600 shadow-sm mb-2",children:[a.jsxs("div",{className:"flex justify-between items-start mb-1 gap-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold text-foreground text-sm line-clamp-2",children:r.name}),r.teacher&&a.jsx("p",{className:"text-xs text-muted/80 line-clamp-1",children:r.teacher})]}),a.jsx("div",{className:"flex flex-col items-end gap-1 flex-shrink-0",children:a.jsxs("span",{className:`text-xs font-bold px-1.5 py-0.5 rounded ${r.isWithdrawn||["D","E","F","Fail","FAIL"].includes(r.grade||"")?"bg-red-500/10 text-red-500 decoration-red-500 line-through":"text-muted bg-background"}`,children:[r.credits,s.courseList.cr]})})]}),a.jsx("div",{className:"flex flex-wrap gap-1 mt-1 mb-2",children:t&&g.map(x=>a.jsx("span",{className:"text-[10px] text-white px-2 py-0.5 rounded-full font-bold shadow-sm backdrop-blur-[2px]",style:{backgroundColor:`${x.color}99`},children:x.text},x.text))}),a.jsxs("div",{className:"flex justify-between items-end mt-2",children:[a.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.jsx("span",{className:`text-[10px] uppercase font-bold px-1.5 py-0.5 rounded ${f}`,children:r.category==="General Education"?s.categories[u]||u||"GenEdu":(s.categories[r.category]||r.category).replace("Major ","")}),r.isEMI&&!r.isExemption&&r.genEduSubCategory!=="Primer"&&a.jsx("span",{className:"text-[10px] font-bold px-1.5 py-0.5 rounded bg-warning text-black",children:"EMI"}),r.isExemption&&a.jsx("span",{className:"text-[10px] font-bold px-1.5 py-0.5 rounded bg-gray-500 text-white",children:s.form.isExemption})]}),a.jsxs("div",{className:"flex gap-1 opacity-0 group-hover/card:opacity-100 transition-all",children:[t&&a.jsx("button",{onClick:()=>t(r),className:"text-muted hover:text-primary p-1 hover:bg-surface/50 rounded",title:"Labels",children:a.jsx(W2,{size:14})}),a.jsx("button",{onClick:()=>e(r),className:"text-muted hover:text-primary p-1 hover:bg-surface/50 rounded",title:"Edit",children:a.jsx(P0,{size:14})})]})]})]})},Tk=({semester:r,courses:e,onEdit:t,onViewSchedule:s,onLabelClick:A,onFixData:l})=>{const{t:d}=At(),u=f=>{if(d.semesters[f])return d.semesters[f];const g=f.split(" ");if(g.length>=2&&g[0]==="Year"){const x=g[1],y=g.slice(2).join(" ");if(d.semesters["Year 1 Sem 1"].includes("")){const N=["","","","","","","",""][parseInt(x)-1]||x;if(y==="Summer")return`${N} ${d.catalog.summer}`;if(y==="Sem 1")return`${N} `;if(y==="Sem 2")return`${N} `}else{if(y==="Sem 1")return`Year ${x} Fall Semester`;if(y==="Sem 2")return`Year ${x} Spring Semester`;if(y==="Summer")return`Year ${x} Summer`}}return f.replace("Summer",d.catalog.summer)};return a.jsxs("div",{className:"w-80 flex-shrink-0 flex flex-col h-full",children:[a.jsxs("div",{className:"mb-3 px-1",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("h3",{className:"font-bold text-foreground",children:u(r)}),(()=>{const f=eN(e);return f?a.jsxs("span",{className:"text-xs font-bold text-primary bg-primary/10 px-2 py-1 rounded",children:["GPA ",tN(f.gpa)]}):null})()]}),a.jsx("button",{id:r==="Year 1 Sem 1"?"schedule-grade-btn":void 0,onClick:s,className:"w-full text-xs bg-surface hover:bg-primary hover:text-white text-muted px-3 py-2 rounded-lg transition-colors border border-gray-600 hover:border-primary font-medium flex items-center justify-center gap-2",children:d.courseList.schedule}),l&&e.some(f=>f.isExemption||f.category==="University Way"||f.category==="General Education"&&(f.genEduSubCategory==="Primer"||f.genEduSubCategory==="Service")||f.userLabels?.includes("manual")||!f.name.includes(`
`)&&!/[\u4e00-\u9fa5]/.test(f.name)||(f.fixAttempts||0)>=2?!1:!f.originalId||!f.originalSemester||!f.department)&&a.jsxs("button",{onClick:()=>l(r),className:"w-full mt-2 text-xs bg-red-50 hover:bg-red-100 text-red-600 px-3 py-2 rounded-lg transition-colors border border-red-200 hover:border-red-300 font-medium flex items-center justify-center gap-2",children:[a.jsx(yx,{size:12}),d.app.fixData||"Fix Data"]})]}),a.jsxs("div",{className:"flex-1 rounded-xl p-3 border-2 transition-colors min-h-[150px] bg-background border-gray-600/30 flex flex-col",children:[e.length===0&&a.jsx("div",{className:"h-full flex items-center justify-center text-slate-600 text-sm italic",children:d.courseList.noCourses}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:e.map(f=>a.jsx(_k,{course:f,onEdit:t,onLabelClick:A},f.id))})]})]})},Uk=k.memo(({semesters:r,courses:e,onEdit:t,onViewSchedule:s,onLabelClick:A,onFixData:l})=>{const d=k.useRef(null);k.useEffect(()=>{const g=localStorage.getItem("nsysu-tracker-scroll");g&&d.current&&r.length>0&&setTimeout(()=>{d.current&&(d.current.scrollLeft=Number(g))},0)},[r.length]);const u=()=>{d.current&&localStorage.setItem("nsysu-tracker-scroll",d.current.scrollLeft.toString())},f=g=>{d.current&&d.current.scrollBy({left:g,behavior:"smooth"})};return a.jsxs("div",{className:"relative group",children:[a.jsx("button",{onClick:()=>f(-300),className:"absolute -left-12 top-1/2 -translate-y-1/2 z-10 bg-surface border border-border p-2 rounded-full text-foreground shadow-lg hover:bg-primary hover:border-primary hover:text-white transition-all shadow-black/10 opacity-0 group-hover:opacity-100",title:"Scroll Left",children:a.jsx(MD,{})}),a.jsx("div",{ref:d,onScroll:u,className:"flex gap-4 overflow-x-auto pb-4 px-1 snap-x custom-scrollbar",children:r.map(g=>a.jsx("div",{className:"snap-start h-full",children:a.jsx(Tk,{semester:g,courses:e.filter(x=>x.semester===g),onEdit:t,onViewSchedule:()=>s(g),onFixData:l,onLabelClick:A})},g))}),a.jsx("button",{onClick:()=>f(300),className:"absolute -right-12 top-1/2 -translate-y-1/2 z-10 bg-surface border border-border p-2 rounded-full text-foreground shadow-lg hover:bg-primary hover:border-primary hover:text-white transition-all shadow-black/10 opacity-0 group-hover:opacity-100",title:"Scroll Right",children:a.jsx(q2,{})})]})});var $t=E1();var Bx=function(r,e){return Bx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var A in s)Object.prototype.hasOwnProperty.call(s,A)&&(t[A]=s[A])},Bx(r,e)};function Qn(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Bx(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Cx=function(){return Cx=Object.assign||function(e){for(var t,s=1,A=arguments.length;s<A;s++){t=arguments[s];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},Cx.apply(this,arguments)};function ys(r,e,t,s){function A(l){return l instanceof t?l:new t(function(d){d(l)})}return new(t||(t=Promise))(function(l,d){function u(x){try{g(s.next(x))}catch(y){d(y)}}function f(x){try{g(s.throw(x))}catch(y){d(y)}}function g(x){x.done?l(x.value):A(x.value).then(u,f)}g((s=s.apply(r,[])).next())})}function As(r,e){var t={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,A,l,d;return d={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function u(g){return function(x){return f([g,x])}}function f(g){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,A&&(l=g[0]&2?A.return:g[0]?A.throw||((l=A.return)&&l.call(A),0):A.next)&&!(l=l.call(A,g[1])).done)return l;switch(A=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,A=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(l=t.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){t.label=g[1];break}if(g[0]===6&&t.label<l[1]){t.label=l[1],l=g;break}if(l&&t.label<l[2]){t.label=l[2],t.ops.push(g);break}l[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(r,t)}catch(x){g=[6,x],A=0}finally{s=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}function Xu(r,e,t){if(arguments.length===2)for(var s=0,A=e.length,l;s<A;s++)(l||!(s in e))&&(l||(l=Array.prototype.slice.call(e,0,s)),l[s]=e[s]);return r.concat(l||e)}var Ha=(function(){function r(e,t,s,A){this.left=e,this.top=t,this.width=s,this.height=A}return r.prototype.add=function(e,t,s,A){return new r(this.left+e,this.top+t,this.width+s,this.height+A)},r.fromClientRect=function(e,t){return new r(t.left+e.windowBounds.left,t.top+e.windowBounds.top,t.width,t.height)},r.fromDOMRectList=function(e,t){var s=Array.from(t).find(function(A){return A.width!==0});return s?new r(s.left+e.windowBounds.left,s.top+e.windowBounds.top,s.width,s.height):r.EMPTY},r.EMPTY=new r(0,0,0,0),r})(),Lf=function(r,e){return Ha.fromClientRect(r,e.getBoundingClientRect())},Qk=function(r){var e=r.body,t=r.documentElement;if(!e||!t)throw new Error("Unable to get document size");var s=Math.max(Math.max(e.scrollWidth,t.scrollWidth),Math.max(e.offsetWidth,t.offsetWidth),Math.max(e.clientWidth,t.clientWidth)),A=Math.max(Math.max(e.scrollHeight,t.scrollHeight),Math.max(e.offsetHeight,t.offsetHeight),Math.max(e.clientHeight,t.clientHeight));return new Ha(0,0,s,A)},Hf=function(r){for(var e=[],t=0,s=r.length;t<s;){var A=r.charCodeAt(t++);if(A>=55296&&A<=56319&&t<s){var l=r.charCodeAt(t++);(l&64512)===56320?e.push(((A&1023)<<10)+(l&1023)+65536):(e.push(A),t--)}else e.push(A)}return e},gr=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,r);var t=r.length;if(!t)return"";for(var s=[],A=-1,l="";++A<t;){var d=r[A];d<=65535?s.push(d):(d-=65536,s.push((d>>10)+55296,d%1024+56320)),(A+1===t||s.length>16384)&&(l+=String.fromCharCode.apply(String,s),s.length=0)}return l},fC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Fk=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ju=0;Ju<fC.length;Ju++)Fk[fC.charCodeAt(Ju)]=Ju;var mC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Nc=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Wu=0;Wu<mC.length;Wu++)Nc[mC.charCodeAt(Wu)]=Wu;var Ik=function(r){var e=r.length*.75,t=r.length,s,A=0,l,d,u,f;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);var g=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),x=Array.isArray(g)?g:new Uint8Array(g);for(s=0;s<t;s+=4)l=Nc[r.charCodeAt(s)],d=Nc[r.charCodeAt(s+1)],u=Nc[r.charCodeAt(s+2)],f=Nc[r.charCodeAt(s+3)],x[A++]=l<<2|d>>4,x[A++]=(d&15)<<4|u>>2,x[A++]=(u&3)<<6|f&63;return g},Dk=function(r){for(var e=r.length,t=[],s=0;s<e;s+=2)t.push(r[s+1]<<8|r[s]);return t},kk=function(r){for(var e=r.length,t=[],s=0;s<e;s+=4)t.push(r[s+3]<<24|r[s+2]<<16|r[s+1]<<8|r[s]);return t},TA=5,z0=11,lp=2,Rk=z0-TA,aN=65536>>TA,Mk=1<<TA,cp=Mk-1,Lk=1024>>TA,Hk=aN+Lk,Ok=Hk,Pk=32,Vk=Ok+Pk,zk=65536>>z0,Kk=1<<Rk,Gk=Kk-1,gC=function(r,e,t){return r.slice?r.slice(e,t):new Uint16Array(Array.prototype.slice.call(r,e,t))},qk=function(r,e,t){return r.slice?r.slice(e,t):new Uint32Array(Array.prototype.slice.call(r,e,t))},Yk=function(r,e){var t=Ik(r),s=Array.isArray(t)?kk(t):new Uint32Array(t),A=Array.isArray(t)?Dk(t):new Uint16Array(t),l=24,d=gC(A,l/2,s[4]/2),u=s[5]===2?gC(A,(l+s[4])/2):qk(s,Math.ceil((l+s[4])/4));return new $k(s[0],s[1],s[2],s[3],d,u)},$k=(function(){function r(e,t,s,A,l,d){this.initialValue=e,this.errorValue=t,this.highStart=s,this.highValueIndex=A,this.index=l,this.data=d}return r.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>TA],t=(t<<lp)+(e&cp),this.data[t];if(e<=65535)return t=this.index[aN+(e-55296>>TA)],t=(t<<lp)+(e&cp),this.data[t];if(e<this.highStart)return t=Vk-zk+(e>>z0),t=this.index[t],t+=e>>TA&Gk,t=this.index[t],t=(t<<lp)+(e&cp),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},r})(),pC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Xk=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Zu=0;Zu<pC.length;Zu++)Xk[pC.charCodeAt(Zu)]=Zu;var Jk="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",xC=50,Wk=1,iN=2,AN=3,Zk=4,e3=5,yC=7,oN=8,bC=9,_i=10,Ex=11,vC=12,Nx=13,t3=14,Sc=15,Sx=16,eh=17,gc=18,r3=19,wC=20,jx=21,pc=22,dp=23,Qo=24,zs=25,jc=26,_c=27,Fo=28,s3=29,BA=30,n3=31,th=32,rh=33,_x=34,Tx=35,Ux=36,nd=37,Qx=38,Dh=39,kh=40,up=41,lN=42,a3=43,i3=[9001,65288],cN="!",mt="",sh="",Fx=Yk(Jk),Ua=[BA,Ux],Ix=[Wk,iN,AN,e3],dN=[_i,oN],BC=[_c,jc],A3=Ix.concat(dN),CC=[Qx,Dh,kh,_x,Tx],o3=[Sc,Nx],l3=function(r,e){e===void 0&&(e="strict");var t=[],s=[],A=[];return r.forEach(function(l,d){var u=Fx.get(l);if(u>xC?(A.push(!0),u-=xC):A.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(l)!==-1)return s.push(d),t.push(Sx);if(u===Zk||u===Ex){if(d===0)return s.push(d),t.push(BA);var f=t[d-1];return A3.indexOf(f)===-1?(s.push(s[d-1]),t.push(f)):(s.push(d),t.push(BA))}if(s.push(d),u===n3)return t.push(e==="strict"?jx:nd);if(u===lN||u===s3)return t.push(BA);if(u===a3)return l>=131072&&l<=196605||l>=196608&&l<=262141?t.push(nd):t.push(BA);t.push(u)}),[s,t,A]},hp=function(r,e,t,s){var A=s[t];if(Array.isArray(r)?r.indexOf(A)!==-1:r===A)for(var l=t;l<=s.length;){l++;var d=s[l];if(d===e)return!0;if(d!==_i)break}if(A===_i)for(var l=t;l>0;){l--;var u=s[l];if(Array.isArray(r)?r.indexOf(u)!==-1:r===u)for(var f=t;f<=s.length;){f++;var d=s[f];if(d===e)return!0;if(d!==_i)break}if(u!==_i)break}return!1},EC=function(r,e){for(var t=r;t>=0;){var s=e[t];if(s===_i)t--;else return s}return 0},c3=function(r,e,t,s,A){if(t[s]===0)return mt;var l=s-1;if(Array.isArray(A)&&A[l]===!0)return mt;var d=l-1,u=l+1,f=e[l],g=d>=0?e[d]:0,x=e[u];if(f===iN&&x===AN)return mt;if(Ix.indexOf(f)!==-1)return cN;if(Ix.indexOf(x)!==-1||dN.indexOf(x)!==-1)return mt;if(EC(l,e)===oN)return sh;if(Fx.get(r[l])===Ex||(f===th||f===rh)&&Fx.get(r[u])===Ex||f===yC||x===yC||f===bC||[_i,Nx,Sc].indexOf(f)===-1&&x===bC||[eh,gc,r3,Qo,Fo].indexOf(x)!==-1||EC(l,e)===pc||hp(dp,pc,l,e)||hp([eh,gc],jx,l,e)||hp(vC,vC,l,e))return mt;if(f===_i)return sh;if(f===dp||x===dp)return mt;if(x===Sx||f===Sx)return sh;if([Nx,Sc,jx].indexOf(x)!==-1||f===t3||g===Ux&&o3.indexOf(f)!==-1||f===Fo&&x===Ux||x===wC||Ua.indexOf(x)!==-1&&f===zs||Ua.indexOf(f)!==-1&&x===zs||f===_c&&[nd,th,rh].indexOf(x)!==-1||[nd,th,rh].indexOf(f)!==-1&&x===jc||Ua.indexOf(f)!==-1&&BC.indexOf(x)!==-1||BC.indexOf(f)!==-1&&Ua.indexOf(x)!==-1||[_c,jc].indexOf(f)!==-1&&(x===zs||[pc,Sc].indexOf(x)!==-1&&e[u+1]===zs)||[pc,Sc].indexOf(f)!==-1&&x===zs||f===zs&&[zs,Fo,Qo].indexOf(x)!==-1)return mt;if([zs,Fo,Qo,eh,gc].indexOf(x)!==-1)for(var y=l;y>=0;){var v=e[y];if(v===zs)return mt;if([Fo,Qo].indexOf(v)!==-1)y--;else break}if([_c,jc].indexOf(x)!==-1)for(var y=[eh,gc].indexOf(f)!==-1?d:l;y>=0;){var v=e[y];if(v===zs)return mt;if([Fo,Qo].indexOf(v)!==-1)y--;else break}if(Qx===f&&[Qx,Dh,_x,Tx].indexOf(x)!==-1||[Dh,_x].indexOf(f)!==-1&&[Dh,kh].indexOf(x)!==-1||[kh,Tx].indexOf(f)!==-1&&x===kh||CC.indexOf(f)!==-1&&[wC,jc].indexOf(x)!==-1||CC.indexOf(x)!==-1&&f===_c||Ua.indexOf(f)!==-1&&Ua.indexOf(x)!==-1||f===Qo&&Ua.indexOf(x)!==-1||Ua.concat(zs).indexOf(f)!==-1&&x===pc&&i3.indexOf(r[u])===-1||Ua.concat(zs).indexOf(x)!==-1&&f===gc)return mt;if(f===up&&x===up){for(var N=t[l],R=1;N>0&&(N--,e[N]===up);)R++;if(R%2!==0)return mt}return f===th&&x===rh?mt:sh},d3=function(r,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var t=l3(r,e.lineBreak),s=t[0],A=t[1],l=t[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(A=A.map(function(u){return[zs,BA,lN].indexOf(u)!==-1?nd:u}));var d=e.wordBreak==="keep-all"?l.map(function(u,f){return u&&r[f]>=19968&&r[f]<=40959}):void 0;return[s,A,d]},u3=(function(){function r(e,t,s,A){this.codePoints=e,this.required=t===cN,this.start=s,this.end=A}return r.prototype.slice=function(){return gr.apply(void 0,this.codePoints.slice(this.start,this.end))},r})(),h3=function(r,e){var t=Hf(r),s=d3(t,e),A=s[0],l=s[1],d=s[2],u=t.length,f=0,g=0;return{next:function(){if(g>=u)return{done:!0,value:null};for(var x=mt;g<u&&(x=c3(t,l,A,++g,d))===mt;);if(x!==mt||g===u){var y=new u3(t,x,f,g);return f=g,{value:y,done:!1}}return{done:!0,value:null}}}},f3=1,m3=2,bd=4,NC=8,Af=10,SC=47,Pc=92,g3=9,p3=32,nh=34,xc=61,x3=35,y3=36,b3=37,ah=39,ih=40,yc=41,v3=95,Fs=45,w3=33,B3=60,C3=62,E3=64,N3=91,S3=93,j3=61,_3=123,Ah=63,T3=125,jC=124,U3=126,Q3=128,_C=65533,fp=42,SA=43,F3=44,I3=58,D3=59,ad=46,k3=0,R3=8,M3=11,L3=14,H3=31,O3=127,qn=-1,uN=48,hN=97,fN=101,P3=102,V3=117,z3=122,mN=65,gN=69,pN=70,K3=85,G3=90,ls=function(r){return r>=uN&&r<=57},q3=function(r){return r>=55296&&r<=57343},Io=function(r){return ls(r)||r>=mN&&r<=pN||r>=hN&&r<=P3},Y3=function(r){return r>=hN&&r<=z3},$3=function(r){return r>=mN&&r<=G3},X3=function(r){return Y3(r)||$3(r)},J3=function(r){return r>=Q3},oh=function(r){return r===Af||r===g3||r===p3},of=function(r){return X3(r)||J3(r)||r===v3},TC=function(r){return of(r)||ls(r)||r===Fs},W3=function(r){return r>=k3&&r<=R3||r===M3||r>=L3&&r<=H3||r===O3},Ci=function(r,e){return r!==Pc?!1:e!==Af},lh=function(r,e,t){return r===Fs?of(e)||Ci(e,t):of(r)?!0:!!(r===Pc&&Ci(r,e))},mp=function(r,e,t){return r===SA||r===Fs?ls(e)?!0:e===ad&&ls(t):ls(r===ad?e:r)},Z3=function(r){var e=0,t=1;(r[e]===SA||r[e]===Fs)&&(r[e]===Fs&&(t=-1),e++);for(var s=[];ls(r[e]);)s.push(r[e++]);var A=s.length?parseInt(gr.apply(void 0,s),10):0;r[e]===ad&&e++;for(var l=[];ls(r[e]);)l.push(r[e++]);var d=l.length,u=d?parseInt(gr.apply(void 0,l),10):0;(r[e]===gN||r[e]===fN)&&e++;var f=1;(r[e]===SA||r[e]===Fs)&&(r[e]===Fs&&(f=-1),e++);for(var g=[];ls(r[e]);)g.push(r[e++]);var x=g.length?parseInt(gr.apply(void 0,g),10):0;return t*(A+u*Math.pow(10,-d))*Math.pow(10,f*x)},eR={type:2},tR={type:3},rR={type:4},sR={type:13},nR={type:8},aR={type:21},iR={type:9},AR={type:10},oR={type:11},lR={type:12},cR={type:14},ch={type:23},dR={type:1},uR={type:25},hR={type:24},fR={type:26},mR={type:27},gR={type:28},pR={type:29},xR={type:31},Dx={type:32},xN=(function(){function r(){this._value=[]}return r.prototype.write=function(e){this._value=this._value.concat(Hf(e))},r.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==Dx;)e.push(t),t=this.consumeToken();return e},r.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case nh:return this.consumeStringToken(nh);case x3:var t=this.peekCodePoint(0),s=this.peekCodePoint(1),A=this.peekCodePoint(2);if(TC(t)||Ci(s,A)){var l=lh(t,s,A)?m3:f3,d=this.consumeName();return{type:5,value:d,flags:l}}break;case y3:if(this.peekCodePoint(0)===xc)return this.consumeCodePoint(),sR;break;case ah:return this.consumeStringToken(ah);case ih:return eR;case yc:return tR;case fp:if(this.peekCodePoint(0)===xc)return this.consumeCodePoint(),cR;break;case SA:if(mp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case F3:return rR;case Fs:var u=e,f=this.peekCodePoint(0),g=this.peekCodePoint(1);if(mp(u,f,g))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(lh(u,f,g))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(f===Fs&&g===C3)return this.consumeCodePoint(),this.consumeCodePoint(),hR;break;case ad:if(mp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case SC:if(this.peekCodePoint(0)===fp)for(this.consumeCodePoint();;){var x=this.consumeCodePoint();if(x===fp&&(x=this.consumeCodePoint(),x===SC))return this.consumeToken();if(x===qn)return this.consumeToken()}break;case I3:return fR;case D3:return mR;case B3:if(this.peekCodePoint(0)===w3&&this.peekCodePoint(1)===Fs&&this.peekCodePoint(2)===Fs)return this.consumeCodePoint(),this.consumeCodePoint(),uR;break;case E3:var y=this.peekCodePoint(0),v=this.peekCodePoint(1),N=this.peekCodePoint(2);if(lh(y,v,N)){var d=this.consumeName();return{type:7,value:d}}break;case N3:return gR;case Pc:if(Ci(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case S3:return pR;case j3:if(this.peekCodePoint(0)===xc)return this.consumeCodePoint(),nR;break;case _3:return oR;case T3:return lR;case V3:case K3:var R=this.peekCodePoint(0),S=this.peekCodePoint(1);return R===SA&&(Io(S)||S===Ah)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case jC:if(this.peekCodePoint(0)===xc)return this.consumeCodePoint(),iR;if(this.peekCodePoint(0)===jC)return this.consumeCodePoint(),aR;break;case U3:if(this.peekCodePoint(0)===xc)return this.consumeCodePoint(),AR;break;case qn:return Dx}return oh(e)?(this.consumeWhiteSpace(),xR):ls(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):of(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:gr(e)}},r.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},r.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},r.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},r.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();Io(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var s=!1;t===Ah&&e.length<6;)e.push(t),t=this.consumeCodePoint(),s=!0;if(s){var A=parseInt(gr.apply(void 0,e.map(function(f){return f===Ah?uN:f})),16),l=parseInt(gr.apply(void 0,e.map(function(f){return f===Ah?pN:f})),16);return{type:30,start:A,end:l}}var d=parseInt(gr.apply(void 0,e),16);if(this.peekCodePoint(0)===Fs&&Io(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var u=[];Io(t)&&u.length<6;)u.push(t),t=this.consumeCodePoint();var l=parseInt(gr.apply(void 0,u),16);return{type:30,start:d,end:l}}else return{type:30,start:d,end:d}},r.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===ih?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===ih?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},r.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===qn)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===ah||t===nh){var s=this.consumeStringToken(this.consumeCodePoint());return s.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===qn||this.peekCodePoint(0)===yc)?(this.consumeCodePoint(),{type:22,value:s.value}):(this.consumeBadUrlRemnants(),ch)}for(;;){var A=this.consumeCodePoint();if(A===qn||A===yc)return{type:22,value:gr.apply(void 0,e)};if(oh(A))return this.consumeWhiteSpace(),this.peekCodePoint(0)===qn||this.peekCodePoint(0)===yc?(this.consumeCodePoint(),{type:22,value:gr.apply(void 0,e)}):(this.consumeBadUrlRemnants(),ch);if(A===nh||A===ah||A===ih||W3(A))return this.consumeBadUrlRemnants(),ch;if(A===Pc)if(Ci(A,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),ch;else e.push(A)}},r.prototype.consumeWhiteSpace=function(){for(;oh(this.peekCodePoint(0));)this.consumeCodePoint()},r.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===yc||e===qn)return;Ci(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},r.prototype.consumeStringSlice=function(e){for(var t=5e4,s="";e>0;){var A=Math.min(t,e);s+=gr.apply(void 0,this._value.splice(0,A)),e-=A}return this._value.shift(),s},r.prototype.consumeStringToken=function(e){var t="",s=0;do{var A=this._value[s];if(A===qn||A===void 0||A===e)return t+=this.consumeStringSlice(s),{type:0,value:t};if(A===Af)return this._value.splice(0,s),dR;if(A===Pc){var l=this._value[s+1];l!==qn&&l!==void 0&&(l===Af?(t+=this.consumeStringSlice(s),s=-1,this._value.shift()):Ci(A,l)&&(t+=this.consumeStringSlice(s),t+=gr(this.consumeEscapedCodePoint()),s=-1))}s++}while(!0)},r.prototype.consumeNumber=function(){var e=[],t=bd,s=this.peekCodePoint(0);for((s===SA||s===Fs)&&e.push(this.consumeCodePoint());ls(this.peekCodePoint(0));)e.push(this.consumeCodePoint());s=this.peekCodePoint(0);var A=this.peekCodePoint(1);if(s===ad&&ls(A))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=NC;ls(this.peekCodePoint(0));)e.push(this.consumeCodePoint());s=this.peekCodePoint(0),A=this.peekCodePoint(1);var l=this.peekCodePoint(2);if((s===gN||s===fN)&&((A===SA||A===Fs)&&ls(l)||ls(A)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=NC;ls(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[Z3(e),t]},r.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],s=e[1],A=this.peekCodePoint(0),l=this.peekCodePoint(1),d=this.peekCodePoint(2);if(lh(A,l,d)){var u=this.consumeName();return{type:15,number:t,flags:s,unit:u}}return A===b3?(this.consumeCodePoint(),{type:16,number:t,flags:s}):{type:17,number:t,flags:s}},r.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Io(e)){for(var t=gr(e);Io(this.peekCodePoint(0))&&t.length<6;)t+=gr(this.consumeCodePoint());oh(this.peekCodePoint(0))&&this.consumeCodePoint();var s=parseInt(t,16);return s===0||q3(s)||s>1114111?_C:s}return e===qn?_C:e},r.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(TC(t))e+=gr(t);else if(Ci(t,this.peekCodePoint(0)))e+=gr(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(t),e}},r})(),yN=(function(){function r(e){this._tokens=e}return r.create=function(e){var t=new xN;return t.write(e),new r(t.read())},r.parseValue=function(e){return r.create(e).parseComponentValue()},r.parseValues=function(e){return r.create(e).parseComponentValues()},r.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},r.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(t.type===32)return e;e.push(t),e.push()}},r.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},r.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},s=this.consumeToken();;){if(s.type===32||bR(s,e))return t;this.reconsumeToken(s),t.values.push(this.consumeComponentValue()),s=this.consumeToken()}},r.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var s=this.consumeToken();if(s.type===32||s.type===3)return t;this.reconsumeToken(s),t.values.push(this.consumeComponentValue())}},r.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?Dx:e},r.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},r})(),vd=function(r){return r.type===15},pl=function(r){return r.type===17},Lt=function(r){return r.type===20},yR=function(r){return r.type===0},kx=function(r,e){return Lt(r)&&r.value===e},bN=function(r){return r.type!==31},ll=function(r){return r.type!==31&&r.type!==4},Aa=function(r){var e=[],t=[];return r.forEach(function(s){if(s.type===4){if(t.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(t),t=[];return}s.type!==31&&t.push(s)}),t.length&&e.push(t),e},bR=function(r,e){return e===11&&r.type===12||e===28&&r.type===29?!0:e===2&&r.type===3},qi=function(r){return r.type===17||r.type===15},Nr=function(r){return r.type===16||qi(r)},vN=function(r){return r.length>1?[r[0],r[1]]:[r[0]]},es={type:17,number:0,flags:bd},K0={type:16,number:50,flags:bd},Ti={type:16,number:100,flags:bd},Tc=function(r,e,t){var s=r[0],A=r[1];return[Pt(s,e),Pt(typeof A<"u"?A:s,t)]},Pt=function(r,e){if(r.type===16)return r.number/100*e;if(vd(r))switch(r.unit){case"rem":case"em":return 16*r.number;default:return r.number}return r.number},wN="deg",BN="grad",CN="rad",EN="turn",Of={name:"angle",parse:function(r,e){if(e.type===15)switch(e.unit){case wN:return Math.PI*e.number/180;case BN:return Math.PI/200*e.number;case CN:return e.number;case EN:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},NN=function(r){return r.type===15&&(r.unit===wN||r.unit===BN||r.unit===CN||r.unit===EN)},SN=function(r){var e=r.filter(Lt).map(function(t){return t.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[es,es];case"to top":case"bottom":return dn(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[es,Ti];case"to right":case"left":return dn(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Ti,Ti];case"to bottom":case"top":return dn(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Ti,es];case"to left":case"right":return dn(270)}return 0},dn=function(r){return Math.PI*r/180},Mi={name:"color",parse:function(r,e){if(e.type===18){var t=vR[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return t(r,e.values)}if(e.type===5){if(e.value.length===3){var s=e.value.substring(0,1),A=e.value.substring(1,2),l=e.value.substring(2,3);return Ui(parseInt(s+s,16),parseInt(A+A,16),parseInt(l+l,16),1)}if(e.value.length===4){var s=e.value.substring(0,1),A=e.value.substring(1,2),l=e.value.substring(2,3),d=e.value.substring(3,4);return Ui(parseInt(s+s,16),parseInt(A+A,16),parseInt(l+l,16),parseInt(d+d,16)/255)}if(e.value.length===6){var s=e.value.substring(0,2),A=e.value.substring(2,4),l=e.value.substring(4,6);return Ui(parseInt(s,16),parseInt(A,16),parseInt(l,16),1)}if(e.value.length===8){var s=e.value.substring(0,2),A=e.value.substring(2,4),l=e.value.substring(4,6),d=e.value.substring(6,8);return Ui(parseInt(s,16),parseInt(A,16),parseInt(l,16),parseInt(d,16)/255)}}if(e.type===20){var u=Da[e.value.toUpperCase()];if(typeof u<"u")return u}return Da.TRANSPARENT}},Li=function(r){return(255&r)===0},Hr=function(r){var e=255&r,t=255&r>>8,s=255&r>>16,A=255&r>>24;return e<255?"rgba("+A+","+s+","+t+","+e/255+")":"rgb("+A+","+s+","+t+")"},Ui=function(r,e,t,s){return(r<<24|e<<16|t<<8|Math.round(s*255)<<0)>>>0},UC=function(r,e){if(r.type===17)return r.number;if(r.type===16){var t=e===3?1:255;return e===3?r.number/100*t:Math.round(r.number/100*t)}return 0},QC=function(r,e){var t=e.filter(ll);if(t.length===3){var s=t.map(UC),A=s[0],l=s[1],d=s[2];return Ui(A,l,d,1)}if(t.length===4){var u=t.map(UC),A=u[0],l=u[1],d=u[2],f=u[3];return Ui(A,l,d,f)}return 0};function gp(r,e,t){return t<0&&(t+=1),t>=1&&(t-=1),t<1/6?(e-r)*t*6+r:t<1/2?e:t<2/3?(e-r)*6*(2/3-t)+r:r}var FC=function(r,e){var t=e.filter(ll),s=t[0],A=t[1],l=t[2],d=t[3],u=(s.type===17?dn(s.number):Of.parse(r,s))/(Math.PI*2),f=Nr(A)?A.number/100:0,g=Nr(l)?l.number/100:0,x=typeof d<"u"&&Nr(d)?Pt(d,1):1;if(f===0)return Ui(g*255,g*255,g*255,1);var y=g<=.5?g*(f+1):g+f-g*f,v=g*2-y,N=gp(v,y,u+1/3),R=gp(v,y,u),S=gp(v,y,u-1/3);return Ui(N*255,R*255,S*255,x)},vR={hsl:FC,hsla:FC,rgb:QC,rgba:QC},Vc=function(r,e){return Mi.parse(r,yN.create(e).parseComponentValue())},Da={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},wR={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(r,e){return e.map(function(t){if(Lt(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},BR={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Pf=function(r,e){var t=Mi.parse(r,e[0]),s=e[1];return s&&Nr(s)?{color:t,stop:s}:{color:t,stop:null}},IC=function(r,e){var t=r[0],s=r[r.length-1];t.stop===null&&(t.stop=es),s.stop===null&&(s.stop=Ti);for(var A=[],l=0,d=0;d<r.length;d++){var u=r[d].stop;if(u!==null){var f=Pt(u,e);f>l?A.push(f):A.push(l),l=f}else A.push(null)}for(var g=null,d=0;d<A.length;d++){var x=A[d];if(x===null)g===null&&(g=d);else if(g!==null){for(var y=d-g,v=A[g-1],N=(x-v)/(y+1),R=1;R<=y;R++)A[g+R-1]=N*R;g=null}}return r.map(function(S,P){var V=S.color;return{color:V,stop:Math.max(Math.min(1,A[P]/e),0)}})},CR=function(r,e,t){var s=e/2,A=t/2,l=Pt(r[0],e)-s,d=A-Pt(r[1],t);return(Math.atan2(d,l)+Math.PI*2)%(Math.PI*2)},ER=function(r,e,t){var s=typeof r=="number"?r:CR(r,e,t),A=Math.abs(e*Math.sin(s))+Math.abs(t*Math.cos(s)),l=e/2,d=t/2,u=A/2,f=Math.sin(s-Math.PI/2)*u,g=Math.cos(s-Math.PI/2)*u;return[A,l-g,l+g,d-f,d+f]},Cn=function(r,e){return Math.sqrt(r*r+e*e)},DC=function(r,e,t,s,A){var l=[[0,0],[0,e],[r,0],[r,e]];return l.reduce(function(d,u){var f=u[0],g=u[1],x=Cn(t-f,s-g);return(A?x<d.optimumDistance:x>d.optimumDistance)?{optimumCorner:u,optimumDistance:x}:d},{optimumDistance:A?1/0:-1/0,optimumCorner:null}).optimumCorner},NR=function(r,e,t,s,A){var l=0,d=0;switch(r.size){case 0:r.shape===0?l=d=Math.min(Math.abs(e),Math.abs(e-s),Math.abs(t),Math.abs(t-A)):r.shape===1&&(l=Math.min(Math.abs(e),Math.abs(e-s)),d=Math.min(Math.abs(t),Math.abs(t-A)));break;case 2:if(r.shape===0)l=d=Math.min(Cn(e,t),Cn(e,t-A),Cn(e-s,t),Cn(e-s,t-A));else if(r.shape===1){var u=Math.min(Math.abs(t),Math.abs(t-A))/Math.min(Math.abs(e),Math.abs(e-s)),f=DC(s,A,e,t,!0),g=f[0],x=f[1];l=Cn(g-e,(x-t)/u),d=u*l}break;case 1:r.shape===0?l=d=Math.max(Math.abs(e),Math.abs(e-s),Math.abs(t),Math.abs(t-A)):r.shape===1&&(l=Math.max(Math.abs(e),Math.abs(e-s)),d=Math.max(Math.abs(t),Math.abs(t-A)));break;case 3:if(r.shape===0)l=d=Math.max(Cn(e,t),Cn(e,t-A),Cn(e-s,t),Cn(e-s,t-A));else if(r.shape===1){var u=Math.max(Math.abs(t),Math.abs(t-A))/Math.max(Math.abs(e),Math.abs(e-s)),y=DC(s,A,e,t,!1),g=y[0],x=y[1];l=Cn(g-e,(x-t)/u),d=u*l}break}return Array.isArray(r.size)&&(l=Pt(r.size[0],s),d=r.size.length===2?Pt(r.size[1],A):l),[l,d]},SR=function(r,e){var t=dn(180),s=[];return Aa(e).forEach(function(A,l){if(l===0){var d=A[0];if(d.type===20&&d.value==="to"){t=SN(A);return}else if(NN(d)){t=Of.parse(r,d);return}}var u=Pf(r,A);s.push(u)}),{angle:t,stops:s,type:1}},dh=function(r,e){var t=dn(180),s=[];return Aa(e).forEach(function(A,l){if(l===0){var d=A[0];if(d.type===20&&["top","left","right","bottom"].indexOf(d.value)!==-1){t=SN(A);return}else if(NN(d)){t=(Of.parse(r,d)+dn(270))%dn(360);return}}var u=Pf(r,A);s.push(u)}),{angle:t,stops:s,type:1}},jR=function(r,e){var t=dn(180),s=[],A=1,l=0,d=3,u=[];return Aa(e).forEach(function(f,g){var x=f[0];if(g===0){if(Lt(x)&&x.value==="linear"){A=1;return}else if(Lt(x)&&x.value==="radial"){A=2;return}}if(x.type===18){if(x.name==="from"){var y=Mi.parse(r,x.values[0]);s.push({stop:es,color:y})}else if(x.name==="to"){var y=Mi.parse(r,x.values[0]);s.push({stop:Ti,color:y})}else if(x.name==="color-stop"){var v=x.values.filter(ll);if(v.length===2){var y=Mi.parse(r,v[1]),N=v[0];pl(N)&&s.push({stop:{type:16,number:N.number*100,flags:N.flags},color:y})}}}}),A===1?{angle:(t+dn(180))%dn(360),stops:s,type:A}:{size:d,shape:l,stops:s,position:u,type:A}},jN="closest-side",_N="farthest-side",TN="closest-corner",UN="farthest-corner",QN="circle",FN="ellipse",IN="cover",DN="contain",_R=function(r,e){var t=0,s=3,A=[],l=[];return Aa(e).forEach(function(d,u){var f=!0;if(u===0){var g=!1;f=d.reduce(function(y,v){if(g)if(Lt(v))switch(v.value){case"center":return l.push(K0),y;case"top":case"left":return l.push(es),y;case"right":case"bottom":return l.push(Ti),y}else(Nr(v)||qi(v))&&l.push(v);else if(Lt(v))switch(v.value){case QN:return t=0,!1;case FN:return t=1,!1;case"at":return g=!0,!1;case jN:return s=0,!1;case IN:case _N:return s=1,!1;case DN:case TN:return s=2,!1;case UN:return s=3,!1}else if(qi(v)||Nr(v))return Array.isArray(s)||(s=[]),s.push(v),!1;return y},f)}if(f){var x=Pf(r,d);A.push(x)}}),{size:s,shape:t,stops:A,position:l,type:2}},uh=function(r,e){var t=0,s=3,A=[],l=[];return Aa(e).forEach(function(d,u){var f=!0;if(u===0?f=d.reduce(function(x,y){if(Lt(y))switch(y.value){case"center":return l.push(K0),!1;case"top":case"left":return l.push(es),!1;case"right":case"bottom":return l.push(Ti),!1}else if(Nr(y)||qi(y))return l.push(y),!1;return x},f):u===1&&(f=d.reduce(function(x,y){if(Lt(y))switch(y.value){case QN:return t=0,!1;case FN:return t=1,!1;case DN:case jN:return s=0,!1;case _N:return s=1,!1;case TN:return s=2,!1;case IN:case UN:return s=3,!1}else if(qi(y)||Nr(y))return Array.isArray(s)||(s=[]),s.push(y),!1;return x},f)),f){var g=Pf(r,d);A.push(g)}}),{size:s,shape:t,stops:A,position:l,type:2}},TR=function(r){return r.type===1},UR=function(r){return r.type===2},G0={name:"image",parse:function(r,e){if(e.type===22){var t={url:e.value,type:0};return r.cache.addImage(e.value),t}if(e.type===18){var s=kN[e.name];if(typeof s>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return s(r,e.values)}throw new Error("Unsupported image type "+e.type)}};function QR(r){return!(r.type===20&&r.value==="none")&&(r.type!==18||!!kN[r.name])}var kN={"linear-gradient":SR,"-moz-linear-gradient":dh,"-ms-linear-gradient":dh,"-o-linear-gradient":dh,"-webkit-linear-gradient":dh,"radial-gradient":_R,"-moz-radial-gradient":uh,"-ms-radial-gradient":uh,"-o-radial-gradient":uh,"-webkit-radial-gradient":uh,"-webkit-gradient":jR},FR={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(r,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e.filter(function(s){return ll(s)&&QR(s)}).map(function(s){return G0.parse(r,s)})}},IR={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(r,e){return e.map(function(t){if(Lt(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},DR={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(r,e){return Aa(e).map(function(t){return t.filter(Nr)}).map(vN)}},kR={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(r,e){return Aa(e).map(function(t){return t.filter(Lt).map(function(s){return s.value}).join(" ")}).map(RR)}},RR=function(r){switch(r){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}},el;(function(r){r.AUTO="auto",r.CONTAIN="contain",r.COVER="cover"})(el||(el={}));var MR={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(r,e){return Aa(e).map(function(t){return t.filter(LR)})}},LR=function(r){return Lt(r)||Nr(r)},Vf=function(r){return{name:"border-"+r+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},HR=Vf("top"),OR=Vf("right"),PR=Vf("bottom"),VR=Vf("left"),zf=function(r){return{name:"border-radius-"+r,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return vN(t.filter(Nr))}}},zR=zf("top-left"),KR=zf("top-right"),GR=zf("bottom-right"),qR=zf("bottom-left"),Kf=function(r){return{name:"border-"+r+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},YR=Kf("top"),$R=Kf("right"),XR=Kf("bottom"),JR=Kf("left"),Gf=function(r){return{name:"border-"+r+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return vd(t)?t.number:0}}},WR=Gf("top"),ZR=Gf("right"),eM=Gf("bottom"),tM=Gf("left"),rM={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},sM={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(r,e){return e==="rtl"?1:0}},nM={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(r,e){return e.filter(Lt).reduce(function(t,s){return t|aM(s.value)},0)}},aM=function(r){switch(r){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},iM={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},AM={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(r,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},lf;(function(r){r.NORMAL="normal",r.STRICT="strict"})(lf||(lf={}));var oM={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){return e==="strict"?lf.STRICT:lf.NORMAL}},lM={name:"line-height",initialValue:"normal",prefix:!1,type:4},kC=function(r,e){return Lt(r)&&r.value==="normal"?1.2*e:r.type===17?e*r.number:Nr(r)?Pt(r,e):e},cM={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(r,e){return e.type===20&&e.value==="none"?null:G0.parse(r,e)}},dM={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(r,e){return e==="inside"?0:1}},Rx={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},qf=function(r){return{name:"margin-"+r,initialValue:"0",prefix:!1,type:4}},uM=qf("top"),hM=qf("right"),fM=qf("bottom"),mM=qf("left"),gM={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(r,e){return e.filter(Lt).map(function(t){switch(t.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}})}},pM={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){return e==="break-word"?"break-word":"normal"}},Yf=function(r){return{name:"padding-"+r,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},xM=Yf("top"),yM=Yf("right"),bM=Yf("bottom"),vM=Yf("left"),wM={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(r,e){switch(e){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},BM={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(r,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},CM={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(r,e){return e.length===1&&kx(e[0],"none")?[]:Aa(e).map(function(t){for(var s={color:Da.TRANSPARENT,offsetX:es,offsetY:es,blur:es},A=0,l=0;l<t.length;l++){var d=t[l];qi(d)?(A===0?s.offsetX=d:A===1?s.offsetY=d:s.blur=d,A++):s.color=Mi.parse(r,d)}return s})}},EM={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},NM={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(r,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var t=_M[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return t(e.values)}return null}},SM=function(r){var e=r.filter(function(t){return t.type===17}).map(function(t){return t.number});return e.length===6?e:null},jM=function(r){var e=r.filter(function(f){return f.type===17}).map(function(f){return f.number}),t=e[0],s=e[1];e[2],e[3];var A=e[4],l=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var d=e[12],u=e[13];return e[14],e[15],e.length===16?[t,s,A,l,d,u]:null},_M={matrix:SM,matrix3d:jM},RC={type:16,number:50,flags:bd},TM=[RC,RC],UM={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(r,e){var t=e.filter(Nr);return t.length!==2?TM:[t[0],t[1]]}},QM={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"hidden":return 1;case"collapse":return 2;default:return 0}}},zc;(function(r){r.NORMAL="normal",r.BREAK_ALL="break-all",r.KEEP_ALL="keep-all"})(zc||(zc={}));var FM={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"break-all":return zc.BREAK_ALL;case"keep-all":return zc.KEEP_ALL;default:return zc.NORMAL}}},IM={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(r,e){if(e.type===20)return{auto:!0,order:0};if(pl(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},RN={name:"time",parse:function(r,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},DM={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(r,e){return pl(e)?e.number:1}},kM={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},RM={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(r,e){return e.filter(Lt).map(function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(t){return t!==0})}},MM={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(r,e){var t=[],s=[];return e.forEach(function(A){switch(A.type){case 20:case 0:t.push(A.value);break;case 17:t.push(A.number.toString());break;case 4:s.push(t.join(" ")),t.length=0;break}}),t.length&&s.push(t.join(" ")),s.map(function(A){return A.indexOf(" ")===-1?A:"'"+A+"'"})}},LM={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},HM={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(r,e){return pl(e)?e.number:Lt(e)&&e.value==="bold"?700:400}},OM={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(r,e){return e.filter(Lt).map(function(t){return t.value})}},PM={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},Fr=function(r,e){return(r&e)!==0},VM={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(r,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e}},zM={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(r,e){if(e.length===0)return null;var t=e[0];if(t.type===20&&t.value==="none")return null;for(var s=[],A=e.filter(bN),l=0;l<A.length;l++){var d=A[l],u=A[l+1];if(d.type===20){var f=u&&pl(u)?u.number:1;s.push({counter:d.value,increment:f})}}return s}},KM={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(r,e){if(e.length===0)return[];for(var t=[],s=e.filter(bN),A=0;A<s.length;A++){var l=s[A],d=s[A+1];if(Lt(l)&&l.value!=="none"){var u=d&&pl(d)?d.number:0;t.push({counter:l.value,reset:u})}}return t}},GM={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(r,e){return e.filter(vd).map(function(t){return RN.parse(r,t)})}},qM={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(r,e){if(e.length===0)return null;var t=e[0];if(t.type===20&&t.value==="none")return null;var s=[],A=e.filter(yR);if(A.length%2!==0)return null;for(var l=0;l<A.length;l+=2){var d=A[l].value,u=A[l+1].value;s.push({open:d,close:u})}return s}},MC=function(r,e,t){if(!r)return"";var s=r[Math.min(e,r.length-1)];return s?t?s.open:s.close:""},YM={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(r,e){return e.length===1&&kx(e[0],"none")?[]:Aa(e).map(function(t){for(var s={color:255,offsetX:es,offsetY:es,blur:es,spread:es,inset:!1},A=0,l=0;l<t.length;l++){var d=t[l];kx(d,"inset")?s.inset=!0:qi(d)?(A===0?s.offsetX=d:A===1?s.offsetY=d:A===2?s.blur=d:s.spread=d,A++):s.color=Mi.parse(r,d)}return s})}},$M={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(r,e){var t=[0,1,2],s=[];return e.filter(Lt).forEach(function(A){switch(A.value){case"stroke":s.push(1);break;case"fill":s.push(0);break;case"markers":s.push(2);break}}),t.forEach(function(A){s.indexOf(A)===-1&&s.push(A)}),s}},XM={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},JM={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(r,e){return vd(e)?e.number:0}},WM=(function(){function r(e,t){var s,A;this.animationDuration=Te(e,GM,t.animationDuration),this.backgroundClip=Te(e,wR,t.backgroundClip),this.backgroundColor=Te(e,BR,t.backgroundColor),this.backgroundImage=Te(e,FR,t.backgroundImage),this.backgroundOrigin=Te(e,IR,t.backgroundOrigin),this.backgroundPosition=Te(e,DR,t.backgroundPosition),this.backgroundRepeat=Te(e,kR,t.backgroundRepeat),this.backgroundSize=Te(e,MR,t.backgroundSize),this.borderTopColor=Te(e,HR,t.borderTopColor),this.borderRightColor=Te(e,OR,t.borderRightColor),this.borderBottomColor=Te(e,PR,t.borderBottomColor),this.borderLeftColor=Te(e,VR,t.borderLeftColor),this.borderTopLeftRadius=Te(e,zR,t.borderTopLeftRadius),this.borderTopRightRadius=Te(e,KR,t.borderTopRightRadius),this.borderBottomRightRadius=Te(e,GR,t.borderBottomRightRadius),this.borderBottomLeftRadius=Te(e,qR,t.borderBottomLeftRadius),this.borderTopStyle=Te(e,YR,t.borderTopStyle),this.borderRightStyle=Te(e,$R,t.borderRightStyle),this.borderBottomStyle=Te(e,XR,t.borderBottomStyle),this.borderLeftStyle=Te(e,JR,t.borderLeftStyle),this.borderTopWidth=Te(e,WR,t.borderTopWidth),this.borderRightWidth=Te(e,ZR,t.borderRightWidth),this.borderBottomWidth=Te(e,eM,t.borderBottomWidth),this.borderLeftWidth=Te(e,tM,t.borderLeftWidth),this.boxShadow=Te(e,YM,t.boxShadow),this.color=Te(e,rM,t.color),this.direction=Te(e,sM,t.direction),this.display=Te(e,nM,t.display),this.float=Te(e,iM,t.cssFloat),this.fontFamily=Te(e,MM,t.fontFamily),this.fontSize=Te(e,LM,t.fontSize),this.fontStyle=Te(e,PM,t.fontStyle),this.fontVariant=Te(e,OM,t.fontVariant),this.fontWeight=Te(e,HM,t.fontWeight),this.letterSpacing=Te(e,AM,t.letterSpacing),this.lineBreak=Te(e,oM,t.lineBreak),this.lineHeight=Te(e,lM,t.lineHeight),this.listStyleImage=Te(e,cM,t.listStyleImage),this.listStylePosition=Te(e,dM,t.listStylePosition),this.listStyleType=Te(e,Rx,t.listStyleType),this.marginTop=Te(e,uM,t.marginTop),this.marginRight=Te(e,hM,t.marginRight),this.marginBottom=Te(e,fM,t.marginBottom),this.marginLeft=Te(e,mM,t.marginLeft),this.opacity=Te(e,DM,t.opacity);var l=Te(e,gM,t.overflow);this.overflowX=l[0],this.overflowY=l[l.length>1?1:0],this.overflowWrap=Te(e,pM,t.overflowWrap),this.paddingTop=Te(e,xM,t.paddingTop),this.paddingRight=Te(e,yM,t.paddingRight),this.paddingBottom=Te(e,bM,t.paddingBottom),this.paddingLeft=Te(e,vM,t.paddingLeft),this.paintOrder=Te(e,$M,t.paintOrder),this.position=Te(e,BM,t.position),this.textAlign=Te(e,wM,t.textAlign),this.textDecorationColor=Te(e,kM,(s=t.textDecorationColor)!==null&&s!==void 0?s:t.color),this.textDecorationLine=Te(e,RM,(A=t.textDecorationLine)!==null&&A!==void 0?A:t.textDecoration),this.textShadow=Te(e,CM,t.textShadow),this.textTransform=Te(e,EM,t.textTransform),this.transform=Te(e,NM,t.transform),this.transformOrigin=Te(e,UM,t.transformOrigin),this.visibility=Te(e,QM,t.visibility),this.webkitTextStrokeColor=Te(e,XM,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=Te(e,JM,t.webkitTextStrokeWidth),this.wordBreak=Te(e,FM,t.wordBreak),this.zIndex=Te(e,IM,t.zIndex)}return r.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},r.prototype.isTransparent=function(){return Li(this.backgroundColor)},r.prototype.isTransformed=function(){return this.transform!==null},r.prototype.isPositioned=function(){return this.position!==0},r.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},r.prototype.isFloating=function(){return this.float!==0},r.prototype.isInlineLevel=function(){return Fr(this.display,4)||Fr(this.display,33554432)||Fr(this.display,268435456)||Fr(this.display,536870912)||Fr(this.display,67108864)||Fr(this.display,134217728)},r})(),ZM=(function(){function r(e,t){this.content=Te(e,VM,t.content),this.quotes=Te(e,qM,t.quotes)}return r})(),LC=(function(){function r(e,t){this.counterIncrement=Te(e,zM,t.counterIncrement),this.counterReset=Te(e,KM,t.counterReset)}return r})(),Te=function(r,e,t){var s=new xN,A=t!==null&&typeof t<"u"?t.toString():e.initialValue;s.write(A);var l=new yN(s.read());switch(e.type){case 2:var d=l.parseComponentValue();return e.parse(r,Lt(d)?d.value:e.initialValue);case 0:return e.parse(r,l.parseComponentValue());case 1:return e.parse(r,l.parseComponentValues());case 4:return l.parseComponentValue();case 3:switch(e.format){case"angle":return Of.parse(r,l.parseComponentValue());case"color":return Mi.parse(r,l.parseComponentValue());case"image":return G0.parse(r,l.parseComponentValue());case"length":var u=l.parseComponentValue();return qi(u)?u:es;case"length-percentage":var f=l.parseComponentValue();return Nr(f)?f:es;case"time":return RN.parse(r,l.parseComponentValue())}break}},eL="data-html2canvas-debug",tL=function(r){var e=r.getAttribute(eL);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},Mx=function(r,e){var t=tL(r);return t===1||e===t},oa=(function(){function r(e,t){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,Mx(t,3))debugger;this.styles=new WM(e,window.getComputedStyle(t,null)),Ox(t)&&(this.styles.animationDuration.some(function(s){return s>0})&&(t.style.animationDuration="0s"),this.styles.transform!==null&&(t.style.transform="none")),this.bounds=Lf(this.context,t),Mx(t,4)&&(this.flags|=16)}return r})(),rL="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",HC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Uc=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var hh=0;hh<HC.length;hh++)Uc[HC.charCodeAt(hh)]=hh;var sL=function(r){var e=r.length*.75,t=r.length,s,A=0,l,d,u,f;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);var g=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),x=Array.isArray(g)?g:new Uint8Array(g);for(s=0;s<t;s+=4)l=Uc[r.charCodeAt(s)],d=Uc[r.charCodeAt(s+1)],u=Uc[r.charCodeAt(s+2)],f=Uc[r.charCodeAt(s+3)],x[A++]=l<<2|d>>4,x[A++]=(d&15)<<4|u>>2,x[A++]=(u&3)<<6|f&63;return g},nL=function(r){for(var e=r.length,t=[],s=0;s<e;s+=2)t.push(r[s+1]<<8|r[s]);return t},aL=function(r){for(var e=r.length,t=[],s=0;s<e;s+=4)t.push(r[s+3]<<24|r[s+2]<<16|r[s+1]<<8|r[s]);return t},UA=5,q0=11,pp=2,iL=q0-UA,MN=65536>>UA,AL=1<<UA,xp=AL-1,oL=1024>>UA,lL=MN+oL,cL=lL,dL=32,uL=cL+dL,hL=65536>>q0,fL=1<<iL,mL=fL-1,OC=function(r,e,t){return r.slice?r.slice(e,t):new Uint16Array(Array.prototype.slice.call(r,e,t))},gL=function(r,e,t){return r.slice?r.slice(e,t):new Uint32Array(Array.prototype.slice.call(r,e,t))},pL=function(r,e){var t=sL(r),s=Array.isArray(t)?aL(t):new Uint32Array(t),A=Array.isArray(t)?nL(t):new Uint16Array(t),l=24,d=OC(A,l/2,s[4]/2),u=s[5]===2?OC(A,(l+s[4])/2):gL(s,Math.ceil((l+s[4])/4));return new xL(s[0],s[1],s[2],s[3],d,u)},xL=(function(){function r(e,t,s,A,l,d){this.initialValue=e,this.errorValue=t,this.highStart=s,this.highValueIndex=A,this.index=l,this.data=d}return r.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>UA],t=(t<<pp)+(e&xp),this.data[t];if(e<=65535)return t=this.index[MN+(e-55296>>UA)],t=(t<<pp)+(e&xp),this.data[t];if(e<this.highStart)return t=uL-hL+(e>>q0),t=this.index[t],t+=e>>UA&mL,t=this.index[t],t=(t<<pp)+(e&xp),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},r})(),PC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",yL=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var fh=0;fh<PC.length;fh++)yL[PC.charCodeAt(fh)]=fh;var bL=1,yp=2,bp=3,VC=4,zC=5,vL=7,KC=8,vp=9,wp=10,GC=11,qC=12,YC=13,$C=14,Bp=15,wL=function(r){for(var e=[],t=0,s=r.length;t<s;){var A=r.charCodeAt(t++);if(A>=55296&&A<=56319&&t<s){var l=r.charCodeAt(t++);(l&64512)===56320?e.push(((A&1023)<<10)+(l&1023)+65536):(e.push(A),t--)}else e.push(A)}return e},BL=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,r);var t=r.length;if(!t)return"";for(var s=[],A=-1,l="";++A<t;){var d=r[A];d<=65535?s.push(d):(d-=65536,s.push((d>>10)+55296,d%1024+56320)),(A+1===t||s.length>16384)&&(l+=String.fromCharCode.apply(String,s),s.length=0)}return l},CL=pL(rL),An="",Cp="",EL=function(r){return CL.get(r)},NL=function(r,e,t){var s=t-2,A=e[s],l=e[t-1],d=e[t];if(l===yp&&d===bp)return An;if(l===yp||l===bp||l===VC||d===yp||d===bp||d===VC)return Cp;if(l===KC&&[KC,vp,GC,qC].indexOf(d)!==-1||(l===GC||l===vp)&&(d===vp||d===wp)||(l===qC||l===wp)&&d===wp||d===YC||d===zC||d===vL||l===bL)return An;if(l===YC&&d===$C){for(;A===zC;)A=e[--s];if(A===$C)return An}if(l===Bp&&d===Bp){for(var u=0;A===Bp;)u++,A=e[--s];if(u%2===0)return An}return Cp},SL=function(r){var e=wL(r),t=e.length,s=0,A=0,l=e.map(EL);return{next:function(){if(s>=t)return{done:!0,value:null};for(var d=An;s<t&&(d=NL(e,l,++s))===An;);if(d!==An||s===t){var u=BL.apply(null,e.slice(A,s));return A=s,{value:u,done:!1}}return{done:!0,value:null}}}},jL=function(r){for(var e=SL(r),t=[],s;!(s=e.next()).done;)s.value&&t.push(s.value.slice());return t},_L=function(r){var e=123;if(r.createRange){var t=r.createRange();if(t.getBoundingClientRect){var s=r.createElement("boundtest");s.style.height=e+"px",s.style.display="block",r.body.appendChild(s),t.selectNode(s);var A=t.getBoundingClientRect(),l=Math.round(A.height);if(r.body.removeChild(s),l===e)return!0}}return!1},TL=function(r){var e=r.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",r.body.appendChild(e);var t=r.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var s=e.firstChild,A=Hf(s.data).map(function(f){return gr(f)}),l=0,d={},u=A.every(function(f,g){t.setStart(s,l),t.setEnd(s,l+f.length);var x=t.getBoundingClientRect();l+=f.length;var y=x.x>d.x||x.y>d.y;return d=x,g===0?!0:y});return r.body.removeChild(e),u},UL=function(){return typeof new Image().crossOrigin<"u"},QL=function(){return typeof new XMLHttpRequest().responseType=="string"},FL=function(r){var e=new Image,t=r.createElement("canvas"),s=t.getContext("2d");if(!s)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{s.drawImage(e,0,0),t.toDataURL()}catch{return!1}return!0},XC=function(r){return r[0]===0&&r[1]===255&&r[2]===0&&r[3]===255},IL=function(r){var e=r.createElement("canvas"),t=100;e.width=t,e.height=t;var s=e.getContext("2d");if(!s)return Promise.reject(!1);s.fillStyle="rgb(0, 255, 0)",s.fillRect(0,0,t,t);var A=new Image,l=e.toDataURL();A.src=l;var d=Lx(t,t,0,0,A);return s.fillStyle="red",s.fillRect(0,0,t,t),JC(d).then(function(u){s.drawImage(u,0,0);var f=s.getImageData(0,0,t,t).data;s.fillStyle="red",s.fillRect(0,0,t,t);var g=r.createElement("div");return g.style.backgroundImage="url("+l+")",g.style.height=t+"px",XC(f)?JC(Lx(t,t,0,0,g)):Promise.reject(!1)}).then(function(u){return s.drawImage(u,0,0),XC(s.getImageData(0,0,t,t).data)}).catch(function(){return!1})},Lx=function(r,e,t,s,A){var l="http://www.w3.org/2000/svg",d=document.createElementNS(l,"svg"),u=document.createElementNS(l,"foreignObject");return d.setAttributeNS(null,"width",r.toString()),d.setAttributeNS(null,"height",e.toString()),u.setAttributeNS(null,"width","100%"),u.setAttributeNS(null,"height","100%"),u.setAttributeNS(null,"x",t.toString()),u.setAttributeNS(null,"y",s.toString()),u.setAttributeNS(null,"externalResourcesRequired","true"),d.appendChild(u),u.appendChild(A),d},JC=function(r){return new Promise(function(e,t){var s=new Image;s.onload=function(){return e(s)},s.onerror=t,s.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(r))})},Jr={get SUPPORT_RANGE_BOUNDS(){var r=_L(document);return Object.defineProperty(Jr,"SUPPORT_RANGE_BOUNDS",{value:r}),r},get SUPPORT_WORD_BREAKING(){var r=Jr.SUPPORT_RANGE_BOUNDS&&TL(document);return Object.defineProperty(Jr,"SUPPORT_WORD_BREAKING",{value:r}),r},get SUPPORT_SVG_DRAWING(){var r=FL(document);return Object.defineProperty(Jr,"SUPPORT_SVG_DRAWING",{value:r}),r},get SUPPORT_FOREIGNOBJECT_DRAWING(){var r=typeof Array.from=="function"&&typeof window.fetch=="function"?IL(document):Promise.resolve(!1);return Object.defineProperty(Jr,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:r}),r},get SUPPORT_CORS_IMAGES(){var r=UL();return Object.defineProperty(Jr,"SUPPORT_CORS_IMAGES",{value:r}),r},get SUPPORT_RESPONSE_TYPE(){var r=QL();return Object.defineProperty(Jr,"SUPPORT_RESPONSE_TYPE",{value:r}),r},get SUPPORT_CORS_XHR(){var r="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Jr,"SUPPORT_CORS_XHR",{value:r}),r},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var r=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Jr,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:r}),r}},Kc=(function(){function r(e,t){this.text=e,this.bounds=t}return r})(),DL=function(r,e,t,s){var A=ML(e,t),l=[],d=0;return A.forEach(function(u){if(t.textDecorationLine.length||u.trim().length>0)if(Jr.SUPPORT_RANGE_BOUNDS){var f=WC(s,d,u.length).getClientRects();if(f.length>1){var g=Y0(u),x=0;g.forEach(function(v){l.push(new Kc(v,Ha.fromDOMRectList(r,WC(s,x+d,v.length).getClientRects()))),x+=v.length})}else l.push(new Kc(u,Ha.fromDOMRectList(r,f)))}else{var y=s.splitText(u.length);l.push(new Kc(u,kL(r,s))),s=y}else Jr.SUPPORT_RANGE_BOUNDS||(s=s.splitText(u.length));d+=u.length}),l},kL=function(r,e){var t=e.ownerDocument;if(t){var s=t.createElement("html2canvaswrapper");s.appendChild(e.cloneNode(!0));var A=e.parentNode;if(A){A.replaceChild(s,e);var l=Lf(r,s);return s.firstChild&&A.replaceChild(s.firstChild,s),l}}return Ha.EMPTY},WC=function(r,e,t){var s=r.ownerDocument;if(!s)throw new Error("Node has no owner document");var A=s.createRange();return A.setStart(r,e),A.setEnd(r,e+t),A},Y0=function(r){if(Jr.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(r)).map(function(t){return t.segment})}return jL(r)},RL=function(r,e){if(Jr.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(t.segment(r)).map(function(s){return s.segment})}return HL(r,e)},ML=function(r,e){return e.letterSpacing!==0?Y0(r):RL(r,e)},LL=[32,160,4961,65792,65793,4153,4241],HL=function(r,e){for(var t=h3(r,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),s=[],A,l=function(){if(A.value){var d=A.value.slice(),u=Hf(d),f="";u.forEach(function(g){LL.indexOf(g)===-1?f+=gr(g):(f.length&&s.push(f),s.push(gr(g)),f="")}),f.length&&s.push(f)}};!(A=t.next()).done;)l();return s},OL=(function(){function r(e,t,s){this.text=PL(t.data,s.textTransform),this.textBounds=DL(e,this.text,s,t)}return r})(),PL=function(r,e){switch(e){case 1:return r.toLowerCase();case 3:return r.replace(VL,zL);case 2:return r.toUpperCase();default:return r}},VL=/(^|\s|:|-|\(|\))([a-z])/g,zL=function(r,e,t){return r.length>0?e+t.toUpperCase():r},LN=(function(r){Qn(e,r);function e(t,s){var A=r.call(this,t,s)||this;return A.src=s.currentSrc||s.src,A.intrinsicWidth=s.naturalWidth,A.intrinsicHeight=s.naturalHeight,A.context.cache.addImage(A.src),A}return e})(oa),HN=(function(r){Qn(e,r);function e(t,s){var A=r.call(this,t,s)||this;return A.canvas=s,A.intrinsicWidth=s.width,A.intrinsicHeight=s.height,A}return e})(oa),ON=(function(r){Qn(e,r);function e(t,s){var A=r.call(this,t,s)||this,l=new XMLSerializer,d=Lf(t,s);return s.setAttribute("width",d.width+"px"),s.setAttribute("height",d.height+"px"),A.svg="data:image/svg+xml,"+encodeURIComponent(l.serializeToString(s)),A.intrinsicWidth=s.width.baseVal.value,A.intrinsicHeight=s.height.baseVal.value,A.context.cache.addImage(A.svg),A}return e})(oa),PN=(function(r){Qn(e,r);function e(t,s){var A=r.call(this,t,s)||this;return A.value=s.value,A}return e})(oa),Hx=(function(r){Qn(e,r);function e(t,s){var A=r.call(this,t,s)||this;return A.start=s.start,A.reversed=typeof s.reversed=="boolean"&&s.reversed===!0,A}return e})(oa),KL=[{type:15,flags:0,unit:"px",number:3}],GL=[{type:16,flags:0,number:50}],qL=function(r){return r.width>r.height?new Ha(r.left+(r.width-r.height)/2,r.top,r.height,r.height):r.width<r.height?new Ha(r.left,r.top+(r.height-r.width)/2,r.width,r.width):r},YL=function(r){var e=r.type===$L?new Array(r.value.length+1).join(""):r.value;return e.length===0?r.placeholder||"":e},cf="checkbox",df="radio",$L="password",ZC=707406591,$0=(function(r){Qn(e,r);function e(t,s){var A=r.call(this,t,s)||this;switch(A.type=s.type.toLowerCase(),A.checked=s.checked,A.value=YL(s),(A.type===cf||A.type===df)&&(A.styles.backgroundColor=3739148031,A.styles.borderTopColor=A.styles.borderRightColor=A.styles.borderBottomColor=A.styles.borderLeftColor=2779096575,A.styles.borderTopWidth=A.styles.borderRightWidth=A.styles.borderBottomWidth=A.styles.borderLeftWidth=1,A.styles.borderTopStyle=A.styles.borderRightStyle=A.styles.borderBottomStyle=A.styles.borderLeftStyle=1,A.styles.backgroundClip=[0],A.styles.backgroundOrigin=[0],A.bounds=qL(A.bounds)),A.type){case cf:A.styles.borderTopRightRadius=A.styles.borderTopLeftRadius=A.styles.borderBottomRightRadius=A.styles.borderBottomLeftRadius=KL;break;case df:A.styles.borderTopRightRadius=A.styles.borderTopLeftRadius=A.styles.borderBottomRightRadius=A.styles.borderBottomLeftRadius=GL;break}return A}return e})(oa),VN=(function(r){Qn(e,r);function e(t,s){var A=r.call(this,t,s)||this,l=s.options[s.selectedIndex||0];return A.value=l&&l.text||"",A}return e})(oa),zN=(function(r){Qn(e,r);function e(t,s){var A=r.call(this,t,s)||this;return A.value=s.value,A}return e})(oa),KN=(function(r){Qn(e,r);function e(t,s){var A=r.call(this,t,s)||this;A.src=s.src,A.width=parseInt(s.width,10)||0,A.height=parseInt(s.height,10)||0,A.backgroundColor=A.styles.backgroundColor;try{if(s.contentWindow&&s.contentWindow.document&&s.contentWindow.document.documentElement){A.tree=qN(t,s.contentWindow.document.documentElement);var l=s.contentWindow.document.documentElement?Vc(t,getComputedStyle(s.contentWindow.document.documentElement).backgroundColor):Da.TRANSPARENT,d=s.contentWindow.document.body?Vc(t,getComputedStyle(s.contentWindow.document.body).backgroundColor):Da.TRANSPARENT;A.backgroundColor=Li(l)?Li(d)?A.styles.backgroundColor:d:l}}catch{}return A}return e})(oa),XL=["OL","UL","MENU"],Rh=function(r,e,t,s){for(var A=e.firstChild,l=void 0;A;A=l)if(l=A.nextSibling,YN(A)&&A.data.trim().length>0)t.textNodes.push(new OL(r,A,t.styles));else if(Go(A))if(WN(A)&&A.assignedNodes)A.assignedNodes().forEach(function(u){return Rh(r,u,t,s)});else{var d=GN(r,A);d.styles.isVisible()&&(JL(A,d,s)?d.flags|=4:WL(d.styles)&&(d.flags|=2),XL.indexOf(A.tagName)!==-1&&(d.flags|=8),t.elements.push(d),A.slot,A.shadowRoot?Rh(r,A.shadowRoot,d,s):!uf(A)&&!$N(A)&&!hf(A)&&Rh(r,A,d,s))}},GN=function(r,e){return Px(e)?new LN(r,e):XN(e)?new HN(r,e):$N(e)?new ON(r,e):ZL(e)?new PN(r,e):eH(e)?new Hx(r,e):tH(e)?new $0(r,e):hf(e)?new VN(r,e):uf(e)?new zN(r,e):JN(e)?new KN(r,e):new oa(r,e)},qN=function(r,e){var t=GN(r,e);return t.flags|=4,Rh(r,e,t,t),t},JL=function(r,e,t){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||X0(r)&&t.styles.isTransparent()},WL=function(r){return r.isPositioned()||r.isFloating()},YN=function(r){return r.nodeType===Node.TEXT_NODE},Go=function(r){return r.nodeType===Node.ELEMENT_NODE},Ox=function(r){return Go(r)&&typeof r.style<"u"&&!Mh(r)},Mh=function(r){return typeof r.className=="object"},ZL=function(r){return r.tagName==="LI"},eH=function(r){return r.tagName==="OL"},tH=function(r){return r.tagName==="INPUT"},rH=function(r){return r.tagName==="HTML"},$N=function(r){return r.tagName==="svg"},X0=function(r){return r.tagName==="BODY"},XN=function(r){return r.tagName==="CANVAS"},e1=function(r){return r.tagName==="VIDEO"},Px=function(r){return r.tagName==="IMG"},JN=function(r){return r.tagName==="IFRAME"},t1=function(r){return r.tagName==="STYLE"},sH=function(r){return r.tagName==="SCRIPT"},uf=function(r){return r.tagName==="TEXTAREA"},hf=function(r){return r.tagName==="SELECT"},WN=function(r){return r.tagName==="SLOT"},r1=function(r){return r.tagName.indexOf("-")>0},nH=(function(){function r(){this.counters={}}return r.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},r.prototype.getCounterValues=function(e){var t=this.counters[e];return t||[]},r.prototype.pop=function(e){var t=this;e.forEach(function(s){return t.counters[s].pop()})},r.prototype.parse=function(e){var t=this,s=e.counterIncrement,A=e.counterReset,l=!0;s!==null&&s.forEach(function(u){var f=t.counters[u.counter];f&&u.increment!==0&&(l=!1,f.length||f.push(1),f[Math.max(0,f.length-1)]+=u.increment)});var d=[];return l&&A.forEach(function(u){var f=t.counters[u.counter];d.push(u.counter),f||(f=t.counters[u.counter]=[]),f.push(u.reset)}),d},r})(),s1={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},n1={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},aH={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},iH={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Do=function(r,e,t,s,A,l){return r<e||r>t?id(r,A,l.length>0):s.integers.reduce(function(d,u,f){for(;r>=u;)r-=u,d+=s.values[f];return d},"")+l},ZN=function(r,e,t,s){var A="";do t||r--,A=s(r)+A,r/=e;while(r*e>=e);return A},mr=function(r,e,t,s,A){var l=t-e+1;return(r<0?"-":"")+(ZN(Math.abs(r),l,s,function(d){return gr(Math.floor(d%l)+e)})+A)},bA=function(r,e,t){t===void 0&&(t=". ");var s=e.length;return ZN(Math.abs(r),s,!1,function(A){return e[Math.floor(A%s)]})+t},zo=1,wi=2,Bi=4,Qc=8,Qa=function(r,e,t,s,A,l){if(r<-9999||r>9999)return id(r,4,A.length>0);var d=Math.abs(r),u=A;if(d===0)return e[0]+u;for(var f=0;d>0&&f<=4;f++){var g=d%10;g===0&&Fr(l,zo)&&u!==""?u=e[g]+u:g>1||g===1&&f===0||g===1&&f===1&&Fr(l,wi)||g===1&&f===1&&Fr(l,Bi)&&r>100||g===1&&f>1&&Fr(l,Qc)?u=e[g]+(f>0?t[f-1]:"")+u:g===1&&f>0&&(u=t[f-1]+u),d=Math.floor(d/10)}return(r<0?s:"")+u},a1="",i1="",A1="",Ep="",id=function(r,e,t){var s=t?". ":"",A=t?"":"",l=t?", ":"",d=t?" ":"";switch(e){case 0:return""+d;case 1:return""+d;case 2:return""+d;case 5:var u=mr(r,48,57,!0,s);return u.length<4?"0"+u:u;case 4:return bA(r,"",A);case 6:return Do(r,1,3999,s1,3,s).toLowerCase();case 7:return Do(r,1,3999,s1,3,s);case 8:return mr(r,945,969,!1,s);case 9:return mr(r,97,122,!1,s);case 10:return mr(r,65,90,!1,s);case 11:return mr(r,1632,1641,!0,s);case 12:case 49:return Do(r,1,9999,n1,3,s);case 35:return Do(r,1,9999,n1,3,s).toLowerCase();case 13:return mr(r,2534,2543,!0,s);case 14:case 30:return mr(r,6112,6121,!0,s);case 15:return bA(r,"",A);case 16:return bA(r,"",A);case 17:case 48:return Qa(r,"",a1,"",A,wi|Bi|Qc);case 47:return Qa(r,"",i1,"",A,zo|wi|Bi|Qc);case 42:return Qa(r,"",a1,"",A,wi|Bi|Qc);case 41:return Qa(r,"",i1,"",A,zo|wi|Bi|Qc);case 26:return Qa(r,"","",A1,A,0);case 25:return Qa(r,"","",A1,A,zo|wi|Bi);case 31:return Qa(r,"","",Ep,l,zo|wi|Bi);case 33:return Qa(r,"","",Ep,l,0);case 32:return Qa(r,"","",Ep,l,zo|wi|Bi);case 18:return mr(r,2406,2415,!0,s);case 20:return Do(r,1,19999,iH,3,s);case 21:return mr(r,2790,2799,!0,s);case 22:return mr(r,2662,2671,!0,s);case 22:return Do(r,1,10999,aH,3,s);case 23:return bA(r,"");case 24:return bA(r,"");case 27:return mr(r,3302,3311,!0,s);case 28:return bA(r,"",A);case 29:return bA(r,"",A);case 34:return mr(r,3792,3801,!0,s);case 37:return mr(r,6160,6169,!0,s);case 38:return mr(r,4160,4169,!0,s);case 39:return mr(r,2918,2927,!0,s);case 40:return mr(r,1776,1785,!0,s);case 43:return mr(r,3046,3055,!0,s);case 44:return mr(r,3174,3183,!0,s);case 45:return mr(r,3664,3673,!0,s);case 46:return mr(r,3872,3881,!0,s);default:return mr(r,48,57,!0,s)}},eS="data-html2canvas-ignore",o1=(function(){function r(e,t,s){if(this.context=e,this.options=s,this.scrolledElements=[],this.referenceElement=t,this.counters=new nH,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return r.prototype.toIFrame=function(e,t){var s=this,A=AH(e,t);if(!A.contentWindow)return Promise.reject("Unable to find iframe window");var l=e.defaultView.pageXOffset,d=e.defaultView.pageYOffset,u=A.contentWindow,f=u.document,g=cH(A).then(function(){return ys(s,void 0,void 0,function(){var x,y;return As(this,function(v){switch(v.label){case 0:return this.scrolledElements.forEach(fH),u&&(u.scrollTo(t.left,t.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(u.scrollY!==t.top||u.scrollX!==t.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(u.scrollX-t.left,u.scrollY-t.top,0,0))),x=this.options.onclone,y=this.clonedReferenceElement,typeof y>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:f.fonts&&f.fonts.ready?[4,f.fonts.ready]:[3,2];case 1:v.sent(),v.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,lH(f)]:[3,4];case 3:v.sent(),v.label=4;case 4:return typeof x=="function"?[2,Promise.resolve().then(function(){return x(f,y)}).then(function(){return A})]:[2,A]}})})});return f.open(),f.write(uH(document.doctype)+"<html></html>"),hH(this.referenceElement.ownerDocument,l,d),f.replaceChild(f.adoptNode(this.documentElement),f.documentElement),f.close(),g},r.prototype.createElementClone=function(e){if(Mx(e,2))debugger;if(XN(e))return this.createCanvasClone(e);if(e1(e))return this.createVideoClone(e);if(t1(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return Px(t)&&(Px(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),t.loading==="lazy"&&(t.loading="eager")),r1(t)?this.createCustomElementClone(t):t},r.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return Np(e.style,t),t},r.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var s=[].slice.call(t.cssRules,0).reduce(function(l,d){return d&&typeof d.cssText=="string"?l+d.cssText:l},""),A=e.cloneNode(!1);return A.textContent=s,A}}catch(l){if(this.context.logger.error("Unable to access cssRules property",l),l.name!=="SecurityError")throw l}return e.cloneNode(!1)},r.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var s=e.ownerDocument.createElement("img");try{return s.src=e.toDataURL(),s}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var A=e.cloneNode(!1);try{A.width=e.width,A.height=e.height;var l=e.getContext("2d"),d=A.getContext("2d");if(d)if(!this.options.allowTaint&&l)d.putImageData(l.getImageData(0,0,e.width,e.height),0,0);else{var u=(t=e.getContext("webgl2"))!==null&&t!==void 0?t:e.getContext("webgl");if(u){var f=u.getContextAttributes();f?.preserveDrawingBuffer===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}d.drawImage(e,0,0)}return A}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return A},r.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var s=t.getContext("2d");try{return s&&(s.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||s.getImageData(0,0,t.width,t.height)),t}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var A=e.ownerDocument.createElement("canvas");return A.width=e.offsetWidth,A.height=e.offsetHeight,A},r.prototype.appendChildNode=function(e,t,s){(!Go(t)||!sH(t)&&!t.hasAttribute(eS)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(t)))&&(!this.options.copyStyles||!Go(t)||!t1(t))&&e.appendChild(this.cloneNode(t,s))},r.prototype.cloneChildNodes=function(e,t,s){for(var A=this,l=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;l;l=l.nextSibling)if(Go(l)&&WN(l)&&typeof l.assignedNodes=="function"){var d=l.assignedNodes();d.length&&d.forEach(function(u){return A.appendChildNode(t,u,s)})}else this.appendChildNode(t,l,s)},r.prototype.cloneNode=function(e,t){if(YN(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var s=e.ownerDocument.defaultView;if(s&&Go(e)&&(Ox(e)||Mh(e))){var A=this.createElementClone(e);A.style.transitionProperty="none";var l=s.getComputedStyle(e),d=s.getComputedStyle(e,":before"),u=s.getComputedStyle(e,":after");this.referenceElement===e&&Ox(A)&&(this.clonedReferenceElement=A),X0(A)&&pH(A);var f=this.counters.parse(new LC(this.context,l)),g=this.resolvePseudoContent(e,A,d,Gc.BEFORE);r1(e)&&(t=!0),e1(e)||this.cloneChildNodes(e,A,t),g&&A.insertBefore(g,A.firstChild);var x=this.resolvePseudoContent(e,A,u,Gc.AFTER);return x&&A.appendChild(x),this.counters.pop(f),(l&&(this.options.copyStyles||Mh(e))&&!JN(e)||t)&&Np(l,A),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([A,e.scrollLeft,e.scrollTop]),(uf(e)||hf(e))&&(uf(A)||hf(A))&&(A.value=e.value),A}return e.cloneNode(!1)},r.prototype.resolvePseudoContent=function(e,t,s,A){var l=this;if(s){var d=s.content,u=t.ownerDocument;if(!(!u||!d||d==="none"||d==="-moz-alt-content"||s.display==="none")){this.counters.parse(new LC(this.context,s));var f=new ZM(this.context,s),g=u.createElement("html2canvaspseudoelement");Np(s,g),f.content.forEach(function(y){if(y.type===0)g.appendChild(u.createTextNode(y.value));else if(y.type===22){var v=u.createElement("img");v.src=y.value,v.style.opacity="1",g.appendChild(v)}else if(y.type===18){if(y.name==="attr"){var N=y.values.filter(Lt);N.length&&g.appendChild(u.createTextNode(e.getAttribute(N[0].value)||""))}else if(y.name==="counter"){var R=y.values.filter(ll),S=R[0],P=R[1];if(S&&Lt(S)){var V=l.counters.getCounterValue(S.value),$=P&&Lt(P)?Rx.parse(l.context,P.value):3;g.appendChild(u.createTextNode(id(V,$,!1)))}}else if(y.name==="counters"){var G=y.values.filter(ll),S=G[0],K=G[1],P=G[2];if(S&&Lt(S)){var Y=l.counters.getCounterValues(S.value),q=P&&Lt(P)?Rx.parse(l.context,P.value):3,E=K&&K.type===0?K.value:"",j=Y.map(function(_){return id(_,q,!1)}).join(E);g.appendChild(u.createTextNode(j))}}}else if(y.type===20)switch(y.value){case"open-quote":g.appendChild(u.createTextNode(MC(f.quotes,l.quoteDepth++,!0)));break;case"close-quote":g.appendChild(u.createTextNode(MC(f.quotes,--l.quoteDepth,!1)));break;default:g.appendChild(u.createTextNode(y.value))}}),g.className=Vx+" "+zx;var x=A===Gc.BEFORE?" "+Vx:" "+zx;return Mh(t)?t.className.baseValue+=x:t.className+=x,g}}},r.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},r})(),Gc;(function(r){r[r.BEFORE=0]="BEFORE",r[r.AFTER=1]="AFTER"})(Gc||(Gc={}));var AH=function(r,e){var t=r.createElement("iframe");return t.className="html2canvas-container",t.style.visibility="hidden",t.style.position="fixed",t.style.left="-10000px",t.style.top="0px",t.style.border="0",t.width=e.width.toString(),t.height=e.height.toString(),t.scrolling="no",t.setAttribute(eS,"true"),r.body.appendChild(t),t},oH=function(r){return new Promise(function(e){if(r.complete){e();return}if(!r.src){e();return}r.onload=e,r.onerror=e})},lH=function(r){return Promise.all([].slice.call(r.images,0).map(oH))},cH=function(r){return new Promise(function(e,t){var s=r.contentWindow;if(!s)return t("No window assigned for iframe");var A=s.document;s.onload=r.onload=function(){s.onload=r.onload=null;var l=setInterval(function(){A.body.childNodes.length>0&&A.readyState==="complete"&&(clearInterval(l),e(r))},50)}})},dH=["all","d","content"],Np=function(r,e){for(var t=r.length-1;t>=0;t--){var s=r.item(t);dH.indexOf(s)===-1&&e.style.setProperty(s,r.getPropertyValue(s))}return e},uH=function(r){var e="";return r&&(e+="<!DOCTYPE ",r.name&&(e+=r.name),r.internalSubset&&(e+=r.internalSubset),r.publicId&&(e+='"'+r.publicId+'"'),r.systemId&&(e+='"'+r.systemId+'"'),e+=">"),e},hH=function(r,e,t){r&&r.defaultView&&(e!==r.defaultView.pageXOffset||t!==r.defaultView.pageYOffset)&&r.defaultView.scrollTo(e,t)},fH=function(r){var e=r[0],t=r[1],s=r[2];e.scrollLeft=t,e.scrollTop=s},mH=":before",gH=":after",Vx="___html2canvas___pseudoelement_before",zx="___html2canvas___pseudoelement_after",l1=`{
    content: "" !important;
    display: none !important;
}`,pH=function(r){xH(r,"."+Vx+mH+l1+`
         .`+zx+gH+l1)},xH=function(r,e){var t=r.ownerDocument;if(t){var s=t.createElement("style");s.textContent=e,r.appendChild(s)}},tS=(function(){function r(){}return r.getOrigin=function(e){var t=r._link;return t?(t.href=e,t.href=t.href,t.protocol+t.hostname+t.port):"about:blank"},r.isSameOrigin=function(e){return r.getOrigin(e)===r._origin},r.setContext=function(e){r._link=e.document.createElement("a"),r._origin=r.getOrigin(e.location.href)},r._origin="about:blank",r})(),yH=(function(){function r(e,t){this.context=e,this._options=t,this._cache={}}return r.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)||(jp(e)||BH(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),t},r.prototype.match=function(e){return this._cache[e]},r.prototype.loadImage=function(e){return ys(this,void 0,void 0,function(){var t,s,A,l,d=this;return As(this,function(u){switch(u.label){case 0:return t=tS.isSameOrigin(e),s=!Sp(e)&&this._options.useCORS===!0&&Jr.SUPPORT_CORS_IMAGES&&!t,A=!Sp(e)&&!t&&!jp(e)&&typeof this._options.proxy=="string"&&Jr.SUPPORT_CORS_XHR&&!s,!t&&this._options.allowTaint===!1&&!Sp(e)&&!jp(e)&&!A&&!s?[2]:(l=e,A?[4,this.proxy(l)]:[3,2]);case 1:l=u.sent(),u.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(f,g){var x=new Image;x.onload=function(){return f(x)},x.onerror=g,(CH(l)||s)&&(x.crossOrigin="anonymous"),x.src=l,x.complete===!0&&setTimeout(function(){return f(x)},500),d._options.imageTimeout>0&&setTimeout(function(){return g("Timed out ("+d._options.imageTimeout+"ms) loading image")},d._options.imageTimeout)})];case 3:return[2,u.sent()]}})})},r.prototype.has=function(e){return typeof this._cache[e]<"u"},r.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},r.prototype.proxy=function(e){var t=this,s=this._options.proxy;if(!s)throw new Error("No proxy defined");var A=e.substring(0,256);return new Promise(function(l,d){var u=Jr.SUPPORT_RESPONSE_TYPE?"blob":"text",f=new XMLHttpRequest;f.onload=function(){if(f.status===200)if(u==="text")l(f.response);else{var y=new FileReader;y.addEventListener("load",function(){return l(y.result)},!1),y.addEventListener("error",function(v){return d(v)},!1),y.readAsDataURL(f.response)}else d("Failed to proxy resource "+A+" with status code "+f.status)},f.onerror=d;var g=s.indexOf("?")>-1?"&":"?";if(f.open("GET",""+s+g+"url="+encodeURIComponent(e)+"&responseType="+u),u!=="text"&&f instanceof XMLHttpRequest&&(f.responseType=u),t._options.imageTimeout){var x=t._options.imageTimeout;f.timeout=x,f.ontimeout=function(){return d("Timed out ("+x+"ms) proxying "+A)}}f.send()})},r})(),bH=/^data:image\/svg\+xml/i,vH=/^data:image\/.*;base64,/i,wH=/^data:image\/.*/i,BH=function(r){return Jr.SUPPORT_SVG_DRAWING||!EH(r)},Sp=function(r){return wH.test(r)},CH=function(r){return vH.test(r)},jp=function(r){return r.substr(0,4)==="blob"},EH=function(r){return r.substr(-3).toLowerCase()==="svg"||bH.test(r)},Se=(function(){function r(e,t){this.type=0,this.x=e,this.y=t}return r.prototype.add=function(e,t){return new r(this.x+e,this.y+t)},r})(),ko=function(r,e,t){return new Se(r.x+(e.x-r.x)*t,r.y+(e.y-r.y)*t)},mh=(function(){function r(e,t,s,A){this.type=1,this.start=e,this.startControl=t,this.endControl=s,this.end=A}return r.prototype.subdivide=function(e,t){var s=ko(this.start,this.startControl,e),A=ko(this.startControl,this.endControl,e),l=ko(this.endControl,this.end,e),d=ko(s,A,e),u=ko(A,l,e),f=ko(d,u,e);return t?new r(this.start,s,d,f):new r(f,u,l,this.end)},r.prototype.add=function(e,t){return new r(this.start.add(e,t),this.startControl.add(e,t),this.endControl.add(e,t),this.end.add(e,t))},r.prototype.reverse=function(){return new r(this.end,this.endControl,this.startControl,this.start)},r})(),on=function(r){return r.type===1},NH=(function(){function r(e){var t=e.styles,s=e.bounds,A=Tc(t.borderTopLeftRadius,s.width,s.height),l=A[0],d=A[1],u=Tc(t.borderTopRightRadius,s.width,s.height),f=u[0],g=u[1],x=Tc(t.borderBottomRightRadius,s.width,s.height),y=x[0],v=x[1],N=Tc(t.borderBottomLeftRadius,s.width,s.height),R=N[0],S=N[1],P=[];P.push((l+f)/s.width),P.push((R+y)/s.width),P.push((d+S)/s.height),P.push((g+v)/s.height);var V=Math.max.apply(Math,P);V>1&&(l/=V,d/=V,f/=V,g/=V,y/=V,v/=V,R/=V,S/=V);var $=s.width-f,G=s.height-v,K=s.width-y,Y=s.height-S,q=t.borderTopWidth,E=t.borderRightWidth,j=t.borderBottomWidth,B=t.borderLeftWidth,I=Pt(t.paddingTop,e.bounds.width),_=Pt(t.paddingRight,e.bounds.width),Q=Pt(t.paddingBottom,e.bounds.width),U=Pt(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=l>0||d>0?er(s.left+B/3,s.top+q/3,l-B/3,d-q/3,_t.TOP_LEFT):new Se(s.left+B/3,s.top+q/3),this.topRightBorderDoubleOuterBox=l>0||d>0?er(s.left+$,s.top+q/3,f-E/3,g-q/3,_t.TOP_RIGHT):new Se(s.left+s.width-E/3,s.top+q/3),this.bottomRightBorderDoubleOuterBox=y>0||v>0?er(s.left+K,s.top+G,y-E/3,v-j/3,_t.BOTTOM_RIGHT):new Se(s.left+s.width-E/3,s.top+s.height-j/3),this.bottomLeftBorderDoubleOuterBox=R>0||S>0?er(s.left+B/3,s.top+Y,R-B/3,S-j/3,_t.BOTTOM_LEFT):new Se(s.left+B/3,s.top+s.height-j/3),this.topLeftBorderDoubleInnerBox=l>0||d>0?er(s.left+B*2/3,s.top+q*2/3,l-B*2/3,d-q*2/3,_t.TOP_LEFT):new Se(s.left+B*2/3,s.top+q*2/3),this.topRightBorderDoubleInnerBox=l>0||d>0?er(s.left+$,s.top+q*2/3,f-E*2/3,g-q*2/3,_t.TOP_RIGHT):new Se(s.left+s.width-E*2/3,s.top+q*2/3),this.bottomRightBorderDoubleInnerBox=y>0||v>0?er(s.left+K,s.top+G,y-E*2/3,v-j*2/3,_t.BOTTOM_RIGHT):new Se(s.left+s.width-E*2/3,s.top+s.height-j*2/3),this.bottomLeftBorderDoubleInnerBox=R>0||S>0?er(s.left+B*2/3,s.top+Y,R-B*2/3,S-j*2/3,_t.BOTTOM_LEFT):new Se(s.left+B*2/3,s.top+s.height-j*2/3),this.topLeftBorderStroke=l>0||d>0?er(s.left+B/2,s.top+q/2,l-B/2,d-q/2,_t.TOP_LEFT):new Se(s.left+B/2,s.top+q/2),this.topRightBorderStroke=l>0||d>0?er(s.left+$,s.top+q/2,f-E/2,g-q/2,_t.TOP_RIGHT):new Se(s.left+s.width-E/2,s.top+q/2),this.bottomRightBorderStroke=y>0||v>0?er(s.left+K,s.top+G,y-E/2,v-j/2,_t.BOTTOM_RIGHT):new Se(s.left+s.width-E/2,s.top+s.height-j/2),this.bottomLeftBorderStroke=R>0||S>0?er(s.left+B/2,s.top+Y,R-B/2,S-j/2,_t.BOTTOM_LEFT):new Se(s.left+B/2,s.top+s.height-j/2),this.topLeftBorderBox=l>0||d>0?er(s.left,s.top,l,d,_t.TOP_LEFT):new Se(s.left,s.top),this.topRightBorderBox=f>0||g>0?er(s.left+$,s.top,f,g,_t.TOP_RIGHT):new Se(s.left+s.width,s.top),this.bottomRightBorderBox=y>0||v>0?er(s.left+K,s.top+G,y,v,_t.BOTTOM_RIGHT):new Se(s.left+s.width,s.top+s.height),this.bottomLeftBorderBox=R>0||S>0?er(s.left,s.top+Y,R,S,_t.BOTTOM_LEFT):new Se(s.left,s.top+s.height),this.topLeftPaddingBox=l>0||d>0?er(s.left+B,s.top+q,Math.max(0,l-B),Math.max(0,d-q),_t.TOP_LEFT):new Se(s.left+B,s.top+q),this.topRightPaddingBox=f>0||g>0?er(s.left+Math.min($,s.width-E),s.top+q,$>s.width+E?0:Math.max(0,f-E),Math.max(0,g-q),_t.TOP_RIGHT):new Se(s.left+s.width-E,s.top+q),this.bottomRightPaddingBox=y>0||v>0?er(s.left+Math.min(K,s.width-B),s.top+Math.min(G,s.height-j),Math.max(0,y-E),Math.max(0,v-j),_t.BOTTOM_RIGHT):new Se(s.left+s.width-E,s.top+s.height-j),this.bottomLeftPaddingBox=R>0||S>0?er(s.left+B,s.top+Math.min(Y,s.height-j),Math.max(0,R-B),Math.max(0,S-j),_t.BOTTOM_LEFT):new Se(s.left+B,s.top+s.height-j),this.topLeftContentBox=l>0||d>0?er(s.left+B+U,s.top+q+I,Math.max(0,l-(B+U)),Math.max(0,d-(q+I)),_t.TOP_LEFT):new Se(s.left+B+U,s.top+q+I),this.topRightContentBox=f>0||g>0?er(s.left+Math.min($,s.width+B+U),s.top+q+I,$>s.width+B+U?0:f-B+U,g-(q+I),_t.TOP_RIGHT):new Se(s.left+s.width-(E+_),s.top+q+I),this.bottomRightContentBox=y>0||v>0?er(s.left+Math.min(K,s.width-(B+U)),s.top+Math.min(G,s.height+q+I),Math.max(0,y-(E+_)),v-(j+Q),_t.BOTTOM_RIGHT):new Se(s.left+s.width-(E+_),s.top+s.height-(j+Q)),this.bottomLeftContentBox=R>0||S>0?er(s.left+B+U,s.top+Y,Math.max(0,R-(B+U)),S-(j+Q),_t.BOTTOM_LEFT):new Se(s.left+B+U,s.top+s.height-(j+Q))}return r})(),_t;(function(r){r[r.TOP_LEFT=0]="TOP_LEFT",r[r.TOP_RIGHT=1]="TOP_RIGHT",r[r.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",r[r.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(_t||(_t={}));var er=function(r,e,t,s,A){var l=4*((Math.sqrt(2)-1)/3),d=t*l,u=s*l,f=r+t,g=e+s;switch(A){case _t.TOP_LEFT:return new mh(new Se(r,g),new Se(r,g-u),new Se(f-d,e),new Se(f,e));case _t.TOP_RIGHT:return new mh(new Se(r,e),new Se(r+d,e),new Se(f,g-u),new Se(f,g));case _t.BOTTOM_RIGHT:return new mh(new Se(f,e),new Se(f,e+u),new Se(r+d,g),new Se(r,g));case _t.BOTTOM_LEFT:default:return new mh(new Se(f,g),new Se(f-d,g),new Se(r,e+u),new Se(r,e))}},ff=function(r){return[r.topLeftBorderBox,r.topRightBorderBox,r.bottomRightBorderBox,r.bottomLeftBorderBox]},SH=function(r){return[r.topLeftContentBox,r.topRightContentBox,r.bottomRightContentBox,r.bottomLeftContentBox]},mf=function(r){return[r.topLeftPaddingBox,r.topRightPaddingBox,r.bottomRightPaddingBox,r.bottomLeftPaddingBox]},jH=(function(){function r(e,t,s){this.offsetX=e,this.offsetY=t,this.matrix=s,this.type=0,this.target=6}return r})(),gh=(function(){function r(e,t){this.path=e,this.target=t,this.type=1}return r})(),_H=(function(){function r(e){this.opacity=e,this.type=2,this.target=6}return r})(),TH=function(r){return r.type===0},rS=function(r){return r.type===1},UH=function(r){return r.type===2},c1=function(r,e){return r.length===e.length?r.some(function(t,s){return t===e[s]}):!1},QH=function(r,e,t,s,A){return r.map(function(l,d){switch(d){case 0:return l.add(e,t);case 1:return l.add(e+s,t);case 2:return l.add(e+s,t+A);case 3:return l.add(e,t+A)}return l})},sS=(function(){function r(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return r})(),nS=(function(){function r(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new NH(this.container),this.container.styles.opacity<1&&this.effects.push(new _H(this.container.styles.opacity)),this.container.styles.transform!==null){var s=this.container.bounds.left+this.container.styles.transformOrigin[0].number,A=this.container.bounds.top+this.container.styles.transformOrigin[1].number,l=this.container.styles.transform;this.effects.push(new jH(s,A,l))}if(this.container.styles.overflowX!==0){var d=ff(this.curves),u=mf(this.curves);c1(d,u)?this.effects.push(new gh(d,6)):(this.effects.push(new gh(d,2)),this.effects.push(new gh(u,4)))}}return r.prototype.getEffects=function(e){for(var t=[2,3].indexOf(this.container.styles.position)===-1,s=this.parent,A=this.effects.slice(0);s;){var l=s.effects.filter(function(f){return!rS(f)});if(t||s.container.styles.position!==0||!s.parent){if(A.unshift.apply(A,l),t=[2,3].indexOf(s.container.styles.position)===-1,s.container.styles.overflowX!==0){var d=ff(s.curves),u=mf(s.curves);c1(d,u)||A.unshift(new gh(u,6))}}else A.unshift.apply(A,l);s=s.parent}return A.filter(function(f){return Fr(f.target,e)})},r})(),Kx=function(r,e,t,s){r.container.elements.forEach(function(A){var l=Fr(A.flags,4),d=Fr(A.flags,2),u=new nS(A,r);Fr(A.styles.display,2048)&&s.push(u);var f=Fr(A.flags,8)?[]:s;if(l||d){var g=l||A.styles.isPositioned()?t:e,x=new sS(u);if(A.styles.isPositioned()||A.styles.opacity<1||A.styles.isTransformed()){var y=A.styles.zIndex.order;if(y<0){var v=0;g.negativeZIndex.some(function(R,S){return y>R.element.container.styles.zIndex.order?(v=S,!1):v>0}),g.negativeZIndex.splice(v,0,x)}else if(y>0){var N=0;g.positiveZIndex.some(function(R,S){return y>=R.element.container.styles.zIndex.order?(N=S+1,!1):N>0}),g.positiveZIndex.splice(N,0,x)}else g.zeroOrAutoZIndexOrTransformedOrOpacity.push(x)}else A.styles.isFloating()?g.nonPositionedFloats.push(x):g.nonPositionedInlineLevel.push(x);Kx(u,x,l?x:t,f)}else A.styles.isInlineLevel()?e.inlineLevel.push(u):e.nonInlineLevel.push(u),Kx(u,e,t,f);Fr(A.flags,8)&&aS(A,f)})},aS=function(r,e){for(var t=r instanceof Hx?r.start:1,s=r instanceof Hx?r.reversed:!1,A=0;A<e.length;A++){var l=e[A];l.container instanceof PN&&typeof l.container.value=="number"&&l.container.value!==0&&(t=l.container.value),l.listValue=id(t,l.container.styles.listStyleType,!0),t+=s?-1:1}},FH=function(r){var e=new nS(r,null),t=new sS(e),s=[];return Kx(e,t,t,s),aS(e.container,s),t},d1=function(r,e){switch(e){case 0:return un(r.topLeftBorderBox,r.topLeftPaddingBox,r.topRightBorderBox,r.topRightPaddingBox);case 1:return un(r.topRightBorderBox,r.topRightPaddingBox,r.bottomRightBorderBox,r.bottomRightPaddingBox);case 2:return un(r.bottomRightBorderBox,r.bottomRightPaddingBox,r.bottomLeftBorderBox,r.bottomLeftPaddingBox);default:return un(r.bottomLeftBorderBox,r.bottomLeftPaddingBox,r.topLeftBorderBox,r.topLeftPaddingBox)}},IH=function(r,e){switch(e){case 0:return un(r.topLeftBorderBox,r.topLeftBorderDoubleOuterBox,r.topRightBorderBox,r.topRightBorderDoubleOuterBox);case 1:return un(r.topRightBorderBox,r.topRightBorderDoubleOuterBox,r.bottomRightBorderBox,r.bottomRightBorderDoubleOuterBox);case 2:return un(r.bottomRightBorderBox,r.bottomRightBorderDoubleOuterBox,r.bottomLeftBorderBox,r.bottomLeftBorderDoubleOuterBox);default:return un(r.bottomLeftBorderBox,r.bottomLeftBorderDoubleOuterBox,r.topLeftBorderBox,r.topLeftBorderDoubleOuterBox)}},DH=function(r,e){switch(e){case 0:return un(r.topLeftBorderDoubleInnerBox,r.topLeftPaddingBox,r.topRightBorderDoubleInnerBox,r.topRightPaddingBox);case 1:return un(r.topRightBorderDoubleInnerBox,r.topRightPaddingBox,r.bottomRightBorderDoubleInnerBox,r.bottomRightPaddingBox);case 2:return un(r.bottomRightBorderDoubleInnerBox,r.bottomRightPaddingBox,r.bottomLeftBorderDoubleInnerBox,r.bottomLeftPaddingBox);default:return un(r.bottomLeftBorderDoubleInnerBox,r.bottomLeftPaddingBox,r.topLeftBorderDoubleInnerBox,r.topLeftPaddingBox)}},kH=function(r,e){switch(e){case 0:return ph(r.topLeftBorderStroke,r.topRightBorderStroke);case 1:return ph(r.topRightBorderStroke,r.bottomRightBorderStroke);case 2:return ph(r.bottomRightBorderStroke,r.bottomLeftBorderStroke);default:return ph(r.bottomLeftBorderStroke,r.topLeftBorderStroke)}},ph=function(r,e){var t=[];return on(r)?t.push(r.subdivide(.5,!1)):t.push(r),on(e)?t.push(e.subdivide(.5,!0)):t.push(e),t},un=function(r,e,t,s){var A=[];return on(r)?A.push(r.subdivide(.5,!1)):A.push(r),on(t)?A.push(t.subdivide(.5,!0)):A.push(t),on(s)?A.push(s.subdivide(.5,!0).reverse()):A.push(s),on(e)?A.push(e.subdivide(.5,!1).reverse()):A.push(e),A},iS=function(r){var e=r.bounds,t=r.styles;return e.add(t.borderLeftWidth,t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth),-(t.borderTopWidth+t.borderBottomWidth))},gf=function(r){var e=r.styles,t=r.bounds,s=Pt(e.paddingLeft,t.width),A=Pt(e.paddingRight,t.width),l=Pt(e.paddingTop,t.width),d=Pt(e.paddingBottom,t.width);return t.add(s+e.borderLeftWidth,l+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+s+A),-(e.borderTopWidth+e.borderBottomWidth+l+d))},RH=function(r,e){return r===0?e.bounds:r===2?gf(e):iS(e)},MH=function(r,e){return r===0?e.bounds:r===2?gf(e):iS(e)},_p=function(r,e,t){var s=RH(Ko(r.styles.backgroundOrigin,e),r),A=MH(Ko(r.styles.backgroundClip,e),r),l=LH(Ko(r.styles.backgroundSize,e),t,s),d=l[0],u=l[1],f=Tc(Ko(r.styles.backgroundPosition,e),s.width-d,s.height-u),g=HH(Ko(r.styles.backgroundRepeat,e),f,l,s,A),x=Math.round(s.left+f[0]),y=Math.round(s.top+f[1]);return[g,x,y,d,u]},Ro=function(r){return Lt(r)&&r.value===el.AUTO},xh=function(r){return typeof r=="number"},LH=function(r,e,t){var s=e[0],A=e[1],l=e[2],d=r[0],u=r[1];if(!d)return[0,0];if(Nr(d)&&u&&Nr(u))return[Pt(d,t.width),Pt(u,t.height)];var f=xh(l);if(Lt(d)&&(d.value===el.CONTAIN||d.value===el.COVER)){if(xh(l)){var g=t.width/t.height;return g<l!=(d.value===el.COVER)?[t.width,t.width/l]:[t.height*l,t.height]}return[t.width,t.height]}var x=xh(s),y=xh(A),v=x||y;if(Ro(d)&&(!u||Ro(u))){if(x&&y)return[s,A];if(!f&&!v)return[t.width,t.height];if(v&&f){var N=x?s:A*l,R=y?A:s/l;return[N,R]}var S=x?s:t.width,P=y?A:t.height;return[S,P]}if(f){var V=0,$=0;return Nr(d)?V=Pt(d,t.width):Nr(u)&&($=Pt(u,t.height)),Ro(d)?V=$*l:(!u||Ro(u))&&($=V/l),[V,$]}var G=null,K=null;if(Nr(d)?G=Pt(d,t.width):u&&Nr(u)&&(K=Pt(u,t.height)),G!==null&&(!u||Ro(u))&&(K=x&&y?G/s*A:t.height),K!==null&&Ro(d)&&(G=x&&y?K/A*s:t.width),G!==null&&K!==null)return[G,K];throw new Error("Unable to calculate background-size for element")},Ko=function(r,e){var t=r[e];return typeof t>"u"?r[0]:t},HH=function(r,e,t,s,A){var l=e[0],d=e[1],u=t[0],f=t[1];switch(r){case 2:return[new Se(Math.round(s.left),Math.round(s.top+d)),new Se(Math.round(s.left+s.width),Math.round(s.top+d)),new Se(Math.round(s.left+s.width),Math.round(f+s.top+d)),new Se(Math.round(s.left),Math.round(f+s.top+d))];case 3:return[new Se(Math.round(s.left+l),Math.round(s.top)),new Se(Math.round(s.left+l+u),Math.round(s.top)),new Se(Math.round(s.left+l+u),Math.round(s.height+s.top)),new Se(Math.round(s.left+l),Math.round(s.height+s.top))];case 1:return[new Se(Math.round(s.left+l),Math.round(s.top+d)),new Se(Math.round(s.left+l+u),Math.round(s.top+d)),new Se(Math.round(s.left+l+u),Math.round(s.top+d+f)),new Se(Math.round(s.left+l),Math.round(s.top+d+f))];default:return[new Se(Math.round(A.left),Math.round(A.top)),new Se(Math.round(A.left+A.width),Math.round(A.top)),new Se(Math.round(A.left+A.width),Math.round(A.height+A.top)),new Se(Math.round(A.left),Math.round(A.height+A.top))]}},OH="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",u1="Hidden Text",PH=(function(){function r(e){this._data={},this._document=e}return r.prototype.parseMetrics=function(e,t){var s=this._document.createElement("div"),A=this._document.createElement("img"),l=this._document.createElement("span"),d=this._document.body;s.style.visibility="hidden",s.style.fontFamily=e,s.style.fontSize=t,s.style.margin="0",s.style.padding="0",s.style.whiteSpace="nowrap",d.appendChild(s),A.src=OH,A.width=1,A.height=1,A.style.margin="0",A.style.padding="0",A.style.verticalAlign="baseline",l.style.fontFamily=e,l.style.fontSize=t,l.style.margin="0",l.style.padding="0",l.appendChild(this._document.createTextNode(u1)),s.appendChild(l),s.appendChild(A);var u=A.offsetTop-l.offsetTop+2;s.removeChild(l),s.appendChild(this._document.createTextNode(u1)),s.style.lineHeight="normal",A.style.verticalAlign="super";var f=A.offsetTop-s.offsetTop+2;return d.removeChild(s),{baseline:u,middle:f}},r.prototype.getMetrics=function(e,t){var s=e+" "+t;return typeof this._data[s]>"u"&&(this._data[s]=this.parseMetrics(e,t)),this._data[s]},r})(),AS=(function(){function r(e,t){this.context=e,this.options=t}return r})(),VH=1e4,zH=(function(r){Qn(e,r);function e(t,s){var A=r.call(this,t,s)||this;return A._activeEffects=[],A.canvas=s.canvas?s.canvas:document.createElement("canvas"),A.ctx=A.canvas.getContext("2d"),s.canvas||(A.canvas.width=Math.floor(s.width*s.scale),A.canvas.height=Math.floor(s.height*s.scale),A.canvas.style.width=s.width+"px",A.canvas.style.height=s.height+"px"),A.fontMetrics=new PH(document),A.ctx.scale(A.options.scale,A.options.scale),A.ctx.translate(-s.x,-s.y),A.ctx.textBaseline="bottom",A._activeEffects=[],A.context.logger.debug("Canvas renderer initialized ("+s.width+"x"+s.height+") with scale "+s.scale),A}return e.prototype.applyEffects=function(t){for(var s=this;this._activeEffects.length;)this.popEffect();t.forEach(function(A){return s.applyEffect(A)})},e.prototype.applyEffect=function(t){this.ctx.save(),UH(t)&&(this.ctx.globalAlpha=t.opacity),TH(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),rS(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(t){return ys(this,void 0,void 0,function(){var s;return As(this,function(A){switch(A.label){case 0:return s=t.element.container.styles,s.isVisible()?[4,this.renderStackContent(t)]:[3,2];case 1:A.sent(),A.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(t){return ys(this,void 0,void 0,function(){return As(this,function(s){switch(s.label){case 0:if(Fr(t.container.flags,16))debugger;return t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return s.sent(),[4,this.renderNodeContent(t)];case 2:s.sent(),s.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(t,s,A){var l=this;if(s===0)this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+A);else{var d=Y0(t.text);d.reduce(function(u,f){return l.ctx.fillText(f,u,t.bounds.top+A),u+l.ctx.measureText(f).width},t.bounds.left)}},e.prototype.createFontStyle=function(t){var s=t.fontVariant.filter(function(d){return d==="normal"||d==="small-caps"}).join(""),A=$H(t.fontFamily).join(", "),l=vd(t.fontSize)?""+t.fontSize.number+t.fontSize.unit:t.fontSize.number+"px";return[[t.fontStyle,s,t.fontWeight,l,A].join(" "),A,l]},e.prototype.renderTextNode=function(t,s){return ys(this,void 0,void 0,function(){var A,l,d,u,f,g,x,y,v=this;return As(this,function(N){return A=this.createFontStyle(s),l=A[0],d=A[1],u=A[2],this.ctx.font=l,this.ctx.direction=s.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",f=this.fontMetrics.getMetrics(d,u),g=f.baseline,x=f.middle,y=s.paintOrder,t.textBounds.forEach(function(R){y.forEach(function(S){switch(S){case 0:v.ctx.fillStyle=Hr(s.color),v.renderTextWithLetterSpacing(R,s.letterSpacing,g);var P=s.textShadow;P.length&&R.text.trim().length&&(P.slice(0).reverse().forEach(function(V){v.ctx.shadowColor=Hr(V.color),v.ctx.shadowOffsetX=V.offsetX.number*v.options.scale,v.ctx.shadowOffsetY=V.offsetY.number*v.options.scale,v.ctx.shadowBlur=V.blur.number,v.renderTextWithLetterSpacing(R,s.letterSpacing,g)}),v.ctx.shadowColor="",v.ctx.shadowOffsetX=0,v.ctx.shadowOffsetY=0,v.ctx.shadowBlur=0),s.textDecorationLine.length&&(v.ctx.fillStyle=Hr(s.textDecorationColor||s.color),s.textDecorationLine.forEach(function(V){switch(V){case 1:v.ctx.fillRect(R.bounds.left,Math.round(R.bounds.top+g),R.bounds.width,1);break;case 2:v.ctx.fillRect(R.bounds.left,Math.round(R.bounds.top),R.bounds.width,1);break;case 3:v.ctx.fillRect(R.bounds.left,Math.ceil(R.bounds.top+x),R.bounds.width,1);break}}));break;case 1:s.webkitTextStrokeWidth&&R.text.trim().length&&(v.ctx.strokeStyle=Hr(s.webkitTextStrokeColor),v.ctx.lineWidth=s.webkitTextStrokeWidth,v.ctx.lineJoin=window.chrome?"miter":"round",v.ctx.strokeText(R.text,R.bounds.left,R.bounds.top+g)),v.ctx.strokeStyle="",v.ctx.lineWidth=0,v.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(t,s,A){if(A&&t.intrinsicWidth>0&&t.intrinsicHeight>0){var l=gf(t),d=mf(s);this.path(d),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(A,0,0,t.intrinsicWidth,t.intrinsicHeight,l.left,l.top,l.width,l.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(t){return ys(this,void 0,void 0,function(){var s,A,l,d,u,f,$,$,g,x,y,v,K,N,R,Y,S,P,V,$,G,K,Y;return As(this,function(q){switch(q.label){case 0:this.applyEffects(t.getEffects(4)),s=t.container,A=t.curves,l=s.styles,d=0,u=s.textNodes,q.label=1;case 1:return d<u.length?(f=u[d],[4,this.renderTextNode(f,l)]):[3,4];case 2:q.sent(),q.label=3;case 3:return d++,[3,1];case 4:if(!(s instanceof LN))return[3,8];q.label=5;case 5:return q.trys.push([5,7,,8]),[4,this.context.cache.match(s.src)];case 6:return $=q.sent(),this.renderReplacedElement(s,A,$),[3,8];case 7:return q.sent(),this.context.logger.error("Error loading image "+s.src),[3,8];case 8:if(s instanceof HN&&this.renderReplacedElement(s,A,s.canvas),!(s instanceof ON))return[3,12];q.label=9;case 9:return q.trys.push([9,11,,12]),[4,this.context.cache.match(s.svg)];case 10:return $=q.sent(),this.renderReplacedElement(s,A,$),[3,12];case 11:return q.sent(),this.context.logger.error("Error loading svg "+s.svg.substring(0,255)),[3,12];case 12:return s instanceof KN&&s.tree?(g=new e(this.context,{scale:this.options.scale,backgroundColor:s.backgroundColor,x:0,y:0,width:s.width,height:s.height}),[4,g.render(s.tree)]):[3,14];case 13:x=q.sent(),s.width&&s.height&&this.ctx.drawImage(x,0,0,s.width,s.height,s.bounds.left,s.bounds.top,s.bounds.width,s.bounds.height),q.label=14;case 14:if(s instanceof $0&&(y=Math.min(s.bounds.width,s.bounds.height),s.type===cf?s.checked&&(this.ctx.save(),this.path([new Se(s.bounds.left+y*.39363,s.bounds.top+y*.79),new Se(s.bounds.left+y*.16,s.bounds.top+y*.5549),new Se(s.bounds.left+y*.27347,s.bounds.top+y*.44071),new Se(s.bounds.left+y*.39694,s.bounds.top+y*.5649),new Se(s.bounds.left+y*.72983,s.bounds.top+y*.23),new Se(s.bounds.left+y*.84,s.bounds.top+y*.34085),new Se(s.bounds.left+y*.39363,s.bounds.top+y*.79)]),this.ctx.fillStyle=Hr(ZC),this.ctx.fill(),this.ctx.restore()):s.type===df&&s.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(s.bounds.left+y/2,s.bounds.top+y/2,y/4,0,Math.PI*2,!0),this.ctx.fillStyle=Hr(ZC),this.ctx.fill(),this.ctx.restore())),KH(s)&&s.value.length){switch(v=this.createFontStyle(l),K=v[0],N=v[1],R=this.fontMetrics.getMetrics(K,N).baseline,this.ctx.font=K,this.ctx.fillStyle=Hr(l.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=qH(s.styles.textAlign),Y=gf(s),S=0,s.styles.textAlign){case 1:S+=Y.width/2;break;case 2:S+=Y.width;break}P=Y.add(S,0,0,-Y.height/2+1),this.ctx.save(),this.path([new Se(Y.left,Y.top),new Se(Y.left+Y.width,Y.top),new Se(Y.left+Y.width,Y.top+Y.height),new Se(Y.left,Y.top+Y.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Kc(s.value,P),l.letterSpacing,R),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Fr(s.styles.display,2048))return[3,20];if(s.styles.listStyleImage===null)return[3,19];if(V=s.styles.listStyleImage,V.type!==0)return[3,18];$=void 0,G=V.url,q.label=15;case 15:return q.trys.push([15,17,,18]),[4,this.context.cache.match(G)];case 16:return $=q.sent(),this.ctx.drawImage($,s.bounds.left-($.width+10),s.bounds.top),[3,18];case 17:return q.sent(),this.context.logger.error("Error loading list-style-image "+G),[3,18];case 18:return[3,20];case 19:t.listValue&&s.styles.listStyleType!==-1&&(K=this.createFontStyle(l)[0],this.ctx.font=K,this.ctx.fillStyle=Hr(l.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",Y=new Ha(s.bounds.left,s.bounds.top+Pt(s.styles.paddingTop,s.bounds.width),s.bounds.width,kC(l.lineHeight,l.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Kc(t.listValue,Y),l.letterSpacing,kC(l.lineHeight,l.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),q.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(t){return ys(this,void 0,void 0,function(){var s,A,V,l,d,V,u,f,V,g,x,V,y,v,V,N,R,V,S,P,V;return As(this,function($){switch($.label){case 0:if(Fr(t.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:$.sent(),s=0,A=t.negativeZIndex,$.label=2;case 2:return s<A.length?(V=A[s],[4,this.renderStack(V)]):[3,5];case 3:$.sent(),$.label=4;case 4:return s++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:$.sent(),l=0,d=t.nonInlineLevel,$.label=7;case 7:return l<d.length?(V=d[l],[4,this.renderNode(V)]):[3,10];case 8:$.sent(),$.label=9;case 9:return l++,[3,7];case 10:u=0,f=t.nonPositionedFloats,$.label=11;case 11:return u<f.length?(V=f[u],[4,this.renderStack(V)]):[3,14];case 12:$.sent(),$.label=13;case 13:return u++,[3,11];case 14:g=0,x=t.nonPositionedInlineLevel,$.label=15;case 15:return g<x.length?(V=x[g],[4,this.renderStack(V)]):[3,18];case 16:$.sent(),$.label=17;case 17:return g++,[3,15];case 18:y=0,v=t.inlineLevel,$.label=19;case 19:return y<v.length?(V=v[y],[4,this.renderNode(V)]):[3,22];case 20:$.sent(),$.label=21;case 21:return y++,[3,19];case 22:N=0,R=t.zeroOrAutoZIndexOrTransformedOrOpacity,$.label=23;case 23:return N<R.length?(V=R[N],[4,this.renderStack(V)]):[3,26];case 24:$.sent(),$.label=25;case 25:return N++,[3,23];case 26:S=0,P=t.positiveZIndex,$.label=27;case 27:return S<P.length?(V=P[S],[4,this.renderStack(V)]):[3,30];case 28:$.sent(),$.label=29;case 29:return S++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},e.prototype.formatPath=function(t){var s=this;t.forEach(function(A,l){var d=on(A)?A.start:A;l===0?s.ctx.moveTo(d.x,d.y):s.ctx.lineTo(d.x,d.y),on(A)&&s.ctx.bezierCurveTo(A.startControl.x,A.startControl.y,A.endControl.x,A.endControl.y,A.end.x,A.end.y)})},e.prototype.renderRepeat=function(t,s,A,l){this.path(t),this.ctx.fillStyle=s,this.ctx.translate(A,l),this.ctx.fill(),this.ctx.translate(-A,-l)},e.prototype.resizeImage=function(t,s,A){var l;if(t.width===s&&t.height===A)return t;var d=(l=this.canvas.ownerDocument)!==null&&l!==void 0?l:document,u=d.createElement("canvas");u.width=Math.max(1,s),u.height=Math.max(1,A);var f=u.getContext("2d");return f.drawImage(t,0,0,t.width,t.height,0,0,s,A),u},e.prototype.renderBackgroundImage=function(t){return ys(this,void 0,void 0,function(){var s,A,l,d,u,f;return As(this,function(g){switch(g.label){case 0:s=t.styles.backgroundImage.length-1,A=function(x){var y,v,N,I,M,F,U,T,j,R,I,M,F,U,T,S,P,V,$,G,K,Y,q,E,j,B,I,_,Q,U,T,W,M,F,z,ne,te,O,J,Ae,me,Ee;return As(this,function(Be){switch(Be.label){case 0:if(x.type!==0)return[3,5];y=void 0,v=x.url,Be.label=1;case 1:return Be.trys.push([1,3,,4]),[4,l.context.cache.match(v)];case 2:return y=Be.sent(),[3,4];case 3:return Be.sent(),l.context.logger.error("Error loading background-image "+v),[3,4];case 4:return y&&(N=_p(t,s,[y.width,y.height,y.width/y.height]),I=N[0],M=N[1],F=N[2],U=N[3],T=N[4],j=l.ctx.createPattern(l.resizeImage(y,U,T),"repeat"),l.renderRepeat(I,j,M,F)),[3,6];case 5:TR(x)?(R=_p(t,s,[null,null,null]),I=R[0],M=R[1],F=R[2],U=R[3],T=R[4],S=ER(x.angle,U,T),P=S[0],V=S[1],$=S[2],G=S[3],K=S[4],Y=document.createElement("canvas"),Y.width=U,Y.height=T,q=Y.getContext("2d"),E=q.createLinearGradient(V,G,$,K),IC(x.stops,P).forEach(function(Ue){return E.addColorStop(Ue.stop,Hr(Ue.color))}),q.fillStyle=E,q.fillRect(0,0,U,T),U>0&&T>0&&(j=l.ctx.createPattern(Y,"repeat"),l.renderRepeat(I,j,M,F))):UR(x)&&(B=_p(t,s,[null,null,null]),I=B[0],_=B[1],Q=B[2],U=B[3],T=B[4],W=x.position.length===0?[K0]:x.position,M=Pt(W[0],U),F=Pt(W[W.length-1],T),z=NR(x,M,F,U,T),ne=z[0],te=z[1],ne>0&&te>0&&(O=l.ctx.createRadialGradient(_+M,Q+F,0,_+M,Q+F,ne),IC(x.stops,ne*2).forEach(function(Ue){return O.addColorStop(Ue.stop,Hr(Ue.color))}),l.path(I),l.ctx.fillStyle=O,ne!==te?(J=t.bounds.left+.5*t.bounds.width,Ae=t.bounds.top+.5*t.bounds.height,me=te/ne,Ee=1/me,l.ctx.save(),l.ctx.translate(J,Ae),l.ctx.transform(1,0,0,me,0,0),l.ctx.translate(-J,-Ae),l.ctx.fillRect(_,Ee*(Q-Ae)+Ae,U,T*Ee),l.ctx.restore()):l.ctx.fill())),Be.label=6;case 6:return s--,[2]}})},l=this,d=0,u=t.styles.backgroundImage.slice(0).reverse(),g.label=1;case 1:return d<u.length?(f=u[d],[5,A(f)]):[3,4];case 2:g.sent(),g.label=3;case 3:return d++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(t,s,A){return ys(this,void 0,void 0,function(){return As(this,function(l){return this.path(d1(A,s)),this.ctx.fillStyle=Hr(t),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(t,s,A,l){return ys(this,void 0,void 0,function(){var d,u;return As(this,function(f){switch(f.label){case 0:return s<3?[4,this.renderSolidBorder(t,A,l)]:[3,2];case 1:return f.sent(),[2];case 2:return d=IH(l,A),this.path(d),this.ctx.fillStyle=Hr(t),this.ctx.fill(),u=DH(l,A),this.path(u),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(t){return ys(this,void 0,void 0,function(){var s,A,l,d,u,f,g,x,y=this;return As(this,function(v){switch(v.label){case 0:return this.applyEffects(t.getEffects(2)),s=t.container.styles,A=!Li(s.backgroundColor)||s.backgroundImage.length,l=[{style:s.borderTopStyle,color:s.borderTopColor,width:s.borderTopWidth},{style:s.borderRightStyle,color:s.borderRightColor,width:s.borderRightWidth},{style:s.borderBottomStyle,color:s.borderBottomColor,width:s.borderBottomWidth},{style:s.borderLeftStyle,color:s.borderLeftColor,width:s.borderLeftWidth}],d=GH(Ko(s.backgroundClip,0),t.curves),A||s.boxShadow.length?(this.ctx.save(),this.path(d),this.ctx.clip(),Li(s.backgroundColor)||(this.ctx.fillStyle=Hr(s.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:v.sent(),this.ctx.restore(),s.boxShadow.slice(0).reverse().forEach(function(N){y.ctx.save();var R=ff(t.curves),S=N.inset?0:VH,P=QH(R,-S+(N.inset?1:-1)*N.spread.number,(N.inset?1:-1)*N.spread.number,N.spread.number*(N.inset?-2:2),N.spread.number*(N.inset?-2:2));N.inset?(y.path(R),y.ctx.clip(),y.mask(P)):(y.mask(R),y.ctx.clip(),y.path(P)),y.ctx.shadowOffsetX=N.offsetX.number+S,y.ctx.shadowOffsetY=N.offsetY.number,y.ctx.shadowColor=Hr(N.color),y.ctx.shadowBlur=N.blur.number,y.ctx.fillStyle=N.inset?Hr(N.color):"rgba(0,0,0,1)",y.ctx.fill(),y.ctx.restore()}),v.label=2;case 2:u=0,f=0,g=l,v.label=3;case 3:return f<g.length?(x=g[f],x.style!==0&&!Li(x.color)&&x.width>0?x.style!==2?[3,5]:[4,this.renderDashedDottedBorder(x.color,x.width,u,t.curves,2)]:[3,11]):[3,13];case 4:return v.sent(),[3,11];case 5:return x.style!==3?[3,7]:[4,this.renderDashedDottedBorder(x.color,x.width,u,t.curves,3)];case 6:return v.sent(),[3,11];case 7:return x.style!==4?[3,9]:[4,this.renderDoubleBorder(x.color,x.width,u,t.curves)];case 8:return v.sent(),[3,11];case 9:return[4,this.renderSolidBorder(x.color,u,t.curves)];case 10:v.sent(),v.label=11;case 11:u++,v.label=12;case 12:return f++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(t,s,A,l,d){return ys(this,void 0,void 0,function(){var u,f,g,x,y,v,N,R,S,P,V,$,G,K,Y,q,Y,q;return As(this,function(E){return this.ctx.save(),u=kH(l,A),f=d1(l,A),d===2&&(this.path(f),this.ctx.clip()),on(f[0])?(g=f[0].start.x,x=f[0].start.y):(g=f[0].x,x=f[0].y),on(f[1])?(y=f[1].end.x,v=f[1].end.y):(y=f[1].x,v=f[1].y),A===0||A===2?N=Math.abs(g-y):N=Math.abs(x-v),this.ctx.beginPath(),d===3?this.formatPath(u):this.formatPath(f.slice(0,2)),R=s<3?s*3:s*2,S=s<3?s*2:s,d===3&&(R=s,S=s),P=!0,N<=R*2?P=!1:N<=R*2+S?(V=N/(2*R+S),R*=V,S*=V):($=Math.floor((N+S)/(R+S)),G=(N-$*R)/($-1),K=(N-($+1)*R)/$,S=K<=0||Math.abs(S-G)<Math.abs(S-K)?G:K),P&&(d===3?this.ctx.setLineDash([0,R+S]):this.ctx.setLineDash([R,S])),d===3?(this.ctx.lineCap="round",this.ctx.lineWidth=s):this.ctx.lineWidth=s*2+1.1,this.ctx.strokeStyle=Hr(t),this.ctx.stroke(),this.ctx.setLineDash([]),d===2&&(on(f[0])&&(Y=f[3],q=f[0],this.ctx.beginPath(),this.formatPath([new Se(Y.end.x,Y.end.y),new Se(q.start.x,q.start.y)]),this.ctx.stroke()),on(f[1])&&(Y=f[1],q=f[2],this.ctx.beginPath(),this.formatPath([new Se(Y.end.x,Y.end.y),new Se(q.start.x,q.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(t){return ys(this,void 0,void 0,function(){var s;return As(this,function(A){switch(A.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Hr(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),s=FH(t),[4,this.renderStack(s)];case 1:return A.sent(),this.applyEffects([]),[2,this.canvas]}})})},e})(AS),KH=function(r){return r instanceof zN||r instanceof VN?!0:r instanceof $0&&r.type!==df&&r.type!==cf},GH=function(r,e){switch(r){case 0:return ff(e);case 2:return SH(e);default:return mf(e)}},qH=function(r){switch(r){case 1:return"center";case 2:return"right";default:return"left"}},YH=["-apple-system","system-ui"],$H=function(r){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?r.filter(function(e){return YH.indexOf(e)===-1}):r},XH=(function(r){Qn(e,r);function e(t,s){var A=r.call(this,t,s)||this;return A.canvas=s.canvas?s.canvas:document.createElement("canvas"),A.ctx=A.canvas.getContext("2d"),A.options=s,A.canvas.width=Math.floor(s.width*s.scale),A.canvas.height=Math.floor(s.height*s.scale),A.canvas.style.width=s.width+"px",A.canvas.style.height=s.height+"px",A.ctx.scale(A.options.scale,A.options.scale),A.ctx.translate(-s.x,-s.y),A.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+s.width+"x"+s.height+" at "+s.x+","+s.y+") with scale "+s.scale),A}return e.prototype.render=function(t){return ys(this,void 0,void 0,function(){var s,A;return As(this,function(l){switch(l.label){case 0:return s=Lx(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,JH(s)];case 1:return A=l.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Hr(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(A,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e})(AS),JH=function(r){return new Promise(function(e,t){var s=new Image;s.onload=function(){e(s)},s.onerror=t,s.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(r))})},WH=(function(){function r(e){var t=e.id,s=e.enabled;this.id=t,this.enabled=s,this.start=Date.now()}return r.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Xu([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},r.prototype.getTime=function(){return Date.now()-this.start},r.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Xu([this.id,this.getTime()+"ms"],e))},r.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Xu([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},r.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Xu([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},r.instances={},r})(),ZH=(function(){function r(e,t){var s;this.windowBounds=t,this.instanceName="#"+r.instanceCount++,this.logger=new WH({id:this.instanceName,enabled:e.logging}),this.cache=(s=e.cache)!==null&&s!==void 0?s:new yH(this,e)}return r.instanceCount=1,r})(),eO=function(r,e){return e===void 0&&(e={}),tO(r,e)};typeof window<"u"&&tS.setContext(window);var tO=function(r,e){return ys(void 0,void 0,void 0,function(){var t,s,A,l,d,u,f,g,x,y,v,N,R,S,P,V,$,G,K,Y,E,q,E,j,B,I,_,Q,U,T,W,M,F,z,ne,te,O,J,Ae,me;return As(this,function(Ee){switch(Ee.label){case 0:if(!r||typeof r!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(t=r.ownerDocument,!t)throw new Error("Element is not attached to a Document");if(s=t.defaultView,!s)throw new Error("Document is not attached to a Window");return A={allowTaint:(j=e.allowTaint)!==null&&j!==void 0?j:!1,imageTimeout:(B=e.imageTimeout)!==null&&B!==void 0?B:15e3,proxy:e.proxy,useCORS:(I=e.useCORS)!==null&&I!==void 0?I:!1},l=Cx({logging:(_=e.logging)!==null&&_!==void 0?_:!0,cache:e.cache},A),d={windowWidth:(Q=e.windowWidth)!==null&&Q!==void 0?Q:s.innerWidth,windowHeight:(U=e.windowHeight)!==null&&U!==void 0?U:s.innerHeight,scrollX:(T=e.scrollX)!==null&&T!==void 0?T:s.pageXOffset,scrollY:(W=e.scrollY)!==null&&W!==void 0?W:s.pageYOffset},u=new Ha(d.scrollX,d.scrollY,d.windowWidth,d.windowHeight),f=new ZH(l,u),g=(M=e.foreignObjectRendering)!==null&&M!==void 0?M:!1,x={allowTaint:(F=e.allowTaint)!==null&&F!==void 0?F:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:g,copyStyles:g},f.logger.debug("Starting document clone with size "+u.width+"x"+u.height+" scrolled to "+-u.left+","+-u.top),y=new o1(f,r,x),v=y.clonedReferenceElement,v?[4,y.toIFrame(t,u)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return N=Ee.sent(),R=X0(v)||rH(v)?Qk(v.ownerDocument):Lf(f,v),S=R.width,P=R.height,V=R.left,$=R.top,G=rO(f,v,e.backgroundColor),K={canvas:e.canvas,backgroundColor:G,scale:(ne=(z=e.scale)!==null&&z!==void 0?z:s.devicePixelRatio)!==null&&ne!==void 0?ne:1,x:((te=e.x)!==null&&te!==void 0?te:0)+V,y:((O=e.y)!==null&&O!==void 0?O:0)+$,width:(J=e.width)!==null&&J!==void 0?J:Math.ceil(S),height:(Ae=e.height)!==null&&Ae!==void 0?Ae:Math.ceil(P)},g?(f.logger.debug("Document cloned, using foreign object rendering"),E=new XH(f,K),[4,E.render(v)]):[3,3];case 2:return Y=Ee.sent(),[3,5];case 3:return f.logger.debug("Document cloned, element located at "+V+","+$+" with size "+S+"x"+P+" using computed rendering"),f.logger.debug("Starting DOM parsing"),q=qN(f,v),G===q.styles.backgroundColor&&(q.styles.backgroundColor=Da.TRANSPARENT),f.logger.debug("Starting renderer for element at "+K.x+","+K.y+" with size "+K.width+"x"+K.height),E=new zH(f,K),[4,E.render(q)];case 4:Y=Ee.sent(),Ee.label=5;case 5:return(!((me=e.removeContainer)!==null&&me!==void 0)||me)&&(o1.destroy(N)||f.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),f.logger.debug("Finished rendering"),[2,Y]}})})},rO=function(r,e,t){var s=e.ownerDocument,A=s.documentElement?Vc(r,getComputedStyle(s.documentElement).backgroundColor):Da.TRANSPARENT,l=s.body?Vc(r,getComputedStyle(s.body).backgroundColor):Da.TRANSPARENT,d=typeof t=="string"?Vc(r,t):t===null?Da.TRANSPARENT:4294967295;return e===s.documentElement?Li(A)?Li(l)?d:l:A:d};const sO=r=>{const e=new Set,t={};return r.forEach(s=>{if(!s.day||!s.startTime||!s.endTime)return;const A=s.day;t[A]||(t[A]=[]),t[A].push(s)}),Object.values(t).forEach(s=>{if(!(s.length<2))for(let A=0;A<s.length;A++)for(let l=A+1;l<s.length;l++){const d=s[A],u=s[l];Gx(d,u)&&(e.add(d.id),e.add(u.id))}}),e},yh=r=>{const[e,t]=r.split(":").map(Number);return e*60+t},Gx=(r,e)=>{if(!r.startTime||!r.endTime||!e.startTime||!e.endTime)return!1;const t=yh(r.startTime),s=yh(r.endTime),A=yh(e.startTime),l=yh(e.endTime);return t<l&&A<s},CA={A:{start:"07:00",end:"07:50"},1:{start:"08:10",end:"09:00"},2:{start:"09:10",end:"10:00"},3:{start:"10:10",end:"11:00"},4:{start:"11:10",end:"12:00"},B:{start:"12:10",end:"13:00"},5:{start:"13:10",end:"14:00"},6:{start:"14:10",end:"15:00"},7:{start:"15:10",end:"16:00"},8:{start:"16:10",end:"17:00"},9:{start:"17:10",end:"18:00"},C:{start:"18:10",end:"19:00"},D:{start:"19:10",end:"20:00"},E:{start:"20:10",end:"21:00"},F:{start:"21:10",end:"22:00"}},Yn=["A","1","2","3","4","B","5","6","7","8","9","C","D","E","F"],nO=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Hi=r=>{let e=[];if(Array.isArray(r))e=r;else if(typeof r=="string")return[];if(!e||e.length===0)return[];const t=[];for(let s=0;s<7;s++){const A=e[s];if(A&&A.length>0){const l=(s+1)%7,d=nO[l],u=A[0],f=A[A.length-1],g=CA[u]?.start,x=CA[f]?.end;g&&x&&t.push({day:d,startTime:g,endTime:x})}}return t},oS=r=>{const e=Hi(r);return e.length>0?e[0]:null},bh=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],h1=Yn.indexOf("1"),f1=Yn.indexOf("9"),pf=({semester:r,courses:e,onCourseClick:t,onRemoveCourse:s,id:A="schedule-visual-grid",showConflictWarnings:l=!0,readOnly:d=!1,actionType:u="delete"})=>{const{t:f}=At(),g=k.useMemo(()=>e.filter(K=>K.semester===r&&(K.classTime&&typeof K.classTime!="string"&&K.classTime.length>0||typeof K.classTime=="string"||Hi(K.classTime||[]).length>0||K.day&&K.startTime&&K.endTime)),[e,r]),x=K=>{if(!K)return-1;const[Y,q]=K.split(":").map(Number),E=Y*60+q;return Yn.findIndex(j=>{const B=CA[j],[I,_]=B.start.split(":").map(Number),[Q,U]=B.end.split(":").map(Number),T=I*60+_,W=Q*60+U;return E>=T&&E<W})},y=K=>Yn.findIndex(Y=>CA[Y].end===K),{activeDays:v,startIdx:N,endIdx:R}=k.useMemo(()=>{let K=!1,Y=h1,q=f1;return g.forEach(E=>{const j=Hi(E.classTime||[]);if(j.length>0)j.forEach(B=>{(B.day==="Saturday"||B.day==="Sunday")&&(K=!0);const I=x(B.startTime),_=y(B.endTime)!==-1?y(B.endTime):x(B.endTime);I!==-1&&I<Y&&(Y=I),_!==-1&&_>q&&(q=_)});else{if(E.day&&(E.day==="Saturday"||E.day==="Sunday")&&(K=!0),E.startTime){const B=x(E.startTime);B!==-1&&B<Y&&(Y=B)}if(E.endTime){const B=y(E.endTime);if(B!==-1&&B>q&&(q=B),B===-1){const I=x(E.endTime);I!==-1&&I>q&&(q=I)}}}}),Y=Math.max(0,Y),q=Math.min(Yn.length-1,q),Y>q&&(Y=h1,q=f1),{activeDays:K?bh:bh.slice(1,6),startIdx:Y,endIdx:q}},[g]),S=k.useMemo(()=>Yn.slice(N,R+1),[N,R]),P=k.useMemo(()=>sO(g),[g]),V=k.useMemo(()=>{const K=new Map;return g.forEach(Y=>{const q=Hi(Y.classTime||[]);if(q.length>0){q.forEach(B=>{let I=x(B.startTime),_=y(B.endTime);if(I!==-1){_===-1&&(_=I);for(let Q=I;Q<=_;Q++){const U=Yn[Q],T=`${B.day}-${U}`;K.has(T)||K.set(T,[]);const W=K.get(T);W.some(M=>M.id===Y.id)||W.push(Y)}}});return}if(!Y.startTime||!Y.endTime||!Y.day)return;let E=x(Y.startTime),j=y(Y.endTime);if(E===-1){const[B,I]=Y.startTime.split(":").map(Number),_=B*60+I;E=Yn.findIndex(Q=>{const U=CA[Q].start.split(":").map(Number);return U[0]*60+U[1]>=_})}if(j===-1){const[B,I]=Y.endTime.split(":").map(Number),_=B*60+I;j=Yn.findIndex(Q=>{const U=CA[Q].end.split(":").map(Number);return U[0]*60+U[1]>=_})}if(E!==-1){j===-1&&(j=E);for(let B=E;B<=j;B++){const I=Yn[B],_=`${Y.day}-${I}`;K.has(_)||K.set(_,[]),K.get(_).push(Y)}}}),K.forEach(Y=>{Y.sort((q,E)=>q.id.localeCompare(E.id))}),K},[g,N,R]),$=K=>{let Y=K;if(/[\u4e00-\u9fa5]/.test(K)){let q=K.match(/^(.+?)(\s+[A-Za-z0-9\(])/);Y=q?q[1]:K,Y=Y.replace(/\s*\(?[]\s*[\d,]+\)?\s*$/g,"")}if(/[:]/.test(Y)){const q=Y.split(/([:])/);return a.jsx(k.Fragment,{children:q.map((E,j)=>a.jsxs(k.Fragment,{children:[E,/[:]/.test(E)&&j<q.length-1&&a.jsx("br",{})]},j))})}return Y},G=K=>{const Y=K.match(/^[]\s*[\d,A-Za-z]+\s*\((.*?)\)$/);if(Y)return Y[1];const q=K.match(/^\((.*?)\)$/);return q?q[1]:K};return a.jsxs("div",{id:A,className:"grid bg-surface/50 border border-gray-700/50 rounded-lg overflow-hidden relative w-full",style:{gridTemplateColumns:`minmax(35px, 60px) repeat(${v.length}, minmax(0, 1fr))`,gridTemplateRows:`auto repeat(${S.length}, minmax(40px, auto))`},children:[a.jsx("div",{className:"bg-surface/80 p-0.5 md:p-2 border-r border-b border-gray-700/50 flex items-center justify-center text-[9px] md:text-xs text-muted font-mono leading-tight text-center [.export-mode_&]:transform-none",children:a.jsx("span",{className:"[.export-mode_&]:-translate-y-[2px]",children:"Period"})}),v.map(K=>a.jsxs("div",{className:"bg-surface/80 p-0.5 md:p-2 flex items-center justify-center text-center font-bold text-[10px] md:text-sm text-foreground/80 border-b border-gray-700/50 sticky top-0 z-30 backdrop-blur-md [.export-mode_&]:transform-none",children:[a.jsx("span",{className:"hidden md:inline [.export-mode_&]:-translate-y-[2px]",children:f.schedule.days[bh.indexOf(K)]}),a.jsx("span",{className:"md:hidden [.export-mode_&]:-translate-y-[2px]",children:f.schedule.days[bh.indexOf(K)].replace("","")})]},K)),S.map((K,Y)=>{const q=CA[K];return a.jsxs(k.Fragment,{children:[a.jsxs("div",{className:"relative border-r border-gray-700/30 border-t border-gray-700/50 flex flex-col items-center justify-center p-0.5 [.export-mode_&]:transform-none",style:{gridRow:Y+2,gridColumn:1,minHeight:"40px"},children:[a.jsx("span",{className:"font-bold text-[10px] md:text-sm text-primary [.export-mode_&]:-translate-y-[2px]",children:K}),a.jsxs("div",{className:"flex flex-col items-center text-[8px] md:text-[10px] text-muted leading-none opacity-80 mt-0.5 md:mt-0 [.export-mode_&]:-translate-y-[2px]",children:[a.jsx("span",{children:q.start}),a.jsx("span",{className:"hidden md:block text-[10px] leading-[0.5] opacity-50 my-0.5",children:"|"}),a.jsx("span",{children:q.end})]})]}),v.map((E,j)=>{const B=`${E}-${K}`,I=V.get(B)||[];return a.jsx("div",{className:`
                                        border-t border-gray-300 dark:border-gray-700/50
                                        border-r border-gray-300 dark:border-gray-700/30
                                        flex flex-col gap-1 p-0.5 justify-center
                                    `,style:{gridRow:Y+2,gridColumn:j+2},children:I.map((_,Q)=>{const U=P.has(_.id);let T=af[_.category]||af.Other;return _.category==="General Education"&&_.genEduSubCategory&&(T=vx[_.genEduSubCategory]||T),a.jsxs("div",{className:`
                                                    m-0.5 rounded-md border border-gray-200 dark:border-border
                                                    flex flex-col p-0.5 md:p-1
                                                    ${d?"cursor-default":"cursor-pointer hover:brightness-110 active:scale-95"}
                                                    items-center justify-center text-center
                                                     transition-all group
                                                    shadow-sm flex-shrink-0 relative overflow-hidden
                                                    ${T}
                                                    ${_.isWithdrawn?"opacity-50 grayscale":""}
                                                    ${U&&l?"ring-1 md:ring-2 ring-red-500":""}
                                                    [.export-mode_&]:pt-1 [.export-mode_&]:pb-1 [.export-mode_&]:px-1 [.export-mode_&]:justify-center
                                                `,style:{minHeight:"38px",width:"calc(100% - 4px)"},onClick:()=>!d&&t(_),children:[!d&&s&&a.jsx("div",{className:`absolute -top-1 -right-1 z-50 opacity-0 group-hover:opacity-100 transition-opacity bg-white 
                                                            ${u==="delete"?"text-red-500 hover:scale-110":"text-primary hover:scale-110"} 
                                                            rounded-full shadow-md p-0.5 cursor-pointer transform`,onClick:W=>{W.stopPropagation(),s(_)},title:u==="delete"?f.planner.delete||"Remove Course":f.planner.edit||"Edit Course",children:u==="delete"?a.jsx(ut,{size:12,strokeWidth:3}):a.jsx(P0,{size:12,strokeWidth:3})}),U&&l&&a.jsx("div",{className:"absolute top-0 right-0 p-0.5 text-red-500 bg-white/90 rounded-bl-md z-30 shadow-sm",title:"Time Conflict!",children:a.jsx(bs,{size:12,strokeWidth:3})}),_.isWithdrawn&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:a.jsx(ut,{size:48,className:"text-red-500/80 font-bold",strokeWidth:3})}),a.jsx("div",{className:`
                                                    font-bold text-[9px] md:text-sm leading-tight md:leading-snug break-words text-center mx-auto
                                                    ${_.isWithdrawn?"line-through decoration-red-500 decoration-2":""}
                                                    [.export-mode_&]:transform-none
                                                `,children:a.jsx("div",{children:$(_.name)})}),_.room&&a.jsx("div",{className:"text-[8px] md:text-xs font-medium leading-[1.1] md:leading-tight mt-0.5 break-words opacity-90 mx-auto [.export-mode_&]:transform-none",children:G(_.room)}),_.isEMI&&a.jsx("div",{className:`absolute bottom-0 right-0 w-[8px] h-[8px] md:w-[28px] md:h-[16px] rounded-tl-full md:rounded-bl-none md:rounded-tl-xl md:rounded-br-md bg-amber-400 md:text-[10px] font-black text-amber-950 shadow-sm z-10 flex items-center justify-center leading-none md:pt-[1px]\r
                                                        [.export-mode_&]:pt-0 [.export-mode_&]:pb-[8px]\r
                                                    `,children:a.jsx("span",{className:"hidden md:inline",children:"EMI"})})]},`${_.id}-${K}-${Q}`)})},`${E}-${K}`)})]},K)})]})},Tp=r=>{const e=r.getFullYear(),t=String(r.getMonth()+1).padStart(2,"0"),s=String(r.getDate()).padStart(2,"0"),A=String(r.getHours()).padStart(2,"0"),l=String(r.getMinutes()).padStart(2,"0"),d=String(r.getSeconds()).padStart(2,"0");return`${e}${t}${s}T${A}${l}${d}`},lS=r=>{let e=r.trim().toLowerCase();const t=e.includes("pm")||e.includes("")||e.includes("p.m."),s=e.includes("am")||e.includes("")||e.includes("a.m."),A=e.match(/(\d{1,2}):(\d{2})/);if(A){let l=parseInt(A[1],10),d=parseInt(A[2],10);return t&&l<12?l+=12:s&&l===12&&(l=0),{hours:l,minutes:d}}return{hours:0,minutes:0}},aO=(r,e)=>{const t=new Date,s=t.getDay(),A=(r+7-s)%7,l=new Date(t);l.setDate(t.getDate()+A);const{hours:d,minutes:u}=lS(e);return l.setHours(d,u,0,0),l},iO={Sunday:"SU",Monday:"MO",Tuesday:"TU",Wednesday:"WE",Thursday:"TH",Friday:"FR",Saturday:"SA"},AO={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},oO=r=>{let e=["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//NSYSU Course Tracker//EN","CALSCALE:GREGORIAN","METHOD:PUBLISH"];return r.forEach(t=>{if(!t.day||!t.startTime||!t.endTime)return;t.day.split(/,\s*/).forEach(A=>{const l=iO[A],d=AO[A];if(!l||d===void 0)return;const u=aO(d,t.startTime),{hours:f,minutes:g}=lS(t.endTime),x=new Date(u);x.setHours(f,g,0,0);const y=`${t.id}-${l}-${Date.now()}@nsysu-tracker`,v=t.teacher||"Unknown Teacher";e.push("BEGIN:VEVENT",`UID:${y}`,`DTSTAMP:${Tp(new Date)}`,`DTSTART:${Tp(u)}`,`DTEND:${Tp(x)}`,`SUMMARY:${t.name}`,`DESCRIPTION:ID: ${t.id}\\nTeacher: ${v}\\nCredits: ${t.credits}`,`LOCATION:${t.room||"TBA"}`,`RRULE:FREQ=WEEKLY;COUNT=18;BYDAY=${l}`,"END:VEVENT")})}),e.push("END:VCALENDAR"),e.join(`\r
`)},lO=({semester:r,courses:e,onClose:t,onEditCourse:s,onFixData:A})=>{const{t:l}=At(),[d,u]=k.useState(!1),f=k.useRef(null);k.useEffect(()=>{const S=P=>{f.current&&!f.current.contains(P.target)&&u(!1)};return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[]),k.useEffect(()=>{const S=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=S}},[]);const g=k.useMemo(()=>e.filter(S=>S.semester===r&&S.day&&S.startTime&&S.endTime&&!S.isExemption&&S.category!=="University Way"&&!(S.category==="General Education"&&S.genEduSubCategory==="Primer")),[e,r]),x=k.useMemo(()=>e.filter(S=>S.semester===r),[e,r]),y=k.useMemo(()=>e.some(S=>{const P=S.category==="General Education"&&S.genEduSubCategory==="Primer",V=S.category==="General Education"&&S.genEduSubCategory==="Service";return S.userLabels?.includes("manual")||!S.name.includes(`
`)&&!/[\u4e00-\u9fa5]/.test(S.name)||(S.fixAttempts||0)>=2?!1:S.semester===r&&!P&&!V&&S.category!=="University Way"}),[e,r]),v=S=>{if(l.semesters[S])return l.semesters[S];const P=S.split(" ");if(P.length>=2&&P[0]==="Year"){const V=P[1],$=P.slice(2).join(" ");if(l.semesters["Year 1 Sem 1"].includes("")){const K=["","","","","","","",""][parseInt(V)-1]||V;if($==="Summer")return`${K} ${l.catalog.summer}`;if($==="Sem 1")return`${K} `;if($==="Sem 2")return`${K} `}else{if($==="Sem 1")return`Year ${V} Fall Semester`;if($==="Sem 2")return`Year ${V} Spring Semester`;if($==="Summer")return`Year ${V} Summer`}}return S.replace("Summer",l.catalog.summer)},N=()=>{const S=oO(g),P=new Blob([S],{type:"text/calendar"}),V=URL.createObjectURL(P),$=document.createElement("a");$.href=V;const G=v(r);$.download=`${G}_schedule.ics`.replace(/\s+/g,"_"),$.click(),URL.revokeObjectURL(V),u(!1)},R=async()=>{const S=document.getElementById("schedule-visual-grid");if(S){const P=S.style.overflow;S.style.overflow="visible",S.classList.add("export-mode");try{const $=(await eO(S,{backgroundColor:getComputedStyle(document.documentElement).getPropertyValue("--color-background").trim(),scale:3,useCORS:!0,onclone:q=>{const E=q.getElementById("schedule-visual-grid");E&&(E.style.overflow="visible",E.style.height="auto",E.querySelectorAll("span.absolute").forEach(_=>{_.style.zIndex="10",_.style.position="absolute",_.style.top="0px",_.style.left="4px",_.style.transform="translateY(-50%)"}),E.querySelectorAll(".sticky").forEach(_=>{_.style.position="static",_.style.top="auto",_.classList.remove("sticky","top-0","backdrop-blur-md")}),E.querySelectorAll('div[class*="rounded"]').forEach(_=>{_.classList.remove("overflow-hidden"),_.style.overflow="visible",_.style.height="auto";const Q=_.querySelector(".line-clamp-3");Q&&(Q.classList.remove("line-clamp-3"),Q.style.whiteSpace="normal",Q.style.overflow="visible"),_.querySelectorAll(".truncate").forEach(T=>{T.classList.remove("truncate"),T.style.whiteSpace="normal",T.style.overflow="visible"})}))}})).toDataURL("image/png"),G=document.createElement("a");G.href=$;const K=v(r),Y=l.schedule.schedule;G.download=`${K}_${Y}.png`.replace(/\s+/g,"_"),G.click()}catch(V){console.error("Export failed",V),alert("Failed to generate image.")}finally{S.style.overflow=P,S.classList.remove("export-mode")}}};return $t.createPortal(a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[9999] p-1 md:p-4",children:a.jsxs("div",{className:"bg-background border border-gray-600 rounded-xl w-[98vw] md:w-full max-w-6xl shadow-2xl h-[95vh] md:h-[90vh] flex flex-col schedule-modal-content",children:[a.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-600 bg-background/50",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-xl font-bold text-foreground",children:[v(r)," ",l.schedule.schedule]}),a.jsxs("p",{className:"text-sm text-muted",children:[g.length," ",l.schedule.scheduledCourses]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[y&&A&&a.jsxs("button",{onClick:()=>A(r),className:"flex items-center gap-2 bg-yellow-500 hover:bg-yellow-400 text-black px-3 py-2 rounded-lg text-sm font-bold shadow-lg shadow-yellow-500/20 transition-colors mr-2 animate-pulse",children:[a.jsx(bs,{size:18}),l.app.fixData||"Fix Data"]}),a.jsxs("div",{className:"relative",ref:f,children:[a.jsxs("button",{onClick:()=>u(!d),className:"flex items-center gap-2 bg-primary hover:bg-sky-400 text-white px-3 py-2 rounded-lg text-sm font-bold shadow-lg transition-colors",children:[a.jsx(Mf,{size:18}),l.schedule.exportSchedule,a.jsx(xd,{size:14,className:`transition-transform duration-200 ${d?"rotate-180":""}`})]}),d&&a.jsxs("div",{className:"absolute top-full right-0 mt-2 w-56 bg-surface border border-border rounded-lg shadow-xl overflow-hidden z-50 animate-in fade-in zoom-in-95 duration-200",children:[a.jsxs("button",{onClick:R,className:"w-full text-left px-4 py-3 text-sm text-foreground hover:bg-primary/10 flex items-center gap-3 font-medium transition-colors",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500/20 text-blue-500 flex items-center justify-center",children:a.jsx(x5,{size:16})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-bold",children:"Image (.png)"}),a.jsx("div",{className:"text-xs text-muted",children:"Original format"})]})]}),a.jsxs("button",{onClick:N,className:"w-full text-left px-4 py-3 text-sm text-foreground hover:bg-primary/10 flex items-center gap-3 font-medium transition-colors border-t border-border/50",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500/20 text-purple-500 flex items-center justify-center",children:a.jsx(HA,{size:16})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-bold",children:"Calendar (.ics)"}),a.jsx("div",{className:"text-xs text-muted",children:"For Google/Apple Cal"})]})]})]})]}),a.jsx("button",{onClick:t,className:"text-muted hover:text-foreground transition-colors ml-2",children:a.jsx(ut,{size:24})})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-1 md:p-4 pb-8 custom-scrollbar w-full",children:a.jsxs("div",{className:"w-full",children:[a.jsx(pf,{semester:r,courses:e.filter(S=>!S.isExemption&&S.category!=="University Way"&&!(S.category==="General Education"&&S.genEduSubCategory==="Primer")),onCourseClick:s,onRemoveCourse:s,actionType:"edit"}),a.jsx("div",{id:"schedule-list",className:"mt-6 bg-surface/20 border border-gray-600 rounded-lg overflow-hidden flex flex-col",children:a.jsxs("table",{className:"w-full text-sm text-left text-muted table-fixed",children:[a.jsx("thead",{className:"bg-surface text-muted uppercase text-[10px] md:text-xs",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-2 md:px-4 py-2 md:py-3 w-[50%] md:w-[40%]",children:l.schedule.courseName}),a.jsx("th",{className:"px-1 md:px-4 py-2 md:py-3 w-[15%] text-center",children:l.schedule.credits}),a.jsx("th",{className:"px-1 md:px-4 py-2 md:py-3 w-[15%] text-center",children:l.schedule.grade}),a.jsx("th",{className:"hidden md:table-cell px-4 py-3 w-[20%] text-center",children:l.schedule.category}),a.jsx("th",{className:"px-2 md:px-4 py-2 md:py-3 w-[20%] md:w-[10%] text-right",children:l.common?.actions||"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-600/50",children:x.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"px-4 py-4 text-center text-muted italic",children:l.schedule.noCourses})}):x.map(S=>a.jsxs("tr",{className:"hover:bg-surface/30 transition-colors group text-xs md:text-sm",children:[a.jsx("td",{className:"px-2 md:px-4 py-2 md:py-3 font-medium text-foreground truncate max-w-[120px] md:max-w-none",title:S.name,children:S.name}),a.jsx("td",{className:"px-1 md:px-4 py-2 md:py-3 text-center",children:S.credits}),a.jsx("td",{className:"px-1 md:px-4 py-2 md:py-3 text-center",children:S.isExemption?a.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-bold bg-gray-500/20 text-gray-400",children:l.form.isExemption}):a.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold ${["Fail","D","E"].includes(S.grade)?"bg-red-500/20 text-red-400":S.grade?"bg-green-500/20 text-green-400":"bg-surface text-muted"}`,children:S.grade||"-"})}),a.jsxs("td",{className:"hidden md:table-cell px-4 py-3 text-center",children:[l.categories[S.category]||S.category,S.category==="General Education"&&S.genEduSubCategory&&a.jsxs("span",{className:"ml-2 text-xs text-muted",children:["(",l.categories[S.genEduSubCategory]||S.genEduSubCategory,")"]})]}),a.jsx("td",{className:"px-2 md:px-4 py-2 md:py-4 text-right",children:a.jsx("button",{onClick:()=>s(S),className:"text-muted hover:text-primary transition-colors p-1 hover:bg-surface rounded",title:l.planner?.edit||"Edit",children:a.jsx(P0,{size:16})})})]},S.id))})]})})]})})]})}),document.body)},cO=({onClose:r,onAdd:e,existingSemesters:t})=>{const{t:s}=At(),[A,l]=k.useState(1),[d,u]=k.useState("Sem 1"),[f,g]=k.useState(""),x=()=>{const y=d==="Summer"?`Year ${A} Summer`:`Year ${A} ${d}`;if(t.includes(y)){g(s.addSemester?.exists||"This semester already exists!");return}e(A,d),r()};return $t.createPortal(a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[9999] p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-surface border border-border rounded-xl w-full max-w-sm shadow-2xl p-6 relative animate-in zoom-in-95 duration-200",children:[a.jsx("button",{onClick:r,className:"absolute top-4 right-4 text-muted hover:text-foreground transition-colors",children:a.jsx(ut,{size:20})}),a.jsx("h2",{className:"text-xl font-bold mb-6 text-foreground",children:s.addSemester?.title||"Add New Semester"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-1",children:s.addSemester?.year||"Year"}),a.jsx("select",{value:A,onChange:y=>{l(Number(y.target.value)),g("")},className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:ring-2 focus:ring-primary outline-none",children:[1,2,3,4,5,6,7,8].map(y=>{const v=["","","","","","","",""],N=s.addSemester?.yearOption?.includes("")?v[y-1]:y;return a.jsx("option",{value:y,children:s.addSemester?.yearOption?.replace("{year}",String(N))||`Year ${y}`},y)})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-1",children:s.addSemester?.semester||"Semester"}),a.jsxs("select",{value:d,onChange:y=>{u(y.target.value),g("")},className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:ring-2 focus:ring-primary outline-none",children:[a.jsx("option",{value:"Sem 1",children:s.addSemester?.sem1||"Semester 1"}),a.jsx("option",{value:"Sem 2",children:s.addSemester?.sem2||"Semester 2"}),a.jsx("option",{value:"Summer",children:s.addSemester?.summer||"Summer"})]})]}),f&&a.jsx("div",{className:"text-red-500 text-sm font-medium bg-red-500/10 p-2 rounded border border-red-500/20",children:f}),a.jsxs("div",{className:"flex gap-3 mt-6 pt-2",children:[a.jsx("button",{onClick:r,className:"flex-1 px-4 py-2 rounded-lg border border-border text-foreground hover:bg-background/80 transition-colors",children:s.addSemester?.cancel||"Cancel"}),a.jsx("button",{onClick:x,className:"flex-1 px-4 py-2 rounded-lg bg-primary text-white font-bold hover:bg-sky-400 transition-colors shadow-lg shadow-primary/20",children:s.addSemester?.add||"Add"})]})]})]})}),document.body)},dO=({courses:r,semesters:e,isEMIStudent:t,graduationCredits:s,onEditCourse:A,onAddSemester:l,onFixData:d,activeScheduleSemester:u,onViewSchedule:f,onOpenInterdisciplinary:g,userProfile:x})=>{const{t:y}=At(),[v,N]=k.useState(!1);return a.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[a.jsx("section",{id:"dashboard-section",children:a.jsx(Nk,{courses:r,isEMIStudent:t,graduationCredits:s,onOpenInterdisciplinary:g,userProfile:x})}),a.jsxs("section",{id:"semester-view-section",className:"max-w-[85rem] mx-auto w-full",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h2",{className:"text-2xl font-bold",children:y.app.coursePlan}),a.jsxs("button",{onClick:()=>N(!0),className:"bg-surface border border-border hover:bg-primary/10 hover:border-primary text-muted hover:text-primary px-3 py-1.5 rounded-lg transition-all flex items-center gap-2 text-sm font-medium",title:y.app.addPlan,children:[a.jsx(zr,{size:16}),y.app.addPlan]})]}),a.jsxs("div",{className:"text-sm text-muted",children:[r.length," ",y.app.totalCourses]})]}),a.jsx(Uk,{semesters:e,courses:r,onEdit:A,onViewSchedule:f,onFixData:d})]}),u&&a.jsx(lO,{semester:u,courses:r,onClose:()=>f(null),onEditCourse:A,onFixData:d}),v&&a.jsx(cO,{existingSemesters:e,onClose:()=>N(!1),onAdd:l})]})},uO={:0,:1,:2,:3,:4,:5,:6},Up=r=>{if(r.classTime&&r.classTime.some(l=>l&&l.length>0)||!r.room)return r;const e=/([])([0-9A-Z,]+)/g;let t;const s=["","","","","","",""];let A=!1;for(;(t=e.exec(r.room))!==null;){const l=t[1],d=t[2],u=uO[l];if(u!==void 0){const f=d.replace(/,/g,"");s[u]=(s[u]||"")+f,A=!0}}return A?{...r,classTime:s}:r},QA=()=>Math.random().toString(36).substring(2,9)+Date.now().toString(36),vA="https://nsysu-opendev.github.io/NSYSUCourseAPI",Qp=r=>{const e=new Map;return r.forEach(t=>{const s=`${t.id}|${JSON.stringify(t.classTime)}|${t.room}|${t.teacher}|${t.department}`;if(e.has(s)){const A=e.get(s);(!A.class&&t.class||A.class===""&&t.class&&t.class!=="")&&e.set(s,t)}else e.set(s,t)}),Array.from(e.values())},cS=k.createContext(null),hO=({children:r})=>{const[e,t]=k.useState([]),[s,A]=k.useState([]),[l,d]=k.useState(!1),[u,f]=k.useState(!1),[g,x]=k.useState(null),[y,v]=k.useState(!1),[N,R]=k.useState(null),S=k.useRef(new Set),P=k.useRef({}),V=k.useRef({}),$=async(E,j)=>{try{if(localStorage.getItem("nsysu-force-offline")==="true")throw new Error("Simulated Network Error (Force Offline Mode)");const B=await fetch(E);if(!B.ok)throw new Error("Network error");return await B.json()}catch{console.warn(`API failed for ${E}, trying local fallback ${j}`);const I=await fetch(j);if(!I.ok)throw new Error("Local fallback failed");return await I.json()}};k.useEffect(()=>{let E=!0;return(async()=>{try{const B=await $(`${vA}/version.json?t=${Date.now()}`,"./Backup/version.json");if(!E)return;const I=Object.keys(B.history).sort((_,Q)=>Q.localeCompare(_));if(t(I),I.length>0){const _=I[0];console.log(`Preloading latest semester: ${_}`),K(_)}}catch(B){console.error("Failed to load semesters",B)}})(),()=>{E=!1}},[]);const G=async E=>{if(!E)return;if(S.current.has(E)){const I=V.current[E];v(I==="backup");return}d(!0),x(null);const j=e.indexOf(E),B=j!==-1&&j<=1;try{let I,_=!1;if(B){let T=P.current[E];if(!T)try{T=(await $(`${vA}/${E}/version.json?t=${Date.now()}`,"./Backup/version.json")).latest,P.current[E]=T}catch{console.warn(`Version check failed for ${E}, attempting blind fetch`)}try{if(T){const W=await fetch(`${vA}/${E}/${T}/all.json`);if(!W.ok)throw new Error("API failed");I=await W.json()}else throw new Error("No version info");_||R(Date.now())}catch{console.warn(`API load failed for ${E}, trying local...`);const M=await fetch(`./Backup/${E}.json`);if(!M.ok)throw new Error(`Local data not found for ${E}`);I=await M.json(),_=!0}}else{const T=await fetch(`./Backup/${E}.json`);if(!T.ok)throw new Error(`Backup data not found for archived semester ${E}`);I=await T.json(),_=!0}v(_),V.current[E]=_?"backup":"api";const Q=I.map(Up),U=Qp(Q).map(T=>({...T,semester:E}));A(T=>[...T.filter(M=>M.semester!==E),...U]),S.current.add(E)}catch(I){console.error(I),x(`Failed to load course data for ${E}`)}finally{d(!1)}},K=E=>{G(E)},Y=async()=>{if(u)return;const E=e.filter(_=>_>="1111"&&!S.current.has(_));if(E.length===0)return;f(!0);const j=E.map(async _=>{try{let Q=null;try{let U=P.current[_];if(!U){const T=await fetch(`${vA}/${_}/version.json`);T.ok&&(U=(await T.json()).latest)}if(U){const T=await fetch(`${vA}/${_}/${U}/all.json`);T.ok&&(Q=await T.json())}}catch{}if(!Q){const U=await fetch(`./Backup/${_}.json`);U.ok&&(Q=await U.json())}if(Q){S.current.add(_);const U=Q.map(Up);return Qp(U).map(T=>({...T,semester:_}))}return[]}catch{return[]}}),I=(await Promise.all(j)).flat();I.length>0&&A(_=>[..._,...I]),f(!1)},q=async E=>{if(!E||y)return;const j=e.indexOf(E);if(j!==-1&&j<=1)try{const _=(await $(`${vA}/${E}/version.json?t=${Date.now()}`,"./Backup/version.json")).latest,Q=P.current[E];if(_&&_!==Q){console.log(`New version detected for ${E}: ${_} (was ${Q}). Updating...`),P.current[E]=_;const U=await fetch(`${vA}/${E}/${_}/all.json`);if(!U.ok)throw new Error("API failed");const W=(await U.json()).map(Up),M=Qp(W).map(F=>({...F,semester:E}));A(F=>[...F.filter(ne=>ne.semester!==E),...M]),S.current.add(E)}R(Date.now())}catch(I){console.warn(`Update check failed for ${E}`,I)}};return a.jsx(cS.Provider,{value:{semesters:e,courses:s,fetchCourses:G,checkForUpdates:q,fetchHistory:Y,loading:l,loadingHistory:u,error:g,usingBackup:y,lastChecked:N},children:r})},dS=()=>{const r=k.useContext(cS);if(!r)throw new Error("useCourseDataContext must be used within a CourseDataProvider");return r},la=()=>dS(),$f=[{category:"College of Liberal Arts",departments:["","","",""]},{category:"College of Science",departments:["","","",""]},{category:"College of Engineering",departments:["","","","",""]},{category:"College of Management",departments:["","","",""]},{category:"College of Marine Sciences",departments:["","",""]},{category:"College of Social Sciences",departments:["",""]},{category:"College of Medicine",departments:["","",""]},{category:"Si-Wan College",departments:["",""]}],uS=$f.flatMap(r=>r.departments).sort((r,e)=>r.localeCompare(e,"zh-TW")),fO=(r,e)=>{if(!e)return!1;const t=e.replace(/[]/g,"");return r.replace(/[]/g,"")===t||r.includes(t)||t.includes(r)},mO=(r,e)=>{if(!e||!r.compulsory)return!1;const t=$f.find(d=>d.departments.includes(e)||d.departments.some(u=>e.includes(u)));if(!t)return!1;const s=r.name.toLowerCase(),A=t.category.includes("Engineering")||t.category.includes("Science")||t.category.includes("Marine"),l=t.category.includes("Management");return A?["","calculus","","physics","","chemistry","","biology","","linear algebra","","differential equations","","circuits"].some(u=>s.includes(u)):l?["","calculus","","economics","","accounting","","statistics","","management"].some(u=>s.includes(u)):!1},qo=(r,e="",t=0)=>{let s="Other",A,l,d=!1;const u=r.department||"",f=r.name.toUpperCase(),g=r.department.toUpperCase(),x=r.id.substring(0,4).toUpperCase();x==="GEAE"?(s="General Education",A="Boya"):x==="GEAI"?(s="General Education",A="Cross-College"):x==="GEAP"||x==="GESP"?(s="General Education",A="Cross-College",d=!0):x==="GEPE"&&(s="General Education",A="Sports");const y=s!=="Other";if(!y&&(fO(u,e)||mO(r,e)))if(r.compulsory){const v=parseInt(r.grade||"0");t>0&&v>0&&v!==t?s="Major Elective":s="Major Required"}else s="Major Elective";else if(!y&&(r.id.startsWith("GEPE")||u.includes("")||g.includes("SPORT")||g.includes("PHYSICAL EDUCATION")))s="General Education",A="Sports";else if(y&&A==="Boya"||!y&&(u.includes("")||u.includes("General Education")||u.includes("")||Array.isArray(r.tags)&&r.tags.some(v=>v.includes("")))){y||(s="General Education",A="Boya");const v=(u+" "+(r.tags?.join(" ")||"")).toUpperCase();v.includes("")||v.includes("DIMENSION 1")?l="Dimension 1":v.includes("")||v.includes("DIMENSION 2")?l="Dimension 2":v.includes("")||v.includes("DIMENSION 3")?l="Dimension 3":v.includes("")||v.includes("DIMENSION 4")?l="Dimension 4":v.includes("")||v.includes("DIMENSION 5")?l="Dimension 5":(v.includes("")||v.includes("DIMENSION 6"))&&(l="Dimension 6")}else!y&&u.includes("")||!y&&u.includes("")?(s="General Education",A="Chinese"):y&&A==="Cross-College"||!y&&(u.includes("")||Array.isArray(r.tags)&&r.tags.includes(""))?y||(s="General Education",A="Cross-College"):!y&&(u.includes("")||g.includes("GENERAL ENGLISH")||f.includes("GENERAL ENGLISH")||["","","",""].some(v=>u.includes(v)))?(s="General Education",A="English"):!y&&r.name.includes("")&&(s="Other",A="Military Training");if(!d){const v=/\bESP\b/;(/\bEAP\b/.test(f)||v.test(f)||f.includes("ESP")||g.includes("ESP")||g.includes("EAP")||Array.isArray(r.tags)&&(r.tags.includes("ESP")||r.tags.includes("EAP")))&&(d=!0,A!=="Boya"&&A!=="Sports"&&(s==="Other"||s==="General Education")&&(s="General Education",A="Cross-College"))}return{category:s,genEduSubCategory:A,boyaDimension:l,isEMI:r.english||!1,isEapEsp:d}},J0=({isOpen:r,title:e,message:t,onConfirm:s,onCancel:A,confirmText:l,cancelText:d,isDestructive:u=!1})=>{const{t:f}=At();return r?a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[100] p-4 animate-in fade-in duration-200",children:a.jsx("div",{className:"bg-surface border border-border rounded-xl w-full max-w-sm shadow-2xl scale-100 animate-in zoom-in-95 duration-200 overflow-hidden",children:a.jsxs("div",{className:"p-6 text-center",children:[a.jsx("div",{className:`mx-auto mb-4 w-12 h-12 rounded-full flex items-center justify-center ${u?"bg-red-500/10 text-red-500":"bg-primary/10 text-primary"}`,children:u?a.jsx(bs,{size:24}):a.jsx(bs,{size:24})}),e&&a.jsx("h3",{className:"text-lg font-bold text-foreground mb-2",children:e}),a.jsx("p",{className:"text-muted text-sm mb-6",children:t}),a.jsxs("div",{className:"flex gap-3 justify-center",children:[a.jsx("button",{onClick:A,className:"px-4 py-2 rounded-lg border border-border text-muted hover:bg-surface hover:text-foreground transition-colors font-medium text-sm min-w-[80px]",children:d||f.form.cancel}),a.jsx("button",{onClick:s,className:`px-4 py-2 rounded-lg text-white font-bold transition-colors text-sm min-w-[80px] shadow-lg ${u?"bg-red-500 hover:bg-red-600 shadow-red-500/20":"bg-primary hover:bg-primary/80 shadow-primary/20"}`,children:l||"Confirm"})]})]})})}):null},gO=({courseId:r,courseName:e,semester:t,onClose:s})=>{const{t:A}=At(),l=yd(),{allUserLabels:d,toggleLabelForCourse:u,setLabelForCourse:f,getLabelsForCourse:g,addLabelToLibrary:x,removeLabelFromLibrary:y}=l,v=l.DEFAULT_COLORS||["#22c55e","#ef4444","#3b82f6"],[N,R]=k.useState(""),[S,P]=k.useState(v[0]),[V,$]=k.useState(!1),[G,K]=k.useState(null),[Y,q]=k.useState(!1),[E,j]=k.useState(null),B=k.useRef(null),I=g(r,t),_=I.map(z=>z.text),Q=d.filter(z=>!_.includes(z.text));k.useEffect(()=>{const z=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=z}},[]),k.useEffect(()=>(V&&!Y?B.current=setTimeout(()=>{$(!1)},5e3):B.current&&clearTimeout(B.current),()=>{B.current&&clearTimeout(B.current)}),[V,Y]);const U=()=>{if(!N.trim())return;const z=d.find(te=>te.text.toLowerCase()===N.trim().toLowerCase());if(z){f(r,z.text,!0,t),R(""),K(null);return}const ne=N.trim();if(x(ne,S),f(r,ne,!0,t),v&&v.length>0){const te=(v.indexOf(S)+1)%v.length;P(v[te])}R(""),K(null)},T=z=>{V?(B.current&&clearTimeout(B.current),j(z),q(!0)):u(r,z.text,t)},W=()=>{E&&(y(E.text),j(null)),q(!1)},M=()=>{j(null),q(!1)},F=k.useRef(null);return k.useEffect(()=>{const z=ne=>{Y||F.current&&!F.current.contains(ne.target)&&s()};return document.addEventListener("mousedown",z),()=>document.removeEventListener("mousedown",z)},[s,Y]),$t.createPortal(a.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:[a.jsx(J0,{isOpen:Y,title:A.common?.confirm||"Confirm",message:(A.planner.labels?.deleteConfirm||'Delete "{{label}}"?').replace("{{label}}",E?.text||""),onConfirm:W,onCancel:M,isDestructive:!0,confirmText:A.common?.actions||"Delete"}),a.jsxs("div",{ref:F,className:"bg-surface w-full max-w-md h-[550px] rounded-2xl shadow-2xl flex flex-col overflow-hidden border border-border animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-4 border-b border-border bg-background/50 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg",children:A.planner.labels?.title||"Manage Labels"}),a.jsx("p",{className:"text-xs text-muted truncate max-w-[250px]",children:e})]}),a.jsx("button",{onClick:s,className:"p-2 hover:bg-muted/20 rounded-full transition-colors",children:a.jsx(ut,{size:20})})]}),a.jsxs("div",{className:"flex-1 flex flex-col min-h-0 bg-background/30",children:[a.jsxs("div",{className:"p-3 border-b border-border space-y-3 bg-surface",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:N,onChange:z=>{R(z.target.value),K(null)},onKeyDown:z=>{z.nativeEvent.isComposing||z.key==="Enter"&&U()},placeholder:A.planner.labels?.newPlaceholder||"New label name...",className:`flex-1 bg-background border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary outline-none ${G?"border-red-500":"border-border"}`}),a.jsx("button",{onClick:U,disabled:!N.trim(),className:"bg-primary text-white p-2 rounded-lg hover:bg-primary/90 disabled:opacity-50 transition-colors",children:a.jsx(zr,{size:20})})]}),G&&a.jsx("p",{className:"text-xs text-red-500 font-medium pl-1",children:G}),a.jsx("div",{className:"flex gap-1.5 overflow-x-auto pb-1 pt-1 mt-3 custom-scrollbar pl-2",children:v.map(z=>a.jsx("button",{onClick:()=>P(z),className:`w-6 h-6 rounded-full border-2 transition-all flex-shrink-0 ${S===z?"border-foreground scale-110 shadow-sm":"border-transparent hover:scale-110"}`,style:{backgroundColor:z}},z))})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsx("h4",{className:"text-xs font-bold text-muted uppercase tracking-wider",children:A.planner.labels?.library||"Label Library"}),d.length>0&&a.jsx("button",{onClick:()=>$(!V),className:`text-xs font-medium px-2 py-1 rounded transition-colors ${V?"bg-primary text-white":"text-primary hover:bg-primary/10"}`,children:V?A.planner.labels?.finish||"Finish":A.planner.labels?.edit||"Edit"})]}),Q.length===0&&a.jsx("div",{className:"text-center text-muted text-sm py-8 italic",children:d.length===0?A.planner.labels?.createFirst||"Create your first label above!":A.planner.labels?.allApplied||"All labels applied!"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:Q.map(z=>a.jsxs("div",{className:"relative group/item",children:[a.jsxs("button",{onClick:()=>T(z),className:`px-3 py-1.5 rounded-full text-xs font-bold text-white shadow-sm transition-all flex items-center gap-1 ${V?"ring-2 ring-red-500 ring-offset-1 cursor-pointer animate-pulse-slow":"hover:brightness-110 active:scale-95"}`,style:{backgroundColor:z.color},children:[a.jsx(zr,{size:12,strokeWidth:3,className:V?"hidden":"block"}),z.text]}),V&&a.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center border border-white pointer-events-none z-10",children:a.jsx("div",{className:"w-2 h-0.5 bg-white rounded-full"})})]},z.text))})]})]}),a.jsx("div",{className:"h-1 bg-gradient-to-r from-transparent via-border to-transparent"}),a.jsxs("div",{className:"h-[25%] min-h-[120px] bg-surface flex flex-col relative",children:[a.jsx("div",{className:"p-3 bg-muted/5",children:a.jsx("h4",{className:"text-xs font-bold text-muted uppercase tracking-wider",children:A.planner.labels?.applied||"Applied to Course"})}),a.jsx("div",{className:"p-4 overflow-y-auto flex-1 pb-12",children:I.length===0?a.jsx("div",{className:"text-center text-muted text-sm italic py-2",children:A.planner.labels?.noApplied||"No labels applied"}):a.jsx("div",{className:"flex flex-wrap gap-2",children:I.map(z=>a.jsxs("button",{onClick:()=>u(r,z.text,t),className:"px-3 py-1.5 rounded-full text-xs font-bold text-white shadow-md hover:brightness-110 transition-all active:scale-95 flex items-center gap-1.5 group relative overflow-hidden",style:{backgroundColor:z.color},children:[a.jsx("div",{className:"absolute inset-0 bg-black/10 opacity-0 group-hover:opacity-100 transition-opacity"}),a.jsx(vt,{size:12,strokeWidth:3}),z.text]},z.text))})}),a.jsx("div",{className:"absolute bottom-3 right-3",children:a.jsxs("button",{onClick:s,className:"bg-primary hover:bg-primary/90 text-white px-3 py-1.5 rounded-lg text-sm font-bold shadow-lg shadow-primary/20 transition-all active:scale-95 flex items-center gap-1.5",children:[a.jsx(vt,{size:16,strokeWidth:3}),A.common?.confirm||"Done"]})})]})]})]}),document.body)},pO=k.memo(({course:r,isAdded:e,isConflicting:t,highlightedCourseId:s,onAddCourse:A,onOpenSyllabus:l,onLabelClick:d,onCopyId:u,userProfile:f,getTypeBadgeStyle:g,getTypeLabel:x,getCreditColor:y})=>{const{t:v}=At(),{getLabelsForCourse:N}=yd(),R=N(r.id,r.semester);return a.jsxs("div",{id:`course-card-${r.id}`,className:`
                bg-surface border rounded-lg p-2 shadow-sm transition-all group relative hover:shadow-md
                ${t?"border-red-500/50 bg-red-500/5":"border-border hover:border-primary"}
                ${e&&s!==r.id?"opacity-50":""}
            `,children:[s===r.id&&a.jsx("div",{className:"absolute inset-0 z-20 pointer-events-none rounded-lg border-2 border-yellow-400 shadow-[0_0_15px_rgba(250,204,21,0.6)] bg-yellow-400/10 animate-pulse"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:()=>A(r),disabled:e,className:`
                        p-2 rounded-full transition-all shrink-0
                        ${t?"bg-red-500/10 text-red-500 hover:bg-red-500 hover:text-white":"bg-primary/10 hover:bg-primary text-primary hover:text-white"}
                        ${e?"opacity-50 cursor-not-allowed bg-transparent":""}
                    `,title:e?v.planner.alreadyAdded:t?"Add anyway (Conflict)":v.planner.addToDraft,children:e?a.jsx(vt,{size:18}):t?a.jsx(bs,{size:18}):a.jsx(zr,{size:18})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex justify-between items-start gap-2",children:[a.jsx("h3",{className:"font-bold text-foreground text-sm truncate cursor-pointer hover:text-primary hover:underline decoration-primary/50 underline-offset-2 transition-colors flex-1",title:`${r.name} (Click to view syllabus)`,onClick:S=>l(S,r),children:r.name}),a.jsx("button",{onClick:S=>{S.stopPropagation(),d(r)},className:"text-muted hover:text-primary transition-colors p-1",title:"Label Course",children:a.jsx(W2,{size:16})})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-1.5 text-xs text-muted",children:[a.jsx("div",{className:`flex flex-col gap-0.5 ${t?"text-red-500 font-bold":""}`,children:r.parsedTimes&&r.parsedTimes.length>0?r.parsedTimes.map((S,P)=>a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(mx,{size:10}),a.jsx("span",{children:`${{Monday:v.planner.days.mon,Tuesday:v.planner.days.tue,Wednesday:v.planner.days.wed,Thursday:v.planner.days.thu,Friday:v.planner.days.fri,Saturday:v.planner.days.sat,Sunday:v.planner.days.sun}[S.day]||S.day} ${S.startTime}-${S.endTime}`})]},P)):a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(mx,{size:10}),a.jsx("span",{children:"TBA"})]})}),a.jsx("span",{className:"text-border",children:"|"}),a.jsx("span",{children:r.department}),a.jsx("span",{className:"text-border",children:"|"}),a.jsx("span",{children:r.teacher}),r.parsedRoom&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-border",children:"|"}),a.jsx("span",{title:r.room,children:r.parsedRoom})]})]}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsxs("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${y(r.credit)}`,children:[r.credit," cr"]}),a.jsxs("span",{onClick:S=>{S.stopPropagation(),u(r.id)},title:"Click to copy ID",className:"text-[10px] text-muted font-mono bg-background px-1 rounded border border-border/50 cursor-pointer hover:border-primary hover:text-primary transition-colors select-none active:scale-95",children:[v.planner.courseId,": ",r.id]}),R.map(S=>a.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded font-bold shadow-sm backdrop-blur-[2px] border",style:{backgroundColor:`${S.color}26`,color:S.color,borderColor:`${S.color}4D`},children:S.text},S.text)),a.jsx("div",{className:"flex-1"}),r.english&&a.jsx("span",{className:`
                                text-[10px] px-1.5 py-0.5 rounded border font-bold
                                ${f?.studentClass===""?"bg-amber-500/20 text-amber-600 border-amber-500/40 shadow-[0_0_10px_rgba(245,158,11,0.2)]":"bg-amber-500/10 text-amber-600 border-amber-500/20"}
                            `,children:"EMI"}),r.name.includes("")&&a.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded border font-bold bg-slate-500/20 text-slate-500 border-slate-500/40",children:v.categories["Military Training"]||"Military Training"}),a.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${g(r)} whitespace-nowrap`,children:x(r)}),r.tags?.filter(S=>!S.includes("")&&!S.includes("")).map(S=>a.jsx("span",{className:`
                                text-[10px] px-1.5 py-0.5 rounded border bg-gray-500/10 
                                ${S.endsWith("")?"text-gray-600 border-gray-500/20 dark:text-[#C1C1C1] dark:border-[#C1C1C1]":"text-gray-600 border-gray-500/20"}
                            `,children:S},S))]})]})]})]})}),xO=r=>{switch(r.category){case"Major Required":return"bg-[#F26060]/10 text-[#F26060] border-[#F26060]/50 font-bold border-[#F26060] shadow-[0_0_8px_rgba(242,96,96,0.2)] ring-1 ring-[#F26060]/20";case"Major Elective":return"bg-[#79A4E8]/10 text-[#79A4E8] border-[#79A4E8]/20 font-medium";case"General Education":const e=r.genEduSubCategory;return e==="Boya"?"bg-[#997FDC]/10 text-[#997FDC] border-[#997FDC]/20":e==="Chinese"||e==="English"?"bg-[#EC9385]/10 text-[#EC9385] border-[#EC9385]/20":e==="Cross-College"?"bg-[#FCA269]/10 text-[#FCA269] border-[#FCA269]/20":e==="Service"?"bg-[#A48B78]/10 text-[#A48B78] border-[#A48B78]/20":e==="Sports"?"bg-[#79BEB5]/10 text-[#79BEB5] border-[#79BEB5]/20":e==="Primer"?"bg-[#7DC174]/10 text-[#7DC174] border-[#7DC174]/20":"bg-[#C0D762]/10 text-[#C0D762] border-[#C0D762]/20";case"University Way":return"bg-emerald-500/10 text-emerald-600 border-emerald-500/20";default:return"bg-[#79A4E8]/10 text-[#79A4E8] border-[#79A4E8]/20"}},yO=r=>r===1?"bg-[#7DC174]/10 text-[#7DC174] border-[#7DC174]/20":r===2?"bg-[#79A4E8]/10 text-[#79A4E8] border-[#79A4E8]/20":"bg-[#997FDC]/10 text-[#997FDC] border-[#997FDC]/20",bO=({onAddCourse:r,currentSchedule:e=[],userProfile:t,searchTerm:s,onSearchChange:A,highlightedCourseId:l,onHighlightClear:d})=>{const{t:u,language:f}=At(),{courses:g,fetchCourses:x,checkForUpdates:y,loading:v,semesters:N,error:R,usingBackup:S}=la(),[P,V]=k.useState("");k.useEffect(()=>{!P&&N.length>0&&V(N[0])},[N]);const[$,G]=k.useState(!1),[K,Y]=k.useState(""),[q,E]=k.useState(""),[j,B]=k.useState(""),[I,_]=k.useState(!0),[Q,U]=k.useState(""),[T,W]=k.useState(""),[M,F]=k.useState(""),[z,ne]=k.useState(!0),[te,O]=k.useState(!1),[J,Ae]=k.useState(null),{allUserLabels:me,getLabelsForCourse:Ee,courseUserLabels:Be}=yd(),[Ue,Me]=k.useState([]),[$e,Et]=k.useState(!1),Vt=k.useRef(null),ue=k.useRef(null);k.useEffect(()=>{const de=Fe=>{const We=Vt.current&&Vt.current.contains(Fe.target),st=ue.current&&ue.current.contains(Fe.target);!We&&!st&&Et(!1)};return document.addEventListener("mousedown",de),()=>document.removeEventListener("mousedown",de)},[]);const L=de=>{Me(Fe=>Fe.includes(de)?Fe.filter(We=>We!==de):[...Fe,de]),Et(!1)},Z=de=>{Me(Fe=>Fe.filter(We=>We!==de))},[he,ge]=k.useState(null),[Ge,ot]=k.useState(!1);k.useEffect(()=>{if(he){ot(!1);const de=setTimeout(()=>{ot(!0),setTimeout(()=>{ge(null),ot(!1)},300)},2e3);return()=>clearTimeout(de)}},[he]),k.useEffect(()=>{P&&x(P)},[P]),k.useEffect(()=>{if(!P)return;const de=setInterval(()=>{y(P)},6e4);return()=>clearInterval(de)},[P]);const qe=k.useRef(!1);k.useEffect(()=>{l&&(U(""),W(""),F(""),Me([]),O(!1),G(!1),qe.current=!0,setTimeout(()=>{const de=document.getElementById(`course-card-${l}`);de&&de.scrollIntoView({behavior:"auto",block:"center"}),setTimeout(()=>{qe.current=!1},100)},50))},[l]);const Le=()=>{l&&!qe.current&&d&&d()},je=(de,Fe)=>{if(de.stopPropagation(),!Fe.semester||!Fe.id)return;const We=Fe.semester.slice(0,3),Ve=Fe.semester.slice(3),et=`https://selcrs.nsysu.edu.tw/menu5/showoutline.asp?SYEAR=${We}&SEM=${Ve}&CrsDat=${Fe.id}`;window.open(et,"_blank")},Xt=de=>{const Fe=oS(de.classTime),We=Hi(de.classTime),st=de.room?de.room.match(/\((.*?)\)/)?.[1]||de.room:"";return{...de,parsedTime:Fe,parsedTimes:We,parsedRoom:st}},_r=de=>{if(!t?.major)return!1;const Fe=t.major.replace(/[]/g,"");return de.replace(/[]/g,"")===Fe||de.includes(Fe)||Fe.includes(de)},zt=P?parseInt(P.substring(0,3)):0,ve=t&&zt?zt-t.entranceYear+1:0;k.useEffect(()=>{if($&&t&&P){if(t.major&&Y(t.major),t.entranceYear){const de=zt-t.entranceYear+1;de>=1&&de<=4?E(de.toString()):E("-")}t.studentClass?B(t.studentClass):B("-"),_(!0)}},[$,P,t]);const It=de=>{const Fe=qo(de,t?.major,ve);return xO(Fe)},Rr=de=>{const Fe=qo(de,t?.major),We=_r(de.department),{compulsory:st,grade:Ve}=de;if(Fe.category==="General Education"){const et=Fe.genEduSubCategory||"General Education";return u.categories?.[et]||et}return f==="en"?We?st&&parseInt(Ve)===ve?"Major Req":"Major Elec":st?"Required":"Elective":We?st&&parseInt(Ve)===ve?"":"":st?"":""},wt=k.useMemo(()=>g.filter(de=>de.semester===P).length,[g,P]),xr=k.useMemo(()=>v||!P||P.endsWith("3")?!1:wt>0&&wt<2e3,[v,P,wt]),vs=k.useMemo(()=>g.filter(de=>{if(de.semester!==P)return!1;if($){if(K&&de.department!==K&&!de.department.includes(K.replace(/[]/g,""))||de.department.endsWith("")||de.department.endsWith("")||de.department.endsWith("")||de.department.includes("")||de.department.includes("")||de.department.includes("")||q&&q!=="-"&&de.grade!==q)return!1;if(j&&j!=="-"){const Ve=de.class||"";if(j===""){if(!(Ve.includes("")||de.english===!0))return!1}else if(j===""){if(!Ve.includes(""))return!1}else if(j===""){if(!Ve.includes(""))return!1}else if(j===""&&!Ve.includes(""))return!1}return!(!I&&!de.compulsory)}if(Ue.length>0){const Ve=Ee(de.id,P).map(yr=>yr.text);if(!Ue.every(yr=>Ve.includes(yr)))return!1}const Fe=/[\s,]+/,We=s.toLowerCase().split(Fe).filter(Ve=>Ve.trim().length>0);if(We.length>0&&!We.every(et=>{const yr=de.name.toLowerCase().includes(et)||de.teacher.toLowerCase().includes(et)||de.id.toLowerCase().includes(et)||de.department.toLowerCase().includes(et);let ss=!1;if(!yr)if((ws=>de.tags?.some(Kt=>Kt.includes(ws)))(et))ss=!0;else{const ws=de.compulsory;(et==="required"||et==="req"||et===""||et==="")&&ws&&(ss=!0),(et==="elective"||et==="elec"||et===""||et==="")&&!ws&&(ss=!0),et==="emi"&&de.english&&(ss=!0)}return yr||ss}))return!1;let st=!0;if(Q){const Ve=qo(de,t?.major),et=["Boya","Sports","Cross-College","Chinese","English","Service"].includes(Q);Q==="EAP/ESP"?Ve.isEapEsp||(st=!1):et?(Ve.genEduSubCategory!==Q&&(st=!1),st&&Q==="Boya"&&T&&Ve.boyaDimension!==T&&(st=!1)):Ve.category!==Q&&(st=!1)}if(!st||M&&!Hi(de.classTime).some(et=>et.day.includes(M)))return!1;if(!z&&e.length>0){const Ve=Hi(de.classTime);if(Ve.length>0&&Ve.some(yr=>{const ss={...de,day:yr.day,startTime:yr.startTime,endTime:yr.endTime};return e.some(ns=>ns.day===ss.day&&Gx(ss,ns))}))return!1}return!(te&&!qo(de,t?.major).isEMI)}).map(Xt),[g,P,s,Ue,Q,T,M,z,te,e,t,Be,$,K,q,j,I]),rs=k.useMemo(()=>{const de=new Set;return e.length===0||vs.forEach(Fe=>{if(!Fe.parsedTimes||Fe.parsedTimes.length===0)return;Fe.parsedTimes.some(st=>{const Ve={...Fe,day:st.day,startTime:st.startTime,endTime:st.endTime};return e.some(et=>et.day===Ve.day&&Gx(Ve,et))})&&de.add(Fe.id)}),de},[vs,e]);return a.jsxs("div",{className:"flex flex-col h-full bg-background border-l border-border",children:[a.jsxs("div",{className:"p-2 md:p-4 border-b border-border space-y-2 md:space-y-3 bg-background/50 backdrop-blur-sm",children:[a.jsx("div",{className:"flex items-center justify-between mb-1 md:mb-2",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(rd,{className:"text-primary",size:20}),a.jsx("h2",{className:"font-bold text-lg",children:u.catalog.title})]}),a.jsxs("div",{className:"flex items-center gap-2 bg-background border border-border rounded-md px-2 py-1",children:[a.jsx(FD,{size:14,className:"text-muted"}),a.jsx("select",{value:P,onChange:de=>V(de.target.value),className:"bg-transparent text-sm outline-none text-foreground cursor-pointer",children:N.map(de=>{const Fe=de.slice(0,3),We=de.slice(3),st=We==="3"?`${Fe}-Summer`:`${Fe}-${We}`;return a.jsx("option",{value:de,className:"bg-surface text-foreground",children:de.length===4?st:de},de)})})]}),a.jsxs("div",{className:"flex items-center bg-surface/50 rounded-lg p-1 border border-border/50",children:[a.jsx("button",{onClick:()=>{G(!1),A("")},className:`px-3 py-1 rounded-md text-xs font-medium transition-all ${$?"text-muted hover:text-foreground":"bg-primary text-white dark:text-[#303030] shadow-sm"}`,children:u.catalog.mode?.all||"All Courses"}),a.jsx("button",{onClick:()=>{G(!0),A(""),Me([])},className:`px-3 py-1 rounded-md text-xs font-medium transition-all ${$?"bg-primary text-white dark:text-[#303030] shadow-sm":"text-muted hover:text-foreground"}`,children:u.catalog.mode?.compulsory||"Import Compulsory"})]})]})}),$?a.jsxs("div",{className:"w-full bg-background border border-border rounded-lg p-2 md:p-3 flex flex-row md:flex-wrap overflow-x-auto hide-scrollbar gap-2 md:gap-4 items-center animate-in fade-in slide-in-from-top-1",children:[a.jsxs("div",{className:"flex flex-col gap-0.5 md:gap-1 min-w-[130px]",children:[a.jsxs("label",{className:"text-[10px] md:text-xs text-muted flex items-center gap-1",children:[a.jsx(f5,{size:12,className:"hidden md:inline"}),u.catalog.label?.major||"Major"]}),a.jsxs("select",{value:K,onChange:de=>Y(de.target.value),className:"text-sm bg-surface border border-border rounded px-2 py-1.5 outline-none focus:border-primary",children:[a.jsx("option",{value:"",children:"-"}),$f.map(de=>a.jsx("optgroup",{label:de.category,className:"text-primary font-bold",children:de.departments.map(Fe=>a.jsx("option",{value:Fe,className:"text-foreground font-normal",children:Fe},Fe))},de.category))]})]}),a.jsxs("div",{className:"flex flex-col gap-0.5 md:gap-1 min-w-[80px] md:min-w-[100px]",children:[a.jsxs("label",{className:"text-[10px] md:text-xs text-muted flex items-center gap-1",children:[a.jsx(tr,{size:12,className:"hidden md:inline"}),u.catalog.label?.grade||"Grade"]}),a.jsxs("select",{value:q,onChange:de=>E(de.target.value),className:"text-sm bg-surface border border-border rounded px-2 py-1.5 outline-none focus:border-primary",children:[a.jsx("option",{value:"-",children:"-"}),[1,2,3,4].map(de=>a.jsx("option",{value:de,children:u.catalog.grades?.[de]||`Year ${de}`},de))]})]}),a.jsxs("div",{className:"flex flex-col gap-0.5 md:gap-1 min-w-[100px] md:min-w-[140px]",children:[a.jsxs("label",{className:"text-[10px] md:text-xs text-muted flex items-center gap-1",children:[a.jsx(dk,{size:12,className:"hidden md:inline"}),u.catalog.label?.class||"Class"]}),a.jsxs("select",{value:j,onChange:de=>B(de.target.value),className:"text-sm bg-surface border border-border rounded px-2 py-1.5 outline-none focus:border-primary",children:[a.jsx("option",{value:"-",children:u.catalog.class?.none||"-"}),a.jsx("option",{value:"",children:u.catalog.class?.shared||"Shared"}),a.jsx("option",{value:"",children:u.catalog.class?.a||"Class A"}),a.jsx("option",{value:"",children:u.catalog.class?.b||"Class B"}),a.jsx("option",{value:"",children:u.catalog.class?.english||"English Class"})]})]}),a.jsxs("div",{className:"flex flex-col gap-0.5 md:gap-1 shrink-0",children:[a.jsxs("div",{className:"text-[10px] md:text-xs text-muted flex items-center gap-1 opacity-0 select-none hidden md:flex",children:[a.jsx(Ap,{size:12}),a.jsx("span",{children:"Spacer"})]}),a.jsxs("label",{className:"flex items-center gap-1.5 md:gap-2 px-2 md:px-3 py-1 md:py-1.5 rounded border border-border bg-surface hover:bg-surface/80 cursor-pointer transition-colors select-none h-[30px] md:h-[34px] mt-0 md:mt-0",children:[a.jsx("div",{className:`
                                    w-3.5 h-3.5 rounded border flex items-center justify-center transition-colors
                                    ${I?"bg-primary border-primary text-white":"bg-transparent border-muted text-transparent"}
                                `,children:I&&a.jsx(vt,{size:10,strokeWidth:4})}),a.jsx("input",{type:"checkbox",className:"hidden",checked:I,onChange:()=>_(!I)}),a.jsx("span",{className:`text-xs md:text-sm ${I?"text-primary font-medium":"text-muted-foreground"} whitespace-nowrap`,children:u.catalog.includeElectives||"Include Electives"})]})]}),a.jsxs("div",{className:"hidden md:block ml-auto text-xs text-muted italic border-l border-border pl-3",children:["Checking ",a.jsxs("strong",{children:[K||"..."," - ",u.catalog.grades?.[q]||"-"]}),I&&a.jsx("span",{children:" (+Electives)"})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"relative group z-20",children:[a.jsxs("div",{className:"w-full bg-background border border-border rounded-lg pl-3 pr-10 py-1.5 focus-within:ring-2 focus-within:ring-primary flex flex-wrap items-center gap-2 min-h-[42px]",children:[Ue.map(de=>{const We=me.find(st=>st.text===de)?.color||"#94a3b8";return a.jsxs("div",{className:"flex items-center gap-1 px-2 py-0.5 rounded-md text-xs font-medium cursor-pointer transition-all hover:ring-1 hover:ring-red-500 group/chip",style:{backgroundColor:`${We}20`,color:We,border:`1px solid ${We}40`},onClick:()=>Z(de),children:[a.jsx("span",{children:de}),a.jsx("div",{className:"hidden group-hover/chip:flex bg-red-500 text-white rounded-full w-3 h-3 items-center justify-center",children:a.jsx("svg",{width:"8",height:"8",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})})})]},de)}),a.jsx("input",{type:"text",placeholder:Ue.length>0?"":u.planner.search.placeholder,value:s,onChange:de=>A(de.target.value),className:"bg-transparent outline-none flex-1 min-w-[120px] text-sm py-1"})]}),a.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1",children:[v&&a.jsx(X2,{className:"animate-spin text-muted mr-1",size:16}),(s||Ue.length>0)&&a.jsx("button",{onClick:()=>{A(""),Me([])},className:"text-muted hover:text-foreground p-1",children:a.jsx("div",{className:"bg-muted/20 hover:bg-muted/40 rounded-full p-0.5",children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 6 6 18"}),a.jsx("path",{d:"m6 6 12 12"})]})})}),a.jsx("button",{ref:ue,onClick:()=>Et(!$e),className:`p-1.5 rounded-md transition-colors ${Ue.length>0?"text-primary bg-primary/10":"text-muted hover:text-foreground hover:bg-muted/20"}`,title:"Filter by Label",children:a.jsx(Ap,{size:16})})]}),$e&&a.jsxs("div",{ref:Vt,className:"absolute top-full left-0 right-0 mt-2 p-2 bg-surface border border-border rounded-lg shadow-xl z-50 animate-in fade-in slide-in-from-top-2",children:[a.jsx("div",{className:"text-xs font-semibold text-muted mb-2 px-1 uppercase tracking-wider",children:u.planner.labels.library}),a.jsx("div",{className:"flex flex-wrap gap-2 max-h-[200px] overflow-y-auto custom-scrollbar p-1",children:me.length===0?a.jsx("div",{className:"text-sm text-muted italic w-full text-center py-2",children:u.planner.labels.noLabels}):me.map(de=>{const Fe=Ue.includes(de.text);return a.jsx("button",{onClick:()=>L(de.text),className:`
                                                        px-2 py-1 rounded-md text-xs border transition-all
                                                        ${Fe?"opacity-50 grayscale cursor-not-allowed":"hover:scale-105 active:scale-95"}
                                                    `,style:{backgroundColor:`${de.color}20`,color:de.color,borderColor:`${de.color}40`},disabled:Fe,children:de.text},de.text)})})]})]}),a.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-1 custom-scrollbar",children:[a.jsxs("select",{value:M,onChange:de=>F(de.target.value),className:"bg-background border border-border rounded-md px-2 py-1 text-sm outline-none focus:border-primary",children:[a.jsx("option",{value:"",children:u.planner.days.any}),a.jsx("option",{value:"Mon",children:u.planner.days.mon}),a.jsx("option",{value:"Tue",children:u.planner.days.tue}),a.jsx("option",{value:"Wed",children:u.planner.days.wed}),a.jsx("option",{value:"Thu",children:u.planner.days.thu}),a.jsx("option",{value:"Fri",children:u.planner.days.fri})]}),a.jsxs("select",{value:Q,onChange:de=>{U(de.target.value),W("")},className:"bg-background border border-border rounded-md px-2 py-1 text-sm outline-none focus:border-primary max-w-[150px]",children:[a.jsx("option",{value:"",children:u.planner.depts.all}),a.jsx("option",{value:"Major Required",children:u.categories?.["Major Required"]||"Major Required"}),a.jsx("option",{value:"Major Elective",children:u.categories?.["Major Elective"]||"Major Elective"}),a.jsx("option",{value:"Boya",children:u.categories?.Boya||"Boya"}),a.jsx("option",{value:"Sports",children:u.categories?.Sports||"Sports"}),a.jsx("option",{value:"Cross-College",children:u.categories?.["Cross-College"]||"Cross-College"}),a.jsx("option",{value:"Chinese",children:u.categories?.Chinese||"Chinese"}),a.jsx("option",{value:"English",children:u.categories?.English||"English"}),a.jsx("option",{value:"EAP/ESP",children:u.categories?.["EAP/ESP"]||"EAP / ESP"}),a.jsx("option",{value:"Other",children:u.categories?.Other||"Other"})]}),Q==="Boya"&&a.jsxs("select",{value:T,onChange:de=>W(de.target.value),className:"bg-background border border-border rounded-md px-2 py-1 text-sm outline-none focus:border-primary max-w-[150px] animate-in slide-in-from-left-2 fade-in duration-300",children:[a.jsx("option",{value:"",children:f==="zh"?"":"All Dimensions"}),bx.map(de=>a.jsx("option",{value:de,children:u.categories?.[de]||de},de))]}),a.jsxs("label",{className:"flex items-center gap-1 px-2 py-1 md:px-3 md:py-1.5 rounded-full md:rounded-md border border-border bg-surface hover:bg-surface/80 cursor-pointer transition-colors select-none whitespace-nowrap",children:[a.jsx("div",{className:`
                                w-3.5 h-3.5 md:w-4 md:h-4 rounded border flex items-center justify-center transition-colors
                                ${z?"bg-red-500 border-red-500 text-white":"bg-transparent border-muted text-transparent"}
                            `,children:z&&a.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("polyline",{points:"20 6 9 17 4 12"})})}),a.jsx("input",{type:"checkbox",className:"hidden",checked:z,onChange:()=>ne(!z)}),a.jsx("span",{className:`text-xs md:text-sm ${z?"text-red-500 font-medium":"text-muted-foreground"}`,children:u.planner.showConflicts})]}),a.jsxs("label",{className:"flex items-center gap-1 px-2 py-1 md:px-3 md:py-1.5 rounded-full md:rounded-md border border-border bg-surface hover:bg-surface/80 cursor-pointer transition-colors select-none whitespace-nowrap",children:[a.jsx("div",{className:`
                                w-3.5 h-3.5 md:w-4 md:h-4 rounded border flex items-center justify-center transition-colors
                                ${te?"bg-sky-500 border-sky-500 text-white":"bg-transparent border-muted text-transparent"}
                            `,children:te&&a.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("polyline",{points:"20 6 9 17 4 12"})})}),a.jsx("input",{type:"checkbox",className:"hidden",checked:te,onChange:()=>O(!te)}),a.jsx("span",{className:`text-xs md:text-sm ${te?"text-sky-500 font-medium":"text-muted-foreground"}`,children:u.planner.showEMIOnly||"EMI Only"})]})]})]}),a.jsxs("div",{className:"flex justify-between items-center text-xs text-muted pt-1 px-1",children:[a.jsxs("div",{className:"flex items-center gap-1.5 opacity-70",title:S?"Using offline backup":"Auto-checking for updates every 60s",children:[a.jsxs("span",{className:"relative flex h-2 w-2",children:[!S&&a.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),a.jsx("span",{className:`relative inline-flex rounded-full h-2 w-2 ${S?"bg-gray-400":"bg-green-500"}`})]}),a.jsx("span",{children:S?"Backup Course Data":"Latest Course Data"})]}),a.jsxs("span",{children:[vs.length," ",u.catalog.coursesFound]})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 pb-24 space-y-2 custom-scrollbar bg-background/20 relative",onScroll:Le,onClickCapture:Le,children:[xr&&a.jsxs("div",{className:"sticky top-0 z-10 bg-orange-500/10 border border-orange-500/20 text-orange-600 text-xs px-3 py-2 rounded-lg mb-2 flex items-start gap-2 backdrop-blur-md animate-in slide-in-from-top-2",children:[a.jsx(bs,{size:14,className:"mt-0.5 flex-shrink-0"}),a.jsx("span",{children:u.planner.incompleteDataWarning?.replace("{{count}}",wt.toString())||`Warning: Low course count (${wt}). University API might be updating.`})]}),R?a.jsxs("div",{className:"text-center text-red-500 py-10 flex flex-col items-center animate-in fade-in",children:[a.jsx(bs,{size:32,className:"mb-2 opacity-80"}),a.jsx("p",{className:"font-medium",children:u.planner.search.failed}),a.jsx("p",{className:"text-xs text-muted mt-1 max-w-[200px]",children:R}),a.jsx("button",{onClick:()=>P&&x(P),className:"mt-4 text-xs bg-surface border border-border px-3 py-1.5 rounded-lg hover:bg-surface/80 transition-colors",children:u.planner.search.retry})]}):vs.length===0?a.jsxs("div",{className:"text-center text-muted py-10 flex flex-col items-center",children:[a.jsx(Ap,{size:32,className:"mb-2 opacity-50"}),a.jsx("p",{children:s||$?u.catalog.noResults:u.planner.search.noResults})]}):vs.map((de,Fe)=>{const We=rs.has(de.id),st=e.some(et=>et.id===de.id),Ve=et=>yO(parseInt(et));return a.jsx(pO,{course:de,isAdded:st,isConflicting:We,highlightedCourseId:l,onAddCourse:r,onOpenSyllabus:je,onLabelClick:Ae,onCopyId:et=>{navigator.clipboard.writeText(et).then(()=>{ge(u.planner.courseIdCopied)})},userProfile:t,currentGrade:ve,getTypeBadgeStyle:It,getTypeLabel:Rr,getCreditColor:Ve},`${de.id}-${Fe}`)})]}),he&&a.jsxs("div",{className:`
                    absolute bottom-4 left-1/2 -translate-x-1/2 
                    bg-foreground text-background text-xs font-bold px-3 py-2 rounded-full shadow-lg z-50 flex items-center gap-2
                    transition-all duration-300
                    ${Ge?"opacity-0 translate-y-2 scale-95":"opacity-100 translate-y-0 scale-100 animate-in slide-in-from-bottom-2 fade-in"}
                `,children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500"}),he]}),J&&a.jsx(gO,{courseId:J.id,courseName:J.name,semester:J.semester,onClose:()=>Ae(null)})]})},vO=({draftCourses:r,existingCourses:e,targetSemester:t,onConfirm:s,onCancel:A})=>{const{t:l,language:d}=At(),u=e.filter(y=>y.semester===t),f=r.filter(y=>u.some(v=>v.originalId===y.id&&v.originalSemester===y.originalSemester)),g=r.reduce((y,v)=>y+(Number(v.credits)||0),0),x=u.reduce((y,v)=>y+(Number(v.credits)||0),0);return a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-surface border border-border rounded-xl w-full max-w-6xl h-[90vh] flex flex-col shadow-2xl overflow-hidden",children:[a.jsxs("div",{className:"p-4 border-b border-border bg-background/50 flex justify-between items-center shrink-0",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-foreground flex items-center gap-2",children:l.planner.exportPreview?.title||"Export Preview"}),a.jsxs("p",{className:"text-sm text-muted",children:[l.planner.exportPreview?.desc||"Confirm changes before exporting to"," ",a.jsx("strong",{children:t})]})]}),a.jsx("button",{onClick:A,className:"text-muted hover:text-foreground transition-colors",children:a.jsx(ut,{size:24})})]}),a.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col md:flex-row divide-y md:divide-y-0 md:divide-x divide-border",children:[a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden bg-surface/30",children:[a.jsxs("div",{className:"p-3 bg-primary/10 border-b border-primary/20 flex justify-between items-center",children:[a.jsx("span",{className:"font-bold text-primary",children:l.planner.exportPreview?.draftSource||"Draft (Source)"}),a.jsxs("span",{className:"text-xs bg-primary/20 text-primary px-2 py-1 rounded",children:["+",r.length," ",l.app.totalCourses," (",g," cr)"]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-2 custom-scrollbar",children:a.jsx(pf,{semester:"Draft",courses:r.filter(y=>!y.isExemption),onCourseClick:()=>{},id:"preview-source-grid",readOnly:!0})})]}),a.jsx("div",{className:"hidden md:flex items-center justify-center w-12 bg-background/50 z-10",children:a.jsx("div",{className:"bg-surface border border-border p-2 rounded-full shadow-lg",children:a.jsx(eC,{className:"text-muted-foreground",size:24})})}),a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden bg-surface/30",children:[a.jsxs("div",{className:"p-3 bg-surface border-b border-border flex justify-between items-center",children:[a.jsxs("span",{className:"font-bold text-foreground",children:[l.planner.exportPreview?.destination||"Destination"," (",t,")"]}),a.jsxs("span",{className:"text-xs bg-surface border border-border text-muted px-2 py-1 rounded",children:[l.planner.exportPreview?.current||"Current",": ",u.length," ",l.app.totalCourses," (",x," cr)"]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-2 custom-scrollbar relative",children:[u.length===0&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-muted/50 font-medium",children:l.planner.exportPreview?.empty||"Empty Schedule"}),a.jsx(pf,{semester:t,courses:u,onCourseClick:()=>{},id:"preview-dest-grid",readOnly:!0})]}),u.length>0&&a.jsxs("div",{className:"p-2 bg-yellow-500/10 border-t border-yellow-500/20 text-xs text-yellow-500 flex flex-col items-center gap-1 justify-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(bs,{size:14}),a.jsx("span",{children:l.planner.exportPreview?.warning||"Existing courses will remain. New courses will be added."})]}),f.length>0&&a.jsxs("div",{className:"text-red-400 font-semibold mt-1",children:[f.length," ",d==="zh"?"":"course(s) already exist and will be skipped."]})]})]})]}),a.jsxs("div",{className:"p-4 border-t border-border bg-background/50 flex justify-end gap-3 shrink-0",children:[a.jsx("button",{onClick:A,className:"px-4 py-2 rounded-lg text-sm font-medium hover:bg-surface border border-transparent hover:border-border transition-all",children:l.planner.exportPreview?.cancel||"Cancel"}),a.jsxs("button",{onClick:s,className:"bg-primary hover:bg-sky-400 text-white px-6 py-2 rounded-lg text-sm font-bold shadow-lg shadow-primary/20 transition-all flex items-center gap-2",children:[l.planner.exportPreview?.confirm||"Confirm Export",a.jsx(eC,{size:16})]})]})]})})},m1="Draft",wO=({semesters:r,onAddCourse:e,userProfile:t,existingCourses:s,onSaveCourses:A})=>{const{t:l,language:d}=At(),[u,f]=k.useState(!1),[g,x]=k.useState(()=>{const te=localStorage.getItem("nsysu-planner-draft");let O=te?JSON.parse(te):[];const J={"08:00":"08:10","09:00":"09:10","10:00":"10:10","11:00":"11:10","12:00":"12:10","13:00":"13:10","14:00":"14:10","15:00":"15:10","16:00":"16:10","17:00":"17:10","18:30":"18:10","19:30":"19:10","20:30":"20:10","21:30":"21:10"};return O=O.map(Ae=>Ae.startTime&&J[Ae.startTime]?{...Ae,startTime:J[Ae.startTime]}:Ae),O});k.useEffect(()=>{localStorage.setItem("nsysu-planner-draft",JSON.stringify(g))},[g]);const[y,v]=k.useState(!1),[N,R]=k.useState(()=>{const te=localStorage.getItem("nsysu-planner-last-export-semester");return te&&r.includes(te)?te:r.length>0?r[0]:""}),[S,P]=k.useState(""),[V,$]=k.useState(void 0),[G,K]=k.useState(!0),Y=te=>{const O=oS(te.classTime);if(g.some(Be=>Be.id===te.id)){alert("Course already in draft!");return}const J=te.semester?te.semester.substring(0,3):r.length>0?r[0].substring(0,3):"113",Ae=t&&!isNaN(parseInt(J))?parseInt(J)-t.entranceYear+1:1,me=qo(te,t.major,Ae),Ee={id:te.id,name:te.name,credits:Number(te.credit)||3,grade:"",category:me.category,genEduSubCategory:me.genEduSubCategory,boyaDimension:me.boyaDimension,semester:m1,day:O?.day,startTime:O?.startTime,endTime:O?.endTime,classTime:te.classTime,room:te.room?te.room.match(/\((.*?)\)/)?.[1]||te.room:void 0,isEMI:me.isEMI,isEapEsp:me.isEapEsp,teacher:te.teacher,department:te.department,originalTags:te.tags,originalSemester:te.semester,originalId:te.id,userLabels:[]};x(Be=>[...Be,Ee]),f(!1)},[q,E]=k.useState(null),j=te=>{E(te)},B=()=>{q&&(x(te=>te.filter(O=>O.id!==q.id)),E(null))},[I,_]=k.useState(!1);k.useEffect(()=>{if(I){const te=setTimeout(()=>_(!1),3e3);return()=>clearTimeout(te)}},[I]);const Q=()=>{if(g.length===0){_(!1),alert("Draft board is already clear!");return}I?(x([]),_(!1)):_(!0)},[U,T]=k.useState(!1),W=()=>{if(g.length!==0){if(!N){alert("Please select a semester to export to.");return}T(!0)}},{courses:M}=la(),F=()=>{const te=[],O=s.filter(me=>me.semester===N);let J=0;g.forEach(me=>{if(O.some(Me=>Me.originalId===me.id&&Me.originalSemester===me.originalSemester)){J++;return}let Be=me;if(Be.originalId){const Me=M.find($e=>$e.id===Be.originalId);Me&&(Be={...Be,room:Me.room?Me.room.match(/\((.*?)\)/)?.[1]||Me.room:Be.room,teacher:Me.teacher||Be.teacher,classTime:Me.classTime||Be.classTime,department:Me.department||Be.department,originalTags:Me.tags||Be.originalTags,originalSemester:Me.semester||Be.originalSemester,...Me.classTime?(()=>{const $e=Hi(Me.classTime||[]);return $e.length>0?{day:$e[0].day,startTime:$e[0].startTime,endTime:$e[0].endTime}:{}})():{}})}const Ue={...Be,id:crypto.randomUUID(),courseCode:me.id,semester:N,fromCatalog:!0};te.push(Ue)}),A?A(te):te.forEach(me=>e(me));let Ae=d==="zh"?` ${te.length}  ${N}`:`Successfully exported ${te.length} courses to ${N}!`;J>0&&(Ae+=d==="zh"?`
 ${J} `:`
Skipped ${J} existing duplicate courses.`),localStorage.setItem("nsysu-planner-last-export-semester",N),alert(Ae),v(!1),T(!1)},z=te=>{P(""),$(te.id)},ne=te=>{if(l.semesters[te])return l.semesters[te];if(d==="zh"&&te.startsWith("Year ")){const O=te.split(" "),J=O[1],Ae=O.slice(2).join(" "),Ee=["","","","","","","",""][parseInt(J)-1]||J;if(Ae==="Summer")return`${Ee} `;if(Ae==="Sem 1")return`${Ee} `;if(Ae==="Sem 2")return`${Ee} `}else if(te.startsWith("Year ")){const O=te.split(" "),J=O[1],Ae=O.slice(2).join(" ");if(Ae==="Sem 1")return`Year ${J} Fall Semester`;if(Ae==="Sem 2")return`Year ${J} Spring Semester`;if(Ae==="Summer")return`Year ${J} Summer`}return te};return a.jsxs("div",{className:"flex flex-col lg:flex-row h-[calc(100vh-80px)] gap-2 animate-in fade-in slide-in-from-bottom-2 duration-500 p-2",children:[a.jsxs("div",{id:"planner-draft-board",className:"flex-[2] lg:flex-[55] flex flex-col min-w-0 bg-background border border-border rounded-xl overflow-hidden shadow-sm",children:[a.jsxs("div",{className:"p-3 border-b border-border flex justify-between items-center bg-background backdrop-blur-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"bg-primary/20 p-1.5 rounded-md text-primary",children:a.jsx(AC,{size:18})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h2",{className:"font-bold text-foreground text-sm sm:text-base",children:l.planner.title}),a.jsxs("span",{className:"text-xs px-2 py-1 rounded-md bg-primary/10 text-primary font-bold border border-primary/20",children:[l.dashboard.totalCredits,": ",g.reduce((te,O)=>te+(Number(O.credits)||0),0)," cr"]})]}),a.jsx("p",{className:"text-[10px] text-muted hidden sm:block",children:"Experiment freely."})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer bg-surface border border-border px-2 py-1.5 rounded-lg hover:bg-surface/80 transition-colors",children:[a.jsx("input",{type:"checkbox",checked:G,onChange:te=>K(te.target.checked),className:"accent-red-500 w-3.5 h-3.5 cursor-pointer"}),a.jsx("span",{className:"text-xs font-medium text-muted hover:text-foreground select-none",children:l.planner.showConflicts})]}),a.jsxs("button",{onClick:Q,className:`
                                px-2 py-1.5 rounded-lg text-xs font-medium transition-all border flex items-center gap-1
                                ${I?"bg-red-500 text-white border-red-500 hover:bg-red-600 animate-in fade-in zoom-in duration-200":"bg-surface hover:bg-red-500/10 text-muted hover:text-red-500 border-border hover:border-red-500/30"}
                            `,title:l.planner.clear,children:[a.jsx(sd,{size:14,className:I?"animate-pulse":""}),a.jsx("span",{className:"hidden sm:inline",children:I?"Really Clear?":l.planner.clear})]}),a.jsx("div",{className:"h-5 w-[1px] bg-border mx-1"}),y?a.jsxs("div",{className:"flex items-center gap-2 animate-in slide-in-from-right-2",children:[a.jsx("select",{value:N,onChange:te=>R(te.target.value),className:"bg-background border border-border text-foreground rounded-lg px-2 py-1 text-xs focus:ring-2 focus:ring-primary outline-none",children:r.map(te=>a.jsx("option",{value:te,children:ne(te)},te))}),a.jsx("button",{onClick:W,className:"bg-primary hover:bg-[#8299BB] text-white dark:text-[#303030] px-3 py-1 rounded-lg text-xs font-bold shadow-sm transition-colors",children:"OK"}),a.jsx("button",{onClick:()=>v(!1),className:"text-muted hover:text-foreground px-1 text-xs",children:l.form.cancel})]}):a.jsxs("button",{onClick:()=>v(!0),className:"bg-primary hover:bg-[#8299BB] text-white dark:text-[#303030] px-3 py-1.5 rounded-lg text-xs font-bold shadow-lg shadow-primary/20 transition-all flex items-center gap-1",children:[a.jsx(AC,{size:14}),l.planner.export]})]})]}),a.jsx("div",{className:"flex-1 overflow-hidden relative p-1",children:a.jsx("div",{className:"h-full overflow-y-auto custom-scrollbar rounded-lg border border-border/50 bg-background/50",children:a.jsx(pf,{semester:m1,courses:g.filter(te=>!te.isExemption),onCourseClick:z,onRemoveCourse:j,id:"planner-schedule-grid",showConflictWarnings:G})})})]}),a.jsxs("div",{id:"planner-search-panel",className:`
                    lg:relative lg:flex lg:flex-[45] lg:flex-shrink-0 lg:h-full lg:rounded-xl lg:overflow-hidden lg:shadow-xl lg:border lg:border-border/50
                    ${u?"fixed inset-x-0 bottom-0 z-[6000] h-[95vh] bg-background rounded-t-3xl shadow-2xl border-t border-border flex flex-col md:hidden animate-in slide-in-from-bottom-full duration-300":"hidden md:hidden lg:flex"}
                `,children:[a.jsxs("div",{className:"lg:hidden flex justify-between items-center p-4 border-b border-border bg-surface/50 backdrop-blur-md rounded-t-2xl",children:[a.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2 text-foreground",children:[a.jsx(rd,{size:20,className:"text-primary"}),d==="zh"?"":"Course Catalog"]}),a.jsx("button",{onClick:()=>f(!1),className:"p-2 rounded-full bg-background/50 hover:bg-surface text-muted hover:text-foreground transition-colors border border-border/50",children:a.jsx(ut,{size:20})})]}),a.jsx("div",{className:"flex-1 overflow-hidden",children:a.jsx(bO,{onAddCourse:Y,currentSchedule:g,userProfile:t,searchTerm:S,onSearchChange:te=>{P(te),te&&$(void 0)},highlightedCourseId:V,onHighlightClear:()=>$(void 0)})})]}),u&&a.jsx("div",{className:"fixed inset-0 bg-black/60 z-[5000] lg:hidden backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>f(!1)}),a.jsxs("button",{onClick:()=>f(!0),className:"lg:hidden fixed bottom-20 right-6 z-40 px-5 py-3.5 bg-primary text-white rounded-full shadow-lg shadow-top shadow-primary/30 flex items-center justify-center hover:scale-105 active:scale-95 transition-all outline-none focus:outline-none",children:[a.jsx(rd,{size:22,className:"stroke-[2.5px] mr-2"}),a.jsx("span",{className:"font-bold tracking-wide",children:d==="zh"?"":"Search Courses"})]}),U&&a.jsx(vO,{draftCourses:g,existingCourses:s,targetSemester:N,onConfirm:F,onCancel:()=>T(!1)}),a.jsx(J0,{isOpen:!!q,title:d==="zh"?"":"Remove Course?",message:q?l.app.deleteConfirm||`Remove ${q.name} from draft?`:"",confirmText:l.courseList.remove||"Remove",cancelText:l.form.cancel,isDestructive:!0,onConfirm:B,onCancel:()=>E(null)})]})},BO=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Qi={A:{start:"07:00",end:"07:50"},1:{start:"08:10",end:"09:00"},2:{start:"09:10",end:"10:00"},3:{start:"10:10",end:"11:00"},4:{start:"11:10",end:"12:00"},B:{start:"12:10",end:"13:00"},5:{start:"13:10",end:"14:00"},6:{start:"14:10",end:"15:00"},7:{start:"15:10",end:"16:00"},8:{start:"16:10",end:"17:00"},9:{start:"17:10",end:"18:00"},C:{start:"18:20",end:"19:10"},D:{start:"19:15",end:"20:05"},E:{start:"20:10",end:"21:00"},F:{start:"21:05",end:"21:55"}},qx=r=>{if(!Array.isArray(r))return null;for(let e=0;e<7;e++){const t=r[e];if(t&&t.length>0){const s=(e+1)%7,A=BO[s],l=t[0],d=t[t.length-1];let u,f;if(Qi[l]&&(u=Qi[l].start),Qi[d]&&(f=Qi[d].end),A&&u&&f)return{day:A,startTime:u,endTime:f}}}return null},KA=({onClose:r,onSelect:e,defaultSearch:t=""})=>{const{t:s}=At(),{semesters:A,courses:l,fetchCourses:d,loading:u}=la(),[f,g]=k.useState(""),[x,y]=k.useState(t);k.useEffect(()=>{A.length>0&&!f&&(g(A[0]),d(A[0]))},[A]);const v=G=>{const K=G.target.value;g(K),d(K)},[N,R]=k.useState("");k.useEffect(()=>{const G=setTimeout(()=>{R(x)},300);return()=>clearTimeout(G)},[x]);const S=(G,K)=>{if(G.stopPropagation(),!K.semester||!K.id)return;const Y=K.semester.slice(0,3),E=K.semester.slice(3),j=`https://selcrs.nsysu.edu.tw/menu5/showoutline.asp?SYEAR=${Y}&SEM=${E}&CrsDat=${K.id}`;window.open(j,"_blank")},P=G=>G?G.endsWith("3")?`${G.slice(0,G.length-1)}-${s.catalog.summer}`:G.length>1?`${G.slice(0,G.length-1)}-${G.slice(G.length-1)}`:G:"",V=G=>{const K=qx(G);if(!K)return null;const Y=K.day.toLowerCase().slice(0,3);return`${s.planner?.days?.[Y]||K.day} ${K.startTime}-${K.endTime}`},$=k.useMemo(()=>{if(!N)return l.filter(Q=>Q.semester===f);let G=N.toLowerCase();const K=["required","major req","compulsory",""],Y=["elective","major elec","optional",""],q=K.some(Q=>G.includes(Q)),E=Y.some(Q=>G.includes(Q));q&&K.forEach(Q=>G=G.replace(Q,"").trim()),E&&Y.forEach(Q=>G=G.replace(Q,"").trim());const j=G==="boya"?"":G,B=G.includes("boya")||G.includes(""),I=Q=>q&&!Q.compulsory||E&&Q.compulsory?!1:j?Q.name.toLowerCase().includes(j)||Q.teacher.toLowerCase().includes(j)||Q.id.toLowerCase().includes(j)||Q.department.toLowerCase().includes(j)||Q.tags&&Q.tags.some(U=>U.toLowerCase().includes(j))||B&&Q.department.includes(""):!0,_=l.filter(Q=>Q.semester===f&&I(Q));return _.length>0?_:l.filter(Q=>I(Q))},[l,f,N]);return k.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),$t.createPortal(a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex flex-col justify-end z-[60000] sm:items-center sm:justify-center p-0 sm:p-4",children:a.jsxs("div",{className:"bg-surface border border-border w-full sm:max-w-2xl shadow-2xl overflow-hidden flex flex-col h-[95vh] sm:h-[85vh] sm:rounded-xl rounded-t-3xl animate-in slide-in-from-bottom-full sm:slide-in-from-bottom-0 sm:fade-in sm:zoom-in-95 duration-300",children:[a.jsxs("div",{className:"p-4 border-b border-border bg-background/50 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-foreground",children:s.catalog.title}),a.jsx("p",{className:"text-sm text-muted",children:s.catalog.subtitle})]}),a.jsx("button",{onClick:r,className:"text-muted hover:text-foreground transition-colors",children:a.jsx(ut,{size:24})})]}),a.jsx("div",{className:"p-4 space-y-4",children:a.jsxs("div",{className:"flex gap-4",children:[a.jsx("select",{value:f,onChange:v,className:"bg-background border border-border text-foreground rounded-lg px-3 py-2 outline-none focus:ring-2 focus:ring-primary/50",children:A.map(G=>a.jsx("option",{value:G,children:P(G)},G))}),a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(rd,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted",size:18}),a.jsx("input",{type:"text",placeholder:s.catalog.searchPlaceholder,value:x,onChange:G=>y(G.target.value),className:"w-full bg-background border border-border text-foreground rounded-lg pl-10 pr-4 py-2 outline-none focus:ring-2 focus:ring-primary/50 placeholder:text-muted/50"})]})]})}),a.jsxs("div",{className:"flex justify-end text-sm text-muted px-4 pb-2 shrink-0",children:[$.length," ",s.catalog.coursesFound," ",N&&`for "${N}"`]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 pb-24 space-y-2 custom-scrollbar bg-background/30",children:u?a.jsxs("div",{className:"flex flex-col items-center justify-center h-40 text-muted",children:[a.jsx(X2,{className:"animate-spin mb-2",size:32}),s.catalog.loading]}):$.length===0?a.jsx("div",{className:"text-center text-muted py-10",children:N?s.catalog.noResults:"Select a semester to view courses"}):$.map((G,K)=>a.jsxs("div",{onClick:()=>e(G),className:"group p-3 rounded-lg border border-border/50 bg-surface hover:border-primary cursor-pointer transition-all hover:shadow-lg flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"font-bold text-foreground group-hover:text-primary transition-colors cursor-pointer hover:underline decoration-primary/50 underline-offset-2",onClick:Y=>S(Y,G),title:"Click to view syllabus",children:G.name}),G.semester&&a.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${G.semester===f?"bg-primary/20 border-primary/30 text-primary":"bg-surface border-gray-600 text-muted"}`,children:P(G.semester)}),G.english&&a.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded border bg-purple-500/10 border-purple-500/30 text-purple-400 font-medium",children:"EMI"})]}),a.jsxs("div",{className:"text-xs text-muted mt-1 flex gap-2",children:[a.jsxs("span",{className:"bg-background/50 px-1.5 py-0.5 rounded border border-border/50",children:["ID: ",G.id]}),a.jsx("span",{className:"bg-background/50 px-1.5 py-0.5 rounded border border-border/50",children:G.teacher}),a.jsxs("span",{className:"bg-background/50 px-1.5 py-0.5 rounded border border-border/50",children:[G.credit," cr"]}),a.jsx("span",{className:"bg-background/50 px-1.5 py-0.5 rounded border border-border/50",children:G.department}),V(G.classTime)&&a.jsx("span",{className:"bg-blue-500/10 text-blue-400 px-1.5 py-0.5 rounded border border-blue-500/20",children:V(G.classTime)})]})]}),a.jsx("div",{className:"ml-4 opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(tr,{className:"text-primary",size:20})})]},`${G.id}-${G.semester}-${K}`))},N),a.jsx("div",{className:"p-4 border-t border-border bg-background/30 text-xs text-muted text-center",children:s.catalog.dataSource})]})}),document.body)},CO="ClearGradAssets",fn="files",EO=1,wd=()=>new Promise((r,e)=>{const t=indexedDB.open(CO,EO);t.onupgradeneeded=s=>{const A=s.target.result;A.objectStoreNames.contains(fn)||A.createObjectStore(fn,{keyPath:"id"})},t.onsuccess=s=>{r(s.target.result)},t.onerror=s=>{e(s.target.error)}}),Un=async(r,e)=>{const t=await wd();return new Promise((s,A)=>{const d=t.transaction(fn,"readwrite").objectStore(fn),u={id:r,file:e,name:e.name,type:e.type,lastModified:e.lastModified},f=d.put(u);f.onsuccess=()=>s(),f.onerror=()=>A(f.error)})},aa=async r=>{const e=await wd();return new Promise((t,s)=>{const d=e.transaction(fn,"readonly").objectStore(fn).get(r);d.onsuccess=()=>{const u=d.result;if(u){const f=new File([u.file],u.name,{type:u.type,lastModified:u.lastModified});t(f)}else t(null)},d.onerror=()=>s(d.error)})},ia=async r=>{const e=await wd();return new Promise((t,s)=>{const d=e.transaction(fn,"readwrite").objectStore(fn).delete(r);d.onsuccess=()=>t(),d.onerror=()=>s(d.error)})},NO=async()=>{const r=await wd();return new Promise((e,t)=>{const l=r.transaction(fn,"readwrite").objectStore(fn).clear();l.onsuccess=()=>e(),l.onerror=()=>t(l.error)})},g1=async()=>{const r=await wd();return new Promise((e,t)=>{const l=r.transaction(fn,"readonly").objectStore(fn).getAll();l.onsuccess=()=>e(l.result),l.onerror=()=>t(l.error)})},SO=r=>new Promise((e,t)=>{const s=new FileReader;s.readAsDataURL(r),s.onload=()=>e(s.result),s.onerror=A=>t(A)}),jO=async r=>(await fetch(r)).blob(),_O=async r=>{for(const e of r)if(e.id&&e.data)try{const t=await jO(e.data),s=new File([t],e.name,{type:e.type,lastModified:e.lastModified});await Un(e.id,s)}catch(t){console.error(`Failed to restore asset ${e.id}`,t)}},TO=()=>Math.random().toString(36).substring(2,9)+Date.now().toString(36),UO={department:"",minTotalCredits:"",targetYear:"",status:"in_progress",prerequisites:{isWaived:!1,courses:[{id:"init-pre",name:"",credits:"",completed:!1,isAutoCreated:!0}]},designatedRequired:{minCredits:"",courses:[{id:"init-des",name:"",credits:"",completed:!1,isAutoCreated:!0}]},electiveRequired:{minCredits:"",courses:[{id:"init-ele",name:"",credits:"",completed:!1,isAutoCreated:!0}]},proofFileName:"",notes:""},Fp="nsysu-interdisciplinary-minor-data",QO={en:{basicInfo:"Basic Info",minorDept:"Minor Department",selectDept:"Select Department...",applicableYear:"Applicable Year",selectYear:"Select Year...",minTotalCredits:"Minimum Total Credits for Minor",totalProgress:"Total Minor Credits Progress",prerequisites:"Prerequisites",none:"None",noPrereqs:"No prerequisites required.",allPrereqsDone:"All Prerequisites Completed!",designated:"Designated Required",elective:"Elective Required",minCredits:"Min Credits:",sectionComplete:"Section Complete!",courseName:"Course Name",typeToAdd:"Type to add course...",credit:"Credit",pleaseFill:'Please fill in "Min Credits" to track progress.',pleaseFillTotal:'Please fill in "Minimum Total Credits" to track progress.',officialRegulations:"NSYSU Minor Regulations",status:"Minor Status",statusPlanned:"Planned",statusInProgress:"In Progress",statusPending:"Pending Approval",statusCompleted:"Approved / Completed",creditWarning:"Completion of credit requirements does not imply official approval; actual results are subject to NSYSU's official announcement",prerequisiteNotice:'Prerequisites are courses required before the minor. If none, check "None".',proofSection:"Approval / Proof (optional)",proofStatus:"Status:",notSubmitted:"Not Submitted",submitted:"Submitted",approved:"Approved",uploadOrLink:"Upload or Paste Link:",uploadType:"Approval Letter / System Screenshot",notes:"Notes (Optional)",viewFile:"View Attached File",uploadFile:"Upload File",safetyNotice:"Files are stored locally in your browser and are not uploaded to any server.",confirmRemove:"Are you sure you want to remove this file?",storedOnOriginalDevice:"Stored on original upload device",reUpload:"Re-upload"},zh:{basicInfo:"",minorDept:"",selectDept:"...",applicableYear:"",selectYear:"...",minTotalCredits:"",totalProgress:"",prerequisites:"",none:"",noPrereqs:"",allPrereqsDone:"",designated:"",elective:"",minCredits:"",sectionComplete:"",courseName:"",typeToAdd:"...",credit:"",pleaseFill:"",pleaseFillTotal:"",officialRegulations:"",status:"",statusPlanned:"",statusInProgress:"",statusPending:"",statusCompleted:"",creditWarning:"",prerequisiteNotice:"",proofSection:"",proofStatus:"",notSubmitted:"",submitted:"",approved:"",uploadOrLink:"",uploadType:" / ",notes:"",viewFile:"",uploadFile:"",safetyNotice:"",confirmRemove:"",storedOnOriginalDevice:"",reUpload:""}},FO=({onStatusChange:r})=>{const{language:e}=At(),t=QO[e==="zh"?"zh":"en"],{semesters:s}=la(),[A,l]=k.useState(()=>{const T=localStorage.getItem(Fp);if(T){const W=JSON.parse(T);return W.status||(W.status="in_progress"),W}return UO}),[d,u]=k.useState(!1),[f,g]=k.useState(!1),[x,y]=k.useState(null),[v,N]=k.useState(null),[R,S]=k.useState(null);k.useEffect(()=>{aa("minor_4_proof").then(T=>{T&&S(T)})},[]);const P=async T=>{if(T.target.files&&T.target.files[0]){const W=T.target.files[0];await Un("minor_4_proof",W),S(W),G("proofFileName","",W.name)}},V=async()=>{window.confirm(t.confirmRemove)&&(await ia("minor_4_proof"),S(null),G("proofFileName","",""))};k.useEffect(()=>{const T=localStorage.getItem(Fp),W=JSON.stringify(A);T!==W&&localStorage.setItem(Fp,W)},[A]);const $=s.map(T=>{if(T.length===4){const W=T.substring(0,3),M=T.substring(3);return M==="3"?`${W}-Summer`:`${W}-${M}`}return T}),G=(T,W,M)=>{l(F=>({...F,[T]:typeof F[T]=="object"?{...F[T],[W]:M}:M}))},K=(T,W,M)=>{l(F=>({...F,[T]:{...F[T],[W]:M}}))},Y=(T,W,M,F)=>{l(z=>{const ne=[...z[T].courses],te=ne.findIndex(J=>J.id===W);if(te===-1)return z;const O={...ne[te],[M]:F};return O.isAutoCreated&&M==="name"&&F.trim()!==""&&(O.isAutoCreated=!1,ne.push({id:TO(),name:"",credits:"",completed:!1,isAutoCreated:!0})),ne[te]=O,{...z,[T]:{...z[T],courses:ne}}})},q=(T,W)=>{l(M=>({...M,[T]:{...M[T],courses:M[T].courses.filter(F=>F.id!==W)}}))},E=T=>{const W=A[T].courses.filter(F=>F.completed&&!F.isAutoCreated).reduce((F,z)=>F+(parseFloat(z.credits)||0),0),M=parseFloat(A[T].minCredits)||0;return{completed:W,target:M}},j=()=>{const T=A.designatedRequired.courses.filter(ne=>ne.completed).reduce((ne,te)=>ne+(parseFloat(te.credits)||0),0),W=A.electiveRequired.courses.filter(ne=>ne.completed).reduce((ne,te)=>ne+(parseFloat(te.credits)||0),0),M=A.prerequisites.isWaived?0:A.prerequisites.courses.filter(ne=>ne.completed).reduce((ne,te)=>ne+(parseFloat(te.credits)||0),0),F=T+W+M,z=parseFloat(A.minTotalCredits)||0;return{total:F,target:z}};k.useEffect(()=>{if(!r)return;const T=j(),W=E("designatedRequired"),M=E("electiveRequired"),F=T.target>0&&T.total>=T.target,z=W.target>0&&W.completed>=W.target,ne=M.target>0&&M.completed>=M.target,te=A.prerequisites.courses.filter(Ae=>!Ae.isAutoCreated),O=A.prerequisites.isWaived||te.length>0&&te.every(Ae=>Ae.completed),J=F&&z&&ne&&O&&A.status==="completed";r(J)},[A,r]);const B=T=>{x&&v&&(Y(x,v,"name",T.name),Y(x,v,"credits",T.credit.toString()),u(!1),y(null),N(null))},I=(T,W)=>a.jsxs("div",{className:`flex items-center gap-2 mb-2 ${W.completed?"opacity-50":""}`,children:[!W.isAutoCreated&&a.jsx("div",{onClick:()=>Y(T,W.id,"completed",!W.completed),className:`w-5 h-5 rounded border flex items-center justify-center cursor-pointer flex-shrink-0 transition-colors ${W.completed?"bg-emerald-500 border-emerald-500 text-white":"border-border hover:border-primary"}`,children:W.completed&&a.jsx(vt,{size:14,strokeWidth:3})}),W.isAutoCreated&&a.jsx("div",{className:"w-5 h-5 flex-shrink-0"}),a.jsxs("div",{className:"relative flex-1",children:[a.jsx("input",{type:"text",value:W.name,placeholder:W.isAutoCreated?t.typeToAdd:t.courseName,onChange:M=>Y(T,W.id,"name",M.target.value),className:`w-full bg-background border border-border rounded-lg px-3 py-1.5 text-sm outline-none focus:ring-2 focus:ring-primary/50 ${W.completed?"line-through text-muted":"text-foreground"}`}),!W.completed&&a.jsx("button",{onClick:()=>{y(T),N(W.id),u(!0)},className:"absolute right-2 top-1/2 -translate-y-1/2 text-muted hover:text-primary",title:"Import from Catalog",children:a.jsx(zr,{size:14})})]}),a.jsx("input",{type:"text",value:W.credits,placeholder:t.credit,onChange:M=>{/^\d*\.?\d*$/.test(M.target.value)&&Y(T,W.id,"credits",M.target.value)},className:`w-20 bg-background border border-border rounded-lg px-2 py-1.5 text-sm text-center outline-none focus:ring-2 focus:ring-primary/50 ${W.completed?"line-through text-muted":"text-foreground"}`}),W.isAutoCreated?a.jsx("div",{className:"w-[26px] flex-shrink-0"}):a.jsx("button",{onClick:()=>q(T,W.id),className:"text-muted hover:text-destructive p-1 w-[26px] flex justify-center flex-shrink-0",children:a.jsx(Tn,{size:16})})]},W.id),_=j(),Q=E("designatedRequired"),U=E("electiveRequired");return a.jsxs("div",{className:"space-y-8 max-w-3xl mx-auto animate-in fade-in zoom-in-95 duration-300 pb-20",children:[a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary flex items-center gap-2",children:[a.jsx(tr,{size:20}),t.basicInfo]}),a.jsxs("a",{href:"https://oaa.nsysu.edu.tw/p/412-1003-3253.php?Lang=zh-tw",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 px-3 py-1.5 bg-primary/10 hover:bg-primary/20 text-primary text-xs font-medium rounded-lg transition-colors",children:[t.officialRegulations,a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),a.jsx("polyline",{points:"15 3 21 3 21 9"}),a.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"md:col-span-2 relative",children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:t.status}),a.jsxs("button",{onClick:()=>g(!f),className:`w-full flex items-center justify-between bg-background border rounded-lg px-3 py-2 text-sm outline-none transition-all ${f?"ring-2 ring-primary/50 border-primary":"border-border hover:border-primary/50"}`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${A.status==="planned"?"bg-warning shadow-[0_0_8px] shadow-warning/50":A.status==="in_progress"?"bg-primary shadow-[0_0_8px] shadow-primary/50":A.status==="pending"?"bg-orange-500 shadow-[0_0_8px] shadow-orange-500/50":"bg-success shadow-[0_0_8px] shadow-success/50"}`}),a.jsx("span",{className:"text-foreground",children:A.status==="planned"?t.statusPlanned:A.status==="in_progress"?t.statusInProgress:A.status==="pending"?t.statusPending:t.statusCompleted})]}),a.jsx(xd,{size:16,className:`text-muted transition-transform duration-200 ${f?"rotate-180":"rotate-0"}`})]}),f&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>g(!1)}),a.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-surface border border-border rounded-lg shadow-xl z-20 py-1 overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[{val:"planned",label:t.statusPlanned,color:"bg-warning",text:"text-warning"},{val:"in_progress",label:t.statusInProgress,color:"bg-primary",text:"text-primary"},{val:"pending",label:t.statusPending,color:"bg-orange-500",text:"text-orange-500"},{val:"completed",label:t.statusCompleted,color:"bg-success",text:"text-success"}].map(T=>a.jsxs("button",{onClick:()=>{G("status","",T.val),g(!1)},className:`w-full flex items-center gap-3 px-3 py-2.5 text-sm transition-colors ${A.status===T.val?"bg-primary/10":"hover:bg-white/5"}`,children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${T.color} ${A.status===T.val?"shadow-[0_0_6px] "+T.color:""}`}),a.jsx("span",{className:`${A.status===T.val?T.text+" font-medium":"text-foreground"}`,children:T.label}),A.status===T.val&&a.jsx(vt,{size:14,className:`ml-auto ${T.text}`})]},T.val))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:t.minorDept}),a.jsxs("select",{value:A.department,onChange:T=>G("department","",T.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50",children:[a.jsx("option",{value:"",children:t.selectDept}),uS.map(T=>a.jsx("option",{value:T,children:T},T))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:t.applicableYear}),a.jsxs("select",{value:A.targetYear,onChange:T=>G("targetYear","",T.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50",children:[a.jsx("option",{value:"",children:t.selectYear}),$.map(T=>a.jsx("option",{value:T,children:T},T))]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:t.minTotalCredits}),a.jsx("input",{type:"text",value:A.minTotalCredits,onChange:T=>/^\d*$/.test(T.target.value)&&G("minTotalCredits","",T.target.value),placeholder:"e.g. 20",className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50"})]})]})]}),a.jsx("div",{className:"bg-surface/50 p-4 rounded-xl border border-border",children:_.target>0?a.jsxs(a.Fragment,{children:[a.jsx(cr,{label:t.totalProgress,current:_.total,total:_.target,color:"bg-primary",variant:"l"}),a.jsx("div",{className:"flex justify-end mt-1",children:a.jsxs("span",{className:"text-xs text-muted flex items-center gap-1",children:[a.jsx(nr,{size:12}),t.creditWarning]})})]}):a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("span",{className:"font-medium text-foreground text-lg mb-1",children:t.totalProgress}),a.jsxs("div",{className:"text-sm text-orange-500 font-medium flex items-center gap-2 bg-orange-500/10 p-2 rounded",children:[a.jsx("span",{className:"text-lg",children:"!"})," ",t.pleaseFillTotal]})]})}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"text-lg font-bold text-primary",children:t.prerequisites}),a.jsx("span",{className:"text-xs text-muted md:hidden lg:inline-block hidden",children:t.prerequisiteNotice})]}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:A.prerequisites.isWaived,onChange:T=>K("prerequisites","isWaived",T.target.checked),className:"w-4 h-4 rounded border-border text-primary focus:ring-primary"}),a.jsx("span",{className:"text-sm text-foreground",children:t.none})]})]}),a.jsx("div",{className:"text-xs text-muted md:hidden block -mt-2 mb-2",children:t.prerequisiteNotice}),!A.prerequisites.isWaived&&a.jsxs("div",{className:"space-y-2",children:[A.prerequisites.courses.map(T=>I("prerequisites",T)),A.prerequisites.courses.every(T=>T.completed&&!T.isAutoCreated)&&A.prerequisites.courses.length>1&&a.jsx("div",{className:"text-sm text-emerald-500 font-medium text-center py-2 bg-emerald-500/10 rounded-lg",children:t.allPrereqsDone})]}),A.prerequisites.isWaived&&a.jsx("div",{className:"text-sm text-muted italic",children:t.noPrereqs})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[a.jsx("h3",{className:"text-lg font-bold text-primary",children:t.designated}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-xs text-muted whitespace-nowrap",children:t.minCredits}),a.jsx("input",{type:"text",value:A.designatedRequired.minCredits,onChange:T=>/^\d*$/.test(T.target.value)&&K("designatedRequired","minCredits",T.target.value),className:"w-16 bg-background border border-border rounded px-2 py-1 text-sm text-center outline-none focus:ring-primary/50"})]})]}),a.jsx("div",{className:"pb-4 border-b border-border/50",children:Q.target>0?a.jsxs(a.Fragment,{children:[a.jsx(cr,{label:t.designated+" Progress",current:Q.completed,total:Q.target,color:"bg-inter",variant:"s"}),Q.completed>=Q.target&&a.jsx("div",{className:"text-center text-emerald-500 font-bold text-sm mt-1",children:t.sectionComplete})]}):a.jsxs("div",{className:"text-sm text-orange-500 font-medium flex items-center gap-2 bg-orange-500/10 p-2 rounded",children:[a.jsx("span",{className:"text-lg",children:"!"})," ",t.pleaseFill]})}),a.jsx("div",{className:"space-y-2 mt-4",children:A.designatedRequired.courses.map(T=>I("designatedRequired",T))})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[a.jsx("h3",{className:"text-lg font-bold text-primary",children:t.elective}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-xs text-muted whitespace-nowrap",children:t.minCredits}),a.jsx("input",{type:"text",value:A.electiveRequired.minCredits,onChange:T=>/^\d*$/.test(T.target.value)&&K("electiveRequired","minCredits",T.target.value),className:"w-16 bg-background border border-border rounded px-2 py-1 text-sm text-center outline-none focus:ring-primary/50"})]})]}),a.jsx("div",{className:"pb-4 border-b border-border/50",children:U.target>0?a.jsxs(a.Fragment,{children:[a.jsx(cr,{label:t.elective+" Progress",current:U.completed,total:U.target,color:"bg-primer",variant:"s"}),U.completed>=U.target&&a.jsx("div",{className:"text-center text-emerald-500 font-bold text-sm mt-1",children:t.sectionComplete})]}):a.jsxs("div",{className:"text-sm text-orange-500 font-medium flex items-center gap-2 bg-orange-500/10 p-2 rounded",children:[a.jsx("span",{className:"text-lg",children:"!"})," ",t.pleaseFill]})}),a.jsx("div",{className:"space-y-2 mt-4",children:A.electiveRequired.courses.map(T=>I("electiveRequired",T))})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-6",children:[a.jsx("h3",{className:"text-lg font-bold text-primary border-b border-border/50 pb-2",children:t.proofSection}),a.jsx("div",{className:"space-y-6 pl-2",children:a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6 space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:t.proofStatus}),a.jsxs("div",{className:"space-y-2 pl-2",children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[a.jsx("input",{type:"radio",name:"proof_status",checked:A.status==="planned"||A.status==="in_progress",onChange:()=>G("status","","in_progress"),className:"w-4 h-4 text-primary bg-background border-border focus:ring-primary"}),a.jsx("span",{className:`text-sm transition-colors ${A.status==="planned"||A.status==="in_progress"?"text-foreground":"text-muted group-hover:text-foreground"}`,children:t.notSubmitted})]}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[a.jsx("input",{type:"radio",name:"proof_status",checked:A.status==="pending",onChange:()=>G("status","","pending"),className:"w-4 h-4 text-orange-500 bg-background border-border focus:ring-orange-500"}),a.jsx("span",{className:`text-sm transition-colors ${A.status==="pending"?"text-orange-500 font-medium":"text-muted group-hover:text-foreground"}`,children:t.submitted})]}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[a.jsx("input",{type:"radio",name:"proof_status",checked:A.status==="completed",onChange:()=>G("status","","completed"),className:"w-4 h-4 text-emerald-500 bg-background border-border focus:ring-emerald-500"}),a.jsx("span",{className:`text-sm transition-colors ${A.status==="completed"?"text-emerald-500 font-medium":"text-muted group-hover:text-foreground"}`,children:t.approved})]})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:t.uploadOrLink}),a.jsxs("div",{className:"pl-4 space-y-3",children:[a.jsxs("span",{className:"text-sm text-foreground block",children:[" ",t.uploadType]}),a.jsxs("div",{className:"text-xs text-muted flex items-start gap-1.5 bg-surface/50 p-2 rounded border border-border/50",children:[a.jsx(nr,{size:14,className:"mt-0.5 flex-shrink-0"}),a.jsx("span",{children:t.safetyNotice})]}),R?a.jsxs("div",{className:"flex items-center gap-3 bg-primary/10 border border-primary/20 rounded-lg p-3 max-w-md",children:[a.jsx(ds,{className:"text-primary flex-shrink-0",size:20}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-primary truncate",children:R.name}),a.jsx("div",{className:"text-xs text-muted flex gap-2",children:a.jsxs("span",{children:[(R.size/1024).toFixed(1)," KB"]})})]}),a.jsx("button",{onClick:()=>{const T=URL.createObjectURL(R);window.open(T,"_blank")},className:"p-1.5 hover:bg-white/20 rounded-md text-primary transition-colors",title:t.viewFile,children:a.jsx(Dr,{size:16})}),a.jsx("button",{onClick:V,className:"p-1.5 hover:bg-white/20 rounded-md text-primary hover:text-destructive transition-colors",title:"Remove",children:a.jsx(ut,{size:16})})]}):A.proofFileName?a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 bg-surface/50 border border-dashed border-border rounded-lg p-3 max-w-md",children:[a.jsxs("div",{className:"flex items-center gap-3 opacity-70 overflow-hidden",children:[a.jsx(ds,{className:"text-muted flex-shrink-0",size:20}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:A.proofFileName}),a.jsx("p",{className:"text-xs text-muted truncate",children:t.storedOnOriginalDevice})]})]}),a.jsxs("label",{className:"cursor-pointer p-1.5 hover:bg-white/10 rounded-md text-primary transition-colors text-xs flex items-center gap-1 flex-shrink-0 self-start sm:self-auto border border-primary/20 bg-primary/5",children:[a.jsx(jr,{size:14})," ",t.reUpload,a.jsx("input",{type:"file",accept:"image/*,application/pdf",className:"hidden",onChange:P})]})]}):a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("label",{className:"cursor-pointer bg-surface hover:bg-surface/80 border border-border rounded-lg px-4 py-2 flex items-center gap-2 transition-all",children:[a.jsx(jr,{size:16,className:"text-muted"}),a.jsx("span",{className:"text-sm text-foreground",children:t.uploadFile}),a.jsx("input",{type:"file",accept:"image/*,application/pdf",className:"hidden",onChange:P})]})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:t.notes}),a.jsx("textarea",{value:A.notes||"",onChange:T=>G("notes","",T.target.value),className:"w-full bg-background border border-border rounded-lg p-3 text-sm focus:ring-2 focus:ring-primary/50 outline-none min-h-[80px]",placeholder:"..."})]})]})})]}),d&&a.jsx(KA,{onClose:()=>{u(!1),y(null),N(null)},onSelect:B})]})},p1=()=>Math.random().toString(36).substring(2,9)+Date.now().toString(36),Ip={department:"",minTotalCredits:"",targetYear:"",status:"in_progress",applicationNotes:{items:[{id:"pre-1",text:"",checked:!1},{id:"pre-2",text:" GPA / ",checked:!1},{id:"pre-3",text:"",checked:!1},{id:"auto-note",text:"",checked:!1,isAutoCreated:!0}]},designatedRequired:{minCredits:"",courses:[{id:"init-des",name:"",credits:"",completed:!1,isAutoCreated:!0}]},electiveRequired:{minCredits:"",courses:[{id:"init-ele",name:"",credits:"",completed:!1,isAutoCreated:!0}]},proofFileName:"",notes:""},Dp="nsysu-interdisciplinary-double-major-data",IO={en:{basicInfo:"Basic Info",doubleMajorDept:"Double Major Department",selectDept:"Select Department...",applicableYear:"Applicable Year",selectYear:"Select Year...",minTotalCredits:"Minimum Total Credits for Double Major",totalProgress:"Total Double Major Credits Progress",appNotes:"Application / Eligibility Notes",appNotesNotice:"Check requirements before applying.",checklist_1:"Completed at least one semester",checklist_2:"Met requirements (e.g. GPA / Ranking)",checklist_3:"Submitted application during official period",checkAll:"All Requirements Met!",typeToCheck:"Type to add note...",designated:"Double Major Required Courses",elective:"Double Major Elective Courses",minCredits:"Min Credits:",sectionComplete:"Section Complete!",courseName:"Course Name",typeToAdd:"Type to add course...",credit:"Credit",pleaseFill:'Please fill in "Min Credits" to track progress.',pleaseFillTotal:'Please fill in "Minimum Total Credits" to track progress.',officialRegulations:"NSYSU Double Major Regulations",status:"Double Major Status",statusPlanned:"Planned",statusInProgress:"In Progress",statusPending:"Pending Department Approval",statusCompleted:"Approved  Double Major",creditWarning:"Completion of credit requirements does not imply official approval; actual results are subject to NSYSU's official announcement",proofSection:"Approval / Proof (optional)",proofStatus:"Status:",notSubmitted:"Not Submitted",submitted:"Submitted",approved:"Approved",uploadOrLink:"Upload or Paste Link:",uploadType:"Approval Letter / System Screenshot",notes:"Notes (Optional)",viewFile:"View Attached File",uploadFile:"Upload File",safetyNotice:"Files are stored locally in your browser and are not uploaded to any server.",confirmRemove:"Are you sure you want to remove this file?",storedOnOriginalDevice:"Stored on original upload device",reUpload:"Re-upload"},zh:{basicInfo:"",doubleMajorDept:"",selectDept:"...",applicableYear:"",selectYear:"...",minTotalCredits:"",totalProgress:"",appNotes:" / ",appNotesNotice:"",checklist_1:"",checklist_2:" GPA / ",checklist_3:"",checkAll:"",typeToCheck:"...",designated:"",elective:"",minCredits:"",sectionComplete:"",courseName:"",typeToAdd:"...",credit:"",pleaseFill:"",pleaseFillTotal:"",officialRegulations:"",status:"",statusPlanned:"",statusInProgress:"",statusPending:"",statusCompleted:"",creditWarning:"",proofSection:"",proofStatus:"",notSubmitted:"",submitted:"",approved:"",uploadOrLink:"",uploadType:" / ",notes:"",viewFile:"",uploadFile:"",safetyNotice:"",confirmRemove:"",storedOnOriginalDevice:"",reUpload:""}},DO=({onStatusChange:r})=>{const{language:e}=At(),t=IO[e==="zh"?"zh":"en"],{semesters:s}=la(),[A,l]=k.useState(()=>{const F=localStorage.getItem(Dp);if(F){const z=JSON.parse(F);return z.status||(z.status="in_progress"),z.prerequisites&&(delete z.prerequisites,z.applicationNotes=Ip.applicationNotes),z.applicationNotes||(z.applicationNotes=Ip.applicationNotes),z}return Ip}),[d,u]=k.useState(!1),[f,g]=k.useState(!1),[x,y]=k.useState(null),[v,N]=k.useState(null),[R,S]=k.useState(null);k.useEffect(()=>{aa("double_major_5_proof").then(F=>{F&&S(F)})},[]);const P=async F=>{if(F.target.files&&F.target.files[0]){const z=F.target.files[0];await Un("double_major_5_proof",z),S(z),G("proofFileName","",z.name)}},V=async()=>{window.confirm(t.confirmRemove)&&(await ia("double_major_5_proof"),S(null),G("proofFileName","",""))};k.useEffect(()=>{const F=localStorage.getItem(Dp),z=JSON.stringify(A);F!==z&&localStorage.setItem(Dp,z)},[A]);const $=s.map(F=>{if(F.length===4){const z=F.substring(0,3),ne=F.substring(3);return ne==="3"?`${z}-Summer`:`${z}-${ne}`}return F}),G=(F,z,ne)=>{l(te=>({...te,[F]:typeof te[F]=="object"?{...te[F],[z]:ne}:ne}))},K=(F,z,ne)=>{l(te=>({...te,[F]:{...te[F],[z]:ne}}))},Y=(F,z,ne,te)=>{l(O=>{const J=[...O[F].courses],Ae=J.findIndex(Ee=>Ee.id===z);if(Ae===-1)return O;const me={...J[Ae],[ne]:te};return me.isAutoCreated&&ne==="name"&&te.trim()!==""&&(me.isAutoCreated=!1,J.push({id:p1(),name:"",credits:"",completed:!1,isAutoCreated:!0})),J[Ae]=me,{...O,[F]:{...O[F],courses:J}}})},q=(F,z,ne)=>{l(te=>{const O=[...te.applicationNotes.items],J=O.findIndex(me=>me.id===F);if(J===-1)return te;const Ae={...O[J],[z]:ne};return Ae.isAutoCreated&&z==="text"&&ne.trim()!==""&&(Ae.isAutoCreated=!1,O.push({id:p1(),text:"",checked:!1,isAutoCreated:!0})),O[J]=Ae,{...te,applicationNotes:{items:O}}})},E=(F,z)=>{l(ne=>({...ne,[F]:{...ne[F],courses:ne[F].courses.filter(te=>te.id!==z)}}))},j=F=>{l(z=>({...z,applicationNotes:{items:z.applicationNotes.items.filter(ne=>ne.id!==F)}}))},B=F=>{const z=A[F].courses.filter(te=>te.completed&&!te.isAutoCreated).reduce((te,O)=>te+(parseFloat(O.credits)||0),0),ne=parseFloat(A[F].minCredits)||0;return{completed:z,target:ne}},I=()=>{const F=A.designatedRequired.courses.filter(O=>O.completed).reduce((O,J)=>O+(parseFloat(J.credits)||0),0),z=A.electiveRequired.courses.filter(O=>O.completed).reduce((O,J)=>O+(parseFloat(J.credits)||0),0),ne=F+z,te=parseFloat(A.minTotalCredits)||0;return{total:ne,target:te}};k.useEffect(()=>{if(!r)return;const F=I(),z=B("designatedRequired"),ne=B("electiveRequired"),te=F.target>0&&F.total>=F.target,O=z.target>0&&z.completed>=z.target,J=ne.target>0&&ne.completed>=ne.target,Ae=te&&O&&J&&A.status==="completed";r(Ae)},[A,r]);const _=F=>{x&&v&&(Y(x,v,"name",F.name),Y(x,v,"credits",F.credit.toString()),u(!1),y(null),N(null))},Q=(F,z)=>a.jsxs("div",{className:`flex items-center gap-2 mb-2 ${z.completed?"opacity-50":""}`,children:[!z.isAutoCreated&&a.jsx("div",{onClick:()=>Y(F,z.id,"completed",!z.completed),className:`w-5 h-5 rounded border flex items-center justify-center cursor-pointer flex-shrink-0 transition-colors ${z.completed?"bg-emerald-500 border-emerald-500 text-white":"border-border hover:border-primary"}`,children:z.completed&&a.jsx(vt,{size:14,strokeWidth:3})}),z.isAutoCreated&&a.jsx("div",{className:"w-5 h-5 flex-shrink-0"}),a.jsxs("div",{className:"relative flex-1",children:[a.jsx("input",{type:"text",value:z.name,placeholder:z.isAutoCreated?t.typeToAdd:t.courseName,onChange:ne=>Y(F,z.id,"name",ne.target.value),className:`w-full bg-background border border-border rounded-lg px-3 py-1.5 text-sm outline-none focus:ring-2 focus:ring-primary/50 ${z.completed?"line-through text-muted":"text-foreground"}`}),!z.completed&&a.jsx("button",{onClick:()=>{y(F),N(z.id),u(!0)},className:"absolute right-2 top-1/2 -translate-y-1/2 text-muted hover:text-primary",title:"Import from Catalog",children:a.jsx(zr,{size:14})})]}),a.jsx("input",{type:"text",value:z.credits,placeholder:t.credit,onChange:ne=>{/^\d*\.?\d*$/.test(ne.target.value)&&Y(F,z.id,"credits",ne.target.value)},className:`w-20 bg-background border border-border rounded-lg px-2 py-1.5 text-sm text-center outline-none focus:ring-2 focus:ring-primary/50 ${z.completed?"line-through text-muted":"text-foreground"}`}),z.isAutoCreated?a.jsx("div",{className:"w-[26px] flex-shrink-0"}):a.jsx("button",{onClick:()=>E(F,z.id),className:"text-muted hover:text-destructive p-1 w-[26px] flex justify-center flex-shrink-0",children:a.jsx(Tn,{size:16})})]},z.id),U=F=>a.jsxs("div",{className:`flex items-center gap-2 mb-2 ${F.checked?"opacity-50":""}`,children:[!F.isAutoCreated&&a.jsx("div",{onClick:()=>q(F.id,"checked",!F.checked),className:`w-5 h-5 rounded border flex items-center justify-center cursor-pointer flex-shrink-0 transition-colors ${F.checked?"bg-emerald-500 border-emerald-500 text-white":"border-border hover:border-primary"}`,children:F.checked&&a.jsx(vt,{size:14,strokeWidth:3})}),F.isAutoCreated&&a.jsx("div",{className:"w-5 h-5 flex-shrink-0"}),a.jsx("div",{className:"relative flex-1",children:["pre-1","pre-2","pre-3"].includes(F.id)?a.jsx("div",{className:`w-full px-3 py-1.5 text-sm ${F.checked?"line-through text-muted":"text-foreground"}`,children:F.id==="pre-1"?t.checklist_1:F.id==="pre-2"?t.checklist_2:t.checklist_3}):a.jsx("input",{type:"text",value:F.text,placeholder:F.isAutoCreated?t.typeToCheck:"Requirement note...",onChange:z=>q(F.id,"text",z.target.value),className:`w-full bg-background border border-border rounded-lg px-3 py-1.5 text-sm outline-none focus:ring-2 focus:ring-primary/50 ${F.checked?"line-through text-muted":"text-foreground"}`})}),!F.isAutoCreated&&!["pre-1","pre-2","pre-3"].includes(F.id)?a.jsx("button",{onClick:()=>j(F.id),className:"text-muted hover:text-destructive p-1 w-[26px] flex justify-center flex-shrink-0",children:a.jsx(Tn,{size:16})}):a.jsx("div",{className:"w-[26px] flex-shrink-0"})]},F.id),T=I(),W=B("designatedRequired"),M=B("electiveRequired");return a.jsxs("div",{className:"space-y-8 max-w-3xl mx-auto animate-in fade-in zoom-in-95 duration-300 pb-20",children:[a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary flex items-center gap-2",children:[a.jsx(tr,{size:20}),t.basicInfo]}),a.jsxs("a",{href:"https://oaa.nsysu.edu.tw/p/412-1003-3252.php?Lang=zh-tw",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 px-3 py-1.5 bg-primary/10 hover:bg-primary/20 text-primary text-xs font-medium rounded-lg transition-colors",children:[t.officialRegulations,a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),a.jsx("polyline",{points:"15 3 21 3 21 9"}),a.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"md:col-span-2 relative",children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:t.status}),a.jsxs("button",{onClick:()=>g(!f),className:`w-full flex items-center justify-between bg-background border rounded-lg px-3 py-2 text-sm outline-none transition-all ${f?"ring-2 ring-primary/50 border-primary":"border-border hover:border-primary/50"}`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${A.status==="planned"?"bg-warning shadow-[0_0_8px] shadow-warning/50":A.status==="in_progress"?"bg-primary shadow-[0_0_8px] shadow-primary/50":A.status==="pending"?"bg-orange-500 shadow-[0_0_8px] shadow-orange-500/50":"bg-success shadow-[0_0_8px] shadow-success/50"}`}),a.jsx("span",{className:"text-foreground",children:A.status==="planned"?t.statusPlanned:A.status==="in_progress"?t.statusInProgress:A.status==="pending"?t.statusPending:t.statusCompleted})]}),a.jsx(xd,{size:16,className:`text-muted transition-transform duration-200 ${f?"rotate-180":"rotate-0"}`})]}),f&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>g(!1)}),a.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-surface border border-border rounded-lg shadow-xl z-20 py-1 overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[{val:"planned",label:t.statusPlanned,color:"bg-warning",text:"text-warning"},{val:"in_progress",label:t.statusInProgress,color:"bg-primary",text:"text-primary"},{val:"pending",label:t.statusPending,color:"bg-orange-500",text:"text-orange-500"},{val:"completed",label:t.statusCompleted,color:"bg-success",text:"text-success"}].map(F=>a.jsxs("button",{onClick:()=>{G("status","",F.val),g(!1)},className:`w-full flex items-center gap-3 px-3 py-2.5 text-sm transition-colors ${A.status===F.val?"bg-primary/10":"hover:bg-white/5"}`,children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${F.color} ${A.status===F.val?"shadow-[0_0_6px] "+F.color:""}`}),a.jsx("span",{className:`${A.status===F.val?F.text+" font-medium":"text-foreground"}`,children:F.label}),A.status===F.val&&a.jsx(vt,{size:14,className:`ml-auto ${F.text}`})]},F.val))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:t.doubleMajorDept}),a.jsxs("select",{value:A.department,onChange:F=>G("department","",F.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50",children:[a.jsx("option",{value:"",children:t.selectDept}),uS.map(F=>a.jsx("option",{value:F,children:F},F))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:t.applicableYear}),a.jsxs("select",{value:A.targetYear,onChange:F=>G("targetYear","",F.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50",children:[a.jsx("option",{value:"",children:t.selectYear}),$.map(F=>a.jsx("option",{value:F,children:F},F))]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:t.minTotalCredits}),a.jsx("input",{type:"text",value:A.minTotalCredits,onChange:F=>/^\d*$/.test(F.target.value)&&G("minTotalCredits","",F.target.value),placeholder:"e.g. 40",className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50"})]})]})]}),a.jsx("div",{className:"bg-surface/50 p-4 rounded-xl border border-border",children:T.target>0?a.jsxs(a.Fragment,{children:[a.jsx(cr,{label:t.totalProgress,current:T.total,total:T.target,color:"bg-primary",variant:"l"}),a.jsx("div",{className:"flex justify-end mt-1",children:a.jsxs("span",{className:"text-xs text-muted flex items-center gap-1",children:[a.jsx(nr,{size:12}),t.creditWarning]})})]}):a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("span",{className:"font-medium text-foreground text-lg mb-1",children:t.totalProgress}),a.jsxs("div",{className:"text-sm text-orange-500 font-medium flex items-center gap-2 bg-orange-500/10 p-2 rounded",children:[a.jsx("span",{className:"text-lg",children:"!"})," ",t.pleaseFillTotal]})]})}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsx("div",{className:"flex justify-between items-center",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"text-lg font-bold text-primary",children:t.appNotes}),a.jsx("span",{className:"text-xs text-muted md:hidden lg:inline-block hidden",children:t.appNotesNotice})]})}),a.jsx("div",{className:"text-xs text-muted md:hidden block -mt-2 mb-2",children:t.appNotesNotice}),a.jsxs("div",{className:"space-y-2",children:[A.applicationNotes.items.map(F=>U(F)),A.applicationNotes.items.every(F=>F.checked&&!F.isAutoCreated)&&A.applicationNotes.items.length>1&&a.jsx("div",{className:"text-sm text-emerald-500 font-medium text-center py-2 bg-emerald-500/10 rounded-lg",children:t.checkAll})]})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[a.jsx("h3",{className:"text-lg font-bold text-primary",children:t.designated}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-xs text-muted whitespace-nowrap",children:t.minCredits}),a.jsx("input",{type:"text",value:A.designatedRequired.minCredits,onChange:F=>/^\d*$/.test(F.target.value)&&K("designatedRequired","minCredits",F.target.value),className:"w-16 bg-background border border-border rounded px-2 py-1 text-sm text-center outline-none focus:ring-primary/50"})]})]}),a.jsx("div",{className:"pb-4 border-b border-border/50",children:W.target>0?a.jsxs(a.Fragment,{children:[a.jsx(cr,{label:t.designated+" Progress",current:W.completed,total:W.target,color:"bg-inter",variant:"s"}),W.completed>=W.target&&a.jsx("div",{className:"text-center text-emerald-500 font-bold text-sm mt-1",children:t.sectionComplete})]}):a.jsxs("div",{className:"text-sm text-orange-500 font-medium flex items-center gap-2 bg-orange-500/10 p-2 rounded",children:[a.jsx("span",{className:"text-lg",children:"!"})," ",t.pleaseFill]})}),a.jsx("div",{className:"space-y-2 mt-4",children:A.designatedRequired.courses.map(F=>Q("designatedRequired",F))})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[a.jsx("h3",{className:"text-lg font-bold text-primary",children:t.elective}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-xs text-muted whitespace-nowrap",children:t.minCredits}),a.jsx("input",{type:"text",value:A.electiveRequired.minCredits,onChange:F=>/^\d*$/.test(F.target.value)&&K("electiveRequired","minCredits",F.target.value),className:"w-16 bg-background border border-border rounded px-2 py-1 text-sm text-center outline-none focus:ring-primary/50"})]})]}),a.jsx("div",{className:"pb-4 border-b border-border/50",children:M.target>0?a.jsxs(a.Fragment,{children:[a.jsx(cr,{label:t.elective+" Progress",current:M.completed,total:M.target,color:"bg-primer",variant:"s"}),M.completed>=M.target&&a.jsx("div",{className:"text-center text-emerald-500 font-bold text-sm mt-1",children:t.sectionComplete})]}):a.jsxs("div",{className:"text-sm text-orange-500 font-medium flex items-center gap-2 bg-orange-500/10 p-2 rounded",children:[a.jsx("span",{className:"text-lg",children:"!"})," ",t.pleaseFill]})}),a.jsx("div",{className:"space-y-2 mt-4",children:A.electiveRequired.courses.map(F=>Q("electiveRequired",F))})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-6",children:[a.jsx("h3",{className:"text-lg font-bold text-primary border-b border-border/50 pb-2",children:t.proofSection}),a.jsx("div",{className:"space-y-6 pl-2",children:a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6 space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:t.proofStatus}),a.jsxs("div",{className:"space-y-2 pl-2",children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[a.jsx("input",{type:"radio",name:"proof_status",checked:A.status==="planned"||A.status==="in_progress",onChange:()=>G("status","","in_progress"),className:"w-4 h-4 text-primary bg-background border-border focus:ring-primary"}),a.jsx("span",{className:`text-sm transition-colors ${A.status==="planned"||A.status==="in_progress"?"text-foreground":"text-muted group-hover:text-foreground"}`,children:t.notSubmitted})]}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[a.jsx("input",{type:"radio",name:"proof_status",checked:A.status==="pending",onChange:()=>G("status","","pending"),className:"w-4 h-4 text-orange-500 bg-background border-border focus:ring-orange-500"}),a.jsx("span",{className:`text-sm transition-colors ${A.status==="pending"?"text-orange-500 font-medium":"text-muted group-hover:text-foreground"}`,children:t.submitted})]}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[a.jsx("input",{type:"radio",name:"proof_status",checked:A.status==="completed",onChange:()=>G("status","","completed"),className:"w-4 h-4 text-emerald-500 bg-background border-border focus:ring-emerald-500"}),a.jsx("span",{className:`text-sm transition-colors ${A.status==="completed"?"text-emerald-500 font-medium":"text-muted group-hover:text-foreground"}`,children:t.approved})]})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:t.uploadOrLink}),a.jsxs("div",{className:"pl-4 space-y-3",children:[a.jsxs("span",{className:"text-sm text-foreground block",children:[" ",t.uploadType]}),a.jsxs("div",{className:"text-xs text-muted flex items-start gap-1.5 bg-surface/50 p-2 rounded border border-border/50",children:[a.jsx(nr,{size:14,className:"mt-0.5 flex-shrink-0"}),a.jsx("span",{children:t.safetyNotice})]}),R?a.jsxs("div",{className:"flex items-center gap-3 bg-primary/10 border border-primary/20 rounded-lg p-3 max-w-md",children:[a.jsx(ds,{className:"text-primary flex-shrink-0",size:20}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-primary truncate",children:R.name}),a.jsx("div",{className:"text-xs text-muted flex gap-2",children:a.jsxs("span",{children:[(R.size/1024).toFixed(1)," KB"]})})]}),a.jsx("button",{onClick:()=>{const F=URL.createObjectURL(R);window.open(F,"_blank")},className:"p-1.5 hover:bg-white/20 rounded-md text-primary transition-colors",title:t.viewFile,children:a.jsx(Dr,{size:16})}),a.jsx("button",{onClick:V,className:"p-1.5 hover:bg-white/20 rounded-md text-primary hover:text-destructive transition-colors",title:"Remove",children:a.jsx(ut,{size:16})})]}):A.proofFileName?a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 bg-surface/50 border border-dashed border-border rounded-lg p-3 max-w-md",children:[a.jsxs("div",{className:"flex items-center gap-3 opacity-70 overflow-hidden",children:[a.jsx(ds,{className:"text-muted flex-shrink-0",size:20}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:A.proofFileName}),a.jsx("p",{className:"text-xs text-muted truncate",children:t.storedOnOriginalDevice})]})]}),a.jsxs("label",{className:"cursor-pointer p-1.5 hover:bg-white/10 rounded-md text-primary transition-colors text-xs flex items-center gap-1 flex-shrink-0 self-start sm:self-auto border border-primary/20 bg-primary/5",children:[a.jsx(jr,{size:14})," ",t.reUpload,a.jsx("input",{type:"file",accept:"image/*,application/pdf",className:"hidden",onChange:P})]})]}):a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("label",{className:"cursor-pointer bg-surface hover:bg-surface/80 border border-border rounded-lg px-4 py-2 flex items-center gap-2 transition-all",children:[a.jsx(jr,{size:16,className:"text-muted"}),a.jsx("span",{className:"text-sm text-foreground",children:t.uploadFile}),a.jsx("input",{type:"file",accept:"image/*,application/pdf",className:"hidden",onChange:P})]})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:t.notes}),a.jsx("textarea",{value:A.notes||"",onChange:F=>G("notes","",F.target.value),className:"w-full bg-background border border-border rounded-lg p-3 text-sm focus:ring-2 focus:ring-primary/50 outline-none min-h-[80px]",placeholder:"..."})]})]})})]}),d&&a.jsx(KA,{onClose:()=>{u(!1),y(null),N(null)},onSelect:_})]})},kO=()=>Math.random().toString(36).substring(2,9)+Date.now().toString(36),vh={department:"",minTotalCredits:"26",targetYear:"",status:"in_progress",designatedRequired:{minCredits:"",courses:[{id:"init-des",name:"",credits:"",completed:!1,isAutoCreated:!0}]},electiveRequired:{minCredits:"",courses:[{id:"init-ele",name:"",credits:"",completed:!1,isAutoCreated:!0}]},practicum:{teachingInternship:"not_started",educationalPracticum:"not_started",qualificationReview:!1,note:""},proofFileName:"",notes:""},kp="nsysu-interdisciplinary-teacher-education-data",RO={en:{basicInfo:"Basic Info",doubleMajorDept:"Teacher Education Program",selectDept:"Select Department...",applicableYear:"Applicable Year",selectYear:"Select Year...",minTotalCredits:"Educational Professional Course Credit Requirements",totalProgress:"Teacher Education Progress",step1:"Coursework Completed",stepApply:"Eligible for Practicum Application",step2:"Qualified for Practicum",step3:"Practicum Completed",step4:"Teacher Qualification Certified (Optional)",designated:"Teacher Education Required Courses",elective:"Teacher Education Elective Courses",minCredits:"Min Credits:",sectionComplete:"Section Complete!",courseName:"Course Name",typeToAdd:"Type to add course...",credit:"Credit",earnedCredits:"Earned Educational Professional Credits",threshold:"Threshold",pleaseFill:'Please fill in "Min Credits" to track progress.',pleaseFillTotal:'Please fill in "Minimum Total Credits" to track progress.',officialRegulations:"Teacher Education Regulations",status:"Teacher Education Status",statusPlanned:"Planned",statusInProgress:"In Progress",statusPending:"Qualified for Educational Practicum",statusCompleted:"Teacher Qualification Obtained",creditWarning:"This system is for personal tracking only; official teacher qualification is subject to approval by the Teacher Education Center and the Ministry of Education.",creditPrerequisiteNotice:"Educational Professional Course credits are one of the prerequisites for qualifying for educational practicum",practicumTitle:"Practicum & Teaching Internship",teachingInternship:"Teaching Internship (In-course Practice)",educationalPracticum:"Educational Practicum (External School Teaching)",practicumNotice:"Educational practicum is a prerequisite for obtaining teacher qualification.",teachingInternshipNotice:"Teaching Internship is a professional educational course; upon completion, you may apply for the educational practicum qualification review.",qualificationReviewLabel:"Passed Educational Practicum Qualification Review (Certified by Teacher Education Center)",educationalPracticumNotice:"Educational practicum is a prerequisite for obtaining teacher qualification.",pStatus_not_started:"Not started",pStatus_in_progress:"In progress",pStatus_completed:"Completed",practicumNotePlaceholder:"Practicum School (Optional), Semester (Optional)",proofSection:"Approval & Certification",proofStatus:"Status:",notSubmitted:"Not Qualified",submitted:"Qualified for Educational Practicum",approved:"Teacher Qualification Obtained",uploadOrLink:"Upload or Paste Link:",uploadType:"Approval Letter / System Screenshot",notes:"Notes (Optional)",viewFile:"View Attached File",uploadFile:"Upload File",safetyNotice:"Files are stored locally in your browser and are not uploaded to any server.",confirmRemove:"Are you sure you want to remove this file?",storedOnOriginalDevice:"Stored on original upload device",reUpload:"Re-upload"},zh:{basicInfo:"",doubleMajorDept:"",selectDept:"...",applicableYear:"",selectYear:"...",minTotalCredits:"",totalProgress:"",step1:"",stepApply:"",step2:"",step3:"",step4:`
`,designated:"",elective:"",earnedCredits:"",threshold:"",minCredits:"",sectionComplete:"",courseName:"",typeToAdd:"...",credit:"",pleaseFill:"",pleaseFillTotal:"",officialRegulations:"",status:"",statusPlanned:"",statusInProgress:"",statusPending:"",statusCompleted:"",creditWarning:"",creditPrerequisiteNotice:"",practicumTitle:" / ",teachingInternship:"",educationalPracticum:"",practicumNotice:"",teachingInternshipNotice:"",qualificationReviewLabel:"",educationalPracticumNotice:"",pStatus_not_started:"",pStatus_in_progress:"",pStatus_completed:"",practicumNotePlaceholder:"",proofSection:"",proofStatus:"",notSubmitted:"",submitted:"",approved:"",uploadOrLink:"",uploadType:" / ",notes:"",viewFile:"",uploadFile:"",safetyNotice:"",confirmRemove:"",storedOnOriginalDevice:"",reUpload:""}},MO=({onStatusChange:r})=>{const{language:e}=At(),t=RO[e==="zh"?"zh":"en"],{semesters:s}=la(),[A,l]=k.useState(()=>{const T=localStorage.getItem(kp);if(T){const W=JSON.parse(T);return W.status||(W.status="in_progress"),W.department||(W.department=vh.department),W.minTotalCredits||(W.minTotalCredits=vh.minTotalCredits),W.applicationNotes&&delete W.applicationNotes,W.practicum||(W.practicum=vh.practicum),W}return vh}),[d,u]=k.useState(!1),[f,g]=k.useState(!1),[x,y]=k.useState(null),[v,N]=k.useState(null),[R,S]=k.useState(null);k.useEffect(()=>{aa("teacher_education_6_proof").then(T=>{T&&S(T)})},[]);const P=async T=>{if(T.target.files&&T.target.files[0]){const W=T.target.files[0];await Un("teacher_education_6_proof",W),S(W),G("proofFileName","",W.name)}},V=async()=>{window.confirm(t.confirmRemove)&&(await ia("teacher_education_6_proof"),S(null),G("proofFileName","",""))};k.useEffect(()=>{const T=localStorage.getItem(kp),W=JSON.stringify(A);T!==W&&localStorage.setItem(kp,W)},[A]);const $=s.map(T=>{if(T.length===4){const W=T.substring(0,3),M=T.substring(3);return M==="3"?`${W}-Summer`:`${W}-${M}`}return T}),G=(T,W,M)=>{l(F=>({...F,[T]:typeof F[T]=="object"?{...F[T],[W]:M}:M}))},K=(T,W,M)=>{l(F=>({...F,[T]:{...F[T],[W]:M}}))},Y=(T,W,M,F)=>{l(z=>{const ne=[...z[T].courses],te=ne.findIndex(J=>J.id===W);if(te===-1)return z;const O={...ne[te],[M]:F};return O.isAutoCreated&&M==="name"&&F.trim()!==""&&(O.isAutoCreated=!1,ne.push({id:kO(),name:"",credits:"",completed:!1,isAutoCreated:!0})),ne[te]=O,{...z,[T]:{...z[T],courses:ne}}})},q=(T,W)=>{l(M=>({...M,[T]:{...M[T],courses:M[T].courses.filter(F=>F.id!==W)}}))},E=T=>{const W=A[T].courses.filter(F=>F.completed&&!F.isAutoCreated).reduce((F,z)=>F+(parseFloat(z.credits)||0),0),M=parseFloat(A[T].minCredits)||0;return{completed:W,target:M}},j=()=>{const T=A.designatedRequired.courses.filter(z=>z.completed).reduce((z,ne)=>z+(parseFloat(ne.credits)||0),0),W=A.electiveRequired.courses.filter(z=>z.completed).reduce((z,ne)=>z+(parseFloat(ne.credits)||0),0),M=T+W,F=parseFloat(A.minTotalCredits)||0;return{total:M,target:F}};k.useEffect(()=>{if(!r)return;const T=j(),W=E("designatedRequired"),M=E("electiveRequired"),F=T.target>0&&T.total>=T.target,z=W.target>0&&W.completed>=W.target,ne=M.target>0&&M.completed>=M.target,te=F&&z&&ne&&(A.practicum.educationalPracticum==="completed"||A.status==="certified");r(te)},[A,r]);const B=T=>{x&&v&&(Y(x,v,"name",T.name),Y(x,v,"credits",T.credit.toString()),u(!1),y(null),N(null))},I=(T,W)=>a.jsxs("div",{className:`flex items-center gap-2 mb-2 ${W.completed?"opacity-50":""}`,children:[!W.isAutoCreated&&a.jsx("div",{onClick:()=>Y(T,W.id,"completed",!W.completed),className:`w-5 h-5 rounded border flex items-center justify-center cursor-pointer flex-shrink-0 transition-colors ${W.completed?"bg-emerald-500 border-emerald-500 text-white":"border-border hover:border-primary"}`,children:W.completed&&a.jsx(vt,{size:14,strokeWidth:3})}),W.isAutoCreated&&a.jsx("div",{className:"w-5 h-5 flex-shrink-0"}),a.jsxs("div",{className:"relative flex-1",children:[a.jsx("input",{type:"text",value:W.name,placeholder:W.isAutoCreated?t.typeToAdd:t.courseName,onChange:M=>Y(T,W.id,"name",M.target.value),className:`w-full bg-background border border-border rounded-lg px-3 py-1.5 text-sm outline-none focus:ring-2 focus:ring-primary/50 ${W.completed?"line-through text-muted":"text-foreground"}`}),!W.completed&&a.jsx("button",{onClick:()=>{y(T),N(W.id),u(!0)},className:"absolute right-2 top-1/2 -translate-y-1/2 text-muted hover:text-primary",title:"Import from Catalog",children:a.jsx(zr,{size:14})})]}),a.jsx("input",{type:"text",value:W.credits,placeholder:t.credit,onChange:M=>{/^\d*\.?\d*$/.test(M.target.value)&&Y(T,W.id,"credits",M.target.value)},className:`w-20 bg-background border border-border rounded-lg px-2 py-1.5 text-sm text-center outline-none focus:ring-2 focus:ring-primary/50 ${W.completed?"line-through text-muted":"text-foreground"}`}),W.isAutoCreated?a.jsx("div",{className:"w-[26px] flex-shrink-0"}):a.jsx("button",{onClick:()=>q(T,W.id),className:"text-muted hover:text-destructive p-1 w-[26px] flex justify-center flex-shrink-0",children:a.jsx(Tn,{size:16})})]},W.id),_=j(),Q=E("designatedRequired"),U=E("electiveRequired");return k.useEffect(()=>{const W=_.target>0&&_.total>=_.target&&(Q.target>0?Q.completed>=Q.target:!0)&&(U.target>0?U.completed>=U.target:!0)&&A.practicum.teachingInternship==="completed";let M=!1,F={...A};!W&&F.practicum.qualificationReview&&(F.practicum={...F.practicum,qualificationReview:!1},M=!0),!F.practicum.qualificationReview&&F.practicum.educationalPracticum!=="not_started"&&(F.practicum={...F.practicum,educationalPracticum:"not_started"},M=!0),F.practicum.qualificationReview?(F.practicum.educationalPracticum,F.status!=="practicum"&&F.status!=="certified"&&(F.status="practicum",M=!0)):(F.status==="practicum"||F.status==="certified")&&(F.status="in_progress",M=!0),M&&l(F)},[_.target,_.total,Q.target,Q.completed,U.target,U.completed,A.practicum.teachingInternship,A.practicum.qualificationReview,A.practicum.educationalPracticum,A.status]),a.jsxs("div",{className:"space-y-8 max-w-3xl mx-auto animate-in fade-in zoom-in-95 duration-300 pb-20",children:[a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsx("div",{className:"flex justify-between items-center",children:a.jsxs("h3",{className:"text-lg font-bold text-primary flex items-center gap-2",children:[a.jsx(tr,{size:20}),t.basicInfo]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"md:col-span-2 relative",children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:t.status}),a.jsxs("button",{onClick:()=>g(!f),className:`w-full flex items-center justify-between bg-background border rounded-lg px-3 py-2 text-sm outline-none transition-all ${f?"ring-2 ring-primary/50 border-primary":"border-border hover:border-primary/50"}`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${A.status==="planned"?"bg-warning shadow-[0_0_8px] shadow-warning/50":A.status==="in_progress"?"bg-primary shadow-[0_0_8px] shadow-primary/50":A.status==="practicum"?"bg-orange-500 shadow-[0_0_8px] shadow-orange-500/50":"bg-success shadow-[0_0_8px] shadow-success/50"}`}),a.jsx("span",{className:"text-foreground",children:A.status==="planned"?t.statusPlanned:A.status==="in_progress"?t.statusInProgress:A.status==="practicum"?t.statusPending:t.statusCompleted})]}),a.jsx(xd,{size:16,className:`text-muted transition-transform duration-200 ${f?"rotate-180":"rotate-0"}`})]}),f&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>g(!1)}),a.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-surface border border-border rounded-lg shadow-xl z-20 py-1 overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[{val:"planned",label:t.statusPlanned,color:"bg-warning",text:"text-warning"},{val:"in_progress",label:t.statusInProgress,color:"bg-primary",text:"text-primary"},{val:"pending",label:t.statusPending,color:"bg-orange-500",text:"text-orange-500"},{val:"certified",label:t.statusCompleted,color:"bg-success",text:"text-success"}].map(T=>{const W=T.val==="pending"||T.val==="certified";return a.jsxs("button",{disabled:W,onClick:()=>{if(W)return;G("status","",{planned:"planned",in_progress:"in_progress",pending:"practicum",certified:"certified"}[T.val]),g(!1)},className:`w-full flex items-center gap-3 px-3 py-2.5 text-sm transition-colors ${W?"opacity-50 cursor-not-allowed bg-surface/50":T.val==="pending"&&A.status==="practicum"||T.val==="certified"&&A.status==="certified"||A.status===T.val?"bg-primary/10":"hover:bg-white/5"}`,children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${T.color} ${!W&&A.status===T.val?"shadow-[0_0_6px] "+T.color:""}`}),a.jsx("span",{className:`${!W&&A.status===T.val?T.text+" font-medium":"text-foreground"}`,children:T.label}),W&&a.jsx("div",{className:"ml-auto text-muted",children:a.jsx(nr,{size:14})}),!W&&(T.val==="pending"&&A.status==="practicum"||T.val==="certified"&&A.status==="certified"||A.status===T.val)&&a.jsx(vt,{size:14,className:`ml-auto ${T.text}`})]},T.val)})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:t.doubleMajorDept}),a.jsx("input",{type:"text",value:A.department,onChange:T=>G("department","",T.target.value),placeholder:e==="zh"?"":"Center for Teacher Education",className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:t.applicableYear}),a.jsxs("select",{value:A.targetYear,onChange:T=>G("targetYear","",T.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50",children:[a.jsx("option",{value:"",children:t.selectYear}),$.map(T=>a.jsx("option",{value:T,children:T},T))]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:t.minTotalCredits}),a.jsx("input",{type:"text",value:A.minTotalCredits,onChange:T=>/^\d*$/.test(T.target.value)&&G("minTotalCredits","",T.target.value),placeholder:"e.g. 40",className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50"})]})]})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border",children:[a.jsx("h3",{className:"text-lg font-bold text-primary mb-6",children:t.totalProgress}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute top-4 left-0 h-1 bg-border rounded-l-full -z-0",style:{width:"70%"}}),a.jsx("div",{className:"absolute top-4 left-[70%] h-1 border-t-4 border-dotted border-border -z-0",style:{width:"20%"}}),a.jsx("div",{className:"absolute top-4 left-0 h-1 bg-emerald-500 rounded-full z-0 transition-all duration-500 ease-out",style:{width:(()=>{if(!(_.target>0&&_.total>=_.target&&(Q.target>0?Q.completed>=Q.target:!0)&&(U.target>0?U.completed>=U.target:!0))){const W=_.target>0?_.total/_.target:0;return`${Math.min(1,W)*10}%`}return A.practicum.teachingInternship!=="completed"?A.practicum.teachingInternship==="in_progress"?"20%":"10%":A.practicum.qualificationReview?A.practicum.educationalPracticum!=="completed"?A.practicum.educationalPracticum==="in_progress"?"60%":"50%":A.status!=="certified"?"70%":"90%":"30%"})(),maxWidth:"100%"}}),a.jsx("div",{className:"flex justify-between relative z-10",children:[{id:1,label:t.step1,isCompleted:_.target>0&&_.total>=_.target&&(Q.target>0?Q.completed>=Q.target:!0)&&(U.target>0?U.completed>=U.target:!0)},{id:1.5,label:t.stepApply,isCompleted:_.target>0&&_.total>=_.target&&(Q.target>0?Q.completed>=Q.target:!0)&&(U.target>0?U.completed>=U.target:!0)&&A.practicum.teachingInternship==="completed"},{id:2,label:t.step2,isCompleted:A.practicum.qualificationReview},{id:3,label:t.step3,isCompleted:A.practicum.educationalPracticum==="completed"},{id:4,label:t.step4,isCompleted:A.status==="certified"}].map(T=>a.jsxs("div",{className:"flex flex-col items-center flex-1",children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 transition-all duration-300 bg-background ${T.isCompleted?"border-emerald-500 text-emerald-500 shadow-[0_0_10px_rgba(16,185,129,0.3)]":"border-border text-muted"}`,children:a.jsx(vt,{size:16,strokeWidth:3})}),a.jsx("div",{className:`text-xs text-center mt-2 px-1 transition-colors duration-300 whitespace-pre-line ${T.isCompleted?"text-emerald-500 font-medium":"text-muted"}`,children:T.label})]},T.id))})]}),_.target<=0&&a.jsxs("div",{className:"mt-6 text-sm text-orange-500 font-medium flex items-center gap-2 bg-orange-500/10 p-2 rounded",children:[a.jsx("span",{className:"text-lg",children:"!"})," ",t.pleaseFillTotal]}),_.target>0&&a.jsx("div",{className:"mt-6 pt-4 border-t border-border/50 flex justify-between items-center text-sm",children:a.jsxs("span",{className:"flex items-center flex-wrap gap-2",children:[a.jsxs("span",{className:"text-foreground",children:[t.earnedCredits,"",_.total,"",t.threshold," ",_.target,""]}),a.jsxs("span",{className:"flex items-center text-xs text-muted",children:[a.jsx(b5,{size:14,className:"mr-1"}),t.creditPrerequisiteNotice]})]})})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[a.jsx("h3",{className:"text-lg font-bold text-primary",children:t.designated}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-xs text-muted whitespace-nowrap",children:t.minCredits}),a.jsx("input",{type:"text",value:A.designatedRequired.minCredits,onChange:T=>/^\d*$/.test(T.target.value)&&K("designatedRequired","minCredits",T.target.value),className:"w-16 bg-background border border-border rounded px-2 py-1 text-sm text-center outline-none focus:ring-primary/50"})]})]}),a.jsx("div",{className:"pb-4 border-b border-border/50",children:Q.target>0?a.jsxs(a.Fragment,{children:[a.jsx(cr,{label:t.designated+" Progress",current:Q.completed,total:Q.target,color:"bg-inter",variant:"s"}),Q.completed>=Q.target&&a.jsx("div",{className:"text-center text-emerald-500 font-bold text-sm mt-1",children:t.sectionComplete})]}):a.jsxs("div",{className:"text-sm text-orange-500 font-medium flex items-center gap-2 bg-orange-500/10 p-2 rounded",children:[a.jsx("span",{className:"text-lg",children:"!"})," ",t.pleaseFill]})}),a.jsx("div",{className:"space-y-2 mt-4",children:A.designatedRequired.courses.map(T=>I("designatedRequired",T))})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[a.jsx("h3",{className:"text-lg font-bold text-primary",children:t.elective}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-xs text-muted whitespace-nowrap",children:t.minCredits}),a.jsx("input",{type:"text",value:A.electiveRequired.minCredits,onChange:T=>/^\d*$/.test(T.target.value)&&K("electiveRequired","minCredits",T.target.value),className:"w-16 bg-background border border-border rounded px-2 py-1 text-sm text-center outline-none focus:ring-primary/50"})]})]}),a.jsx("div",{className:"pb-4 border-b border-border/50",children:U.target>0?a.jsxs(a.Fragment,{children:[a.jsx(cr,{label:t.elective+" Progress",current:U.completed,total:U.target,color:"bg-primer",variant:"s"}),U.completed>=U.target&&a.jsx("div",{className:"text-center text-emerald-500 font-bold text-sm mt-1",children:t.sectionComplete})]}):a.jsxs("div",{className:"text-sm text-orange-500 font-medium flex items-center gap-2 bg-orange-500/10 p-2 rounded",children:[a.jsx("span",{className:"text-lg",children:"!"})," ",t.pleaseFill]})}),a.jsx("div",{className:"space-y-2 mt-4",children:A.electiveRequired.courses.map(T=>I("electiveRequired",T))})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsx("div",{className:"flex justify-between items-center",children:a.jsx("h3",{className:"text-lg font-bold text-primary",children:t.practicumTitle})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"p-3 bg-background/50 rounded-lg border border-border/50 space-y-2",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2",children:[a.jsx("span",{className:"text-sm font-medium text-foreground",children:t.teachingInternship}),a.jsx("div",{className:"flex items-center gap-1",children:["not_started","in_progress","completed"].map(T=>a.jsx("button",{onClick:()=>K("practicum","teachingInternship",T),className:`px-3 py-1.5 rounded-md text-xs transition-all border ${A.practicum.teachingInternship===T?T==="completed"?"bg-success/20 text-success border-success/50 font-bold":T==="in_progress"?"bg-primary/20 text-primary border-primary/50 font-bold":"bg-muted/20 text-muted-foreground border-border font-bold":"border-transparent text-muted hover:bg-surface"}`,children:T==="not_started"?t.pStatus_not_started:T==="in_progress"?t.pStatus_in_progress:t.pStatus_completed},T))})]}),a.jsxs("div",{className:"w-full text-xs text-muted flex items-center gap-1",children:["- ",t.teachingInternshipNotice]})]}),(()=>{const W=_.target>0&&_.total>=_.target&&(Q.target>0?Q.completed>=Q.target:!0)&&(U.target>0?U.completed>=U.target:!0)&&A.practicum.teachingInternship==="completed";return a.jsx("div",{className:`p-3 bg-background/50 rounded-lg border border-border/50 ${W?"":"opacity-50"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("label",{className:`flex items-center gap-3 group ${W?"cursor-pointer":"cursor-not-allowed"}`,children:[a.jsx("div",{className:`w-5 h-5 rounded border flex items-center justify-center transition-colors ${A.practicum.qualificationReview?"bg-emerald-500 border-emerald-500 text-white":"border-muted "+(W?"group-hover:border-primary":"")}`,children:A.practicum.qualificationReview&&a.jsx(vt,{size:14,strokeWidth:3})}),a.jsx("input",{type:"checkbox",className:"hidden",disabled:!W,checked:!!A.practicum.qualificationReview,onChange:M=>{const F=M.target.checked;K("practicum","qualificationReview",F),F&&G("status","","practicum")}}),a.jsx("span",{className:"text-sm transition-colors text-foreground",children:t.qualificationReviewLabel})]}),!W&&a.jsx(Us,{size:14,className:"text-muted-foreground ml-2"})]})})})(),a.jsxs("div",{className:`p-3 bg-background/50 rounded-lg border border-border/50 space-y-2 ${A.practicum.qualificationReview?"":"opacity-50"}`,children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-medium text-foreground",children:t.educationalPracticum}),!A.practicum.qualificationReview&&a.jsx(Us,{size:12,className:"text-muted-foreground"})]}),a.jsx("div",{className:"flex items-center gap-1",children:["not_started","in_progress","completed"].map(T=>a.jsx("button",{disabled:!A.practicum.qualificationReview,onClick:()=>K("practicum","educationalPracticum",T),className:`px-3 py-1.5 rounded-md text-xs transition-all border ${A.practicum.educationalPracticum===T?T==="completed"?"bg-success/20 text-success border-success/50 font-bold":T==="in_progress"?"bg-primary/20 text-primary border-primary/50 font-bold":"bg-muted/20 text-muted-foreground border-border font-bold":"border-transparent text-muted "+(A.practicum.qualificationReview?"hover:bg-surface":"cursor-not-allowed")}`,children:T==="not_started"?t.pStatus_not_started:T==="in_progress"?t.pStatus_in_progress:t.pStatus_completed},T))})]}),a.jsxs("div",{className:"w-full text-xs text-muted flex items-center gap-1",children:["- ",t.educationalPracticumNotice]})]}),a.jsx("div",{children:a.jsx("input",{type:"text",value:A.practicum.note||"",onChange:T=>K("practicum","note",T.target.value),placeholder:t.practicumNotePlaceholder,className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-primary/50"})})]})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-6",children:[a.jsx("h3",{className:"text-lg font-bold text-primary border-b border-border/50 pb-2",children:t.proofSection}),a.jsx("div",{className:"space-y-6 pl-2",children:a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6 space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:t.proofStatus}),a.jsxs("div",{className:"space-y-2 pl-2",children:[(()=>{const T=!A.practicum.qualificationReview;return a.jsxs("label",{className:`flex items-center gap-2 group ${T?"cursor-not-allowed opacity-50":"cursor-pointer"}`,children:[a.jsx("input",{type:"radio",name:"proof_status",disabled:T,checked:A.status==="practicum",onChange:()=>G("status","","practicum"),className:"w-4 h-4 text-orange-500 bg-background border-border focus:ring-orange-500"}),a.jsx("span",{className:`text-sm transition-colors ${A.status==="practicum"?"text-orange-500 font-medium":"text-muted "+(T?"":"group-hover:text-foreground")}`,children:t.submitted}),T&&a.jsx(Us,{size:12,className:"text-muted-foreground ml-2"})]})})(),(()=>{const T=A.practicum.educationalPracticum!=="completed";return a.jsxs("label",{className:`flex items-center gap-2 group ${T?"cursor-not-allowed opacity-50":"cursor-pointer"}`,children:[a.jsx("input",{type:"radio",name:"proof_status",disabled:T,checked:A.status==="certified",onChange:()=>G("status","","certified"),className:"w-4 h-4 text-emerald-500 bg-background border-border focus:ring-emerald-500"}),a.jsx("span",{className:`text-sm transition-colors ${A.status==="certified"?"text-emerald-500 font-bold":"text-muted "+(T?"":"group-hover:text-foreground")}`,children:t.approved}),T&&a.jsx(Us,{size:12,className:"text-muted-foreground ml-2"})]})})()]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:t.uploadOrLink}),R?a.jsxs("div",{className:"flex items-center gap-3 bg-primary/10 border border-primary/20 rounded-lg p-3 max-w-md",children:[a.jsx(ds,{className:"text-primary flex-shrink-0",size:20}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-primary truncate",children:R.name}),a.jsx("div",{className:"text-xs text-muted flex gap-2",children:a.jsxs("span",{children:[(R.size/1024).toFixed(1)," KB"]})})]}),a.jsx("button",{onClick:()=>{const T=URL.createObjectURL(R);window.open(T,"_blank")},className:"p-1.5 hover:bg-white/20 rounded-md text-primary transition-colors",title:t.viewFile,children:a.jsx(Dr,{size:16})}),a.jsx("button",{onClick:V,className:"p-1.5 hover:bg-white/20 rounded-md text-primary hover:text-destructive transition-colors",title:"Remove",children:a.jsx(ut,{size:16})})]}):A.proofFileName?a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 bg-surface/50 border border-dashed border-border rounded-lg p-3 max-w-md",children:[a.jsxs("div",{className:"flex items-center gap-3 opacity-70 overflow-hidden",children:[a.jsx(ds,{className:"text-muted flex-shrink-0",size:20}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:A.proofFileName}),a.jsx("p",{className:"text-xs text-muted truncate",children:t.storedOnOriginalDevice})]})]}),a.jsxs("label",{className:"cursor-pointer p-1.5 hover:bg-white/10 rounded-md text-primary transition-colors text-xs flex items-center gap-1 flex-shrink-0 self-start sm:self-auto border border-primary/20 bg-primary/5",children:[a.jsx(jr,{size:14})," ",t.reUpload,a.jsx("input",{type:"file",accept:"image/*,application/pdf",className:"hidden",onChange:P})]})]}):a.jsx("div",{className:"flex items-center gap-3",children:a.jsxs("label",{className:"flex items-center justify-center px-4 py-2 bg-primary/10 hover:bg-primary/20 text-primary rounded-lg cursor-pointer transition-colors border border-primary/20",children:[a.jsx(jr,{size:18,className:"mr-2"}),a.jsx("span",{className:"text-sm font-medium",children:t.uploadType}),a.jsx("input",{type:"file",accept:"image/*,application/pdf",className:"hidden",onChange:P})]})}),a.jsxs("div",{className:"mt-4 text-[10px] text-muted flex items-center gap-1",children:[a.jsx(nr,{size:10}),t.safetyNotice]})]}),a.jsx("div",{children:a.jsx("textarea",{value:A.notes,onChange:T=>G("notes","",T.target.value),placeholder:t.notes,className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-primary/50 min-h-[80px]"})})]})})]}),d&&a.jsx(KA,{onClose:()=>u(!1),onSelect:B})]})},LO=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","()","","","","","","","","","",""," Practical English Cross-Disciplinary Program (Program Taught in English)","","IC","IC","","","","","Human Rights Studies Program(Program Taught in English)","","","","()","","AI","AI","AI","AI","",""],HO=["","","",""," EMI General Education Honors Program"],OO=["","","()","  ()","","","","","","","","","","","","()","()","","","","","","","","","","","","","","","","","","","","","",""," Micro-Program of Taiwanese Culture in English(Program Taught in English)","","","","","","","STREAM ","","",""," English Micro-module: Science, Technology and the Environment (Program Taught in English)","","","","","","","","","","","","","","","","","","AI()","","","",""],PO=({candidate:r,onConfirm:e,onCancel:t,T:s})=>(k.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),$t.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-md shadow-2xl p-6 flex flex-col gap-4 animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[a.jsx("div",{className:"mx-auto w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center text-primary mb-2",children:a.jsx(vt,{size:24,strokeWidth:3})}),a.jsx("h3",{className:"text-xl font-bold",children:s.perfectMatchFound}),a.jsx("p",{className:"text-muted text-sm",children:s.matchConfirmText})]}),a.jsxs("div",{className:"bg-surface/50 p-4 rounded-lg flex flex-col gap-2 border border-border",children:[a.jsx("div",{className:"font-bold text-center text-lg",children:r.match.name}),a.jsxs("div",{className:"flex justify-center gap-4 text-xs text-muted",children:[a.jsxs("span",{children:[r.match.credits," cr"]}),a.jsx("span",{children:""}),a.jsx("span",{children:r.match.teacher})]}),a.jsx("div",{className:"text-center text-xs text-muted/80",children:r.match.department})]}),a.jsxs("div",{className:"flex gap-3 mt-2",children:[a.jsx("button",{onClick:t,className:"flex-1 py-2.5 px-4 rounded-lg border border-border hover:bg-surface font-medium transition-colors",children:"Cancel"}),a.jsx("button",{onClick:e,className:"flex-1 py-2.5 px-4 rounded-lg bg-primary hover:bg-primary/90 text-white font-bold transition-colors shadow-lg shadow-primary/20",children:"Confirm Sync"})]})]})}),document.body)),VO=({isOpen:r,onClose:e,courses:t,onAdd:s,searchQuery:A,setSearchQuery:l,T:d})=>{if(!r)return null;const u=t.filter(f=>f.name.toLowerCase().includes(A.toLowerCase())||f.id.toLowerCase().includes(A.toLowerCase())||f.userLabels&&f.userLabels.some(g=>g.toLowerCase().includes(A.toLowerCase()))||f.originalTags&&f.originalTags.some(g=>g.toLowerCase().includes(A.toLowerCase())));return k.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),$t.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-lg shadow-2xl max-h-[85vh] flex flex-col animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-4 border-b border-border flex justify-between items-center",children:[a.jsx("h3",{className:"font-bold text-lg",children:d.trackerTitle}),a.jsx("button",{onClick:e,children:a.jsx(ut,{size:20})})]}),a.jsx("div",{className:"p-4 border-b border-border",children:a.jsx("input",{type:"text",placeholder:"Search...",value:A,onChange:f=>l(f.target.value),autoFocus:!0,className:"w-full bg-background border border-border rounded-lg px-3 py-2 outline-none focus:ring-2 focus:ring-primary/50"})}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-2",children:[u.map(f=>a.jsxs("button",{onClick:()=>s(f),className:"w-full text-left p-3 rounded-lg hover:bg-surface/50 border border-transparent hover:border-border transition-all group flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("span",{className:"font-bold",children:f.name})}),a.jsxs("div",{className:"text-xs text-muted flex items-center gap-1",children:[a.jsxs("span",{className:"font-medium text-foreground/80",children:[f.credits," cr"]}),a.jsx("span",{children:""}),[f.teacher||(f.id&&f.id.length<20?f.id:"Custom Course"),f.department].filter(Boolean).join("  ")]})]}),a.jsx("div",{className:"p-2 bg-primary/10 text-primary rounded-full opacity-0 group-hover:opacity-100 transition-all",children:a.jsx(zr,{size:16})})]},f.id)),u.length===0&&a.jsx("div",{className:"text-center p-8 text-muted",children:"No courses found"})]})]})}),document.body)},Rp=()=>Math.random().toString(36).substring(2,9)+Date.now().toString(36),Mp={department:"",minTotalCredits:"9",minCoreCredits:"0",targetYear:"",status:"in_progress",courses:[],proofFileName:"",notes:"",coursePlanUrl:"",coursePlanFileName:""},Lp="nsysu-interdisciplinary-cross-disciplinary-data",zO={en:{referenceProcess:"Reference Process",step1:"Program Introduction",step1_sub1:"Go to About -> Find [Micro-Program] -> Check Rules",step1_sub2:"Scroll down to 'Micro-Program Introduction' to find your program",step1_sub3_pre:"Click ",step1_sub3_link:"'Course Plan'",step1_sub4:"Check 'Core Courses', 'Electives', and 'Credit Requirements'",step2:"Add your planned/completed courses to the list below",step2_sub1:"Fill in Basic Info",step3:"ClearGrad tracks your progress in real-time",basicInfo:"Basic Info",doubleMajorDept:"Program Name",selectDept:"Select Program...",applicableYear:"Applicable Year",selectYear:"Select Year...",minTotalCredits:"Minimum Total Credits",minCoreCredits:"Core Course Required Credits",totalProgress:"Total Credits Progress",externalCreditsCheck:"At least 3 credits from courses outside your Major, Minor, and Double Major departments",externalCreditsProgress:"External Credits: ",coursePlanInput:"Course Plan / Regulations",addFromTracker:"Add from Tracker",addFromCatalog:"Add from Catalog",trackerTitle:"Select from Tracker",syncBtn:"Sync",matchCourse:"Match/Sync",matchConfirmTitle:"Confirm Course Match",matchConfirmText:"We found a matching course in your tracker. Do you want to sync data from this course?",perfectMatchFound:"Perfect Match Found!",noMatchFound:"No exact match found in your tracker.",noMatchTitle:"No Match Found",noMatchDesc:"We couldn't find an exact match for this course in your tracker.",manualAdd:"Manual Add",cancel:"Cancel",confirm:"Confirm",deleteConfirmTitle:"Delete Course?",deleteConfirmText:"Are you sure you want to remove this course from your list? This action cannot be undone.",selectCourse:"Select Course",fromTracker:"From Tracker",uploadPlan:"Upload File",pasteLink:"Paste Link...",viewPlan:"View Plan",designated:"Required Courses",coreCourses:"Core Courses",attachments:"Attachments",completedCourses:"Completed Courses",plannedCourses:"Planned Courses",badgeCompleted:"Completed",badgePlanned:"Planned",addCourse:"Add Course",elective:"Elective Courses",minCredits:"Min Credits:",sectionComplete:"Section Complete!",courseName:"Course Name",typeToAdd:"Type to add course...",credit:"Credit",pleaseFill:'Please fill in "Min Credits" to track progress.',pleaseFillTotal:'Please fill in "Minimum Total Credits" to track progress.',officialRegulations:"Reference",status:"Status",statusPlanned:"Planned",statusInProgress:"In Progress",statusPending:"Pending Approval",statusCompleted:"Approved",creditWarning:"Completion of credit requirements does not imply official approval.",proofSection:"Approval / Proof (optional)",proofStatus:"Status:",notSubmitted:"Not Submitted",submitted:"Submitted",approved:"Approved",uploadOrLink:"Upload or Paste Link:",uploadType:"Approval Letter / System Screenshot",notes:"Notes (Optional)",viewFile:"View Attached File",uploadFile:"Upload File",safetyNotice:"Files are stored locally in your browser and are not uploaded to any server.",confirmRemove:"Are you sure you want to remove this file?",storedOnOriginalDevice:"Stored on original upload device",reUpload:"Re-upload"},zh:{referenceProcess:"",step1:"",step1_sub1:" ",step1_sub2:"",step1_sub3_pre:"",step1_sub3_link:"",step1_sub4:"",step2:"",step2_sub1:"",step3:"ClearGrad ",basicInfo:"",doubleMajorDept:"",selectDept:"...",applicableYear:"",selectYear:"...",minTotalCredits:"",minCoreCredits:"",totalProgress:"",externalCreditsCheck:" 3 ",externalCreditsProgress:"",coursePlanInput:" / ",addFromTracker:"",addFromCatalog:"",trackerTitle:"",syncBtn:"",matchCourse:"/",matchConfirmTitle:"",matchConfirmText:"",perfectMatchFound:"",noMatchFound:"",noMatchTitle:"",noMatchDesc:"",manualAdd:"",cancel:"",confirm:"",deleteConfirmTitle:"",deleteConfirmText:"",selectCourse:"",fromTracker:"",uploadPlan:"",pasteLink:"...",viewPlan:"",attachments:"",designated:"",coreCourses:"",completedCourses:"",plannedCourses:"",badgeCompleted:"",badgePlanned:"",addCourse:"",elective:"",minCredits:"",sectionComplete:"",courseName:"",typeToAdd:"...",credit:"",pleaseFill:"",pleaseFillTotal:"",officialRegulations:"",status:"",statusPlanned:"",statusInProgress:"",statusPending:"",statusCompleted:"",creditWarning:"",proofSection:"",proofStatus:"",notSubmitted:"",submitted:"",approved:"",uploadOrLink:"",uploadType:" / ",notes:"",viewFile:"",uploadFile:"",safetyNotice:"",confirmRemove:"",storedOnOriginalDevice:"",reUpload:""}},KO=({onStatusChange:r,userProfile:e,courses:t=[]})=>{const{language:s}=At(),A=zO[s==="zh"?"zh":"en"],{semesters:l}=la(),[d,u]=k.useState(()=>{const L=localStorage.getItem(Lp);if(L)try{const Z=JSON.parse(L);if(!Array.isArray(Z.courses)){const he=[];Z.designatedRequired?.courses&&he.push(...Z.designatedRequired.courses),Z.electiveRequired?.courses&&he.push(...Z.electiveRequired.courses),Z.courses=he,Z.courses.length===0&&(Z.courses=Mp.courses)}return Z}catch(Z){return console.error("Failed to parse saved data",Z),Mp}return Mp}),[f,g]=k.useState(!1),[x,y]=k.useState(!1),[v,N]=k.useState(""),[R,S]=k.useState(""),[P,V]=k.useState(null),[$,G]=k.useState(null);k.useEffect(()=>{aa("cross_disciplinary_7_proof").then(L=>{L&&V(L)}),aa("cross_disciplinary_7_course_plan").then(L=>{L&&G(L)})},[]);const K=async L=>{if(L.target.files&&L.target.files[0]){const Z=L.target.files[0];await Un("cross_disciplinary_7_proof",Z),V(Z),B("proofFileName",Z.name)}},Y=async L=>{if(L.target.files&&L.target.files[0]){const Z=L.target.files[0];await Un("cross_disciplinary_7_course_plan",Z),G(Z),B("coursePlanFileName",Z.name)}},q=async()=>{window.confirm(A.confirmRemove)&&(await ia("cross_disciplinary_7_proof"),V(null),B("proofFileName",""))},E=async()=>{window.confirm(A.confirmRemove)&&(await ia("cross_disciplinary_7_course_plan"),G(null),B("coursePlanFileName",""))};k.useEffect(()=>{const L=localStorage.getItem(Lp),Z=JSON.stringify(d);L!==Z&&localStorage.setItem(Lp,Z)},[d]);const j=l.map(L=>{if(L.length===4){const Z=L.substring(0,3),he=L.substring(3);return he==="3"?`${Z}-Summer`:`${Z}-${he}`}return L}),B=(L,Z)=>{u(he=>({...he,[L]:Z}))},I=(L,Z,he)=>{u(ge=>{const Ge=[...ge.courses],ot=Ge.findIndex(Le=>Le.id===L);if(ot===-1)return ge;const qe={...Ge[ot],[Z]:he};return Ge[ot]=qe,{...ge,courses:Ge}})},_=(L="core")=>{u(Z=>({...Z,courses:[...Z.courses,{id:Rp(),name:"",credits:"",completed:!1,isAutoCreated:!1,category:L}]}))},Q=L=>{u(Z=>({...Z,courses:Z.courses.filter(he=>he.id!==L)}))},U=()=>{const L=d.courses.filter(he=>he.completed).reduce((he,ge)=>he+(parseFloat(ge.credits)||0),0),Z=parseFloat(d.minTotalCredits)||0;return{total:L,target:Z}},T=()=>{const L=d.courses.filter(he=>he.completed&&(he.category==="core"||!he.category)).reduce((he,ge)=>he+(parseFloat(ge.credits)||0),0),Z=parseFloat(d.minCoreCredits)||0;return{total:L,target:Z}},W=()=>{const L=new Set;e?.major&&L.add(e.major);try{const ge=JSON.parse(localStorage.getItem("nsysu-interdisciplinary-minor-data")||"{}");ge.department&&L.add(ge.department)}catch(ge){console.error("Error reading minor data",ge)}try{const ge=JSON.parse(localStorage.getItem("nsysu-interdisciplinary-double-major-data")||"{}");ge.department&&L.add(ge.department)}catch(ge){console.error("Error reading double major data",ge)}return d.courses.filter(ge=>{if(!ge.completed)return!1;if(!ge.department)return!0;for(const Ge of Array.from(L))if(ge.department===Ge)return!1;return!0}).reduce((ge,Ge)=>ge+(parseFloat(Ge.credits)||0),0)};k.useEffect(()=>{if(!r)return;const L=U(),Z=T(),he=W(),ge=L.target>0&&L.total>=L.target,Ge=Z.target>0?Z.total>=Z.target:!0,ot=he>=3;r(ge&&Ge&&ot)},[d,r,e]);const M=L=>{if(d.courses.some(ge=>ge.name===L.name&&ge.credits===L.credit.toString())){alert("This course is already in the list!");return}const he={id:Rp(),name:L.name,credits:L.credit.toString(),completed:!1,isAutoCreated:!1,category:Ae.current,department:L.department,fromCatalog:!0};u(ge=>({...ge,courses:[...ge.courses,he]})),g(!1)},F=L=>{if(d.courses.some(ge=>ge.name===L.name&&ge.credits===L.credits.toString())){alert("This course is already in the list!");return}const he={id:Rp(),name:L.name,credits:L.credits.toString(),completed:!0,isAutoCreated:!1,category:Ae.current,department:L.department,fromCatalog:!0};u(ge=>({...ge,courses:[...ge.courses,he]})),y(!1)},z=({onCancel:L,onManualAdd:Z,T:he})=>(k.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),$t.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-sm shadow-2xl p-6 flex flex-col gap-4 animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[a.jsx("div",{className:"mx-auto w-12 h-12 bg-orange-500/10 rounded-full flex items-center justify-center text-orange-500 mb-2",children:a.jsx(nr,{size:24,strokeWidth:3})}),a.jsx("h3",{className:"text-xl font-bold",children:he.noMatchTitle}),a.jsx("p",{className:"text-muted text-sm text-center",children:he.noMatchDesc})]}),a.jsxs("div",{className:"flex gap-3 mt-2",children:[a.jsx("button",{onClick:L,className:"flex-1 py-2.5 px-4 rounded-lg border border-border hover:bg-surface font-medium transition-colors",children:he.cancel}),a.jsx("button",{onClick:Z,className:"flex-1 py-2.5 px-4 rounded-lg bg-primary hover:bg-primary/90 text-white font-bold transition-colors shadow-lg shadow-primary/20",children:he.manualAdd})]})]})}),document.body)),[ne,te]=k.useState(null),[O,J]=k.useState(!1),Ae=k.useRef("core"),[me,Ee]=k.useState(null),Be=()=>{me&&(Q(me.id),Ee(null))},Ue=({isOpen:L,onClose:Z,onConfirm:he,T:ge})=>(k.useEffect(()=>(L&&(document.body.style.overflow="hidden"),()=>{document.body.style.overflow="auto"}),[L]),L?$t.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-sm shadow-2xl p-6 flex flex-col gap-4 animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[a.jsx("div",{className:"mx-auto w-12 h-12 bg-destructive/10 rounded-full flex items-center justify-center text-destructive mb-2",children:a.jsx(nr,{size:24,strokeWidth:3})}),a.jsx("h3",{className:"text-xl font-bold",children:ge.deleteConfirmTitle}),a.jsx("p",{className:"text-muted text-sm text-center",children:ge.deleteConfirmText})]}),a.jsxs("div",{className:"flex gap-3 mt-2",children:[a.jsx("button",{onClick:Z,className:"flex-1 py-2.5 px-4 rounded-lg border border-border hover:bg-surface font-medium transition-colors",children:ge.cancel}),a.jsx("button",{onClick:he,className:"flex-1 py-2.5 px-4 rounded-lg bg-red-500 hover:bg-red-600 text-white font-bold transition-colors shadow-lg shadow-red-500/20",children:ge.confirm})]})]})}),document.body):null),Me=()=>{if(!ne)return;const{item:L,match:Z}=ne;I(L.id,"completed",!0),I(L.id,"credits",Z.credits.toString()),I(L.id,"department",Z.department),I(L.id,"fromCatalog",!0),te(null)},$e=L=>{const Z=t.find(he=>he.id===L.id||he.name===L.name&&he.credits.toString()===L.credits);Z?te({item:L,match:Z}):J(!0)},Et=({item:L})=>a.jsxs("div",{className:"group relative bg-surface hover:bg-surface/80 transition-all p-3 rounded-lg border border-border shadow-sm flex flex-col gap-2",children:[a.jsxs("div",{className:"flex justify-between items-start gap-2",children:[a.jsx("input",{type:"text",value:L.name,disabled:L.fromCatalog,placeholder:A.courseName,onChange:Z=>I(L.id,"name",Z.target.value),className:`bg-transparent border-none text-sm font-semibold text-foreground placeholder-muted w-full focus:outline-none focus:ring-1 focus:ring-primary/50 rounded px-1 -ml-1 ${L.fromCatalog?"opacity-80 cursor-not-allowed":""}`}),a.jsx("button",{onClick:()=>Ee(L),className:"text-muted hover:text-destructive p-1 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(Tn,{size:14})})]}),a.jsxs("div",{className:"flex justify-between items-end",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("input",{type:"text",value:L.credits,disabled:L.fromCatalog,placeholder:"0",onChange:Z=>/^\d*\.?\d*$/.test(Z.target.value)&&I(L.id,"credits",Z.target.value),className:`w-8 bg-transparent text-xs font-bold text-center border-b border-border focus:border-primary outline-none ${L.fromCatalog?"opacity-80 cursor-not-allowed border-transparent":""}`}),a.jsx("span",{className:"text-[10px] text-muted",children:A.credit})]}),a.jsxs("div",{className:"flex gap-1",children:[!L.completed&&a.jsxs("button",{onClick:()=>$e(L),className:"text-[10px] px-2 py-1 rounded bg-surface border border-border hover:bg-surface/80 flex items-center gap-1",title:A.matchCourse,children:[a.jsx(Dr,{size:10})," ",A.syncBtn]}),a.jsx("div",{className:`text-[10px] px-2 py-1 rounded-full font-bold border transition-colors select-none ${L.completed?"bg-emerald-500/10 text-emerald-500 border-emerald-500/20":"bg-blue-500/10 text-blue-500 border-blue-500/20"}`,children:L.completed?A.badgeCompleted:A.badgePlanned})]})]})]}),Vt=({title:L,category:Z})=>{const he=d.courses.filter(je=>Z==="core"?je.category==="core"||!je.category:je.category==="elective"),ge=he.filter(je=>je.completed),Ge=he.filter(je=>!je.completed),ot=Z==="elective"?"text-orange-500":"text-primary",qe=Z==="elective"?"bg-orange-500 hover:bg-orange-600":"bg-primary hover:bg-primary/90",Le=Z==="elective"?"bg-orange-400":"bg-emerald-500";return a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:`text-lg font-bold flex items-center gap-2 ${ot}`,children:L}),a.jsxs("div",{className:"flex gap-2",children:[Z==="core"&&null,a.jsxs("button",{onClick:()=>_(Z),className:`flex items-center gap-1.5 px-3 py-1.5 text-white text-xs font-medium rounded-lg transition-colors ${qe}`,children:[a.jsx(zr,{size:14}),A.addCourse]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between pb-2 border-b border-border",children:[a.jsxs("h4",{className:"font-bold text-foreground text-sm flex items-center gap-2",children:[a.jsx("span",{className:`w-2 h-2 rounded-full ${Le}`}),A.completedCourses]}),a.jsxs("div",{className:"flex gap-2 items-center",children:[a.jsxs("button",{onClick:()=>{let je=d.department;const Xt=je.match(/(.+?)(?=\()/);Xt&&(je=Xt[1]),N(je),Ae.current=Z,y(!0)},className:"text-[10px] text-primary hover:underline flex items-center gap-1",children:[a.jsx(tr,{size:10})," ",A.addFromTracker]}),a.jsxs("span",{className:"text-xs text-muted",children:[ge.length," items"]})]})]}),a.jsxs("div",{className:"space-y-2 min-h-[100px]",children:[ge.map(je=>a.jsx(Et,{item:je},je.id)),ge.length===0&&a.jsx("div",{className:"text-center text-muted text-xs py-8 border border-dashed border-border rounded-lg",children:"No completed courses"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between pb-2 border-b border-border",children:[a.jsxs("h4",{className:"font-bold text-foreground text-sm flex items-center gap-2",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"}),A.plannedCourses]}),a.jsxs("div",{className:"flex gap-2 items-center",children:[a.jsxs("button",{onClick:()=>{let je=d.department;const Xt=je.match(/(.+?)(?=\()/);Xt&&(je=Xt[1]),S(je),Ae.current=Z,g(!0)},className:"text-[10px] text-blue-500 hover:underline flex items-center gap-1",children:[a.jsx(tr,{size:10})," ",A.addFromCatalog]}),a.jsxs("span",{className:"text-xs text-muted",children:[Ge.length," items"]})]})]}),a.jsxs("div",{className:"space-y-2 min-h-[100px]",children:[Ge.map(je=>a.jsx(Et,{item:je},je.id)),Ge.length===0&&a.jsx("div",{className:"text-center text-muted text-xs py-8 border border-dashed border-border rounded-lg",children:"No planned courses"})]})]})]})]})},ue=U();return a.jsxs("div",{className:"space-y-8 max-w-3xl mx-auto animate-in fade-in zoom-in-95 duration-300 pb-20",children:[a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary flex items-center gap-2",children:[a.jsx(tr,{size:20}),A.referenceProcess]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"pt-0.5",children:a.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-xs font-bold text-primary",children:"1"})}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("div",{className:"flex items-center gap-2 font-medium text-foreground",children:a.jsxs("a",{href:"https://ctdr.nsysu.edu.tw/class2.php",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-primary hover:underline underline-offset-4",children:[A.step1,a.jsx(Dr,{size:14})]})}),a.jsxs("ul",{className:"text-sm text-muted list-disc list-inside space-y-0.5 pl-1",children:[a.jsx("li",{children:A.step1_sub1}),a.jsx("li",{children:A.step1_sub2}),a.jsxs("li",{children:[A.step1_sub3_pre,a.jsx("span",{className:"underline decoration-primary/50 underline-offset-2",children:A.step1_sub3_link})]}),a.jsx("li",{children:A.step1_sub4})]})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"pt-0.5",children:a.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-xs font-bold text-primary",children:"2"})}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("div",{className:"font-medium text-foreground",children:A.step2}),a.jsx("ul",{className:"text-sm text-muted list-disc list-inside space-y-0.5 pl-1",children:a.jsx("li",{children:A.step2_sub1})})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"pt-0.5",children:a.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-xs font-bold text-primary",children:"3"})}),a.jsxs("div",{className:"font-medium text-foreground flex items-center gap-2",children:[A.step3,a.jsx(vt,{size:16,className:"text-primary"})]})]})]})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary flex items-center gap-2",children:[a.jsx(tr,{size:20}),A.basicInfo]}),a.jsxs("a",{href:"https://oaa.nsysu.edu.tw/static/file/3/1003/attach/20/pta_232069_5443563_94211.pdf",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 px-3 py-1.5 bg-primary/10 hover:bg-primary/20 text-primary text-xs font-medium rounded-lg transition-colors",children:[A.officialRegulations,a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),a.jsx("polyline",{points:"15 3 21 3 21 9"}),a.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:A.doubleMajorDept}),a.jsxs("select",{value:d.department,onChange:L=>B("department",L.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50",children:[a.jsx("option",{value:"",children:A.selectDept}),a.jsx("optgroup",{label:" (Micro-Programs)",children:OO.map(L=>a.jsx("option",{value:L,children:L},L))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:A.applicableYear}),a.jsxs("select",{value:d.targetYear,onChange:L=>B("targetYear",L.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50",children:[a.jsx("option",{value:"",children:A.selectYear}),j.map(L=>a.jsx("option",{value:L,children:L},L))]})]}),a.jsxs("div",{className:"md:col-span-2 grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:A.minTotalCredits}),a.jsx("input",{type:"text",value:d.minTotalCredits,onChange:L=>/^\d*$/.test(L.target.value)&&B("minTotalCredits",L.target.value),placeholder:"e.g. 9",className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:A.minCoreCredits}),a.jsx("input",{type:"text",value:d.minCoreCredits||"",onChange:L=>/^\d*$/.test(L.target.value)&&B("minCoreCredits",L.target.value),placeholder:"Optional",className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50"})]})]}),a.jsxs("div",{className:"md:col-span-2 pt-2 border-t border-border/50",children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-2",children:A.coursePlanInput}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("input",{type:"text",value:d.coursePlanUrl||"",onChange:L=>B("coursePlanUrl",L.target.value),placeholder:A.pasteLink,className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground text-sm outline-none focus:ring-2 focus:ring-primary/50"}),d.coursePlanUrl&&a.jsxs("a",{href:d.coursePlanUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-primary hover:underline mt-1 flex items-center gap-1",children:[a.jsx(Dr,{size:10}),A.viewPlan]})]}),a.jsxs("div",{children:[a.jsx("input",{type:"file",id:"course-plan-upload",className:"hidden",accept:"image/*,.pdf",onChange:Y}),$?a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-primary/5 border border-primary/20 rounded-lg",children:[a.jsx("div",{className:"p-1.5 bg-primary/10 rounded-full text-primary",children:a.jsx(ds,{size:14})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsx("div",{className:"text-sm font-medium text-foreground truncate",children:$.name})}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>{const L=URL.createObjectURL($);window.open(L,"_blank")},className:"p-1 text-primary hover:bg-primary/10 rounded transition-colors",title:A.viewFile,children:a.jsx(Dr,{size:14})}),a.jsx("button",{onClick:E,className:"p-1 text-muted hover:text-destructive hover:bg-destructive/10 rounded transition-colors",children:a.jsx(ut,{size:14})})]})]}):a.jsxs("label",{htmlFor:"course-plan-upload",className:"cursor-pointer flex items-center justify-center gap-2 px-4 py-2 bg-background border border-border hover:border-primary text-foreground rounded-lg transition-all shadow-sm active:scale-95 text-sm",children:[a.jsx(jr,{size:14}),A.uploadPlan]})]})]})]})]})]}),a.jsxs("div",{className:"bg-surface/50 p-4 rounded-xl border border-border",children:[ue.target>0?a.jsxs(a.Fragment,{children:[a.jsx(cr,{label:A.totalProgress,current:ue.total,total:ue.target,color:"bg-primary",variant:"l"}),a.jsx("div",{className:"flex justify-end mt-1",children:a.jsxs("span",{className:"text-xs text-muted flex items-center gap-1",children:[a.jsx(nr,{size:12}),A.creditWarning]})})]}):a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("span",{className:"font-medium text-foreground text-lg mb-1",children:A.totalProgress}),a.jsxs("div",{className:"text-sm text-orange-500 font-medium flex items-center gap-2 bg-orange-500/10 p-2 rounded",children:[a.jsx("span",{className:"text-lg",children:"!"})," ",A.pleaseFillTotal]})]}),T().target>0&&a.jsx("div",{className:"mt-4 pt-4 border-t border-border/50",children:a.jsx(cr,{label:A.minCoreCredits,current:T().total,total:T().target,color:"bg-emerald-500",variant:"l"})})]}),a.jsxs("div",{className:"bg-surface/50 p-4 rounded-xl border border-border flex items-center gap-4",children:[a.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center border transition-colors ${W()>=3?"bg-emerald-500 border-emerald-500 text-white":"border-muted text-transparent"}`,children:a.jsx(vt,{size:16,strokeWidth:3})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-sm font-medium text-foreground",children:A.externalCreditsCheck}),a.jsxs("div",{className:"text-xs text-muted mt-0.5",children:[A.externalCreditsProgress,a.jsx("span",{className:W()>=3?"text-emerald-500 font-bold":"text-foreground",children:W()})," / 3"]})]})]}),a.jsx(Vt,{title:A.coreCourses,category:"core"}),a.jsx(Vt,{title:A.elective,category:"elective"}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary border-b border-border/50 pb-2 flex items-center gap-2",children:[a.jsx(jr,{size:20}),A.attachments," & ",A.notes]}),a.jsxs("div",{className:"flex flex-col gap-8",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:A.uploadOrLink}),a.jsxs("div",{className:"space-y-3 pl-2",children:[a.jsxs("div",{children:[a.jsx("input",{type:"file",id:"proof-upload-7",className:"hidden",accept:"image/*,.pdf",onChange:K}),P?a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-primary/5 border border-primary/20 rounded-lg animate-in fade-in slide-in-from-left-2",children:[a.jsx("div",{className:"p-2 bg-primary/10 rounded-full text-primary",children:a.jsx(ds,{size:18})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm font-medium text-foreground truncate max-w-[200px]",children:P.name}),a.jsxs("div",{className:"text-xs text-muted",children:[(P.size/1024).toFixed(1)," KB"]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>{const L=URL.createObjectURL(P);window.open(L,"_blank")},className:"p-1.5 text-primary hover:bg-primary/10 rounded-md transition-colors",title:A.viewFile,children:a.jsx(Dr,{size:16})}),a.jsx("button",{onClick:q,className:"p-1.5 text-muted hover:text-destructive hover:bg-destructive/10 rounded-md transition-colors",children:a.jsx(ut,{size:16})})]})]}):d.proofFileName?a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 bg-surface/50 border border-dashed border-border rounded-lg p-3 max-w-md animate-in fade-in slide-in-from-left-2",children:[a.jsxs("div",{className:"flex items-center gap-3 opacity-70 overflow-hidden",children:[a.jsx(ds,{className:"text-muted flex-shrink-0",size:20}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:d.proofFileName}),a.jsx("p",{className:"text-xs text-muted truncate",children:A.storedOnOriginalDevice})]})]}),a.jsxs("label",{className:"cursor-pointer p-1.5 hover:bg-white/10 rounded-md text-primary transition-colors text-xs flex items-center gap-1 flex-shrink-0 self-start sm:self-auto border border-primary/20 bg-primary/5",children:[a.jsx(jr,{size:14})," ",A.reUpload,a.jsx("input",{type:"file",accept:"image/*,application/pdf",className:"hidden",onChange:K})]})]}):a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("label",{htmlFor:"proof-upload-7",className:"cursor-pointer flex items-center gap-2 px-4 py-2 bg-background border border-border hover:border-primary text-foreground rounded-lg transition-all shadow-sm active:scale-95",children:[a.jsx(jr,{size:16}),a.jsx("span",{className:"text-sm font-medium",children:A.uploadFile})]}),a.jsx("span",{className:"text-xs text-muted",children:A.uploadType})]})]}),a.jsxs("div",{className:"text-xs text-muted flex items-center gap-1.5 mt-1",children:[a.jsx(nr,{size:10,className:"text-muted"}),A.safetyNotice]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:A.notes}),a.jsx("div",{className:"pl-2",children:a.jsx("textarea",{value:d.notes,onChange:L=>B("notes",L.target.value),placeholder:"e.g. ...",className:"w-full bg-background border border-border rounded-lg px-4 py-3 text-foreground outline-none focus:ring-2 focus:ring-primary/50 min-h-[100px] resize-y"})})]})]})]}),f&&a.jsx(KA,{onClose:()=>g(!1),onSelect:M,defaultSearch:R}),x&&a.jsx(VO,{isOpen:x,onClose:()=>y(!1),courses:t,onAdd:F,searchQuery:v,setSearchQuery:N,T:A}),ne&&a.jsx(PO,{candidate:ne,onConfirm:Me,onCancel:()=>te(null),T:A}),O&&a.jsx(z,{onCancel:()=>J(!1),onManualAdd:()=>{J(!1),N(""),y(!0)},T:A}),me&&a.jsx(Ue,{isOpen:!!me,onClose:()=>Ee(null),onConfirm:Be,T:A})]})},GO=({candidate:r,onConfirm:e,onCancel:t,T:s})=>(k.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),$t.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-md shadow-2xl p-6 flex flex-col gap-4 animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[a.jsx("div",{className:"mx-auto w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center text-primary mb-2",children:a.jsx(vt,{size:24,strokeWidth:3})}),a.jsx("h3",{className:"text-xl font-bold",children:s.perfectMatchFound}),a.jsx("p",{className:"text-muted text-sm",children:s.matchConfirmText})]}),a.jsxs("div",{className:"bg-surface/50 p-4 rounded-lg flex flex-col gap-2 border border-border",children:[a.jsx("div",{className:"font-bold text-center text-lg",children:r.match.name}),a.jsxs("div",{className:"flex justify-center gap-4 text-xs text-muted",children:[a.jsxs("span",{children:[r.match.credits," cr"]}),a.jsx("span",{children:""}),a.jsx("span",{children:r.match.teacher})]}),a.jsx("div",{className:"text-center text-xs text-muted/80",children:r.match.department})]}),a.jsxs("div",{className:"flex gap-3 mt-2",children:[a.jsx("button",{onClick:t,className:"flex-1 py-2.5 px-4 rounded-lg border border-border hover:bg-surface font-medium transition-colors",children:"Cancel"}),a.jsx("button",{onClick:e,className:"flex-1 py-2.5 px-4 rounded-lg bg-primary hover:bg-primary/90 text-white font-bold transition-colors shadow-lg shadow-primary/20",children:"Confirm Sync"})]})]})}),document.body)),qO=({isOpen:r,onClose:e,courses:t,onAdd:s,searchQuery:A,setSearchQuery:l,T:d})=>{if(!r)return null;const u=t.filter(f=>f.name.toLowerCase().includes(A.toLowerCase())||f.id.toLowerCase().includes(A.toLowerCase())||f.userLabels&&f.userLabels.some(g=>g.toLowerCase().includes(A.toLowerCase()))||f.originalTags&&f.originalTags.some(g=>g.toLowerCase().includes(A.toLowerCase())));return k.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),$t.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-lg shadow-2xl max-h-[85vh] flex flex-col animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-4 border-b border-border flex justify-between items-center",children:[a.jsx("h3",{className:"font-bold text-lg",children:d.trackerTitle}),a.jsx("button",{onClick:e,children:a.jsx(ut,{size:20})})]}),a.jsx("div",{className:"p-4 border-b border-border",children:a.jsx("input",{type:"text",placeholder:"Search...",value:A,onChange:f=>l(f.target.value),autoFocus:!0,className:"w-full bg-background border border-border rounded-lg px-3 py-2 outline-none focus:ring-2 focus:ring-primary/50"})}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-2",children:[u.map(f=>a.jsxs("button",{onClick:()=>s(f),className:"w-full text-left p-3 rounded-lg hover:bg-surface/50 border border-transparent hover:border-border transition-all group flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("span",{className:"font-bold",children:f.name})}),a.jsxs("div",{className:"text-xs text-muted flex items-center gap-1",children:[a.jsxs("span",{className:"font-medium text-foreground/80",children:[f.credits," cr"]}),a.jsx("span",{children:""}),[f.teacher||(f.id&&f.id.length<20?f.id:"Custom Course"),f.department].filter(Boolean).join("  ")]})]}),a.jsx("div",{className:"p-2 bg-primary/10 text-primary rounded-full opacity-0 group-hover:opacity-100 transition-all",children:a.jsx(zr,{size:16})})]},f.id)),u.length===0&&a.jsx("div",{className:"text-center p-8 text-muted",children:"No courses found"})]})]})}),document.body)},Hp={department:"",minTotalCredits:"",minCoreCredits:"",targetYear:"",status:"in_progress",courses:[],proofFileName:"",notes:"",coursePlanUrl:"",coursePlanFileName:""},Op="nsysu-diverse-learning-data",YO={en:{referenceProcess:"Reference Process",step1:"Program Introduction",step1_sub1:"Go to About -> Find [Integrated Program] -> Check Rules",step1_sub2:"Scroll down to 'Integrated Program Introduction' to find your program",step1_sub3_pre:"Click ",step1_sub3_link:"'Course Plan'",step1_sub4:"Check 'Core Courses', 'Electives', and 'Credit Requirements'",step2:"Add your planned/completed courses to the list below",step2_sub1:"Fill in Basic Info",step3:"ClearGrad tracks your progress in real-time",basicInfo:"Basic Info",doubleMajorDept:"Program Name",selectDept:"Select Program...",applicableYear:"Applicable Year",selectYear:"Select Year...",minTotalCredits:"Minimum Total Credits",minCoreCredits:"Core Course Required Credits",totalProgress:"Total Credits Progress",externalCreditsCheck:"At least 6 credits from courses outside your Major, Minor, and Double Major departments",externalCreditsProgress:"External Credits: ",coursePlanInput:"Course Plan / Regulations",addFromTracker:"Add from Tracker",addFromCatalog:"Add from Catalog",trackerTitle:"Select from Tracker",syncBtn:"Sync",matchCourse:"Match/Sync",matchConfirmTitle:"Confirm Course Match",matchConfirmText:"We found a matching course in your tracker. Do you want to sync data from this course?",perfectMatchFound:"Perfect Match Found!",noMatchFound:"No exact match found in your tracker.",noMatchTitle:"No Match Found",noMatchDesc:"We couldn't find an exact match for this course in your tracker.",manualAdd:"Manual Add",cancel:"Cancel",confirm:"Confirm",deleteConfirmTitle:"Delete Course?",deleteConfirmText:"Are you sure you want to remove this course from your list? This action cannot be undone.",selectCourse:"Select Course",fromTracker:"From Tracker",uploadPlan:"Upload File",pasteLink:"Paste Link...",viewPlan:"View Plan",designated:"Required Courses",coreCourses:"Core Courses",attachments:"Attachments",completedCourses:"Completed Courses",plannedCourses:"Planned Courses",badgeCompleted:"Completed",badgePlanned:"Planned",addCourse:"Add Course",elective:"Elective Courses",minCredits:"Min Credits:",sectionComplete:"Section Complete!",courseName:"Course Name",typeToAdd:"Type to add course...",credit:"Credit",pleaseFill:'Please fill in "Min Credits" to track progress.',pleaseFillTotal:'Please fill in "Minimum Total Credits" to track progress.',officialRegulations:"Reference",status:"Status",statusPlanned:"Planned",statusInProgress:"In Progress",statusPending:"Pending Approval",statusCompleted:"Approved",creditWarning:"Completion of credit requirements does not imply official approval.",proofSection:"Approval / Proof (optional)",proofStatus:"Status:",notSubmitted:"Not Submitted",submitted:"Submitted",approved:"Approved",uploadOrLink:"Upload or Paste Link:",uploadType:"Approval Letter / System Screenshot",notes:"Notes (Optional)",viewFile:"View Attached File",uploadFile:"Upload File",safetyNotice:"Files are stored locally in your browser and are not uploaded to any server.",confirmRemove:"Are you sure you want to remove this file?",storedOnOriginalDevice:"Stored on original upload device",reUpload:"Re-upload"},zh:{referenceProcess:"",step1:"",step1_sub1:" ",step1_sub2:"",step1_sub3_pre:"",step1_sub3_link:"",step1_sub4:"",step2:"",step2_sub1:"",step3:"ClearGrad ",basicInfo:"",doubleMajorDept:"",selectDept:"...",applicableYear:"",selectYear:"...",minTotalCredits:"",minCoreCredits:"",totalProgress:"",externalCreditsCheck:" 6 ",externalCreditsProgress:"",coursePlanInput:" / ",addFromTracker:"",addFromCatalog:"",trackerTitle:"",syncBtn:"",matchCourse:"/",matchConfirmTitle:"",matchConfirmText:"",perfectMatchFound:"",noMatchFound:"",noMatchTitle:"",noMatchDesc:"",manualAdd:"",cancel:"",confirm:"",deleteConfirmTitle:"",deleteConfirmText:"",selectCourse:"",fromTracker:"",uploadPlan:"",pasteLink:"...",viewPlan:"",attachments:"",designated:"",coreCourses:"",completedCourses:"",plannedCourses:"",badgeCompleted:"",badgePlanned:"",addCourse:"",elective:"",minCredits:"",sectionComplete:"",courseName:"",typeToAdd:"...",credit:"",pleaseFill:"",pleaseFillTotal:"",officialRegulations:"",status:"",statusPlanned:"",statusInProgress:"",statusPending:"",statusCompleted:"",creditWarning:"",proofSection:"",proofStatus:"",notSubmitted:"",submitted:"",approved:"",uploadOrLink:"",uploadType:" / ",notes:"",viewFile:"",uploadFile:"",safetyNotice:"",confirmRemove:"",storedOnOriginalDevice:"",reUpload:""}},$O=({onStatusChange:r,userProfile:e,courses:t=[]})=>{const{language:s}=At(),A=YO[s==="zh"?"zh":"en"],{semesters:l}=la(),[d,u]=k.useState(()=>{const L=localStorage.getItem(Op);if(L)try{const Z=JSON.parse(L);if(!Array.isArray(Z.courses)){const he=[];Z.designatedRequired?.courses&&he.push(...Z.designatedRequired.courses),Z.electiveRequired?.courses&&he.push(...Z.electiveRequired.courses),Z.courses=he,Z.courses.length===0&&(Z.courses=Hp.courses)}return Z}catch(Z){return console.error("Failed to parse saved data",Z),Hp}return Hp}),[f,g]=k.useState(!1),[x,y]=k.useState(!1),[v,N]=k.useState(""),[R,S]=k.useState(""),[P,V]=k.useState(null),[$,G]=k.useState(null);k.useEffect(()=>{aa("diverse_learning_8_proof").then(L=>{L&&V(L)}),aa("diverse_learning_8_course_plan").then(L=>{L&&G(L)})},[]);const K=async L=>{if(L.target.files&&L.target.files[0]){const Z=L.target.files[0];await Un("diverse_learning_8_proof",Z),V(Z),B("proofFileName",Z.name)}},Y=async L=>{if(L.target.files&&L.target.files[0]){const Z=L.target.files[0];await Un("diverse_learning_8_course_plan",Z),G(Z),B("coursePlanFileName",Z.name)}},q=async()=>{window.confirm(A.confirmRemove)&&(await ia("diverse_learning_8_proof"),V(null),B("proofFileName",""))},E=async()=>{window.confirm(A.confirmRemove)&&(await ia("diverse_learning_8_course_plan"),G(null),B("coursePlanFileName",""))};k.useEffect(()=>{const L=localStorage.getItem(Op),Z=JSON.stringify(d);L!==Z&&localStorage.setItem(Op,Z)},[d]);const j=l.map(L=>{if(L.length===4){const Z=L.substring(0,3),he=L.substring(3);return he==="3"?`${Z}-Summer`:`${Z}-${he}`}return L}),B=(L,Z)=>{u(he=>({...he,[L]:Z}))},I=(L,Z,he)=>{u(ge=>{const Ge=[...ge.courses],ot=Ge.findIndex(Le=>Le.id===L);if(ot===-1)return ge;const qe={...Ge[ot],[Z]:he};return Ge[ot]=qe,{...ge,courses:Ge}})},_=(L="core")=>{u(Z=>({...Z,courses:[...Z.courses,{id:QA(),name:"",credits:"",completed:!1,isAutoCreated:!1,category:L}]}))},Q=L=>{u(Z=>({...Z,courses:Z.courses.filter(he=>he.id!==L)}))},U=()=>{const L=d.courses.filter(he=>he.completed).reduce((he,ge)=>he+(parseFloat(ge.credits)||0),0),Z=parseFloat(d.minTotalCredits)||0;return{total:L,target:Z}},T=()=>{const L=d.courses.filter(he=>he.completed&&(he.category==="core"||!he.category)).reduce((he,ge)=>he+(parseFloat(ge.credits)||0),0),Z=parseFloat(d.minCoreCredits)||0;return{total:L,target:Z}},W=()=>{const L=new Set;e?.major&&L.add(e.major);try{const ge=JSON.parse(localStorage.getItem("nsysu-interdisciplinary-minor-data")||"{}");ge.department&&L.add(ge.department)}catch(ge){console.error("Error reading minor data",ge)}try{const ge=JSON.parse(localStorage.getItem("nsysu-interdisciplinary-double-major-data")||"{}");ge.department&&L.add(ge.department)}catch(ge){console.error("Error reading double major data",ge)}return d.courses.filter(ge=>{if(!ge.completed)return!1;if(!ge.department)return!0;for(const Ge of Array.from(L))if(ge.department===Ge)return!1;return!0}).reduce((ge,Ge)=>ge+(parseFloat(Ge.credits)||0),0)};k.useEffect(()=>{if(!r)return;const L=U(),Z=T(),he=W(),ge=L.target>0&&L.total>=L.target,Ge=Z.target>0?Z.total>=Z.target:!0,ot=he>=6;r(ge&&Ge&&ot)},[d,r,e]);const M=L=>{if(d.courses.some(ge=>ge.name===L.name&&ge.credits===L.credit.toString())){alert("This course is already in the list!");return}const he={id:QA(),name:L.name,credits:L.credit.toString(),completed:!1,isAutoCreated:!1,category:Ae.current,department:L.department,fromCatalog:!0};u(ge=>({...ge,courses:[...ge.courses,he]})),g(!1)},F=L=>{if(d.courses.some(ge=>ge.name===L.name&&ge.credits===L.credits.toString())){alert("This course is already in the list!");return}const he={id:QA(),name:L.name,credits:L.credits.toString(),completed:!0,isAutoCreated:!1,category:Ae.current,department:L.department,fromCatalog:!0};u(ge=>({...ge,courses:[...ge.courses,he]})),y(!1)},z=({onCancel:L,onManualAdd:Z,T:he})=>(k.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),$t.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-sm shadow-2xl p-6 flex flex-col gap-4 animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[a.jsx("div",{className:"mx-auto w-12 h-12 bg-orange-500/10 rounded-full flex items-center justify-center text-orange-500 mb-2",children:a.jsx(nr,{size:24,strokeWidth:3})}),a.jsx("h3",{className:"text-xl font-bold",children:he.noMatchTitle}),a.jsx("p",{className:"text-muted text-sm text-center",children:he.noMatchDesc})]}),a.jsxs("div",{className:"flex gap-3 mt-2",children:[a.jsx("button",{onClick:L,className:"flex-1 py-2.5 px-4 rounded-lg border border-border hover:bg-surface font-medium transition-colors",children:he.cancel}),a.jsx("button",{onClick:Z,className:"flex-1 py-2.5 px-4 rounded-lg bg-primary hover:bg-primary/90 text-white font-bold transition-colors shadow-lg shadow-primary/20",children:he.manualAdd})]})]})}),document.body)),[ne,te]=k.useState(null),[O,J]=k.useState(!1),Ae=k.useRef("core"),[me,Ee]=k.useState(null),Be=()=>{me&&(Q(me.id),Ee(null))},Ue=({isOpen:L,onClose:Z,onConfirm:he,T:ge})=>(k.useEffect(()=>(L&&(document.body.style.overflow="hidden"),()=>{document.body.style.overflow="auto"}),[L]),L?$t.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-sm shadow-2xl p-6 flex flex-col gap-4 animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[a.jsx("div",{className:"mx-auto w-12 h-12 bg-destructive/10 rounded-full flex items-center justify-center text-destructive mb-2",children:a.jsx(nr,{size:24,strokeWidth:3})}),a.jsx("h3",{className:"text-xl font-bold",children:ge.deleteConfirmTitle}),a.jsx("p",{className:"text-muted text-sm text-center",children:ge.deleteConfirmText})]}),a.jsxs("div",{className:"flex gap-3 mt-2",children:[a.jsx("button",{onClick:Z,className:"flex-1 py-2.5 px-4 rounded-lg border border-border hover:bg-surface font-medium transition-colors",children:ge.cancel}),a.jsx("button",{onClick:he,className:"flex-1 py-2.5 px-4 rounded-lg bg-red-500 hover:bg-red-600 text-white font-bold transition-colors shadow-lg shadow-red-500/20",children:ge.confirm})]})]})}),document.body):null),Me=()=>{if(!ne)return;const{item:L,match:Z}=ne;I(L.id,"completed",!0),I(L.id,"credits",Z.credits.toString()),I(L.id,"department",Z.department),I(L.id,"fromCatalog",!0),te(null)},$e=L=>{const Z=t.find(he=>he.id===L.id||he.name===L.name&&he.credits.toString()===L.credits);Z?te({item:L,match:Z}):J(!0)},Et=({item:L})=>a.jsxs("div",{className:"group relative bg-surface hover:bg-surface/80 transition-all p-3 rounded-lg border border-border shadow-sm flex flex-col gap-2",children:[a.jsxs("div",{className:"flex justify-between items-start gap-2",children:[a.jsx("input",{type:"text",value:L.name,disabled:L.fromCatalog,placeholder:A.courseName,onChange:Z=>I(L.id,"name",Z.target.value),className:`bg-transparent border-none text-sm font-semibold text-foreground placeholder-muted w-full focus:outline-none focus:ring-1 focus:ring-primary/50 rounded px-1 -ml-1 ${L.fromCatalog?"opacity-80 cursor-not-allowed":""}`}),a.jsx("button",{onClick:()=>Ee(L),className:"text-muted hover:text-destructive p-1 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(Tn,{size:14})})]}),a.jsxs("div",{className:"flex justify-between items-end",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("input",{type:"text",value:L.credits,disabled:L.fromCatalog,placeholder:"0",onChange:Z=>/^\d*\.?\d*$/.test(Z.target.value)&&I(L.id,"credits",Z.target.value),className:`w-8 bg-transparent text-xs font-bold text-center border-b border-border focus:border-primary outline-none ${L.fromCatalog?"opacity-80 cursor-not-allowed border-transparent":""}`}),a.jsx("span",{className:"text-[10px] text-muted",children:A.credit})]}),a.jsxs("div",{className:"flex gap-1",children:[!L.completed&&a.jsxs("button",{onClick:()=>$e(L),className:"text-[10px] px-2 py-1 rounded bg-surface border border-border hover:bg-surface/80 flex items-center gap-1",title:A.matchCourse,children:[a.jsx(Dr,{size:10})," ",A.syncBtn]}),a.jsx("div",{className:`text-[10px] px-2 py-1 rounded-full font-bold border transition-colors select-none ${L.completed?"bg-emerald-500/10 text-emerald-500 border-emerald-500/20":"bg-blue-500/10 text-blue-500 border-blue-500/20"}`,children:L.completed?A.badgeCompleted:A.badgePlanned})]})]})]}),Vt=({title:L,category:Z})=>{const he=d.courses.filter(je=>Z==="core"?je.category==="core"||!je.category:je.category==="elective"),ge=he.filter(je=>je.completed),Ge=he.filter(je=>!je.completed),ot=Z==="elective"?"text-orange-500":"text-primary",qe=Z==="elective"?"bg-orange-500 hover:bg-orange-600":"bg-primary hover:bg-primary/90",Le=Z==="elective"?"bg-orange-400":"bg-emerald-500";return a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:`text-lg font-bold flex items-center gap-2 ${ot}`,children:L}),a.jsxs("div",{className:"flex gap-2",children:[Z==="core"&&null,a.jsxs("button",{onClick:()=>_(Z),className:`flex items-center gap-1.5 px-3 py-1.5 text-white text-xs font-medium rounded-lg transition-colors ${qe}`,children:[a.jsx(zr,{size:14}),A.addCourse]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between pb-2 border-b border-border",children:[a.jsxs("h4",{className:"font-bold text-foreground text-sm flex items-center gap-2",children:[a.jsx("span",{className:`w-2 h-2 rounded-full ${Le}`}),A.completedCourses]}),a.jsxs("div",{className:"flex gap-2 items-center",children:[a.jsxs("button",{onClick:()=>{let je=d.department;const Xt=je.match(/(.+?)(?=\()/);Xt&&(je=Xt[1]),N(je),Ae.current=Z,y(!0)},className:"text-[10px] text-primary hover:underline flex items-center gap-1",children:[a.jsx(tr,{size:10})," ",A.addFromTracker]}),a.jsxs("span",{className:"text-xs text-muted",children:[ge.length," items"]})]})]}),a.jsxs("div",{className:"space-y-2 min-h-[100px]",children:[ge.map(je=>a.jsx(Et,{item:je},je.id)),ge.length===0&&a.jsx("div",{className:"text-center text-muted text-xs py-8 border border-dashed border-border rounded-lg",children:"No completed courses"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between pb-2 border-b border-border",children:[a.jsxs("h4",{className:"font-bold text-foreground text-sm flex items-center gap-2",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"}),A.plannedCourses]}),a.jsxs("div",{className:"flex gap-2 items-center",children:[a.jsxs("button",{onClick:()=>{let je=d.department;const Xt=je.match(/(.+?)(?=\()/);Xt&&(je=Xt[1]),S(je),Ae.current=Z,g(!0)},className:"text-[10px] text-blue-500 hover:underline flex items-center gap-1",children:[a.jsx(tr,{size:10})," ",A.addFromCatalog]}),a.jsxs("span",{className:"text-xs text-muted",children:[Ge.length," items"]})]})]}),a.jsxs("div",{className:"space-y-2 min-h-[100px]",children:[Ge.map(je=>a.jsx(Et,{item:je},je.id)),Ge.length===0&&a.jsx("div",{className:"text-center text-muted text-xs py-8 border border-dashed border-border rounded-lg",children:"No planned courses"})]})]})]})]})},ue=U();return a.jsxs("div",{className:"space-y-8 max-w-3xl mx-auto animate-in fade-in zoom-in-95 duration-300 pb-20",children:[a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary flex items-center gap-2",children:[a.jsx(tr,{size:20}),A.referenceProcess]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"pt-0.5",children:a.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-xs font-bold text-primary",children:"1"})}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("div",{className:"flex items-center gap-2 font-medium text-foreground",children:a.jsxs("a",{href:"https://ctdr.nsysu.edu.tw/class2.php",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-primary hover:underline underline-offset-4",children:[A.step1,a.jsx(Dr,{size:14})]})}),a.jsxs("ul",{className:"text-sm text-muted list-disc list-inside space-y-0.5 pl-1",children:[a.jsx("li",{children:A.step1_sub1}),a.jsx("li",{children:A.step1_sub2}),a.jsxs("li",{children:[A.step1_sub3_pre,a.jsx("span",{className:"underline decoration-primary/50 underline-offset-2",children:A.step1_sub3_link})]}),a.jsx("li",{children:A.step1_sub4})]})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"pt-0.5",children:a.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-xs font-bold text-primary",children:"2"})}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("div",{className:"font-medium text-foreground",children:A.step2}),a.jsx("ul",{className:"text-sm text-muted list-disc list-inside space-y-0.5 pl-1",children:a.jsx("li",{children:A.step2_sub1})})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"pt-0.5",children:a.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-xs font-bold text-primary",children:"3"})}),a.jsxs("div",{className:"font-medium text-foreground flex items-center gap-2",children:[A.step3,a.jsx(vt,{size:16,className:"text-primary"})]})]})]})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary flex items-center gap-2",children:[a.jsx(tr,{size:20}),A.basicInfo]}),a.jsxs("a",{href:"https://oaa.nsysu.edu.tw/static/file/3/1003/attach/20/pta_232069_5443563_94211.pdf",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 px-3 py-1.5 bg-primary/10 hover:bg-primary/20 text-primary text-xs font-medium rounded-lg transition-colors",children:[A.officialRegulations,a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),a.jsx("polyline",{points:"15 3 21 3 21 9"}),a.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:A.doubleMajorDept}),a.jsxs("select",{value:d.department,onChange:L=>B("department",L.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50",children:[a.jsx("option",{value:"",children:A.selectDept}),a.jsx("optgroup",{label:" (Integrated Programs)",children:LO.map(L=>a.jsx("option",{value:L,children:L},L))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:A.applicableYear}),a.jsxs("select",{value:d.targetYear,onChange:L=>B("targetYear",L.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50",children:[a.jsx("option",{value:"",children:A.selectYear}),j.map(L=>a.jsx("option",{value:L,children:L},L))]})]}),a.jsxs("div",{className:"md:col-span-2 grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:A.minTotalCredits}),a.jsx("input",{type:"text",value:d.minTotalCredits,onChange:L=>/^\d*$/.test(L.target.value)&&B("minTotalCredits",L.target.value),placeholder:"e.g. 15",className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:A.minCoreCredits}),a.jsx("input",{type:"text",value:d.minCoreCredits||"",onChange:L=>/^\d*$/.test(L.target.value)&&B("minCoreCredits",L.target.value),placeholder:"e.g. 9",className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50"})]})]}),a.jsxs("div",{className:"md:col-span-2 pt-2 border-t border-border/50",children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-2",children:A.coursePlanInput}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("input",{type:"text",value:d.coursePlanUrl||"",onChange:L=>B("coursePlanUrl",L.target.value),placeholder:A.pasteLink,className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground text-sm outline-none focus:ring-2 focus:ring-primary/50"}),d.coursePlanUrl&&a.jsxs("a",{href:d.coursePlanUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-primary hover:underline mt-1 flex items-center gap-1",children:[a.jsx(Dr,{size:10}),A.viewPlan]})]}),a.jsxs("div",{children:[a.jsx("input",{type:"file",id:"course-plan-upload",className:"hidden",accept:"image/*,.pdf",onChange:Y}),$?a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-primary/5 border border-primary/20 rounded-lg",children:[a.jsx("div",{className:"p-1.5 bg-primary/10 rounded-full text-primary",children:a.jsx(ds,{size:14})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsx("div",{className:"text-sm font-medium text-foreground truncate",children:$.name})}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>{const L=URL.createObjectURL($);window.open(L,"_blank")},className:"p-1 text-primary hover:bg-primary/10 rounded transition-colors",title:A.viewFile,children:a.jsx(Dr,{size:14})}),a.jsx("button",{onClick:E,className:"p-1 text-muted hover:text-destructive hover:bg-destructive/10 rounded transition-colors",children:a.jsx(ut,{size:14})})]})]}):a.jsxs("label",{htmlFor:"course-plan-upload",className:"cursor-pointer flex items-center justify-center gap-2 px-4 py-2 bg-background border border-border hover:border-primary text-foreground rounded-lg transition-all shadow-sm active:scale-95 text-sm",children:[a.jsx(jr,{size:14}),A.uploadPlan]})]})]})]})]})]}),a.jsxs("div",{className:"bg-surface/50 p-4 rounded-xl border border-border",children:[ue.target>0?a.jsxs(a.Fragment,{children:[a.jsx(cr,{label:A.totalProgress,current:ue.total,total:ue.target,color:"bg-primary",variant:"l"}),a.jsx("div",{className:"flex justify-end mt-1",children:a.jsxs("span",{className:"text-xs text-muted flex items-center gap-1",children:[a.jsx(nr,{size:12}),A.creditWarning]})})]}):a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("span",{className:"font-medium text-foreground text-lg mb-1",children:A.totalProgress}),a.jsxs("div",{className:"text-sm text-orange-500 font-medium flex items-center gap-2 bg-orange-500/10 p-2 rounded",children:[a.jsx("span",{className:"text-lg",children:"!"})," ",A.pleaseFillTotal]})]}),T().target>0&&a.jsx("div",{className:"mt-4 pt-4 border-t border-border/50",children:a.jsx(cr,{label:A.minCoreCredits,current:T().total,total:T().target,color:"bg-emerald-500",variant:"l"})})]}),a.jsxs("div",{className:"bg-surface/50 p-4 rounded-xl border border-border flex items-center gap-4",children:[a.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center border transition-colors ${W()>=6?"bg-emerald-500 border-emerald-500 text-white":"border-muted text-transparent"}`,children:a.jsx(vt,{size:16,strokeWidth:3})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-sm font-medium text-foreground",children:A.externalCreditsCheck}),a.jsxs("div",{className:"text-xs text-muted mt-0.5",children:[A.externalCreditsProgress,a.jsx("span",{className:W()>=6?"text-emerald-500 font-bold":"text-foreground",children:W()})," / 6"]})]})]}),a.jsx(Vt,{title:A.coreCourses,category:"core"}),a.jsx(Vt,{title:A.elective,category:"elective"}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary border-b border-border/50 pb-2 flex items-center gap-2",children:[a.jsx(jr,{size:20}),A.attachments," & ",A.notes]}),a.jsxs("div",{className:"flex flex-col gap-8",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:A.uploadOrLink}),a.jsxs("div",{className:"space-y-3 pl-2",children:[a.jsxs("div",{children:[a.jsx("input",{type:"file",id:"proof-upload-7",className:"hidden",accept:"image/*,.pdf",onChange:K}),P?a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-primary/5 border border-primary/20 rounded-lg animate-in fade-in slide-in-from-left-2",children:[a.jsx("div",{className:"p-2 bg-primary/10 rounded-full text-primary",children:a.jsx(ds,{size:18})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm font-medium text-foreground truncate max-w-[200px]",children:P.name}),a.jsxs("div",{className:"text-xs text-muted",children:[(P.size/1024).toFixed(1)," KB"]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>{const L=URL.createObjectURL(P);window.open(L,"_blank")},className:"p-1.5 text-primary hover:bg-primary/10 rounded-md transition-colors",title:A.viewFile,children:a.jsx(Dr,{size:16})}),a.jsx("button",{onClick:q,className:"p-1.5 text-muted hover:text-destructive hover:bg-destructive/10 rounded-md transition-colors",children:a.jsx(ut,{size:16})})]})]}):d.proofFileName?a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 bg-surface/50 border border-dashed border-border rounded-lg p-3 max-w-md animate-in fade-in slide-in-from-left-2",children:[a.jsxs("div",{className:"flex items-center gap-3 opacity-70 overflow-hidden",children:[a.jsx(ds,{className:"text-muted flex-shrink-0",size:20}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:d.proofFileName}),a.jsx("p",{className:"text-xs text-muted truncate",children:A.storedOnOriginalDevice})]})]}),a.jsxs("label",{className:"cursor-pointer p-1.5 hover:bg-white/10 rounded-md text-primary transition-colors text-xs flex items-center gap-1 flex-shrink-0 self-start sm:self-auto border border-primary/20 bg-primary/5",children:[a.jsx(jr,{size:14})," ",A.reUpload,a.jsx("input",{type:"file",accept:"image/*,application/pdf",className:"hidden",onChange:K})]})]}):a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("label",{htmlFor:"proof-upload-7",className:"cursor-pointer flex items-center gap-2 px-4 py-2 bg-background border border-border hover:border-primary text-foreground rounded-lg transition-all shadow-sm active:scale-95",children:[a.jsx(jr,{size:16}),a.jsx("span",{className:"text-sm font-medium",children:A.uploadFile})]}),a.jsx("span",{className:"text-xs text-muted",children:A.uploadType})]})]}),a.jsxs("div",{className:"text-xs text-muted flex items-center gap-1.5 mt-1",children:[a.jsx(nr,{size:10,className:"text-muted"}),A.safetyNotice]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:A.notes}),a.jsx("div",{className:"pl-2",children:a.jsx("textarea",{value:d.notes,onChange:L=>B("notes",L.target.value),placeholder:"e.g. ...",className:"w-full bg-background border border-border rounded-lg px-4 py-3 text-foreground outline-none focus:ring-2 focus:ring-primary/50 min-h-[100px] resize-y"})})]})]})]}),f&&a.jsx(KA,{onClose:()=>g(!1),onSelect:M,defaultSearch:R}),x&&a.jsx(qO,{isOpen:x,onClose:()=>y(!1),courses:t,onAdd:F,searchQuery:v,setSearchQuery:N,T:A}),ne&&a.jsx(GO,{candidate:ne,onConfirm:Me,onCancel:()=>te(null),T:A}),O&&a.jsx(z,{onCancel:()=>J(!1),onManualAdd:()=>{J(!1),N(""),y(!0)},T:A}),me&&a.jsx(Ue,{isOpen:!!me,onClose:()=>Ee(null),onConfirm:Be,T:A})]})},XO=({candidate:r,onConfirm:e,onCancel:t,T:s})=>(k.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),$t.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-md shadow-2xl p-6 flex flex-col gap-4 animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[a.jsx("div",{className:"mx-auto w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center text-primary mb-2",children:a.jsx(vt,{size:24,strokeWidth:3})}),a.jsx("h3",{className:"text-xl font-bold",children:s.perfectMatchFound}),a.jsx("p",{className:"text-muted text-sm",children:s.matchConfirmText})]}),a.jsxs("div",{className:"bg-surface/50 p-4 rounded-lg flex flex-col gap-2 border border-border",children:[a.jsx("div",{className:"font-bold text-center text-lg",children:r.match.name}),a.jsxs("div",{className:"flex justify-center gap-4 text-xs text-muted",children:[a.jsxs("span",{children:[r.match.credits," cr"]}),a.jsx("span",{children:""}),a.jsx("span",{children:r.match.teacher})]}),a.jsx("div",{className:"text-center text-xs text-muted/80",children:r.match.department})]}),a.jsxs("div",{className:"flex gap-3 mt-2",children:[a.jsx("button",{onClick:t,className:"flex-1 py-2.5 px-4 rounded-lg border border-border hover:bg-surface font-medium transition-colors",children:"Cancel"}),a.jsx("button",{onClick:e,className:"flex-1 py-2.5 px-4 rounded-lg bg-primary hover:bg-primary/90 text-white font-bold transition-colors shadow-lg shadow-primary/20",children:"Confirm Sync"})]})]})}),document.body)),JO=({isOpen:r,onClose:e,courses:t,onAdd:s,searchQuery:A,setSearchQuery:l,T:d})=>{if(!r)return null;const u=t.filter(f=>f.name.toLowerCase().includes(A.toLowerCase())||f.id.toLowerCase().includes(A.toLowerCase())||f.userLabels&&f.userLabels.some(g=>g.toLowerCase().includes(A.toLowerCase()))||f.originalTags&&f.originalTags.some(g=>g.toLowerCase().includes(A.toLowerCase())));return k.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),$t.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-lg shadow-2xl max-h-[85vh] flex flex-col animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-4 border-b border-border flex justify-between items-center",children:[a.jsx("h3",{className:"font-bold text-lg",children:d.trackerTitle}),a.jsx("button",{onClick:e,children:a.jsx(ut,{size:20})})]}),a.jsx("div",{className:"p-4 border-b border-border",children:a.jsx("input",{type:"text",placeholder:"Search...",value:A,onChange:f=>l(f.target.value),autoFocus:!0,className:"w-full bg-background border border-border rounded-lg px-3 py-2 outline-none focus:ring-2 focus:ring-primary/50"})}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-2",children:[u.map(f=>a.jsxs("button",{onClick:()=>s(f),className:"w-full text-left p-3 rounded-lg hover:bg-surface/50 border border-transparent hover:border-border transition-all group flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("span",{className:"font-bold",children:f.name})}),a.jsxs("div",{className:"text-xs text-muted flex items-center gap-1",children:[a.jsxs("span",{className:"font-medium text-foreground/80",children:[f.credits," cr"]}),a.jsx("span",{children:""}),[f.teacher||(f.id&&f.id.length<20?f.id:"Custom Course"),f.department].filter(Boolean).join("  ")]})]}),a.jsx("div",{className:"p-2 bg-primary/10 text-primary rounded-full opacity-0 group-hover:opacity-100 transition-all",children:a.jsx(zr,{size:16})})]},f.id)),u.length===0&&a.jsx("div",{className:"text-center p-8 text-muted",children:"No courses found"})]})]})}),document.body)},Pp={department:"",minTotalCredits:"",minCoreCredits:"",targetYear:"",status:"in_progress",courses:[],proofFileName:"",notes:"",coursePlanUrl:"",coursePlanFileName:""},Vp="nsysu-interdisciplinary-course-9-data",WO={en:{referenceProcess:"Reference Process",step1:"Program Introduction",step1_sub1:"Go to About -> Find [Departmental Professional Program] -> Check Rules",step1_sub2:"Scroll down to 'Departmental Professional Program Introduction' to find your program",step1_sub3_pre:"Click ",step1_sub3_link:"'Course Plan'",step1_sub4:"Check 'Professional Module Courses', 'Interdisciplinary Electives', and 'Credit Requirements'",step2:"Add your planned/completed courses to the list below",step2_sub1:"Fill in Basic Info",step3:"ClearGrad tracks your progress in real-time",basicInfo:"Basic Info",doubleMajorDept:"Program Name",selectDept:"Select Program...",applicableYear:"Applicable Year",selectYear:"Select Year...",minTotalCredits:"Minimum Total Credits",minCoreCredits:"Professional Module Course Required Credits",totalProgress:"Total Credits Progress",externalCreditsCheck:"At least 6 credits from courses outside your Major, Minor, and Double Major departments",externalCreditsProgress:"External Credits: ",coursePlanInput:"Course Plan / Regulations",addFromTracker:"Add from Tracker",addFromCatalog:"Add from Catalog",trackerTitle:"Select from Tracker",syncBtn:"Sync",matchCourse:"Match/Sync",matchConfirmTitle:"Confirm Course Match",matchConfirmText:"We found a matching course in your tracker. Do you want to sync data from this course?",perfectMatchFound:"Perfect Match Found!",noMatchFound:"No exact match found in your tracker.",noMatchTitle:"No Match Found",noMatchDesc:"We couldn't find an exact match for this course in your tracker.",manualAdd:"Manual Add",cancel:"Cancel",confirm:"Confirm",deleteConfirmTitle:"Delete Course?",deleteConfirmText:"Are you sure you want to remove this course from your list? This action cannot be undone.",selectCourse:"Select Course",fromTracker:"From Tracker",uploadPlan:"Upload File",pasteLink:"Paste Link...",viewPlan:"View Plan",designated:"Required Courses",coreCourses:"Professional Module Courses",attachments:"Attachments",completedCourses:"Completed Courses",plannedCourses:"Planned Courses",badgeCompleted:"Completed",badgePlanned:"Planned",addCourse:"Add Course",elective:"Interdisciplinary Electives",minCredits:"Min Credits:",sectionComplete:"Section Complete!",courseName:"Course Name",typeToAdd:"Type to add course...",credit:"Credit",pleaseFill:'Please fill in "Min Credits" to track progress.',pleaseFillTotal:'Please fill in "Minimum Total Credits" to track progress.',officialRegulations:"Reference",status:"Status",statusPlanned:"Planned",statusInProgress:"In Progress",statusPending:"Pending Approval",statusCompleted:"Approved",creditWarning:"Completion of credit requirements does not imply official approval.",proofSection:"Approval / Proof (optional)",proofStatus:"Status:",notSubmitted:"Not Submitted",submitted:"Submitted",approved:"Approved",uploadOrLink:"Upload or Paste Link:",uploadType:"Approval Letter / System Screenshot",notes:"Notes (Optional)",viewFile:"View Attached File",uploadFile:"Upload File",safetyNotice:"Files are stored locally in your browser and are not uploaded to any server.",confirmRemove:"Are you sure you want to remove this file?",storedOnOriginalDevice:"Stored on original upload device",reUpload:"Re-upload"},zh:{referenceProcess:"",step1:"",step1_sub1:" ()",step1_sub2:"",step1_sub3_pre:"",step1_sub3_link:"",step1_sub4:"()",step2:"",step2_sub1:"",step3:"ClearGrad ",basicInfo:"",doubleMajorDept:"",selectDept:"...",applicableYear:"",selectYear:"...",minTotalCredits:"",minCoreCredits:"",totalProgress:"",externalCreditsCheck:" 6 ",externalCreditsProgress:"",coursePlanInput:" / ",addFromTracker:"",addFromCatalog:"",trackerTitle:"",syncBtn:"",matchCourse:"/",matchConfirmTitle:"",matchConfirmText:"",perfectMatchFound:"",noMatchFound:"",noMatchTitle:"",noMatchDesc:"",manualAdd:"",cancel:"",confirm:"",deleteConfirmTitle:"",deleteConfirmText:"",selectCourse:"",fromTracker:"",uploadPlan:"",pasteLink:"...",viewPlan:"",attachments:"",designated:"",coreCourses:"",completedCourses:"",plannedCourses:"",badgeCompleted:"",badgePlanned:"",addCourse:"",elective:"",minCredits:"",sectionComplete:"",courseName:"",typeToAdd:"...",credit:"",pleaseFill:"",pleaseFillTotal:"",officialRegulations:"",status:"",statusPlanned:"",statusInProgress:"",statusPending:"",statusCompleted:"",creditWarning:"",proofSection:"",proofStatus:"",notSubmitted:"",submitted:"",approved:"",uploadOrLink:"",uploadType:" / ",notes:"",viewFile:"",uploadFile:"",safetyNotice:"",confirmRemove:"",storedOnOriginalDevice:"",reUpload:""}},ZO=({onStatusChange:r,userProfile:e,courses:t=[]})=>{const{language:s}=At(),A=WO[s==="zh"?"zh":"en"],{semesters:l}=la(),[d,u]=k.useState(()=>{const ue=localStorage.getItem(Vp);if(ue)try{const L=JSON.parse(ue);if(!Array.isArray(L.courses)){const Z=[];L.designatedRequired?.courses&&Z.push(...L.designatedRequired.courses),L.electiveRequired?.courses&&Z.push(...L.electiveRequired.courses),L.courses=Z,L.courses.length===0&&(L.courses=Pp.courses)}return L}catch(L){return console.error("Failed to parse saved data",L),Pp}return Pp}),[f,g]=k.useState(!1),[x,y]=k.useState(!1),[v,N]=k.useState(""),[R,S]=k.useState(""),[P,V]=k.useState(null),[$,G]=k.useState(null);k.useEffect(()=>{aa("interdisciplinary_course_9_proof").then(ue=>{ue&&V(ue)}),aa("interdisciplinary_course_9_course_plan").then(ue=>{ue&&G(ue)})},[]);const K=async ue=>{if(ue.target.files&&ue.target.files[0]){const L=ue.target.files[0];await Un("interdisciplinary_course_9_proof",L),V(L),B("proofFileName",L.name)}},Y=async ue=>{if(ue.target.files&&ue.target.files[0]){const L=ue.target.files[0];await Un("interdisciplinary_course_9_course_plan",L),G(L),B("coursePlanFileName",L.name)}},q=async()=>{window.confirm(A.confirmRemove)&&(await ia("interdisciplinary_course_9_proof"),V(null),B("proofFileName",""))},E=async()=>{window.confirm(A.confirmRemove)&&(await ia("interdisciplinary_course_9_course_plan"),G(null),B("coursePlanFileName",""))};k.useEffect(()=>{const ue=localStorage.getItem(Vp),L=JSON.stringify(d);ue!==L&&localStorage.setItem(Vp,L)},[d]);const j=l.map(ue=>{if(ue.length===4){const L=ue.substring(0,3),Z=ue.substring(3);return Z==="3"?`${L}-Summer`:`${L}-${Z}`}return ue}),B=(ue,L)=>{u(Z=>({...Z,[ue]:L}))},I=(ue,L,Z)=>{u(he=>{const ge=[...he.courses],Ge=ge.findIndex(qe=>qe.id===ue);if(Ge===-1)return he;const ot={...ge[Ge],[L]:Z};return ge[Ge]=ot,{...he,courses:ge}})},_=(ue="core")=>{u(L=>({...L,courses:[...L.courses,{id:QA(),name:"",credits:"",completed:!1,isAutoCreated:!1,category:ue}]}))},Q=ue=>{u(L=>({...L,courses:L.courses.filter(Z=>Z.id!==ue)}))},U=()=>{const ue=d.courses.filter(Z=>Z.completed).reduce((Z,he)=>Z+(parseFloat(he.credits)||0),0),L=parseFloat(d.minTotalCredits)||0;return{total:ue,target:L}},T=()=>{const ue=d.courses.filter(Z=>Z.completed&&(Z.category==="core"||!Z.category)).reduce((Z,he)=>Z+(parseFloat(he.credits)||0),0),L=parseFloat(d.minCoreCredits)||0;return{total:ue,target:L}};k.useEffect(()=>{if(!r)return;const ue=U(),L=T(),Z=ue.target>0&&ue.total>=ue.target,he=L.target>0?L.total>=L.target:!0;r(Z&&he)},[d,r,e]);const W=ue=>{if(d.courses.some(he=>he.name===ue.name&&he.credits===ue.credit.toString())){alert("This course is already in the list!");return}const Z={id:QA(),name:ue.name,credits:ue.credit.toString(),completed:!1,isAutoCreated:!1,category:J.current,department:ue.department,fromCatalog:!0};u(he=>({...he,courses:[...he.courses,Z]})),g(!1)},M=ue=>{if(d.courses.some(he=>he.name===ue.name&&he.credits===ue.credits.toString())){alert("This course is already in the list!");return}const Z={id:QA(),name:ue.name,credits:ue.credits.toString(),completed:!0,isAutoCreated:!1,category:J.current,department:ue.department,fromCatalog:!0};u(he=>({...he,courses:[...he.courses,Z]})),y(!1)},F=({onCancel:ue,onManualAdd:L,T:Z})=>(k.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),$t.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-sm shadow-2xl p-6 flex flex-col gap-4 animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[a.jsx("div",{className:"mx-auto w-12 h-12 bg-orange-500/10 rounded-full flex items-center justify-center text-orange-500 mb-2",children:a.jsx(nr,{size:24,strokeWidth:3})}),a.jsx("h3",{className:"text-xl font-bold",children:Z.noMatchTitle}),a.jsx("p",{className:"text-muted text-sm text-center",children:Z.noMatchDesc})]}),a.jsxs("div",{className:"flex gap-3 mt-2",children:[a.jsx("button",{onClick:ue,className:"flex-1 py-2.5 px-4 rounded-lg border border-border hover:bg-surface font-medium transition-colors",children:Z.cancel}),a.jsx("button",{onClick:L,className:"flex-1 py-2.5 px-4 rounded-lg bg-primary hover:bg-primary/90 text-white font-bold transition-colors shadow-lg shadow-primary/20",children:Z.manualAdd})]})]})}),document.body)),[z,ne]=k.useState(null),[te,O]=k.useState(!1),J=k.useRef("core"),[Ae,me]=k.useState(null),Ee=()=>{Ae&&(Q(Ae.id),me(null))},Be=({isOpen:ue,onClose:L,onConfirm:Z,T:he})=>(k.useEffect(()=>(ue&&(document.body.style.overflow="hidden"),()=>{document.body.style.overflow="auto"}),[ue]),ue?$t.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-sm shadow-2xl p-6 flex flex-col gap-4 animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[a.jsx("div",{className:"mx-auto w-12 h-12 bg-destructive/10 rounded-full flex items-center justify-center text-destructive mb-2",children:a.jsx(nr,{size:24,strokeWidth:3})}),a.jsx("h3",{className:"text-xl font-bold",children:he.deleteConfirmTitle}),a.jsx("p",{className:"text-muted text-sm text-center",children:he.deleteConfirmText})]}),a.jsxs("div",{className:"flex gap-3 mt-2",children:[a.jsx("button",{onClick:L,className:"flex-1 py-2.5 px-4 rounded-lg border border-border hover:bg-surface font-medium transition-colors",children:he.cancel}),a.jsx("button",{onClick:Z,className:"flex-1 py-2.5 px-4 rounded-lg bg-red-500 hover:bg-red-600 text-white font-bold transition-colors shadow-lg shadow-red-500/20",children:he.confirm})]})]})}),document.body):null),Ue=()=>{if(!z)return;const{item:ue,match:L}=z;I(ue.id,"completed",!0),I(ue.id,"credits",L.credits.toString()),I(ue.id,"department",L.department),I(ue.id,"fromCatalog",!0),ne(null)},Me=ue=>{const L=t.find(Z=>Z.id===ue.id||Z.name===ue.name&&Z.credits.toString()===ue.credits);L?ne({item:ue,match:L}):O(!0)},$e=({item:ue})=>a.jsxs("div",{className:"group relative bg-surface hover:bg-surface/80 transition-all p-3 rounded-lg border border-border shadow-sm flex flex-col gap-2",children:[a.jsxs("div",{className:"flex justify-between items-start gap-2",children:[a.jsx("input",{type:"text",value:ue.name,disabled:ue.fromCatalog,placeholder:A.courseName,onChange:L=>I(ue.id,"name",L.target.value),className:`bg-transparent border-none text-sm font-semibold text-foreground placeholder-muted w-full focus:outline-none focus:ring-1 focus:ring-primary/50 rounded px-1 -ml-1 ${ue.fromCatalog?"opacity-80 cursor-not-allowed":""}`}),a.jsx("button",{onClick:()=>me(ue),className:"text-muted hover:text-destructive p-1 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(Tn,{size:14})})]}),a.jsxs("div",{className:"flex justify-between items-end",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("input",{type:"text",value:ue.credits,disabled:ue.fromCatalog,placeholder:"0",onChange:L=>/^\d*\.?\d*$/.test(L.target.value)&&I(ue.id,"credits",L.target.value),className:`w-8 bg-transparent text-xs font-bold text-center border-b border-border focus:border-primary outline-none ${ue.fromCatalog?"opacity-80 cursor-not-allowed border-transparent":""}`}),a.jsx("span",{className:"text-[10px] text-muted",children:A.credit})]}),a.jsxs("div",{className:"flex gap-1",children:[!ue.completed&&a.jsxs("button",{onClick:()=>Me(ue),className:"text-[10px] px-2 py-1 rounded bg-surface border border-border hover:bg-surface/80 flex items-center gap-1",title:A.matchCourse,children:[a.jsx(Dr,{size:10})," ",A.syncBtn]}),a.jsx("div",{className:`text-[10px] px-2 py-1 rounded-full font-bold border transition-colors select-none ${ue.completed?"bg-emerald-500/10 text-emerald-500 border-emerald-500/20":"bg-blue-500/10 text-blue-500 border-blue-500/20"}`,children:ue.completed?A.badgeCompleted:A.badgePlanned})]})]})]}),Et=({title:ue,category:L})=>{const Z=d.courses.filter(Le=>L==="core"?Le.category==="core"||!Le.category:Le.category==="elective"),he=Z.filter(Le=>Le.completed),ge=Z.filter(Le=>!Le.completed),Ge=L==="elective"?"text-orange-500":"text-primary",ot=L==="elective"?"bg-orange-500 hover:bg-orange-600":"bg-primary hover:bg-primary/90",qe=L==="elective"?"bg-orange-400":"bg-emerald-500";return a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:`text-lg font-bold flex items-center gap-2 ${Ge}`,children:ue}),a.jsxs("div",{className:"flex gap-2",children:[L==="core"&&null,a.jsxs("button",{onClick:()=>_(L),className:`flex items-center gap-1.5 px-3 py-1.5 text-white text-xs font-medium rounded-lg transition-colors ${ot}`,children:[a.jsx(zr,{size:14}),A.addCourse]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between pb-2 border-b border-border",children:[a.jsxs("h4",{className:"font-bold text-foreground text-sm flex items-center gap-2",children:[a.jsx("span",{className:`w-2 h-2 rounded-full ${qe}`}),A.completedCourses]}),a.jsxs("div",{className:"flex gap-2 items-center",children:[a.jsxs("button",{onClick:()=>{let Le=d.department;const je=Le.match(/(.+?)(?=\()/);je&&(Le=je[1]),N(Le),J.current=L,y(!0)},className:"text-[10px] text-primary hover:underline flex items-center gap-1",children:[a.jsx(tr,{size:10})," ",A.addFromTracker]}),a.jsxs("span",{className:"text-xs text-muted",children:[he.length," items"]})]})]}),a.jsxs("div",{className:"space-y-2 min-h-[100px]",children:[he.map(Le=>a.jsx($e,{item:Le},Le.id)),he.length===0&&a.jsx("div",{className:"text-center text-muted text-xs py-8 border border-dashed border-border rounded-lg",children:"No completed courses"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between pb-2 border-b border-border",children:[a.jsxs("h4",{className:"font-bold text-foreground text-sm flex items-center gap-2",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"}),A.plannedCourses]}),a.jsxs("div",{className:"flex gap-2 items-center",children:[a.jsxs("button",{onClick:()=>{let Le=d.department;const je=Le.match(/(.+?)(?=\()/);je&&(Le=je[1]),S(Le),J.current=L,g(!0)},className:"text-[10px] text-blue-500 hover:underline flex items-center gap-1",children:[a.jsx(tr,{size:10})," ",A.addFromCatalog]}),a.jsxs("span",{className:"text-xs text-muted",children:[ge.length," items"]})]})]}),a.jsxs("div",{className:"space-y-2 min-h-[100px]",children:[ge.map(Le=>a.jsx($e,{item:Le},Le.id)),ge.length===0&&a.jsx("div",{className:"text-center text-muted text-xs py-8 border border-dashed border-border rounded-lg",children:"No planned courses"})]})]})]})]})},Vt=U();return a.jsxs("div",{className:"space-y-8 max-w-3xl mx-auto animate-in fade-in zoom-in-95 duration-300 pb-20",children:[a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary flex items-center gap-2",children:[a.jsx(tr,{size:20}),A.referenceProcess]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"pt-0.5",children:a.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-xs font-bold text-primary",children:"1"})}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("div",{className:"flex items-center gap-2 font-medium text-foreground",children:a.jsxs("a",{href:"https://ctdr.nsysu.edu.tw/class2.php",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-primary hover:underline underline-offset-4",children:[A.step1,a.jsx(Dr,{size:14})]})}),a.jsxs("ul",{className:"text-sm text-muted list-disc list-inside space-y-0.5 pl-1",children:[a.jsx("li",{children:A.step1_sub1}),a.jsx("li",{children:A.step1_sub2}),a.jsxs("li",{children:[A.step1_sub3_pre,a.jsx("span",{className:"underline decoration-primary/50 underline-offset-2",children:A.step1_sub3_link})]}),a.jsx("li",{children:A.step1_sub4})]})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"pt-0.5",children:a.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-xs font-bold text-primary",children:"2"})}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("div",{className:"font-medium text-foreground",children:A.step2}),a.jsx("ul",{className:"text-sm text-muted list-disc list-inside space-y-0.5 pl-1",children:a.jsx("li",{children:A.step2_sub1})})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"pt-0.5",children:a.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-xs font-bold text-primary",children:"3"})}),a.jsxs("div",{className:"font-medium text-foreground flex items-center gap-2",children:[A.step3,a.jsx(vt,{size:16,className:"text-primary"})]})]})]})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary flex items-center gap-2",children:[a.jsx(tr,{size:20}),A.basicInfo]}),a.jsxs("a",{href:"https://oaa.nsysu.edu.tw/static/file/3/1003/attach/20/pta_232069_5443563_94211.pdf",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 px-3 py-1.5 bg-primary/10 hover:bg-primary/20 text-primary text-xs font-medium rounded-lg transition-colors",children:[A.officialRegulations,a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),a.jsx("polyline",{points:"15 3 21 3 21 9"}),a.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:A.doubleMajorDept}),a.jsxs("select",{value:d.department,onChange:ue=>B("department",ue.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50",children:[a.jsx("option",{value:"",children:A.selectDept}),a.jsx("optgroup",{label:"() (Departmental Professional Programs)",children:HO.map(ue=>a.jsx("option",{value:ue,children:ue},ue))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:A.applicableYear}),a.jsxs("select",{value:d.targetYear,onChange:ue=>B("targetYear",ue.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50",children:[a.jsx("option",{value:"",children:A.selectYear}),j.map(ue=>a.jsx("option",{value:ue,children:ue},ue))]})]}),a.jsxs("div",{className:"md:col-span-2 grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:A.minTotalCredits}),a.jsx("input",{type:"text",value:d.minTotalCredits,onChange:ue=>/^\d*$/.test(ue.target.value)&&B("minTotalCredits",ue.target.value),placeholder:"e.g. 15",className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:A.minCoreCredits}),a.jsx("input",{type:"text",value:d.minCoreCredits||"",onChange:ue=>/^\d*$/.test(ue.target.value)&&B("minCoreCredits",ue.target.value),placeholder:"e.g. 9",className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50"})]})]}),a.jsxs("div",{className:"md:col-span-2 pt-2 border-t border-border/50",children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-2",children:A.coursePlanInput}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("input",{type:"text",value:d.coursePlanUrl||"",onChange:ue=>B("coursePlanUrl",ue.target.value),placeholder:A.pasteLink,className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground text-sm outline-none focus:ring-2 focus:ring-primary/50"}),d.coursePlanUrl&&a.jsxs("a",{href:d.coursePlanUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-primary hover:underline mt-1 flex items-center gap-1",children:[a.jsx(Dr,{size:10}),A.viewPlan]})]}),a.jsxs("div",{children:[a.jsx("input",{type:"file",id:"course-plan-upload",className:"hidden",accept:"image/*,.pdf",onChange:Y}),$?a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-primary/5 border border-primary/20 rounded-lg",children:[a.jsx("div",{className:"p-1.5 bg-primary/10 rounded-full text-primary",children:a.jsx(ds,{size:14})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsx("div",{className:"text-sm font-medium text-foreground truncate",children:$.name})}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>{const ue=URL.createObjectURL($);window.open(ue,"_blank")},className:"p-1 text-primary hover:bg-primary/10 rounded transition-colors",title:A.viewFile,children:a.jsx(Dr,{size:14})}),a.jsx("button",{onClick:E,className:"p-1 text-muted hover:text-destructive hover:bg-destructive/10 rounded transition-colors",children:a.jsx(ut,{size:14})})]})]}):a.jsxs("label",{htmlFor:"course-plan-upload",className:"cursor-pointer flex items-center justify-center gap-2 px-4 py-2 bg-background border border-border hover:border-primary text-foreground rounded-lg transition-all shadow-sm active:scale-95 text-sm",children:[a.jsx(jr,{size:14}),A.uploadPlan]})]})]})]})]})]}),a.jsxs("div",{className:"bg-surface/50 p-4 rounded-xl border border-border",children:[Vt.target>0?a.jsxs(a.Fragment,{children:[a.jsx(cr,{label:A.totalProgress,current:Vt.total,total:Vt.target,color:"bg-primary",variant:"l"}),a.jsx("div",{className:"flex justify-end mt-1",children:a.jsxs("span",{className:"text-xs text-muted flex items-center gap-1",children:[a.jsx(nr,{size:12}),A.creditWarning]})})]}):a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("span",{className:"font-medium text-foreground text-lg mb-1",children:A.totalProgress}),a.jsxs("div",{className:"text-sm text-orange-500 font-medium flex items-center gap-2 bg-orange-500/10 p-2 rounded",children:[a.jsx("span",{className:"text-lg",children:"!"})," ",A.pleaseFillTotal]})]}),T().target>0&&a.jsx("div",{className:"mt-4 pt-4 border-t border-border/50",children:a.jsx(cr,{label:A.minCoreCredits,current:T().total,total:T().target,color:"bg-emerald-500",variant:"l"})})]}),a.jsx(Et,{title:A.coreCourses,category:"core"}),a.jsx(Et,{title:A.elective,category:"elective"}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary border-b border-border/50 pb-2 flex items-center gap-2",children:[a.jsx(jr,{size:20}),A.attachments," & ",A.notes]}),a.jsxs("div",{className:"flex flex-col gap-8",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:A.uploadOrLink}),a.jsxs("div",{className:"space-y-3 pl-2",children:[a.jsxs("div",{children:[a.jsx("input",{type:"file",id:"proof-upload-7",className:"hidden",accept:"image/*,.pdf",onChange:K}),P?a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-primary/5 border border-primary/20 rounded-lg animate-in fade-in slide-in-from-left-2",children:[a.jsx("div",{className:"p-2 bg-primary/10 rounded-full text-primary",children:a.jsx(ds,{size:18})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm font-medium text-foreground truncate max-w-[200px]",children:P.name}),a.jsxs("div",{className:"text-xs text-muted",children:[(P.size/1024).toFixed(1)," KB"]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>{const ue=URL.createObjectURL(P);window.open(ue,"_blank")},className:"p-1.5 text-primary hover:bg-primary/10 rounded-md transition-colors",title:A.viewFile,children:a.jsx(Dr,{size:16})}),a.jsx("button",{onClick:q,className:"p-1.5 text-muted hover:text-destructive hover:bg-destructive/10 rounded-md transition-colors",children:a.jsx(ut,{size:16})})]})]}):d.proofFileName?a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 bg-surface/50 border border-dashed border-border rounded-lg p-3 max-w-md animate-in fade-in slide-in-from-left-2",children:[a.jsxs("div",{className:"flex items-center gap-3 opacity-70 overflow-hidden",children:[a.jsx(ds,{className:"text-muted flex-shrink-0",size:20}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:d.proofFileName}),a.jsx("p",{className:"text-xs text-muted truncate",children:A.storedOnOriginalDevice})]})]}),a.jsxs("label",{className:"cursor-pointer p-1.5 hover:bg-white/10 rounded-md text-primary transition-colors text-xs flex items-center gap-1 flex-shrink-0 self-start sm:self-auto border border-primary/20 bg-primary/5",children:[a.jsx(jr,{size:14})," ",A.reUpload,a.jsx("input",{type:"file",accept:"image/*,application/pdf",className:"hidden",onChange:K})]})]}):a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("label",{htmlFor:"proof-upload-7",className:"cursor-pointer flex items-center gap-2 px-4 py-2 bg-background border border-border hover:border-primary text-foreground rounded-lg transition-all shadow-sm active:scale-95",children:[a.jsx(jr,{size:16}),a.jsx("span",{className:"text-sm font-medium",children:A.uploadFile})]}),a.jsx("span",{className:"text-xs text-muted",children:A.uploadType})]})]}),a.jsxs("div",{className:"text-xs text-muted flex items-center gap-1.5 mt-1",children:[a.jsx(nr,{size:10,className:"text-muted"}),A.safetyNotice]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:A.notes}),a.jsx("div",{className:"pl-2",children:a.jsx("textarea",{value:d.notes,onChange:ue=>B("notes",ue.target.value),placeholder:"e.g. ...",className:"w-full bg-background border border-border rounded-lg px-4 py-3 text-foreground outline-none focus:ring-2 focus:ring-primary/50 min-h-[100px] resize-y"})})]})]})]}),f&&a.jsx(KA,{onClose:()=>g(!1),onSelect:W,defaultSearch:R}),x&&a.jsx(JO,{isOpen:x,onClose:()=>y(!1),courses:t,onAdd:M,searchQuery:v,setSearchQuery:N,T:A}),z&&a.jsx(XO,{candidate:z,onConfirm:Ue,onCancel:()=>ne(null),T:A}),te&&a.jsx(F,{onCancel:()=>O(!1),onManualAdd:()=>{O(!1),N(""),y(!0)},T:A}),Ae&&a.jsx(Be,{isOpen:!!Ae,onClose:()=>me(null),onConfirm:Ee,T:A})]})},e6={en:{title:"Micro-credits",desc:"Track accumulation of micro-credits. Max 1 credit per semester counts towards graduation (Total Max: 6).",basicInfo:"Targets",minTotalCredits:"Target Total Credits",totalProgress:"Effective Progress",addCourse:"Add Item",courseName:"Name / Activity",hours:"Hours",credit:"Credit",completed:"Approved!",pending:"In Progress",deleteConfirmTitle:"Delete Item?",deleteConfirmText:"Are you sure you want to remove this item?",cancel:"Cancel",confirm:"Confirm",notes:"Notes",pleaseFill:"Set a target to track progress.",completedItems:"Completed Items",semTotal:"Sem Total:",effective:"Effective:",semester:"Semester",selectSem:"Select...",ruleWarning:"Need official approval every year.",maxPerSemWarning:"Max 1 credit/semester counts.",officialApproval:"Official Approval Required",semExists:"Semester already exists!"},zh:{title:"",desc:" 1  6 ",basicInfo:"",minTotalCredits:"",totalProgress:"",addCourse:"",courseName:" / ",hours:"",credit:"",completed:"",pending:"",deleteConfirmTitle:"",deleteConfirmText:"",cancel:"",confirm:"",notes:"",pleaseFill:"",completedItems:"",semTotal:"",effective:"",semester:"",selectSem:"...",ruleWarning:"",maxPerSemWarning:" 1 ",officialApproval:"",semExists:""}},t6=({isOpen:r,onClose:e,onConfirm:t,language:s,T:A,existingSemesters:l})=>{const[d,u]=k.useState(String(new Date().getFullYear()-1911)),[f,g]=k.useState("1");if(k.useEffect(()=>{r&&(u(String(new Date().getFullYear()-1911)),g("Summer"))},[r]),!r)return null;let x="";f==="1"||f==="2"?x=`${d}-${f}`:x=`${d}-${f==="Summer"?"Summer()":"Winter()"}`;const y=l.some(v=>v===x);return $t.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-sm shadow-2xl p-6 flex flex-col gap-4 animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[a.jsx("div",{className:"mx-auto w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center text-primary mb-2",children:a.jsx(zr,{size:24,strokeWidth:3})}),a.jsx("h3",{className:"text-xl font-bold",children:s==="zh"?"":"Add Semester"}),a.jsx("p",{className:"text-muted text-sm text-center",children:s==="zh"?"":"Enter year and select semester type"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-bold text-muted uppercase mb-1 block",children:s==="zh"?"":"Year"}),a.jsx("input",{type:"number",value:d,onChange:v=>u(v.target.value),className:"w-full bg-surface border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary font-mono",autoFocus:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-bold text-muted uppercase mb-1 block",children:s==="zh"?"":"Semester"}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:f,onChange:v=>g(v.target.value),className:"w-full appearance-none bg-surface border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary font-bold cursor-pointer",children:[a.jsx("option",{value:"Summer",children:s==="zh"?"":"Summer"}),a.jsx("option",{value:"1",children:s==="zh"?"":"Fall(sem 1)"}),a.jsx("option",{value:"Winter",children:s==="zh"?"":"Winter"}),a.jsx("option",{value:"2",children:s==="zh"?"":"Spring(sem 2)"})]}),a.jsx(xd,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted pointer-events-none",size:16})]})]}),y&&a.jsxs("div",{className:"flex items-center gap-2 text-destructive text-sm font-bold justify-center bg-destructive/10 p-2 rounded",children:[a.jsx(nr,{size:16}),A.semExists]})]}),a.jsxs("div",{className:"flex gap-3 mt-2",children:[a.jsx("button",{onClick:e,className:"flex-1 py-2.5 px-4 rounded-lg border border-border hover:bg-surface font-medium transition-colors",children:A.cancel}),a.jsx("button",{onClick:()=>t(d,f),disabled:!d||y,className:"flex-1 py-2.5 px-4 rounded-lg bg-primary hover:bg-primary/90 text-white font-bold transition-colors shadow-lg shadow-primary/20 disabled:opacity-50 disabled:cursor-not-allowed",children:A.confirm})]})]})}),document.body)},r6=({onStatusChange:r,userProfile:e})=>{const{language:t}=At(),s=e6[t==="zh"?"zh":"en"],A=e?.entranceYear||113,[l,d]=k.useState(()=>{const M=localStorage.getItem(Oc);if(M)try{const F=JSON.parse(M);if(F.courses){const z=wx(A)[0];F.courses=F.courses.map(ne=>{let te=ne.semester||z||"Unknown";return(/^\d+$/.test(te)||/^\d+-\d+$/.test(te))&&(te=z),{...ne,semester:te}})}return{...Zo,...F}}catch(F){return console.error("Failed to parse micro-credits data",F),Zo}return Zo}),{effectiveStats:u,grandTotalEffective:f,sortedSemesters:g,activeSemesters:x,rawStats:y}=V0(l,A),[v,N]=k.useState(null),[R,S]=k.useState(null),[P,V]=k.useState({}),[$,G]=k.useState([]),[K,Y]=k.useState(!1);k.useEffect(()=>{const M=localStorage.getItem(Oc),F=JSON.stringify(l);M!==F&&(localStorage.setItem(Oc,F),window.dispatchEvent(new Event("micro-credits-updated")))},[l]);const q=l.courses.reduce((M,F)=>{const z=F.semester||"Unknown";return M[z]||(M[z]=[]),M[z].push(F),M},{}),E=parseFloat(l.minTotalCredits)||0;k.useEffect(()=>{if(!r)return;const M=E>0&&f>=E;r(M)},[f,E,r]);const j=M=>{const F={id:QA(),name:"",credits:"",hours:"",completed:!1,semester:M};d(z=>({...z,courses:[...z.courses,F]})),V(z=>({...z,[M]:!0}))},B=(M,F,z)=>{d(ne=>({...ne,courses:ne.courses.map(te=>te.id===M?{...te,[F]:z}:te)}))},I=()=>{v&&(d(M=>({...M,courses:M.courses.filter(F=>F.id!==v.id)})),N(null))},_=M=>{V(F=>({...F,[M]:!F[M]}))},Q=(M,F)=>{if(!M||isNaN(parseInt(M)))return;let z="";F==="1"||F==="2"?z=`${M}-${F}`:z=`${M}-${F==="Summer"?"Summer()":"Winter()"}`,x.includes(z)||(d(ne=>{const te=ne.deletedSemesters||[],O=ne.manualSemesters||[],J=te.filter(Ee=>Ee!==z);let Ae=O;const me=wx(A);return!O.includes(z)&&!me.includes(z)&&(Ae=[...O,z]),{...ne,manualSemesters:Ae,deletedSemesters:J}}),G([z]),setTimeout(()=>G([]),2e3)),Y(!1)},U=()=>{R&&(d(M=>({...M,manualSemesters:(M.manualSemesters||[]).filter(F=>F!==R),deletedSemesters:[...M.deletedSemesters||[],R],courses:M.courses.filter(F=>F.semester!==R)})),S(null))},T=M=>{S(M)},W=()=>{if(!v&&!R)return null;const M=!!R,F=M?t==="zh"?"":"Delete Semester?":s.deleteConfirmTitle,z=M?t==="zh"?" ()":"Are you sure you want to remove this semester? (All items will be deleted)":s.deleteConfirmText,ne=M?U:I,te=M?()=>S(null):()=>N(null);return $t.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-sm shadow-2xl p-6 flex flex-col gap-4 animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[a.jsx("div",{className:"mx-auto w-12 h-12 bg-destructive/10 rounded-full flex items-center justify-center text-destructive mb-2",children:a.jsx(nr,{size:24,strokeWidth:3})}),a.jsx("h3",{className:"text-xl font-bold",children:F}),a.jsx("p",{className:"text-muted text-sm text-center",children:z})]}),a.jsxs("div",{className:"flex gap-3 mt-2",children:[a.jsx("button",{onClick:te,className:"flex-1 py-2.5 px-4 rounded-lg border border-border hover:bg-surface font-medium transition-colors",children:s.cancel}),a.jsx("button",{onClick:ne,className:"flex-1 py-2.5 px-4 rounded-lg bg-red-500 hover:bg-red-600 text-white font-bold transition-colors shadow-lg shadow-red-500/20",children:s.confirm})]})]})}),document.body)};return a.jsxs("div",{className:"w-full max-w-4xl mx-auto space-y-8 animate-in fade-in zoom-in-95 duration-300 pb-20 px-1",children:[a.jsx(W,{}),a.jsx(t6,{isOpen:K,onClose:()=>Y(!1),onConfirm:Q,language:t,T:s,existingSemesters:x}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("h2",{className:"text-2xl font-bold text-foreground",children:s.title}),a.jsxs("div",{className:"flex items-start gap-2 text-muted text-sm bg-blue-500/10 p-3 rounded-lg border border-blue-500/20",children:[a.jsx(nr,{size:16,className:"mt-0.5 text-blue-500 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("p",{children:s.desc}),a.jsx("p",{className:"text-blue-400 mt-1 font-bold",children:s.ruleWarning})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"md:col-span-1 bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsx("h3",{className:"text-sm font-bold text-primary uppercase tracking-wider mb-4 flex items-center gap-2",children:s.basicInfo}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1.5",children:s.minTotalCredits}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",value:l.minTotalCredits,onChange:M=>{const F=M.target.value;/^\d*\.?\d*$/.test(F)&&(F===""||parseFloat(F)<=6)&&d(z=>({...z,minTotalCredits:F}))},placeholder:"6.0",className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary font-mono"}),a.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-muted font-bold",children:"Cr (Max 6)"})]})]})]}),a.jsxs("div",{className:"md:col-span-2 bg-surface/50 p-6 rounded-xl border border-border flex flex-col justify-center",children:[a.jsx("h3",{className:"text-sm font-bold text-primary uppercase tracking-wider mb-4",children:s.totalProgress}),a.jsxs("div",{className:"flex items-end gap-2 mb-2",children:[a.jsx("span",{className:`text-4xl font-bold font-mono ${E>0&&f>=E?"text-emerald-500":"text-foreground"}`,children:f}),a.jsxs("span",{className:"text-lg text-muted mb-1 font-mono",children:["/ ",E||"-"]})]}),E>0?a.jsx(cr,{label:"",current:f,total:E,color:f>=E?"bg-emerald-500":"bg-primary"}):a.jsx("div",{className:"text-sm text-muted",children:s.pleaseFill})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{onClick:()=>Y(!0),className:"text-xs flex items-center gap-1 text-primary hover:text-primary/80 transition-colors font-bold bg-primary/5 px-3 py-1.5 rounded-lg border border-primary/10",children:[a.jsx(zr,{size:14}),t==="zh"?"":"Add Year"]})}),g.map(M=>{const F=q[M]||[],z=y[M]||0,ne=u[M]||0,te=!!P[M],O=$.includes(M);return a.jsxs("div",{className:`
                                    bg-surface/50 rounded-xl border overflow-hidden transition-all duration-500
                                    ${O?"border-primary shadow-[0_0_15px_rgba(var(--primary-rgb),0.3)] scale-[1.01]":"border-border"}
                                `,children:[a.jsxs("div",{className:"group p-4 flex items-center justify-between cursor-pointer hover:bg-surface/80 transition-colors",onClick:()=>_(M),children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`p-1 rounded bg-surface border border-border transition-transform ${te?"rotate-90":""}`,children:a.jsx(q2,{size:14})}),a.jsx("h3",{className:"font-bold text-foreground w-40 shrink-0",children:(()=>{if(M.includes("Summer")||M.includes("")){const J=M.split("-")[0];return t==="zh"?`${J}-`:`${J}-Summer`}if(M.includes("Winter")||M.includes("")){const J=M.split("-")[0];return t==="zh"?`${J}-`:`${J}-Winter`}if(M.endsWith("-1")){const J=M.split("-")[0];return t==="zh"?`${J}-`:`${J}-Fall`}if(M.endsWith("-2")){const J=M.split("-")[0];return t==="zh"?`${J}-`:`${J}-Spring`}return M})()}),a.jsxs("div",{className:"flex items-center gap-2 text-xs ml-auto sm:ml-2",children:[a.jsxs("span",{className:"text-muted",children:[s.semTotal," ",a.jsx("span",{className:"font-mono font-bold text-foreground",children:z.toFixed(1)})]}),a.jsx("span",{className:"text-muted",children:"/"}),a.jsxs("span",{className:`${ne<z?"text-orange-400":"text-emerald-500"}`,children:[s.effective," ",a.jsx("span",{className:"font-mono font-bold",children:ne.toFixed(1)})]}),ne<z&&a.jsx("span",{className:"text-[10px] bg-orange-500/10 text-orange-400 px-1.5 py-0.5 rounded border border-orange-500/20 hidden sm:inline-block",children:s.maxPerSemWarning})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:J=>{J.stopPropagation(),T(M)},className:"text-muted hover:text-destructive p-1.5 rounded hover:bg-surface transition-colors opacity-0 group-hover:opacity-100 duration-200",title:"Delete Semester",children:a.jsx(Tn,{size:16})}),a.jsx("button",{onClick:J=>{J.stopPropagation(),j(M)},className:"bg-primary/10 hover:bg-primary text-primary hover:text-white p-1.5 rounded transition-colors",children:a.jsx(zr,{size:16})})]})]}),te&&a.jsxs("div",{className:"p-4 space-y-3 border-t border-border/50 animate-in slide-in-from-top-2 duration-200",children:[F.length===0&&a.jsx("div",{className:"text-center py-4 text-muted text-xs italic",children:"No items"}),F.map(J=>a.jsxs("div",{className:"group relative bg-background p-3 rounded-lg border border-border flex flex-col md:flex-row gap-3 items-start md:items-center",children:[a.jsx("div",{className:"flex-1 w-full",children:a.jsx("input",{type:"text",value:J.name,placeholder:s.courseName,onChange:Ae=>B(J.id,"name",Ae.target.value),className:"bg-transparent border-none text-sm font-semibold text-foreground placeholder-muted w-full focus:outline-none focus:ring-0 px-0"})}),a.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto justify-between",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("input",{type:"text",value:J.hours||"",placeholder:"e.g. 8",onChange:Ae=>B(J.id,"hours",Ae.target.value),className:"w-16 bg-surface text-sm font-bold text-center border border-border rounded focus:border-primary outline-none py-1 placeholder:font-normal"}),a.jsx("span",{className:"text-xs text-muted",children:s.hours})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("input",{type:"text",value:J.credits,placeholder:"e.g. 0.1",onChange:Ae=>/^\d*\.?\d*$/.test(Ae.target.value)&&B(J.id,"credits",Ae.target.value),className:"w-20 bg-surface text-sm font-bold text-center border border-border rounded focus:border-primary outline-none py-1 placeholder:font-normal"}),a.jsx("span",{className:"text-xs text-muted",children:s.credit})]}),a.jsxs("div",{className:"flex items-center bg-surface border border-border rounded-lg p-0.5 overflow-hidden",children:[a.jsx("button",{onClick:()=>B(J.id,"completed",!1),className:`px-3 py-1.5 text-xs font-bold rounded-md transition-all ${J.completed?"text-muted hover:bg-background/50":"bg-orange-500/10 text-orange-500 shadow-sm"}`,children:s.pending}),a.jsxs("button",{onClick:()=>B(J.id,"completed",!0),className:`px-3 py-1.5 text-xs font-bold rounded-md flex items-center gap-1 transition-all ${J.completed?"bg-emerald-500 text-white shadow-sm":"text-muted hover:bg-background/50"}`,children:[J.completed&&a.jsx(Y2,{size:12}),s.completed]})]}),a.jsx("button",{onClick:()=>N(J),className:"text-muted hover:text-destructive p-1.5 rounded hover:bg-surface transition-colors opacity-0 group-hover:opacity-100 duration-200",children:a.jsx(Tn,{size:14})})]})]},J.id))]})]},M)})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsx("h3",{className:"text-sm font-bold text-muted uppercase tracking-wider",children:s.notes}),a.jsx("textarea",{value:l.notes||"",onChange:M=>d(F=>({...F,notes:M.target.value})),className:"w-full h-24 bg-background border border-border rounded-lg p-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary resize-none",placeholder:"..."}),a.jsxs("p",{className:"text-xs text-muted flex items-center gap-1",children:[a.jsx(nr,{size:12}),s.ruleWarning]})]})]})},s6={en:{attachments:"Attachments",notes:"Notes (Optional)",uploadOrLink:"Upload or Paste Link:",uploadFile:"Upload File",uploadType:"Approval Letter / System Screenshot",viewFile:"View Attached File",safetyNotice:"Files are stored locally in your browser and are not uploaded to any server.",confirmRemove:"Are you sure you want to remove this file?"},zh:{attachments:"",notes:"",uploadOrLink:"",uploadFile:"",uploadType:" / ",viewFile:"",safetyNotice:"",confirmRemove:""}},n6=({storageKey:r,dbKeyPrefix:e})=>{const{language:t}=At(),s=s6[t],[A,l]=k.useState(""),[d,u]=k.useState(null);k.useEffect(()=>{const y=localStorage.getItem(r);l(y||""),(async()=>{const N=await aa(`${e}proof`);u(N||null)})()},[r,e]);const f=y=>{l(y),localStorage.setItem(r,y)},g=async y=>{if(y.target.files&&y.target.files[0]){const v=y.target.files[0];await Un(`${e}proof`,v),u(v)}},x=async()=>{window.confirm(s.confirmRemove)&&(await ia(`${e}proof`),u(null))};return a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary border-b border-border/50 pb-2 flex items-center gap-2",children:[a.jsx(jr,{size:20}),s.attachments," & ",s.notes]}),a.jsxs("div",{className:"flex flex-col gap-8",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:s.uploadOrLink}),a.jsxs("div",{className:"space-y-3 pl-2",children:[a.jsxs("div",{children:[a.jsx("input",{type:"file",id:`proof-upload-${e}`,className:"hidden",accept:"image/*,.pdf",onChange:g}),d?a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-primary/5 border border-primary/20 rounded-lg animate-in fade-in slide-in-from-left-2",children:[a.jsx("div",{className:"p-2 bg-primary/10 rounded-full text-primary",children:a.jsx(ds,{size:18})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm font-medium text-foreground truncate max-w-[200px]",children:d.name}),a.jsxs("div",{className:"text-xs text-muted",children:[(d.size/1024).toFixed(1)," KB"]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>{const y=URL.createObjectURL(d);window.open(y,"_blank")},className:"p-1.5 text-primary hover:bg-primary/10 rounded-md transition-colors",title:s.viewFile,children:a.jsx(Dr,{size:16})}),a.jsx("button",{onClick:x,className:"p-1.5 text-muted hover:text-destructive hover:bg-destructive/10 rounded-md transition-colors",children:a.jsx(ut,{size:16})})]})]}):a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("label",{htmlFor:`proof-upload-${e}`,className:"cursor-pointer flex items-center gap-2 px-4 py-2 bg-background border border-border hover:border-primary text-foreground rounded-lg transition-all shadow-sm active:scale-95",children:[a.jsx(jr,{size:16}),a.jsx("span",{className:"text-sm font-medium",children:s.uploadFile})]}),a.jsx("span",{className:"text-xs text-muted",children:s.uploadType})]})]}),a.jsxs("div",{className:"text-xs text-muted flex items-center gap-1.5 mt-1",children:[a.jsx(nr,{size:10,className:"text-muted"}),s.safetyNotice]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:s.notes}),a.jsx("div",{className:"pl-2",children:a.jsx("textarea",{value:A,onChange:y=>f(y.target.value),placeholder:"...",className:"w-full bg-background border border-border rounded-lg px-4 py-3 text-foreground outline-none focus:ring-2 focus:ring-primary/50 min-h-[100px] resize-y"})})]})]})]})},a6=({theme:r,userProfile:e,courses:t})=>{const{t:s}=At(),[A,l]=k.useState(null),[d,u]=k.useState(()=>{const g=localStorage.getItem("nsysu-interdisciplinary-status");return g?JSON.parse(g):{}});k.useEffect(()=>{const g=localStorage.getItem("nsysu-interdisciplinary-status"),x=JSON.stringify(d);g!==x&&localStorage.setItem("nsysu-interdisciplinary-status",x)},[d]);const f=g=>{u(x=>({...x,[g]:!x[g]}))};return a.jsxs("div",{className:"max-w-[85rem] mx-auto animate-in fade-in duration-500",children:[a.jsxs("h1",{className:"text-2xl font-bold text-foreground mb-6 flex items-center gap-3",children:[a.jsx("img",{src:r==="dark"?"./graduation-cap-white.png":"./graduation-cap-black.png",alt:"Icon",className:"w-8 h-8 object-contain"}),s.dashboard.interdisciplinaryView?.title]}),a.jsxs("div",{className:"bg-background border border-border rounded-xl flex flex-col md:flex-row min-h-[70vh] overflow-hidden shadow-sm",children:[a.jsx("div",{className:"md:hidden p-4 border-b border-border bg-surface/50",children:a.jsxs("select",{value:A||"",onChange:g=>l(g.target.value?Number(g.target.value):null),className:"w-full p-3 rounded-lg border border-border bg-background text-foreground shadow-sm outline-none focus:ring-2 focus:ring-primary appearance-none font-medium",children:[a.jsxs("option",{value:"",disabled:!0,children:["-- ",s.dashboard.interdisciplinaryView?.placeholder||""," --"]}),a.jsx("optgroup",{label:s.dashboard.interdisciplinaryView?.sidebar?.microCredits,children:a.jsx("option",{value:"10",children:s.dashboard.interdisciplinaryView?.sidebar?.addMicroCredit})}),a.jsxs("optgroup",{label:s.dashboard.interdisciplinaryView?.sidebar?.international,children:[a.jsxs("option",{value:"1",children:["1. ",s.dashboard.interdisciplinaryView?.requirements?.[1]]}),a.jsxs("option",{value:"2",children:["2. ",s.dashboard.interdisciplinaryView?.requirements?.[2]]}),a.jsxs("option",{value:"3",children:["3. ",s.dashboard.interdisciplinaryView?.requirements?.[3]]})]}),a.jsxs("optgroup",{label:s.dashboard.interdisciplinaryView?.sidebar?.crossDomain,children:[a.jsxs("option",{value:"4",children:["4. ",s.dashboard.interdisciplinaryView?.requirements?.[4]]}),a.jsxs("option",{value:"5",children:["5. ",s.dashboard.interdisciplinaryView?.requirements?.[5]]}),a.jsxs("option",{value:"6",children:["6. ",s.dashboard.interdisciplinaryView?.requirements?.[6]]}),a.jsxs("option",{value:"7",children:["7. ",s.dashboard.interdisciplinaryView?.requirements?.[7]]}),a.jsxs("option",{value:"8",children:["8. ",s.dashboard.interdisciplinaryView?.requirements?.[8]]}),a.jsxs("option",{value:"9",children:["9. ",s.dashboard.interdisciplinaryView?.requirements?.[9]]})]})]})}),a.jsxs("div",{className:"hidden md:block w-[30%] flex-shrink-0 border-r border-border bg-transparent p-6 overflow-y-auto",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("div",{className:"flex items-center gap-2 mb-3",children:a.jsx("h3",{className:"text-sm font-bold text-[#8D9CB2] dark:text-[#A8C8FA] uppercase tracking-wider",children:s.dashboard.interdisciplinaryView?.sidebar?.microCredits})}),a.jsx("ul",{className:"space-y-1",children:a.jsxs("li",{onClick:()=>l(10),className:"relative flex items-center gap-3 text-sm p-2.5 rounded-lg cursor-pointer transition-all font-medium group text-foreground overflow-hidden",children:[a.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 h-7 w-full flex items-center pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:a.jsx("div",{className:"w-1 h-full bg-[#FCA269]"})}),a.jsx("div",{className:`absolute inset-0 bg-primary/5 transition-opacity duration-200 ${A===10?"opacity-100":"opacity-0"}`}),a.jsx("span",{className:`w-1.5 h-1.5 rounded-full transition-colors relative z-10 ${d[10]?"bg-emerald-500":"bg-muted group-hover:bg-[#FCA269]"}`}),a.jsx("span",{className:`leading-none pt-0.5 relative z-10 ${d[10]?"text-emerald-500":""} ${A===10?"text-primary dark:text-white":""}`,children:s.dashboard.interdisciplinaryView?.sidebar?.addMicroCredit}),d[10]&&a.jsx(vt,{size:14,className:"ml-auto text-emerald-500 relative z-10"})]})})]}),a.jsxs("div",{children:[a.jsx("div",{className:"flex items-center gap-2 mb-3",children:a.jsx("h3",{className:"text-sm font-bold text-[#8D9CB2] dark:text-[#A8C8FA] uppercase tracking-wider",children:s.dashboard.interdisciplinaryView?.sidebar?.internationalOrCross})}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h4",{className:"text-xs font-semibold text-primary/80 mb-2 px-2.5",children:s.dashboard.interdisciplinaryView?.sidebar?.international}),a.jsx("ul",{className:"space-y-1",children:[1,2,3].map(g=>a.jsxs("li",{onClick:()=>l(g),className:"relative flex items-center gap-3 text-sm p-2.5 rounded-lg cursor-pointer transition-all group overflow-hidden",children:[a.jsxs("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 h-7 w-full flex items-center pointer-events-none",children:[a.jsx("div",{className:`w-1 h-full bg-[#FCA269] transition-opacity duration-200 ${A===g?"opacity-100":"opacity-0 group-hover:opacity-100"}`}),a.jsx("div",{className:`flex-1 h-full bg-gradient-to-r from-[#303030]/10 to-transparent dark:from-[#EFEFEF]/10 transition-opacity duration-200 ${A===g?"opacity-100":"opacity-0"}`})]}),a.jsxs("span",{className:`w-5 flex-shrink-0 text-xs font-mono relative z-10 ${A===g?"text-primary dark:text-white":"text-muted group-hover:text-foreground"} ${d[g]?"!text-emerald-500":""}`,children:[g,"."]}),a.jsx("div",{className:`flex-1 leading-relaxed relative z-10 ${d[g]?"text-emerald-500":"text-foreground"}`,children:s.dashboard.interdisciplinaryView?.requirements?.[g]}),d[g]&&a.jsx(vt,{size:16,className:"text-emerald-500 relative z-10"})]},g))})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-xs font-semibold text-primary/80 mb-2 px-2.5",children:s.dashboard.interdisciplinaryView?.sidebar?.crossDomain}),a.jsx("ul",{className:"space-y-1",children:[4,5,6,7,8,9].map(g=>a.jsxs("li",{onClick:()=>l(g),className:"relative flex items-center gap-3 text-sm p-2.5 rounded-lg cursor-pointer transition-all group overflow-hidden",children:[a.jsxs("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 h-7 w-full flex items-center pointer-events-none",children:[a.jsx("div",{className:`w-1 h-full bg-[#FCA269] transition-opacity duration-200 ${A===g?"opacity-100":"opacity-0 group-hover:opacity-100"}`}),a.jsx("div",{className:`flex-1 h-full bg-gradient-to-r from-[#303030]/10 to-transparent dark:from-[#EFEFEF]/10 transition-opacity duration-200 ${A===g?"opacity-100":"opacity-0"}`})]}),a.jsxs("span",{className:`w-5 flex-shrink-0 text-xs font-mono relative z-10 ${A===g?"text-primary dark:text-white":"text-muted group-hover:text-foreground"} ${d[g]?"!text-emerald-500":""}`,children:[g,"."]}),a.jsx("div",{className:`flex-1 leading-relaxed relative z-10 ${d[g]?"text-emerald-500":"text-foreground"}`,children:s.dashboard.interdisciplinaryView?.requirements?.[g]}),d[g]&&a.jsx(vt,{size:16,className:"text-emerald-500 relative z-10"})]},g))})]})]})]}),a.jsx("div",{className:"w-full md:w-[70%] bg-transparent p-6 md:p-12 flex flex-col justify-start md:justify-center relative",children:A&&[1,2,3].includes(A)?a.jsxs("div",{className:"w-full max-w-2xl mx-auto animate-in fade-in zoom-in-95 duration-300",children:[a.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-4 mb-6 md:mb-8",children:[a.jsx("div",{className:"p-2 md:p-3 bg-primary/10 rounded-xl text-primary",children:a.jsx(O0,{size:24,className:"md:w-8 md:h-8"})}),a.jsx("h2",{className:"text-xl md:text-2xl font-bold text-foreground",children:s.dashboard.interdisciplinaryView?.requirements?.[A]})]}),a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary mb-6 flex items-center gap-2",children:[a.jsx(q5,{size:20}),s.dashboard.interdisciplinaryView?.details?.requirementsHeader]}),(()=>{const x=(s.dashboard.interdisciplinaryView?.details?.[A]?.requirement||"").split(`

`);return a.jsx("div",{className:"space-y-6",children:x.map((y,v)=>{if(y.startsWith("Definition:")||y.startsWith("")){const N=y.includes("")?"":":",R=y.split(N)[0],S=y.substring(y.indexOf(N)+1);return a.jsxs("div",{className:"bg-primary/5 rounded-lg p-4 border border-primary/10",children:[a.jsxs("h4",{className:"font-bold text-primary mb-2 flex items-center gap-2 text-sm uppercase tracking-wide",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),R]}),a.jsx("p",{className:"text-foreground/90 leading-relaxed pl-3.5",children:S})]},v)}if(y.startsWith("Requirements")||y.startsWith("")){const N=y.split(`
`),R=N[0],S=N.slice(1);return a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-foreground mb-3 flex items-center gap-2 pl-1",children:R}),a.jsx("ul",{className:"space-y-3 pl-1",children:S.map((P,V)=>{const $=P.match(/^(\d+)\.\s*(.+)/);return $?a.jsxs("li",{className:"flex gap-3 text-foreground/80 leading-relaxed",children:[a.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-surface border border-border flex items-center justify-center text-xs font-mono text-muted-foreground mt-0.5",children:$[1]}),a.jsx("span",{children:$[2]})]},V):a.jsx("li",{className:"text-foreground/80 leading-relaxed pl-9",children:P},V)})})]},v)}return a.jsx("p",{className:"text-foreground/80 leading-relaxed whitespace-pre-wrap",children:y},v)})})})()]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary mb-4 flex items-center gap-2",children:[a.jsx(Y2,{size:20}),s.dashboard.interdisciplinaryView?.details?.confirmationHeader]}),a.jsxs("label",{className:"flex items-center gap-4 p-4 rounded-lg bg-background/50 border border-transparent hover:border-primary/30 cursor-pointer transition-all group",children:[a.jsx("div",{className:`w-6 h-6 rounded border flex items-center justify-center transition-colors ${d[A]?"bg-primary border-primary text-background":"border-muted group-hover:border-primary"}`,children:d[A]&&a.jsx(vt,{size:16,strokeWidth:3})}),a.jsx("input",{type:"checkbox",className:"hidden",checked:!!d[A],onChange:()=>f(A)}),a.jsx("span",{className:`text-lg transition-colors ${d[A]?"text-emerald-500 font-medium":"text-foreground/80"}`,children:s.dashboard.interdisciplinaryView?.details?.[A]?.confirmation})]})]}),a.jsx(n6,{storageKey:`nsysu-interdisciplinary-item-${A}-notes`,dbKeyPrefix:`interdisciplinary_item_${A}_`})]})]}):A===4?a.jsxs("div",{className:"w-full h-full overflow-y-auto pr-0 md:pr-2",children:[a.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-4 mb-4 md:mb-6",children:[a.jsx("div",{className:"p-2 md:p-3 bg-primary/10 rounded-xl text-primary",children:a.jsx(tr,{size:24,className:"md:w-[28px] md:h-[28px]"})}),a.jsx("h2",{className:"text-xl md:text-2xl font-bold text-foreground",children:s.dashboard.interdisciplinaryView?.requirements?.[4]})]}),a.jsx(FO,{onStatusChange:g=>{u(x=>x[4]===g?x:{...x,4:g})}})]}):A===5?a.jsxs("div",{className:"w-full h-full overflow-y-auto pr-0 md:pr-2",children:[a.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-4 mb-4 md:mb-6",children:[a.jsx("div",{className:"p-2 md:p-3 bg-primary/10 rounded-xl text-primary",children:a.jsx(tr,{size:24,className:"md:w-[28px] md:h-[28px]"})}),a.jsx("h2",{className:"text-xl md:text-2xl font-bold text-foreground",children:s.dashboard.interdisciplinaryView?.requirements?.[5]})]}),a.jsx(DO,{onStatusChange:g=>{u(x=>x[5]===g?x:{...x,5:g})}})]}):A===6?a.jsxs("div",{className:"w-full h-full overflow-y-auto pr-0 md:pr-2",children:[a.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-4 mb-4 md:mb-6",children:[a.jsx("div",{className:"p-2 md:p-3 bg-primary/10 rounded-xl text-primary",children:a.jsx(tr,{size:24,className:"md:w-[28px] md:h-[28px]"})}),a.jsx("h2",{className:"text-xl md:text-2xl font-bold text-foreground",children:s.dashboard.interdisciplinaryView?.requirements?.[6]})]}),a.jsx(MO,{onStatusChange:g=>{u(x=>x[6]===g?x:{...x,6:g})}})]}):A===7?a.jsxs("div",{className:"w-full h-full overflow-y-auto pr-0 md:pr-2",children:[a.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-4 mb-4 md:mb-6",children:[a.jsx("div",{className:"p-2 md:p-3 bg-primary/10 rounded-xl text-primary",children:a.jsx(tr,{size:24,className:"md:w-[28px] md:h-[28px]"})}),a.jsx("h2",{className:"text-xl md:text-2xl font-bold text-foreground",children:s.dashboard.interdisciplinaryView?.requirements?.[7]})]}),a.jsx(KO,{userProfile:e,courses:t,onStatusChange:g=>{u(x=>x[7]===g?x:{...x,7:g})}})]}):A===8?a.jsxs("div",{className:"w-full h-full overflow-y-auto pr-0 md:pr-2",children:[a.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-4 mb-4 md:mb-6",children:[a.jsx("div",{className:"p-2 md:p-3 bg-primary/10 rounded-xl text-primary",children:a.jsx(tr,{size:24,className:"md:w-[28px] md:h-[28px]"})}),a.jsx("h2",{className:"text-xl md:text-2xl font-bold text-foreground",children:s.dashboard.interdisciplinaryView?.requirements?.[8]})]}),a.jsx($O,{userProfile:e,courses:t,onStatusChange:g=>{u(x=>x[8]===g?x:{...x,8:g})}})]}):A===9?a.jsxs("div",{className:"w-full h-full overflow-y-auto pr-0 md:pr-2",children:[a.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-4 mb-4 md:mb-6",children:[a.jsx("div",{className:"p-2 md:p-3 bg-primary/10 rounded-xl text-primary",children:a.jsx(tr,{size:24,className:"md:w-[28px] md:h-[28px]"})}),a.jsx("h2",{className:"text-xl md:text-2xl font-bold text-foreground",children:s.dashboard.interdisciplinaryView?.requirements?.[9]})]}),a.jsx(ZO,{userProfile:e,courses:t,onStatusChange:g=>{u(x=>x[9]===g?x:{...x,9:g})}})]}):A===10?a.jsx("div",{className:"w-full h-full overflow-y-auto pr-0 md:pr-2",children:a.jsx(r6,{userProfile:e,onStatusChange:g=>{u(x=>x[10]===g?x:{...x,10:g})}})}):a.jsxs("div",{className:"w-full px-8 text-center flex flex-col items-center justify-center h-full",children:[a.jsx("div",{className:"mb-6 inline-block",children:a.jsx("img",{src:r==="dark"?"./graduation-cap-white.png":"./graduation-cap-black.png",alt:"Graduation Cap",className:"w-24 h-24 object-contain"})}),a.jsx("h2",{className:"text-xl font-bold text-foreground mb-2 whitespace-nowrap",children:s.dashboard.interdisciplinaryView?.title}),a.jsx("p",{className:"text-muted",children:s.dashboard.interdisciplinaryView?.placeholder})]})})]})]})},x1=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i6=["A+","A","A-","B+","B","B-","C+","C","C-","D","E","Fail","None"],A6=({onSave:r,onClose:e,onDelete:t,initialCourse:s,userMajor:A,theme:l="dark"})=>{const{t:d,language:u}=At(),[f,g]=k.useState(s?.name||""),[x,y]=k.useState(s?.room||""),[v,N]=k.useState(s?.credits||3),[R,S]=k.useState(s?.grade||""),[P,V]=k.useState(s?.teacher||""),[$,G]=k.useState(s?.originalTags||[]),[K,Y]=k.useState(s?.originalSemester||""),[q,E]=k.useState(s?.originalId||""),[j,B]=k.useState(s?.department||""),[I,_]=k.useState(()=>{if(s?.semester)return s.semester;const ve=localStorage.getItem("nsysu-last-semester");return ve&&Ec.includes(ve)?ve:Ec[0]}),[Q,U]=k.useState(s?.category||"Major Required"),[T,W]=k.useState(s?.genEduSubCategory),[M,F]=k.useState(s?.boyaDimension),[z,ne]=k.useState(s?.isEMI||!1),[te,O]=k.useState(s?.isEapEsp||!1),[J,Ae]=k.useState(s?.isWithdrawn||!1),[me,Ee]=k.useState(s?.isExemption||!1),[Be,Ue]=k.useState(s?.fromCatalog||!1),[Me,$e]=k.useState(!1),[Et,Vt]=k.useState(s?.category||"Major Required"),[ue,L]=k.useState(s?.genEduSubCategory),[Z,he]=k.useState(s?.day),[ge,Ge]=k.useState(s?.startTime),[ot,qe]=k.useState(s?.endTime),[Le,je]=k.useState(!1),[Xt]=k.useState(s?.userLabels||[]);k.useEffect(()=>{Q==="University Way"||Q==="General Education"&&T==="Primer"?(N(0),S("None"),ne(!1),O(!1),Ae(!1),Ee(!1)):Q==="Other"&&T==="Military Training"&&Ee(!1)},[Q,T]);const _r=ve=>{ve.preventDefault();let It=Xt;const Rr=!!q;!s&&!Rr&&(It.includes("manual")||(It=[...It,"manual"]));const wt={id:s?.id||crypto.randomUUID(),name:f,credits:v,grade:R==="None"?void 0:R,semester:I,category:Q,genEduSubCategory:Q==="General Education"||Q==="Other"?T:void 0,boyaDimension:Q==="General Education"&&T==="Boya"?M:void 0,isEMI:z,isEapEsp:te,isWithdrawn:J,isExemption:me,room:x,day:Z,startTime:ge,endTime:ot,userLabels:It,fromCatalog:s?.fromCatalog||Rr,teacher:P,originalTags:$,originalSemester:K,originalId:q,department:j};r(wt),e()},zt=ve=>{g(ve.name),y(ve.room||""),N(Number(ve.credit)||0),V(ve.teacher||""),G(ve.tags||[]),ve.semester&&Y(ve.semester),ve.semester&&Y(ve.semester),ve.id&&E(ve.id),B(ve.department||"");const It=qo(ve,A);if(U(It.category),W(It.genEduSubCategory),F(It.boyaDimension),ne(It.isEMI),O(It.isEapEsp),Ue(!0),Array.isArray(ve.classTime)){const Rr=ve.classTime;for(let wt=0;wt<7;wt++){const xr=Rr[wt];if(xr&&xr.length>0){const vs=(wt+1)%7;he(x1[vs]);const rs=xr[0],de=xr[xr.length-1];Qi[rs]&&Ge(Qi[rs].start),Qi[de]&&qe(Qi[de].end);break}}}if(ve.semester){const Rr=ve.semester.slice(0,3),wt=ve.semester.slice(3);let xr="";wt==="1"?xr=`Year ${Rr} Sem 1`:wt==="2"?xr=`Year ${Rr} Sem 2`:wt==="3"&&(xr=`Year ${Rr} Summer`),xr&&Ec.includes(xr)&&_(xr)}$e(!1)};return $t.createPortal(a.jsxs("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[10000] p-4",children:[Me&&a.jsx(KA,{onClose:()=>$e(!1),onSelect:zt}),a.jsx("div",{className:"bg-surface border border-border rounded-xl w-full max-w-md shadow-2xl overflow-y-auto max-h-[90vh] custom-scrollbar",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-foreground",children:s?d.form.editTitle:d.form.addTitle}),a.jsx("button",{onClick:e,className:"text-muted hover:text-foreground transition-colors",children:a.jsx(ut,{size:24})})]}),!s&&a.jsx("div",{className:"mb-4",children:a.jsxs("button",{id:"btn-import-catalog",type:"button",onClick:()=>$e(!0),className:"w-full py-2 px-4 rounded-lg border-2 border-dashed border-primary/50 text-primary hover:bg-primary/10 transition-colors flex items-center justify-center gap-2 font-medium",children:[a.jsx(tr,{size:18}),d.form.importCatalog||"Import from Catalog"]})}),a.jsxs("form",{onSubmit:_r,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-muted mb-1 flex justify-between",children:[a.jsxs("span",{children:[d.form.courseName," ",a.jsx("span",{className:"text-red-400",children:"*"})]}),Be&&a.jsxs("span",{className:"text-[10px] text-primary flex items-center gap-1",children:[a.jsx(Us,{size:10}),d.form.verified]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{required:!0,type:"text",value:f,disabled:Be,onChange:ve=>g(ve.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary disabled:opacity-50 disabled:bg-surface",placeholder:"e.g. Calculus I"}),Be&&a.jsx("button",{type:"button",onClick:()=>Ue(!1),className:"absolute right-2 top-1/2 -translate-y-1/2 text-muted hover:text-foreground transition-colors p-1",title:"Unlock to edit manually",children:a.jsx(Us,{size:14})})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-muted mb-1 flex justify-between",children:[d.courseSelection?.teacher||"Teacher",Be&&a.jsxs("span",{className:"text-[10px] text-primary flex items-center gap-1",children:[a.jsx(Us,{size:10}),d.form.verified]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",value:P,disabled:Be,onChange:ve=>V(ve.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary disabled:opacity-50 disabled:bg-surface",placeholder:"e.g. Professor Smith"}),Be&&a.jsx("button",{type:"button",onClick:()=>Ue(!1),className:"absolute right-2 top-1/2 -translate-y-1/2 text-muted hover:text-foreground transition-colors p-1",title:"Unlock to edit manually",children:a.jsx(Us,{size:14})})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-muted mb-1 flex justify-between",children:[d.form.credits,Be&&a.jsxs("span",{className:"text-[10px] text-primary flex items-center gap-1",children:[a.jsx(Us,{size:10}),d.form.verified]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"number",min:"0",step:"1",value:v,onChange:ve=>N(Number(ve.target.value)),disabled:Q==="University Way"||Q==="General Education"&&T==="Primer"||Be,className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary disabled:opacity-50 disabled:bg-surface"}),Be&&a.jsx("button",{type:"button",onClick:()=>Ue(!1),className:"absolute right-2 top-1/2 -translate-y-1/2 text-muted hover:text-foreground transition-colors p-1",title:"Unlock to edit credits manually",children:a.jsx(Us,{size:14})}),!Be&&s?.fromCatalog&&a.jsx("button",{type:"button",onClick:()=>Ue(!0),className:"absolute right-2 top-1/2 -translate-y-1/2 text-muted hover:text-primary transition-colors p-1",title:"Lock (Verified from Catalog)",children:a.jsx(_5,{size:14})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-1",children:d.form.grade}),a.jsxs("select",{value:R||"None",onChange:ve=>S(ve.target.value),disabled:me||J||Q==="General Education"&&T==="Primer",className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary appearance-none disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx("option",{value:"None",children:"-"}),i6.map(ve=>a.jsx("option",{value:ve,children:ve},ve))]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-1",children:d.form.semester}),a.jsx("select",{value:I,onChange:ve=>{const It=ve.target.value;_(It),localStorage.setItem("nsysu-last-semester",It)},className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary appearance-none",children:Ec.map(ve=>a.jsx("option",{value:ve,children:wk(ve,u)},ve))})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-muted mb-1 flex justify-between",children:[d.form.category,Be&&a.jsxs("span",{className:"text-[10px] text-primary flex items-center gap-1",children:[a.jsx(Us,{size:10}),d.form.verified]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("select",{value:Q,disabled:Be,onChange:ve=>U(ve.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary appearance-none disabled:opacity-50 disabled:bg-surface",children:xk.map(ve=>a.jsxs("option",{value:ve,children:[d.categories[ve]||ve,ve==="General Education"||ve==="Other"?" ":""]},ve))}),Be&&a.jsx("button",{type:"button",onClick:()=>Ue(!1),className:"absolute right-8 top-1/2 -translate-y-1/2 text-muted hover:text-foreground transition-colors p-1",title:"Unlock to edit manually",children:a.jsx(Us,{size:14})})]})]}),(Q==="General Education"||Q==="Other")&&a.jsxs("div",{className:"bg-background/50 p-3 rounded-lg border border-border/50 space-y-3 animate-in fade-in slide-in-from-top-1",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-1",children:d.form.subCategory}),a.jsxs("select",{value:T||"",onChange:ve=>W(ve.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary appearance-none",children:[a.jsx("option",{value:"",disabled:Q==="General Education",children:"-"}),Q==="General Education"?yk.filter(ve=>ve!=="Military Training").map(ve=>a.jsx("option",{value:ve,children:d.categories[ve]||ve},ve)):a.jsx("option",{value:"Military Training",children:d.categories["Military Training"]||"Military Training"})]})]}),T==="Boya"&&Q==="General Education"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-1",children:d.form.dimension}),a.jsx("select",{value:M||bx[0],onChange:ve=>F(ve.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary appearance-none",children:bx.map(ve=>a.jsx("option",{value:ve,children:ve},ve))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:d.form.attributes}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:`flex items-center space-x-3 cursor-pointer p-2 rounded hover:bg-surface transition-colors ${Q==="University Way"||Q==="General Education"&&T==="Primer"?"opacity-50 cursor-not-allowed":""}`,children:[a.jsx("input",{type:"checkbox",checked:z,onChange:ve=>ne(ve.target.checked),disabled:Be||Q==="University Way"||Q==="General Education"&&T==="Primer",className:"w-4 h-4 rounded border-border text-primary focus:ring-primary bg-background disabled:cursor-not-allowed disabled:opacity-50"}),a.jsx("span",{className:"text-sm text-foreground",children:d.form.isEMI}),Be&&a.jsx("button",{type:"button",onClick:ve=>{ve.preventDefault(),Ue(!1)},className:"ml-auto text-muted hover:text-foreground transition-colors p-1",title:"Unlock to edit manually",children:a.jsx(Us,{size:14})})]}),a.jsxs("label",{className:`flex items-center space-x-3 cursor-pointer p-2 rounded hover:bg-surface transition-colors ${Q==="University Way"||Q==="General Education"&&T==="Primer"?"opacity-50 cursor-not-allowed":""}`,children:[a.jsx("input",{type:"checkbox",checked:te,onChange:ve=>{const It=ve.target.checked;O(It),It?(Vt(Q),L(T),U("General Education"),W("Cross-College")):(U(Et),W(ue))},disabled:Q==="University Way"||Q==="General Education"&&T==="Primer",className:"w-4 h-4 rounded border-border text-primary focus:ring-primary bg-background disabled:cursor-not-allowed"}),a.jsx("span",{className:"text-sm text-foreground",children:d.form.isEapEsp})]}),a.jsxs("label",{className:`flex items-center space-x-3 cursor-pointer p-2 rounded hover:bg-surface transition-colors ${Q==="University Way"||Q==="General Education"&&T==="Primer"?"opacity-50 cursor-not-allowed":""}`,children:[a.jsx("input",{type:"checkbox",checked:J,onChange:ve=>{Ae(ve.target.checked),ve.target.checked&&(Ee(!1),S("None"))},disabled:Q==="University Way"||Q==="General Education"&&T==="Primer",className:"w-4 h-4 rounded border-border text-red-500 focus:ring-red-500 bg-background disabled:cursor-not-allowed"}),a.jsx("span",{className:"text-sm text-foreground",children:d.form.isWithdrawn})]}),a.jsxs("label",{className:`flex items-center space-x-3 cursor-pointer p-2 rounded hover:bg-surface transition-colors ${Q==="University Way"||Q==="General Education"&&T==="Primer"||Q==="Other"&&T==="Military Training"?"opacity-50 cursor-not-allowed":""}`,children:[a.jsx("input",{type:"checkbox",checked:me,onChange:ve=>{Ee(ve.target.checked),ve.target.checked&&(Ae(!1),S("None"))},disabled:Q==="University Way"||Q==="General Education"&&T==="Primer"||Q==="Other"&&T==="Military Training",className:"w-4 h-4 rounded border-border text-green-500 focus:ring-green-500 bg-background disabled:cursor-not-allowed"}),a.jsx("span",{className:"text-sm text-foreground",children:d.form.isExemption})]})]})]}),a.jsxs("div",{className:"bg-background/50 p-3 rounded-lg border border-border/50",children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:d.form.dayTime}),a.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[a.jsxs("select",{value:Z||"",onChange:ve=>he(ve.target.value?ve.target.value:void 0),className:"col-span-1 bg-background border border-border rounded-lg px-2 py-2 text-sm text-foreground focus:outline-none focus:ring-2 focus:ring-primary appearance-none",children:[a.jsx("option",{value:"",children:d.form.selectDay}),x1.map(ve=>a.jsx("option",{value:ve,children:ve},ve))]}),a.jsx("input",{type:"time",value:ge||"",onChange:ve=>Ge(ve.target.value||void 0),className:"col-span-1 bg-background border border-border rounded-lg px-2 py-2 text-sm text-foreground focus:outline-none focus:ring-2 focus:ring-primary appearance-none",style:{backgroundColor:l==="light"?"#ffffff":void 0,colorScheme:l}}),a.jsx("input",{type:"time",value:ot||"",onChange:ve=>qe(ve.target.value||void 0),className:"col-span-1 bg-background border border-border rounded-lg px-2 py-2 text-sm text-foreground focus:outline-none focus:ring-2 focus:ring-primary appearance-none",style:{backgroundColor:l==="light"?"#ffffff":void 0,colorScheme:l}})]})]}),a.jsxs("div",{className:"flex gap-3 pt-2",children:[s&&t&&a.jsx("button",{type:"button",onClick:()=>je(!0),className:"px-3 py-2 rounded-lg border border-red-500/50 text-red-400 hover:bg-red-500/10 transition-colors",title:"Delete Course",children:a.jsx(sd,{size:20})}),a.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 rounded-lg border border-border text-muted hover:bg-surface transition-colors font-medium",children:d.form.cancel}),a.jsxs("button",{type:"submit",className:"w-full bg-primary hover:bg-[var(--color-primary-hover)] text-white font-bold py-3 rounded-lg shadow-lg shadow-primary/20 transition-all flex justify-center items-center gap-2",children:[a.jsx(vt,{size:20}),d.form.save]})]})]})]})}),a.jsx(J0,{isOpen:Le,title:d.courseList?.remove?`${d.courseList.remove} ${d.form.courseName}`:"Delete Course",message:d.app.deleteConfirm||"Are you sure you want to delete this course?",confirmText:"Confirm",cancelText:d.form.cancel,isDestructive:!0,onConfirm:()=>{s&&t&&(t(s.id),e())},onCancel:()=>je(!1)})]}),document.body)},hS=[{version:"v7.1",date:"2026.02.28",changes:["  (BottomNav)  (FAB)"," "," ","  100% "," "]},{version:"v7.0",date:"2026.02.27",changes:[" "," Google  Firebase Auth  Firestore"," "," ","  Metadata "]},{version:"v6.3",date:"2026.02.24",changes:[" Smart Export: Planner avoids duplicating courses you've already exported."," Search Reliability: Fixed an issue preventing catalog scroll and highlight if a hidden label filter was active."," UI Polish: Added comfortable padding to the Semester Schedule grade table."]},{version:"v6.2",date:"2026.02.03",changes:[" Safe Export: Fixed data loss when exporting from Planner (Teacher/Time/Room now sync correctly)."," Smart Colors: 'Major Req' badges in Planner now correctly check the course's year instead of your current year."]},{version:"v6.1",date:"2026.01.25",changes:[" Social Connect: Added official Instagram link in Support."," Micro-credits+: Added Fall/Spring semesters & improved sorting (Chronological)."]},{version:"v6.0",date:"2026.01.21",changes:[" Rule Check Complete: Added all 9 Interdisciplinary Options (Minors, Double Major, Teacher Ed, etc.)."," Micro-credits Flow: Visualize your micro-credit accumulation with a new interactive status panel."," Data Persistence: Your progress in 'Rule Check' is now fully backed up and restored via JSON."," Complete Audit: Adjusted logic for Teacher Education, Cross-disciplinary, and Diverse Learning programs."]},{version:"v5.3",date:"2026.01.10",changes:[" Credit Locking: Official catalog courses now have locked credits to prevent accidental edits (unlockable)."," Military Training: Full support added with auto-categorization, localized badges, and exemption logic."," Support FAQs: Added a comprehensive FAQ section in the Support window to answer common questions."," UI Polish: Enhanced localized labels and interactions for a smoother experience."]},{version:"v5.2",date:"2026.01.09",changes:[" Smarter Logic: 'Primer on College Life' now auto-locks to Grade '-' and 0 credits."," Fix Location Refined: 'Primer', 'Exemption', and 'Service Learning' no longer prompt for location fixes."," Dark Mode Polish: Improved visibility for Schedule buttons and badges."," Quality of Life: Smoother interactions for Exemption/Withdraw statuses."]},{version:"v5.1",date:"2026.01.09",changes:[" Exemption Feature (): Track credit-bearing courses that don't affect GPA (e.g. transfer credits)."," Enhanced Logic: 'Exemption' and 'Withdraw' are now mutually exclusive."," Ui Refinements: Simplified labels & Grey badges for neutral status."," Support Update: Direct email integration with clearer subject lines."]},{version:"v5.0",date:"2026.01.08",changes:[" GPA Calculation: Now supporting Semester GPA & Total Average (Avg of Semesters)."," Refined Dashboard: 11-column grid layout for perfect alignment & responsiveness."," UI Polish: Optimized 'Course Plan' navigation & visual balances."," Deep Localization: Full Mandarin support for all new metrics."]},{version:"v5.0.2",date:"2026.01.09",changes:[" Catalog Upgrade: Now displays course times (e.g., Tue 10:10-12:00) in the Import from Catalog list."]},{version:"v4.5",date:"2026.01.08",changes:[" Smart Major Planning: One-click import now covers 'Major Electives' & filters out Graduate courses."," Enhanced Data Safety: Your 'Label Library' is now protected when clearing data."," 114-2 Ready: Optimized UI and performance for the upcoming course selection period."," Visual Polish: Refined alignments and interactions for a premium experience."]},{version:"v4.4",date:"2026.01.07",changes:[" Rebranding: We are now 'ClearGrad '! Refreshed identity."," Brand New UI: Total overhaul of Theme Colors for both Dark & Light modes."," Colorful Badges: Distinct, vibrant labels for Course Catalog & Schedule."," Plan Smart: Preloaded Catalog data for instant Planner switching."]},{version:"v4.3",date:"2026.01.06",changes:[" Labeling System: Organize your planner with custom colored labels (e.g. 'Backup', 'High Priority')."," Course Selection Schedule: Added detailed 114-2 timeline (accessible in Planner)."," Easter Egg: v4.3 is the highest GPA possible! Wishing everyone a perfect 4.3 semester! "]},{version:"v4.2",date:"2026.01.04",changes:[" Dashboard Redesign: New layout for Graduation Progress with clearer visuals & compaction."," Violet & Indigo Theme: Liberal Arts section now uses distinct purple shades for clarity."," Completed Localization: Fully translated all Dashboard labels (Unique Dim, Gen Edu)."," New App Icon: Updated header logo and favicon to new brand asset."]},{version:"v4.1",date:"2026.01.02",changes:[" Smart Data Warning: Auto-detects if the University Catalog data is incomplete (e.g. 114-2)."," Setup Reminder: Friendly prompt to help new users set up their profile."," Tutorial Upgrade: Interactive guide now covers the new Planner & Search features."," Fixes: Reverted EAP/ESP filter strictness & UI polish."]},{version:"v4.0",date:"2026.01.01",changes:[" Major Update: Course Planner & Classification Intelligence"," Enhanced Catalog Filters: Added ID-Based Rules (GEAE/GEAI...), EAP/ESP & EMI Filters"," UI Refinements: Enhanced Time Picker, Dark Mode & overall Visual Polish"," Copy Course ID: Click any Course ID to copy it instantly (with toast notification)"," Calendar Export: Export schedule to Google/Apple Calendar (.ics)"]},{version:"v3.2",date:"2025.12.30",changes:[" EMI Labels: English-taught courses are now clearly marked with a purple 'EMI' badge in the catalog.","Easily identify courses that meet your English graduation requirements."]},{version:"v3.1",date:"2025.12.30",changes:[" Categorized Majors: Settings now list departments by College (Arts, Science, Engineering, etc.).","Easier to find your major among 30+ options.","Verified department names against internal course data."]},{version:"v3.0",date:"2025.12.30",changes:[" Smart Graduation Audit: Set your Major in Settings!","Auto-Detect: Importing courses now checks YOUR major requirements automatically.","Know instantly if a course is 'Required' or 'Elective' for YOU.","Added Settings for 'Entrance Year' for future rule checks."]},{version:"v2.11",date:"2025.12.30",changes:["Offline Fallback: Course data (111-114) is now bundled!","If the school API goes down, the app will automatically use local data.","Includes 112 semesters as requested."]},{version:"v2.9",date:"2025.12.30",changes:["Custom Semesters: Use '+ Add Plan' to create semesters (e.g. Year 1 Summer)","Dynamic Semester Sorting: Summer and other semesters auto-arrange efficiently","114-2 Courses are now available in Catalog!"]},{version:"v2.3",date:"2025.12.30",changes:["New Announcement System: Welcome info on startup","Added Quick Language & Theme toggles in Announcement","Added 'Start Tutorial' button directly in welcome message","Smart Skip: 'Don't show again' remembers your preference until next update"]},{version:"v2.2",date:"2025.12.29",changes:["UI Improvements: More compact grid for better visibility","Tutorial Updates: Fixed highlighting issues"]},{version:"v2.1",date:"2025.12.29",changes:["Enhanced Course Search: Strictly scoped to selected semester for accuracy","Added Schedule Image Download functionality","Improved lazy loading for faster catalog performance"]},{version:"v2.0",date:"2025.12.29",changes:["Major Update: Course Catalog Integration",'Added "Import from Catalog" feature with NSYSU Open Data',"Smart Auto-fill: Schedule, Credits, and Course Name","Auto-detection for EMI, EAP/ESP, and Cross-College courses","Auto-categorization for Boya (Dimensions), Chinese, and Sports"]},{version:"v1.4",date:"2025.12.28",changes:['Introduced "Daylight Mode" (Light Theme)',"Refined Dashboard styling for better readability","Added Theme Toggle in Settings"]},{version:"v1.3",date:"2025.12.28",changes:["Improved Support Modal (Direct Gmail Link)","Optimized UI for better readability","Added edit functionality to course cards","Improved Interactive Tutorial (Better UI, Skip, Schedule Step)","Improved Course Plan navigation buttons (Always visible)"]},{version:"v1.2",date:"2025.12.28",changes:["Added 'Withdraw' () feature for course management","Added Update Journal & Support features","Improve translation functionality"]},{version:"v1.1",date:"2025.12.27",changes:["Refactored Semester Column layout","Add course schedule feature","Optimized UI for better readability"]},{version:"v1.0",date:"2025.12.26",changes:["Initial Release","Dual Language Support (English / Chinese)","Complete Graduation Credit Calculation"]}],xf=hS[0].version,o6=({onClose:r})=>{const{t:e}=At();return a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-surface border border-border rounded-xl w-full max-w-lg shadow-2xl overflow-hidden flex flex-col max-h-[85vh]",children:[a.jsxs("div",{className:"p-4 border-b border-border bg-background/50 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-foreground",children:e.updates.title}),a.jsx("p",{className:"text-sm text-muted",children:e.updates.desc})]}),a.jsx("button",{onClick:r,className:"text-muted hover:text-foreground transition-colors",children:a.jsx(ut,{size:24})})]}),a.jsx("div",{className:"overflow-y-auto p-6 space-y-6 custom-scrollbar",children:a.jsx("div",{className:"space-y-8",children:hS.map((t,s)=>{const A=t.version.startsWith("v5."),l=t.version.startsWith("v4.");let d="border-border hover:border-primary",u="border-primary",f="text-primary",g="text-muted marker:text-muted";return t.version.startsWith("v7.")?(d="border-amber-500/50 hover:border-amber-500",u="border-amber-500 shadow-[0_0_10px_rgba(245,158,11,0.5)]",f="bg-gradient-to-r from-amber-400 to-orange-500 bg-clip-text text-transparent",g="text-foreground font-medium marker:text-amber-500"):t.version.startsWith("v6.")?(d="border-emerald-500/50 hover:border-emerald-500",u="border-emerald-500 shadow-[0_0_10px_rgba(16,185,129,0.5)]",f="bg-gradient-to-r from-emerald-400 to-cyan-400 bg-clip-text text-transparent",g="text-foreground font-medium marker:text-emerald-500"):A?(d="border-sky-500/50 hover:border-sky-500",u="border-sky-500 shadow-[0_0_10px_rgba(14,165,233,0.5)]",f="bg-gradient-to-r from-sky-400 to-blue-600 bg-clip-text text-transparent",g="text-foreground font-medium marker:text-sky-500"):l&&(d="border-purple-500/50 hover:border-purple-500",u="border-purple-500 shadow-[0_0_10px_rgba(168,85,247,0.5)]",f="bg-gradient-to-r from-purple-400 to-pink-600 bg-clip-text text-transparent",g="text-foreground font-medium marker:text-purple-500"),a.jsxs("div",{className:`relative pl-6 border-l-2 transition-colors ${d}`,children:[a.jsx("div",{className:`
                                        absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-surface border-2 
                                        ${u}
                                    `}),a.jsxs("div",{className:"mb-2 flex items-baseline gap-3",children:[a.jsx("span",{className:`text-lg font-bold ${f}`,children:t.version}),a.jsxs("span",{className:"text-xs text-muted font-mono flex items-center gap-1",children:[a.jsx(HA,{size:12}),t.date]})]}),a.jsx("ul",{className:"space-y-1",children:t.changes.map((x,y)=>a.jsx("li",{className:`text-sm list-disc list-inside ${g}`,children:x},y))})]},s)})})}),a.jsx("div",{className:"p-4 border-t border-border bg-background/30",children:a.jsx("button",{onClick:r,className:"w-full bg-surface hover:bg-background text-foreground font-medium py-2 rounded-lg transition-colors border border-border",children:e.updates.close})})]})})},l6={apiKey:"AIzaSyAFS5YsnbWmPKh1lmBGLsLCGtmkrnC4doM",authDomain:"cleargrad-database.firebaseapp.com",projectId:"cleargrad-database",storageBucket:"cleargrad-database.firebasestorage.app",messagingSenderId:"352836249313",appId:"1:352836249313:web:9a21623277828595f379a0",measurementId:"G-2VQBXX1ZN9"},fS=Zx(l6),W0=mE(fS),Mo=F2(fS),c6=new Xn,d6=async()=>{try{return(await n4(W0,c6)).user}catch(r){throw console.error("Login failed:",r),r}},u6=async()=>{try{await MU(W0)}catch(r){throw console.error("Logout failed:",r),r}},mS=k.createContext(void 0),h6=({children:r})=>{const[e,t]=k.useState(null),[s,A]=k.useState(!0);k.useEffect(()=>{const u=RU(W0,f=>{t(f),A(!1)});return()=>u()},[]);const l=async()=>{try{await d6()}catch(u){console.error("Login Error:",u)}},d=async()=>{try{await u6()}catch(u){console.error("Logout Error:",u)}};return a.jsx(mS.Provider,{value:{user:e,loading:s,login:l,logout:d},children:r})},Bd=()=>{const r=k.useContext(mS);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r},f6=({onClose:r})=>{const{t:e}=At(),{login:t}=Bd(),[s,A]=k.useState("main");return k.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-surface border border-border rounded-xl w-full max-w-lg shadow-2xl p-6 relative overflow-hidden",children:[a.jsx("button",{onClick:r,className:"absolute top-4 right-4 text-muted hover:text-foreground transition-colors",children:a.jsx(ut,{size:24})}),s==="main"?a.jsxs("div",{className:"mt-2 text-center animate-in fade-in slide-in-from-left-4 duration-300",children:[a.jsx("div",{className:"w-16 h-16 bg-primary/20 text-primary rounded-full flex items-center justify-center mx-auto mb-4 border border-primary/20",children:a.jsx(nC,{size:32})}),a.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:e.support.title}),a.jsx("p",{className:"text-muted mb-8 leading-relaxed",children:e.support.message}),a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsxs("button",{onClick:l=>{l.preventDefault();const d=Date.now(),f=(window._supportMailClicks||[]).filter(g=>d-g<1e3);if(f.push(d),window._supportMailClicks=f,f.length>=3){window._supportMailClicks=[],r(),t();return}f.length===1&&setTimeout(()=>{(window._supportMailClicks||[]).filter(x=>Date.now()-x<1e3).length<3&&window.open("https://mail.google.com/mail/?view=cm&fs=1&to=coursetracker.supp0rt@gmail.com&su=ClearGrad.-Support&body=(Content)","_blank")},400)},className:"flex items-center justify-center gap-3 w-full bg-surface hover:bg-background border border-border text-foreground font-medium py-3 rounded-lg transition-all shadow-sm hover:shadow-md group",children:[a.jsx(nC,{className:"text-primary group-hover:scale-110 transition-transform"}),"coursetracker.supp0rt@gmail.com"]}),a.jsxs("a",{href:"https://www.instagram.com/cleargrad?igsh=ZXR5MmtyaGlrejgx&utm_source=qr",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-3 w-full bg-surface hover:bg-background border border-border text-foreground font-medium py-3 rounded-lg transition-all shadow-sm hover:shadow-md group",children:[a.jsx(w5,{className:"text-pink-600 group-hover:scale-110 transition-transform"}),"ClearGrad Instagram"]}),a.jsxs("button",{onClick:()=>A("faq"),className:"flex items-center justify-center gap-3 w-full bg-surface hover:bg-background border border-border text-foreground font-medium py-3 rounded-lg transition-all shadow-sm hover:shadow-md group",children:[a.jsx($2,{className:"text-primary group-hover:scale-110 transition-transform"}),e.support.faqTitle||"Frequently Asked Questions"]})]})]}):a.jsxs("div",{className:"mt-2 text-left animate-in fade-in slide-in-from-right-4 duration-300",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b border-border pb-2",children:[a.jsx("button",{onClick:()=>A("main"),className:"p-1 rounded-full hover:bg-surface text-muted hover:text-foreground transition-colors",children:a.jsx(G2,{size:20})}),a.jsx("h3",{className:"text-lg font-bold text-foreground",children:e.support.faqTitle||"FAQ"})]}),a.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto custom-scrollbar pr-2",children:e.support.faq&&e.support.faq.map((l,d)=>a.jsxs("details",{className:"group bg-surface/50 border border-border rounded-lg overflow-hidden",onToggle:u=>{const f=u.currentTarget;f.open&&setTimeout(()=>{f.scrollIntoView({behavior:"smooth",block:"nearest"})},100)},children:[a.jsxs("summary",{className:"flex items-center justify-between p-3 cursor-pointer hover:bg-surface transition-colors select-none font-medium text-sm text-foreground",children:[a.jsx("span",{children:l.question}),a.jsx("span",{className:"transition-transform group-open:rotate-180 text-muted",children:""})]}),a.jsx("div",{className:"p-3 pt-0 text-sm text-muted border-t border-border/50 bg-background/30 leading-relaxed",children:a.jsx("div",{className:"pt-2",children:l.answer})})]},d))})]}),a.jsxs("div",{className:"border-t border-border mt-6 pt-4 text-center",children:[a.jsx("p",{className:"text-xs text-muted/50 mb-1",children:e.support.disclaimer||" Unofficial App. Not affiliated with NSYSU."}),a.jsx("p",{className:"text-[10px] text-muted/30",children:e.support.copyright||"Data for reference only. Please verify with school system."})]})]})})},m6=({onClose:r,theme:e,setTheme:t,onStartTutorial:s})=>{const{t:A,language:l,setLanguage:d}=At(),[u,f]=k.useState(!1),{login:g,user:x}=Bd();return k.useEffect(()=>(document.body.style.overflow="hidden",document.body.classList.add("overflow-hidden"),()=>{document.body.style.overflow="",document.body.classList.remove("overflow-hidden")}),[]),a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[100] p-4 animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-surface border border-border rounded-xl w-full max-w-2xl shadow-2xl overflow-hidden flex flex-col relative animate-in zoom-in-95 duration-300",children:[a.jsxs("div",{className:"absolute top-3 left-3 flex items-center gap-2 z-10",children:[a.jsx("div",{className:"px-3 py-0.5 bg-surface border border-amber-500/50 rounded-full shadow-[0_0_10px_rgba(245,158,11,0.5)]",children:a.jsx("span",{className:"text-xs font-bold bg-gradient-to-r from-amber-400 to-orange-500 bg-clip-text text-transparent",children:xf})}),a.jsx("button",{onClick:()=>d(l==="en"?"zh":"en"),className:"p-1 rounded-full bg-surface hover:bg-background border border-border text-muted hover:text-primary transition-colors",title:A.settings.language,children:a.jsx(O0,{size:14})}),a.jsx("button",{onClick:()=>t(e==="dark"?"light":"dark"),className:"p-1 rounded-full bg-surface hover:bg-background border border-border text-muted hover:text-warning transition-colors",title:e==="dark"?A.settings.lightMode:A.settings.darkMode,children:e==="dark"?a.jsx(xx,{size:14}):a.jsx(gx,{size:14})})]}),a.jsx("button",{onClick:()=>r(!1),className:"absolute top-3 right-3 text-muted hover:text-foreground transition-colors p-1",children:a.jsx(ut,{size:20})}),a.jsxs("div",{className:"p-6 pb-2 text-center flex flex-col items-center mt-4",children:[a.jsx("div",{className:"bg-primary/10 p-3 rounded-full mb-3 ring-1 ring-primary/20",children:a.jsx(D5,{size:28,className:"text-primary animate-bounce-subtle"})}),a.jsx("h2",{className:"text-xl font-bold text-foreground",children:A.announcement.title})]}),a.jsx("div",{className:"px-6 py-2",children:a.jsxs("div",{className:"bg-background/50 border border-border/50 rounded-lg p-4 text-left",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3 pb-3 border-b border-border/50",children:[a.jsx("span",{className:"text-sm font-medium text-foreground",children:A.announcement.firstTime}),a.jsxs("button",{onClick:()=>{r(!1),s()},className:"flex items-center gap-1.5 px-3 py-1 bg-primary/10 hover:bg-primary/20 text-primary text-xs font-bold rounded-full border border-primary/20 transition-all hover:scale-105",children:[a.jsx(px,{size:12}),A.announcement.startTutorial]})]}),a.jsxs("div",{className:"flex items-center gap-2 mb-3 pb-3 border-b border-border/50",children:[a.jsx("span",{className:"text-sm font-medium text-foreground",children:A.announcement.haveQuestions}),x?a.jsxs("div",{className:"flex w-full items-center justify-between border border-primary/30 max-w-xs px-3 py-1.5 bg-primary/5 rounded-full",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[x.photoURL?a.jsx("img",{src:x.photoURL,alt:x.displayName||"User",className:"w-5 h-5 rounded-full object-cover border border-border"}):a.jsx("div",{className:"w-5 h-5 rounded-full bg-primary/20 flex items-center justify-center text-[10px] text-primary font-bold",children:(x.displayName||x.email||"?").charAt(0).toUpperCase()}),a.jsx("span",{className:"text-sm font-bold text-primary truncate max-w-[120px]",children:x.displayName||"User"})]}),a.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600 dark:text-green-400 font-bold bg-green-500/10 px-2 py-0.5 rounded-full",children:[a.jsxs("span",{className:"relative flex h-2 w-2",children:[a.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),a.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]}),A.syncState.bound]})]}):a.jsxs("button",{onClick:async()=>{x||await g()},className:"flex items-center gap-2 px-4 py-1.5 bg-white hover:bg-gray-100 text-gray-800 text-sm font-bold rounded-full border border-gray-300 transition-all hover:scale-105 shadow-sm dark:bg-gray-800 dark:border-gray-600 dark:text-white dark:hover:bg-gray-700",children:[a.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",children:[a.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),a.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),a.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),a.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Log in with Google"]})]}),a.jsx("div",{className:"text-foreground/90 text-sm leading-relaxed space-y-1",children:A.announcement.defaultMessage.split(`
`).map((y,v)=>a.jsx("p",{className:`min-h-[1.25rem] ${y.trim()===""?"h-2":""}`,children:y.split(/(\*\*.*?\*\*)/).map((N,R)=>N.startsWith("**")&&N.endsWith("**")?a.jsx("strong",{className:"text-primary font-bold",children:N.slice(2,-2)},R):N)},v))})]})}),a.jsxs("div",{className:"p-6 pt-2 flex flex-col items-center gap-4",children:[a.jsx("p",{className:"text-[#EC9385] text-xs text-center font-bold px-4",children:A.announcement.disclaimer}),a.jsxs("div",{className:"w-full space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx("input",{type:"checkbox",id:"skip-announcement",checked:u,onChange:y=>f(y.target.checked),className:"w-4 h-4 rounded border-gray-600 bg-surface text-primary focus:ring-primary/50"}),a.jsx("label",{htmlFor:"skip-announcement",className:"text-xs text-muted cursor-pointer select-none",children:A.announcement.dontShowAgain})]}),a.jsx("button",{onClick:()=>r(u),className:"w-full bg-[#303030] hover:bg-[#8D9CB2] text-white dark:bg-[#EFEFEF] dark:hover:bg-[#A8C8FA] dark:text-[#303030] font-bold py-3 rounded-lg transition-all shadow-lg hover:shadow-primary/25 active:scale-95",children:A.announcement.close})]})]})]})})},g6=({semesterName:r,availableSemesters:e,onFix:t,onSkip:s,isLoading:A,missingCourses:l=[]})=>{const{t:d}=At(),[u,f]=k.useState("");return $t.createPortal(a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[10000] p-4 animate-in fade-in duration-300",children:a.jsx("div",{className:"bg-surface border border-yellow-500/50 rounded-xl w-full max-w-md shadow-2xl p-6 relative transition-all",children:A?a.jsxs("div",{className:"flex flex-col items-center justify-center py-8 space-y-4",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-500"}),a.jsxs("p",{className:"text-lg font-bold text-foreground animate-pulse",children:[d.dataFix?.button?`${d.dataFix.autoFix}`:"Fixing...","..."]}),a.jsx("p",{className:"text-sm text-muted",children:d.dataFix?.instruction?d.dataFix.instruction.split("(")[0]:"Matching courses..."})]}):a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:s,className:"absolute right-4 top-4 text-muted hover:text-foreground transition-colors",children:a.jsx(ut,{size:20})}),a.jsxs("div",{className:"flex items-center gap-3 mb-4 text-yellow-500",children:[a.jsx("div",{className:"bg-yellow-500/10 p-2 rounded-full",children:a.jsx(bs,{size:24})}),a.jsx("h2",{className:"text-lg font-bold",children:d.dataFix?.title||"Missing Data Detected"})]}),a.jsxs("p",{className:"text-muted mb-2 leading-relaxed",children:[d.dataFix?.desc||"Some courses in"," ",a.jsx("strong",{className:"text-foreground",children:r})," ",d.dataFix?.descSuffix||"are missing details (Teacher, Department, etc)."]}),l.length>0&&a.jsxs("div",{className:"bg-surface/50 rounded-lg p-3 mb-4 border border-border/50 max-h-32 overflow-y-auto custom-scrollbar",children:[a.jsx("p",{className:"text-xs font-bold text-muted uppercase mb-2",children:"Affected Courses:"}),a.jsx("ul",{className:"list-disc list-inside text-sm text-foreground space-y-1",children:l.map((g,x)=>a.jsx("li",{className:"truncate",children:g},x))})]}),a.jsx("p",{className:"text-sm text-muted mb-6",children:d.dataFix?.instruction||"Please select the original catalog semester (e.g., 114-1) to auto-fill this data."}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-1.5",children:d.dataFix?.sourceLabel||"Original Semester Source"}),a.jsxs("select",{value:u,onChange:g=>f(g.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2.5 text-foreground focus:outline-none focus:ring-2 focus:ring-yellow-500 appearance-none",children:[a.jsx("option",{value:"",children:d.dataFix?.selectPlaceholder||"Select a semester..."}),e.map(g=>{let x=g;return g.endsWith("3")?x=`${g.slice(0,g.length-1)}-${d.catalog?.summer||"Summer"}`:g.length===4&&(x=`${g.substring(0,3)}-${g.substring(3)}`),a.jsx("option",{value:g,children:x},g)})]})]}),a.jsxs("div",{className:"flex gap-3 pt-2",children:[a.jsx("button",{onClick:s,className:"flex-1 px-4 py-2 rounded-lg border border-border text-muted hover:bg-surface transition-colors font-medium",children:d.dataFix?.skip||"Skip"}),a.jsxs("button",{onClick:()=>{u&&t(u)},disabled:!u,className:`flex-1 px-4 py-2 rounded-lg font-bold shadow-lg transition-all flex justify-center items-center gap-2 ${u?"bg-yellow-500 hover:bg-yellow-400 text-black shadow-yellow-500/20":"bg-surface border border-border text-muted cursor-not-allowed"}`,children:[a.jsx(N5,{size:18}),d.dataFix?.autoFix||"Auto Fix"]})]})]})]})})}),document.body)},p6=({candidates:r,userCourse:e,onSelect:t,onCancel:s})=>{const{t:A}=At(),[l,d]=k.useState(null);return k.useEffect(()=>{d(null)},[e.id]),$t.createPortal(a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[10001] p-4 animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-surface border border-border rounded-xl w-full max-w-lg shadow-2xl flex flex-col max-h-[85vh]",children:[a.jsxs("div",{className:"p-4 border-b border-border bg-background/50 flex justify-between items-center",children:[a.jsx("h2",{className:"text-lg font-bold text-foreground",children:A.courseSelection?.title||"Multiple Matches Found"}),a.jsx("button",{onClick:s,className:"text-muted hover:text-foreground transition-colors",children:a.jsx(ut,{size:20})})]}),a.jsxs("div",{className:"p-4 overflow-y-auto custom-scrollbar",children:[a.jsxs("p",{className:"text-muted mb-4",children:[A.courseSelection?.desc||"We found multiple courses that look like"," ",a.jsx("strong",{className:"text-foreground",children:e.name}),". ",A.courseSelection?.select||"Please select the correct one:"]}),a.jsx("div",{className:"space-y-2",children:r.map(u=>{const f=l===u.id;return a.jsxs("div",{onClick:()=>d(u.id),className:`p-3 rounded-lg border cursor-pointer transition-all flex items-start gap-3 ${f?"bg-primary/20 border-primary shadow-lg shadow-primary/10":"bg-surface border-border hover:bg-surface/80 hover:border-primary/50"}`,children:[a.jsx("div",{className:`mt-1 w-4 h-4 rounded-full border flex items-center justify-center shrink-0 ${f?"border-primary bg-primary":"border-muted"}`,children:f&&a.jsx(vt,{size:10,className:"text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsx("h3",{className:`font-bold ${f?"text-primary":"text-foreground"}`,children:u.name}),a.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded border border-border bg-background/50 text-muted",children:u.id})]}),a.jsxs("div",{className:"text-sm text-muted mt-1 grid grid-cols-2 gap-x-4 gap-y-1",children:[a.jsxs("span",{children:[a.jsxs("span",{className:"opacity-70 mr-1",children:[A.courseSelection?.teacher||"Teacher",":"]}),u.teacher]}),a.jsxs("span",{children:[a.jsxs("span",{className:"opacity-70 mr-1",children:[A.courseSelection?.room||"Room",":"]}),u.room||"-"]})]})]})]},u.id)})})]}),a.jsxs("div",{className:"p-4 border-t border-border bg-background/50 flex gap-3 justify-end",children:[a.jsx("button",{onClick:s,className:"px-4 py-2 rounded-lg text-muted hover:text-foreground hover:bg-surface transition-colors font-medium text-sm",children:A.courseSelection?.cancel||"Skip this Course"}),a.jsx("button",{onClick:()=>{const u=r.find(f=>f.id===l);u&&t(u)},disabled:!l,className:`px-4 py-2 rounded-lg font-bold text-sm shadow-lg transition-all ${l?"bg-primary hover:bg-sky-400 text-white shadow-primary/20":"bg-surface border border-border text-muted cursor-not-allowed"}`,children:A.app.settings==="Settings"?"Confirm Selection":A.courseSelection?.confirm||"Confirm"})]})]})}),document.body)},x6=({patchedCount:r,unmatchedNames:e,onClose:t})=>{const{t:s}=At();return $t.createPortal(a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[10002] p-4 animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-surface border border-border rounded-xl w-full max-w-md shadow-2xl p-6 relative flex flex-col max-h-[85vh]",children:[a.jsx("button",{onClick:t,className:"absolute right-4 top-4 text-muted hover:text-foreground transition-colors",children:a.jsx(ut,{size:20})}),a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.length>0?a.jsx("div",{className:"bg-red-500/10 p-2 rounded-full text-red-500",children:a.jsx(qD,{size:24})}):a.jsx("div",{className:"bg-green-500/10 p-2 rounded-full text-green-500",children:a.jsx(sC,{size:24})}),a.jsx("h2",{className:"text-lg font-bold text-foreground",children:e.length>0?s.fixReport?.titleAttention||"Fix Report: Attention Needed":s.fixReport?.titleComplete||"Auto-Fix Complete"})]}),a.jsxs("div",{className:"space-y-6 overflow-y-auto custom-scrollbar pr-2",children:[r>0&&a.jsxs("div",{className:"bg-green-500/5 border border-green-500/20 rounded-lg p-4 flex items-center gap-3",children:[a.jsx(sC,{size:20,className:"text-green-500 shrink-0"}),a.jsxs("p",{className:"text-foreground",children:[s.fixReport?.successUpdate||"Successfully updated"," ",a.jsx("strong",{className:"text-green-500",children:r})," ",s.fixReport?.courses||"courses","."]})]}),e.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsx("p",{className:"text-foreground font-medium",children:s.fixReport?.unmatched||"Could not find matches for the following courses:"}),a.jsx("div",{className:"bg-surface/50 border border-border rounded-lg p-1",children:e.map((A,l)=>a.jsxs("div",{className:"px-3 py-2 border-b last:border-0 border-border/50 text-sm text-muted flex items-start gap-2",children:[a.jsx("span",{className:"text-red-500 mt-0.5",children:""}),A]},l))}),a.jsx("p",{className:"text-xs text-muted",children:s.courseSelection?.manualHint||"Please check these courses manually in the planner."})]}),r===0&&e.length===0&&a.jsx("p",{className:"text-muted text-center py-4",children:s.fixReport?.noChanges||"No changes made. Try selecting a different source semester, or the course names might not match the catalog."})]}),a.jsx("div",{className:"mt-6 pt-4 border-t border-border flex justify-end",children:a.jsx("button",{onClick:t,className:"px-6 py-2 rounded-lg bg-primary hover:bg-sky-400 text-white font-bold shadow-lg shadow-primary/20 transition-all",children:s.fixReport?.done||"Done"})})]})}),document.body)},y6=({onConfirm:r,onBackupAndConfirm:e,onCancel:t,existingCount:s})=>{const{t:A}=At(),l=k.useRef(null);return k.useEffect(()=>{const d=u=>{l.current&&!l.current.contains(u.target)&&t()};return document.addEventListener("mousedown",d),()=>{document.removeEventListener("mousedown",d)}},[t]),a.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-[100] p-4 animate-in fade-in duration-200",children:a.jsxs("div",{ref:l,className:"bg-surface border border-border rounded-xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"bg-yellow-500/10 border-b border-yellow-500/20 p-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2 text-yellow-500 font-bold text-lg",children:[a.jsx(bs,{size:24}),A.importModal.title]}),a.jsx("button",{onClick:t,className:"text-muted hover:text-foreground transition-colors",children:a.jsx(ut,{size:20})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("p",{className:"text-foreground",children:[A.importModal.trackCountPrefix," ",a.jsx("span",{className:"font-bold text-primary",children:s})," ",A.importModal.trackCountSuffix]}),a.jsx("p",{className:"text-muted text-sm",children:A.importModal.warning}),a.jsx("p",{className:"text-muted text-sm",children:A.importModal.backupRec})]}),a.jsxs("div",{className:"bg-background/50 p-4 border-t border-border flex flex-col gap-3",children:[a.jsxs("button",{onClick:e,className:"w-full bg-primary hover:bg-sky-400 text-white px-4 py-3 rounded-lg font-bold shadow-lg shadow-primary/20 transition-all flex items-center justify-center gap-2",children:[a.jsx(Mf,{size:18}),A.importModal.backupBtn]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx("button",{onClick:t,className:"bg-surface hover:bg-surface/80 border border-border text-foreground px-4 py-2 rounded-lg font-medium transition-colors",children:A.importModal.cancel}),a.jsxs("button",{onClick:r,className:"bg-surface hover:bg-red-500/10 border border-border hover:border-red-500/30 text-muted hover:text-red-500 px-4 py-2 rounded-lg font-medium transition-colors flex items-center justify-center gap-2 group",children:[a.jsx("span",{className:"group-hover:hidden",children:A.importModal.overwrite}),a.jsxs("span",{className:"hidden group-hover:inline flex items-center gap-1",children:[a.jsx(Cc,{size:14}),A.importModal.overwrite]})]})]})]})]})})},b6=({onConfirm:r,onBackupAndConfirm:e,onCancel:t,existingCount:s,filesCount:A})=>{const{t:l}=At(),d=k.useRef(null);return k.useEffect(()=>{const u=f=>{d.current&&!d.current.contains(f.target)&&t()};return document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}},[t]),a.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-[100] p-4 animate-in fade-in duration-200",children:a.jsxs("div",{ref:d,className:"bg-surface border border-border rounded-xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"bg-red-500/10 border-b border-red-500/20 p-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2 text-red-500 font-bold text-lg",children:[a.jsx(bs,{size:24}),l.clearModal.title]}),a.jsx("button",{onClick:t,className:"text-muted hover:text-foreground transition-colors",children:a.jsx(ut,{size:20})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("p",{className:"text-foreground",children:[l.importModal.trackCountPrefix," ",a.jsx("span",{className:"font-bold text-primary",children:s})," ",l.importModal.trackCountSuffix]}),A>0&&a.jsxs("p",{className:"text-foreground",children:["Uploads: ",a.jsx("span",{className:"font-bold text-primary",children:A})," file(s)."]}),a.jsx("p",{className:"text-foreground text-sm",children:"Also clearing: User settings, Custom Labels, Interdisciplinary Status, and Uploaded Files."}),a.jsx("p",{className:"text-muted text-sm",children:l.clearModal.warning}),a.jsx("p",{className:"text-muted text-sm",children:l.clearModal.backupRec})]}),a.jsxs("div",{className:"bg-background/50 p-4 border-t border-border flex flex-col gap-3",children:[a.jsxs("button",{onClick:e,className:"w-full bg-surface hover:bg-surface/80 border border-border text-foreground px-4 py-3 rounded-lg font-medium shadow-sm transition-all flex items-center justify-center gap-2",children:[a.jsx(Mf,{size:18}),l.clearModal.backupBtn]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx("button",{onClick:t,className:"bg-surface hover:bg-surface/80 border border-border text-foreground px-4 py-2 rounded-lg font-medium transition-colors",children:l.clearModal.cancel}),a.jsxs("button",{onClick:r,className:"bg-red-600 hover:bg-red-700 text-white border border-red-700 hover:border-red-800 px-4 py-2 rounded-lg font-bold transition-colors flex items-center justify-center gap-2",children:[a.jsx(sd,{size:16}),l.clearModal.clear]})]})]})]})})},v6=({onClose:r,onGoToSettings:e})=>{const{language:t}=At();return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-surface border border-border rounded-xl shadow-2xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-4 border-b border-border flex justify-between items-center bg-primary/5",children:[a.jsxs("div",{className:"flex items-center gap-2 text-primary font-bold text-lg",children:[a.jsx(ok,{size:24}),a.jsx("h2",{children:t==="zh"?"":"Complete Your Profile"})]}),a.jsx("button",{onClick:r,className:"p-1 hover:bg-black/5 dark:hover:bg-white/10 rounded-full transition-colors",children:a.jsx(ut,{size:20})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("p",{className:"text-foreground/90 leading-relaxed",children:t==="zh"?"":"Hey! We noticed you haven't set up your student profile yet (Major, Year, or Credits). For accurate tracking, we recommend setting this up now!"}),a.jsx("p",{className:"text-sm text-muted",children:t==="zh"?"()":"(This notification will only show once)"})]}),a.jsxs("div",{className:"p-4 border-t border-border bg-surface/50 flex gap-3 justify-end",children:[a.jsx("button",{onClick:r,className:"px-4 py-2 rounded-lg text-sm font-medium text-muted hover:text-foreground hover:bg-primary/10 transition-colors",children:t==="zh"?"":"Set up later"}),a.jsx("button",{onClick:e,className:"px-4 py-2 rounded-lg text-sm font-bold bg-primary text-white hover:bg-primary/90 shadow-md transition-all",children:t==="zh"?"":"Go to Settings"})]})]})})},w6=({onClose:r})=>{const{t:e}=At(),t=({title:s,date:A})=>a.jsxs("div",{className:"mb-4",children:[a.jsxs("h3",{className:"text-primary font-bold text-lg mb-1 flex items-center gap-2",children:["- ",s," -"]}),a.jsx("p",{className:"text-foreground pl-4 font-medium whitespace-pre-line",children:A})]});return $t.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-surface w-full max-w-lg rounded-2xl shadow-2xl flex flex-col overflow-hidden border border-border animate-in zoom-in-95 duration-200 component-padding",children:[a.jsxs("div",{className:"p-4 border-b border-border bg-background/50 flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"p-2 bg-primary/10 rounded-full text-primary",children:a.jsx(HA,{size:20})}),a.jsx("h2",{className:"font-bold text-lg text-foreground",children:e.courseSchedule?.title||"114-2 Course Selection Schedule"})]}),a.jsx("button",{onClick:r,className:"p-2 hover:bg-muted/20 rounded-full transition-colors text-muted hover:text-foreground",children:a.jsx(ut,{size:20})})]}),a.jsxs("div",{className:"p-6 overflow-y-auto max-h-[70vh]",children:[a.jsx(t,{title:e.courseSchedule?.inquiry||"Course Inquiry",date:e.courseSchedule?.inquiryDate||"Starting from: Jan 6 (Tue) 13:00"}),a.jsx(t,{title:e.courseSchedule?.prelim1||"Preliminary Round 1",date:e.courseSchedule?.prelim1Date||"Jan 30 (Fri) 9:00  Feb 2 (Mon) 17:00"}),a.jsx(t,{title:e.courseSchedule?.prelim2||"Preliminary Round 2",date:e.courseSchedule?.prelim2Date||"Feb 4 (Wed) 9:00  Feb 5 (Thu) 17:00"}),a.jsx(t,{title:e.courseSchedule?.addDrop1||"Add/Drop Round 1",date:e.courseSchedule?.addDrop1Date||"Feb 9 (Mon) 9:00  Feb 10 (Tue) 17:00"}),a.jsx(t,{title:e.courseSchedule?.addDrop2||"Add/Drop Round 2",date:e.courseSchedule?.addDrop2Date||"Feb 24 (Tue) 9:00  Feb 25 (Wed) 17:00"}),a.jsxs("div",{className:"mt-8 space-y-2 text-sm",children:[a.jsx("p",{className:"text-muted font-mono",children:e.courseSchedule?.updateTime||"Update Time: 2026.01.06"}),a.jsxs("p",{className:"text-muted",children:[e.courseSchedule?.reference||"Reference",":"," ",a.jsx("a",{href:"https://oaa.nsysu.edu.tw/static/file/3/1003/attach/82/pta_236821_3882484_96074.pdf",target:"_blank",rel:"noreferrer",className:"text-primary hover:underline underline-offset-4 break-all",children:"https://oaa.nsysu.edu.tw/static/file/3/1003/attach/82/pta_236821_3882484_96074.pdf"})]})]})]}),a.jsx("div",{className:"p-3 bg-red-500/10 border-t border-red-500/20 text-center",children:a.jsx("p",{className:"text-xs font-bold text-red-500",children:e.courseSchedule?.warning||"Data is for reference only."})})]})}),document.body)},B6="Brian",C6="CGmanage",E6=({onClose:r,onLogin:e})=>{const[t,s]=k.useState(""),[A,l]=k.useState(""),[d,u]=k.useState(!1),f=k.useRef(null);k.useEffect(()=>{f.current?.focus()},[]);const g=x=>{x.preventDefault();const y=t.toLowerCase();(y===B6.toLowerCase()||y==="abel")&&A===C6?(e(t),r()):(u(!0),l(""))};return $t.createPortal(a.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-md flex items-center justify-center z-[50000] p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl w-full max-w-sm shadow-2xl p-6 relative",children:[a.jsx("button",{onClick:r,className:"absolute right-4 top-4 text-zinc-500 hover:text-white transition-colors",children:a.jsx(ut,{size:20})}),a.jsxs("div",{className:"flex flex-col items-center mb-6",children:[a.jsx("div",{className:"w-12 h-12 bg-red-500/10 text-red-500 rounded-full flex items-center justify-center mb-4 border border-red-500/20",children:a.jsx(Us,{size:24})}),a.jsx("h2",{className:"text-xl font-bold text-white",children:"Restricted Access"}),a.jsx("p",{className:"text-sm text-zinc-500",children:"Course Data Inspector"})]}),a.jsxs("form",{onSubmit:g,className:"space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Z2,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-500",size:16}),a.jsx("input",{ref:f,type:"text",value:t,onChange:x=>{s(x.target.value),u(!1)},className:`w-full bg-black/50 border ${d?"border-red-500":"border-zinc-700"} text-white rounded-lg pl-10 pr-4 py-2.5 outline-none focus:ring-2 focus:ring-red-500/50 transition-all placeholder:text-zinc-600`,placeholder:"Admin Name"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(C5,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-500",size:16}),a.jsx("input",{type:"password",value:A,onChange:x=>{l(x.target.value),u(!1)},className:`w-full bg-black/50 border ${d?"border-red-500":"border-zinc-700"} text-white rounded-lg pl-10 pr-4 py-2.5 outline-none focus:ring-2 focus:ring-red-500/50 transition-all placeholder:text-zinc-600`,placeholder:"Passcode"})]}),d&&a.jsx("p",{className:"text-xs text-red-500 text-center font-medium animate-in fade-in slide-in-from-top-1",children:"Invalid Admin ID or Passcode"}),a.jsx("button",{type:"submit",className:"w-full bg-white hover:bg-zinc-200 text-black font-bold py-2.5 rounded-lg transition-colors",children:"Authenticate"})]})]})}),document.body)},N6=[{id:"schedule",title:"Course Selection Schedule",period:180,desc:"Update dates for Prelim, Add/Drop rounds in i18n.ts"},{id:"programs",title:"Cross-Disciplinary Programs",period:365,desc:"Scrape new programs from ctdr.nsysu.edu.tw"},{id:"gen_edu",title:"General Education Courses",period:180,desc:"Verify new sem Gen Edu categories (Primer, etc.)"},{id:"dept_codes",title:"Department Standard Codes",period:365,desc:"Check if new departments (e.g., Semiconductor) are added"},{id:"api_check",title:"API Endpoint Health",period:90,desc:"Verify NSYSU Open Data API endpoints are still valid"}],S6=({courses:r,onClose:e,adminId:t})=>{const[s,A]=k.useState(""),[l,d]=k.useState(null),[u,f]=k.useState(!1),[g,x]=k.useState("data"),{usingBackup:y,lastChecked:v,semesters:N}=dS(),R=k.useMemo(()=>{try{const B=localStorage.getItem(Oc);return B?JSON.parse(B):Zo}catch{return Zo}},[g]),S=k.useMemo(()=>V0(R,113),[R]),P=k.useMemo(()=>{try{const B=localStorage.getItem("nsysu-interdisciplinary-status");return B?JSON.parse(B):{}}catch{return{}}},[g]),[V,$]=k.useState(()=>JSON.parse(localStorage.getItem("nsysu-admin-maintenance-log")||"{}")),G=B=>{const I=Date.now(),_={...V,[B]:I};$(_),localStorage.setItem("nsysu-admin-maintenance-log",JSON.stringify(_))},K=(B,I)=>{const _=V[B];if(!_)return"overdue";const Q=(Date.now()-_)/(1e3*60*60*24);return Q>I?"overdue":Q>I*.8?"due-soon":"ok"},Y=()=>{const B=localStorage.getItem("nsysu-force-offline")==="true";localStorage.setItem("nsysu-force-offline",(!B).toString()),window.location.reload()},q=k.useMemo(()=>{if(!s)return r;const B=s.toLowerCase();return r.filter(I=>I.name.toLowerCase().includes(B)||I.id.includes(B)||I.teacher?.toLowerCase().includes(B)||I.department?.toLowerCase().includes(B))},[r,s]),E=()=>{l&&(navigator.clipboard.writeText(JSON.stringify(l,null,2)),f(!0),setTimeout(()=>f(!1),2e3))},j=(t||"").toLowerCase()==="brian";return $t.createPortal(a.jsxs("div",{className:"fixed inset-0 bg-black/95 flex z-[50000] animate-in fade-in duration-300 font-mono text-sm",children:[a.jsxs("div",{className:"w-[400px] border-r border-zinc-800 flex flex-col bg-zinc-900/50",children:[a.jsxs("div",{className:`p-4 border-b ${j?"border-purple-900/30 bg-purple-950/10":"border-zinc-800 bg-zinc-900"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:`flex items-center gap-2 ${j?"text-purple-400":"text-emerald-400"}`,children:[j?a.jsx(e5,{size:20}):a.jsx(Cc,{size:20}),a.jsxs("div",{children:[a.jsx("h2",{className:`font-bold text-lg ${j?"text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-amber-300":"text-white"}`,children:j?"Developer Console":"Admin Console"}),j&&a.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-amber-400/80 font-medium",children:[a.jsx(n5,{size:10})," System Architect"]})]})]}),a.jsx("div",{className:"text-xs text-zinc-500 bg-zinc-800 px-2 py-1 rounded",children:xf})]}),a.jsxs("div",{className:"flex bg-zinc-800/50 p-1 rounded-lg mb-4",children:[a.jsx("button",{onClick:()=>x("data"),className:`flex-1 py-1.5 text-xs font-bold rounded-md transition-all ${g==="data"?"bg-zinc-700 text-white shadow":"text-zinc-500 hover:text-zinc-300"}`,children:"Data"}),a.jsxs("button",{onClick:()=>x("style"),className:`flex-1 py-1.5 text-xs font-bold rounded-md transition-all flex items-center justify-center gap-1 ${g==="style"?"bg-zinc-700 text-white shadow":"text-zinc-500 hover:text-zinc-300"}`,children:[a.jsx(aC,{size:12}),"Design"]}),a.jsx("button",{onClick:()=>x("rules"),className:`flex-1 py-1.5 text-xs font-bold rounded-md transition-all ${g==="rules"?"bg-zinc-700 text-white shadow":"text-zinc-500 hover:text-zinc-300"}`,children:"Logic"}),a.jsxs("button",{onClick:()=>x("maintenance"),className:`flex-1 py-1.5 text-xs font-bold rounded-md transition-all flex items-center justify-center gap-1 ${g==="maintenance"?"bg-zinc-700 text-white shadow":"text-zinc-500 hover:text-zinc-300"}`,children:[a.jsx(tC,{size:12}),"Task"]}),(t||"").toLowerCase()!=="abel"&&a.jsxs("button",{onClick:()=>x("tools"),className:`flex-1 py-1.5 text-xs font-bold rounded-md transition-all flex items-center justify-center gap-1 ${g==="tools"?"bg-zinc-700 text-white shadow":"text-zinc-500 hover:text-zinc-300"}`,children:[a.jsx(yx,{size:12}),"Tools"]})]}),g==="data"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-4 gap-1 mb-4 text-[10px] text-zinc-500 text-center",children:[a.jsxs("div",{className:"bg-zinc-800/50 rounded py-1",children:[a.jsx("div",{className:"text-white font-bold text-xs",children:r.length}),a.jsx("div",{children:"Total"})]}),a.jsxs("div",{className:"bg-blue-500/10 rounded py-1 text-blue-400",children:[a.jsx("div",{className:"font-bold text-xs",children:r.filter(B=>B.fromCatalog).length}),a.jsx("div",{children:"Verif."})]}),a.jsxs("div",{className:"bg-yellow-500/10 rounded py-1 text-yellow-400",children:[a.jsx("div",{className:"font-bold text-xs",children:r.filter(B=>B.userLabels?.includes("manual")).length}),a.jsx("div",{children:"Man."})]}),a.jsxs("div",{className:"bg-red-500/10 rounded py-1 text-red-400",children:[a.jsx("div",{className:"font-bold text-xs",children:r.filter(B=>!B.teacher||!B.department||B.credits===0).length}),a.jsx("div",{children:"Issues"})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(rd,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-500",size:14}),a.jsx("input",{type:"text",value:s,onChange:B=>A(B.target.value),placeholder:"Search by ID, Name, Teacher...",className:"w-full bg-black border border-zinc-700 text-zinc-300 rounded pl-9 pr-3 py-2 outline-none focus:border-emerald-500"})]})]})]}),g==="data"?a.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:q.map(B=>a.jsxs("div",{onClick:()=>d(B),className:`p-3 border-b border-zinc-800/50 cursor-pointer hover:bg-white/5 transition-colors ${l?.id===B.id?"bg-emerald-500/10 border-l-2 border-l-emerald-500":"border-l-2 border-l-transparent"}`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-1",children:[a.jsx("span",{className:`font-bold line-clamp-1 ${l?.id===B.id?"text-emerald-400":"text-zinc-200"}`,children:B.name}),a.jsx("span",{className:"text-[10px] text-zinc-500",children:B.semester})]}),a.jsxs("div",{className:"flex justify-between text-xs text-zinc-500",children:[a.jsx("span",{children:B.teacher||"<No Teacher>"}),a.jsxs("span",{className:"font-mono text-[10px] opacity-50",children:[B.id.slice(0,8),"..."]})]}),a.jsxs("div",{className:"flex gap-1 mt-2",children:[B.fromCatalog&&a.jsx("span",{className:"px-1.5 py-0.5 bg-blue-500/10 text-blue-400 text-[10px] rounded",children:"Catalog"}),B.userLabels?.includes("manual")&&a.jsx("span",{className:"px-1.5 py-0.5 bg-yellow-500/10 text-yellow-400 text-[10px] rounded",children:"Manual"}),(!B.teacher||!B.department)&&a.jsx("span",{className:"px-1.5 py-0.5 bg-red-500/10 text-red-400 text-[10px] rounded",children:"Missing Data"})]})]},B.id))}):g==="rules"?a.jsxs("div",{className:"p-4 text-zinc-500 text-xs leading-relaxed",children:[a.jsx("p",{className:"mb-4",children:"Select a Logic Flow on the right to visualize how the application calculates credits and processes data."}),a.jsxs("div",{className:"p-3 bg-zinc-800/30 rounded border border-zinc-800",children:[a.jsx("strong",{children:"Legend:"}),a.jsxs("ul",{className:"list-disc pl-4 mt-2 space-y-1",children:[a.jsxs("li",{children:[a.jsx("span",{className:"text-zinc-300",children:"Box"}),": Data or State"]}),a.jsxs("li",{children:[a.jsx("span",{className:"text-emerald-400",children:"Green"}),": Include / Pass"]}),a.jsxs("li",{children:[a.jsx("span",{className:"text-red-400",children:"Red"}),": Exclude / Fail"]})]})]})]}):g==="maintenance"?a.jsxs("div",{className:"p-4 text-zinc-500 text-xs leading-relaxed",children:[a.jsx("p",{className:"mb-4",children:"Maintenance Tasks Overview."}),a.jsx("div",{className:"p-3 bg-zinc-800/30 rounded border border-zinc-800",children:"Updates are manual. Use this checklist to keep data fresh."})]}):a.jsxs("div",{className:"p-4 text-zinc-500 text-xs leading-relaxed",children:[a.jsx("p",{className:"mb-4",children:"Developer Tools & Debugging."}),a.jsx("div",{className:"p-3 bg-zinc-800/30 rounded border border-zinc-800 text-yellow-500",children:" Use with caution. Actions here affect app state directly."})]})]}),a.jsxs("div",{className:"flex-1 flex flex-col bg-[#0d0d0d] relative",children:[a.jsx("button",{onClick:e,className:"absolute right-4 top-4 text-zinc-500 hover:text-white p-2 z-10",children:a.jsx(ut,{size:24})}),g==="style"?a.jsxs("div",{className:"flex-1 p-10 overflow-auto flex flex-col animate-in slide-in-from-bottom-4 duration-300",children:[a.jsx("div",{className:"flex items-center justify-between mb-8",children:a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[a.jsx(aC,{size:24}),"Design System"]}),a.jsx("p",{className:"text-zinc-500 text-sm mt-1",children:"Application color palette and usage guidelines."})]})}),a.jsxs("div",{className:"space-y-8 max-w-4xl",children:[a.jsxs("section",{children:[a.jsx("h3",{className:"text-sm font-bold text-zinc-400 uppercase tracking-wider mb-4 border-b border-zinc-800 pb-2",children:"Core Theme (Dark Mode)"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"p-4 bg-[#303030] rounded-xl border border-zinc-700",children:[a.jsx("div",{className:"h-12 w-full bg-[#303030] rounded mb-2 border border-white/10"}),a.jsx("div",{className:"font-bold text-white text-sm",children:"Background"}),a.jsx("div",{className:"text-[10px] text-zinc-400",children:"#303030 (App Body)"})]}),a.jsxs("div",{className:"p-4 bg-[#424242] rounded-xl border border-zinc-700",children:[a.jsx("div",{className:"h-12 w-full bg-[#424242] rounded mb-2 border border-white/10"}),a.jsx("div",{className:"font-bold text-white text-sm",children:"Surface"}),a.jsx("div",{className:"text-[10px] text-zinc-400",children:"#424242 (Cards/Modals)"})]}),a.jsxs("div",{className:"p-4 bg-[#0d0d0d] rounded-xl border border-zinc-800",children:[a.jsx("div",{className:"h-12 w-full bg-[#A8C8FA] rounded mb-2"}),a.jsx("div",{className:"font-bold text-white text-sm",children:"Primary"}),a.jsx("div",{className:"text-[10px] text-zinc-400",children:"#A8C8FA (Actions/Active)"})]}),a.jsxs("div",{className:"p-4 bg-[#0d0d0d] rounded-xl border border-zinc-800",children:[a.jsx("div",{className:"h-12 w-full bg-[#EFEFEF] rounded mb-2"}),a.jsx("div",{className:"font-bold text-white text-sm",children:"Text"}),a.jsx("div",{className:"text-[10px] text-zinc-400",children:"#EFEFEF (Headings)"})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-sm font-bold text-zinc-400 uppercase tracking-wider mb-4 border-b border-zinc-800 pb-2",children:"Course Categories"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[a.jsxs("div",{className:"bg-[#303030] p-3 rounded border border-zinc-700",children:[a.jsx("div",{style:{backgroundColor:"#FFC8BF",color:"#505050"},className:"px-2 py-1 rounded text-xs font-bold text-center mb-2",children:"Language"}),a.jsx("div",{className:"text-[10px] text-zinc-400 text-center",children:"#FFC8BF"}),a.jsx("div",{className:"text-[10px] text-zinc-500 text-center",children:"Required Foreign Lang"})]}),a.jsxs("div",{className:"bg-[#303030] p-3 rounded border border-zinc-700",children:[a.jsx("div",{style:{backgroundColor:"#FFD5AA",color:"#505050"},className:"px-2 py-1 rounded text-xs font-bold text-center mb-2",children:"Interdisc."}),a.jsx("div",{className:"text-[10px] text-zinc-400 text-center",children:"#FFD5AA"}),a.jsx("div",{className:"text-[10px] text-zinc-500 text-center",children:"Cross-Disciplinary"})]}),a.jsxs("div",{className:"bg-[#303030] p-3 rounded border border-zinc-700",children:[a.jsx("div",{style:{backgroundColor:"#DFFFFB",color:"#505050"},className:"px-2 py-1 rounded text-xs font-bold text-center mb-2",children:"Sports"}),a.jsx("div",{className:"text-[10px] text-zinc-400 text-center",children:"#DFFFFB"}),a.jsx("div",{className:"text-[10px] text-zinc-500 text-center",children:"PE / Military"})]}),a.jsxs("div",{className:"bg-[#303030] p-3 rounded border border-zinc-700",children:[a.jsx("div",{style:{backgroundColor:"#D9FFD4",color:"#505050"},className:"px-2 py-1 rounded text-xs font-bold text-center mb-2",children:"Primer"}),a.jsx("div",{className:"text-[10px] text-zinc-400 text-center",children:"#D9FFD4"}),a.jsx("div",{className:"text-[10px] text-zinc-500 text-center",children:"Gen Edu Primer"})]}),a.jsxs("div",{className:"bg-[#303030] p-3 rounded border border-zinc-700",children:[a.jsx("div",{style:{backgroundColor:"#D8C9FF",color:"#505050"},className:"px-2 py-1 rounded text-xs font-bold text-center mb-2",children:"Boya"}),a.jsx("div",{className:"text-[10px] text-zinc-400 text-center",children:"#D8C9FF"}),a.jsx("div",{className:"text-[10px] text-zinc-500 text-center",children:"Liberal Arts"})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-sm font-bold text-zinc-400 uppercase tracking-wider mb-4 border-b border-zinc-800 pb-2",children:"UI Status"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-[#0d0d0d] p-3 rounded border border-zinc-800 flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded bg-emerald-500/10 text-emerald-500 flex items-center justify-center border border-emerald-500/20",children:a.jsx(vt,{size:16})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-white font-bold",children:"Success"}),a.jsx("div",{className:"text-[10px] text-emerald-500",children:"emerald-500"})]})]}),a.jsxs("div",{className:"bg-[#0d0d0d] p-3 rounded border border-zinc-800 flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded bg-red-500/10 text-red-500 flex items-center justify-center border border-red-500/20",children:a.jsx(ut,{size:16})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-white font-bold",children:"Error/Missing"}),a.jsx("div",{className:"text-[10px] text-red-500",children:"red-500"})]})]}),a.jsxs("div",{className:"bg-[#0d0d0d] p-3 rounded border border-zinc-800 flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded bg-blue-500/10 text-blue-500 flex items-center justify-center border border-blue-500/20",children:a.jsx(Cc,{size:16})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-white font-bold",children:"Info/Catalog"}),a.jsx("div",{className:"text-[10px] text-blue-500",children:"blue-500"})]})]}),a.jsxs("div",{className:"bg-[#0d0d0d] p-3 rounded border border-zinc-800 flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded bg-yellow-500/10 text-yellow-500 flex items-center justify-center border border-yellow-500/20",children:a.jsx(bs,{size:16})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-white font-bold",children:"Warning/Manual"}),a.jsx("div",{className:"text-[10px] text-yellow-500",children:"yellow-500"})]})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-sm font-bold text-zinc-400 uppercase tracking-wider mb-4 border-b border-zinc-800 pb-2",children:"Typography"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"p-4 bg-zinc-900/30 rounded-xl border border-zinc-800",children:[a.jsx("div",{className:"text-2xl font-bold text-white mb-1",children:"Heading 1"}),a.jsx("div",{className:"text-xs text-zinc-500 font-mono",children:"text-2xl font-bold text-foreground"})]}),a.jsxs("div",{className:"p-4 bg-zinc-900/30 rounded-xl border border-zinc-800",children:[a.jsx("div",{className:"text-xl font-semibold text-primary mb-1",children:"Heading 2"}),a.jsx("div",{className:"text-xs text-zinc-500 font-mono",children:"text-xl font-semibold text-primary"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"p-4 bg-zinc-900/30 rounded-xl border border-zinc-800",children:[a.jsx("div",{className:"text-sm text-zinc-300 mb-1",children:"Body Text (Default)"}),a.jsx("div",{className:"text-xs text-zinc-500 font-mono",children:"text-sm text-zinc-300"})]}),a.jsxs("div",{className:"p-4 bg-zinc-900/30 rounded-xl border border-zinc-800",children:[a.jsx("div",{className:"text-xs text-muted mb-1",children:"Muted Text / Metadata"}),a.jsx("div",{className:"text-xs text-zinc-500 font-mono",children:"text-xs text-muted"})]}),a.jsxs("div",{className:"p-4 bg-zinc-900/30 rounded-xl border border-zinc-800",children:[a.jsx("div",{className:"text-xs font-mono text-purple-400 mb-1",children:"Monospaced Code"}),a.jsx("div",{className:"text-xs text-zinc-500 font-mono",children:"font-mono text-xs"})]})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-sm font-bold text-zinc-400 uppercase tracking-wider mb-4 border-b border-zinc-800 pb-2",children:"Components"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-xs font-bold text-zinc-500 mb-4",children:"Buttons"}),a.jsxs("div",{className:"flex flex-wrap gap-4",children:[a.jsx("button",{className:"px-4 py-2 bg-blue-500 text-white rounded-lg text-sm font-bold shadow-lg shadow-blue-500/20",children:"Primary"}),a.jsx("button",{className:"px-4 py-2 bg-zinc-700 text-white rounded-lg text-sm font-bold hover:bg-zinc-600",children:"Secondary"}),a.jsx("button",{className:"px-4 py-2 bg-red-500 text-white rounded-lg text-sm font-bold shadow-lg shadow-red-500/20",children:"Destructive"}),a.jsx("button",{className:"px-4 py-2 bg-zinc-800 text-zinc-400 rounded-lg text-sm font-bold border border-zinc-700 hover:text-white",children:"Outline"})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-xs font-bold text-zinc-500 mb-4",children:"Input Fields"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("input",{type:"text",placeholder:"Standard Input",disabled:!0,className:"w-full bg-black border border-zinc-700 text-zinc-300 rounded px-3 py-2 outline-none focus:border-emerald-500"}),a.jsxs("div",{className:"bg-surface p-3 rounded-lg border border-border flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-foreground font-medium",children:"Card Item"}),a.jsx("span",{className:"text-xs text-muted",children:"Metadata"})]})]})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-sm font-bold text-zinc-400 uppercase tracking-wider mb-4 border-b border-zinc-800 pb-2",children:"Effects & Animations"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"p-4 bg-zinc-900 rounded-xl border border-zinc-800 flex flex-col items-center justify-center gap-2",children:[a.jsx("div",{className:"w-12 h-12 bg-emerald-500/20 rounded-full animate-pulse border border-emerald-500/50"}),a.jsx("span",{className:"text-xs text-zinc-500 font-mono",children:"animate-pulse"})]}),a.jsxs("div",{className:"p-4 bg-zinc-900 rounded-xl border border-zinc-800 flex flex-col items-center justify-center gap-2",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-xl shadow-lg shadow-blue-500/50"}),a.jsx("span",{className:"text-xs text-zinc-500 font-mono",children:"shadow-lg"})]}),a.jsxs("div",{className:"p-4 bg-zinc-900 rounded-xl border border-zinc-800 flex flex-col items-center justify-center gap-2",children:[a.jsx("div",{className:"w-12 h-12 bg-purple-500/10 rounded-xl border border-purple-500/50 hover:bg-purple-500/30 transition-colors duration-300"}),a.jsx("span",{className:"text-xs text-zinc-500 font-mono",children:"transition-colors"})]}),a.jsxs("div",{className:"p-4 bg-zinc-900 rounded-xl border border-zinc-800 flex flex-col items-center justify-center gap-2",children:[a.jsxs("div",{className:"relative flex h-3 w-3",children:[a.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-sky-400 opacity-75"}),a.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-sky-500"})]}),a.jsx("span",{className:"text-xs text-zinc-500 font-mono",children:"animate-ping"})]})]})]})]})]}):g==="data"?l?a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-zinc-800 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-white mb-1",children:l.name}),a.jsx("code",{className:"text-zinc-500",children:l.id})]}),a.jsxs("button",{onClick:E,className:"flex items-center gap-2 px-3 py-1.5 bg-zinc-800 hover:bg-zinc-700 text-zinc-300 rounded transition-colors text-xs",children:[u?a.jsx(vt,{size:14,className:"text-emerald-400"}):a.jsx(r5,{size:14}),u?"Copied!":"Copy JSON"]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-8",children:[a.jsxs("section",{children:[a.jsx("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider mb-3",children:"Core Data"}),a.jsx("table",{className:"w-full text-left border-collapse",children:a.jsxs("tbody",{children:[a.jsxs("tr",{className:"border-b border-zinc-800/50",children:[a.jsx("th",{className:"py-2 text-zinc-400 font-normal w-32",children:"Credits"}),a.jsx("td",{className:"py-2 text-zinc-200",children:l.credits})]}),a.jsxs("tr",{className:"border-b border-zinc-800/50",children:[a.jsx("th",{className:"py-2 text-zinc-400 font-normal",children:"Grade"}),a.jsx("td",{className:"py-2 text-zinc-200",children:l.grade||"-"})]}),a.jsxs("tr",{className:"border-b border-zinc-800/50",children:[a.jsx("th",{className:"py-2 text-zinc-400 font-normal",children:"Category"}),a.jsx("td",{className:"py-2 text-zinc-200",children:l.category})]}),a.jsxs("tr",{className:"border-b border-zinc-800/50",children:[a.jsx("th",{className:"py-2 text-zinc-400 font-normal",children:"Sub-Cat"}),a.jsx("td",{className:"py-2 text-zinc-200",children:l.genEduSubCategory||"-"})]})]})})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider mb-3",children:"Metadata"}),a.jsx("table",{className:"w-full text-left border-collapse",children:a.jsxs("tbody",{children:[a.jsxs("tr",{className:"border-b border-zinc-800/50",children:[a.jsx("th",{className:"py-2 text-zinc-400 font-normal w-32",children:"Teacher"}),a.jsx("td",{className:"py-2 text-zinc-200",children:l.teacher||a.jsx("span",{className:"text-red-500",children:"Missing"})})]}),a.jsxs("tr",{className:"border-b border-zinc-800/50",children:[a.jsx("th",{className:"py-2 text-zinc-400 font-normal",children:"Department"}),a.jsx("td",{className:"py-2 text-zinc-200",children:l.department||a.jsx("span",{className:"text-red-500",children:"Missing"})})]}),a.jsxs("tr",{className:"border-b border-zinc-800/50",children:[a.jsx("th",{className:"py-2 text-zinc-400 font-normal",children:"Orig. ID"}),a.jsx("td",{className:"py-2 text-zinc-200",children:l.originalId||a.jsx("span",{className:"text-zinc-600",children:"N/A"})})]}),a.jsxs("tr",{className:"border-b border-zinc-800/50",children:[a.jsx("th",{className:"py-2 text-zinc-400 font-normal",children:"Orig. Sem"}),a.jsx("td",{className:"py-2 text-zinc-200",children:l.originalSemester||a.jsx("span",{className:"text-red-500",children:"Missing"})})]})]})})]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider mb-3 flex items-center gap-2",children:[a.jsx(l5,{size:14}),"Raw JSON Object"]}),a.jsx("pre",{className:"bg-[#111] border border-zinc-800 rounded-lg p-4 overflow-x-auto text-xs text-blue-300 font-mono leading-relaxed",children:JSON.stringify(l,null,2)})]})]})]}):a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-zinc-600",children:[a.jsx(Cc,{size:48,className:"mb-4 opacity-50"}),a.jsx("p",{children:"Select a course to inspect raw data"})]}):g==="rules"?a.jsxs("div",{className:"flex-1 p-10 overflow-auto flex flex-col items-center animate-in slide-in-from-bottom-4 duration-300",children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-8",children:"Credits Logic Flow"}),a.jsxs("div",{className:"flex flex-col items-center gap-6 max-w-2xl w-full",children:[a.jsx("div",{className:"bg-zinc-800 px-6 py-3 rounded-xl border border-zinc-700 font-bold text-white shadow-lg",children:"Raw Course Data"}),a.jsx("div",{className:"h-8 w-0.5 bg-zinc-700"}),a.jsxs("div",{className:"relative p-4 rounded-xl border border-zinc-700 bg-[#0d0d0d] w-full text-center group hover:border-zinc-500 transition-colors",children:[a.jsx("span",{className:"text-xs text-zinc-500 uppercase tracking-widest font-bold mb-2 block",children:"Check 1"}),a.jsx("div",{className:"text-lg text-zinc-200 font-bold",children:"Is Withdrawn?"}),a.jsx("div",{className:"absolute top-1/2 right-full w-8 h-[1px] bg-red-500/50"}),a.jsx("div",{className:"absolute top-1/2 right-full -translate-x-full -translate-y-1/2 text-red-400 text-xs px-2 whitespace-nowrap",children:"Yes  Discard"})]}),a.jsx("div",{className:"h-8 w-0.5 bg-zinc-700"}),a.jsxs("div",{className:"relative p-4 rounded-xl border border-zinc-700 bg-[#0d0d0d] w-full text-center group hover:border-zinc-500 transition-colors",children:[a.jsx("span",{className:"text-xs text-zinc-500 uppercase tracking-widest font-bold mb-2 block",children:"Check 2"}),a.jsx("div",{className:"text-lg text-zinc-200 font-bold",children:"Is Grade < 60? (or F/E)"}),a.jsx("div",{className:"absolute top-1/2 right-full w-8 h-[1px] bg-red-500/50"}),a.jsx("div",{className:"absolute top-1/2 right-full -translate-x-full -translate-y-1/2 text-red-400 text-xs px-2 whitespace-nowrap",children:"Yes  No Credit (GPA Only)"})]}),a.jsx("div",{className:"h-8 w-0.5 bg-zinc-700"}),a.jsxs("div",{className:"relative p-4 rounded-xl border border-zinc-700 bg-[#0d0d0d] w-full text-center group hover:border-zinc-500 transition-colors",children:[a.jsx("span",{className:"text-xs text-zinc-500 uppercase tracking-widest font-bold mb-2 block",children:"Check 3: Special Category"}),a.jsxs("div",{className:"text-sm text-zinc-300 grid grid-cols-2 gap-4 text-left",children:[a.jsxs("div",{className:"bg-zinc-800/50 p-2 rounded",children:[a.jsx("div",{className:"font-bold text-yellow-400",children:"University Way / Primer"}),a.jsx("div",{className:"text-[10px] text-zinc-500",children:' Adds to "Events" count'}),a.jsx("div",{className:"text-[10px] text-red-400",children:" 0 Credits for Grad"})]}),a.jsxs("div",{className:"bg-zinc-800/50 p-2 rounded",children:[a.jsx("div",{className:"font-bold text-purple-400",children:"Sports / Military"}),a.jsx("div",{className:"text-[10px] text-zinc-500",children:" Included in Transcript"}),a.jsx("div",{className:"text-[10px] text-red-400",children:" 0 Credits for Grad"})]})]})]}),a.jsx("div",{className:"h-8 w-0.5 bg-zinc-700"}),a.jsxs("div",{className:"bg-emerald-500/10 px-8 py-4 rounded-xl border-2 border-emerald-500/50 text-emerald-400 shadow-[0_0_30px_rgba(16,185,129,0.1)] text-center",children:[a.jsx("div",{className:"font-bold text-xl mb-1",children:"Add to Total Credits"}),a.jsx("div",{className:"text-xs opacity-75",children:"Used for Graduation Progress Bar"})]})]}),a.jsx("div",{className:"h-8 w-0.5 bg-zinc-700"}),a.jsxs("section",{className:"relative pl-8 pb-8 border-l-2 border-zinc-800",children:[a.jsx("div",{className:"absolute -left-[11px] top-0 w-6 h-6 rounded-full bg-zinc-800 border-2 border-zinc-600 flex items-center justify-center text-[10px] font-bold",children:"4"}),a.jsx("h3",{className:"text-xl font-bold text-zinc-300 mb-6",children:"Phase 4: GPA Calculation"}),a.jsxs("div",{className:"bg-zinc-900/30 p-4 rounded-lg border border-zinc-800",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsxs("div",{className:"p-3 bg-black/50 rounded border border-zinc-800 text-center flex-1",children:[a.jsx("strong",{className:"text-white block text-sm",children:"Valid Grades"}),a.jsx("span",{className:"text-[10px] text-zinc-400",children:"A+, A ... D, E"}),a.jsx("div",{className:"text-emerald-400 text-xs mt-1",children:"Included in GPA"})]}),a.jsx("div",{className:"text-zinc-600",children:"vs"}),a.jsxs("div",{className:"p-3 bg-black/50 rounded border border-zinc-800 text-center flex-1",children:[a.jsx("strong",{className:"text-white block text-sm",children:"Invalid / Withdraw"}),a.jsx("span",{className:"text-[10px] text-zinc-400",children:"W, X, Exemptions"}),a.jsx("div",{className:"text-red-400 text-xs mt-1",children:"Excluded from GPA"})]})]}),a.jsxs("div",{className:"p-3 bg-zinc-800/50 rounded border border-zinc-700 mb-2",children:[a.jsx("strong",{className:"text-orange-400 block text-sm mb-1",children:" Failure Case (F, Fail, Grade < 60)"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-red-500 font-bold",children:""}),a.jsxs("span",{children:["Credits: ",a.jsx("strong",{children:"0"})," (No Earned Credits)"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(vt,{size:12,className:"text-emerald-500"}),a.jsxs("span",{children:["GPA: ",a.jsx("strong",{children:"Included"})," (Points: 0)"]})]})]})]}),a.jsx("div",{className:"mt-4 p-3 border border-zinc-700 rounded bg-black/30 font-mono text-xs text-center text-zinc-400",children:"GPA = Sum(GradePoints  Credits) / Sum(Credits)"})]})]}),a.jsx("div",{className:"h-8 w-0.5 bg-zinc-700"}),a.jsxs("section",{className:"relative pl-8 pb-8 border-l-2 border-zinc-800",children:[a.jsx("div",{className:"absolute -left-[11px] top-0 w-6 h-6 rounded-full bg-indigo-900 border-2 border-indigo-500 text-indigo-100 flex items-center justify-center text-[10px] font-bold",children:"5"}),a.jsx("h3",{className:"text-xl font-bold text-zinc-300 mb-6",children:"Interdisciplinary & Micro-credits"}),a.jsxs("div",{className:"bg-zinc-900/30 p-4 rounded-lg border border-zinc-800",children:[a.jsxs("div",{className:"flex flex-col items-center gap-4 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2 w-full justify-center",children:[a.jsx("div",{className:"p-2 bg-zinc-800 rounded border border-zinc-700 text-xs text-center w-24",children:"External Activity"}),a.jsx("div",{className:"h-0.5 w-4 bg-zinc-600"}),a.jsx("div",{className:"p-2 bg-zinc-800 rounded border border-zinc-700 text-xs text-center w-24",children:"Verification"}),a.jsx("div",{className:"h-0.5 w-4 bg-zinc-600"}),a.jsx("div",{className:"p-2 bg-indigo-500/10 border border-indigo-500/50 text-indigo-300 rounded text-xs text-center w-28",children:"Micro-credit Item"})]}),a.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-zinc-500",children:[a.jsx("span",{children:"Start"}),a.jsx("div",{className:"h-0.5 w-8 bg-zinc-700"}),a.jsx("span",{className:"text-emerald-500",children:"Process"}),a.jsx("div",{className:"h-0.5 w-8 bg-zinc-700"}),a.jsx("span",{className:"text-indigo-400",children:"Result"})]}),a.jsxs("div",{className:"w-full border-t border-zinc-800 pt-4 flex justify-between items-start gap-4",children:[a.jsxs("div",{className:"flex-1 text-center",children:[a.jsx("div",{className:"text-zinc-400 text-xs font-bold mb-1",children:"Constraints"}),a.jsxs("div",{className:"text-[10px] text-zinc-500 space-y-1",children:[a.jsxs("p",{children:[" Max ",a.jsx("span",{className:"text-white",children:"1.0"})," credit / semester"]}),a.jsxs("p",{children:[" Excess credits fill ",a.jsx("span",{className:"text-white",children:"older gaps"})," priority"]})]})]}),a.jsx("div",{className:"w-px bg-zinc-800 self-stretch"}),a.jsxs("div",{className:"flex-1 text-center",children:[a.jsx("div",{className:"text-emerald-400 text-xs font-bold mb-1",children:"Output"}),a.jsxs("div",{className:"text-[10px] text-zinc-500",children:[a.jsxs("p",{children:["Added directly to ",a.jsx("span",{className:"text-white",children:"Graduation Total"})]}),a.jsx("p",{className:"text-red-400 opacity-80",children:"(Not included in GPA)"})]})]})]})]}),a.jsxs("div",{className:"bg-black/40 rounded border border-zinc-800 p-3",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"text-xs font-bold text-zinc-300",children:"Current Status (Simulated)"}),a.jsx("span",{className:"text-[10px] bg-indigo-500/20 text-indigo-300 px-1.5 py-0.5 rounded",children:"Live Data"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[a.jsxs("div",{className:"bg-zinc-800/50 rounded p-2",children:[a.jsx("div",{className:"text-[10px] text-zinc-500",children:"Total Raw"}),a.jsx("div",{className:"text-sm font-mono text-zinc-300",children:Object.values(S.rawStats).reduce((B,I)=>B+I,0).toFixed(1)})]}),a.jsxs("div",{className:"bg-indigo-500/10 border border-indigo-500/20 rounded p-2",children:[a.jsx("div",{className:"text-[10px] text-indigo-300",children:"Effective"}),a.jsxs("div",{className:"text-sm font-mono text-indigo-400 font-bold",children:[S.grandTotalEffective," / 6.0"]})]})]}),S.grandTotalEffective>0&&a.jsxs("div",{className:"mt-2 text-[10px] text-zinc-500 text-center",children:["Contributing ",a.jsxs("span",{className:"text-indigo-400 font-bold",children:["+",S.grandTotalEffective]})," to Graduation Progress"]})]})]})]}),a.jsx("div",{className:"h-8 w-0.5 bg-zinc-700"}),a.jsxs("section",{className:"relative pl-8 pb-8 border-l-2 border-zinc-800",children:[a.jsx("div",{className:"absolute -left-[11px] top-0 w-6 h-6 rounded-full bg-cyan-900 border-2 border-cyan-500 text-cyan-100 flex items-center justify-center text-[10px] font-bold",children:"6"}),a.jsx("h3",{className:"text-xl font-bold text-zinc-300 mb-6",children:"International & Interdisciplinary Limit"}),a.jsxs("div",{className:"bg-zinc-900/30 p-4 rounded-lg border border-zinc-800",children:[a.jsxs("div",{className:"flex flex-col items-center gap-4 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2 w-full justify-center",children:[a.jsx("div",{className:"grid grid-cols-3 gap-1",children:[1,2,3,4,5,6,7,8,9].map(B=>a.jsx("div",{className:"w-6 h-6 bg-zinc-800 border border-zinc-700 rounded flex items-center justify-center text-[10px] text-zinc-500",children:B},B))}),a.jsx("div",{className:"h-0.5 w-4 bg-zinc-600"}),a.jsx("div",{className:"p-2 bg-zinc-800 rounded border border-zinc-700 text-xs text-center",children:"Verify Any (1)"}),a.jsx("div",{className:"h-0.5 w-4 bg-zinc-600"}),a.jsx("div",{className:"p-2 bg-cyan-500/10 border border-cyan-500/50 text-cyan-300 rounded text-xs text-center w-28",children:"Requirement Met"})]}),a.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-zinc-500",children:[a.jsx("span",{children:"9 Options"}),a.jsx("div",{className:"h-0.5 w-8 bg-zinc-700"}),a.jsx("span",{className:"text-emerald-500",children:"Check"}),a.jsx("div",{className:"h-0.5 w-8 bg-zinc-700"}),a.jsx("span",{className:"text-cyan-400",children:"Result"})]})]}),a.jsxs("div",{className:"bg-black/40 rounded border border-zinc-800 p-3",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"text-xs font-bold text-zinc-300",children:"Current Status (Simulated)"}),a.jsx("span",{className:"text-[10px] bg-cyan-500/20 text-cyan-300 px-1.5 py-0.5 rounded",children:"Live Data"})]}),a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-[10px] text-zinc-500 mb-1",children:"Completed Items"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:[1,2,3,4,5,6,7,8,9].map(B=>{const I=P[B];return a.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center text-[10px] font-bold ${I?"bg-cyan-500 text-black":"bg-zinc-800 text-zinc-600"}`,children:B},B)})})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-[10px] text-zinc-500",children:"Status"}),[1,2,3,4,5,6,7,8,9].some(B=>P[B])?a.jsxs("div",{className:"text-emerald-400 font-bold flex items-center justify-end gap-1",children:[a.jsx(vt,{size:14})," Passed"]}):a.jsxs("div",{className:"text-red-400 font-bold flex items-center justify-end gap-1",children:[a.jsx(ut,{size:14})," Incomplete"]})]})]})]})]})]}),a.jsx("div",{className:"h-8 w-0.5 bg-zinc-700"}),a.jsxs("section",{className:"relative pl-8 pb-8 border-l-2 border-zinc-800",children:[a.jsx("div",{className:"absolute -left-[11px] top-0 w-6 h-6 rounded-full bg-purple-900 border-2 border-purple-500 text-purple-100 flex items-center justify-center text-[10px] font-bold",children:a.jsx(Cc,{size:12})}),a.jsx("h3",{className:"text-xl font-bold text-zinc-300 mb-6",children:"Backup File Structure"}),a.jsxs("div",{className:"bg-zinc-900/30 p-4 rounded-lg border border-zinc-800",children:[a.jsxs("div",{className:"font-mono text-xs space-y-2",children:[a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"version:"}),a.jsx("span",{className:"text-zinc-400",children:"number (Schema Version)"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"lastUpdated:"}),a.jsx("span",{className:"text-zinc-400",children:"ISO Date String"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"settings:"}),a.jsx("span",{className:"text-zinc-400",children:"{ studentClass, major, entranceYear, graduationCredits }"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"courses:"}),a.jsx("span",{className:"text-zinc-400",children:"Array<Course> (All added courses)"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"labels:"}),a.jsx("span",{className:"text-zinc-400",children:"{ library, map } (Custom Tags)"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"plannerDraft:"}),a.jsx("span",{className:"text-zinc-400",children:"LocalStorage Draft State"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"interdisciplinaryStatus:"}),a.jsx("span",{className:"text-zinc-400",children:"Object (Interdisciplinary Check Settings)"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"minorData:"}),a.jsx("span",{className:"text-zinc-400",children:"Object (Minor Requirement Progress)"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"microCreditsData:"}),a.jsx("span",{className:"text-zinc-400",children:"Object (Micro-credits Progress)"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"teacherEducationData:"}),a.jsx("span",{className:"text-zinc-400",children:"Object (Teacher Ed. Program Data)"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"doubleMajorData:"}),a.jsx("span",{className:"text-zinc-400",children:"Object (Double Major Data)"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"crossDisciplinaryData:"}),a.jsx("span",{className:"text-zinc-400",children:"Object (Cross-disciplinary Program Data)"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"diverseLearningData:"}),a.jsx("span",{className:"text-zinc-400",children:"Object (Diverse Learning Program Data)"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"interdisciplinaryCourseData:"}),a.jsx("span",{className:"text-zinc-400",children:"Object (Interdisciplinary Course Data)"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"interdisciplinaryNotes:"}),a.jsx("span",{className:"text-zinc-400",children:"Object (User Notes for Checks 1-10)"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"assets:"}),a.jsx("span",{className:"text-zinc-400",children:"Base64 Encoded Images (Course Cards)"})]})]}),a.jsx("div",{className:"mt-4 p-2 bg-purple-500/10 border border-purple-500/20 rounded text-[10px] text-purple-300",children:"Full state snapshot. Importing this file restores the exact user session state."})]})]}),a.jsxs("section",{className:"relative pl-8",children:[a.jsx("div",{className:"absolute -left-[11px] top-0 w-6 h-6 rounded-full bg-blue-900 border-2 border-blue-500 text-blue-100 flex items-center justify-center text-[10px] font-bold",children:"i"}),a.jsx("h3",{className:"text-xl font-bold text-zinc-300 mb-6",children:"System Status"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-zinc-900/50 p-4 rounded-xl border border-zinc-700",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2 font-bold text-zinc-300",children:[a.jsx(X5,{size:16}),"API Connection"]}),a.jsx("div",{className:"flex items-center gap-2 text-sm",children:y?a.jsxs("span",{className:"text-orange-400 flex items-center gap-1",children:[a.jsx(oC,{size:14})," Offline Mode (Backup Data)"]}):a.jsxs("span",{className:"text-emerald-400 flex items-center gap-1",children:[a.jsx(fk,{size:14})," Online (Live API)"]})}),a.jsxs("div",{className:"text-[10px] text-zinc-500 mt-2",children:["Latest Check: ",v?new Date(v).toLocaleTimeString():"Never"]})]}),a.jsxs("div",{className:"bg-zinc-900/50 p-4 rounded-xl border border-zinc-700",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3 font-bold text-zinc-300",children:[a.jsx(HA,{size:16}),"API Scope & Status"]}),a.jsx("div",{className:"flex flex-col gap-2 max-h-[120px] overflow-y-auto custom-scrollbar pr-2",children:N.map((B,I)=>{const _=I<=1;return a.jsxs("div",{className:"flex justify-between items-center text-xs p-2 bg-black/40 rounded border border-zinc-800",children:[a.jsx("span",{className:"font-mono text-zinc-200",children:B}),_?a.jsxs("span",{className:"flex items-center gap-1.5 text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded-full",children:[a.jsxs("span",{className:"relative flex h-2 w-2",children:[a.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),a.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-emerald-500"})]}),"Monitoring"]}):a.jsxs("span",{className:"text-zinc-500 bg-zinc-800 px-2 py-0.5 rounded-full flex items-center gap-1",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-zinc-600"}),"Static"]})]},B)})}),a.jsx("div",{className:"text-[10px] text-zinc-500 mt-2 text-center",children:"Only the latest 2 semesters are constantly scanned for changes. Older data is archived."})]})]})]})]}):g==="maintenance"?a.jsxs("div",{className:"flex-1 p-10 overflow-auto flex flex-col animate-in slide-in-from-bottom-4 duration-300",children:[a.jsx("div",{className:"flex items-center justify-between mb-8",children:a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[a.jsx(tC,{size:24}),"Notification Center"]}),a.jsx("p",{className:"text-zinc-500 text-sm mt-1",children:"Manual maintenance tasks and verification checklist."})]})}),a.jsx("div",{className:"grid gap-4 max-w-4xl",children:N6.map(B=>{const I=K(B.id,B.period),_=V[B.id];return a.jsxs("div",{className:`p-4 rounded-xl border flex items-center gap-4 transition-all ${I==="overdue"?"bg-red-500/5 border-red-500/30":I==="due-soon"?"bg-orange-500/5 border-orange-500/30":"bg-zinc-900/50 border-zinc-800"}`,children:[a.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${I==="overdue"?"bg-red-500/20 text-red-400":I==="due-soon"?"bg-orange-500/20 text-orange-400":"bg-zinc-800 text-zinc-400"}`,children:I==="overdue"?a.jsx(bs,{size:20}):I==="due-soon"?a.jsx(mx,{size:20}):a.jsx(vt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h3",{className:"font-bold text-zinc-200",children:B.title}),I==="overdue"&&a.jsx("span",{className:"bg-red-500 text-white text-[10px] px-1.5 py-0.5 rounded uppercase font-bold",children:"Overdue"}),I==="due-soon"&&a.jsx("span",{className:"bg-orange-500 text-white text-[10px] px-1.5 py-0.5 rounded uppercase font-bold",children:"Due Soon"})]}),a.jsx("p",{className:"text-xs text-zinc-500 truncate",children:B.desc})]}),a.jsxs("div",{className:"text-right mr-4 min-w-[120px]",children:[a.jsx("div",{className:"text-xs text-zinc-400",children:"Last Checked"}),a.jsx("div",{className:"font-mono text-sm text-zinc-200",children:_?new Date(_).toLocaleDateString():"Never"})]}),a.jsx("button",{onClick:()=>G(B.id),className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg text-xs font-bold transition-colors",children:"Mark Done"})]},B.id)})})]}):a.jsxs("div",{className:"flex-1 p-10 overflow-auto flex flex-col animate-in slide-in-from-bottom-4 duration-300",children:[a.jsx("div",{className:"flex items-center justify-between mb-8",children:a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[a.jsx(yx,{size:24}),"Developer Tools"]}),a.jsx("p",{className:"text-zinc-500 text-sm mt-1",children:"Debug utils and granular cache control."})]})}),a.jsxs("div",{className:"max-w-4xl space-y-8",children:[a.jsxs("section",{children:[a.jsxs("h3",{className:"text-sm font-bold text-zinc-400 uppercase tracking-wider mb-4 flex items-center gap-2",children:[a.jsx(iC,{size:14}),"Granular Cache Management"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 border border-zinc-800 rounded-xl bg-zinc-900/30",children:[a.jsx("div",{className:"font-bold text-zinc-200 mb-1",children:"User Settings"}),a.jsx("div",{className:"text-xs text-zinc-500 mb-4 h-8",children:"Major, Entrance Year, Theme, Language."}),a.jsxs("button",{onClick:()=>{localStorage.removeItem("nsysu-major"),localStorage.removeItem("nsysu-entrance-year"),localStorage.removeItem("nsysu-theme"),localStorage.removeItem("nsysu-student-class"),window.location.reload()},className:"w-full py-2 bg-zinc-800 hover:bg-zinc-700 text-white text-xs rounded transition-colors flex items-center justify-center gap-2",children:[a.jsx(Tn,{size:12})," Clear Settings"]})]}),a.jsxs("div",{className:"p-4 border border-zinc-800 rounded-xl bg-zinc-900/30",children:[a.jsx("div",{className:"font-bold text-zinc-200 mb-1",children:"Tutorial & Tips"}),a.jsx("div",{className:"text-xs text-zinc-500 mb-4 h-8",children:'Reset "Seen" status for all tutorials.'}),a.jsxs("button",{onClick:()=>{localStorage.removeItem("nsysu-tutorial-seen"),localStorage.removeItem("nsysu-last-announcement-ver"),localStorage.removeItem("nsysu-setup-reminder-seen"),window.location.reload()},className:"w-full py-2 bg-zinc-800 hover:bg-zinc-700 text-white text-xs rounded transition-colors flex items-center justify-center gap-2",children:[a.jsx(iC,{size:12})," Reset Tutorials"]})]}),a.jsxs("div",{className:"p-4 border border-zinc-800 rounded-xl bg-zinc-900/30",children:[a.jsx("div",{className:"font-bold text-zinc-200 mb-1",children:"API Catalog Cache"}),a.jsx("div",{className:"text-xs text-zinc-500 mb-4 h-8",children:"Clears browser memory of fetched courses."}),a.jsxs("button",{onClick:()=>window.location.reload(),className:"w-full py-2 bg-blue-600 hover:bg-blue-500 text-white text-xs rounded transition-colors flex items-center justify-center gap-2",children:[a.jsx(V5,{size:12})," Force Reload"]})]})]})]}),a.jsx("div",{className:"h-px bg-zinc-800"}),a.jsxs("section",{children:[a.jsxs("h3",{className:"text-sm font-bold text-zinc-400 uppercase tracking-wider mb-4 flex items-center gap-2",children:[a.jsx(rC,{size:14}),"Feature Flags & Debug"]}),a.jsxs("div",{className:"bg-zinc-900/30 border border-zinc-800 rounded-xl overflow-hidden",children:[a.jsxs("div",{className:"p-4 flex items-center justify-between border-b border-zinc-800 last:border-0 hover:bg-zinc-800/10",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-red-500/10 text-red-400 flex items-center justify-center",children:a.jsx(oC,{size:16})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-bold text-zinc-200 text-sm",children:"Force Offline Mode"}),a.jsx("div",{className:"text-xs text-zinc-500",children:"Simulate API failure to test backup data fallback"})]})]}),a.jsx("button",{onClick:Y,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${localStorage.getItem("nsysu-force-offline")==="true"?"bg-emerald-500":"bg-zinc-700"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition transition-transform ${localStorage.getItem("nsysu-force-offline")==="true"?"translate-x-6":"translate-x-1"}`})})]}),a.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-zinc-800/10 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500/10 text-purple-400 flex items-center justify-center",children:a.jsx(rC,{size:16})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-bold text-zinc-200 text-sm",children:"Debug Boundaries"}),a.jsx("div",{className:"text-xs text-zinc-500",children:"Highlight UI component boundaries (Red Outlines)"})]})]}),a.jsx("button",{onClick:()=>{const I=!(localStorage.getItem("nsysu-debug-boundaries")==="true");localStorage.setItem("nsysu-debug-boundaries",I.toString()),I?document.body.classList.add("debug-outlines"):document.body.classList.remove("debug-outlines"),$(_=>({..._}))},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${localStorage.getItem("nsysu-debug-boundaries")==="true"?"bg-purple-600":"bg-zinc-700"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition transition-transform ${localStorage.getItem("nsysu-debug-boundaries")==="true"?"translate-x-6":"translate-x-1"}`})})]})]})]})]})]})]})]}),document.body)},j6=({onAccept:r,onDecline:e,theme:t})=>{const{language:s}=At(),{logout:A}=Bd(),[l,d]=k.useState(!1);k.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]);const u=async()=>{try{await A(),e()}catch(f){console.error("Failed to logout on decline",f)}};return a.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-surface border border-border rounded-xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[a.jsx("div",{className:"p-6 border-b border-border flex items-center justify-between bg-background",children:a.jsx("div",{className:"flex items-center gap-3",children:a.jsx("img",{src:t==="dark"?"./Dark_mode_full.png":"./Light_mode_full.png",alt:"ClearGrad",className:"h-8 w-auto object-contain"})})}),a.jsxs("div",{className:"p-6 overflow-y-auto flex-1 bg-surface",children:[a.jsx("h2",{className:"text-xl font-bold text-foreground mb-4",children:s==="zh"?" ClearGrad  - ":" ClearGrad - Data Usage & Disclaimer"}),a.jsx("div",{className:"space-y-4 text-sm text-foreground/90 leading-relaxed bg-background/50 p-5 rounded-lg border border-border/50",children:s==="zh"?a.jsxs(a.Fragment,{children:[a.jsx("p",{children:" ClearGrad"}),a.jsx("h3",{className:"font-semibold text-primary mt-6 mb-2",children:"1.  (Privacy & Data Collection)"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:""}),"  Google Email Google Firebase "]}),a.jsxs("li",{children:[a.jsx("strong",{children:" (Local-First)"})," /PDF"]})]}),a.jsx("h3",{className:"font-semibold text-primary mt-6 mb-2",children:"2.  (Disclaimer of Liability)"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsx("li",{children:""}),a.jsx("li",{children:""}),a.jsx("li",{children:""})]}),a.jsx("h3",{className:"font-semibold text-primary mt-6 mb-2",children:"3.  (Official Integration & Data Transfer)"}),a.jsx("p",{children:"ClearGrad "}),a.jsx("p",{children:" "}),a.jsx("h3",{className:"font-semibold text-primary mt-6 mb-2",children:"4.  (Right to Erasure)"}),a.jsx("p",{children:" Google "})]}):a.jsxs(a.Fragment,{children:[a.jsx("p",{children:"Welcome to ClearGrad! To provide a seamless cross-device experience, this system uses cloud synchronization. Before enabling, please read and agree to the following terms:"}),a.jsx("h3",{className:"font-semibold text-primary mt-6 mb-2",children:"1. Privacy & Data Collection"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Encrypted Cloud Backup:"})," When you log in with your Google account, the system collects your basic identification information (Email, Display Name) as well as your course drafts and profile settings. This data is securely encrypted and stored in the Google Firebase cloud database using the highest level security rules. No developer or third party can access or read your personal schedule except yourself."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Local-First Proof Documents:"}),' To maximize your privacy, any physical proofs such as transcripts or approval letters (images/PDF) you upload will only be encrypted and stored on your current device (browser) and will never be uploaded to our cloud servers. Only the "file name and presence flag" are synced to the cloud for cross-device identification.']})]}),a.jsx("h3",{className:"font-semibold text-primary mt-6 mb-2",children:"2. Disclaimer of Liability"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsx("li",{children:"This system is an independent open-source tool to assist students in tracking credits and is not an official university application."}),a.jsx("li",{children:"We strive to ensure the accuracy of credit calculations and requirement checks, but do not guarantee complete consistency with the university's academic affairs system."}),a.jsx("li",{children:"You understand and agree: Final graduation qualifications, credit recognition, and interdisciplinary evaluations are solely subject to the final review of your university's official academic affairs system and department office. The development team bears no legal or compensatory responsibility for misjudgments in scheduling or delayed graduation resulting from reliance on this system."})]}),a.jsx("h3",{className:"font-semibold text-primary mt-6 mb-2",children:"3. Official Integration & Data Transfer"}),a.jsx("p",{children:"ClearGrad will actively seek opportunities for official system integration or handover with universities (e.g., National Sun Yat-sen University) in the future to provide a longer-term, more stable service."}),a.jsx("p",{children:"You agree that in the event of such a system handover or merge, the development team may safely transfer your account and course data to the university's official servers in compliance with personal data protection laws. After the data transfer is complete, the management and privacy terms of your data will follow the official privacy policy published by the university."}),a.jsx("h3",{className:"font-semibold text-primary mt-6 mb-2",children:"4. Right to Erasure"}),a.jsx("p",{children:"You have full control over your personal data. You can clear your cloud backup data in the system settings at any time, or terminate the sync service by unlinking your Google account."})]})})]}),a.jsxs("div",{className:"p-6 border-t border-border bg-background flex flex-col gap-4",children:[a.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",onClick:()=>d(!l),children:[a.jsx("div",{className:`mt-0.5 w-5 h-5 rounded border flex items-center justify-center transition-colors flex-shrink-0 ${l?"bg-primary border-primary text-white":"border-gray-500 group-hover:border-primary"}`,children:l&&a.jsx(vt,{size:14})}),a.jsx("span",{className:"text-sm font-medium text-foreground select-none",children:s==="zh"?"ClearGrad ":"I have read and agree to the ClearGrad Data Usage & Disclaimer, and agree to enable cloud sync."})]}),a.jsxs("div",{className:"flex justify-between items-center mt-2",children:[a.jsx("button",{onClick:u,className:"px-4 py-2 rounded-lg text-sm font-medium text-muted hover:text-red-400 hover:bg-red-400/10 transition-colors",children:s==="zh"?"":"[ Decline & Logout ]"}),a.jsx("button",{onClick:r,disabled:!l,className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${l?"bg-primary text-white shadow-lg shadow-primary/20 hover:bg-primary/90":"bg-surface border border-border text-muted cursor-not-allowed"}`,children:s==="zh"?"":"Accept & Continue"})]})]})]})})},_6=({onConfirm:r,onCancel:e})=>{const{language:t}=At();return a.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:a.jsx("div",{className:"bg-surface border border-red-500/30 rounded-xl shadow-2xl shadow-red-500/10 w-full max-w-md overflow-hidden animate-in fade-in zoom-in duration-300",children:a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"h-12 w-12 rounded-full bg-red-500/10 text-red-500 flex items-center justify-center mb-4 border border-red-500/20",children:a.jsx(bs,{size:24,className:"animate-pulse"})}),a.jsx("h2",{className:"text-xl font-bold text-foreground mb-2",children:t==="zh"?"":"Delete Cloud Backup & Logout"}),a.jsx("p",{className:"text-sm text-muted mb-4 leading-relaxed",children:t==="zh"?"":"Are you sure you want to permanently delete all backup data on the cloud? This operation cannot be undone. Your local course scheduling data will be retained, and you will be logged out."}),a.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[a.jsx("button",{onClick:e,className:"px-4 py-2 rounded-lg text-sm font-medium text-muted hover:text-foreground hover:bg-surface/80 border border-border/50 transition-colors",children:t==="zh"?"":"Cancel"}),a.jsxs("button",{onClick:r,className:"px-6 py-2 rounded-lg text-sm font-bold bg-red-500 text-white shadow-lg shadow-red-500/20 hover:bg-red-600 transition-all flex items-center gap-2",children:[a.jsx(Tn,{size:16}),t==="zh"?"":"Delete & Logout"]})]})]})})})},T6=({mode:r,setMode:e,showSettings:t,setShowSettings:s})=>{const{t:A}=At(),l=[{id:"tracker",icon:J2,label:A.app.tracker,isActive:r==="tracker"&&!t,onClick:()=>{e("tracker"),s(!1)}},{id:"planner",icon:HA,label:A.app.planner,isActive:r==="planner"&&!t,onClick:()=>{e("planner"),s(!1)}},{id:"settings",icon:W5,label:A.app.settings,isActive:t,onClick:()=>{s(!0)}}];return a.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 md:hidden bg-surface/80 backdrop-blur-md border-t border-border pb-safe",children:a.jsx("div",{className:"flex justify-around items-center h-16 px-2",children:l.map(d=>{const u=d.icon,f=d.isActive?"text-primary dark:text-[#A8C8FA]":"text-muted hover:text-foreground";return a.jsxs("button",{onClick:d.onClick,className:`flex flex-col items-center justify-center w-full h-full gap-1 transition-colors ${f}`,children:[a.jsx("div",{className:`p-1.5 rounded-full ${d.isActive?"bg-primary/20":""}`,children:a.jsx(u,{size:22,className:d.isActive?"stroke-[2.5px]":"stroke-2"})}),a.jsx("span",{className:"text-[10px] font-medium",children:d.label})]},d.id)})})})},U6=({onResolve:r,conflictTimes:e})=>{const{language:t}=At(),s=A=>{if(!A)return t==="zh"?"":"Unknown";const l=new Date(A),d=new Date,u=l.getDate()===d.getDate()&&l.getMonth()===d.getMonth()&&l.getFullYear()===d.getFullYear(),f=l.getHours().toString().padStart(2,"0"),g=l.getMinutes().toString().padStart(2,"0"),x=`${f}:${g}`;return u?t==="zh"?` ${x}`:`Today ${x}`:`${l.getFullYear()}/${(l.getMonth()+1).toString().padStart(2,"0")}/${l.getDate().toString().padStart(2,"0")} ${x}`};return k.useEffect(()=>{const A=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=A}},[]),a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] flex items-center justify-center p-4",children:a.jsx("div",{className:"bg-surface border border-yellow-500/30 rounded-xl shadow-2xl shadow-yellow-500/10 w-full max-w-lg overflow-hidden animate-in fade-in zoom-in duration-300 flex flex-col max-h-[90vh]",children:a.jsxs("div",{className:"p-6 overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"h-10 w-10 rounded-full bg-yellow-500/10 text-yellow-500 flex items-center justify-center border border-yellow-500/20 flex-shrink-0",children:a.jsx(bs,{size:20,className:"animate-pulse"})}),a.jsx("h2",{className:"text-xl font-bold text-foreground",children:t==="zh"?"":"Cloud Backup Conflict Detected"})]}),a.jsxs("div",{className:"space-y-4 text-sm text-foreground/90 leading-relaxed bg-background/50 p-4 rounded-lg border border-border/50",children:[a.jsx("p",{children:t==="zh"?"":"The system detected unsynced progress on this device, but your cloud also has a previous backup."}),a.jsx("p",{className:"font-semibold text-yellow-500/90 dark:text-yellow-400",children:t==="zh"?"":"Please choose which data to keep. (Warning: Overwritten data cannot be recovered)"})]}),a.jsxs("div",{className:"mt-6 flex flex-col gap-3",children:[a.jsxs("button",{onClick:()=>r("cloud"),className:"w-full flex items-center justify-center gap-3 px-6 py-3.5 rounded-lg font-bold bg-primary text-white shadow-lg shadow-primary/20 hover:bg-primary/90 transition-all border border-transparent",children:[a.jsx(XD,{size:20}),a.jsxs("div",{className:"flex flex-col items-start leading-tight",children:[a.jsx("span",{children:t==="zh"?"":"Download Cloud Backup"}),a.jsx("span",{className:"text-xs font-medium opacity-80 mt-1",children:t==="zh"?"()":"(Keep old records, overwrite this device)"}),e&&a.jsx("span",{className:"text-xs font-bold text-yellow-300 mt-0.5",children:t==="zh"?`(${s(e.cloudTime)})`:`(Cloud Last Backup: ${s(e.cloudTime)})`})]})]}),a.jsxs("button",{onClick:()=>r("local"),className:"w-full flex items-center justify-center gap-3 px-6 py-3.5 rounded-lg font-bold bg-surface text-foreground border border-border hover:bg-surface/80 hover:border-border/80 transition-all",children:[a.jsx(WD,{size:20,className:"text-muted"}),a.jsxs("div",{className:"flex flex-col items-start leading-tight",children:[a.jsx("span",{children:t==="zh"?"":"Upload Current Progress"}),a.jsx("span",{className:"text-xs font-medium text-muted mt-1",children:t==="zh"?"()":"(Keep new progress, overwrite cloud backup)"}),e&&a.jsx("span",{className:"text-xs font-bold text-blue-500 dark:text-blue-400 mt-0.5",children:t==="zh"?`(${s(e.localTime)})`:`(Local Last Edit: ${s(e.localTime)})`})]})]}),a.jsx("div",{className:"h-px w-full bg-border my-2"}),a.jsxs("button",{onClick:()=>r("cancel"),className:"w-full flex items-center justify-center gap-3 px-6 py-3 rounded-lg font-medium text-red-500 hover:bg-red-500/10 transition-all border border-transparent",children:[a.jsx(Q5,{size:18}),a.jsx("span",{children:t==="zh"?" ()":"Cancel Login (Decide Later)"})]})]})]})})})};let Yx={},gS;function zp(r={}){Yx={animate:!0,allowClose:!0,overlayClickBehavior:"close",overlayOpacity:.7,smoothScroll:!1,disableActiveInteraction:!1,showProgress:!1,stagePadding:10,stageRadius:5,popoverOffset:10,showButtons:["next","previous","close"],disableButtons:[],overlayColor:"#000",...r}}function De(r){return r?Yx[r]:Yx}function Q6(r){gS=r}function Gs(){return gS}let yf={};function wh(r,e){yf[r]=e}function FA(r){var e;(e=yf[r])==null||e.call(yf)}function F6(){yf={}}function Bh(r,e,t,s){return(r/=s/2)<1?t/2*r*r+e:-t/2*(--r*(r-2)-1)+e}function pS(r){const e='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])';return r.flatMap(t=>{const s=t.matches(e),A=Array.from(t.querySelectorAll(e));return[...s?[t]:[],...A]}).filter(t=>getComputedStyle(t).pointerEvents!=="none"&&k6(t))}function xS(r){if(!r||D6(r))return;const e=De("smoothScroll"),t=r.offsetHeight>window.innerHeight;r.scrollIntoView({behavior:!e||I6(r)?"auto":"smooth",inline:"center",block:t?"start":"center"})}function I6(r){if(!r||!r.parentElement)return;const e=r.parentElement;return e.scrollHeight>e.clientHeight}function D6(r){const e=r.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}function k6(r){return!!(r.offsetWidth||r.offsetHeight||r.getClientRects().length)}let bf={};function Or(r,e){bf[r]=e}function Re(r){return r?bf[r]:bf}function y1(){bf={}}function R6(r,e,t,s){let A=Re("__activeStagePosition");const l=A||t.getBoundingClientRect(),d=s.getBoundingClientRect(),u=Bh(r,l.x,d.x-l.x,e),f=Bh(r,l.y,d.y-l.y,e),g=Bh(r,l.width,d.width-l.width,e),x=Bh(r,l.height,d.height-l.height,e);A={x:u,y:f,width:g,height:x},bS(A),Or("__activeStagePosition",A)}function yS(r){if(!r)return;const e=r.getBoundingClientRect(),t={x:e.x,y:e.y,width:e.width,height:e.height};Or("__activeStagePosition",t),bS(t)}function M6(){const r=Re("__activeStagePosition"),e=Re("__overlaySvg");if(!r)return;if(!e){console.warn("No stage svg found.");return}const t=window.innerWidth,s=window.innerHeight;e.setAttribute("viewBox",`0 0 ${t} ${s}`)}function L6(r){const e=H6(r);document.body.appendChild(e),BS(e,t=>{t.target.tagName==="path"&&FA("overlayClick")}),Or("__overlaySvg",e)}function bS(r){const e=Re("__overlaySvg");if(!e){L6(r);return}const t=e.firstElementChild;if(t?.tagName!=="path")throw new Error("no path element found in stage svg");t.setAttribute("d",vS(r))}function H6(r){const e=window.innerWidth,t=window.innerHeight,s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.classList.add("driver-overlay","driver-overlay-animated"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s.setAttribute("xmlSpace","preserve"),s.setAttribute("xmlnsXlink","http://www.w3.org/1999/xlink"),s.setAttribute("version","1.1"),s.setAttribute("preserveAspectRatio","xMinYMin slice"),s.style.fillRule="evenodd",s.style.clipRule="evenodd",s.style.strokeLinejoin="round",s.style.strokeMiterlimit="2",s.style.zIndex="10000",s.style.position="fixed",s.style.top="0",s.style.left="0",s.style.width="100%",s.style.height="100%";const A=document.createElementNS("http://www.w3.org/2000/svg","path");return A.setAttribute("d",vS(r)),A.style.fill=De("overlayColor")||"rgb(0,0,0)",A.style.opacity=`${De("overlayOpacity")}`,A.style.pointerEvents="auto",A.style.cursor="auto",s.appendChild(A),s}function vS(r){const e=window.innerWidth,t=window.innerHeight,s=De("stagePadding")||0,A=De("stageRadius")||0,l=r.width+s*2,d=r.height+s*2,u=Math.min(A,l/2,d/2),f=Math.floor(Math.max(u,0)),g=r.x-s+f,x=r.y-s,y=l-f*2,v=d-f*2;return`M${e},0L0,0L0,${t}L${e},${t}L${e},0Z
    M${g},${x} h${y} a${f},${f} 0 0 1 ${f},${f} v${v} a${f},${f} 0 0 1 -${f},${f} h-${y} a${f},${f} 0 0 1 -${f},-${f} v-${v} a${f},${f} 0 0 1 ${f},-${f} z`}function O6(){const r=Re("__overlaySvg");r&&r.remove()}function P6(){const r=document.getElementById("driver-dummy-element");if(r)return r;let e=document.createElement("div");return e.id="driver-dummy-element",e.style.width="0",e.style.height="0",e.style.pointerEvents="none",e.style.opacity="0",e.style.position="fixed",e.style.top="50%",e.style.left="50%",document.body.appendChild(e),e}function b1(r){const{element:e}=r;let t=typeof e=="function"?e():typeof e=="string"?document.querySelector(e):e;t||(t=P6()),z6(t,r)}function V6(){const r=Re("__activeElement"),e=Re("__activeStep");r&&(yS(r),M6(),ES(r,e))}function z6(r,e){var t;const s=Date.now(),A=Re("__activeStep"),l=Re("__activeElement")||r,d=!l||l===r,u=r.id==="driver-dummy-element",f=l.id==="driver-dummy-element",g=De("animate"),x=e.onHighlightStarted||De("onHighlightStarted"),y=e?.onHighlighted||De("onHighlighted"),v=A?.onDeselected||De("onDeselected"),N=De(),R=Re();!d&&v&&v(f?void 0:l,A,{config:N,state:R,driver:Gs()}),x&&x(u?void 0:r,e,{config:N,state:R,driver:Gs()});const S=!d&&g;let P=!1;$6(),Or("previousStep",A),Or("previousElement",l),Or("activeStep",e),Or("activeElement",r);const V=()=>{if(Re("__transitionCallback")!==V)return;const $=Date.now()-s,G=400-$<=400/2;e.popover&&G&&!P&&S&&(v1(r,e),P=!0),De("animate")&&$<400?R6($,400,l,r):(yS(r),y&&y(u?void 0:r,e,{config:De(),state:Re(),driver:Gs()}),Or("__transitionCallback",void 0),Or("__previousStep",A),Or("__previousElement",l),Or("__activeStep",e),Or("__activeElement",r)),window.requestAnimationFrame(V)};Or("__transitionCallback",V),window.requestAnimationFrame(V),xS(r),!S&&e.popover&&v1(r,e),l.classList.remove("driver-active-element","driver-no-interaction"),l.removeAttribute("aria-haspopup"),l.removeAttribute("aria-expanded"),l.removeAttribute("aria-controls"),((t=e.disableActiveInteraction)!=null?t:De("disableActiveInteraction"))&&r.classList.add("driver-no-interaction"),r.classList.add("driver-active-element"),r.setAttribute("aria-haspopup","dialog"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-controls","driver-popover-content")}function K6(){var r;(r=document.getElementById("driver-dummy-element"))==null||r.remove(),document.querySelectorAll(".driver-active-element").forEach(e=>{e.classList.remove("driver-active-element","driver-no-interaction"),e.removeAttribute("aria-haspopup"),e.removeAttribute("aria-expanded"),e.removeAttribute("aria-controls")})}function Ad(){const r=Re("__resizeTimeout");r&&window.cancelAnimationFrame(r),Or("__resizeTimeout",window.requestAnimationFrame(V6))}function G6(r){var e;if(!Re("isInitialized")||!(r.key==="Tab"||r.keyCode===9))return;const t=Re("__activeElement"),s=(e=Re("popover"))==null?void 0:e.wrapper,A=pS([...s?[s]:[],...t?[t]:[]]),l=A[0],d=A[A.length-1];if(r.preventDefault(),r.shiftKey){const u=A[A.indexOf(document.activeElement)-1]||d;u?.focus()}else{const u=A[A.indexOf(document.activeElement)+1]||l;u?.focus()}}function wS(r){var e;((e=De("allowKeyboardControl"))==null||e)&&(r.key==="Escape"?FA("escapePress"):r.key==="ArrowRight"?FA("arrowRightPress"):r.key==="ArrowLeft"&&FA("arrowLeftPress"))}function BS(r,e,t){const s=(A,l)=>{const d=A.target;r.contains(d)&&((!t||t(d))&&(A.preventDefault(),A.stopPropagation(),A.stopImmediatePropagation()),l?.(A))};document.addEventListener("pointerdown",s,!0),document.addEventListener("mousedown",s,!0),document.addEventListener("pointerup",s,!0),document.addEventListener("mouseup",s,!0),document.addEventListener("click",A=>{s(A,e)},!0)}function q6(){window.addEventListener("keyup",wS,!1),window.addEventListener("keydown",G6,!1),window.addEventListener("resize",Ad),window.addEventListener("scroll",Ad)}function Y6(){window.removeEventListener("keyup",wS),window.removeEventListener("resize",Ad),window.removeEventListener("scroll",Ad)}function $6(){const r=Re("popover");r&&(r.wrapper.style.display="none")}function v1(r,e){var t,s;let A=Re("popover");A&&document.body.removeChild(A.wrapper),A=J6(),document.body.appendChild(A.wrapper);const{title:l,description:d,showButtons:u,disableButtons:f,showProgress:g,nextBtnText:x=De("nextBtnText")||"Next &rarr;",prevBtnText:y=De("prevBtnText")||"&larr; Previous",progressText:v=De("progressText")||"{current} of {total}"}=e.popover||{};A.nextButton.innerHTML=x,A.previousButton.innerHTML=y,A.progress.innerHTML=v,l?(A.title.innerHTML=l,A.title.style.display="block"):A.title.style.display="none",d?(A.description.innerHTML=d,A.description.style.display="block"):A.description.style.display="none";const N=u||De("showButtons"),R=g||De("showProgress")||!1,S=N?.includes("next")||N?.includes("previous")||R;A.closeButton.style.display=N.includes("close")?"block":"none",S?(A.footer.style.display="flex",A.progress.style.display=R?"block":"none",A.nextButton.style.display=N.includes("next")?"block":"none",A.previousButton.style.display=N.includes("previous")?"block":"none"):A.footer.style.display="none";const P=f||De("disableButtons")||[];P!=null&&P.includes("next")&&(A.nextButton.disabled=!0,A.nextButton.classList.add("driver-popover-btn-disabled")),P!=null&&P.includes("previous")&&(A.previousButton.disabled=!0,A.previousButton.classList.add("driver-popover-btn-disabled")),P!=null&&P.includes("close")&&(A.closeButton.disabled=!0,A.closeButton.classList.add("driver-popover-btn-disabled"));const V=A.wrapper;V.style.display="block",V.style.left="",V.style.top="",V.style.bottom="",V.style.right="",V.id="driver-popover-content",V.setAttribute("role","dialog"),V.setAttribute("aria-labelledby","driver-popover-title"),V.setAttribute("aria-describedby","driver-popover-description");const $=A.arrow;$.className="driver-popover-arrow";const G=((t=e.popover)==null?void 0:t.popoverClass)||De("popoverClass")||"";V.className=`driver-popover ${G}`.trim(),BS(A.wrapper,E=>{var j,B,I;const _=E.target,Q=((j=e.popover)==null?void 0:j.onNextClick)||De("onNextClick"),U=((B=e.popover)==null?void 0:B.onPrevClick)||De("onPrevClick"),T=((I=e.popover)==null?void 0:I.onCloseClick)||De("onCloseClick");if(_.closest(".driver-popover-next-btn"))return Q?Q(r,e,{config:De(),state:Re(),driver:Gs()}):FA("nextClick");if(_.closest(".driver-popover-prev-btn"))return U?U(r,e,{config:De(),state:Re(),driver:Gs()}):FA("prevClick");if(_.closest(".driver-popover-close-btn"))return T?T(r,e,{config:De(),state:Re(),driver:Gs()}):FA("closeClick")},E=>!(A!=null&&A.description.contains(E))&&!(A!=null&&A.title.contains(E))&&typeof E.className=="string"&&E.className.includes("driver-popover")),Or("popover",A);const K=((s=e.popover)==null?void 0:s.onPopoverRender)||De("onPopoverRender");K&&K(A,{config:De(),state:Re(),driver:Gs()}),ES(r,e),xS(V);const Y=r.classList.contains("driver-dummy-element"),q=pS([V,...Y?[]:[r]]);q.length>0&&q[0].focus()}function CS(){const r=Re("popover");if(!(r!=null&&r.wrapper))return;const e=r.wrapper.getBoundingClientRect(),t=De("stagePadding")||0,s=De("popoverOffset")||0;return{width:e.width+t+s,height:e.height+t+s,realWidth:e.width,realHeight:e.height}}function w1(r,e){const{elementDimensions:t,popoverDimensions:s,popoverPadding:A,popoverArrowDimensions:l}=e;return r==="start"?Math.max(Math.min(t.top-A,window.innerHeight-s.realHeight-l.width),l.width):r==="end"?Math.max(Math.min(t.top-s?.realHeight+t.height+A,window.innerHeight-s?.realHeight-l.width),l.width):r==="center"?Math.max(Math.min(t.top+t.height/2-s?.realHeight/2,window.innerHeight-s?.realHeight-l.width),l.width):0}function B1(r,e){const{elementDimensions:t,popoverDimensions:s,popoverPadding:A,popoverArrowDimensions:l}=e;return r==="start"?Math.max(Math.min(t.left-A,window.innerWidth-s.realWidth-l.width),l.width):r==="end"?Math.max(Math.min(t.left-s?.realWidth+t.width+A,window.innerWidth-s?.realWidth-l.width),l.width):r==="center"?Math.max(Math.min(t.left+t.width/2-s?.realWidth/2,window.innerWidth-s?.realWidth-l.width),l.width):0}function ES(r,e){const t=Re("popover");if(!t)return;const{align:s="start",side:A="left"}=e?.popover||{},l=s,d=r.id==="driver-dummy-element"?"over":A,u=De("stagePadding")||0,f=CS(),g=t.arrow.getBoundingClientRect(),x=r.getBoundingClientRect(),y=x.top-f.height;let v=y>=0;const N=window.innerHeight-(x.bottom+f.height);let R=N>=0;const S=x.left-f.width;let P=S>=0;const V=window.innerWidth-(x.right+f.width);let $=V>=0;const G=!v&&!R&&!P&&!$;let K=d;if(d==="top"&&v?$=P=R=!1:d==="bottom"&&R?$=P=v=!1:d==="left"&&P?$=v=R=!1:d==="right"&&$&&(P=v=R=!1),d==="over"){const Y=window.innerWidth/2-f.realWidth/2,q=window.innerHeight/2-f.realHeight/2;t.wrapper.style.left=`${Y}px`,t.wrapper.style.right="auto",t.wrapper.style.top=`${q}px`,t.wrapper.style.bottom="auto"}else if(G){const Y=window.innerWidth/2-f?.realWidth/2,q=10;t.wrapper.style.left=`${Y}px`,t.wrapper.style.right="auto",t.wrapper.style.bottom=`${q}px`,t.wrapper.style.top="auto"}else if(P){const Y=Math.min(S,window.innerWidth-f?.realWidth-g.width),q=w1(l,{elementDimensions:x,popoverDimensions:f,popoverPadding:u,popoverArrowDimensions:g});t.wrapper.style.left=`${Y}px`,t.wrapper.style.top=`${q}px`,t.wrapper.style.bottom="auto",t.wrapper.style.right="auto",K="left"}else if($){const Y=Math.min(V,window.innerWidth-f?.realWidth-g.width),q=w1(l,{elementDimensions:x,popoverDimensions:f,popoverPadding:u,popoverArrowDimensions:g});t.wrapper.style.right=`${Y}px`,t.wrapper.style.top=`${q}px`,t.wrapper.style.bottom="auto",t.wrapper.style.left="auto",K="right"}else if(v){const Y=Math.min(y,window.innerHeight-f.realHeight-g.width);let q=B1(l,{elementDimensions:x,popoverDimensions:f,popoverPadding:u,popoverArrowDimensions:g});t.wrapper.style.top=`${Y}px`,t.wrapper.style.left=`${q}px`,t.wrapper.style.bottom="auto",t.wrapper.style.right="auto",K="top"}else if(R){const Y=Math.min(N,window.innerHeight-f?.realHeight-g.width);let q=B1(l,{elementDimensions:x,popoverDimensions:f,popoverPadding:u,popoverArrowDimensions:g});t.wrapper.style.left=`${q}px`,t.wrapper.style.bottom=`${Y}px`,t.wrapper.style.top="auto",t.wrapper.style.right="auto",K="bottom"}G?t.arrow.classList.add("driver-popover-arrow-none"):X6(l,K,r)}function X6(r,e,t){const s=Re("popover");if(!s)return;const A=t.getBoundingClientRect(),l=CS(),d=s.arrow,u=l.width,f=window.innerWidth,g=A.width,x=A.left,y=l.height,v=window.innerHeight,N=A.top,R=A.height;d.className="driver-popover-arrow";let S=e,P=r;if(e==="top"?(x+g<=0?(S="right",P="end"):x+g-u<=0&&(S="top",P="start"),x>=f?(S="left",P="end"):x+u>=f&&(S="top",P="end")):e==="bottom"?(x+g<=0?(S="right",P="start"):x+g-u<=0&&(S="bottom",P="start"),x>=f?(S="left",P="start"):x+u>=f&&(S="bottom",P="end")):e==="left"?(N+R<=0?(S="bottom",P="end"):N+R-y<=0&&(S="left",P="start"),N>=v?(S="top",P="end"):N+y>=v&&(S="left",P="end")):e==="right"&&(N+R<=0?(S="bottom",P="start"):N+R-y<=0&&(S="right",P="start"),N>=v?(S="top",P="start"):N+y>=v&&(S="right",P="end")),!S)d.classList.add("driver-popover-arrow-none");else{d.classList.add(`driver-popover-arrow-side-${S}`),d.classList.add(`driver-popover-arrow-align-${P}`);const V=t.getBoundingClientRect(),$=d.getBoundingClientRect(),G=De("stagePadding")||0,K=V.left-G<window.innerWidth&&V.right+G>0&&V.top-G<window.innerHeight&&V.bottom+G>0;e==="bottom"&&K&&($.x>V.x&&$.x+$.width<V.x+V.width?s.wrapper.style.transform="translateY(0)":(d.classList.remove(`driver-popover-arrow-align-${P}`),d.classList.add("driver-popover-arrow-none"),s.wrapper.style.transform=`translateY(-${G/2}px)`))}}function J6(){const r=document.createElement("div");r.classList.add("driver-popover");const e=document.createElement("div");e.classList.add("driver-popover-arrow");const t=document.createElement("header");t.id="driver-popover-title",t.classList.add("driver-popover-title"),t.style.display="none",t.innerText="Popover Title";const s=document.createElement("div");s.id="driver-popover-description",s.classList.add("driver-popover-description"),s.style.display="none",s.innerText="Popover description is here";const A=document.createElement("button");A.type="button",A.classList.add("driver-popover-close-btn"),A.setAttribute("aria-label","Close"),A.innerHTML="&times;";const l=document.createElement("footer");l.classList.add("driver-popover-footer");const d=document.createElement("span");d.classList.add("driver-popover-progress-text"),d.innerText="";const u=document.createElement("span");u.classList.add("driver-popover-navigation-btns");const f=document.createElement("button");f.type="button",f.classList.add("driver-popover-prev-btn"),f.innerHTML="&larr; Previous";const g=document.createElement("button");return g.type="button",g.classList.add("driver-popover-next-btn"),g.innerHTML="Next &rarr;",u.appendChild(f),u.appendChild(g),l.appendChild(d),l.appendChild(u),r.appendChild(A),r.appendChild(e),r.appendChild(t),r.appendChild(s),r.appendChild(l),{wrapper:r,arrow:e,title:t,description:s,footer:l,previousButton:f,nextButton:g,closeButton:A,footerButtons:u,progress:d}}function W6(){var r;const e=Re("popover");e&&((r=e.wrapper.parentElement)==null||r.removeChild(e.wrapper))}function Z6(r={}){zp(r);function e(){De("allowClose")&&x()}function t(){const v=De("overlayClickBehavior");if(De("allowClose")&&v==="close"){x();return}if(typeof v=="function"){const N=Re("__activeStep"),R=Re("__activeElement");v(R,N,{config:De(),state:Re(),driver:Gs()});return}v==="nextStep"&&s()}function s(){const v=Re("activeIndex"),N=De("steps")||[];if(typeof v>"u")return;const R=v+1;N[R]?g(R):x()}function A(){const v=Re("activeIndex"),N=De("steps")||[];if(typeof v>"u")return;const R=v-1;N[R]?g(R):x()}function l(v){(De("steps")||[])[v]?g(v):x()}function d(){var v;if(Re("__transitionCallback"))return;const N=Re("activeIndex"),R=Re("__activeStep"),S=Re("__activeElement");if(typeof N>"u"||typeof R>"u"||typeof Re("activeIndex")>"u")return;const P=((v=R.popover)==null?void 0:v.onPrevClick)||De("onPrevClick");if(P)return P(S,R,{config:De(),state:Re(),driver:Gs()});A()}function u(){var v;if(Re("__transitionCallback"))return;const N=Re("activeIndex"),R=Re("__activeStep"),S=Re("__activeElement");if(typeof N>"u"||typeof R>"u")return;const P=((v=R.popover)==null?void 0:v.onNextClick)||De("onNextClick");if(P)return P(S,R,{config:De(),state:Re(),driver:Gs()});s()}function f(){Re("isInitialized")||(Or("isInitialized",!0),document.body.classList.add("driver-active",De("animate")?"driver-fade":"driver-simple"),q6(),wh("overlayClick",t),wh("escapePress",e),wh("arrowLeftPress",d),wh("arrowRightPress",u))}function g(v=0){var N,R,S,P,V,$,G,K;const Y=De("steps");if(!Y){console.error("No steps to drive through"),x();return}if(!Y[v]){x();return}Or("__activeOnDestroyed",document.activeElement),Or("activeIndex",v);const q=Y[v],E=Y[v+1],j=Y[v-1],B=((N=q.popover)==null?void 0:N.doneBtnText)||De("doneBtnText")||"Done",I=De("allowClose"),_=typeof((R=q.popover)==null?void 0:R.showProgress)<"u"?(S=q.popover)==null?void 0:S.showProgress:De("showProgress"),Q=(((P=q.popover)==null?void 0:P.progressText)||De("progressText")||"{{current}} of {{total}}").replace("{{current}}",`${v+1}`).replace("{{total}}",`${Y.length}`),U=((V=q.popover)==null?void 0:V.showButtons)||De("showButtons"),T=["next","previous",...I?["close"]:[]].filter(z=>!(U!=null&&U.length)||U.includes(z)),W=(($=q.popover)==null?void 0:$.onNextClick)||De("onNextClick"),M=((G=q.popover)==null?void 0:G.onPrevClick)||De("onPrevClick"),F=((K=q.popover)==null?void 0:K.onCloseClick)||De("onCloseClick");b1({...q,popover:{showButtons:T,nextBtnText:E?void 0:B,disableButtons:[...j?[]:["previous"]],showProgress:_,progressText:Q,onNextClick:W||(()=>{E?g(v+1):x()}),onPrevClick:M||(()=>{g(v-1)}),onCloseClick:F||(()=>{x()}),...q?.popover||{}}})}function x(v=!0){const N=Re("__activeElement"),R=Re("__activeStep"),S=Re("__activeOnDestroyed"),P=De("onDestroyStarted");if(v&&P){const G=!N||N?.id==="driver-dummy-element";P(G?void 0:N,R,{config:De(),state:Re(),driver:Gs()});return}const V=R?.onDeselected||De("onDeselected"),$=De("onDestroyed");if(document.body.classList.remove("driver-active","driver-fade","driver-simple"),Y6(),W6(),K6(),O6(),F6(),y1(),N&&R){const G=N.id==="driver-dummy-element";V&&V(G?void 0:N,R,{config:De(),state:Re(),driver:Gs()}),$&&$(G?void 0:N,R,{config:De(),state:Re(),driver:Gs()})}S&&S.focus()}const y={isActive:()=>Re("isInitialized")||!1,refresh:Ad,drive:(v=0)=>{f(),g(v)},setConfig:zp,setSteps:v=>{y1(),zp({...De(),steps:v})},getConfig:De,getState:Re,getActiveIndex:()=>Re("activeIndex"),isFirstStep:()=>Re("activeIndex")===0,isLastStep:()=>{const v=De("steps")||[],N=Re("activeIndex");return N!==void 0&&N===v.length-1},getActiveStep:()=>Re("activeStep"),getActiveElement:()=>Re("activeElement"),getPreviousElement:()=>Re("previousElement"),getPreviousStep:()=>Re("previousStep"),moveNext:s,movePrevious:A,moveTo:l,hasNextStep:()=>{const v=De("steps")||[],N=Re("activeIndex");return N!==void 0&&!!v[N+1]},hasPreviousStep:()=>{const v=De("steps")||[],N=Re("activeIndex");return N!==void 0&&!!v[N-1]},highlight:v=>{f(),b1({...v,popover:v.popover?{showButtons:[],showProgress:!1,progressText:"",...v.popover}:void 0})},destroy:()=>{x(!1)}};return Q6(y),y}const eP=({onOpenAddCourse:r,onCloseAddCourse:e,onOpenSchedule:t,onCloseSchedule:s,onSwitchToPlanner:A,onSwitchToTracker:l,onTutorialStart:d,onTutorialEnd:u})=>{const{t:f}=At();return k.useEffect(()=>{const x=document.createElement("style");return x.innerHTML=`
            /* Keyframes for Pop-In Animation */
            @keyframes driverPopIn {
                0% { opacity: 0; transform: scale(0.95) translateY(10px); }
                100% { opacity: 1; transform: scale(1) translateY(0); }
            }

            /* Keyframes for Active Element Beacon */
            @keyframes driverBeaconPulse {
                0% { box-shadow: 0 0 0 0 rgba(6, 182, 212, 0.7); border-color: rgba(6, 182, 212, 1); }
                70% { box-shadow: 0 0 0 10px rgba(6, 182, 212, 0); border-color: rgba(6, 182, 212, 0.5); }
                100% { box-shadow: 0 0 0 0 rgba(6, 182, 212, 0); border-color: rgba(6, 182, 212, 0.2); }
            }

            /* Premium Glassmorphism Popover Theme */
            .driver-popover.driverjs-theme {
                background: rgba(23, 23, 23, 0.85); /* Slightly translucent dark */
                backdrop-filter: blur(16px);
                -webkit-backdrop-filter: blur(16px);
                color: var(--color-text);
                border: 1px solid rgba(255, 255, 255, 0.1);
                box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.6), 0 0 0 1px rgba(255,255,255,0.05) inset;
                border-radius: 16px;
                padding: 24px;
                animation: driverPopIn 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
                z-index: 2147483647 !important; /* Ensure it stays above everything */
            }
            .driver-popover.driverjs-theme .driver-popover-title {
                color: var(--color-text);
                font-size: 1.25rem;
                font-weight: 800;
                margin-bottom: 12px;
                background: linear-gradient(to right, #38bdf8, #818cf8);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                letter-spacing: -0.02em;
            }
            .driver-popover.driverjs-theme .driver-popover-description {
                color: rgba(255, 255, 255, 0.8);
                font-size: 0.95rem;
                line-height: 1.6;
            }
            
            /* Buttons */
            .driver-popover.driverjs-theme button {
                flex: 1;
                text-align: center;
                border-radius: 9999px; /* Pill shape */
                font-weight: 700;
                padding: 10px 16px;
                font-size: 0.85rem;
                transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
            }
            
            /* Next/Done Button */
            .driver-popover.driverjs-theme .driver-popover-next-btn,
            .driver-popover.driverjs-theme .driver-popover-prev-btn {
                text-shadow: none;
            }
            .driver-popover.driverjs-theme .driver-popover-next-btn {
                background: linear-gradient(135deg, #0ea5e9, #6366f1);
                color: white;
                border: none;
                box-shadow: 0 4px 14px 0 rgba(14, 165, 233, 0.39);
            }
            .driver-popover.driverjs-theme .driver-popover-next-btn:hover {
                transform: translateY(-1px);
                box-shadow: 0 6px 20px rgba(14, 165, 233, 0.5);
                background: linear-gradient(135deg, #0284c7, #4f46e5);
            }

            /* Previous Button */
            .driver-popover.driverjs-theme .driver-popover-prev-btn {
                 background-color: rgba(255, 255, 255, 0.1);
                 border: 1px solid rgba(255, 255, 255, 0.05);
                 color: rgba(255, 255, 255, 0.8);
            }
            .driver-popover.driverjs-theme .driver-popover-prev-btn:hover {
                 background-color: rgba(255, 255, 255, 0.15);
                 color: white;
            }

            /* Skip Button - Styled as "Close" */
            .driver-popover.driverjs-theme .driver-popover-close-btn {
                text-decoration: none;
                color: rgba(255, 255, 255, 0.5);
                background: rgba(255, 255, 255, 0.05);
                border: 1px solid rgba(255, 255, 255, 0.05);
                padding: 4px 8px;
                font-size: 0.75rem;
                font-weight: 600;
                border-radius: 6px;
                position: absolute;
                top: 16px;
                right: 16px;
                display: block !important;
                flex: none;
                width: auto;
                transition: all 0.2s;
            }
            .driver-popover.driverjs-theme .driver-popover-close-btn:hover {
                color: white;
                background: rgba(239, 68, 68, 0.2); /* Soft red hover */
                border-color: rgba(239, 68, 68, 0.5);
                transform: scale(1.05);
            }

            /* Navigation Footer Layout */
            .driver-popover.driverjs-theme .driver-popover-footer {
                margin-top: 20px;
                display: flex;
                gap: 12px;
                justify-content: space-between;
                align-items: center;
            }
            
            /* Premium Active Element Highlighter (Beacon Pulse) */
            .driver-active-element {
                border: 2px solid rgba(6, 182, 212, 1) !important;
                border-radius: 8px !important; /* Slightly round the actual element */
                animation: driverBeaconPulse 2s infinite cubic-bezier(0.66, 0, 0, 1) !important;
                z-index: 2147483646 !important; /* One level below the popover */
                position: relative !important;
            }
            
            /* Driver overlay base adjustments */
            #driver-page-overlay {
                backdrop-filter: blur(2px); /* Slight background blur behind cutout */
                -webkit-backdrop-filter: blur(2px);
                background-color: rgba(0, 0, 0, 0.6) !important; /* Darker overlay */
            }

            /* Disable interactions with the app while tutorial is running */
            body.tutorial-running #root {
                pointer-events: none !important;
                user-select: none !important;
            }
            
            /* Explicitly disable interaction on the highlighted element itself */
            .driver-active-element,
            .driver-active-element * {
                pointer-events: none !important; 
            }

            /* Ensure the driver popover remains interactive */
            .driver-popover.driverjs-theme {
                pointer-events: auto !important;
            }
        `,document.head.appendChild(x),()=>{document.head.removeChild(x)}},[]),{startTutorial:()=>{const x=(v,N)=>{const R=()=>{document.querySelector(v)?N():requestAnimationFrame(R)};R()},y=Z6({showProgress:!0,animate:!0,popoverClass:"driverjs-theme",stagePadding:8,stageRadius:10,popoverOffset:16,nextBtnText:f.tutorial.next,prevBtnText:f.tutorial.prev,doneBtnText:f.tutorial.done,showButtons:["next","previous","close"],onHighlightStarted:()=>{document.body.classList.add("tutorial-running"),d&&d()},onDestroyed:()=>{document.body.classList.remove("tutorial-running"),e(),s(),u&&u()},onNextClick:(v,N,R)=>{const S=N.element;S==="#header-add-course"?(r(),x("#btn-import-catalog",()=>{y.moveNext()})):S==="#btn-import-catalog"?(e(),setTimeout(()=>{y.moveNext()},100)):S==="#schedule-grade-btn"?(t(),x("#schedule-visual-grid",()=>{y.moveNext()})):S==="#schedule-list"?(s(),setTimeout(()=>{y.moveNext()},100)):S==="#header-settings"?(A(),x("#planner-draft-board",()=>{y.moveNext()})):S==="#planner-search-panel"?(l(),x("#header-add-course",()=>{y.moveNext()})):y.moveNext()},onPrevClick:(v,N,R)=>{const S=N.element;S==="#btn-import-catalog"?(e(),setTimeout(()=>{y.movePrevious()},100)):S==="#semester-view-section"?(r(),x("#btn-import-catalog",()=>{y.movePrevious()})):S==="#schedule-visual-grid"?(s(),setTimeout(()=>{y.movePrevious()},100)):S==="#dashboard-section"?(t(),x("#schedule-list",()=>{y.movePrevious()})):S==="#planner-draft-board"?(l(),setTimeout(()=>{y.movePrevious()},100)):S==="#header-add-course"?(A(),x("#planner-search-panel",()=>{y.movePrevious()})):y.movePrevious()},steps:[{element:"#header-title",popover:{title:f.tutorial.welcome.title,description:f.tutorial.welcome.desc}},{element:"#mode-switcher",popover:{title:f.tutorial.modeSwitcher.title,description:f.tutorial.modeSwitcher.desc}},{element:"#header-settings",popover:{title:f.tutorial.settings.title,description:f.tutorial.settings.desc}},{element:"#planner-draft-board",popover:{title:f.tutorial.plannerBoard.title,description:f.tutorial.plannerBoard.desc}},{element:"#planner-search-panel",popover:{title:f.tutorial.plannerSearch.title,description:f.tutorial.plannerSearch.desc}},{element:"#header-add-course",popover:{title:f.tutorial.addCourse.title,description:f.tutorial.addCourse.desc}},{element:"#btn-import-catalog",popover:{title:f.tutorial.catalogFeature.title,description:f.tutorial.catalogFeature.desc}},{element:"#semester-view-section",popover:{title:f.tutorial.coursePlan.title,description:f.tutorial.coursePlan.desc}},{element:"#schedule-grade-btn",popover:{title:f.tutorial.scheduleGrade.title,description:f.tutorial.scheduleGrade.desc}},{element:"#schedule-visual-grid",popover:{title:f.tutorial.scheduleGrid.title,description:f.tutorial.scheduleGrid.desc}},{element:"#schedule-list",popover:{title:f.tutorial.scheduleList.title,description:f.tutorial.scheduleList.desc}},{element:"#dashboard-section",popover:{title:f.tutorial.dashboard.title,description:f.tutorial.dashboard.desc}},{element:"#header-data-controls",popover:{title:f.tutorial.dataSafety.title,description:f.tutorial.dataSafety.desc}},{element:"#header-history",popover:{title:f.tutorial.history.title,description:f.tutorial.history.desc}},{element:"#header-support",popover:{title:f.tutorial.support.title,description:f.tutorial.support.desc}}]});y.drive()}}},tP=(r,e)=>{let t=e.filter(d=>d.name===r.name);if(t.length===0){const d=r.name.toLowerCase(),u=e.filter(f=>{const g=f.name.toLowerCase();return g.includes(d)||d.includes(g)});u.length>0&&(t=u)}if(t.length===0)return{match:null,candidates:[],ambiguity:!1};if(t.length===1)return{match:t[0],candidates:t,ambiguity:!1};const s=t.filter(d=>!!d.english==!!r.isEMI);if(s.length>0&&s.length<t.length&&(t=s),t.length===1)return{match:t[0],candidates:t,ambiguity:!1};const l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].indexOf(r.day||"");if(l!==-1&&r.startTime){const d=l===0?6:l-1,u=t.filter(f=>{if(!Array.isArray(f.classTime))return!1;const g=f.classTime[d];return!(!g||g.length===0)});u.length>0&&(t=u)}return t.length===1?{match:t[0],candidates:t,ambiguity:!1}:{match:null,candidates:t,ambiguity:!0}},C1="nsysu-course-pool",rP=r=>{const[e,t]=k.useState(()=>{const s=localStorage.getItem(C1);return s?JSON.parse(s):[]});return k.useEffect(()=>{t(r),localStorage.setItem(C1,JSON.stringify(r))},[r]),{pool:e}},Lo=r=>{const e=JSON.parse(localStorage.getItem("nsysu-micro-credits-data")||"null"),t=JSON.parse(localStorage.getItem("nsysu-interdisciplinary-teacher-education-data")||"null"),s=JSON.parse(localStorage.getItem("nsysu-interdisciplinary-double-major-data")||"null"),A=JSON.parse(localStorage.getItem("nsysu-interdisciplinary-cross-disciplinary-data")||"null"),l=JSON.parse(localStorage.getItem("nsysu-diverse-learning-data")||"null"),d=JSON.parse(localStorage.getItem("nsysu-interdisciplinary-course-9-data")||"null"),u=JSON.parse(localStorage.getItem("nsysu-interdisciplinary-minor-data")||"null"),f=y=>{if(!y)return null;const v={...y};return v.proofFile!==void 0&&delete v.proofFile,v.proofBase64!==void 0&&delete v.proofBase64,v.proof!==void 0&&delete v.proof,v.hasProof=!!v.proofFileName,v},g={};for(let y=1;y<=10;y++){const v=`nsysu-interdisciplinary-item-${y}-notes`,N=localStorage.getItem(v);N&&(g[v]=N)}const x=Date.now();return localStorage.setItem("nsysu-cloud-sync-last-local-update",String(x)),{localUpdatedAt:x,settings:{studentClass:localStorage.getItem("nsysu-student-class"),graduationCredits:JSON.parse(localStorage.getItem("nsysu-grad-credits")||"128"),major:localStorage.getItem("nsysu-major"),entranceYear:Number(localStorage.getItem("nsysu-entrance-year"))||113},labels:{library:JSON.parse(localStorage.getItem("nsysu-labels-library")||"null"),map:JSON.parse(localStorage.getItem("nsysu-course-labels")||"null")},courses:r,semesters:JSON.parse(localStorage.getItem("nsysu-semesters")||"null"),plannerDraft:JSON.parse(localStorage.getItem("nsysu-planner-draft")||"[]"),plannerLastExportSemester:localStorage.getItem("nsysu-planner-last-export-semester")||null,interdisciplinaryStatus:JSON.parse(localStorage.getItem("nsysu-interdisciplinary-status")||"{}"),minorData:f(u),microCreditsData:f(e),teacherEducationData:f(t),doubleMajorData:f(s),crossDisciplinaryData:f(A),diverseLearningData:f(l),interdisciplinaryCourseData:f(d),interdisciplinaryNotes:g}},Ch=r=>{if(r){window.__nsysu_pause_sync_events=!0;try{r.courses&&Array.isArray(r.courses)&&localStorage.setItem("nsysu-courses",JSON.stringify(r.courses)),r.semesters&&localStorage.setItem("nsysu-semesters",JSON.stringify(r.semesters)),r.settings&&(r.settings.studentClass&&localStorage.setItem("nsysu-student-class",r.settings.studentClass),r.settings.graduationCredits&&localStorage.setItem("nsysu-grad-credits",JSON.stringify(r.settings.graduationCredits)),r.settings.major&&localStorage.setItem("nsysu-major",r.settings.major),r.settings.entranceYear&&localStorage.setItem("nsysu-entrance-year",String(r.settings.entranceYear))),r.labels&&(r.labels.library&&localStorage.setItem("nsysu-labels-library",JSON.stringify(r.labels.library)),r.labels.map&&localStorage.setItem("nsysu-course-labels",JSON.stringify(r.labels.map))),r.plannerDraft&&localStorage.setItem("nsysu-planner-draft",JSON.stringify(r.plannerDraft)),r.plannerLastExportSemester&&localStorage.setItem("nsysu-planner-last-export-semester",r.plannerLastExportSemester),r.interdisciplinaryStatus&&localStorage.setItem("nsysu-interdisciplinary-status",JSON.stringify(r.interdisciplinaryStatus)),r.minorData&&localStorage.setItem("nsysu-interdisciplinary-minor-data",JSON.stringify(r.minorData)),r.microCreditsData&&localStorage.setItem("nsysu-micro-credits-data",JSON.stringify(r.microCreditsData)),r.teacherEducationData&&localStorage.setItem("nsysu-interdisciplinary-teacher-education-data",JSON.stringify(r.teacherEducationData)),r.doubleMajorData&&localStorage.setItem("nsysu-interdisciplinary-double-major-data",JSON.stringify(r.doubleMajorData)),r.crossDisciplinaryData&&localStorage.setItem("nsysu-interdisciplinary-cross-disciplinary-data",JSON.stringify(r.crossDisciplinaryData)),r.diverseLearningData&&localStorage.setItem("nsysu-diverse-learning-data",JSON.stringify(r.diverseLearningData)),r.interdisciplinaryCourseData&&localStorage.setItem("nsysu-interdisciplinary-course-9-data",JSON.stringify(r.interdisciplinaryCourseData)),r.interdisciplinaryNotes&&Object.entries(r.interdisciplinaryNotes).forEach(([e,t])=>{localStorage.setItem(e,t)})}finally{window.__nsysu_pause_sync_events=!1}sessionStorage.setItem("cloud-synced","true")}};function sP(r,e){const{user:t,logout:s}=Bd(),[A,l]=k.useState("idle"),[d,u]=k.useState(!1),[f,g]=k.useState(null),[x,y]=k.useState(null),[v,N]=k.useState(0),R=k.useRef(!0),S=k.useRef(!1);return k.useEffect(()=>{if(!window.__nsysu_proxy_installed){const Y=localStorage.setItem;localStorage.setItem=function(E,j){Y.apply(this,[E,j]);const B=E==="nsysu-cloud-sync-last-local-update"||E==="nsysu-local-state-modified-at"||E==="nsysu-last-synced-cloud-time"||E==="nsysu-view-mode"||E==="nsysu-tracker-scroll"||E==="nsysu-setup-reminder-seen";E.startsWith("nsysu-")&&!B&&!window.__nsysu_pause_sync_events&&(Y.apply(localStorage,["nsysu-local-state-modified-at",String(Date.now())]),window.dispatchEvent(new Event("nsysu-local-storage-update")))};const q=localStorage.removeItem;localStorage.removeItem=function(E){q.apply(this,[E]);const j=E==="nsysu-cloud-sync-last-local-update"||E==="nsysu-local-state-modified-at"||E==="nsysu-last-synced-cloud-time"||E==="nsysu-view-mode"||E==="nsysu-tracker-scroll"||E==="nsysu-setup-reminder-seen";E.startsWith("nsysu-")&&!j&&!window.__nsysu_pause_sync_events&&(Y.apply(localStorage,["nsysu-local-state-modified-at",String(Date.now())]),window.dispatchEvent(new Event("nsysu-local-storage-update")))},window.__nsysu_proxy_installed=!0}const K=()=>{N(Y=>Y+1)};return window.addEventListener("nsysu-local-storage-update",K),()=>window.removeEventListener("nsysu-local-storage-update",K)},[]),k.useEffect(()=>{if(!t){l("idle"),u(!1),R.current=!0;return}(async()=>{try{if(sessionStorage.getItem("cloud-synced")==="true"){sessionStorage.removeItem("cloud-synced"),l("synced"),S.current=!0,R.current=!1;return}const q=Uo(Mo,"users",t.uid),E=await WB(q);if(E.exists()){const j=E.data();if(j.termsAccepted!==!0){u(!0),l("idle");return}if(j.data){const B=localStorage.getItem("nsysu-cloud-sync-last-local-update"),I=B?parseInt(B,10):0,_=localStorage.getItem("nsysu-local-state-modified-at"),Q=_?parseInt(_,10):0,U=localStorage.getItem("nsysu-last-synced-cloud-time"),T=U?parseInt(U,10):0,W=j.lastUpdatedAt||0,M=Math.max(I,Q),F=r.length,z=j.data.courses?.length||0;if(F===0){console.log("Local is empty. Downloading from cloud safely..."),S.current=!0,localStorage.setItem("nsysu-last-synced-cloud-time",String(W)),Ch(j.data),j.data.courses&&e(j.data.courses),window.location.reload();return}if(z===0){console.log("Cloud courses are empty. Pushing local changes to cloud safely...");const ne=Lo(r),te=Date.now();await yA(q,{email:t.email,displayName:t.displayName,lastUpdatedAt:te,data:ne},{merge:!0}),localStorage.setItem("nsysu-last-synced-cloud-time",String(te)),l("synced")}if(F>0&&z>0)if(M>W&&T===W){if(z>0&&(F===0||z-F>=5)){console.log(` Mass Deletion Protection Triggered! Local: ${F} vs Cloud: ${z}`),g(j.data),y({localTime:M,cloudTime:W}),l("conflict");return}console.log("Valid offline edit detected (Anchor matches). Pushing to cloud...");const te=Lo(r),O=Date.now();await yA(q,{email:t.email,displayName:t.displayName,lastUpdatedAt:O,data:te},{merge:!0}),localStorage.setItem("nsysu-last-synced-cloud-time",String(O))}else if(W>M&&M<=T){console.log("Cloud is newer and local is untouched since last sync. Downloading from cloud..."),S.current=!0,localStorage.setItem("nsysu-last-synced-cloud-time",String(W)),Ch(j.data),j.data.courses&&e(j.data.courses),window.location.reload();return}else{console.log(` Conflict detected! Anchor: ${T}, Cloud: ${W}, Local Edit: ${M}`),g(j.data),y({localTime:M,cloudTime:W}),l("conflict");return}}else{console.log("Cloud has no data, pushing local changes to cloud safely...");const B=Lo(r),I=Date.now();await yA(q,{email:t.email,displayName:t.displayName,lastUpdatedAt:I,data:B},{merge:!0}),localStorage.setItem("nsysu-last-synced-cloud-time",String(I))}}else{u(!0),l("idle");return}l("synced")}catch(Y){console.error("Firebase sync error on load:",Y)}finally{R.current=!1}})()},[t]),k.useEffect(()=>{if(!t||R.current)return;if(S.current){S.current=!1;return}l("editing");const K=setTimeout(async()=>{l("saving");try{const Y=Uo(Mo,"users",t.uid),q=Lo(r),E=Date.now();await yA(Y,{email:t.email,displayName:t.displayName,lastUpdatedAt:E,data:q},{merge:!0}),localStorage.setItem("nsysu-last-synced-cloud-time",String(E)),l("synced")}catch(Y){console.error("Firebase sync error on save:",Y),l("idle")}},3e3);return()=>clearTimeout(K)},[r,t,v]),k.useEffect(()=>{const K=Y=>{Y.key?.startsWith("nsysu-")};return window.addEventListener("storage",K),()=>window.removeEventListener("storage",K)},[]),k.useEffect(()=>{if(!t)return;const K=async()=>{console.log("Network came back online. Triggering cloud sync resolution...");try{const Y=Uo(Mo,"users",t.uid),q=await WB(Y);if(q.exists()){const E=q.data();if(E.data){const j=localStorage.getItem("nsysu-cloud-sync-last-local-update"),B=j?parseInt(j,10):0,I=E.lastUpdatedAt||0;if(I>=B)console.log("Online recovery: Cloud is newer, restoring..."),S.current=!0,localStorage.setItem("nsysu-last-synced-cloud-time",String(I)),Ch(E.data),window.location.reload();else{console.log("Online recovery: Local is newer, pushing to cloud...");const _=Lo(r),Q=Date.now();await yA(Y,{email:t.email,displayName:t.displayName,lastUpdatedAt:Q,data:_},{merge:!0}),localStorage.setItem("nsysu-last-synced-cloud-time",String(Q))}}}}catch(Y){console.error("Online recovery sync failed:",Y)}};return window.addEventListener("online",K),()=>window.removeEventListener("online",K)},[t,r]),{syncState:A,needsConsent:d,conflictTimes:x,acceptConsent:async()=>{if(t)try{l("saving");const K=Uo(Mo,"users",t.uid);await yA(K,{email:t.email,displayName:t.displayName,termsAccepted:!0,termsAcceptedAt:Date.now()},{merge:!0}),u(!1),window.location.reload()}catch(K){console.error("Failed to accept consent:",K),l("idle")}},declineConsent:()=>{u(!1)},deleteCloudData:async()=>{if(t)try{const K=Uo(Mo,"users",t.uid);await yD(K),l("idle"),u(!1)}catch(K){throw console.error("Failed to delete cloud data:",K),K}},resolveConflict:async K=>{if(t)if(K==="cloud")f&&(console.log("User chose to keep cloud data. Restoring..."),S.current=!0,localStorage.removeItem("nsysu-local-state-modified-at"),Ch(f),window.location.reload());else if(K==="local"){console.log("User chose to keep local data. Pushing to cloud...");try{l("saving");const Y=Uo(Mo,"users",t.uid),q=Lo(r),E=Date.now();await yA(Y,{email:t.email,displayName:t.displayName,lastUpdatedAt:E,data:q},{merge:!0}),localStorage.setItem("nsysu-last-synced-cloud-time",String(E)),l("synced"),R.current=!1}catch(Y){console.error("Firebase sync error on conflict resolution (local choice):",Y),l("idle")}g(null)}else K==="cancel"&&(console.log("User chose to cancel login at conflict. Logging out..."),g(null),l("idle"),await s(),window.location.reload())}}}function nP(){const{language:r,setLanguage:e,t}=At(),{user:s,loading:A,login:l,logout:d}=Bd(),{clearAllLabels:u,allUserLabels:f,courseUserLabels:g,importLabels:x}=yd(),[y,v]=k.useState(()=>{const pe=localStorage.getItem("nsysu-courses");return pe?JSON.parse(pe):[]}),{syncState:N,needsConsent:R,conflictTimes:S,acceptConsent:P,declineConsent:V,deleteCloudData:$,resolveConflict:G}=sP(y,v),[K,Y]=k.useState(()=>localStorage.getItem("nsysu-view-mode")||"tracker");k.useEffect(()=>{localStorage.getItem("nsysu-debug-boundaries")==="true"&&document.body.classList.add("debug-outlines")},[]);const[q,E]=k.useState(!1),[j,B]=k.useState(null),[I,_]=k.useState(!1),[Q,U]=k.useState(()=>localStorage.getItem("nsysu-last-announcement-ver")!==xf),[T,W]=k.useState(!1),[M,F]=k.useState(0),[z,ne]=k.useState(0),te=k.useRef(null),[O,J]=k.useState(null);k.useEffect(()=>{localStorage.setItem("nsysu-view-mode",K)},[K]);const[Ae,me]=k.useState(!1),{startTutorial:Ee}=eP({onOpenAddCourse:()=>{Kr(void 0),rs(!0)},onCloseAddCourse:()=>rs(!1),onOpenSchedule:()=>{Y("tracker");const pe=wt.length>0?wt[0]:"113-1";J(pe)},onCloseSchedule:()=>J(null),onSwitchToPlanner:()=>Y("planner"),onSwitchToTracker:()=>Y("tracker"),onTutorialStart:()=>me(!0),onTutorialEnd:()=>me(!1)});rP(y);const[Be,Ue]=k.useState(()=>{const pe=JSON.parse(localStorage.getItem("nsysu-emi-student")||"false"),Pe=localStorage.getItem("nsysu-student-class");return Pe||(pe?"":"-")}),[Me,$e]=k.useState(()=>localStorage.getItem("nsysu-major")||""),[Et,Vt]=k.useState(()=>Number(localStorage.getItem("nsysu-entrance-year"))||113),[ue,L]=k.useState(()=>JSON.parse(localStorage.getItem("nsysu-grad-credits")||"128")),[Z,he]=k.useState(()=>localStorage.getItem("nsysu-theme")||"dark"),{courses:ge,fetchCourses:Ge,semesters:ot}=la(),[qe,Le]=k.useState([]),[je,Xt]=k.useState(null),[_r,zt]=k.useState([]),[ve,It]=k.useState(null);k.useEffect(()=>{if(y.length>0){const pe=JSON.parse(localStorage.getItem("nsysu-skipped-fixes-v2")||"[]"),Pe=new Set;y.forEach(Ce=>{const lt=Ce.category==="General Education"&&Ce.genEduSubCategory==="Primer",Nt=Ce.category==="General Education"&&Ce.genEduSubCategory==="Service",Jt=!Ce.originalId||!Ce.originalSemester||!Ce.department,Tr=Ce.name.includes(`
`),Xe=/[\u4e00-\u9fa5]/.test(Ce.name),Ar=!Tr&&!Xe,rr=(Ce.fixAttempts||0)>=2;Jt&&!Ce.isExemption&&!lt&&!Nt&&!Ar&&!rr&&(pe.includes(Ce.semester)||Pe.add(Ce.semester))})}},[y]),k.useEffect(()=>{if(Q||Ae||!je||ge.length===0)return;if(!(qe.length>0&&!je)){if(je&&!(ge.filter(rr=>rr.semester===je).length>0))return}if(_r.length>0)return;const pe=qe[0];if(!pe)return;let Pe=0,Ce=[],lt=[],Nt=[...y],Jt=!1;if(Nt=Nt.map(Xe=>{const Ar=Xe.category==="General Education"&&Xe.genEduSubCategory==="Primer",rr=Xe.category==="General Education"&&Xe.genEduSubCategory==="Service",Ht=Xe.userLabels?.includes("manual");if(Xe.isExemption||Ar||rr||Ht)return Xe;if(Xe.semester===pe&&(!Xe.originalId||!Xe.originalSemester||!Xe.department)){const fs=ge.filter(In=>In.semester===je),{match:Ur,candidates:ms,ambiguity:gs}=tP(Xe,fs);if(Ur){Pe++,Jt=!0;let In={};if(Array.isArray(Ur.classTime)){const Dn=qx(Ur.classTime);Dn&&(In={day:Dn.day,startTime:Dn.startTime,endTime:Dn.endTime})}return{...Xe,room:Ur.room||Xe.room,teacher:Ur.teacher||Xe.teacher,originalTags:Ur.tags||Xe.originalTags,originalSemester:Ur.semester||Xe.originalSemester,originalId:Ur.id||Xe.originalId,department:Ur.department||Xe.department,...In}}if(gs)Ce.push({userCourse:Xe,candidates:ms});else return lt.push(Xe.name),Jt=!0,{...Xe,fixAttempts:(Xe.fixAttempts||0)+1};Jt=!0}return Xe}),Jt&&v(Nt),Ce.length>0){zt(Ce);return}Ce.length===0&&(lt.length>0||Pe>0?It({patched:Pe,unmatched:lt}):Pe===0&&lt.length===0&&It({patched:0,unmatched:[]}));const Tr=JSON.parse(localStorage.getItem("nsysu-skipped-fixes-v2")||"[]");Tr.includes(pe)||localStorage.setItem("nsysu-skipped-fixes-v2",JSON.stringify([...Tr,pe])),Xt(null),Le(Xe=>Xe.slice(1))},[ge,je,_r.length,Q,Ae]);const Rr=pe=>{const Pe=_r[0];Pe&&(v(Ce=>Ce.map(lt=>{if(lt.id===Pe.userCourse.id){let Nt={};if(Array.isArray(pe.classTime)){const Jt=qx(pe.classTime);Jt&&(Nt={day:Jt.day,startTime:Jt.startTime,endTime:Jt.endTime})}return{...lt,room:pe.room||lt.room,teacher:pe.teacher||lt.teacher,department:pe.department||lt.department,originalId:pe.id,originalSemester:pe.semester,originalTags:pe.tags,...Nt}}return lt})),zt(Ce=>Ce.slice(1)))},[wt,xr]=k.useState(()=>{const pe=localStorage.getItem("nsysu-semesters");return pe?JSON.parse(pe):[...Ec]}),[vs,rs]=k.useState(!1),[de,Fe]=k.useState(!1),[We,st]=k.useState(!1),[Ve,et]=k.useState(!1),[yr,ss]=k.useState(!1);k.useEffect(()=>{localStorage.setItem("nsysu-semesters",JSON.stringify(wt))},[wt]),k.useEffect(()=>(document.body.style.overflow=de?"hidden":"auto",()=>{document.body.style.overflow="auto"}),[de]);const ns=(pe,Pe)=>{const Ce=Pe==="Summer"?`Year ${pe} Summer`:`Year ${pe} ${Pe}`;xr(lt=>[...lt,Ce].sort((Jt,Tr)=>{const Xe=Ar=>{const rr=Ar.split(" "),Ht=parseInt(rr[1]);let fs=0;return rr[2]==="Sem"?fs=parseInt(rr[3]):rr[2]==="Summer"&&(fs=3),Ht*10+fs};return Xe(Jt)-Xe(Tr)}))},[ws,Kt]=k.useState(!1);k.useEffect(()=>{if(Q||Ae)return;if(!localStorage.getItem("nsysu-setup-reminder-seen")&&(Me===""||Et===113||ue===128)){const Ce=setTimeout(()=>Kt(!0),1e3);return()=>clearTimeout(Ce)}},[Q,Ae,qe.length,_r.length,ve,Me,Et,ue]);const Is=(pe=!1)=>{localStorage.setItem("nsysu-setup-reminder-seen","true"),Kt(!1),pe&&Fe(!0)},[qs,Kr]=k.useState(void 0);k.useEffect(()=>{localStorage.setItem("nsysu-courses",JSON.stringify(y))},[y]),k.useEffect(()=>{localStorage.setItem("nsysu-student-class",Be),localStorage.setItem("nsysu-grad-credits",JSON.stringify(ue)),localStorage.setItem("nsysu-major",Me),localStorage.setItem("nsysu-entrance-year",Et.toString())},[Be,ue,Me,Et]),k.useEffect(()=>{const pe=document.documentElement;pe.setAttribute("data-theme",Z),Z==="dark"?pe.classList.add("dark"):pe.classList.remove("dark"),localStorage.setItem("nsysu-theme",Z),localStorage.setItem("nsysu-theme",Z)},[Z]);const[xl,ca]=k.useState(!1),[Ys,Fn]=k.useState(!1),[yl,da]=k.useState(null);k.useEffect(()=>{const pe=()=>ca(!0);return window.addEventListener("admin-login-request",pe),()=>window.removeEventListener("admin-login-request",pe)},[]),k.useEffect(()=>{if(ot.length>0){const pe=ot[0];Ge(pe)}},[ot,Ge]);const Pa=pe=>{v(Pe=>Pe.some(lt=>lt.id===pe.id)?Pe.map(lt=>lt.id===pe.id?pe:lt):[...Pe,pe]),Kr(void 0)},Yi=pe=>{v(y.filter(Pe=>Pe.id!==pe))},ua=pe=>{v(Pe=>{const Ce=new Set(pe.map(Nt=>Nt.id));return[...Pe.filter(Nt=>!Ce.has(Nt.id)),...pe]})},mn=pe=>{Kr(pe),rs(!0)},Va=async()=>{const pe={};try{const Pe=await g1();for(const Ce of Pe){const lt=await SO(Ce.file);pe[Ce.id]={name:Ce.name,type:Ce.type,lastModified:Ce.lastModified,data:lt}}}catch(Pe){console.error("Error gathering assets for export:",Pe)}try{const Pe=JSON.parse(localStorage.getItem("nsysu-micro-credits-data")||"null"),Ce=JSON.parse(localStorage.getItem("nsysu-interdisciplinary-teacher-education-data")||"null"),lt=JSON.parse(localStorage.getItem("nsysu-interdisciplinary-double-major-data")||"null"),Nt=JSON.parse(localStorage.getItem("nsysu-interdisciplinary-cross-disciplinary-data")||"null"),Jt=JSON.parse(localStorage.getItem("nsysu-diverse-learning-data")||"null"),Tr=JSON.parse(localStorage.getItem("nsysu-interdisciplinary-course-9-data")||"null"),Xe={};for(let Ur=1;Ur<=10;Ur++){const ms=`nsysu-interdisciplinary-item-${Ur}-notes`,gs=localStorage.getItem(ms);gs&&(Xe[ms]=gs)}const Ar={version:1,lastUpdated:new Date().toISOString(),settings:{studentClass:Be,graduationCredits:ue,major:Me,entranceYear:Et},labels:{library:f,map:g},courses:y,plannerDraft:JSON.parse(localStorage.getItem("nsysu-planner-draft")||"[]"),interdisciplinaryStatus:JSON.parse(localStorage.getItem("nsysu-interdisciplinary-status")||"{}"),minorData:JSON.parse(localStorage.getItem("nsysu-interdisciplinary-minor-data")||"null"),microCreditsData:Pe,teacherEducationData:Ce,doubleMajorData:lt,crossDisciplinaryData:Nt,diverseLearningData:Jt,interdisciplinaryCourseData:Tr,interdisciplinaryNotes:Xe,assets:pe},rr=new Blob([JSON.stringify(Ar,null,2)],{type:"application/json"}),Ht=URL.createObjectURL(rr),fs=document.createElement("a");fs.href=Ht,fs.download=`ClearGrad._Data_${new Date().toISOString().split("T")[0]}.json`,fs.click(),URL.revokeObjectURL(Ht)}catch(Pe){console.error("Export failed:",Pe),alert("Export failed! Please try again.")}},hs=async pe=>{try{const Pe=await pe.text(),Ce=JSON.parse(Pe);Ce.courses&&Array.isArray(Ce.courses)?(v(Ce.courses),localStorage.setItem("nsysu-courses",JSON.stringify(Ce.courses)),Ce.settings&&(Ce.settings.studentClass&&(Ue(Ce.settings.studentClass),localStorage.setItem("nsysu-student-class",Ce.settings.studentClass)),Ce.settings.graduationCredits&&(L(Ce.settings.graduationCredits),localStorage.setItem("nsysu-grad-credits",JSON.stringify(Ce.settings.graduationCredits))),Ce.settings.major&&($e(Ce.settings.major),localStorage.setItem("nsysu-major",Ce.settings.major)),Ce.settings.entranceYear&&(Vt(Ce.settings.entranceYear),localStorage.setItem("nsysu-entrance-year",String(Ce.settings.entranceYear)))),Ce.labels&&Ce.labels.library&&Ce.labels.map&&x(Ce.labels.library,Ce.labels.map),Ce.plannerDraft&&localStorage.setItem("nsysu-planner-draft",JSON.stringify(Ce.plannerDraft)),Ce.interdisciplinaryStatus&&localStorage.setItem("nsysu-interdisciplinary-status",JSON.stringify(Ce.interdisciplinaryStatus)),Ce.minorData&&localStorage.setItem("nsysu-interdisciplinary-minor-data",JSON.stringify(Ce.minorData)),Ce.microCreditsData&&localStorage.setItem("nsysu-micro-credits-data",JSON.stringify(Ce.microCreditsData)),Ce.teacherEducationData&&localStorage.setItem("nsysu-interdisciplinary-teacher-education-data",JSON.stringify(Ce.teacherEducationData)),Ce.doubleMajorData&&localStorage.setItem("nsysu-interdisciplinary-double-major-data",JSON.stringify(Ce.doubleMajorData)),Ce.crossDisciplinaryData&&localStorage.setItem("nsysu-interdisciplinary-cross-disciplinary-data",JSON.stringify(Ce.crossDisciplinaryData)),Ce.diverseLearningData&&localStorage.setItem("nsysu-diverse-learning-data",JSON.stringify(Ce.diverseLearningData)),Ce.interdisciplinaryCourseData&&localStorage.setItem("nsysu-interdisciplinary-course-9-data",JSON.stringify(Ce.interdisciplinaryCourseData)),Ce.interdisciplinaryNotes&&Object.entries(Ce.interdisciplinaryNotes).forEach(([lt,Nt])=>{localStorage.setItem(lt,Nt)}),Ce.assets&&Array.isArray(Ce.assets)&&(console.log(`Restoring ${Ce.assets.length} assets...`),await _O(Ce.assets)),alert("Import successful!"),window.location.reload()):alert("Invalid file format")}catch(Pe){console.error("Import failed:",Pe),alert("Import failed! Invalid JSON file.")}te.current&&(te.current.value="")},Ds=pe=>{const Pe=pe.target.files?.[0];Pe&&(y.length>0?(B(Pe),E(!0),te.current&&(te.current.value="")):hs(Pe))},ir=async()=>{try{const pe=await g1();F(pe.length)}catch{F(0)}W(!0)},dr=async()=>{v([]),localStorage.removeItem("nsysu-planner-draft"),localStorage.removeItem("nsysu-interdisciplinary-status"),localStorage.removeItem("nsysu-interdisciplinary-minor-data"),localStorage.removeItem("nsysu-interdisciplinary-double-major-data"),localStorage.removeItem("nsysu-interdisciplinary-teacher-education-data"),localStorage.removeItem("nsysu-micro-credits-data"),localStorage.removeItem("nsysu-interdisciplinary-cross-disciplinary-data"),localStorage.removeItem("nsysu-diverse-learning-data"),localStorage.removeItem("nsysu-interdisciplinary-course-9-data");for(let pe=1;pe<=10;pe++)localStorage.removeItem(`nsysu-interdisciplinary-item-${pe}-notes`);await NO(),u(),ne(pe=>pe+1),W(!1),window.location.reload()},Bs=k.useMemo(()=>({major:Me,entranceYear:Et,studentClass:Be}),[Me,Et,Be]);return a.jsxs("div",{className:"min-h-screen font-sans selection:bg-primary/30 transition-colors duration-500 bg-background text-foreground",children:[a.jsx("header",{className:"sticky top-0 z-40 transition-colors duration-300 bg-surface/50 border-b border-border backdrop-blur-md",children:a.jsxs("div",{className:"w-full px-4 py-2 flex flex-wrap justify-between items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3",id:"header-title",children:[a.jsx("img",{src:Z==="dark"?"./Dark_mode_full.png":"./Light_mode_full.png",alt:"ClearGrad",className:"h-8 w-auto object-contain"}),a.jsx("div",{id:"mode-switcher",className:"hidden md:flex bg-background/50 p-1 rounded-lg border border-gray-300 dark:border-border/50 ml-2",children:K==="interdisciplinary"?a.jsxs("button",{onClick:()=>Y("tracker"),className:"px-3 py-1.5 rounded-md text-sm font-medium transition-all duration-200 flex items-center gap-1.5 text-white bg-[#8D9CB2] hover:bg-[#8299BB] dark:text-gray-900 dark:bg-[#A8C8FA] dark:hover:bg-[#8299BB] shadow-sm",children:[a.jsx(G2,{size:16}),a.jsx("span",{children:t.app.backToTracker})]}):a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>Y("tracker"),className:`flex items-center gap-2 px-3 py-1.5 rounded-md text-sm font-medium transition-all ${K==="tracker"?"bg-primary text-white dark:text-gray-700 shadow-sm":"text-muted hover:text-foreground"}`,children:[a.jsx(J2,{size:16}),a.jsx("span",{children:t.app.tracker})]}),a.jsxs("button",{onClick:()=>Y("planner"),className:`flex items-center gap-2 px-3 py-1.5 rounded-md text-sm font-medium transition-all ${K==="planner"?"bg-primary text-white dark:text-gray-700 shadow-sm":"text-muted hover:text-foreground"}`,children:[a.jsx(HA,{size:16}),a.jsx("span",{children:t.app.planner})]})]})})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{id:"header-settings",onClick:()=>{document.body.classList.contains("tutorial-running")||Fe(!0)},className:"hidden md:block bg-surface hover:bg-surface/80 text-muted hover:text-foreground px-3 py-2 rounded-lg transition-colors text-sm font-medium",children:t.app.settings}),K==="planner"&&a.jsxs("button",{onClick:()=>ss(!0),className:"bg-[#E9E1FF] hover:bg-[#DCD0FF] text-[#3F3C47] dark:bg-[#62587D]/70 dark:text-[#D8C9FF] dark:hover:bg-[#62587D]/90 px-3 py-2 rounded-lg transition-colors text-sm font-medium flex items-center gap-1.5",children:[a.jsx(HA,{size:16}),a.jsx("span",{className:"hidden sm:inline",children:t.courseSchedule?.button||"Schedule"})]}),K==="tracker"&&a.jsxs("button",{id:"header-add-course",onClick:()=>{document.body.classList.contains("tutorial-running")||(Kr(void 0),rs(!0))},className:"hidden md:flex bg-[#303030] hover:!bg-[#8D9CB2] dark:bg-[#EFEFEF] dark:hover:!bg-[#A8C8FA] text-white dark:text-gray-700 px-4 py-2 rounded-lg font-bold shadow-lg shadow-black/20 dark:shadow-white/10 transition-all items-center gap-2",children:[a.jsx(zr,{size:18})," ",a.jsx("span",{className:"hidden sm:inline",children:t.app.addCourse})]}),a.jsx("div",{className:"hidden md:block h-8 w-[1px] bg-border mx-2"}),a.jsxs("div",{id:"header-data-controls",className:"hidden md:flex items-center",children:[a.jsx("button",{onClick:Va,className:"p-2 text-muted hover:text-foreground transition-colors",title:t.app.export,children:a.jsx(Mf,{size:20})}),a.jsxs("label",{className:"p-2 text-muted hover:text-foreground transition-colors cursor-pointer",title:t.app.import,children:[a.jsx(ik,{size:20}),a.jsx("input",{type:"file",ref:te,onChange:Ds,accept:".json",className:"hidden"})]}),!s&&a.jsx("button",{onClick:ir,className:"p-2 text-muted hover:text-danger transition-colors",title:t.app.clear,children:a.jsx(sd,{size:20})})]}),a.jsx("div",{className:"hidden md:block h-8 w-[1px] bg-border mx-2"}),a.jsx("button",{id:"header-history",onClick:()=>st(!0),className:"hidden md:block p-2 text-muted hover:text-foreground transition-colors",title:t.updates.title,children:a.jsx(g5,{size:20})}),a.jsx("button",{id:"header-support",onClick:pe=>{pe.preventDefault();const Pe=Date.now(),lt=(window._supportIconClicks||[]).filter(Nt=>Pe-Nt<1e3);if(lt.push(Pe),window._supportIconClicks=lt,lt.length>=3){window._supportIconClicks=[],ca(!0);return}lt.length===1&&setTimeout(()=>{(window._supportIconClicks||[]).filter(Jt=>Date.now()-Jt<1e3).length<3&&et(!0)},350)},className:"hidden md:block p-2 text-muted hover:text-foreground transition-colors",title:t.support.title,children:a.jsx($2,{size:20})}),a.jsx("div",{className:"hidden md:block h-8 w-[1px] bg-border mx-2"}),!A&&(s?a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"text-xs font-medium px-2 py-1 rounded-full bg-surface/50 border border-border flex items-center gap-1.5 transition-all",children:[N==="editing"&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"animate-pulse",children:""})," ",a.jsx("span",{className:"hidden sm:inline",children:t.syncState.editing})]}),N==="saving"&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"animate-spin inline-block",children:""})," ",a.jsx("span",{className:"hidden sm:inline",children:t.syncState.saving})]}),N==="synced"&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""})," ",a.jsx("span",{className:"hidden sm:inline",children:t.syncState.synced})]}),N==="idle"&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""})," ",a.jsx("span",{className:"hidden sm:inline",children:t.syncState.idle})]})]}),a.jsxs("div",{className:"relative group/auth",children:[a.jsx("button",{className:"flex w-8 h-8 rounded-full overflow-hidden border border-border shadow-sm hover:ring-2 hover:ring-primary/50 transition-all cursor-pointer",children:s.photoURL?a.jsx("img",{src:s.photoURL,alt:s.displayName||"User",className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full bg-surface flex items-center justify-center text-primary font-bold",children:(s.displayName||s.email||"?").charAt(0).toUpperCase()})}),a.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 bg-background border border-border rounded-xl shadow-xl opacity-0 invisible group-hover/auth:opacity-100 group-hover/auth:visible transition-all duration-200 transform origin-top-right z-50 overflow-hidden",children:[a.jsxs("div",{className:"px-4 py-3 border-b border-border/50 bg-surface/30",children:[a.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:s.displayName||"User"}),a.jsx("p",{className:"text-xs text-muted truncate",children:s.email})]}),a.jsx("button",{onClick:d,className:"w-full text-left px-4 py-2 text-sm text-danger hover:bg-danger/10 transition-colors flex items-center gap-2",children:a.jsx("span",{children:"Logout"})})]})]})]}):a.jsxs("button",{onClick:l,className:"bg-surface hover:bg-surface/80 text-foreground border border-border px-3 py-1.5 rounded-lg text-sm font-medium transition-all shadow-sm flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 rounded-full overflow-hidden flex-shrink-0 bg-white p-0.5",children:a.jsxs("svg",{viewBox:"0 0 48 48",className:"w-full h-full",children:[a.jsx("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}),a.jsx("path",{fill:"#4285F4",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"}),a.jsx("path",{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}),a.jsx("path",{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"}),a.jsx("path",{fill:"none",d:"M0 0h48v48H0z"})]})}),a.jsx("span",{className:"hidden sm:inline",children:"Sign in with Google"}),a.jsx("span",{className:"sm:hidden",children:"Sign in"})]}))]})]})}),a.jsx("main",{className:"w-full px-4 py-8",children:K==="tracker"?a.jsx(dO,{courses:y,semesters:wt,isEMIStudent:Be==="",graduationCredits:ue,userProfile:Bs,onEditCourse:mn,onAddSemester:ns,onFixData:pe=>{Le([pe]),Xt(null)},activeScheduleSemester:O,onViewSchedule:J,onOpenInterdisciplinary:()=>Y("interdisciplinary")}):K==="planner"?a.jsx(wO,{semesters:wt,onAddCourse:Pa,onSaveCourses:ua,userProfile:Bs,existingCourses:y},z):a.jsx(a6,{theme:Z,userProfile:Bs,courses:y})}),de&&a.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-[6000] p-4 pb-24 md:pb-4",children:a.jsxs("div",{className:"bg-background border border-border rounded-xl w-full max-w-md shadow-2xl p-6 relative max-h-[90vh] flex flex-col",children:[a.jsx("button",{onClick:()=>Fe(!1),className:"absolute right-4 top-4 text-muted hover:text-foreground z-10",children:a.jsx(ut,{size:20})}),a.jsx("h2",{className:"text-xl font-bold text-foreground mb-4 shrink-0",children:t.settings.title}),a.jsxs("div",{className:"space-y-4 overflow-y-auto pr-2 custom-scrollbar flex-1 pb-4 md:pb-0",children:[a.jsxs("div",{className:"bg-surface/50 p-3 rounded-lg border border-border/60 space-y-3",children:[a.jsxs("h3",{className:"text-sm font-semibold text-primary flex items-center gap-2",children:[a.jsx(Z2,{size:16}),t.settings.profile||"Student Profile"]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-1",children:t.settings.major||"Major / Department"}),a.jsxs("select",{value:Me,onChange:pe=>$e(pe.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary appearance-none",children:[a.jsx("option",{value:"",children:t.settings.selectMajor||"Select Department..."}),$f.map(pe=>a.jsx("optgroup",{label:pe.category,className:"text-primary font-bold bg-surface/80",children:pe.departments.map(Pe=>a.jsx("option",{value:Pe,className:"text-foreground bg-background",children:Pe},Pe))},pe.category))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-1",children:t.settings.entranceYear||"Entrance Year (e.g. 113)"}),a.jsx("input",{type:"number",min:"100",max:"120",value:Et,onChange:pe=>Vt(Number(pe.target.value)),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-1",children:t.settings.class||"Class"}),a.jsxs("select",{value:Be,onChange:pe=>Ue(pe.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary appearance-none",children:[a.jsx("option",{value:"-",children:"-"}),a.jsx("option",{value:"",children:t.catalog.class?.shared||"Shared / No Class"}),a.jsx("option",{value:"",children:t.catalog.class?.a||"Class A"}),a.jsx("option",{value:"",children:t.catalog.class?.b||"Class B"}),a.jsx("option",{value:"",children:t.catalog.class?.english||"English Class"})]}),Be===""&&a.jsxs("div",{className:"mt-2 p-2 bg-yellow-500/10 border border-yellow-500/20 rounded-md text-xs text-yellow-500 flex items-center gap-1.5",children:[a.jsx(px,{size:12}),t.settings.emiHintActive||"EMI Liberal Arts tracking enabled"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-1",children:t.settings.gradCredits}),a.jsx("input",{type:"number",min:"100",max:"200",value:ue,onChange:pe=>L(Number(pe.target.value)),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),a.jsxs("div",{className:"mt-2 p-2 bg-blue-500/10 border border-blue-500/20 rounded-md text-xs text-blue-400 flex items-start gap-1.5",children:[a.jsx("span",{className:"mt-0.5",children:""}),a.jsx("span",{children:t.settings.profileWarning||"Please ensure your profile is correct to get accurate search results."})]})]}),a.jsx("div",{className:"bg-surface/50 p-3 rounded-lg border border-border/60",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2 text-foreground",children:[a.jsx(O0,{size:18,className:"text-primary"}),a.jsx("span",{className:"font-medium",children:t.settings.language})]}),a.jsxs("div",{className:"flex bg-background/50 rounded-lg p-1 border border-border/60",children:[a.jsx("button",{onClick:()=>e("en"),className:`px-3 py-1 rounded-md text-sm font-medium transition-all ${r==="en"?"bg-primary text-white dark:text-[#303030] shadow":"text-muted hover:text-foreground"}`,children:"English"}),a.jsx("button",{onClick:()=>e("zh"),className:`px-3 py-1 rounded-md text-sm font-medium transition-all ${r==="zh"?"bg-primary text-white dark:text-[#303030] shadow":"text-muted hover:text-foreground"}`,children:""})]})]})}),a.jsx("div",{className:"bg-surface/50 p-3 rounded-lg border border-border/60",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2 text-foreground",children:[Z==="dark"?a.jsx(gx,{size:18,className:"text-primary"}):a.jsx(xx,{size:18,className:"text-warning"}),a.jsx("span",{className:"font-medium",children:Z==="dark"?t.settings.darkMode:t.settings.lightMode||"Light Mode"})]}),a.jsxs("div",{className:"flex bg-background/50 rounded-lg p-1 border border-border/60",children:[a.jsx("button",{onClick:()=>he("dark"),className:`px-3 py-1 rounded-md text-sm font-medium transition-all ${Z==="dark"?"bg-primary text-white dark:text-[#303030] shadow":"text-muted hover:text-foreground"}`,children:a.jsx(gx,{size:14})}),a.jsx("button",{onClick:()=>he("light"),className:`px-3 py-1 rounded-md text-sm font-medium transition-all ${Z==="light"?"bg-warning text-black shadow":"text-muted hover:text-foreground"}`,children:a.jsx(xx,{size:14})})]})]})}),s&&a.jsxs("div",{className:"mt-8 border-t border-red-500/20 pt-6 pb-2",children:[a.jsxs("h3",{className:"text-sm font-semibold text-red-500 mb-3 uppercase tracking-wider flex items-center gap-2",children:[a.jsx(sd,{size:16}),r==="zh"?" (Danger Zone)":"Danger Zone"]}),a.jsx("button",{onClick:()=>_(!0),className:"w-full flex items-center justify-center gap-2 bg-red-500/10 hover:bg-red-500/20 text-red-500 border border-red-500/20 py-2.5 rounded-lg font-medium transition-colors",children:a.jsx("span",{children:r==="zh"?" ":" Delete Cloud Backup & Logout"})})]})]}),a.jsxs("div",{className:"mt-6 flex justify-between items-center pt-4 border-t border-border shrink-0",children:[a.jsxs("button",{onClick:()=>{Fe(!1),Ee()},className:"text-primary hover:text-[#303030] dark:hover:text-[#EFEFEF] font-medium text-sm flex items-center gap-2 hover:bg-primary/10 px-3 py-2 rounded-lg transition-colors",title:t.tutorial.start,children:[a.jsx(px,{size:16}),t.tutorial.start]}),a.jsx("button",{onClick:()=>Fe(!1),className:"bg-primary hover:bg-[var(--color-primary-hover)] text-white px-6 py-2 rounded-lg font-bold shadow-lg shadow-primary/20 transition-all",children:t.settings.save})]})]})}),vs&&a.jsx(A6,{onSave:Pa,onClose:()=>rs(!1),onDelete:Yi,initialCourse:qs,userMajor:Me,theme:Z}),We&&a.jsx(o6,{onClose:()=>st(!1)}),Ve&&a.jsx(f6,{onClose:()=>et(!1)}),Q&&a.jsx(m6,{theme:Z,setTheme:he,onStartTutorial:Ee,onClose:pe=>{pe&&localStorage.setItem("nsysu-last-announcement-ver",xf),U(!1)}}),qe.length>0&&_r.length===0&&!Q&&!Ae&&a.jsx(g6,{semesterName:qe[0],availableSemesters:ot,isLoading:!!je,missingCourses:y.filter(pe=>pe.semester===qe[0]&&(!pe.room||!pe.teacher||!pe.originalSemester||!pe.department)&&!pe.isExemption&&!pe.isExemption&&pe.category!=="University Way"&&!pe.userLabels?.includes("manual")&&pe.name.includes(`
`)&&/[\u4e00-\u9fa5]/.test(pe.name)&&/[a-zA-Z]/.test(pe.name)).map(pe=>pe.name),onFix:pe=>{Xt(pe),Ge(pe)},onSkip:()=>{const pe=qe[0],Pe=JSON.parse(localStorage.getItem("nsysu-skipped-fixes-v2")||"[]");Pe.includes(pe)||localStorage.setItem("nsysu-skipped-fixes-v2",JSON.stringify([...Pe,pe])),Le(Ce=>Ce.slice(1))}}),_r.length>0&&a.jsx(p6,{candidates:_r[0].candidates,userCourse:_r[0].userCourse,onSelect:Rr,onCancel:()=>{zt(pe=>pe.slice(1)),_r.length<=1&&Xt(null)}},_r[0].userCourse.id),ve&&a.jsx(x6,{patchedCount:ve.patched,unmatchedNames:ve.unmatched,onClose:()=>It(null)}),q&&j&&a.jsx(y6,{existingCount:y.length,onConfirm:()=>{hs(j),E(!1),B(null)},onBackupAndConfirm:async()=>{await Va(),hs(j),E(!1),B(null)},onCancel:()=>{E(!1),B(null)}}),T&&a.jsx(b6,{existingCount:y.length,filesCount:M,onConfirm:dr,onBackupAndConfirm:()=>{Va(),dr()},onCancel:()=>W(!1)}),ws&&a.jsx(v6,{onClose:()=>Is(!1),onGoToSettings:()=>Is(!0)}),yr&&a.jsx(w6,{onClose:()=>ss(!1)}),xl&&a.jsx(E6,{onClose:()=>ca(!1),onLogin:pe=>{ca(!1),da(pe),Fn(!0)}}),Ys&&a.jsx(S6,{courses:y,adminId:yl,onClose:()=>{Fn(!1),et(!1)}}),N==="conflict"&&a.jsx(U6,{onResolve:G,conflictTimes:S}),R&&a.jsx(j6,{onDecline:V,onAccept:P,theme:Z}),I&&a.jsx(_6,{onCancel:()=>_(!1),onConfirm:async()=>{try{await $(),await d(),_(!1),Fe(!1),window.location.reload()}catch(pe){console.error("Deletion failed:",pe),alert(r==="zh"?"":"Deletion failed. Please check your connection or try again later.")}}}),K==="tracker"&&a.jsx("button",{onClick:()=>{document.body.classList.contains("tutorial-running")||(Kr(void 0),rs(!0))},className:"md:hidden fixed bottom-20 right-6 z-40 w-14 h-14 bg-primary text-white rounded-full shadow-lg shadow-primary/30 flex items-center justify-center hover:scale-105 active:scale-95 transition-all outline-none focus:outline-none",children:a.jsx(zr,{size:28,className:"stroke-[2.5px]"})}),a.jsx("footer",{className:"w-full text-center mt-auto pb-24 md:pb-6 pt-6",children:a.jsxs("p",{className:"text-xs text-muted/60 font-medium flex items-center justify-center gap-1",children:[a.jsx("span",{className:"opacity-75",children:" 2026 ClearGrad. "}),a.jsx("span",{className:"hidden sm:inline opacity-50",children:"|"}),a.jsx("span",{className:"block sm:inline opacity-75",children:"Created by "}),a.jsx("span",{className:"hidden sm:inline opacity-50",children:"|"}),a.jsx("span",{className:"block sm:inline opacity-75",children:"Colors by "})]})}),a.jsx(T6,{mode:K,setMode:Y,showSettings:de,setShowSettings:Fe})]})}c_.createRoot(document.getElementById("root")).render(a.jsx(k.StrictMode,{children:a.jsx(h6,{children:a.jsx(Ek,{children:a.jsx(Sk,{children:a.jsx(hO,{children:a.jsx(nP,{})})})})})}));
