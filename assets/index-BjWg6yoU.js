(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const A of document.querySelectorAll('link[rel="modulepreload"]'))s(A);new MutationObserver(A=>{for(const l of A)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function t(A){const l={};return A.integrity&&(l.integrity=A.integrity),A.referrerPolicy&&(l.referrerPolicy=A.referrerPolicy),A.crossOrigin==="use-credentials"?l.credentials="include":A.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(A){if(A.ep)return;A.ep=!0;const l=t(A);fetch(A.href,l)}})();var zg={exports:{}},hc={};var vw;function i_(){if(vw)return hc;vw=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,A,l){var d=null;if(l!==void 0&&(d=""+l),A.key!==void 0&&(d=""+A.key),"key"in A){l={};for(var u in A)u!=="key"&&(l[u]=A[u])}else l=A;return A=l.ref,{$$typeof:r,type:s,key:d,ref:A!==void 0?A:null,props:l}}return hc.Fragment=e,hc.jsx=t,hc.jsxs=t,hc}var ww;function A_(){return ww||(ww=1,zg.exports=i_()),zg.exports}var a=A_(),Kg={exports:{}},Ze={};var Bw;function o_(){if(Bw)return Ze;Bw=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),d=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),v=Symbol.iterator;function S(O){return O===null||typeof O!="object"?null:(O=v&&O[v]||O["@@iterator"],typeof O=="function"?O:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,V={};function P(O,X,Ae){this.props=O,this.context=X,this.refs=V,this.updater=Ae||R}P.prototype.isReactComponent={},P.prototype.setState=function(O,X){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,X,"setState")},P.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function G(){}G.prototype=P.prototype;function q(O,X,Ae){this.props=O,this.context=X,this.refs=V,this.updater=Ae||R}var W=q.prototype=new G;W.constructor=q,j(W,P.prototype),W.isPureReactComponent=!0;var te=Array.isArray;function z(){}var E={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function C(O,X,Ae){var me=Ae.ref;return{$$typeof:r,type:O,key:X,ref:me!==void 0?me:null,props:Ae}}function D(O,X){return C(O.type,X,O.props)}function Q(O){return typeof O=="object"&&O!==null&&O.$$typeof===r}function T(O){var X={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(Ae){return X[Ae]})}var _=/\/+/g;function U(O,X){return typeof O=="object"&&O!==null&&O.key!=null?T(""+O.key):X.toString(36)}function Y(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(z,z):(O.status="pending",O.then(function(X){O.status==="pending"&&(O.status="fulfilled",O.value=X)},function(X){O.status==="pending"&&(O.status="rejected",O.reason=X)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function M(O,X,Ae,me,Ee){var Be=typeof O;(Be==="undefined"||Be==="boolean")&&(O=null);var ke=!1;if(O===null)ke=!0;else switch(Be){case"bigint":case"string":case"number":ke=!0;break;case"object":switch(O.$$typeof){case r:case e:ke=!0;break;case x:return ke=O._init,M(ke(O._payload),X,Ae,me,Ee)}}if(ke)return Ee=Ee(O),ke=me===""?"."+U(O,0):me,te(Ee)?(Ae="",ke!=null&&(Ae=ke.replace(_,"$&/")+"/"),M(Ee,X,Ae,"",function(wt){return wt})):Ee!=null&&(Q(Ee)&&(Ee=D(Ee,Ae+(Ee.key==null||O&&O.key===Ee.key?"":(""+Ee.key).replace(_,"$&/")+"/")+ke)),X.push(Ee)),1;ke=0;var Pe=me===""?".":me+":";if(te(O))for(var Ve=0;Ve<O.length;Ve++)me=O[Ve],Be=Pe+U(me,Ve),ke+=M(me,X,Ae,Be,Ee);else if(Ve=S(O),typeof Ve=="function")for(O=Ve.call(O),Ve=0;!(me=O.next()).done;)me=me.value,Be=Pe+U(me,Ve++),ke+=M(me,X,Ae,Be,Ee);else if(Be==="object"){if(typeof O.then=="function")return M(Y(O),X,Ae,me,Ee);throw X=String(O),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return ke}function F(O,X,Ae){if(O==null)return O;var me=[],Ee=0;return M(O,me,"","",function(Be){return X.call(Ae,Be,Ee++)}),me}function K(O){if(O._status===-1){var X=O._result;X=X(),X.then(function(Ae){(O._status===0||O._status===-1)&&(O._status=1,O._result=Ae)},function(Ae){(O._status===0||O._status===-1)&&(O._status=2,O._result=Ae)}),O._status===-1&&(O._status=0,O._result=X)}if(O._status===1)return O._result.default;throw O._result}var ne=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},ee={map:F,forEach:function(O,X,Ae){F(O,function(){X.apply(this,arguments)},Ae)},count:function(O){var X=0;return F(O,function(){X++}),X},toArray:function(O){return F(O,function(X){return X})||[]},only:function(O){if(!Q(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Ze.Activity=y,Ze.Children=ee,Ze.Component=P,Ze.Fragment=t,Ze.Profiler=A,Ze.PureComponent=q,Ze.StrictMode=s,Ze.Suspense=f,Ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,Ze.__COMPILER_RUNTIME={__proto__:null,c:function(O){return E.H.useMemoCache(O)}},Ze.cache=function(O){return function(){return O.apply(null,arguments)}},Ze.cacheSignal=function(){return null},Ze.cloneElement=function(O,X,Ae){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var me=j({},O.props),Ee=O.key;if(X!=null)for(Be in X.key!==void 0&&(Ee=""+X.key),X)!N.call(X,Be)||Be==="key"||Be==="__self"||Be==="__source"||Be==="ref"&&X.ref===void 0||(me[Be]=X[Be]);var Be=arguments.length-2;if(Be===1)me.children=Ae;else if(1<Be){for(var ke=Array(Be),Pe=0;Pe<Be;Pe++)ke[Pe]=arguments[Pe+2];me.children=ke}return C(O.type,Ee,me)},Ze.createContext=function(O){return O={$$typeof:d,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:l,_context:O},O},Ze.createElement=function(O,X,Ae){var me,Ee={},Be=null;if(X!=null)for(me in X.key!==void 0&&(Be=""+X.key),X)N.call(X,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(Ee[me]=X[me]);var ke=arguments.length-2;if(ke===1)Ee.children=Ae;else if(1<ke){for(var Pe=Array(ke),Ve=0;Ve<ke;Ve++)Pe[Ve]=arguments[Ve+2];Ee.children=Pe}if(O&&O.defaultProps)for(me in ke=O.defaultProps,ke)Ee[me]===void 0&&(Ee[me]=ke[me]);return C(O,Be,Ee)},Ze.createRef=function(){return{current:null}},Ze.forwardRef=function(O){return{$$typeof:u,render:O}},Ze.isValidElement=Q,Ze.lazy=function(O){return{$$typeof:x,_payload:{_status:-1,_result:O},_init:K}},Ze.memo=function(O,X){return{$$typeof:g,type:O,compare:X===void 0?null:X}},Ze.startTransition=function(O){var X=E.T,Ae={};E.T=Ae;try{var me=O(),Ee=E.S;Ee!==null&&Ee(Ae,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(z,ne)}catch(Be){ne(Be)}finally{X!==null&&Ae.types!==null&&(X.types=Ae.types),E.T=X}},Ze.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},Ze.use=function(O){return E.H.use(O)},Ze.useActionState=function(O,X,Ae){return E.H.useActionState(O,X,Ae)},Ze.useCallback=function(O,X){return E.H.useCallback(O,X)},Ze.useContext=function(O){return E.H.useContext(O)},Ze.useDebugValue=function(){},Ze.useDeferredValue=function(O,X){return E.H.useDeferredValue(O,X)},Ze.useEffect=function(O,X){return E.H.useEffect(O,X)},Ze.useEffectEvent=function(O){return E.H.useEffectEvent(O)},Ze.useId=function(){return E.H.useId()},Ze.useImperativeHandle=function(O,X,Ae){return E.H.useImperativeHandle(O,X,Ae)},Ze.useInsertionEffect=function(O,X){return E.H.useInsertionEffect(O,X)},Ze.useLayoutEffect=function(O,X){return E.H.useLayoutEffect(O,X)},Ze.useMemo=function(O,X){return E.H.useMemo(O,X)},Ze.useOptimistic=function(O,X){return E.H.useOptimistic(O,X)},Ze.useReducer=function(O,X,Ae){return E.H.useReducer(O,X,Ae)},Ze.useRef=function(O){return E.H.useRef(O)},Ze.useState=function(O){return E.H.useState(O)},Ze.useSyncExternalStore=function(O,X,Ae){return E.H.useSyncExternalStore(O,X,Ae)},Ze.useTransition=function(){return E.H.useTransition()},Ze.version="19.2.3",Ze}var Cw;function Jx(){return Cw||(Cw=1,Kg.exports=o_()),Kg.exports}var k=Jx(),Gg={exports:{}},fc={},qg={exports:{}},Yg={};var Ew;function l_(){return Ew||(Ew=1,(function(r){function e(M,F){var K=M.length;M.push(F);e:for(;0<K;){var ne=K-1>>>1,ee=M[ne];if(0<A(ee,F))M[ne]=F,M[K]=ee,K=ne;else break e}}function t(M){return M.length===0?null:M[0]}function s(M){if(M.length===0)return null;var F=M[0],K=M.pop();if(K!==F){M[0]=K;e:for(var ne=0,ee=M.length,O=ee>>>1;ne<O;){var X=2*(ne+1)-1,Ae=M[X],me=X+1,Ee=M[me];if(0>A(Ae,K))me<ee&&0>A(Ee,Ae)?(M[ne]=Ee,M[me]=K,ne=me):(M[ne]=Ae,M[X]=K,ne=X);else if(me<ee&&0>A(Ee,K))M[ne]=Ee,M[me]=K,ne=me;else break e}}return F}function A(M,F){var K=M.sortIndex-F.sortIndex;return K!==0?K:M.id-F.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var d=Date,u=d.now();r.unstable_now=function(){return d.now()-u}}var f=[],g=[],x=1,y=null,v=3,S=!1,R=!1,j=!1,V=!1,P=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function W(M){for(var F=t(g);F!==null;){if(F.callback===null)s(g);else if(F.startTime<=M)s(g),F.sortIndex=F.expirationTime,e(f,F);else break;F=t(g)}}function te(M){if(j=!1,W(M),!R)if(t(f)!==null)R=!0,z||(z=!0,T());else{var F=t(g);F!==null&&Y(te,F.startTime-M)}}var z=!1,E=-1,N=5,C=-1;function D(){return V?!0:!(r.unstable_now()-C<N)}function Q(){if(V=!1,z){var M=r.unstable_now();C=M;var F=!0;try{e:{R=!1,j&&(j=!1,G(E),E=-1),S=!0;var K=v;try{t:{for(W(M),y=t(f);y!==null&&!(y.expirationTime>M&&D());){var ne=y.callback;if(typeof ne=="function"){y.callback=null,v=y.priorityLevel;var ee=ne(y.expirationTime<=M);if(M=r.unstable_now(),typeof ee=="function"){y.callback=ee,W(M),F=!0;break t}y===t(f)&&s(f),W(M)}else s(f);y=t(f)}if(y!==null)F=!0;else{var O=t(g);O!==null&&Y(te,O.startTime-M),F=!1}}break e}finally{y=null,v=K,S=!1}F=void 0}}finally{F?T():z=!1}}}var T;if(typeof q=="function")T=function(){q(Q)};else if(typeof MessageChannel<"u"){var _=new MessageChannel,U=_.port2;_.port1.onmessage=Q,T=function(){U.postMessage(null)}}else T=function(){P(Q,0)};function Y(M,F){E=P(function(){M(r.unstable_now())},F)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(M){M.callback=null},r.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<M?Math.floor(1e3/M):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_next=function(M){switch(v){case 1:case 2:case 3:var F=3;break;default:F=v}var K=v;v=F;try{return M()}finally{v=K}},r.unstable_requestPaint=function(){V=!0},r.unstable_runWithPriority=function(M,F){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var K=v;v=M;try{return F()}finally{v=K}},r.unstable_scheduleCallback=function(M,F,K){var ne=r.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?ne+K:ne):K=ne,M){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=K+ee,M={id:x++,callback:F,priorityLevel:M,startTime:K,expirationTime:ee,sortIndex:-1},K>ne?(M.sortIndex=K,e(g,M),t(f)===null&&M===t(g)&&(j?(G(E),E=-1):j=!0,Y(te,K-ne))):(M.sortIndex=ee,e(f,M),R||S||(R=!0,z||(z=!0,T()))),M},r.unstable_shouldYield=D,r.unstable_wrapCallback=function(M){var F=v;return function(){var K=v;v=F;try{return M.apply(this,arguments)}finally{v=K}}}})(Yg)),Yg}var Nw;function c_(){return Nw||(Nw=1,qg.exports=l_()),qg.exports}var $g={exports:{}},os={};var Sw;function d_(){if(Sw)return os;Sw=1;var r=Jx();function e(f){var g="https://react.dev/errors/"+f;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)g+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+f+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},A=Symbol.for("react.portal");function l(f,g,x){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:A,key:y==null?null:""+y,children:f,containerInfo:g,implementation:x}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,g){if(f==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return os.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,os.createPortal=function(f,g){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(f,g,null,x)},os.flushSync=function(f){var g=d.T,x=s.p;try{if(d.T=null,s.p=2,f)return f()}finally{d.T=g,s.p=x,s.d.f()}},os.preconnect=function(f,g){typeof f=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(f,g))},os.prefetchDNS=function(f){typeof f=="string"&&s.d.D(f)},os.preinit=function(f,g){if(typeof f=="string"&&g&&typeof g.as=="string"){var x=g.as,y=u(x,g.crossOrigin),v=typeof g.integrity=="string"?g.integrity:void 0,S=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;x==="style"?s.d.S(f,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:S}):x==="script"&&s.d.X(f,{crossOrigin:y,integrity:v,fetchPriority:S,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},os.preinitModule=function(f,g){if(typeof f=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var x=u(g.as,g.crossOrigin);s.d.M(f,{crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(f)},os.preload=function(f,g){if(typeof f=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var x=g.as,y=u(x,g.crossOrigin);s.d.L(f,x,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},os.preloadModule=function(f,g){if(typeof f=="string")if(g){var x=u(g.as,g.crossOrigin);s.d.m(f,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(f)},os.requestFormReset=function(f){s.d.r(f)},os.unstable_batchedUpdates=function(f,g){return f(g)},os.useFormState=function(f,g,x){return d.H.useFormState(f,g,x)},os.useFormStatus=function(){return d.H.useHostTransitionStatus()},os.version="19.2.3",os}var jw;function T1(){if(jw)return $g.exports;jw=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),$g.exports=d_(),$g.exports}var _w;function u_(){if(_w)return fc;_w=1;var r=c_(),e=Jx(),t=T1();function s(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function A(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var i=n,o=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(o=i.return),n=i.return;while(n)}return i.tag===3?o:null}function d(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function u(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function f(n){if(l(n)!==n)throw Error(s(188))}function g(n){var i=n.alternate;if(!i){if(i=l(n),i===null)throw Error(s(188));return i!==n?null:n}for(var o=n,c=i;;){var m=o.return;if(m===null)break;var p=m.alternate;if(p===null){if(c=m.return,c!==null){o=c;continue}break}if(m.child===p.child){for(p=m.child;p;){if(p===o)return f(m),n;if(p===c)return f(m),i;p=p.sibling}throw Error(s(188))}if(o.return!==c.return)o=m,c=p;else{for(var w=!1,I=m.child;I;){if(I===o){w=!0,o=m,c=p;break}if(I===c){w=!0,c=m,o=p;break}I=I.sibling}if(!w){for(I=p.child;I;){if(I===o){w=!0,o=p,c=m;break}if(I===c){w=!0,c=p,o=m;break}I=I.sibling}if(!w)throw Error(s(189))}}if(o.alternate!==c)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?n:i}function x(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=x(n),i!==null)return i;n=n.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),G=Symbol.for("react.consumer"),q=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function T(n){return n===null||typeof n!="object"?null:(n=Q&&n[Q]||n["@@iterator"],typeof n=="function"?n:null)}var _=Symbol.for("react.client.reference");function U(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===_?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case j:return"Fragment";case P:return"Profiler";case V:return"StrictMode";case te:return"Suspense";case z:return"SuspenseList";case C:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case R:return"Portal";case q:return n.displayName||"Context";case G:return(n._context.displayName||"Context")+".Consumer";case W:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case E:return i=n.displayName||null,i!==null?i:U(n.type)||"Memo";case N:i=n._payload,n=n._init;try{return U(n(i))}catch{}}return null}var Y=Array.isArray,M=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},ne=[],ee=-1;function O(n){return{current:n}}function X(n){0>ee||(n.current=ne[ee],ne[ee]=null,ee--)}function Ae(n,i){ee++,ne[ee]=n.current,n.current=i}var me=O(null),Ee=O(null),Be=O(null),ke=O(null);function Pe(n,i){switch(Ae(Be,i),Ae(Ee,n),Ae(me,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?zv(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=zv(i),n=Kv(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}X(me),Ae(me,n)}function Ve(){X(me),X(Ee),X(Be)}function wt(n){n.memoizedState!==null&&Ae(ke,n);var i=me.current,o=Kv(i,n.type);i!==o&&(Ae(Ee,n),Ae(me,o))}function Xt(n){Ee.current===n&&(X(me),X(Ee)),ke.current===n&&(X(ke),lc._currentValue=K)}var ue,L;function J(n){if(ue===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);ue=i&&i[1]||"",L=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ue+n+L}var he=!1;function ge(n,i){if(!n||he)return"";he=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var ye=function(){throw Error()};if(Object.defineProperty(ye.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ye,[])}catch(de){var oe=de}Reflect.construct(n,[],ye)}else{try{ye.call()}catch(de){oe=de}n.call(ye.prototype)}}else{try{throw Error()}catch(de){oe=de}(ye=n())&&typeof ye.catch=="function"&&ye.catch(function(){})}}catch(de){if(de&&oe&&typeof de.stack=="string")return[de.stack,oe.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=c.DetermineComponentFrameRoot(),w=p[0],I=p[1];if(w&&I){var $=w.split(`
`),ie=I.split(`
`);for(m=c=0;c<$.length&&!$[c].includes("DetermineComponentFrameRoot");)c++;for(;m<ie.length&&!ie[m].includes("DetermineComponentFrameRoot");)m++;if(c===$.length||m===ie.length)for(c=$.length-1,m=ie.length-1;1<=c&&0<=m&&$[c]!==ie[m];)m--;for(;1<=c&&0<=m;c--,m--)if($[c]!==ie[m]){if(c!==1||m!==1)do if(c--,m--,0>m||$[c]!==ie[m]){var fe=`
`+$[c].replace(" at new "," at ");return n.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",n.displayName)),fe}while(1<=c&&0<=m);break}}}finally{he=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?J(o):""}function Ke(n,i){switch(n.tag){case 26:case 27:case 5:return J(n.type);case 16:return J("Lazy");case 13:return n.child!==i&&i!==null?J("Suspense Fallback"):J("Suspense");case 19:return J("SuspenseList");case 0:case 15:return ge(n.type,!1);case 11:return ge(n.type.render,!1);case 1:return ge(n.type,!0);case 31:return J("Activity");default:return""}}function ot(n){try{var i="",o=null;do i+=Ke(n,o),o=n,n=n.return;while(n);return i}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Xe=Object.prototype.hasOwnProperty,Le=r.unstable_scheduleCallback,Se=r.unstable_cancelCallback,Pt=r.unstable_shouldYield,Nr=r.unstable_requestPaint,sr=r.unstable_now,ve=r.unstable_getCurrentPriorityLevel,jt=r.unstable_ImmediatePriority,lr=r.unstable_UserBlockingPriority,Ut=r.unstable_NormalPriority,gr=r.unstable_LowPriority,Cs=r.unstable_IdlePriority,As=r.log,nr=r.unstable_setDisableYieldValue,Jt=null,cr=null;function Vr(n){if(typeof As=="function"&&nr(n),cr&&typeof cr.setStrictMode=="function")try{cr.setStrictMode(Jt,n)}catch{}}var Vt=Math.clz32?Math.clz32:At,le=Math.log,De=Math.LN2;function At(n){return n>>>=0,n===0?32:31-(le(n)/De|0)|0}var tt=256,nt=262144,Qe=4194304;function Kt(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function pr(n,i,o){var c=n.pendingLanes;if(c===0)return 0;var m=0,p=n.suspendedLanes,w=n.pingedLanes;n=n.warmLanes;var I=c&134217727;return I!==0?(c=I&~p,c!==0?m=Kt(c):(w&=I,w!==0?m=Kt(w):o||(o=I&~n,o!==0&&(m=Kt(o))))):(I=c&~p,I!==0?m=Kt(I):w!==0?m=Kt(w):o||(o=c&~n,o!==0&&(m=Kt(o)))),m===0?0:i!==0&&i!==m&&(i&p)===0&&(p=m&-m,o=i&-i,p>=o||p===32&&(o&4194048)!==0)?i:m}function xr(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function In(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mn(){var n=Qe;return Qe<<=1,(Qe&62914560)===0&&(Qe=4194304),n}function Ys(n){for(var i=[],o=0;31>o;o++)i.push(n);return i}function Dn(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function yl(n,i,o,c,m,p){var w=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var I=n.entanglements,$=n.expirationTimes,ie=n.hiddenUpdates;for(o=w&~o;0<o;){var fe=31-Vt(o),ye=1<<fe;I[fe]=0,$[fe]=-1;var oe=ie[fe];if(oe!==null)for(ie[fe]=null,fe=0;fe<oe.length;fe++){var de=oe[fe];de!==null&&(de.lane&=-536870913)}o&=~ye}c!==0&&ua(n,c,0),p!==0&&m===0&&n.tag!==0&&(n.suspendedLanes|=p&~(w&~i))}function ua(n,i,o){n.pendingLanes|=i,n.suspendedLanes&=~i;var c=31-Vt(i);n.entangledLanes|=i,n.entanglements[c]=n.entanglements[c]|1073741824|o&261930}function Va(n,i){var o=n.entangledLanes|=i;for(n=n.entanglements;o;){var c=31-Vt(o),m=1<<c;m&i|n[c]&i&&(n[c]|=i),o&=~m}}function $i(n,i){var o=i&-i;return o=(o&42)!==0?1:ha(o),(o&(n.suspendedLanes|i))!==0?0:o}function ha(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function gn(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function za(){var n=F.p;return n!==0?n:(n=window.event,n===void 0?32:fw(n.type))}function gs(n,i){var o=F.p;try{return F.p=n,i()}finally{F.p=o}}var ks=Math.random().toString(36).slice(2),dr="__reactFiber$"+ks,yr="__reactProps$"+ks,Es="__reactContainer$"+ks,pe="__reactEvents$"+ks,ze="__reactListeners$"+ks,Ce="__reactHandles$"+ks,lt="__reactResources$"+ks,Et="__reactMarker$"+ks;function Wt(n){delete n[dr],delete n[yr],delete n[pe],delete n[ze],delete n[Ce]}function kr(n){var i=n[dr];if(i)return i;for(var o=n.parentNode;o;){if(i=o[Es]||o[dr]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(n=Wv(n);n!==null;){if(o=n[dr])return o;n=Wv(n)}return i}n=o,o=n.parentNode}return null}function $e(n){if(n=n[dr]||n[Es]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function ur(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(s(33))}function ar(n){var i=n[lt];return i||(i=n[lt]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Ht(n){n[Et]=!0}var ps=new Set,Rr={};function xs(n,i){ys(n,i),ys(n+"Capture",i)}function ys(n,i){for(Rr[n]=i,n=0;n<i.length;n++)ps.add(i[n])}var kn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Rn={},bl={};function Cd(n){return Xe.call(bl,n)?!0:Xe.call(Rn,n)?!1:kn.test(n)?bl[n]=!0:(Rn[n]=!0,!1)}function qA(n,i,o){if(Cd(i))if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+o)}}function Rs(n,i,o){if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+o)}}function Sr(n,i,o,c){if(c===null)n.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(i,o,""+c)}}function zr(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ka(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function vl(n,i,o){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,p=c.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return m.call(this)},set:function(w){o=""+w,p.call(this,w)}}),Object.defineProperty(n,i,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(w){o=""+w},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Qt(n){if(!n._valueTracker){var i=Ka(n)?"checked":"value";n._valueTracker=vl(n,i,""+n[i])}}function Xi(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var o=i.getValue(),c="";return n&&(c=Ka(n)?n.checked?"true":"false":n.value),n=c,n!==o?(i.setValue(n),!0):!1}function Mn(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Ji=/[\n"\\]/g;function Ns(n){return n.replace(Ji,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function YA(n,i,o,c,m,p,w,I){n.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?n.type=w:n.removeAttribute("type"),i!=null?w==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+zr(i)):n.value!==""+zr(i)&&(n.value=""+zr(i)):w!=="submit"&&w!=="reset"||n.removeAttribute("value"),i!=null?wl(n,w,zr(i)):o!=null?wl(n,w,zr(o)):c!=null&&n.removeAttribute("value"),m==null&&p!=null&&(n.defaultChecked=!!p),m!=null&&(n.checked=m&&typeof m!="function"&&typeof m!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?n.name=""+zr(I):n.removeAttribute("name")}function Ed(n,i,o,c,m,p,w,I){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(n.type=p),i!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||i!=null)){Qt(n);return}o=o!=null?""+zr(o):"",i=i!=null?""+zr(i):o,I||i===n.value||(n.value=i),n.defaultValue=i}c=c??m,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=I?n.checked:!!c,n.defaultChecked=!!c,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(n.name=w),Qt(n)}function wl(n,i,o){i==="number"&&Mn(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Ga(n,i,o,c){if(n=n.options,i){i={};for(var m=0;m<o.length;m++)i["$"+o[m]]=!0;for(o=0;o<n.length;o++)m=i.hasOwnProperty("$"+n[o].value),n[o].selected!==m&&(n[o].selected=m),m&&c&&(n[o].defaultSelected=!0)}else{for(o=""+zr(o),i=null,m=0;m<n.length;m++){if(n[m].value===o){n[m].selected=!0,c&&(n[m].defaultSelected=!0);return}i!==null||n[m].disabled||(i=n[m])}i!==null&&(i.selected=!0)}}function Nd(n,i,o){if(i!=null&&(i=""+zr(i),i!==n.value&&(n.value=i),o==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=o!=null?""+zr(o):""}function qa(n,i,o,c){if(i==null){if(c!=null){if(o!=null)throw Error(s(92));if(Y(c)){if(1<c.length)throw Error(s(93));c=c[0]}o=c}o==null&&(o=""),i=o}o=zr(i),n.defaultValue=o,c=n.textContent,c===o&&c!==""&&c!==null&&(n.value=c),Qt(n)}function Ss(n,i){if(i){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=i;return}}n.textContent=i}var Sd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Bl(n,i,o){var c=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":c?n.setProperty(i,o):typeof o!="number"||o===0||Sd.has(i)?i==="float"?n.cssFloat=o:n[i]=(""+o).trim():n[i]=o+"px"}function Cl(n,i,o){if(i!=null&&typeof i!="object")throw Error(s(62));if(n=n.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var m in i)c=i[m],i.hasOwnProperty(m)&&o[m]!==c&&Bl(n,m,c)}else for(var p in i)i.hasOwnProperty(p)&&Bl(n,p,i[p])}function $A(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ya=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function XA(n){return Ya.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function pn(){}var El=null;function $s(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var $a=null,Ln=null;function Wi(n){var i=$e(n);if(i&&(n=i.stateNode)){var o=n[yr]||null;e:switch(n=i.stateNode,i.type){case"input":if(YA(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Ns(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var c=o[i];if(c!==n&&c.form===n.form){var m=c[yr]||null;if(!m)throw Error(s(90));YA(c,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(i=0;i<o.length;i++)c=o[i],c.form===n.form&&Xi(c)}break e;case"textarea":Nd(n,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Ga(n,!!o.multiple,i,!1)}}}var JA=!1;function Xa(n,i,o){if(JA)return n(i,o);JA=!0;try{var c=n(i);return c}finally{if(JA=!1,($a!==null||Ln!==null)&&(vu(),$a&&(i=$a,n=Ln,Ln=$a=null,Wi(i),n)))for(i=0;i<n.length;i++)Wi(n[i])}}function xn(n,i){var o=n.stateNode;if(o===null)return null;var c=o[yr]||null;if(c===null)return null;o=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(s(231,i,typeof o));return o}var Xs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zi=!1;if(Xs)try{var Dt={};Object.defineProperty(Dt,"passive",{get:function(){Zi=!0}}),window.addEventListener("test",Dt,Dt),window.removeEventListener("test",Dt,Dt)}catch{Zi=!1}var Hn=null,Nl=null,eA=null;function Sl(){if(eA)return eA;var n,i=Nl,o=i.length,c,m="value"in Hn?Hn.value:Hn.textContent,p=m.length;for(n=0;n<o&&i[n]===m[n];n++);var w=o-n;for(c=1;c<=w&&i[o-c]===m[p-c];c++);return eA=m.slice(n,1<c?1-c:void 0)}function tA(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function fa(){return!0}function yn(){return!1}function Jr(n){function i(o,c,m,p,w){this._reactName=o,this._targetInst=m,this.type=c,this.nativeEvent=p,this.target=w,this.currentTarget=null;for(var I in n)n.hasOwnProperty(I)&&(o=n[I],this[I]=o?o(p):p[I]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?fa:yn,this.isPropagationStopped=yn,this}return y(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=fa)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=fa)},persist:function(){},isPersistent:fa}),i}var ma={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},On=Jr(ma),Ja=y({},ma,{view:0,detail:0}),jl=Jr(Ja),Wa,WA,Pn,ZA=y({},Ja,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Za,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Pn&&(Pn&&n.type==="mousemove"?(Wa=n.screenX-Pn.screenX,WA=n.screenY-Pn.screenY):WA=Wa=0,Pn=n),Wa)},movementY:function(n){return"movementY"in n?n.movementY:WA}}),_l=Jr(ZA),rA=y({},ZA,{dataTransfer:0}),_d=Jr(rA),Td=y({},Ja,{relatedTarget:0}),sA=Jr(Td),Tl=y({},ma,{animationName:0,elapsedTime:0,pseudoElement:0}),Ud=Jr(Tl),eo=y({},ma,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Qd=Jr(eo),Fd=y({},ma,{data:0}),Vn=Jr(Fd),Id={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rd(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=kd[n])?!!i[n]:!1}function Za(){return Rd}var bs=y({},Ja,{key:function(n){if(n.key){var i=Id[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=tA(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Dd[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Za,charCode:function(n){return n.type==="keypress"?tA(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?tA(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Md=Jr(bs),Ld=y({},ZA,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ga=Jr(Ld),h=y({},Ja,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Za}),b=Jr(h),B=y({},ma,{propertyName:0,elapsedTime:0,pseudoElement:0}),H=Jr(B),se=y({},ZA,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),ce=Jr(se),Ne=y({},ma,{newState:0,oldState:0}),rt=Jr(Ne),br=[9,13,27,32],Nt=Xs&&"CompositionEvent"in window,Zt=null;Xs&&"documentMode"in document&&(Zt=document.documentMode);var Js=Xs&&"TextEvent"in window&&!Zt,zn=Xs&&(!Nt||Zt&&8<Zt&&11>=Zt),bn=" ",vn=!1;function nA(n,i){switch(n){case"keyup":return br.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function to(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ro=!1;function TS(n,i){switch(n){case"compositionend":return to(i);case"keypress":return i.which!==32?null:(vn=!0,bn);case"textInput":return n=i.data,n===bn&&vn?null:n;default:return null}}function US(n,i){if(ro)return n==="compositionend"||!Nt&&nA(n,i)?(n=Sl(),eA=Nl=Hn=null,ro=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return zn&&i.locale!=="ko"?null:i.data;default:return null}}var QS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ty(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!QS[n.type]:i==="textarea"}function ry(n,i,o,c){$a?Ln?Ln.push(c):Ln=[c]:$a=c,i=ju(i,"onChange"),0<i.length&&(o=new On("onChange","change",null,o,c),n.push({event:o,listeners:i}))}var Ul=null,Ql=null;function FS(n){Mv(n,0)}function Hd(n){var i=ur(n);if(Xi(i))return n}function sy(n,i){if(n==="change")return i}var ny=!1;if(Xs){var Jf;if(Xs){var Wf="oninput"in document;if(!Wf){var ay=document.createElement("div");ay.setAttribute("oninput","return;"),Wf=typeof ay.oninput=="function"}Jf=Wf}else Jf=!1;ny=Jf&&(!document.documentMode||9<document.documentMode)}function iy(){Ul&&(Ul.detachEvent("onpropertychange",Ay),Ql=Ul=null)}function Ay(n){if(n.propertyName==="value"&&Hd(Ql)){var i=[];ry(i,Ql,n,$s(n)),Xa(FS,i)}}function IS(n,i,o){n==="focusin"?(iy(),Ul=i,Ql=o,Ul.attachEvent("onpropertychange",Ay)):n==="focusout"&&iy()}function DS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Hd(Ql)}function kS(n,i){if(n==="click")return Hd(i)}function RS(n,i){if(n==="input"||n==="change")return Hd(i)}function MS(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Ms=typeof Object.is=="function"?Object.is:MS;function Fl(n,i){if(Ms(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var o=Object.keys(n),c=Object.keys(i);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var m=o[c];if(!Xe.call(i,m)||!Ms(n[m],i[m]))return!1}return!0}function oy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function ly(n,i){var o=oy(n);n=0;for(var c;o;){if(o.nodeType===3){if(c=n+o.textContent.length,n<=i&&c>=i)return{node:o,offset:i-n};n=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=oy(o)}}function cy(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?cy(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function dy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Mn(n.document);i instanceof n.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)n=i.contentWindow;else break;i=Mn(n.document)}return i}function Zf(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var LS=Xs&&"documentMode"in document&&11>=document.documentMode,so=null,em=null,Il=null,tm=!1;function uy(n,i,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;tm||so==null||so!==Mn(c)||(c=so,"selectionStart"in c&&Zf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Il&&Fl(Il,c)||(Il=c,c=ju(em,"onSelect"),0<c.length&&(i=new On("onSelect","select",null,i,o),n.push({event:i,listeners:c}),i.target=so)))}function aA(n,i){var o={};return o[n.toLowerCase()]=i.toLowerCase(),o["Webkit"+n]="webkit"+i,o["Moz"+n]="moz"+i,o}var no={animationend:aA("Animation","AnimationEnd"),animationiteration:aA("Animation","AnimationIteration"),animationstart:aA("Animation","AnimationStart"),transitionrun:aA("Transition","TransitionRun"),transitionstart:aA("Transition","TransitionStart"),transitioncancel:aA("Transition","TransitionCancel"),transitionend:aA("Transition","TransitionEnd")},rm={},hy={};Xs&&(hy=document.createElement("div").style,"AnimationEvent"in window||(delete no.animationend.animation,delete no.animationiteration.animation,delete no.animationstart.animation),"TransitionEvent"in window||delete no.transitionend.transition);function iA(n){if(rm[n])return rm[n];if(!no[n])return n;var i=no[n],o;for(o in i)if(i.hasOwnProperty(o)&&o in hy)return rm[n]=i[o];return n}var fy=iA("animationend"),my=iA("animationiteration"),gy=iA("animationstart"),HS=iA("transitionrun"),OS=iA("transitionstart"),PS=iA("transitioncancel"),py=iA("transitionend"),xy=new Map,sm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");sm.push("scrollEnd");function wn(n,i){xy.set(n,i),xs(i,[n])}var Od=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Ws=[],ao=0,nm=0;function Pd(){for(var n=ao,i=nm=ao=0;i<n;){var o=Ws[i];Ws[i++]=null;var c=Ws[i];Ws[i++]=null;var m=Ws[i];Ws[i++]=null;var p=Ws[i];if(Ws[i++]=null,c!==null&&m!==null){var w=c.pending;w===null?m.next=m:(m.next=w.next,w.next=m),c.pending=m}p!==0&&yy(o,m,p)}}function Vd(n,i,o,c){Ws[ao++]=n,Ws[ao++]=i,Ws[ao++]=o,Ws[ao++]=c,nm|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function am(n,i,o,c){return Vd(n,i,o,c),zd(n)}function AA(n,i){return Vd(n,null,null,i),zd(n)}function yy(n,i,o){n.lanes|=o;var c=n.alternate;c!==null&&(c.lanes|=o);for(var m=!1,p=n.return;p!==null;)p.childLanes|=o,c=p.alternate,c!==null&&(c.childLanes|=o),p.tag===22&&(n=p.stateNode,n===null||n._visibility&1||(m=!0)),n=p,p=p.return;return n.tag===3?(p=n.stateNode,m&&i!==null&&(m=31-Vt(o),n=p.hiddenUpdates,c=n[m],c===null?n[m]=[i]:c.push(i),i.lane=o|536870912),p):null}function zd(n){if(50<rc)throw rc=0,fg=null,Error(s(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var io={};function VS(n,i,o,c){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ls(n,i,o,c){return new VS(n,i,o,c)}function im(n){return n=n.prototype,!(!n||!n.isReactComponent)}function pa(n,i){var o=n.alternate;return o===null?(o=Ls(n.tag,i,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=i,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,i=n.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function by(n,i){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Kd(n,i,o,c,m,p){var w=0;if(c=n,typeof n=="function")im(n)&&(w=1);else if(typeof n=="string")w=Yj(n,o,me.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case C:return n=Ls(31,o,i,m),n.elementType=C,n.lanes=p,n;case j:return oA(o.children,m,p,i);case V:w=8,m|=24;break;case P:return n=Ls(12,o,i,m|2),n.elementType=P,n.lanes=p,n;case te:return n=Ls(13,o,i,m),n.elementType=te,n.lanes=p,n;case z:return n=Ls(19,o,i,m),n.elementType=z,n.lanes=p,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case q:w=10;break e;case G:w=9;break e;case W:w=11;break e;case E:w=14;break e;case N:w=16,c=null;break e}w=29,o=Error(s(130,n===null?"null":typeof n,"")),c=null}return i=Ls(w,o,i,m),i.elementType=n,i.type=c,i.lanes=p,i}function oA(n,i,o,c){return n=Ls(7,n,c,i),n.lanes=o,n}function Am(n,i,o){return n=Ls(6,n,null,i),n.lanes=o,n}function vy(n){var i=Ls(18,null,null,0);return i.stateNode=n,i}function om(n,i,o){return i=Ls(4,n.children!==null?n.children:[],n.key,i),i.lanes=o,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var wy=new WeakMap;function Zs(n,i){if(typeof n=="object"&&n!==null){var o=wy.get(n);return o!==void 0?o:(i={value:n,source:i,stack:ot(i)},wy.set(n,i),i)}return{value:n,source:i,stack:ot(i)}}var Ao=[],oo=0,Gd=null,Dl=0,en=[],tn=0,ei=null,Kn=1,Gn="";function xa(n,i){Ao[oo++]=Dl,Ao[oo++]=Gd,Gd=n,Dl=i}function By(n,i,o){en[tn++]=Kn,en[tn++]=Gn,en[tn++]=ei,ei=n;var c=Kn;n=Gn;var m=32-Vt(c)-1;c&=~(1<<m),o+=1;var p=32-Vt(i)+m;if(30<p){var w=m-m%5;p=(c&(1<<w)-1).toString(32),c>>=w,m-=w,Kn=1<<32-Vt(i)+m|o<<m|c,Gn=p+n}else Kn=1<<p|o<<m|c,Gn=n}function lm(n){n.return!==null&&(xa(n,1),By(n,1,0))}function cm(n){for(;n===Gd;)Gd=Ao[--oo],Ao[oo]=null,Dl=Ao[--oo],Ao[oo]=null;for(;n===ei;)ei=en[--tn],en[tn]=null,Gn=en[--tn],en[tn]=null,Kn=en[--tn],en[tn]=null}function Cy(n,i){en[tn++]=Kn,en[tn++]=Gn,en[tn++]=ei,Kn=i.id,Gn=i.overflow,ei=n}var Wr=null,Gt=null,yt=!1,ti=null,rn=!1,dm=Error(s(519));function ri(n){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw kl(Zs(i,n)),dm}function Ey(n){var i=n.stateNode,o=n.type,c=n.memoizedProps;switch(i[dr]=n,i[yr]=c,o){case"dialog":dt("cancel",i),dt("close",i);break;case"iframe":case"object":case"embed":dt("load",i);break;case"video":case"audio":for(o=0;o<nc.length;o++)dt(nc[o],i);break;case"source":dt("error",i);break;case"img":case"image":case"link":dt("error",i),dt("load",i);break;case"details":dt("toggle",i);break;case"input":dt("invalid",i),Ed(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":dt("invalid",i);break;case"textarea":dt("invalid",i),qa(i,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||c.suppressHydrationWarning===!0||Pv(i.textContent,o)?(c.popover!=null&&(dt("beforetoggle",i),dt("toggle",i)),c.onScroll!=null&&dt("scroll",i),c.onScrollEnd!=null&&dt("scrollend",i),c.onClick!=null&&(i.onclick=pn),i=!0):i=!1,i||ri(n,!0)}function Ny(n){for(Wr=n.return;Wr;)switch(Wr.tag){case 5:case 31:case 13:rn=!1;return;case 27:case 3:rn=!0;return;default:Wr=Wr.return}}function lo(n){if(n!==Wr)return!1;if(!yt)return Ny(n),yt=!0,!1;var i=n.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||_g(n.type,n.memoizedProps)),o=!o),o&&Gt&&ri(n),Ny(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));Gt=Jv(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));Gt=Jv(n)}else i===27?(i=Gt,gi(n.type)?(n=Ig,Ig=null,Gt=n):Gt=i):Gt=Wr?nn(n.stateNode.nextSibling):null;return!0}function lA(){Gt=Wr=null,yt=!1}function um(){var n=ti;return n!==null&&(Us===null?Us=n:Us.push.apply(Us,n),ti=null),n}function kl(n){ti===null?ti=[n]:ti.push(n)}var hm=O(null),cA=null,ya=null;function si(n,i,o){Ae(hm,i._currentValue),i._currentValue=o}function ba(n){n._currentValue=hm.current,X(hm)}function fm(n,i,o){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===o)break;n=n.return}}function mm(n,i,o,c){var m=n.child;for(m!==null&&(m.return=n);m!==null;){var p=m.dependencies;if(p!==null){var w=m.child;p=p.firstContext;e:for(;p!==null;){var I=p;p=m;for(var $=0;$<i.length;$++)if(I.context===i[$]){p.lanes|=o,I=p.alternate,I!==null&&(I.lanes|=o),fm(p.return,o,n),c||(w=null);break e}p=I.next}}else if(m.tag===18){if(w=m.return,w===null)throw Error(s(341));w.lanes|=o,p=w.alternate,p!==null&&(p.lanes|=o),fm(w,o,n),w=null}else w=m.child;if(w!==null)w.return=m;else for(w=m;w!==null;){if(w===n){w=null;break}if(m=w.sibling,m!==null){m.return=w.return,w=m;break}w=w.return}m=w}}function co(n,i,o,c){n=null;for(var m=i,p=!1;m!==null;){if(!p){if((m.flags&524288)!==0)p=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var w=m.alternate;if(w===null)throw Error(s(387));if(w=w.memoizedProps,w!==null){var I=m.type;Ms(m.pendingProps.value,w.value)||(n!==null?n.push(I):n=[I])}}else if(m===ke.current){if(w=m.alternate,w===null)throw Error(s(387));w.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(n!==null?n.push(lc):n=[lc])}m=m.return}n!==null&&mm(i,n,o,c),i.flags|=262144}function qd(n){for(n=n.firstContext;n!==null;){if(!Ms(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function dA(n){cA=n,ya=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Zr(n){return Sy(cA,n)}function Yd(n,i){return cA===null&&dA(n),Sy(n,i)}function Sy(n,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},ya===null){if(n===null)throw Error(s(308));ya=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else ya=ya.next=i;return o}var zS=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(o,c){n.push(c)}};this.abort=function(){i.aborted=!0,n.forEach(function(o){return o()})}},KS=r.unstable_scheduleCallback,GS=r.unstable_NormalPriority,jr={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gm(){return{controller:new zS,data:new Map,refCount:0}}function Rl(n){n.refCount--,n.refCount===0&&KS(GS,function(){n.controller.abort()})}var Ml=null,pm=0,uo=0,ho=null;function qS(n,i){if(Ml===null){var o=Ml=[];pm=0,uo=bg(),ho={status:"pending",value:void 0,then:function(c){o.push(c)}}}return pm++,i.then(jy,jy),i}function jy(){if(--pm===0&&Ml!==null){ho!==null&&(ho.status="fulfilled");var n=Ml;Ml=null,uo=0,ho=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function YS(n,i){var o=[],c={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return n.then(function(){c.status="fulfilled",c.value=i;for(var m=0;m<o.length;m++)(0,o[m])(i)},function(m){for(c.status="rejected",c.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),c}var _y=M.S;M.S=function(n,i){uv=sr(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&qS(n,i),_y!==null&&_y(n,i)};var uA=O(null);function xm(){var n=uA.current;return n!==null?n:Ot.pooledCache}function $d(n,i){i===null?Ae(uA,uA.current):Ae(uA,i.pool)}function Ty(){var n=xm();return n===null?null:{parent:jr._currentValue,pool:n}}var fo=Error(s(460)),ym=Error(s(474)),Xd=Error(s(542)),Jd={then:function(){}};function Uy(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Qy(n,i,o){switch(o=n[o],o===void 0?n.push(i):o!==i&&(i.then(pn,pn),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Iy(n),n;default:if(typeof i.status=="string")i.then(pn,pn);else{if(n=Ot,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=i,n.status="pending",n.then(function(c){if(i.status==="pending"){var m=i;m.status="fulfilled",m.value=c}},function(c){if(i.status==="pending"){var m=i;m.status="rejected",m.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Iy(n),n}throw fA=i,fo}}function hA(n){try{var i=n._init;return i(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(fA=o,fo):o}}var fA=null;function Fy(){if(fA===null)throw Error(s(459));var n=fA;return fA=null,n}function Iy(n){if(n===fo||n===Xd)throw Error(s(483))}var mo=null,Ll=0;function Wd(n){var i=Ll;return Ll+=1,mo===null&&(mo=[]),Qy(mo,n,i)}function Hl(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Zd(n,i){throw i.$$typeof===v?Error(s(525)):(n=Object.prototype.toString.call(i),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function Dy(n){function i(re,Z){if(n){var ae=re.deletions;ae===null?(re.deletions=[Z],re.flags|=16):ae.push(Z)}}function o(re,Z){if(!n)return null;for(;Z!==null;)i(re,Z),Z=Z.sibling;return null}function c(re){for(var Z=new Map;re!==null;)re.key!==null?Z.set(re.key,re):Z.set(re.index,re),re=re.sibling;return Z}function m(re,Z){return re=pa(re,Z),re.index=0,re.sibling=null,re}function p(re,Z,ae){return re.index=ae,n?(ae=re.alternate,ae!==null?(ae=ae.index,ae<Z?(re.flags|=67108866,Z):ae):(re.flags|=67108866,Z)):(re.flags|=1048576,Z)}function w(re){return n&&re.alternate===null&&(re.flags|=67108866),re}function I(re,Z,ae,xe){return Z===null||Z.tag!==6?(Z=Am(ae,re.mode,xe),Z.return=re,Z):(Z=m(Z,ae),Z.return=re,Z)}function $(re,Z,ae,xe){var Oe=ae.type;return Oe===j?fe(re,Z,ae.props.children,xe,ae.key):Z!==null&&(Z.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===N&&hA(Oe)===Z.type)?(Z=m(Z,ae.props),Hl(Z,ae),Z.return=re,Z):(Z=Kd(ae.type,ae.key,ae.props,null,re.mode,xe),Hl(Z,ae),Z.return=re,Z)}function ie(re,Z,ae,xe){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==ae.containerInfo||Z.stateNode.implementation!==ae.implementation?(Z=om(ae,re.mode,xe),Z.return=re,Z):(Z=m(Z,ae.children||[]),Z.return=re,Z)}function fe(re,Z,ae,xe,Oe){return Z===null||Z.tag!==7?(Z=oA(ae,re.mode,xe,Oe),Z.return=re,Z):(Z=m(Z,ae),Z.return=re,Z)}function ye(re,Z,ae){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Z=Am(""+Z,re.mode,ae),Z.return=re,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case S:return ae=Kd(Z.type,Z.key,Z.props,null,re.mode,ae),Hl(ae,Z),ae.return=re,ae;case R:return Z=om(Z,re.mode,ae),Z.return=re,Z;case N:return Z=hA(Z),ye(re,Z,ae)}if(Y(Z)||T(Z))return Z=oA(Z,re.mode,ae,null),Z.return=re,Z;if(typeof Z.then=="function")return ye(re,Wd(Z),ae);if(Z.$$typeof===q)return ye(re,Yd(re,Z),ae);Zd(re,Z)}return null}function oe(re,Z,ae,xe){var Oe=Z!==null?Z.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return Oe!==null?null:I(re,Z,""+ae,xe);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case S:return ae.key===Oe?$(re,Z,ae,xe):null;case R:return ae.key===Oe?ie(re,Z,ae,xe):null;case N:return ae=hA(ae),oe(re,Z,ae,xe)}if(Y(ae)||T(ae))return Oe!==null?null:fe(re,Z,ae,xe,null);if(typeof ae.then=="function")return oe(re,Z,Wd(ae),xe);if(ae.$$typeof===q)return oe(re,Z,Yd(re,ae),xe);Zd(re,ae)}return null}function de(re,Z,ae,xe,Oe){if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return re=re.get(ae)||null,I(Z,re,""+xe,Oe);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case S:return re=re.get(xe.key===null?ae:xe.key)||null,$(Z,re,xe,Oe);case R:return re=re.get(xe.key===null?ae:xe.key)||null,ie(Z,re,xe,Oe);case N:return xe=hA(xe),de(re,Z,ae,xe,Oe)}if(Y(xe)||T(xe))return re=re.get(ae)||null,fe(Z,re,xe,Oe,null);if(typeof xe.then=="function")return de(re,Z,ae,Wd(xe),Oe);if(xe.$$typeof===q)return de(re,Z,ae,Yd(Z,xe),Oe);Zd(Z,xe)}return null}function Fe(re,Z,ae,xe){for(var Oe=null,Bt=null,Re=Z,at=Z=0,ft=null;Re!==null&&at<ae.length;at++){Re.index>at?(ft=Re,Re=null):ft=Re.sibling;var Ct=oe(re,Re,ae[at],xe);if(Ct===null){Re===null&&(Re=ft);break}n&&Re&&Ct.alternate===null&&i(re,Re),Z=p(Ct,Z,at),Bt===null?Oe=Ct:Bt.sibling=Ct,Bt=Ct,Re=ft}if(at===ae.length)return o(re,Re),yt&&xa(re,at),Oe;if(Re===null){for(;at<ae.length;at++)Re=ye(re,ae[at],xe),Re!==null&&(Z=p(Re,Z,at),Bt===null?Oe=Re:Bt.sibling=Re,Bt=Re);return yt&&xa(re,at),Oe}for(Re=c(Re);at<ae.length;at++)ft=de(Re,re,at,ae[at],xe),ft!==null&&(n&&ft.alternate!==null&&Re.delete(ft.key===null?at:ft.key),Z=p(ft,Z,at),Bt===null?Oe=ft:Bt.sibling=ft,Bt=ft);return n&&Re.forEach(function(vi){return i(re,vi)}),yt&&xa(re,at),Oe}function qe(re,Z,ae,xe){if(ae==null)throw Error(s(151));for(var Oe=null,Bt=null,Re=Z,at=Z=0,ft=null,Ct=ae.next();Re!==null&&!Ct.done;at++,Ct=ae.next()){Re.index>at?(ft=Re,Re=null):ft=Re.sibling;var vi=oe(re,Re,Ct.value,xe);if(vi===null){Re===null&&(Re=ft);break}n&&Re&&vi.alternate===null&&i(re,Re),Z=p(vi,Z,at),Bt===null?Oe=vi:Bt.sibling=vi,Bt=vi,Re=ft}if(Ct.done)return o(re,Re),yt&&xa(re,at),Oe;if(Re===null){for(;!Ct.done;at++,Ct=ae.next())Ct=ye(re,Ct.value,xe),Ct!==null&&(Z=p(Ct,Z,at),Bt===null?Oe=Ct:Bt.sibling=Ct,Bt=Ct);return yt&&xa(re,at),Oe}for(Re=c(Re);!Ct.done;at++,Ct=ae.next())Ct=de(Re,re,at,Ct.value,xe),Ct!==null&&(n&&Ct.alternate!==null&&Re.delete(Ct.key===null?at:Ct.key),Z=p(Ct,Z,at),Bt===null?Oe=Ct:Bt.sibling=Ct,Bt=Ct);return n&&Re.forEach(function(a_){return i(re,a_)}),yt&&xa(re,at),Oe}function Mt(re,Z,ae,xe){if(typeof ae=="object"&&ae!==null&&ae.type===j&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case S:e:{for(var Oe=ae.key;Z!==null;){if(Z.key===Oe){if(Oe=ae.type,Oe===j){if(Z.tag===7){o(re,Z.sibling),xe=m(Z,ae.props.children),xe.return=re,re=xe;break e}}else if(Z.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===N&&hA(Oe)===Z.type){o(re,Z.sibling),xe=m(Z,ae.props),Hl(xe,ae),xe.return=re,re=xe;break e}o(re,Z);break}else i(re,Z);Z=Z.sibling}ae.type===j?(xe=oA(ae.props.children,re.mode,xe,ae.key),xe.return=re,re=xe):(xe=Kd(ae.type,ae.key,ae.props,null,re.mode,xe),Hl(xe,ae),xe.return=re,re=xe)}return w(re);case R:e:{for(Oe=ae.key;Z!==null;){if(Z.key===Oe)if(Z.tag===4&&Z.stateNode.containerInfo===ae.containerInfo&&Z.stateNode.implementation===ae.implementation){o(re,Z.sibling),xe=m(Z,ae.children||[]),xe.return=re,re=xe;break e}else{o(re,Z);break}else i(re,Z);Z=Z.sibling}xe=om(ae,re.mode,xe),xe.return=re,re=xe}return w(re);case N:return ae=hA(ae),Mt(re,Z,ae,xe)}if(Y(ae))return Fe(re,Z,ae,xe);if(T(ae)){if(Oe=T(ae),typeof Oe!="function")throw Error(s(150));return ae=Oe.call(ae),qe(re,Z,ae,xe)}if(typeof ae.then=="function")return Mt(re,Z,Wd(ae),xe);if(ae.$$typeof===q)return Mt(re,Z,Yd(re,ae),xe);Zd(re,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint"?(ae=""+ae,Z!==null&&Z.tag===6?(o(re,Z.sibling),xe=m(Z,ae),xe.return=re,re=xe):(o(re,Z),xe=Am(ae,re.mode,xe),xe.return=re,re=xe),w(re)):o(re,Z)}return function(re,Z,ae,xe){try{Ll=0;var Oe=Mt(re,Z,ae,xe);return mo=null,Oe}catch(Re){if(Re===fo||Re===Xd)throw Re;var Bt=Ls(29,Re,null,re.mode);return Bt.lanes=xe,Bt.return=re,Bt}}}var mA=Dy(!0),ky=Dy(!1),ni=!1;function bm(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vm(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ai(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ii(n,i,o){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(St&2)!==0){var m=c.pending;return m===null?i.next=i:(i.next=m.next,m.next=i),c.pending=i,i=zd(n),yy(n,null,o),i}return Vd(n,c,i,o),zd(n)}function Ol(n,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var c=i.lanes;c&=n.pendingLanes,o|=c,i.lanes=o,Va(n,o)}}function wm(n,i){var o=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var m=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var w={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?m=p=w:p=p.next=w,o=o.next}while(o!==null);p===null?m=p=i:p=p.next=i}else m=p=i;o={baseState:c.baseState,firstBaseUpdate:m,lastBaseUpdate:p,shared:c.shared,callbacks:c.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=i:n.next=i,o.lastBaseUpdate=i}var Bm=!1;function Pl(){if(Bm){var n=ho;if(n!==null)throw n}}function Vl(n,i,o,c){Bm=!1;var m=n.updateQueue;ni=!1;var p=m.firstBaseUpdate,w=m.lastBaseUpdate,I=m.shared.pending;if(I!==null){m.shared.pending=null;var $=I,ie=$.next;$.next=null,w===null?p=ie:w.next=ie,w=$;var fe=n.alternate;fe!==null&&(fe=fe.updateQueue,I=fe.lastBaseUpdate,I!==w&&(I===null?fe.firstBaseUpdate=ie:I.next=ie,fe.lastBaseUpdate=$))}if(p!==null){var ye=m.baseState;w=0,fe=ie=$=null,I=p;do{var oe=I.lane&-536870913,de=oe!==I.lane;if(de?(ht&oe)===oe:(c&oe)===oe){oe!==0&&oe===uo&&(Bm=!0),fe!==null&&(fe=fe.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var Fe=n,qe=I;oe=i;var Mt=o;switch(qe.tag){case 1:if(Fe=qe.payload,typeof Fe=="function"){ye=Fe.call(Mt,ye,oe);break e}ye=Fe;break e;case 3:Fe.flags=Fe.flags&-65537|128;case 0:if(Fe=qe.payload,oe=typeof Fe=="function"?Fe.call(Mt,ye,oe):Fe,oe==null)break e;ye=y({},ye,oe);break e;case 2:ni=!0}}oe=I.callback,oe!==null&&(n.flags|=64,de&&(n.flags|=8192),de=m.callbacks,de===null?m.callbacks=[oe]:de.push(oe))}else de={lane:oe,tag:I.tag,payload:I.payload,callback:I.callback,next:null},fe===null?(ie=fe=de,$=ye):fe=fe.next=de,w|=oe;if(I=I.next,I===null){if(I=m.shared.pending,I===null)break;de=I,I=de.next,de.next=null,m.lastBaseUpdate=de,m.shared.pending=null}}while(!0);fe===null&&($=ye),m.baseState=$,m.firstBaseUpdate=ie,m.lastBaseUpdate=fe,p===null&&(m.shared.lanes=0),di|=w,n.lanes=w,n.memoizedState=ye}}function Ry(n,i){if(typeof n!="function")throw Error(s(191,n));n.call(i)}function My(n,i){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Ry(o[n],i)}var go=O(null),eu=O(0);function Ly(n,i){n=_a,Ae(eu,n),Ae(go,i),_a=n|i.baseLanes}function Cm(){Ae(eu,_a),Ae(go,go.current)}function Em(){_a=eu.current,X(go),X(eu)}var Hs=O(null),sn=null;function Ai(n){var i=n.alternate;Ae(vr,vr.current&1),Ae(Hs,n),sn===null&&(i===null||go.current!==null||i.memoizedState!==null)&&(sn=n)}function Nm(n){Ae(vr,vr.current),Ae(Hs,n),sn===null&&(sn=n)}function Hy(n){n.tag===22?(Ae(vr,vr.current),Ae(Hs,n),sn===null&&(sn=n)):oi()}function oi(){Ae(vr,vr.current),Ae(Hs,Hs.current)}function Os(n){X(Hs),sn===n&&(sn=null),X(vr)}var vr=O(0);function tu(n){for(var i=n;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Qg(o)||Fg(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var va=0,st=null,kt=null,_r=null,ru=!1,po=!1,gA=!1,su=0,zl=0,xo=null,$S=0;function hr(){throw Error(s(321))}function Sm(n,i){if(i===null)return!1;for(var o=0;o<i.length&&o<n.length;o++)if(!Ms(n[o],i[o]))return!1;return!0}function jm(n,i,o,c,m,p){return va=p,st=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,M.H=n===null||n.memoizedState===null?Bb:Vm,gA=!1,p=o(c,m),gA=!1,po&&(p=Py(i,o,c,m)),Oy(n),p}function Oy(n){M.H=ql;var i=kt!==null&&kt.next!==null;if(va=0,_r=kt=st=null,ru=!1,zl=0,xo=null,i)throw Error(s(300));n===null||Tr||(n=n.dependencies,n!==null&&qd(n)&&(Tr=!0))}function Py(n,i,o,c){st=n;var m=0;do{if(po&&(xo=null),zl=0,po=!1,25<=m)throw Error(s(301));if(m+=1,_r=kt=null,n.updateQueue!=null){var p=n.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}M.H=Cb,p=i(o,c)}while(po);return p}function XS(){var n=M.H,i=n.useState()[0];return i=typeof i.then=="function"?Kl(i):i,n=n.useState()[0],(kt!==null?kt.memoizedState:null)!==n&&(st.flags|=1024),i}function _m(){var n=su!==0;return su=0,n}function Tm(n,i,o){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~o}function Um(n){if(ru){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}ru=!1}va=0,_r=kt=st=null,po=!1,zl=su=0,xo=null}function vs(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _r===null?st.memoizedState=_r=n:_r=_r.next=n,_r}function wr(){if(kt===null){var n=st.alternate;n=n!==null?n.memoizedState:null}else n=kt.next;var i=_r===null?st.memoizedState:_r.next;if(i!==null)_r=i,kt=n;else{if(n===null)throw st.alternate===null?Error(s(467)):Error(s(310));kt=n,n={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},_r===null?st.memoizedState=_r=n:_r=_r.next=n}return _r}function nu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Kl(n){var i=zl;return zl+=1,xo===null&&(xo=[]),n=Qy(xo,n,i),i=st,(_r===null?i.memoizedState:_r.next)===null&&(i=i.alternate,M.H=i===null||i.memoizedState===null?Bb:Vm),n}function au(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Kl(n);if(n.$$typeof===q)return Zr(n)}throw Error(s(438,String(n)))}function Qm(n){var i=null,o=st.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var c=st.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(m){return m.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=nu(),st.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(n),c=0;c<n;c++)o[c]=D;return i.index++,o}function wa(n,i){return typeof i=="function"?i(n):i}function iu(n){var i=wr();return Fm(i,kt,n)}function Fm(n,i,o){var c=n.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=o;var m=n.baseQueue,p=c.pending;if(p!==null){if(m!==null){var w=m.next;m.next=p.next,p.next=w}i.baseQueue=m=p,c.pending=null}if(p=n.baseState,m===null)n.memoizedState=p;else{i=m.next;var I=w=null,$=null,ie=i,fe=!1;do{var ye=ie.lane&-536870913;if(ye!==ie.lane?(ht&ye)===ye:(va&ye)===ye){var oe=ie.revertLane;if(oe===0)$!==null&&($=$.next={lane:0,revertLane:0,gesture:null,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null}),ye===uo&&(fe=!0);else if((va&oe)===oe){ie=ie.next,oe===uo&&(fe=!0);continue}else ye={lane:0,revertLane:ie.revertLane,gesture:null,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},$===null?(I=$=ye,w=p):$=$.next=ye,st.lanes|=oe,di|=oe;ye=ie.action,gA&&o(p,ye),p=ie.hasEagerState?ie.eagerState:o(p,ye)}else oe={lane:ye,revertLane:ie.revertLane,gesture:ie.gesture,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},$===null?(I=$=oe,w=p):$=$.next=oe,st.lanes|=ye,di|=ye;ie=ie.next}while(ie!==null&&ie!==i);if($===null?w=p:$.next=I,!Ms(p,n.memoizedState)&&(Tr=!0,fe&&(o=ho,o!==null)))throw o;n.memoizedState=p,n.baseState=w,n.baseQueue=$,c.lastRenderedState=p}return m===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function Im(n){var i=wr(),o=i.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=n;var c=o.dispatch,m=o.pending,p=i.memoizedState;if(m!==null){o.pending=null;var w=m=m.next;do p=n(p,w.action),w=w.next;while(w!==m);Ms(p,i.memoizedState)||(Tr=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),o.lastRenderedState=p}return[p,c]}function Vy(n,i,o){var c=st,m=wr(),p=yt;if(p){if(o===void 0)throw Error(s(407));o=o()}else o=i();var w=!Ms((kt||m).memoizedState,o);if(w&&(m.memoizedState=o,Tr=!0),m=m.queue,Rm(Gy.bind(null,c,m,n),[n]),m.getSnapshot!==i||w||_r!==null&&_r.memoizedState.tag&1){if(c.flags|=2048,yo(9,{destroy:void 0},Ky.bind(null,c,m,o,i),null),Ot===null)throw Error(s(349));p||(va&127)!==0||zy(c,i,o)}return o}function zy(n,i,o){n.flags|=16384,n={getSnapshot:i,value:o},i=st.updateQueue,i===null?(i=nu(),st.updateQueue=i,i.stores=[n]):(o=i.stores,o===null?i.stores=[n]:o.push(n))}function Ky(n,i,o,c){i.value=o,i.getSnapshot=c,qy(i)&&Yy(n)}function Gy(n,i,o){return o(function(){qy(i)&&Yy(n)})}function qy(n){var i=n.getSnapshot;n=n.value;try{var o=i();return!Ms(n,o)}catch{return!0}}function Yy(n){var i=AA(n,2);i!==null&&Qs(i,n,2)}function Dm(n){var i=vs();if(typeof n=="function"){var o=n;if(n=o(),gA){Vr(!0);try{o()}finally{Vr(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:n},i}function $y(n,i,o,c){return n.baseState=o,Fm(n,kt,typeof c=="function"?c:wa)}function JS(n,i,o,c,m){if(lu(n))throw Error(s(485));if(n=i.action,n!==null){var p={payload:m,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){p.listeners.push(w)}};M.T!==null?o(!0):p.isTransition=!1,c(p),o=i.pending,o===null?(p.next=i.pending=p,Xy(i,p)):(p.next=o.next,i.pending=o.next=p)}}function Xy(n,i){var o=i.action,c=i.payload,m=n.state;if(i.isTransition){var p=M.T,w={};M.T=w;try{var I=o(m,c),$=M.S;$!==null&&$(w,I),Jy(n,i,I)}catch(ie){km(n,i,ie)}finally{p!==null&&w.types!==null&&(p.types=w.types),M.T=p}}else try{p=o(m,c),Jy(n,i,p)}catch(ie){km(n,i,ie)}}function Jy(n,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){Wy(n,i,c)},function(c){return km(n,i,c)}):Wy(n,i,o)}function Wy(n,i,o){i.status="fulfilled",i.value=o,Zy(i),n.state=o,i=n.pending,i!==null&&(o=i.next,o===i?n.pending=null:(o=o.next,i.next=o,Xy(n,o)))}function km(n,i,o){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=o,Zy(i),i=i.next;while(i!==c)}n.action=null}function Zy(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function eb(n,i){return i}function tb(n,i){if(yt){var o=Ot.formState;if(o!==null){e:{var c=st;if(yt){if(Gt){t:{for(var m=Gt,p=rn;m.nodeType!==8;){if(!p){m=null;break t}if(m=nn(m.nextSibling),m===null){m=null;break t}}p=m.data,m=p==="F!"||p==="F"?m:null}if(m){Gt=nn(m.nextSibling),c=m.data==="F!";break e}}ri(c)}c=!1}c&&(i=o[0])}}return o=vs(),o.memoizedState=o.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:eb,lastRenderedState:i},o.queue=c,o=bb.bind(null,st,c),c.dispatch=o,c=Dm(!1),p=Pm.bind(null,st,!1,c.queue),c=vs(),m={state:i,dispatch:null,action:n,pending:null},c.queue=m,o=JS.bind(null,st,m,p,o),m.dispatch=o,c.memoizedState=n,[i,o,!1]}function rb(n){var i=wr();return sb(i,kt,n)}function sb(n,i,o){if(i=Fm(n,i,eb)[0],n=iu(wa)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=Kl(i)}catch(w){throw w===fo?Xd:w}else c=i;i=wr();var m=i.queue,p=m.dispatch;return o!==i.memoizedState&&(st.flags|=2048,yo(9,{destroy:void 0},WS.bind(null,m,o),null)),[c,p,n]}function WS(n,i){n.action=i}function nb(n){var i=wr(),o=kt;if(o!==null)return sb(i,o,n);wr(),i=i.memoizedState,o=wr();var c=o.queue.dispatch;return o.memoizedState=n,[i,c,!1]}function yo(n,i,o,c){return n={tag:n,create:o,deps:c,inst:i,next:null},i=st.updateQueue,i===null&&(i=nu(),st.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=n.next=n:(c=o.next,o.next=n,n.next=c,i.lastEffect=n),n}function ab(){return wr().memoizedState}function Au(n,i,o,c){var m=vs();st.flags|=n,m.memoizedState=yo(1|i,{destroy:void 0},o,c===void 0?null:c)}function ou(n,i,o,c){var m=wr();c=c===void 0?null:c;var p=m.memoizedState.inst;kt!==null&&c!==null&&Sm(c,kt.memoizedState.deps)?m.memoizedState=yo(i,p,o,c):(st.flags|=n,m.memoizedState=yo(1|i,p,o,c))}function ib(n,i){Au(8390656,8,n,i)}function Rm(n,i){ou(2048,8,n,i)}function ZS(n){st.flags|=4;var i=st.updateQueue;if(i===null)i=nu(),st.updateQueue=i,i.events=[n];else{var o=i.events;o===null?i.events=[n]:o.push(n)}}function Ab(n){var i=wr().memoizedState;return ZS({ref:i,nextImpl:n}),function(){if((St&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function ob(n,i){return ou(4,2,n,i)}function lb(n,i){return ou(4,4,n,i)}function cb(n,i){if(typeof i=="function"){n=n();var o=i(n);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function db(n,i,o){o=o!=null?o.concat([n]):null,ou(4,4,cb.bind(null,i,n),o)}function Mm(){}function ub(n,i){var o=wr();i=i===void 0?null:i;var c=o.memoizedState;return i!==null&&Sm(i,c[1])?c[0]:(o.memoizedState=[n,i],n)}function hb(n,i){var o=wr();i=i===void 0?null:i;var c=o.memoizedState;if(i!==null&&Sm(i,c[1]))return c[0];if(c=n(),gA){Vr(!0);try{n()}finally{Vr(!1)}}return o.memoizedState=[c,i],c}function Lm(n,i,o){return o===void 0||(va&1073741824)!==0&&(ht&261930)===0?n.memoizedState=i:(n.memoizedState=o,n=fv(),st.lanes|=n,di|=n,o)}function fb(n,i,o,c){return Ms(o,i)?o:go.current!==null?(n=Lm(n,o,c),Ms(n,i)||(Tr=!0),n):(va&42)===0||(va&1073741824)!==0&&(ht&261930)===0?(Tr=!0,n.memoizedState=o):(n=fv(),st.lanes|=n,di|=n,i)}function mb(n,i,o,c,m){var p=F.p;F.p=p!==0&&8>p?p:8;var w=M.T,I={};M.T=I,Pm(n,!1,i,o);try{var $=m(),ie=M.S;if(ie!==null&&ie(I,$),$!==null&&typeof $=="object"&&typeof $.then=="function"){var fe=YS($,c);Gl(n,i,fe,zs(n))}else Gl(n,i,c,zs(n))}catch(ye){Gl(n,i,{then:function(){},status:"rejected",reason:ye},zs())}finally{F.p=p,w!==null&&I.types!==null&&(w.types=I.types),M.T=w}}function ej(){}function Hm(n,i,o,c){if(n.tag!==5)throw Error(s(476));var m=gb(n).queue;mb(n,m,i,K,o===null?ej:function(){return pb(n),o(c)})}function gb(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:K},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:o},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function pb(n){var i=gb(n);i.next===null&&(i=n.alternate.memoizedState),Gl(n,i.next.queue,{},zs())}function Om(){return Zr(lc)}function xb(){return wr().memoizedState}function yb(){return wr().memoizedState}function tj(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var o=zs();n=ai(o);var c=ii(i,n,o);c!==null&&(Qs(c,i,o),Ol(c,i,o)),i={cache:gm()},n.payload=i;return}i=i.return}}function rj(n,i,o){var c=zs();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},lu(n)?vb(i,o):(o=am(n,i,o,c),o!==null&&(Qs(o,n,c),wb(o,i,c)))}function bb(n,i,o){var c=zs();Gl(n,i,o,c)}function Gl(n,i,o,c){var m={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(lu(n))vb(i,m);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var w=i.lastRenderedState,I=p(w,o);if(m.hasEagerState=!0,m.eagerState=I,Ms(I,w))return Vd(n,i,m,0),Ot===null&&Pd(),!1}catch{}if(o=am(n,i,m,c),o!==null)return Qs(o,n,c),wb(o,i,c),!0}return!1}function Pm(n,i,o,c){if(c={lane:2,revertLane:bg(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},lu(n)){if(i)throw Error(s(479))}else i=am(n,o,c,2),i!==null&&Qs(i,n,2)}function lu(n){var i=n.alternate;return n===st||i!==null&&i===st}function vb(n,i){po=ru=!0;var o=n.pending;o===null?i.next=i:(i.next=o.next,o.next=i),n.pending=i}function wb(n,i,o){if((o&4194048)!==0){var c=i.lanes;c&=n.pendingLanes,o|=c,i.lanes=o,Va(n,o)}}var ql={readContext:Zr,use:au,useCallback:hr,useContext:hr,useEffect:hr,useImperativeHandle:hr,useLayoutEffect:hr,useInsertionEffect:hr,useMemo:hr,useReducer:hr,useRef:hr,useState:hr,useDebugValue:hr,useDeferredValue:hr,useTransition:hr,useSyncExternalStore:hr,useId:hr,useHostTransitionStatus:hr,useFormState:hr,useActionState:hr,useOptimistic:hr,useMemoCache:hr,useCacheRefresh:hr};ql.useEffectEvent=hr;var Bb={readContext:Zr,use:au,useCallback:function(n,i){return vs().memoizedState=[n,i===void 0?null:i],n},useContext:Zr,useEffect:ib,useImperativeHandle:function(n,i,o){o=o!=null?o.concat([n]):null,Au(4194308,4,cb.bind(null,i,n),o)},useLayoutEffect:function(n,i){return Au(4194308,4,n,i)},useInsertionEffect:function(n,i){Au(4,2,n,i)},useMemo:function(n,i){var o=vs();i=i===void 0?null:i;var c=n();if(gA){Vr(!0);try{n()}finally{Vr(!1)}}return o.memoizedState=[c,i],c},useReducer:function(n,i,o){var c=vs();if(o!==void 0){var m=o(i);if(gA){Vr(!0);try{o(i)}finally{Vr(!1)}}}else m=i;return c.memoizedState=c.baseState=m,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:m},c.queue=n,n=n.dispatch=rj.bind(null,st,n),[c.memoizedState,n]},useRef:function(n){var i=vs();return n={current:n},i.memoizedState=n},useState:function(n){n=Dm(n);var i=n.queue,o=bb.bind(null,st,i);return i.dispatch=o,[n.memoizedState,o]},useDebugValue:Mm,useDeferredValue:function(n,i){var o=vs();return Lm(o,n,i)},useTransition:function(){var n=Dm(!1);return n=mb.bind(null,st,n.queue,!0,!1),vs().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,o){var c=st,m=vs();if(yt){if(o===void 0)throw Error(s(407));o=o()}else{if(o=i(),Ot===null)throw Error(s(349));(ht&127)!==0||zy(c,i,o)}m.memoizedState=o;var p={value:o,getSnapshot:i};return m.queue=p,ib(Gy.bind(null,c,p,n),[n]),c.flags|=2048,yo(9,{destroy:void 0},Ky.bind(null,c,p,o,i),null),o},useId:function(){var n=vs(),i=Ot.identifierPrefix;if(yt){var o=Gn,c=Kn;o=(c&~(1<<32-Vt(c)-1)).toString(32)+o,i="_"+i+"R_"+o,o=su++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=$S++,i="_"+i+"r_"+o.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:Om,useFormState:tb,useActionState:tb,useOptimistic:function(n){var i=vs();i.memoizedState=i.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Pm.bind(null,st,!0,o),o.dispatch=i,[n,i]},useMemoCache:Qm,useCacheRefresh:function(){return vs().memoizedState=tj.bind(null,st)},useEffectEvent:function(n){var i=vs(),o={impl:n};return i.memoizedState=o,function(){if((St&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}},Vm={readContext:Zr,use:au,useCallback:ub,useContext:Zr,useEffect:Rm,useImperativeHandle:db,useInsertionEffect:ob,useLayoutEffect:lb,useMemo:hb,useReducer:iu,useRef:ab,useState:function(){return iu(wa)},useDebugValue:Mm,useDeferredValue:function(n,i){var o=wr();return fb(o,kt.memoizedState,n,i)},useTransition:function(){var n=iu(wa)[0],i=wr().memoizedState;return[typeof n=="boolean"?n:Kl(n),i]},useSyncExternalStore:Vy,useId:xb,useHostTransitionStatus:Om,useFormState:rb,useActionState:rb,useOptimistic:function(n,i){var o=wr();return $y(o,kt,n,i)},useMemoCache:Qm,useCacheRefresh:yb};Vm.useEffectEvent=Ab;var Cb={readContext:Zr,use:au,useCallback:ub,useContext:Zr,useEffect:Rm,useImperativeHandle:db,useInsertionEffect:ob,useLayoutEffect:lb,useMemo:hb,useReducer:Im,useRef:ab,useState:function(){return Im(wa)},useDebugValue:Mm,useDeferredValue:function(n,i){var o=wr();return kt===null?Lm(o,n,i):fb(o,kt.memoizedState,n,i)},useTransition:function(){var n=Im(wa)[0],i=wr().memoizedState;return[typeof n=="boolean"?n:Kl(n),i]},useSyncExternalStore:Vy,useId:xb,useHostTransitionStatus:Om,useFormState:nb,useActionState:nb,useOptimistic:function(n,i){var o=wr();return kt!==null?$y(o,kt,n,i):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Qm,useCacheRefresh:yb};Cb.useEffectEvent=Ab;function zm(n,i,o,c){i=n.memoizedState,o=o(c,i),o=o==null?i:y({},i,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Km={enqueueSetState:function(n,i,o){n=n._reactInternals;var c=zs(),m=ai(c);m.payload=i,o!=null&&(m.callback=o),i=ii(n,m,c),i!==null&&(Qs(i,n,c),Ol(i,n,c))},enqueueReplaceState:function(n,i,o){n=n._reactInternals;var c=zs(),m=ai(c);m.tag=1,m.payload=i,o!=null&&(m.callback=o),i=ii(n,m,c),i!==null&&(Qs(i,n,c),Ol(i,n,c))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var o=zs(),c=ai(o);c.tag=2,i!=null&&(c.callback=i),i=ii(n,c,o),i!==null&&(Qs(i,n,o),Ol(i,n,o))}};function Eb(n,i,o,c,m,p,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,w):i.prototype&&i.prototype.isPureReactComponent?!Fl(o,c)||!Fl(m,p):!0}function Nb(n,i,o,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,c),i.state!==n&&Km.enqueueReplaceState(i,i.state,null)}function pA(n,i){var o=i;if("ref"in i){o={};for(var c in i)c!=="ref"&&(o[c]=i[c])}if(n=n.defaultProps){o===i&&(o=y({},o));for(var m in n)o[m]===void 0&&(o[m]=n[m])}return o}function Sb(n){Od(n)}function jb(n){console.error(n)}function _b(n){Od(n)}function cu(n,i){try{var o=n.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function Tb(n,i,o){try{var c=n.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Gm(n,i,o){return o=ai(o),o.tag=3,o.payload={element:null},o.callback=function(){cu(n,i)},o}function Ub(n){return n=ai(n),n.tag=3,n}function Qb(n,i,o,c){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var p=c.value;n.payload=function(){return m(p)},n.callback=function(){Tb(i,o,c)}}var w=o.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(n.callback=function(){Tb(i,o,c),typeof m!="function"&&(ui===null?ui=new Set([this]):ui.add(this));var I=c.stack;this.componentDidCatch(c.value,{componentStack:I!==null?I:""})})}function sj(n,i,o,c,m){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=o.alternate,i!==null&&co(i,o,m,!0),o=Hs.current,o!==null){switch(o.tag){case 31:case 13:return sn===null?wu():o.alternate===null&&fr===0&&(fr=3),o.flags&=-257,o.flags|=65536,o.lanes=m,c===Jd?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([c]):i.add(c),pg(n,c,m)),!1;case 22:return o.flags|=65536,c===Jd?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([c]):o.add(c)),pg(n,c,m)),!1}throw Error(s(435,o.tag))}return pg(n,c,m),wu(),!1}if(yt)return i=Hs.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=m,c!==dm&&(n=Error(s(422),{cause:c}),kl(Zs(n,o)))):(c!==dm&&(i=Error(s(423),{cause:c}),kl(Zs(i,o))),n=n.current.alternate,n.flags|=65536,m&=-m,n.lanes|=m,c=Zs(c,o),m=Gm(n.stateNode,c,m),wm(n,m),fr!==4&&(fr=2)),!1;var p=Error(s(520),{cause:c});if(p=Zs(p,o),tc===null?tc=[p]:tc.push(p),fr!==4&&(fr=2),i===null)return!0;c=Zs(c,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,n=m&-m,o.lanes|=n,n=Gm(o.stateNode,c,n),wm(o,n),!1;case 1:if(i=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(ui===null||!ui.has(p))))return o.flags|=65536,m&=-m,o.lanes|=m,m=Ub(m),Qb(m,n,o,c),wm(o,m),!1}o=o.return}while(o!==null);return!1}var qm=Error(s(461)),Tr=!1;function es(n,i,o,c){i.child=n===null?ky(i,null,o,c):mA(i,n.child,o,c)}function Fb(n,i,o,c,m){o=o.render;var p=i.ref;if("ref"in c){var w={};for(var I in c)I!=="ref"&&(w[I]=c[I])}else w=c;return dA(i),c=jm(n,i,o,w,p,m),I=_m(),n!==null&&!Tr?(Tm(n,i,m),Ba(n,i,m)):(yt&&I&&lm(i),i.flags|=1,es(n,i,c,m),i.child)}function Ib(n,i,o,c,m){if(n===null){var p=o.type;return typeof p=="function"&&!im(p)&&p.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=p,Db(n,i,p,c,m)):(n=Kd(o.type,null,c,i,i.mode,m),n.ref=i.ref,n.return=i,i.child=n)}if(p=n.child,!tg(n,m)){var w=p.memoizedProps;if(o=o.compare,o=o!==null?o:Fl,o(w,c)&&n.ref===i.ref)return Ba(n,i,m)}return i.flags|=1,n=pa(p,c),n.ref=i.ref,n.return=i,i.child=n}function Db(n,i,o,c,m){if(n!==null){var p=n.memoizedProps;if(Fl(p,c)&&n.ref===i.ref)if(Tr=!1,i.pendingProps=c=p,tg(n,m))(n.flags&131072)!==0&&(Tr=!0);else return i.lanes=n.lanes,Ba(n,i,m)}return Ym(n,i,o,c,m)}function kb(n,i,o,c){var m=c.children,p=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((i.flags&128)!==0){if(p=p!==null?p.baseLanes|o:o,n!==null){for(c=i.child=n.child,m=0;c!==null;)m=m|c.lanes|c.childLanes,c=c.sibling;c=m&~p}else c=0,i.child=null;return Rb(n,i,p,o,c)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&$d(i,p!==null?p.cachePool:null),p!==null?Ly(i,p):Cm(),Hy(i);else return c=i.lanes=536870912,Rb(n,i,p!==null?p.baseLanes|o:o,o,c)}else p!==null?($d(i,p.cachePool),Ly(i,p),oi(),i.memoizedState=null):(n!==null&&$d(i,null),Cm(),oi());return es(n,i,m,o),i.child}function Yl(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Rb(n,i,o,c,m){var p=xm();return p=p===null?null:{parent:jr._currentValue,pool:p},i.memoizedState={baseLanes:o,cachePool:p},n!==null&&$d(i,null),Cm(),Hy(i),n!==null&&co(n,i,c,!0),i.childLanes=m,null}function du(n,i){return i=hu({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function Mb(n,i,o){return mA(i,n.child,null,o),n=du(i,i.pendingProps),n.flags|=2,Os(i),i.memoizedState=null,n}function nj(n,i,o){var c=i.pendingProps,m=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(yt){if(c.mode==="hidden")return n=du(i,c),i.lanes=536870912,Yl(null,n);if(Nm(i),(n=Gt)?(n=Xv(n,rn),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:ei!==null?{id:Kn,overflow:Gn}:null,retryLane:536870912,hydrationErrors:null},o=vy(n),o.return=i,i.child=o,Wr=i,Gt=null)):n=null,n===null)throw ri(i);return i.lanes=536870912,null}return du(i,c)}var p=n.memoizedState;if(p!==null){var w=p.dehydrated;if(Nm(i),m)if(i.flags&256)i.flags&=-257,i=Mb(n,i,o);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(s(558));else if(Tr||co(n,i,o,!1),m=(o&n.childLanes)!==0,Tr||m){if(c=Ot,c!==null&&(w=$i(c,o),w!==0&&w!==p.retryLane))throw p.retryLane=w,AA(n,w),Qs(c,n,w),qm;wu(),i=Mb(n,i,o)}else n=p.treeContext,Gt=nn(w.nextSibling),Wr=i,yt=!0,ti=null,rn=!1,n!==null&&Cy(i,n),i=du(i,c),i.flags|=4096;return i}return n=pa(n.child,{mode:c.mode,children:c.children}),n.ref=i.ref,i.child=n,n.return=i,n}function uu(n,i){var o=i.ref;if(o===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(n===null||n.ref!==o)&&(i.flags|=4194816)}}function Ym(n,i,o,c,m){return dA(i),o=jm(n,i,o,c,void 0,m),c=_m(),n!==null&&!Tr?(Tm(n,i,m),Ba(n,i,m)):(yt&&c&&lm(i),i.flags|=1,es(n,i,o,m),i.child)}function Lb(n,i,o,c,m,p){return dA(i),i.updateQueue=null,o=Py(i,c,o,m),Oy(n),c=_m(),n!==null&&!Tr?(Tm(n,i,p),Ba(n,i,p)):(yt&&c&&lm(i),i.flags|=1,es(n,i,o,p),i.child)}function Hb(n,i,o,c,m){if(dA(i),i.stateNode===null){var p=io,w=o.contextType;typeof w=="object"&&w!==null&&(p=Zr(w)),p=new o(c,p),i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Km,i.stateNode=p,p._reactInternals=i,p=i.stateNode,p.props=c,p.state=i.memoizedState,p.refs={},bm(i),w=o.contextType,p.context=typeof w=="object"&&w!==null?Zr(w):io,p.state=i.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(zm(i,o,w,c),p.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(w=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),w!==p.state&&Km.enqueueReplaceState(p,p.state,null),Vl(i,c,p,m),Pl(),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(n===null){p=i.stateNode;var I=i.memoizedProps,$=pA(o,I);p.props=$;var ie=p.context,fe=o.contextType;w=io,typeof fe=="object"&&fe!==null&&(w=Zr(fe));var ye=o.getDerivedStateFromProps;fe=typeof ye=="function"||typeof p.getSnapshotBeforeUpdate=="function",I=i.pendingProps!==I,fe||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(I||ie!==w)&&Nb(i,p,c,w),ni=!1;var oe=i.memoizedState;p.state=oe,Vl(i,c,p,m),Pl(),ie=i.memoizedState,I||oe!==ie||ni?(typeof ye=="function"&&(zm(i,o,ye,c),ie=i.memoizedState),($=ni||Eb(i,o,$,c,oe,ie,w))?(fe||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(i.flags|=4194308)):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=ie),p.props=c,p.state=ie,p.context=w,c=$):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{p=i.stateNode,vm(n,i),w=i.memoizedProps,fe=pA(o,w),p.props=fe,ye=i.pendingProps,oe=p.context,ie=o.contextType,$=io,typeof ie=="object"&&ie!==null&&($=Zr(ie)),I=o.getDerivedStateFromProps,(ie=typeof I=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(w!==ye||oe!==$)&&Nb(i,p,c,$),ni=!1,oe=i.memoizedState,p.state=oe,Vl(i,c,p,m),Pl();var de=i.memoizedState;w!==ye||oe!==de||ni||n!==null&&n.dependencies!==null&&qd(n.dependencies)?(typeof I=="function"&&(zm(i,o,I,c),de=i.memoizedState),(fe=ni||Eb(i,o,fe,c,oe,de,$)||n!==null&&n.dependencies!==null&&qd(n.dependencies))?(ie||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(c,de,$),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(c,de,$)),typeof p.componentDidUpdate=="function"&&(i.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof p.componentDidUpdate!="function"||w===n.memoizedProps&&oe===n.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||w===n.memoizedProps&&oe===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=de),p.props=c,p.state=de,p.context=$,c=fe):(typeof p.componentDidUpdate!="function"||w===n.memoizedProps&&oe===n.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||w===n.memoizedProps&&oe===n.memoizedState||(i.flags|=1024),c=!1)}return p=c,uu(n,i),c=(i.flags&128)!==0,p||c?(p=i.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:p.render(),i.flags|=1,n!==null&&c?(i.child=mA(i,n.child,null,m),i.child=mA(i,null,o,m)):es(n,i,o,m),i.memoizedState=p.state,n=i.child):n=Ba(n,i,m),n}function Ob(n,i,o,c){return lA(),i.flags|=256,es(n,i,o,c),i.child}var $m={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xm(n){return{baseLanes:n,cachePool:Ty()}}function Jm(n,i,o){return n=n!==null?n.childLanes&~o:0,i&&(n|=Vs),n}function Pb(n,i,o){var c=i.pendingProps,m=!1,p=(i.flags&128)!==0,w;if((w=p)||(w=n!==null&&n.memoizedState===null?!1:(vr.current&2)!==0),w&&(m=!0,i.flags&=-129),w=(i.flags&32)!==0,i.flags&=-33,n===null){if(yt){if(m?Ai(i):oi(),(n=Gt)?(n=Xv(n,rn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:ei!==null?{id:Kn,overflow:Gn}:null,retryLane:536870912,hydrationErrors:null},o=vy(n),o.return=i,i.child=o,Wr=i,Gt=null)):n=null,n===null)throw ri(i);return Fg(n)?i.lanes=32:i.lanes=536870912,null}var I=c.children;return c=c.fallback,m?(oi(),m=i.mode,I=hu({mode:"hidden",children:I},m),c=oA(c,m,o,null),I.return=i,c.return=i,I.sibling=c,i.child=I,c=i.child,c.memoizedState=Xm(o),c.childLanes=Jm(n,w,o),i.memoizedState=$m,Yl(null,c)):(Ai(i),Wm(i,I))}var $=n.memoizedState;if($!==null&&(I=$.dehydrated,I!==null)){if(p)i.flags&256?(Ai(i),i.flags&=-257,i=Zm(n,i,o)):i.memoizedState!==null?(oi(),i.child=n.child,i.flags|=128,i=null):(oi(),I=c.fallback,m=i.mode,c=hu({mode:"visible",children:c.children},m),I=oA(I,m,o,null),I.flags|=2,c.return=i,I.return=i,c.sibling=I,i.child=c,mA(i,n.child,null,o),c=i.child,c.memoizedState=Xm(o),c.childLanes=Jm(n,w,o),i.memoizedState=$m,i=Yl(null,c));else if(Ai(i),Fg(I)){if(w=I.nextSibling&&I.nextSibling.dataset,w)var ie=w.dgst;w=ie,c=Error(s(419)),c.stack="",c.digest=w,kl({value:c,source:null,stack:null}),i=Zm(n,i,o)}else if(Tr||co(n,i,o,!1),w=(o&n.childLanes)!==0,Tr||w){if(w=Ot,w!==null&&(c=$i(w,o),c!==0&&c!==$.retryLane))throw $.retryLane=c,AA(n,c),Qs(w,n,c),qm;Qg(I)||wu(),i=Zm(n,i,o)}else Qg(I)?(i.flags|=192,i.child=n.child,i=null):(n=$.treeContext,Gt=nn(I.nextSibling),Wr=i,yt=!0,ti=null,rn=!1,n!==null&&Cy(i,n),i=Wm(i,c.children),i.flags|=4096);return i}return m?(oi(),I=c.fallback,m=i.mode,$=n.child,ie=$.sibling,c=pa($,{mode:"hidden",children:c.children}),c.subtreeFlags=$.subtreeFlags&65011712,ie!==null?I=pa(ie,I):(I=oA(I,m,o,null),I.flags|=2),I.return=i,c.return=i,c.sibling=I,i.child=c,Yl(null,c),c=i.child,I=n.child.memoizedState,I===null?I=Xm(o):(m=I.cachePool,m!==null?($=jr._currentValue,m=m.parent!==$?{parent:$,pool:$}:m):m=Ty(),I={baseLanes:I.baseLanes|o,cachePool:m}),c.memoizedState=I,c.childLanes=Jm(n,w,o),i.memoizedState=$m,Yl(n.child,c)):(Ai(i),o=n.child,n=o.sibling,o=pa(o,{mode:"visible",children:c.children}),o.return=i,o.sibling=null,n!==null&&(w=i.deletions,w===null?(i.deletions=[n],i.flags|=16):w.push(n)),i.child=o,i.memoizedState=null,o)}function Wm(n,i){return i=hu({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function hu(n,i){return n=Ls(22,n,null,i),n.lanes=0,n}function Zm(n,i,o){return mA(i,n.child,null,o),n=Wm(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Vb(n,i,o){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),fm(n.return,i,o)}function eg(n,i,o,c,m,p){var w=n.memoizedState;w===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:m,treeForkCount:p}:(w.isBackwards=i,w.rendering=null,w.renderingStartTime=0,w.last=c,w.tail=o,w.tailMode=m,w.treeForkCount=p)}function zb(n,i,o){var c=i.pendingProps,m=c.revealOrder,p=c.tail;c=c.children;var w=vr.current,I=(w&2)!==0;if(I?(w=w&1|2,i.flags|=128):w&=1,Ae(vr,w),es(n,i,c,o),c=yt?Dl:0,!I&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Vb(n,o,i);else if(n.tag===19)Vb(n,o,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(m){case"forwards":for(o=i.child,m=null;o!==null;)n=o.alternate,n!==null&&tu(n)===null&&(m=o),o=o.sibling;o=m,o===null?(m=i.child,i.child=null):(m=o.sibling,o.sibling=null),eg(i,!1,m,o,p,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,m=i.child,i.child=null;m!==null;){if(n=m.alternate,n!==null&&tu(n)===null){i.child=m;break}n=m.sibling,m.sibling=o,o=m,m=n}eg(i,!0,o,null,p,c);break;case"together":eg(i,!1,null,null,void 0,c);break;default:i.memoizedState=null}return i.child}function Ba(n,i,o){if(n!==null&&(i.dependencies=n.dependencies),di|=i.lanes,(o&i.childLanes)===0)if(n!==null){if(co(n,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(s(153));if(i.child!==null){for(n=i.child,o=pa(n,n.pendingProps),i.child=o,o.return=i;n.sibling!==null;)n=n.sibling,o=o.sibling=pa(n,n.pendingProps),o.return=i;o.sibling=null}return i.child}function tg(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&qd(n)))}function aj(n,i,o){switch(i.tag){case 3:Pe(i,i.stateNode.containerInfo),si(i,jr,n.memoizedState.cache),lA();break;case 27:case 5:wt(i);break;case 4:Pe(i,i.stateNode.containerInfo);break;case 10:si(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Nm(i),null;break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(Ai(i),i.flags|=128,null):(o&i.child.childLanes)!==0?Pb(n,i,o):(Ai(i),n=Ba(n,i,o),n!==null?n.sibling:null);Ai(i);break;case 19:var m=(n.flags&128)!==0;if(c=(o&i.childLanes)!==0,c||(co(n,i,o,!1),c=(o&i.childLanes)!==0),m){if(c)return zb(n,i,o);i.flags|=128}if(m=i.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Ae(vr,vr.current),c)break;return null;case 22:return i.lanes=0,kb(n,i,o,i.pendingProps);case 24:si(i,jr,n.memoizedState.cache)}return Ba(n,i,o)}function Kb(n,i,o){if(n!==null)if(n.memoizedProps!==i.pendingProps)Tr=!0;else{if(!tg(n,o)&&(i.flags&128)===0)return Tr=!1,aj(n,i,o);Tr=(n.flags&131072)!==0}else Tr=!1,yt&&(i.flags&1048576)!==0&&By(i,Dl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var c=i.pendingProps;if(n=hA(i.elementType),i.type=n,typeof n=="function")im(n)?(c=pA(n,c),i.tag=1,i=Hb(null,i,n,c,o)):(i.tag=0,i=Ym(null,i,n,c,o));else{if(n!=null){var m=n.$$typeof;if(m===W){i.tag=11,i=Fb(null,i,n,c,o);break e}else if(m===E){i.tag=14,i=Ib(null,i,n,c,o);break e}}throw i=U(n)||n,Error(s(306,i,""))}}return i;case 0:return Ym(n,i,i.type,i.pendingProps,o);case 1:return c=i.type,m=pA(c,i.pendingProps),Hb(n,i,c,m,o);case 3:e:{if(Pe(i,i.stateNode.containerInfo),n===null)throw Error(s(387));c=i.pendingProps;var p=i.memoizedState;m=p.element,vm(n,i),Vl(i,c,null,o);var w=i.memoizedState;if(c=w.cache,si(i,jr,c),c!==p.cache&&mm(i,[jr],o,!0),Pl(),c=w.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:w.cache},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){i=Ob(n,i,c,o);break e}else if(c!==m){m=Zs(Error(s(424)),i),kl(m),i=Ob(n,i,c,o);break e}else for(n=i.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,Gt=nn(n.firstChild),Wr=i,yt=!0,ti=null,rn=!0,o=ky(i,null,c,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(lA(),c===m){i=Ba(n,i,o);break e}es(n,i,c,o)}i=i.child}return i;case 26:return uu(n,i),n===null?(o=rw(i.type,null,i.pendingProps,null))?i.memoizedState=o:yt||(o=i.type,n=i.pendingProps,c=_u(Be.current).createElement(o),c[dr]=i,c[yr]=n,ts(c,o,n),Ht(c),i.stateNode=c):i.memoizedState=rw(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return wt(i),n===null&&yt&&(c=i.stateNode=Zv(i.type,i.pendingProps,Be.current),Wr=i,rn=!0,m=Gt,gi(i.type)?(Ig=m,Gt=nn(c.firstChild)):Gt=m),es(n,i,i.pendingProps.children,o),uu(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&yt&&((m=c=Gt)&&(c=Dj(c,i.type,i.pendingProps,rn),c!==null?(i.stateNode=c,Wr=i,Gt=nn(c.firstChild),rn=!1,m=!0):m=!1),m||ri(i)),wt(i),m=i.type,p=i.pendingProps,w=n!==null?n.memoizedProps:null,c=p.children,_g(m,p)?c=null:w!==null&&_g(m,w)&&(i.flags|=32),i.memoizedState!==null&&(m=jm(n,i,XS,null,null,o),lc._currentValue=m),uu(n,i),es(n,i,c,o),i.child;case 6:return n===null&&yt&&((n=o=Gt)&&(o=kj(o,i.pendingProps,rn),o!==null?(i.stateNode=o,Wr=i,Gt=null,n=!0):n=!1),n||ri(i)),null;case 13:return Pb(n,i,o);case 4:return Pe(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=mA(i,null,c,o):es(n,i,c,o),i.child;case 11:return Fb(n,i,i.type,i.pendingProps,o);case 7:return es(n,i,i.pendingProps,o),i.child;case 8:return es(n,i,i.pendingProps.children,o),i.child;case 12:return es(n,i,i.pendingProps.children,o),i.child;case 10:return c=i.pendingProps,si(i,i.type,c.value),es(n,i,c.children,o),i.child;case 9:return m=i.type._context,c=i.pendingProps.children,dA(i),m=Zr(m),c=c(m),i.flags|=1,es(n,i,c,o),i.child;case 14:return Ib(n,i,i.type,i.pendingProps,o);case 15:return Db(n,i,i.type,i.pendingProps,o);case 19:return zb(n,i,o);case 31:return nj(n,i,o);case 22:return kb(n,i,o,i.pendingProps);case 24:return dA(i),c=Zr(jr),n===null?(m=xm(),m===null&&(m=Ot,p=gm(),m.pooledCache=p,p.refCount++,p!==null&&(m.pooledCacheLanes|=o),m=p),i.memoizedState={parent:c,cache:m},bm(i),si(i,jr,m)):((n.lanes&o)!==0&&(vm(n,i),Vl(i,null,null,o),Pl()),m=n.memoizedState,p=i.memoizedState,m.parent!==c?(m={parent:c,cache:c},i.memoizedState=m,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=m),si(i,jr,c)):(c=p.cache,si(i,jr,c),c!==m.cache&&mm(i,[jr],o,!0))),es(n,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Ca(n){n.flags|=4}function rg(n,i,o,c,m){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(m&335544128)===m)if(n.stateNode.complete)n.flags|=8192;else if(xv())n.flags|=8192;else throw fA=Jd,ym}else n.flags&=-16777217}function Gb(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Aw(i))if(xv())n.flags|=8192;else throw fA=Jd,ym}function fu(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?mn():536870912,n.lanes|=i,Bo|=i)}function $l(n,i){if(!yt)switch(n.tailMode){case"hidden":i=n.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function qt(n){var i=n.alternate!==null&&n.alternate.child===n.child,o=0,c=0;if(i)for(var m=n.child;m!==null;)o|=m.lanes|m.childLanes,c|=m.subtreeFlags&65011712,c|=m.flags&65011712,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)o|=m.lanes|m.childLanes,c|=m.subtreeFlags,c|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=c,n.childLanes=o,i}function ij(n,i,o){var c=i.pendingProps;switch(cm(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(i),null;case 1:return qt(i),null;case 3:return o=i.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),ba(jr),Ve(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(lo(i)?Ca(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,um())),qt(i),null;case 26:var m=i.type,p=i.memoizedState;return n===null?(Ca(i),p!==null?(qt(i),Gb(i,p)):(qt(i),rg(i,m,null,c,o))):p?p!==n.memoizedState?(Ca(i),qt(i),Gb(i,p)):(qt(i),i.flags&=-16777217):(n=n.memoizedProps,n!==c&&Ca(i),qt(i),rg(i,m,n,c,o)),null;case 27:if(Xt(i),o=Be.current,m=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==c&&Ca(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return qt(i),null}n=me.current,lo(i)?Ey(i):(n=Zv(m,c,o),i.stateNode=n,Ca(i))}return qt(i),null;case 5:if(Xt(i),m=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==c&&Ca(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return qt(i),null}if(p=me.current,lo(i))Ey(i);else{var w=_u(Be.current);switch(p){case 1:p=w.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:p=w.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":p=w.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":p=w.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":p=w.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof c.is=="string"?w.createElement("select",{is:c.is}):w.createElement("select"),c.multiple?p.multiple=!0:c.size&&(p.size=c.size);break;default:p=typeof c.is=="string"?w.createElement(m,{is:c.is}):w.createElement(m)}}p[dr]=i,p[yr]=c;e:for(w=i.child;w!==null;){if(w.tag===5||w.tag===6)p.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===i)break e;for(;w.sibling===null;){if(w.return===null||w.return===i)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}i.stateNode=p;e:switch(ts(p,m,c),m){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Ca(i)}}return qt(i),rg(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,o),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==c&&Ca(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(s(166));if(n=Be.current,lo(i)){if(n=i.stateNode,o=i.memoizedProps,c=null,m=Wr,m!==null)switch(m.tag){case 27:case 5:c=m.memoizedProps}n[dr]=i,n=!!(n.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||Pv(n.nodeValue,o)),n||ri(i,!0)}else n=_u(n).createTextNode(c),n[dr]=i,i.stateNode=n}return qt(i),null;case 31:if(o=i.memoizedState,n===null||n.memoizedState!==null){if(c=lo(i),o!==null){if(n===null){if(!c)throw Error(s(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[dr]=i}else lA(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;qt(i),n=!1}else o=um(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return i.flags&256?(Os(i),i):(Os(i),null);if((i.flags&128)!==0)throw Error(s(558))}return qt(i),null;case 13:if(c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(m=lo(i),c!==null&&c.dehydrated!==null){if(n===null){if(!m)throw Error(s(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));m[dr]=i}else lA(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;qt(i),m=!1}else m=um(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=m),m=!0;if(!m)return i.flags&256?(Os(i),i):(Os(i),null)}return Os(i),(i.flags&128)!==0?(i.lanes=o,i):(o=c!==null,n=n!==null&&n.memoizedState!==null,o&&(c=i.child,m=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(m=c.alternate.memoizedState.cachePool.pool),p=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),p!==m&&(c.flags|=2048)),o!==n&&o&&(i.child.flags|=8192),fu(i,i.updateQueue),qt(i),null);case 4:return Ve(),n===null&&Cg(i.stateNode.containerInfo),qt(i),null;case 10:return ba(i.type),qt(i),null;case 19:if(X(vr),c=i.memoizedState,c===null)return qt(i),null;if(m=(i.flags&128)!==0,p=c.rendering,p===null)if(m)$l(c,!1);else{if(fr!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(p=tu(n),p!==null){for(i.flags|=128,$l(c,!1),n=p.updateQueue,i.updateQueue=n,fu(i,n),i.subtreeFlags=0,n=o,o=i.child;o!==null;)by(o,n),o=o.sibling;return Ae(vr,vr.current&1|2),yt&&xa(i,c.treeForkCount),i.child}n=n.sibling}c.tail!==null&&sr()>yu&&(i.flags|=128,m=!0,$l(c,!1),i.lanes=4194304)}else{if(!m)if(n=tu(p),n!==null){if(i.flags|=128,m=!0,n=n.updateQueue,i.updateQueue=n,fu(i,n),$l(c,!0),c.tail===null&&c.tailMode==="hidden"&&!p.alternate&&!yt)return qt(i),null}else 2*sr()-c.renderingStartTime>yu&&o!==536870912&&(i.flags|=128,m=!0,$l(c,!1),i.lanes=4194304);c.isBackwards?(p.sibling=i.child,i.child=p):(n=c.last,n!==null?n.sibling=p:i.child=p,c.last=p)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=sr(),n.sibling=null,o=vr.current,Ae(vr,m?o&1|2:o&1),yt&&xa(i,c.treeForkCount),n):(qt(i),null);case 22:case 23:return Os(i),Em(),c=i.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(o&536870912)!==0&&(i.flags&128)===0&&(qt(i),i.subtreeFlags&6&&(i.flags|=8192)):qt(i),o=i.updateQueue,o!==null&&fu(i,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==o&&(i.flags|=2048),n!==null&&X(uA),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),ba(jr),qt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function Aj(n,i){switch(cm(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return ba(jr),Ve(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Xt(i),null;case 31:if(i.memoizedState!==null){if(Os(i),i.alternate===null)throw Error(s(340));lA()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(Os(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(s(340));lA()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return X(vr),null;case 4:return Ve(),null;case 10:return ba(i.type),null;case 22:case 23:return Os(i),Em(),n!==null&&X(uA),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return ba(jr),null;case 25:return null;default:return null}}function qb(n,i){switch(cm(i),i.tag){case 3:ba(jr),Ve();break;case 26:case 27:case 5:Xt(i);break;case 4:Ve();break;case 31:i.memoizedState!==null&&Os(i);break;case 13:Os(i);break;case 19:X(vr);break;case 10:ba(i.type);break;case 22:case 23:Os(i),Em(),n!==null&&X(uA);break;case 24:ba(jr)}}function Xl(n,i){try{var o=i.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var m=c.next;o=m;do{if((o.tag&n)===n){c=void 0;var p=o.create,w=o.inst;c=p(),w.destroy=c}o=o.next}while(o!==m)}}catch(I){It(i,i.return,I)}}function li(n,i,o){try{var c=i.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var p=m.next;c=p;do{if((c.tag&n)===n){var w=c.inst,I=w.destroy;if(I!==void 0){w.destroy=void 0,m=i;var $=o,ie=I;try{ie()}catch(fe){It(m,$,fe)}}}c=c.next}while(c!==p)}}catch(fe){It(i,i.return,fe)}}function Yb(n){var i=n.updateQueue;if(i!==null){var o=n.stateNode;try{My(i,o)}catch(c){It(n,n.return,c)}}}function $b(n,i,o){o.props=pA(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(c){It(n,i,c)}}function Jl(n,i){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof o=="function"?n.refCleanup=o(c):o.current=c}}catch(m){It(n,i,m)}}function qn(n,i){var o=n.ref,c=n.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(m){It(n,i,m)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){It(n,i,m)}else o.current=null}function Xb(n){var i=n.type,o=n.memoizedProps,c=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(m){It(n,n.return,m)}}function sg(n,i,o){try{var c=n.stateNode;_j(c,n.type,o,i),c[yr]=i}catch(m){It(n,n.return,m)}}function Jb(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&gi(n.type)||n.tag===4}function ng(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Jb(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&gi(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ag(n,i,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(n),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=pn));else if(c!==4&&(c===27&&gi(n.type)&&(o=n.stateNode,i=null),n=n.child,n!==null))for(ag(n,i,o),n=n.sibling;n!==null;)ag(n,i,o),n=n.sibling}function mu(n,i,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?o.insertBefore(n,i):o.appendChild(n);else if(c!==4&&(c===27&&gi(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(mu(n,i,o),n=n.sibling;n!==null;)mu(n,i,o),n=n.sibling}function Wb(n){var i=n.stateNode,o=n.memoizedProps;try{for(var c=n.type,m=i.attributes;m.length;)i.removeAttributeNode(m[0]);ts(i,c,o),i[dr]=n,i[yr]=o}catch(p){It(n,n.return,p)}}var Ea=!1,Ur=!1,ig=!1,Zb=typeof WeakSet=="function"?WeakSet:Set,Kr=null;function oj(n,i){if(n=n.containerInfo,Sg=ku,n=dy(n),Zf(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var m=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var w=0,I=-1,$=-1,ie=0,fe=0,ye=n,oe=null;t:for(;;){for(var de;ye!==o||m!==0&&ye.nodeType!==3||(I=w+m),ye!==p||c!==0&&ye.nodeType!==3||($=w+c),ye.nodeType===3&&(w+=ye.nodeValue.length),(de=ye.firstChild)!==null;)oe=ye,ye=de;for(;;){if(ye===n)break t;if(oe===o&&++ie===m&&(I=w),oe===p&&++fe===c&&($=w),(de=ye.nextSibling)!==null)break;ye=oe,oe=ye.parentNode}ye=de}o=I===-1||$===-1?null:{start:I,end:$}}else o=null}o=o||{start:0,end:0}}else o=null;for(jg={focusedElem:n,selectionRange:o},ku=!1,Kr=i;Kr!==null;)if(i=Kr,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Kr=n;else for(;Kr!==null;){switch(i=Kr,p=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)m=n[o],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&p!==null){n=void 0,o=i,m=p.memoizedProps,p=p.memoizedState,c=o.stateNode;try{var Fe=pA(o.type,m);n=c.getSnapshotBeforeUpdate(Fe,p),c.__reactInternalSnapshotBeforeUpdate=n}catch(qe){It(o,o.return,qe)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,o=n.nodeType,o===9)Ug(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Ug(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=i.sibling,n!==null){n.return=i.return,Kr=n;break}Kr=i.return}}function ev(n,i,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Sa(n,o),c&4&&Xl(5,o);break;case 1:if(Sa(n,o),c&4)if(n=o.stateNode,i===null)try{n.componentDidMount()}catch(w){It(o,o.return,w)}else{var m=pA(o.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(m,i,n.__reactInternalSnapshotBeforeUpdate)}catch(w){It(o,o.return,w)}}c&64&&Yb(o),c&512&&Jl(o,o.return);break;case 3:if(Sa(n,o),c&64&&(n=o.updateQueue,n!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{My(n,i)}catch(w){It(o,o.return,w)}}break;case 27:i===null&&c&4&&Wb(o);case 26:case 5:Sa(n,o),i===null&&c&4&&Xb(o),c&512&&Jl(o,o.return);break;case 12:Sa(n,o);break;case 31:Sa(n,o),c&4&&sv(n,o);break;case 13:Sa(n,o),c&4&&nv(n,o),c&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=pj.bind(null,o),Rj(n,o))));break;case 22:if(c=o.memoizedState!==null||Ea,!c){i=i!==null&&i.memoizedState!==null||Ur,m=Ea;var p=Ur;Ea=c,(Ur=i)&&!p?ja(n,o,(o.subtreeFlags&8772)!==0):Sa(n,o),Ea=m,Ur=p}break;case 30:break;default:Sa(n,o)}}function tv(n){var i=n.alternate;i!==null&&(n.alternate=null,tv(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Wt(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var er=null,js=!1;function Na(n,i,o){for(o=o.child;o!==null;)rv(n,i,o),o=o.sibling}function rv(n,i,o){if(cr&&typeof cr.onCommitFiberUnmount=="function")try{cr.onCommitFiberUnmount(Jt,o)}catch{}switch(o.tag){case 26:Ur||qn(o,i),Na(n,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Ur||qn(o,i);var c=er,m=js;gi(o.type)&&(er=o.stateNode,js=!1),Na(n,i,o),ic(o.stateNode),er=c,js=m;break;case 5:Ur||qn(o,i);case 6:if(c=er,m=js,er=null,Na(n,i,o),er=c,js=m,er!==null)if(js)try{(er.nodeType===9?er.body:er.nodeName==="HTML"?er.ownerDocument.body:er).removeChild(o.stateNode)}catch(p){It(o,i,p)}else try{er.removeChild(o.stateNode)}catch(p){It(o,i,p)}break;case 18:er!==null&&(js?(n=er,Yv(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Uo(n)):Yv(er,o.stateNode));break;case 4:c=er,m=js,er=o.stateNode.containerInfo,js=!0,Na(n,i,o),er=c,js=m;break;case 0:case 11:case 14:case 15:li(2,o,i),Ur||li(4,o,i),Na(n,i,o);break;case 1:Ur||(qn(o,i),c=o.stateNode,typeof c.componentWillUnmount=="function"&&$b(o,i,c)),Na(n,i,o);break;case 21:Na(n,i,o);break;case 22:Ur=(c=Ur)||o.memoizedState!==null,Na(n,i,o),Ur=c;break;default:Na(n,i,o)}}function sv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Uo(n)}catch(o){It(i,i.return,o)}}}function nv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Uo(n)}catch(o){It(i,i.return,o)}}function lj(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new Zb),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new Zb),i;default:throw Error(s(435,n.tag))}}function gu(n,i){var o=lj(n);i.forEach(function(c){if(!o.has(c)){o.add(c);var m=xj.bind(null,n,c);c.then(m,m)}})}function _s(n,i){var o=i.deletions;if(o!==null)for(var c=0;c<o.length;c++){var m=o[c],p=n,w=i,I=w;e:for(;I!==null;){switch(I.tag){case 27:if(gi(I.type)){er=I.stateNode,js=!1;break e}break;case 5:er=I.stateNode,js=!1;break e;case 3:case 4:er=I.stateNode.containerInfo,js=!0;break e}I=I.return}if(er===null)throw Error(s(160));rv(p,w,m),er=null,js=!1,p=m.alternate,p!==null&&(p.return=null),m.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)av(i,n),i=i.sibling}var Bn=null;function av(n,i){var o=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:_s(i,n),Ts(n),c&4&&(li(3,n,n.return),Xl(3,n),li(5,n,n.return));break;case 1:_s(i,n),Ts(n),c&512&&(Ur||o===null||qn(o,o.return)),c&64&&Ea&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var m=Bn;if(_s(i,n),Ts(n),c&512&&(Ur||o===null||qn(o,o.return)),c&4){var p=o!==null?o.memoizedState:null;if(c=n.memoizedState,o===null)if(c===null)if(n.stateNode===null){e:{c=n.type,o=n.memoizedProps,m=m.ownerDocument||m;t:switch(c){case"title":p=m.getElementsByTagName("title")[0],(!p||p[Et]||p[dr]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=m.createElement(c),m.head.insertBefore(p,m.querySelector("head > title"))),ts(p,c,o),p[dr]=n,Ht(p),c=p;break e;case"link":var w=aw("link","href",m).get(c+(o.href||""));if(w){for(var I=0;I<w.length;I++)if(p=w[I],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){w.splice(I,1);break t}}p=m.createElement(c),ts(p,c,o),m.head.appendChild(p);break;case"meta":if(w=aw("meta","content",m).get(c+(o.content||""))){for(I=0;I<w.length;I++)if(p=w[I],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){w.splice(I,1);break t}}p=m.createElement(c),ts(p,c,o),m.head.appendChild(p);break;default:throw Error(s(468,c))}p[dr]=n,Ht(p),c=p}n.stateNode=c}else iw(m,n.type,n.stateNode);else n.stateNode=nw(m,c,n.memoizedProps);else p!==c?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,c===null?iw(m,n.type,n.stateNode):nw(m,c,n.memoizedProps)):c===null&&n.stateNode!==null&&sg(n,n.memoizedProps,o.memoizedProps)}break;case 27:_s(i,n),Ts(n),c&512&&(Ur||o===null||qn(o,o.return)),o!==null&&c&4&&sg(n,n.memoizedProps,o.memoizedProps);break;case 5:if(_s(i,n),Ts(n),c&512&&(Ur||o===null||qn(o,o.return)),n.flags&32){m=n.stateNode;try{Ss(m,"")}catch(Fe){It(n,n.return,Fe)}}c&4&&n.stateNode!=null&&(m=n.memoizedProps,sg(n,m,o!==null?o.memoizedProps:m)),c&1024&&(ig=!0);break;case 6:if(_s(i,n),Ts(n),c&4){if(n.stateNode===null)throw Error(s(162));c=n.memoizedProps,o=n.stateNode;try{o.nodeValue=c}catch(Fe){It(n,n.return,Fe)}}break;case 3:if(Qu=null,m=Bn,Bn=Tu(i.containerInfo),_s(i,n),Bn=m,Ts(n),c&4&&o!==null&&o.memoizedState.isDehydrated)try{Uo(i.containerInfo)}catch(Fe){It(n,n.return,Fe)}ig&&(ig=!1,iv(n));break;case 4:c=Bn,Bn=Tu(n.stateNode.containerInfo),_s(i,n),Ts(n),Bn=c;break;case 12:_s(i,n),Ts(n);break;case 31:_s(i,n),Ts(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,gu(n,c)));break;case 13:_s(i,n),Ts(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(xu=sr()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,gu(n,c)));break;case 22:m=n.memoizedState!==null;var $=o!==null&&o.memoizedState!==null,ie=Ea,fe=Ur;if(Ea=ie||m,Ur=fe||$,_s(i,n),Ur=fe,Ea=ie,Ts(n),c&8192)e:for(i=n.stateNode,i._visibility=m?i._visibility&-2:i._visibility|1,m&&(o===null||$||Ea||Ur||xA(n)),o=null,i=n;;){if(i.tag===5||i.tag===26){if(o===null){$=o=i;try{if(p=$.stateNode,m)w=p.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{I=$.stateNode;var ye=$.memoizedProps.style,oe=ye!=null&&ye.hasOwnProperty("display")?ye.display:null;I.style.display=oe==null||typeof oe=="boolean"?"":(""+oe).trim()}}catch(Fe){It($,$.return,Fe)}}}else if(i.tag===6){if(o===null){$=i;try{$.stateNode.nodeValue=m?"":$.memoizedProps}catch(Fe){It($,$.return,Fe)}}}else if(i.tag===18){if(o===null){$=i;try{var de=$.stateNode;m?$v(de,!0):$v($.stateNode,!1)}catch(Fe){It($,$.return,Fe)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=n.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,gu(n,o))));break;case 19:_s(i,n),Ts(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,gu(n,c)));break;case 30:break;case 21:break;default:_s(i,n),Ts(n)}}function Ts(n){var i=n.flags;if(i&2){try{for(var o,c=n.return;c!==null;){if(Jb(c)){o=c;break}c=c.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var m=o.stateNode,p=ng(n);mu(n,p,m);break;case 5:var w=o.stateNode;o.flags&32&&(Ss(w,""),o.flags&=-33);var I=ng(n);mu(n,I,w);break;case 3:case 4:var $=o.stateNode.containerInfo,ie=ng(n);ag(n,ie,$);break;default:throw Error(s(161))}}catch(fe){It(n,n.return,fe)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function iv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;iv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Sa(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)ev(n,i.alternate,i),i=i.sibling}function xA(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:li(4,i,i.return),xA(i);break;case 1:qn(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&$b(i,i.return,o),xA(i);break;case 27:ic(i.stateNode);case 26:case 5:qn(i,i.return),xA(i);break;case 22:i.memoizedState===null&&xA(i);break;case 30:xA(i);break;default:xA(i)}n=n.sibling}}function ja(n,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,m=n,p=i,w=p.flags;switch(p.tag){case 0:case 11:case 15:ja(m,p,o),Xl(4,p);break;case 1:if(ja(m,p,o),c=p,m=c.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(ie){It(c,c.return,ie)}if(c=p,m=c.updateQueue,m!==null){var I=c.stateNode;try{var $=m.shared.hiddenCallbacks;if($!==null)for(m.shared.hiddenCallbacks=null,m=0;m<$.length;m++)Ry($[m],I)}catch(ie){It(c,c.return,ie)}}o&&w&64&&Yb(p),Jl(p,p.return);break;case 27:Wb(p);case 26:case 5:ja(m,p,o),o&&c===null&&w&4&&Xb(p),Jl(p,p.return);break;case 12:ja(m,p,o);break;case 31:ja(m,p,o),o&&w&4&&sv(m,p);break;case 13:ja(m,p,o),o&&w&4&&nv(m,p);break;case 22:p.memoizedState===null&&ja(m,p,o),Jl(p,p.return);break;case 30:break;default:ja(m,p,o)}i=i.sibling}}function Ag(n,i){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Rl(o))}function og(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Rl(n))}function Cn(n,i,o,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Av(n,i,o,c),i=i.sibling}function Av(n,i,o,c){var m=i.flags;switch(i.tag){case 0:case 11:case 15:Cn(n,i,o,c),m&2048&&Xl(9,i);break;case 1:Cn(n,i,o,c);break;case 3:Cn(n,i,o,c),m&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Rl(n)));break;case 12:if(m&2048){Cn(n,i,o,c),n=i.stateNode;try{var p=i.memoizedProps,w=p.id,I=p.onPostCommit;typeof I=="function"&&I(w,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch($){It(i,i.return,$)}}else Cn(n,i,o,c);break;case 31:Cn(n,i,o,c);break;case 13:Cn(n,i,o,c);break;case 23:break;case 22:p=i.stateNode,w=i.alternate,i.memoizedState!==null?p._visibility&2?Cn(n,i,o,c):Wl(n,i):p._visibility&2?Cn(n,i,o,c):(p._visibility|=2,bo(n,i,o,c,(i.subtreeFlags&10256)!==0||!1)),m&2048&&Ag(w,i);break;case 24:Cn(n,i,o,c),m&2048&&og(i.alternate,i);break;default:Cn(n,i,o,c)}}function bo(n,i,o,c,m){for(m=m&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var p=n,w=i,I=o,$=c,ie=w.flags;switch(w.tag){case 0:case 11:case 15:bo(p,w,I,$,m),Xl(8,w);break;case 23:break;case 22:var fe=w.stateNode;w.memoizedState!==null?fe._visibility&2?bo(p,w,I,$,m):Wl(p,w):(fe._visibility|=2,bo(p,w,I,$,m)),m&&ie&2048&&Ag(w.alternate,w);break;case 24:bo(p,w,I,$,m),m&&ie&2048&&og(w.alternate,w);break;default:bo(p,w,I,$,m)}i=i.sibling}}function Wl(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=n,c=i,m=c.flags;switch(c.tag){case 22:Wl(o,c),m&2048&&Ag(c.alternate,c);break;case 24:Wl(o,c),m&2048&&og(c.alternate,c);break;default:Wl(o,c)}i=i.sibling}}var Zl=8192;function vo(n,i,o){if(n.subtreeFlags&Zl)for(n=n.child;n!==null;)ov(n,i,o),n=n.sibling}function ov(n,i,o){switch(n.tag){case 26:vo(n,i,o),n.flags&Zl&&n.memoizedState!==null&&$j(o,Bn,n.memoizedState,n.memoizedProps);break;case 5:vo(n,i,o);break;case 3:case 4:var c=Bn;Bn=Tu(n.stateNode.containerInfo),vo(n,i,o),Bn=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=Zl,Zl=16777216,vo(n,i,o),Zl=c):vo(n,i,o));break;default:vo(n,i,o)}}function lv(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function ec(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];Kr=c,dv(c,n)}lv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)cv(n),n=n.sibling}function cv(n){switch(n.tag){case 0:case 11:case 15:ec(n),n.flags&2048&&li(9,n,n.return);break;case 3:ec(n);break;case 12:ec(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,pu(n)):ec(n);break;default:ec(n)}}function pu(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];Kr=c,dv(c,n)}lv(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:li(8,i,i.return),pu(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,pu(i));break;default:pu(i)}n=n.sibling}}function dv(n,i){for(;Kr!==null;){var o=Kr;switch(o.tag){case 0:case 11:case 15:li(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Rl(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,Kr=c;else e:for(o=n;Kr!==null;){c=Kr;var m=c.sibling,p=c.return;if(tv(c),c===o){Kr=null;break e}if(m!==null){m.return=p,Kr=m;break e}Kr=p}}}var cj={getCacheForType:function(n){var i=Zr(jr),o=i.data.get(n);return o===void 0&&(o=n(),i.data.set(n,o)),o},cacheSignal:function(){return Zr(jr).controller.signal}},dj=typeof WeakMap=="function"?WeakMap:Map,St=0,Ot=null,ct=null,ht=0,Ft=0,Ps=null,ci=!1,wo=!1,lg=!1,_a=0,fr=0,di=0,yA=0,cg=0,Vs=0,Bo=0,tc=null,Us=null,dg=!1,xu=0,uv=0,yu=1/0,bu=null,ui=null,Mr=0,hi=null,Co=null,Ta=0,ug=0,hg=null,hv=null,rc=0,fg=null;function zs(){return(St&2)!==0&&ht!==0?ht&-ht:M.T!==null?bg():za()}function fv(){if(Vs===0)if((ht&536870912)===0||yt){var n=nt;nt<<=1,(nt&3932160)===0&&(nt=262144),Vs=n}else Vs=536870912;return n=Hs.current,n!==null&&(n.flags|=32),Vs}function Qs(n,i,o){(n===Ot&&(Ft===2||Ft===9)||n.cancelPendingCommit!==null)&&(Eo(n,0),fi(n,ht,Vs,!1)),Dn(n,o),((St&2)===0||n!==Ot)&&(n===Ot&&((St&2)===0&&(yA|=o),fr===4&&fi(n,ht,Vs,!1)),Yn(n))}function mv(n,i,o){if((St&6)!==0)throw Error(s(327));var c=!o&&(i&127)===0&&(i&n.expiredLanes)===0||xr(n,i),m=c?fj(n,i):gg(n,i,!0),p=c;do{if(m===0){wo&&!c&&fi(n,i,0,!1);break}else{if(o=n.current.alternate,p&&!uj(o)){m=gg(n,i,!1),p=!1;continue}if(m===2){if(p=i,n.errorRecoveryDisabledLanes&p)var w=0;else w=n.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){i=w;e:{var I=n;m=tc;var $=I.current.memoizedState.isDehydrated;if($&&(Eo(I,w).flags|=256),w=gg(I,w,!1),w!==2){if(lg&&!$){I.errorRecoveryDisabledLanes|=p,yA|=p,m=4;break e}p=Us,Us=m,p!==null&&(Us===null?Us=p:Us.push.apply(Us,p))}m=w}if(p=!1,m!==2)continue}}if(m===1){Eo(n,0),fi(n,i,0,!0);break}e:{switch(c=n,p=m,p){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:fi(c,i,Vs,!ci);break e;case 2:Us=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(m=xu+300-sr(),10<m)){if(fi(c,i,Vs,!ci),pr(c,0,!0)!==0)break e;Ta=i,c.timeoutHandle=Gv(gv.bind(null,c,o,Us,bu,dg,i,Vs,yA,Bo,ci,p,"Throttled",-0,0),m);break e}gv(c,o,Us,bu,dg,i,Vs,yA,Bo,ci,p,null,-0,0)}}break}while(!0);Yn(n)}function gv(n,i,o,c,m,p,w,I,$,ie,fe,ye,oe,de){if(n.timeoutHandle=-1,ye=i.subtreeFlags,ye&8192||(ye&16785408)===16785408){ye={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:pn},ov(i,p,ye);var Fe=(p&62914560)===p?xu-sr():(p&4194048)===p?uv-sr():0;if(Fe=Xj(ye,Fe),Fe!==null){Ta=p,n.cancelPendingCommit=Fe(Cv.bind(null,n,i,p,o,c,m,w,I,$,fe,ye,null,oe,de)),fi(n,p,w,!ie);return}}Cv(n,i,p,o,c,m,w,I,$)}function uj(n){for(var i=n;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var m=o[c],p=m.getSnapshot;m=m.value;try{if(!Ms(p(),m))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function fi(n,i,o,c){i&=~cg,i&=~yA,n.suspendedLanes|=i,n.pingedLanes&=~i,c&&(n.warmLanes|=i),c=n.expirationTimes;for(var m=i;0<m;){var p=31-Vt(m),w=1<<p;c[p]=-1,m&=~w}o!==0&&ua(n,o,i)}function vu(){return(St&6)===0?(sc(0),!1):!0}function mg(){if(ct!==null){if(Ft===0)var n=ct.return;else n=ct,ya=cA=null,Um(n),mo=null,Ll=0,n=ct;for(;n!==null;)qb(n.alternate,n),n=n.return;ct=null}}function Eo(n,i){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,Qj(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Ta=0,mg(),Ot=n,ct=o=pa(n.current,null),ht=i,Ft=0,Ps=null,ci=!1,wo=xr(n,i),lg=!1,Bo=Vs=cg=yA=di=fr=0,Us=tc=null,dg=!1,(i&8)!==0&&(i|=i&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=i;0<c;){var m=31-Vt(c),p=1<<m;i|=n[m],c&=~p}return _a=i,Pd(),o}function pv(n,i){st=null,M.H=ql,i===fo||i===Xd?(i=Fy(),Ft=3):i===ym?(i=Fy(),Ft=4):Ft=i===qm?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Ps=i,ct===null&&(fr=1,cu(n,Zs(i,n.current)))}function xv(){var n=Hs.current;return n===null?!0:(ht&4194048)===ht?sn===null:(ht&62914560)===ht||(ht&536870912)!==0?n===sn:!1}function yv(){var n=M.H;return M.H=ql,n===null?ql:n}function bv(){var n=M.A;return M.A=cj,n}function wu(){fr=4,ci||(ht&4194048)!==ht&&Hs.current!==null||(wo=!0),(di&134217727)===0&&(yA&134217727)===0||Ot===null||fi(Ot,ht,Vs,!1)}function gg(n,i,o){var c=St;St|=2;var m=yv(),p=bv();(Ot!==n||ht!==i)&&(bu=null,Eo(n,i)),i=!1;var w=fr;e:do try{if(Ft!==0&&ct!==null){var I=ct,$=Ps;switch(Ft){case 8:mg(),w=6;break e;case 3:case 2:case 9:case 6:Hs.current===null&&(i=!0);var ie=Ft;if(Ft=0,Ps=null,No(n,I,$,ie),o&&wo){w=0;break e}break;default:ie=Ft,Ft=0,Ps=null,No(n,I,$,ie)}}hj(),w=fr;break}catch(fe){pv(n,fe)}while(!0);return i&&n.shellSuspendCounter++,ya=cA=null,St=c,M.H=m,M.A=p,ct===null&&(Ot=null,ht=0,Pd()),w}function hj(){for(;ct!==null;)vv(ct)}function fj(n,i){var o=St;St|=2;var c=yv(),m=bv();Ot!==n||ht!==i?(bu=null,yu=sr()+500,Eo(n,i)):wo=xr(n,i);e:do try{if(Ft!==0&&ct!==null){i=ct;var p=Ps;t:switch(Ft){case 1:Ft=0,Ps=null,No(n,i,p,1);break;case 2:case 9:if(Uy(p)){Ft=0,Ps=null,wv(i);break}i=function(){Ft!==2&&Ft!==9||Ot!==n||(Ft=7),Yn(n)},p.then(i,i);break e;case 3:Ft=7;break e;case 4:Ft=5;break e;case 7:Uy(p)?(Ft=0,Ps=null,wv(i)):(Ft=0,Ps=null,No(n,i,p,7));break;case 5:var w=null;switch(ct.tag){case 26:w=ct.memoizedState;case 5:case 27:var I=ct;if(w?Aw(w):I.stateNode.complete){Ft=0,Ps=null;var $=I.sibling;if($!==null)ct=$;else{var ie=I.return;ie!==null?(ct=ie,Bu(ie)):ct=null}break t}}Ft=0,Ps=null,No(n,i,p,5);break;case 6:Ft=0,Ps=null,No(n,i,p,6);break;case 8:mg(),fr=6;break e;default:throw Error(s(462))}}mj();break}catch(fe){pv(n,fe)}while(!0);return ya=cA=null,M.H=c,M.A=m,St=o,ct!==null?0:(Ot=null,ht=0,Pd(),fr)}function mj(){for(;ct!==null&&!Pt();)vv(ct)}function vv(n){var i=Kb(n.alternate,n,_a);n.memoizedProps=n.pendingProps,i===null?Bu(n):ct=i}function wv(n){var i=n,o=i.alternate;switch(i.tag){case 15:case 0:i=Lb(o,i,i.pendingProps,i.type,void 0,ht);break;case 11:i=Lb(o,i,i.pendingProps,i.type.render,i.ref,ht);break;case 5:Um(i);default:qb(o,i),i=ct=by(i,_a),i=Kb(o,i,_a)}n.memoizedProps=n.pendingProps,i===null?Bu(n):ct=i}function No(n,i,o,c){ya=cA=null,Um(i),mo=null,Ll=0;var m=i.return;try{if(sj(n,m,i,o,ht)){fr=1,cu(n,Zs(o,n.current)),ct=null;return}}catch(p){if(m!==null)throw ct=m,p;fr=1,cu(n,Zs(o,n.current)),ct=null;return}i.flags&32768?(yt||c===1?n=!0:wo||(ht&536870912)!==0?n=!1:(ci=n=!0,(c===2||c===9||c===3||c===6)&&(c=Hs.current,c!==null&&c.tag===13&&(c.flags|=16384))),Bv(i,n)):Bu(i)}function Bu(n){var i=n;do{if((i.flags&32768)!==0){Bv(i,ci);return}n=i.return;var o=ij(i.alternate,i,_a);if(o!==null){ct=o;return}if(i=i.sibling,i!==null){ct=i;return}ct=i=n}while(i!==null);fr===0&&(fr=5)}function Bv(n,i){do{var o=Aj(n.alternate,n);if(o!==null){o.flags&=32767,ct=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(n=n.sibling,n!==null)){ct=n;return}ct=n=o}while(n!==null);fr=6,ct=null}function Cv(n,i,o,c,m,p,w,I,$){n.cancelPendingCommit=null;do Cu();while(Mr!==0);if((St&6)!==0)throw Error(s(327));if(i!==null){if(i===n.current)throw Error(s(177));if(p=i.lanes|i.childLanes,p|=nm,yl(n,o,p,w,I,$),n===Ot&&(ct=Ot=null,ht=0),Co=i,hi=n,Ta=o,ug=p,hg=m,hv=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,yj(Ut,function(){return _v(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=M.T,M.T=null,m=F.p,F.p=2,w=St,St|=4;try{oj(n,i,o)}finally{St=w,F.p=m,M.T=c}}Mr=1,Ev(),Nv(),Sv()}}function Ev(){if(Mr===1){Mr=0;var n=hi,i=Co,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=M.T,M.T=null;var c=F.p;F.p=2;var m=St;St|=4;try{av(i,n);var p=jg,w=dy(n.containerInfo),I=p.focusedElem,$=p.selectionRange;if(w!==I&&I&&I.ownerDocument&&cy(I.ownerDocument.documentElement,I)){if($!==null&&Zf(I)){var ie=$.start,fe=$.end;if(fe===void 0&&(fe=ie),"selectionStart"in I)I.selectionStart=ie,I.selectionEnd=Math.min(fe,I.value.length);else{var ye=I.ownerDocument||document,oe=ye&&ye.defaultView||window;if(oe.getSelection){var de=oe.getSelection(),Fe=I.textContent.length,qe=Math.min($.start,Fe),Mt=$.end===void 0?qe:Math.min($.end,Fe);!de.extend&&qe>Mt&&(w=Mt,Mt=qe,qe=w);var re=ly(I,qe),Z=ly(I,Mt);if(re&&Z&&(de.rangeCount!==1||de.anchorNode!==re.node||de.anchorOffset!==re.offset||de.focusNode!==Z.node||de.focusOffset!==Z.offset)){var ae=ye.createRange();ae.setStart(re.node,re.offset),de.removeAllRanges(),qe>Mt?(de.addRange(ae),de.extend(Z.node,Z.offset)):(ae.setEnd(Z.node,Z.offset),de.addRange(ae))}}}}for(ye=[],de=I;de=de.parentNode;)de.nodeType===1&&ye.push({element:de,left:de.scrollLeft,top:de.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<ye.length;I++){var xe=ye[I];xe.element.scrollLeft=xe.left,xe.element.scrollTop=xe.top}}ku=!!Sg,jg=Sg=null}finally{St=m,F.p=c,M.T=o}}n.current=i,Mr=2}}function Nv(){if(Mr===2){Mr=0;var n=hi,i=Co,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=M.T,M.T=null;var c=F.p;F.p=2;var m=St;St|=4;try{ev(n,i.alternate,i)}finally{St=m,F.p=c,M.T=o}}Mr=3}}function Sv(){if(Mr===4||Mr===3){Mr=0,Nr();var n=hi,i=Co,o=Ta,c=hv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Mr=5:(Mr=0,Co=hi=null,jv(n,n.pendingLanes));var m=n.pendingLanes;if(m===0&&(ui=null),gn(o),i=i.stateNode,cr&&typeof cr.onCommitFiberRoot=="function")try{cr.onCommitFiberRoot(Jt,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=M.T,m=F.p,F.p=2,M.T=null;try{for(var p=n.onRecoverableError,w=0;w<c.length;w++){var I=c[w];p(I.value,{componentStack:I.stack})}}finally{M.T=i,F.p=m}}(Ta&3)!==0&&Cu(),Yn(n),m=n.pendingLanes,(o&261930)!==0&&(m&42)!==0?n===fg?rc++:(rc=0,fg=n):rc=0,sc(0)}}function jv(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Rl(i)))}function Cu(){return Ev(),Nv(),Sv(),_v()}function _v(){if(Mr!==5)return!1;var n=hi,i=ug;ug=0;var o=gn(Ta),c=M.T,m=F.p;try{F.p=32>o?32:o,M.T=null,o=hg,hg=null;var p=hi,w=Ta;if(Mr=0,Co=hi=null,Ta=0,(St&6)!==0)throw Error(s(331));var I=St;if(St|=4,cv(p.current),Av(p,p.current,w,o),St=I,sc(0,!1),cr&&typeof cr.onPostCommitFiberRoot=="function")try{cr.onPostCommitFiberRoot(Jt,p)}catch{}return!0}finally{F.p=m,M.T=c,jv(n,i)}}function Tv(n,i,o){i=Zs(o,i),i=Gm(n.stateNode,i,2),n=ii(n,i,2),n!==null&&(Dn(n,2),Yn(n))}function It(n,i,o){if(n.tag===3)Tv(n,n,o);else for(;i!==null;){if(i.tag===3){Tv(i,n,o);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ui===null||!ui.has(c))){n=Zs(o,n),o=Ub(2),c=ii(i,o,2),c!==null&&(Qb(o,c,i,n),Dn(c,2),Yn(c));break}}i=i.return}}function pg(n,i,o){var c=n.pingCache;if(c===null){c=n.pingCache=new dj;var m=new Set;c.set(i,m)}else m=c.get(i),m===void 0&&(m=new Set,c.set(i,m));m.has(o)||(lg=!0,m.add(o),n=gj.bind(null,n,i,o),i.then(n,n))}function gj(n,i,o){var c=n.pingCache;c!==null&&c.delete(i),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,Ot===n&&(ht&o)===o&&(fr===4||fr===3&&(ht&62914560)===ht&&300>sr()-xu?(St&2)===0&&Eo(n,0):cg|=o,Bo===ht&&(Bo=0)),Yn(n)}function Uv(n,i){i===0&&(i=mn()),n=AA(n,i),n!==null&&(Dn(n,i),Yn(n))}function pj(n){var i=n.memoizedState,o=0;i!==null&&(o=i.retryLane),Uv(n,o)}function xj(n,i){var o=0;switch(n.tag){case 31:case 13:var c=n.stateNode,m=n.memoizedState;m!==null&&(o=m.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(i),Uv(n,o)}function yj(n,i){return Le(n,i)}var Eu=null,So=null,xg=!1,Nu=!1,yg=!1,mi=0;function Yn(n){n!==So&&n.next===null&&(So===null?Eu=So=n:So=So.next=n),Nu=!0,xg||(xg=!0,vj())}function sc(n,i){if(!yg&&Nu){yg=!0;do for(var o=!1,c=Eu;c!==null;){if(n!==0){var m=c.pendingLanes;if(m===0)var p=0;else{var w=c.suspendedLanes,I=c.pingedLanes;p=(1<<31-Vt(42|n)+1)-1,p&=m&~(w&~I),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,Dv(c,p))}else p=ht,p=pr(c,c===Ot?p:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(p&3)===0||xr(c,p)||(o=!0,Dv(c,p));c=c.next}while(o);yg=!1}}function bj(){Qv()}function Qv(){Nu=xg=!1;var n=0;mi!==0&&Uj()&&(n=mi);for(var i=sr(),o=null,c=Eu;c!==null;){var m=c.next,p=Fv(c,i);p===0?(c.next=null,o===null?Eu=m:o.next=m,m===null&&(So=o)):(o=c,(n!==0||(p&3)!==0)&&(Nu=!0)),c=m}Mr!==0&&Mr!==5||sc(n),mi!==0&&(mi=0)}function Fv(n,i){for(var o=n.suspendedLanes,c=n.pingedLanes,m=n.expirationTimes,p=n.pendingLanes&-62914561;0<p;){var w=31-Vt(p),I=1<<w,$=m[w];$===-1?((I&o)===0||(I&c)!==0)&&(m[w]=In(I,i)):$<=i&&(n.expiredLanes|=I),p&=~I}if(i=Ot,o=ht,o=pr(n,n===i?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,o===0||n===i&&(Ft===2||Ft===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Se(c),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||xr(n,o)){if(i=o&-o,i===n.callbackPriority)return i;switch(c!==null&&Se(c),gn(o)){case 2:case 8:o=lr;break;case 32:o=Ut;break;case 268435456:o=Cs;break;default:o=Ut}return c=Iv.bind(null,n),o=Le(o,c),n.callbackPriority=i,n.callbackNode=o,i}return c!==null&&c!==null&&Se(c),n.callbackPriority=2,n.callbackNode=null,2}function Iv(n,i){if(Mr!==0&&Mr!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Cu()&&n.callbackNode!==o)return null;var c=ht;return c=pr(n,n===Ot?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(mv(n,c,i),Fv(n,sr()),n.callbackNode!=null&&n.callbackNode===o?Iv.bind(null,n):null)}function Dv(n,i){if(Cu())return null;mv(n,i,!0)}function vj(){Fj(function(){(St&6)!==0?Le(jt,bj):Qv()})}function bg(){if(mi===0){var n=uo;n===0&&(n=tt,tt<<=1,(tt&261888)===0&&(tt=256)),mi=n}return mi}function kv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:XA(""+n)}function Rv(n,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,n.id&&o.setAttribute("form",n.id),i.parentNode.insertBefore(o,i),n=new FormData(n),o.parentNode.removeChild(o),n}function wj(n,i,o,c,m){if(i==="submit"&&o&&o.stateNode===m){var p=kv((m[yr]||null).action),w=c.submitter;w&&(i=(i=w[yr]||null)?kv(i.formAction):w.getAttribute("formAction"),i!==null&&(p=i,w=null));var I=new On("action","action",null,c,m);n.push({event:I,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(mi!==0){var $=w?Rv(m,w):new FormData(m);Hm(o,{pending:!0,data:$,method:m.method,action:p},null,$)}}else typeof p=="function"&&(I.preventDefault(),$=w?Rv(m,w):new FormData(m),Hm(o,{pending:!0,data:$,method:m.method,action:p},p,$))},currentTarget:m}]})}}for(var vg=0;vg<sm.length;vg++){var wg=sm[vg],Bj=wg.toLowerCase(),Cj=wg[0].toUpperCase()+wg.slice(1);wn(Bj,"on"+Cj)}wn(fy,"onAnimationEnd"),wn(my,"onAnimationIteration"),wn(gy,"onAnimationStart"),wn("dblclick","onDoubleClick"),wn("focusin","onFocus"),wn("focusout","onBlur"),wn(HS,"onTransitionRun"),wn(OS,"onTransitionStart"),wn(PS,"onTransitionCancel"),wn(py,"onTransitionEnd"),ys("onMouseEnter",["mouseout","mouseover"]),ys("onMouseLeave",["mouseout","mouseover"]),ys("onPointerEnter",["pointerout","pointerover"]),ys("onPointerLeave",["pointerout","pointerover"]),xs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xs("onBeforeInput",["compositionend","keypress","textInput","paste"]),xs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ej=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(nc));function Mv(n,i){i=(i&4)!==0;for(var o=0;o<n.length;o++){var c=n[o],m=c.event;c=c.listeners;e:{var p=void 0;if(i)for(var w=c.length-1;0<=w;w--){var I=c[w],$=I.instance,ie=I.currentTarget;if(I=I.listener,$!==p&&m.isPropagationStopped())break e;p=I,m.currentTarget=ie;try{p(m)}catch(fe){Od(fe)}m.currentTarget=null,p=$}else for(w=0;w<c.length;w++){if(I=c[w],$=I.instance,ie=I.currentTarget,I=I.listener,$!==p&&m.isPropagationStopped())break e;p=I,m.currentTarget=ie;try{p(m)}catch(fe){Od(fe)}m.currentTarget=null,p=$}}}}function dt(n,i){var o=i[pe];o===void 0&&(o=i[pe]=new Set);var c=n+"__bubble";o.has(c)||(Lv(i,n,2,!1),o.add(c))}function Bg(n,i,o){var c=0;i&&(c|=4),Lv(o,n,c,i)}var Su="_reactListening"+Math.random().toString(36).slice(2);function Cg(n){if(!n[Su]){n[Su]=!0,ps.forEach(function(o){o!=="selectionchange"&&(Ej.has(o)||Bg(o,!1,n),Bg(o,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Su]||(i[Su]=!0,Bg("selectionchange",!1,i))}}function Lv(n,i,o,c){switch(fw(i)){case 2:var m=Zj;break;case 8:m=e_;break;default:m=Lg}o=m.bind(null,i,o,n),m=void 0,!Zi||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(m=!0),c?m!==void 0?n.addEventListener(i,o,{capture:!0,passive:m}):n.addEventListener(i,o,!0):m!==void 0?n.addEventListener(i,o,{passive:m}):n.addEventListener(i,o,!1)}function Eg(n,i,o,c,m){var p=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var I=c.stateNode.containerInfo;if(I===m)break;if(w===4)for(w=c.return;w!==null;){var $=w.tag;if(($===3||$===4)&&w.stateNode.containerInfo===m)return;w=w.return}for(;I!==null;){if(w=kr(I),w===null)return;if($=w.tag,$===5||$===6||$===26||$===27){c=p=w;continue e}I=I.parentNode}}c=c.return}Xa(function(){var ie=p,fe=$s(o),ye=[];e:{var oe=xy.get(n);if(oe!==void 0){var de=On,Fe=n;switch(n){case"keypress":if(tA(o)===0)break e;case"keydown":case"keyup":de=Md;break;case"focusin":Fe="focus",de=sA;break;case"focusout":Fe="blur",de=sA;break;case"beforeblur":case"afterblur":de=sA;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=_l;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=_d;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=b;break;case fy:case my:case gy:de=Ud;break;case py:de=H;break;case"scroll":case"scrollend":de=jl;break;case"wheel":de=ce;break;case"copy":case"cut":case"paste":de=Qd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=ga;break;case"toggle":case"beforetoggle":de=rt}var qe=(i&4)!==0,Mt=!qe&&(n==="scroll"||n==="scrollend"),re=qe?oe!==null?oe+"Capture":null:oe;qe=[];for(var Z=ie,ae;Z!==null;){var xe=Z;if(ae=xe.stateNode,xe=xe.tag,xe!==5&&xe!==26&&xe!==27||ae===null||re===null||(xe=xn(Z,re),xe!=null&&qe.push(ac(Z,xe,ae))),Mt)break;Z=Z.return}0<qe.length&&(oe=new de(oe,Fe,null,o,fe),ye.push({event:oe,listeners:qe}))}}if((i&7)===0){e:{if(oe=n==="mouseover"||n==="pointerover",de=n==="mouseout"||n==="pointerout",oe&&o!==El&&(Fe=o.relatedTarget||o.fromElement)&&(kr(Fe)||Fe[Es]))break e;if((de||oe)&&(oe=fe.window===fe?fe:(oe=fe.ownerDocument)?oe.defaultView||oe.parentWindow:window,de?(Fe=o.relatedTarget||o.toElement,de=ie,Fe=Fe?kr(Fe):null,Fe!==null&&(Mt=l(Fe),qe=Fe.tag,Fe!==Mt||qe!==5&&qe!==27&&qe!==6)&&(Fe=null)):(de=null,Fe=ie),de!==Fe)){if(qe=_l,xe="onMouseLeave",re="onMouseEnter",Z="mouse",(n==="pointerout"||n==="pointerover")&&(qe=ga,xe="onPointerLeave",re="onPointerEnter",Z="pointer"),Mt=de==null?oe:ur(de),ae=Fe==null?oe:ur(Fe),oe=new qe(xe,Z+"leave",de,o,fe),oe.target=Mt,oe.relatedTarget=ae,xe=null,kr(fe)===ie&&(qe=new qe(re,Z+"enter",Fe,o,fe),qe.target=ae,qe.relatedTarget=Mt,xe=qe),Mt=xe,de&&Fe)t:{for(qe=Nj,re=de,Z=Fe,ae=0,xe=re;xe;xe=qe(xe))ae++;xe=0;for(var Oe=Z;Oe;Oe=qe(Oe))xe++;for(;0<ae-xe;)re=qe(re),ae--;for(;0<xe-ae;)Z=qe(Z),xe--;for(;ae--;){if(re===Z||Z!==null&&re===Z.alternate){qe=re;break t}re=qe(re),Z=qe(Z)}qe=null}else qe=null;de!==null&&Hv(ye,oe,de,qe,!1),Fe!==null&&Mt!==null&&Hv(ye,Mt,Fe,qe,!0)}}e:{if(oe=ie?ur(ie):window,de=oe.nodeName&&oe.nodeName.toLowerCase(),de==="select"||de==="input"&&oe.type==="file")var Bt=sy;else if(ty(oe))if(ny)Bt=RS;else{Bt=DS;var Re=IS}else de=oe.nodeName,!de||de.toLowerCase()!=="input"||oe.type!=="checkbox"&&oe.type!=="radio"?ie&&$A(ie.elementType)&&(Bt=sy):Bt=kS;if(Bt&&(Bt=Bt(n,ie))){ry(ye,Bt,o,fe);break e}Re&&Re(n,oe,ie),n==="focusout"&&ie&&oe.type==="number"&&ie.memoizedProps.value!=null&&wl(oe,"number",oe.value)}switch(Re=ie?ur(ie):window,n){case"focusin":(ty(Re)||Re.contentEditable==="true")&&(so=Re,em=ie,Il=null);break;case"focusout":Il=em=so=null;break;case"mousedown":tm=!0;break;case"contextmenu":case"mouseup":case"dragend":tm=!1,uy(ye,o,fe);break;case"selectionchange":if(LS)break;case"keydown":case"keyup":uy(ye,o,fe)}var at;if(Nt)e:{switch(n){case"compositionstart":var ft="onCompositionStart";break e;case"compositionend":ft="onCompositionEnd";break e;case"compositionupdate":ft="onCompositionUpdate";break e}ft=void 0}else ro?nA(n,o)&&(ft="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(ft="onCompositionStart");ft&&(zn&&o.locale!=="ko"&&(ro||ft!=="onCompositionStart"?ft==="onCompositionEnd"&&ro&&(at=Sl()):(Hn=fe,Nl="value"in Hn?Hn.value:Hn.textContent,ro=!0)),Re=ju(ie,ft),0<Re.length&&(ft=new Vn(ft,n,null,o,fe),ye.push({event:ft,listeners:Re}),at?ft.data=at:(at=to(o),at!==null&&(ft.data=at)))),(at=Js?TS(n,o):US(n,o))&&(ft=ju(ie,"onBeforeInput"),0<ft.length&&(Re=new Vn("onBeforeInput","beforeinput",null,o,fe),ye.push({event:Re,listeners:ft}),Re.data=at)),wj(ye,n,ie,o,fe)}Mv(ye,i)})}function ac(n,i,o){return{instance:n,listener:i,currentTarget:o}}function ju(n,i){for(var o=i+"Capture",c=[];n!==null;){var m=n,p=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||p===null||(m=xn(n,o),m!=null&&c.unshift(ac(n,m,p)),m=xn(n,i),m!=null&&c.push(ac(n,m,p))),n.tag===3)return c;n=n.return}return[]}function Nj(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Hv(n,i,o,c,m){for(var p=i._reactName,w=[];o!==null&&o!==c;){var I=o,$=I.alternate,ie=I.stateNode;if(I=I.tag,$!==null&&$===c)break;I!==5&&I!==26&&I!==27||ie===null||($=ie,m?(ie=xn(o,p),ie!=null&&w.unshift(ac(o,ie,$))):m||(ie=xn(o,p),ie!=null&&w.push(ac(o,ie,$)))),o=o.return}w.length!==0&&n.push({event:i,listeners:w})}var Sj=/\r\n?/g,jj=/\u0000|\uFFFD/g;function Ov(n){return(typeof n=="string"?n:""+n).replace(Sj,`
`).replace(jj,"")}function Pv(n,i){return i=Ov(i),Ov(n)===i}function Rt(n,i,o,c,m,p){switch(o){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||Ss(n,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&Ss(n,""+c);break;case"className":Rs(n,"class",c);break;case"tabIndex":Rs(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Rs(n,o,c);break;case"style":Cl(n,c,p);break;case"data":if(i!=="object"){Rs(n,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||o!=="href")){n.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=XA(""+c),n.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(i!=="input"&&Rt(n,i,"name",m.name,m,null),Rt(n,i,"formEncType",m.formEncType,m,null),Rt(n,i,"formMethod",m.formMethod,m,null),Rt(n,i,"formTarget",m.formTarget,m,null)):(Rt(n,i,"encType",m.encType,m,null),Rt(n,i,"method",m.method,m,null),Rt(n,i,"target",m.target,m,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=XA(""+c),n.setAttribute(o,c);break;case"onClick":c!=null&&(n.onclick=pn);break;case"onScroll":c!=null&&dt("scroll",n);break;case"onScrollEnd":c!=null&&dt("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(o=c.__html,o!=null){if(m.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}o=XA(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""+c):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":c===!0?n.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,c):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(o,c):n.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(o):n.setAttribute(o,c);break;case"popover":dt("beforetoggle",n),dt("toggle",n),qA(n,"popover",c);break;case"xlinkActuate":Sr(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Sr(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Sr(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Sr(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Sr(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Sr(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Sr(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Sr(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Sr(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":qA(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=jd.get(o)||o,qA(n,o,c))}}function Ng(n,i,o,c,m,p){switch(o){case"style":Cl(n,c,p);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(o=c.__html,o!=null){if(m.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"children":typeof c=="string"?Ss(n,c):(typeof c=="number"||typeof c=="bigint")&&Ss(n,""+c);break;case"onScroll":c!=null&&dt("scroll",n);break;case"onScrollEnd":c!=null&&dt("scrollend",n);break;case"onClick":c!=null&&(n.onclick=pn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Rr.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),i=o.slice(2,m?o.length-7:void 0),p=n[yr]||null,p=p!=null?p[o]:null,typeof p=="function"&&n.removeEventListener(i,p,m),typeof c=="function")){typeof p!="function"&&p!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(i,c,m);break e}o in n?n[o]=c:c===!0?n.setAttribute(o,""):qA(n,o,c)}}}function ts(n,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":dt("error",n),dt("load",n);var c=!1,m=!1,p;for(p in o)if(o.hasOwnProperty(p)){var w=o[p];if(w!=null)switch(p){case"src":c=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Rt(n,i,p,w,o,null)}}m&&Rt(n,i,"srcSet",o.srcSet,o,null),c&&Rt(n,i,"src",o.src,o,null);return;case"input":dt("invalid",n);var I=p=w=m=null,$=null,ie=null;for(c in o)if(o.hasOwnProperty(c)){var fe=o[c];if(fe!=null)switch(c){case"name":m=fe;break;case"type":w=fe;break;case"checked":$=fe;break;case"defaultChecked":ie=fe;break;case"value":p=fe;break;case"defaultValue":I=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(s(137,i));break;default:Rt(n,i,c,fe,o,null)}}Ed(n,p,I,$,ie,w,m,!1);return;case"select":dt("invalid",n),c=w=p=null;for(m in o)if(o.hasOwnProperty(m)&&(I=o[m],I!=null))switch(m){case"value":p=I;break;case"defaultValue":w=I;break;case"multiple":c=I;default:Rt(n,i,m,I,o,null)}i=p,o=w,n.multiple=!!c,i!=null?Ga(n,!!c,i,!1):o!=null&&Ga(n,!!c,o,!0);return;case"textarea":dt("invalid",n),p=m=c=null;for(w in o)if(o.hasOwnProperty(w)&&(I=o[w],I!=null))switch(w){case"value":c=I;break;case"defaultValue":m=I;break;case"children":p=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(s(91));break;default:Rt(n,i,w,I,o,null)}qa(n,c,m,p);return;case"option":for($ in o)o.hasOwnProperty($)&&(c=o[$],c!=null)&&($==="selected"?n.selected=c&&typeof c!="function"&&typeof c!="symbol":Rt(n,i,$,c,o,null));return;case"dialog":dt("beforetoggle",n),dt("toggle",n),dt("cancel",n),dt("close",n);break;case"iframe":case"object":dt("load",n);break;case"video":case"audio":for(c=0;c<nc.length;c++)dt(nc[c],n);break;case"image":dt("error",n),dt("load",n);break;case"details":dt("toggle",n);break;case"embed":case"source":case"link":dt("error",n),dt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ie in o)if(o.hasOwnProperty(ie)&&(c=o[ie],c!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Rt(n,i,ie,c,o,null)}return;default:if($A(i)){for(fe in o)o.hasOwnProperty(fe)&&(c=o[fe],c!==void 0&&Ng(n,i,fe,c,o,void 0));return}}for(I in o)o.hasOwnProperty(I)&&(c=o[I],c!=null&&Rt(n,i,I,c,o,null))}function _j(n,i,o,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,p=null,w=null,I=null,$=null,ie=null,fe=null;for(de in o){var ye=o[de];if(o.hasOwnProperty(de)&&ye!=null)switch(de){case"checked":break;case"value":break;case"defaultValue":$=ye;default:c.hasOwnProperty(de)||Rt(n,i,de,null,c,ye)}}for(var oe in c){var de=c[oe];if(ye=o[oe],c.hasOwnProperty(oe)&&(de!=null||ye!=null))switch(oe){case"type":p=de;break;case"name":m=de;break;case"checked":ie=de;break;case"defaultChecked":fe=de;break;case"value":w=de;break;case"defaultValue":I=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(s(137,i));break;default:de!==ye&&Rt(n,i,oe,de,c,ye)}}YA(n,w,I,$,ie,fe,p,m);return;case"select":de=w=I=oe=null;for(p in o)if($=o[p],o.hasOwnProperty(p)&&$!=null)switch(p){case"value":break;case"multiple":de=$;default:c.hasOwnProperty(p)||Rt(n,i,p,null,c,$)}for(m in c)if(p=c[m],$=o[m],c.hasOwnProperty(m)&&(p!=null||$!=null))switch(m){case"value":oe=p;break;case"defaultValue":I=p;break;case"multiple":w=p;default:p!==$&&Rt(n,i,m,p,c,$)}i=I,o=w,c=de,oe!=null?Ga(n,!!o,oe,!1):!!c!=!!o&&(i!=null?Ga(n,!!o,i,!0):Ga(n,!!o,o?[]:"",!1));return;case"textarea":de=oe=null;for(I in o)if(m=o[I],o.hasOwnProperty(I)&&m!=null&&!c.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:Rt(n,i,I,null,c,m)}for(w in c)if(m=c[w],p=o[w],c.hasOwnProperty(w)&&(m!=null||p!=null))switch(w){case"value":oe=m;break;case"defaultValue":de=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(s(91));break;default:m!==p&&Rt(n,i,w,m,c,p)}Nd(n,oe,de);return;case"option":for(var Fe in o)oe=o[Fe],o.hasOwnProperty(Fe)&&oe!=null&&!c.hasOwnProperty(Fe)&&(Fe==="selected"?n.selected=!1:Rt(n,i,Fe,null,c,oe));for($ in c)oe=c[$],de=o[$],c.hasOwnProperty($)&&oe!==de&&(oe!=null||de!=null)&&($==="selected"?n.selected=oe&&typeof oe!="function"&&typeof oe!="symbol":Rt(n,i,$,oe,c,de));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var qe in o)oe=o[qe],o.hasOwnProperty(qe)&&oe!=null&&!c.hasOwnProperty(qe)&&Rt(n,i,qe,null,c,oe);for(ie in c)if(oe=c[ie],de=o[ie],c.hasOwnProperty(ie)&&oe!==de&&(oe!=null||de!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(s(137,i));break;default:Rt(n,i,ie,oe,c,de)}return;default:if($A(i)){for(var Mt in o)oe=o[Mt],o.hasOwnProperty(Mt)&&oe!==void 0&&!c.hasOwnProperty(Mt)&&Ng(n,i,Mt,void 0,c,oe);for(fe in c)oe=c[fe],de=o[fe],!c.hasOwnProperty(fe)||oe===de||oe===void 0&&de===void 0||Ng(n,i,fe,oe,c,de);return}}for(var re in o)oe=o[re],o.hasOwnProperty(re)&&oe!=null&&!c.hasOwnProperty(re)&&Rt(n,i,re,null,c,oe);for(ye in c)oe=c[ye],de=o[ye],!c.hasOwnProperty(ye)||oe===de||oe==null&&de==null||Rt(n,i,ye,oe,c,de)}function Vv(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Tj(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var m=o[c],p=m.transferSize,w=m.initiatorType,I=m.duration;if(p&&I&&Vv(w)){for(w=0,I=m.responseEnd,c+=1;c<o.length;c++){var $=o[c],ie=$.startTime;if(ie>I)break;var fe=$.transferSize,ye=$.initiatorType;fe&&Vv(ye)&&($=$.responseEnd,w+=fe*($<I?1:(I-ie)/($-ie)))}if(--c,i+=8*(p+w)/(m.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Sg=null,jg=null;function _u(n){return n.nodeType===9?n:n.ownerDocument}function zv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Kv(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function _g(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Tg=null;function Uj(){var n=window.event;return n&&n.type==="popstate"?n===Tg?!1:(Tg=n,!0):(Tg=null,!1)}var Gv=typeof setTimeout=="function"?setTimeout:void 0,Qj=typeof clearTimeout=="function"?clearTimeout:void 0,qv=typeof Promise=="function"?Promise:void 0,Fj=typeof queueMicrotask=="function"?queueMicrotask:typeof qv<"u"?function(n){return qv.resolve(null).then(n).catch(Ij)}:Gv;function Ij(n){setTimeout(function(){throw n})}function gi(n){return n==="head"}function Yv(n,i){var o=i,c=0;do{var m=o.nextSibling;if(n.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"||o==="/&"){if(c===0){n.removeChild(m),Uo(i);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")ic(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,ic(o);for(var p=o.firstChild;p;){var w=p.nextSibling,I=p.nodeName;p[Et]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&p.rel.toLowerCase()==="stylesheet"||o.removeChild(p),p=w}}else o==="body"&&ic(n.ownerDocument.body);o=m}while(o);Uo(i)}function $v(n,i){var o=n;n=0;do{var c=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=c}while(o)}function Ug(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Ug(o),Wt(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function Dj(n,i,o,c){for(;n.nodeType===1;){var m=o;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[Et])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(p=n.getAttribute("rel"),p==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(p!==m.rel||n.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||n.getAttribute("title")!==(m.title==null?null:m.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(p=n.getAttribute("src"),(p!==(m.src==null?null:m.src)||n.getAttribute("type")!==(m.type==null?null:m.type)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&p&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var p=m.name==null?null:""+m.name;if(m.type==="hidden"&&n.getAttribute("name")===p)return n}else return n;if(n=nn(n.nextSibling),n===null)break}return null}function kj(n,i,o){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=nn(n.nextSibling),n===null))return null;return n}function Xv(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=nn(n.nextSibling),n===null))return null;return n}function Qg(n){return n.data==="$?"||n.data==="$~"}function Fg(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function Rj(n,i){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||o.readyState!=="loading")i();else{var c=function(){i(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function nn(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var Ig=null;function Jv(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(i===0)return nn(n.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}n=n.nextSibling}return null}function Wv(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return n;i--}else o!=="/$"&&o!=="/&"||i++}n=n.previousSibling}return null}function Zv(n,i,o){switch(i=_u(o),n){case"html":if(n=i.documentElement,!n)throw Error(s(452));return n;case"head":if(n=i.head,!n)throw Error(s(453));return n;case"body":if(n=i.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function ic(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);Wt(n)}var an=new Map,ew=new Set;function Tu(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Ua=F.d;F.d={f:Mj,r:Lj,D:Hj,C:Oj,L:Pj,m:Vj,X:Kj,S:zj,M:Gj};function Mj(){var n=Ua.f(),i=vu();return n||i}function Lj(n){var i=$e(n);i!==null&&i.tag===5&&i.type==="form"?pb(i):Ua.r(n)}var jo=typeof document>"u"?null:document;function tw(n,i,o){var c=jo;if(c&&typeof i=="string"&&i){var m=Ns(i);m='link[rel="'+n+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),ew.has(m)||(ew.add(m),n={rel:n,crossOrigin:o,href:i},c.querySelector(m)===null&&(i=c.createElement("link"),ts(i,"link",n),Ht(i),c.head.appendChild(i)))}}function Hj(n){Ua.D(n),tw("dns-prefetch",n,null)}function Oj(n,i){Ua.C(n,i),tw("preconnect",n,i)}function Pj(n,i,o){Ua.L(n,i,o);var c=jo;if(c&&n&&i){var m='link[rel="preload"][as="'+Ns(i)+'"]';i==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+Ns(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+Ns(o.imageSizes)+'"]')):m+='[href="'+Ns(n)+'"]';var p=m;switch(i){case"style":p=_o(n);break;case"script":p=To(n)}an.has(p)||(n=y({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:n,as:i},o),an.set(p,n),c.querySelector(m)!==null||i==="style"&&c.querySelector(Ac(p))||i==="script"&&c.querySelector(oc(p))||(i=c.createElement("link"),ts(i,"link",n),Ht(i),c.head.appendChild(i)))}}function Vj(n,i){Ua.m(n,i);var o=jo;if(o&&n){var c=i&&typeof i.as=="string"?i.as:"script",m='link[rel="modulepreload"][as="'+Ns(c)+'"][href="'+Ns(n)+'"]',p=m;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=To(n)}if(!an.has(p)&&(n=y({rel:"modulepreload",href:n},i),an.set(p,n),o.querySelector(m)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(oc(p)))return}c=o.createElement("link"),ts(c,"link",n),Ht(c),o.head.appendChild(c)}}}function zj(n,i,o){Ua.S(n,i,o);var c=jo;if(c&&n){var m=ar(c).hoistableStyles,p=_o(n);i=i||"default";var w=m.get(p);if(!w){var I={loading:0,preload:null};if(w=c.querySelector(Ac(p)))I.loading=5;else{n=y({rel:"stylesheet",href:n,"data-precedence":i},o),(o=an.get(p))&&Dg(n,o);var $=w=c.createElement("link");Ht($),ts($,"link",n),$._p=new Promise(function(ie,fe){$.onload=ie,$.onerror=fe}),$.addEventListener("load",function(){I.loading|=1}),$.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Uu(w,i,c)}w={type:"stylesheet",instance:w,count:1,state:I},m.set(p,w)}}}function Kj(n,i){Ua.X(n,i);var o=jo;if(o&&n){var c=ar(o).hoistableScripts,m=To(n),p=c.get(m);p||(p=o.querySelector(oc(m)),p||(n=y({src:n,async:!0},i),(i=an.get(m))&&kg(n,i),p=o.createElement("script"),Ht(p),ts(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(m,p))}}function Gj(n,i){Ua.M(n,i);var o=jo;if(o&&n){var c=ar(o).hoistableScripts,m=To(n),p=c.get(m);p||(p=o.querySelector(oc(m)),p||(n=y({src:n,async:!0,type:"module"},i),(i=an.get(m))&&kg(n,i),p=o.createElement("script"),Ht(p),ts(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(m,p))}}function rw(n,i,o,c){var m=(m=Be.current)?Tu(m):null;if(!m)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=_o(o.href),o=ar(m).hoistableStyles,c=o.get(i),c||(c={type:"style",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=_o(o.href);var p=ar(m).hoistableStyles,w=p.get(n);if(w||(m=m.ownerDocument||m,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(n,w),(p=m.querySelector(Ac(n)))&&!p._p&&(w.instance=p,w.state.loading=5),an.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},an.set(n,o),p||qj(m,n,o,w.state))),i&&c===null)throw Error(s(528,""));return w}if(i&&c!==null)throw Error(s(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=To(o),o=ar(m).hoistableScripts,c=o.get(i),c||(c={type:"script",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function _o(n){return'href="'+Ns(n)+'"'}function Ac(n){return'link[rel="stylesheet"]['+n+"]"}function sw(n){return y({},n,{"data-precedence":n.precedence,precedence:null})}function qj(n,i,o,c){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=n.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),ts(i,"link",o),Ht(i),n.head.appendChild(i))}function To(n){return'[src="'+Ns(n)+'"]'}function oc(n){return"script[async]"+n}function nw(n,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var c=n.querySelector('style[data-href~="'+Ns(o.href)+'"]');if(c)return i.instance=c,Ht(c),c;var m=y({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),Ht(c),ts(c,"style",m),Uu(c,o.precedence,n),i.instance=c;case"stylesheet":m=_o(o.href);var p=n.querySelector(Ac(m));if(p)return i.state.loading|=4,i.instance=p,Ht(p),p;c=sw(o),(m=an.get(m))&&Dg(c,m),p=(n.ownerDocument||n).createElement("link"),Ht(p);var w=p;return w._p=new Promise(function(I,$){w.onload=I,w.onerror=$}),ts(p,"link",c),i.state.loading|=4,Uu(p,o.precedence,n),i.instance=p;case"script":return p=To(o.src),(m=n.querySelector(oc(p)))?(i.instance=m,Ht(m),m):(c=o,(m=an.get(p))&&(c=y({},o),kg(c,m)),n=n.ownerDocument||n,m=n.createElement("script"),Ht(m),ts(m,"link",c),n.head.appendChild(m),i.instance=m);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,Uu(c,o.precedence,n));return i.instance}function Uu(n,i,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=c.length?c[c.length-1]:null,p=m,w=0;w<c.length;w++){var I=c[w];if(I.dataset.precedence===i)p=I;else if(p!==m)break}p?p.parentNode.insertBefore(n,p.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(n,i.firstChild))}function Dg(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function kg(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Qu=null;function aw(n,i,o){if(Qu===null){var c=new Map,m=Qu=new Map;m.set(o,c)}else m=Qu,c=m.get(o),c||(c=new Map,m.set(o,c));if(c.has(n))return c;for(c.set(n,null),o=o.getElementsByTagName(n),m=0;m<o.length;m++){var p=o[m];if(!(p[Et]||p[dr]||n==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var w=p.getAttribute(i)||"";w=n+w;var I=c.get(w);I?I.push(p):c.set(w,[p])}}return c}function iw(n,i,o){n=n.ownerDocument||n,n.head.insertBefore(o,i==="title"?n.querySelector("head > title"):null)}function Yj(n,i,o){if(o===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(n=i.disabled,typeof i.precedence=="string"&&n==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Aw(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function $j(n,i,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=_o(c.href),p=i.querySelector(Ac(m));if(p){i=p._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=Fu.bind(n),i.then(n,n)),o.state.loading|=4,o.instance=p,Ht(p);return}p=i.ownerDocument||i,c=sw(c),(m=an.get(m))&&Dg(c,m),p=p.createElement("link"),Ht(p);var w=p;w._p=new Promise(function(I,$){w.onload=I,w.onerror=$}),ts(p,"link",c),o.instance=p}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=Fu.bind(n),i.addEventListener("load",o),i.addEventListener("error",o))}}var Rg=0;function Xj(n,i){return n.stylesheets&&n.count===0&&Du(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var c=setTimeout(function(){if(n.stylesheets&&Du(n,n.stylesheets),n.unsuspend){var p=n.unsuspend;n.unsuspend=null,p()}},6e4+i);0<n.imgBytes&&Rg===0&&(Rg=62500*Tj());var m=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Du(n,n.stylesheets),n.unsuspend)){var p=n.unsuspend;n.unsuspend=null,p()}},(n.imgBytes>Rg?50:800)+i);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(m)}}:null}function Fu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Du(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Iu=null;function Du(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Iu=new Map,i.forEach(Jj,n),Iu=null,Fu.call(n))}function Jj(n,i){if(!(i.state.loading&4)){var o=Iu.get(n);if(o)var c=o.get(null);else{o=new Map,Iu.set(n,o);for(var m=n.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<m.length;p++){var w=m[p];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(o.set(w.dataset.precedence,w),c=w)}c&&o.set(null,c)}m=i.instance,w=m.getAttribute("data-precedence"),p=o.get(w)||c,p===c&&o.set(null,m),o.set(w,m),this.count++,c=Fu.bind(this),m.addEventListener("load",c),m.addEventListener("error",c),p?p.parentNode.insertBefore(m,p.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(m,n.firstChild)),i.state.loading|=4}}var lc={$$typeof:q,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function Wj(n,i,o,c,m,p,w,I,$){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ys(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ys(0),this.hiddenUpdates=Ys(null),this.identifierPrefix=c,this.onUncaughtError=m,this.onCaughtError=p,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=$,this.incompleteTransitions=new Map}function ow(n,i,o,c,m,p,w,I,$,ie,fe,ye){return n=new Wj(n,i,o,w,$,ie,fe,ye,I),i=1,p===!0&&(i|=24),p=Ls(3,null,null,i),n.current=p,p.stateNode=n,i=gm(),i.refCount++,n.pooledCache=i,i.refCount++,p.memoizedState={element:c,isDehydrated:o,cache:i},bm(p),n}function lw(n){return n?(n=io,n):io}function cw(n,i,o,c,m,p){m=lw(m),c.context===null?c.context=m:c.pendingContext=m,c=ai(i),c.payload={element:o},p=p===void 0?null:p,p!==null&&(c.callback=p),o=ii(n,c,i),o!==null&&(Qs(o,n,i),Ol(o,n,i))}function dw(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<i?o:i}}function Mg(n,i){dw(n,i),(n=n.alternate)&&dw(n,i)}function uw(n){if(n.tag===13||n.tag===31){var i=AA(n,67108864);i!==null&&Qs(i,n,67108864),Mg(n,67108864)}}function hw(n){if(n.tag===13||n.tag===31){var i=zs();i=ha(i);var o=AA(n,i);o!==null&&Qs(o,n,i),Mg(n,i)}}var ku=!0;function Zj(n,i,o,c){var m=M.T;M.T=null;var p=F.p;try{F.p=2,Lg(n,i,o,c)}finally{F.p=p,M.T=m}}function e_(n,i,o,c){var m=M.T;M.T=null;var p=F.p;try{F.p=8,Lg(n,i,o,c)}finally{F.p=p,M.T=m}}function Lg(n,i,o,c){if(ku){var m=Hg(c);if(m===null)Eg(n,i,c,Ru,o),mw(n,c);else if(r_(m,n,i,o,c))c.stopPropagation();else if(mw(n,c),i&4&&-1<t_.indexOf(n)){for(;m!==null;){var p=$e(m);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var w=Kt(p.pendingLanes);if(w!==0){var I=p;for(I.pendingLanes|=2,I.entangledLanes|=2;w;){var $=1<<31-Vt(w);I.entanglements[1]|=$,w&=~$}Yn(p),(St&6)===0&&(yu=sr()+500,sc(0))}}break;case 31:case 13:I=AA(p,2),I!==null&&Qs(I,p,2),vu(),Mg(p,2)}if(p=Hg(c),p===null&&Eg(n,i,c,Ru,o),p===m)break;m=p}m!==null&&c.stopPropagation()}else Eg(n,i,c,null,o)}}function Hg(n){return n=$s(n),Og(n)}var Ru=null;function Og(n){if(Ru=null,n=kr(n),n!==null){var i=l(n);if(i===null)n=null;else{var o=i.tag;if(o===13){if(n=d(i),n!==null)return n;n=null}else if(o===31){if(n=u(i),n!==null)return n;n=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Ru=n,null}function fw(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ve()){case jt:return 2;case lr:return 8;case Ut:case gr:return 32;case Cs:return 268435456;default:return 32}default:return 32}}var Pg=!1,pi=null,xi=null,yi=null,cc=new Map,dc=new Map,bi=[],t_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function mw(n,i){switch(n){case"focusin":case"focusout":pi=null;break;case"dragenter":case"dragleave":xi=null;break;case"mouseover":case"mouseout":yi=null;break;case"pointerover":case"pointerout":cc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":dc.delete(i.pointerId)}}function uc(n,i,o,c,m,p){return n===null||n.nativeEvent!==p?(n={blockedOn:i,domEventName:o,eventSystemFlags:c,nativeEvent:p,targetContainers:[m]},i!==null&&(i=$e(i),i!==null&&uw(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,m!==null&&i.indexOf(m)===-1&&i.push(m),n)}function r_(n,i,o,c,m){switch(i){case"focusin":return pi=uc(pi,n,i,o,c,m),!0;case"dragenter":return xi=uc(xi,n,i,o,c,m),!0;case"mouseover":return yi=uc(yi,n,i,o,c,m),!0;case"pointerover":var p=m.pointerId;return cc.set(p,uc(cc.get(p)||null,n,i,o,c,m)),!0;case"gotpointercapture":return p=m.pointerId,dc.set(p,uc(dc.get(p)||null,n,i,o,c,m)),!0}return!1}function gw(n){var i=kr(n.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=d(o),i!==null){n.blockedOn=i,gs(n.priority,function(){hw(o)});return}}else if(i===31){if(i=u(o),i!==null){n.blockedOn=i,gs(n.priority,function(){hw(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Mu(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var o=Hg(n.nativeEvent);if(o===null){o=n.nativeEvent;var c=new o.constructor(o.type,o);El=c,o.target.dispatchEvent(c),El=null}else return i=$e(o),i!==null&&uw(i),n.blockedOn=o,!1;i.shift()}return!0}function pw(n,i,o){Mu(n)&&o.delete(i)}function s_(){Pg=!1,pi!==null&&Mu(pi)&&(pi=null),xi!==null&&Mu(xi)&&(xi=null),yi!==null&&Mu(yi)&&(yi=null),cc.forEach(pw),dc.forEach(pw)}function Lu(n,i){n.blockedOn===i&&(n.blockedOn=null,Pg||(Pg=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,s_)))}var Hu=null;function xw(n){Hu!==n&&(Hu=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Hu===n&&(Hu=null);for(var i=0;i<n.length;i+=3){var o=n[i],c=n[i+1],m=n[i+2];if(typeof c!="function"){if(Og(c||o)===null)continue;break}var p=$e(o);p!==null&&(n.splice(i,3),i-=3,Hm(p,{pending:!0,data:m,method:o.method,action:c},c,m))}}))}function Uo(n){function i($){return Lu($,n)}pi!==null&&Lu(pi,n),xi!==null&&Lu(xi,n),yi!==null&&Lu(yi,n),cc.forEach(i),dc.forEach(i);for(var o=0;o<bi.length;o++){var c=bi[o];c.blockedOn===n&&(c.blockedOn=null)}for(;0<bi.length&&(o=bi[0],o.blockedOn===null);)gw(o),o.blockedOn===null&&bi.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var m=o[c],p=o[c+1],w=m[yr]||null;if(typeof p=="function")w||xw(o);else if(w){var I=null;if(p&&p.hasAttribute("formAction")){if(m=p,w=p[yr]||null)I=w.formAction;else if(Og(m)!==null)continue}else I=w.action;typeof I=="function"?o[c+1]=I:(o.splice(c,3),c-=3),xw(o)}}}function yw(){function n(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(w){return m=w})},focusReset:"manual",scroll:"manual"})}function i(){m!==null&&(m(),m=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,m=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),m!==null&&(m(),m=null)}}}function Vg(n){this._internalRoot=n}Ou.prototype.render=Vg.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(s(409));var o=i.current,c=zs();cw(o,c,n,i,null,null)},Ou.prototype.unmount=Vg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;cw(n.current,2,null,n,null,null),vu(),i[Es]=null}};function Ou(n){this._internalRoot=n}Ou.prototype.unstable_scheduleHydration=function(n){if(n){var i=za();n={blockedOn:null,target:n,priority:i};for(var o=0;o<bi.length&&i!==0&&i<bi[o].priority;o++);bi.splice(o,0,n),o===0&&gw(n)}};var bw=e.version;if(bw!=="19.2.3")throw Error(s(527,bw,"19.2.3"));F.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=g(i),n=n!==null?x(n):null,n=n===null?null:n.stateNode,n};var n_={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pu.isDisabled&&Pu.supportsFiber)try{Jt=Pu.inject(n_),cr=Pu}catch{}}return fc.createRoot=function(n,i){if(!A(n))throw Error(s(299));var o=!1,c="",m=Sb,p=jb,w=_b;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(m=i.onUncaughtError),i.onCaughtError!==void 0&&(p=i.onCaughtError),i.onRecoverableError!==void 0&&(w=i.onRecoverableError)),i=ow(n,1,!1,null,null,o,c,null,m,p,w,yw),n[Es]=i.current,Cg(n),new Vg(i)},fc.hydrateRoot=function(n,i,o){if(!A(n))throw Error(s(299));var c=!1,m="",p=Sb,w=jb,I=_b,$=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(I=o.onRecoverableError),o.formState!==void 0&&($=o.formState)),i=ow(n,1,!0,i,o??null,c,m,$,p,w,I,yw),i.context=lw(null),o=i.current,c=zs(),c=ha(c),m=ai(c),m.callback=null,ii(o,m,c),o=c,i.current.lanes=o,Dn(i,o),Yn(i),n[Es]=i.current,Cg(n),new Ou(i)},fc.version="19.2.3",fc}var Tw;function h_(){if(Tw)return Gg.exports;Tw=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Gg.exports=u_(),Gg.exports}var f_=h_();const m_=()=>{};var Uw={};const U1=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let A=r.charCodeAt(s);A<128?e[t++]=A:A<2048?(e[t++]=A>>6|192,e[t++]=A&63|128):(A&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(A=65536+((A&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=A>>18|240,e[t++]=A>>12&63|128,e[t++]=A>>6&63|128,e[t++]=A&63|128):(e[t++]=A>>12|224,e[t++]=A>>6&63|128,e[t++]=A&63|128)}return e},g_=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const A=r[t++];if(A<128)e[s++]=String.fromCharCode(A);else if(A>191&&A<224){const l=r[t++];e[s++]=String.fromCharCode((A&31)<<6|l&63)}else if(A>239&&A<365){const l=r[t++],d=r[t++],u=r[t++],f=((A&7)<<18|(l&63)<<12|(d&63)<<6|u&63)-65536;e[s++]=String.fromCharCode(55296+(f>>10)),e[s++]=String.fromCharCode(56320+(f&1023))}else{const l=r[t++],d=r[t++];e[s++]=String.fromCharCode((A&15)<<12|(l&63)<<6|d&63)}}return e.join("")},Q1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let A=0;A<r.length;A+=3){const l=r[A],d=A+1<r.length,u=d?r[A+1]:0,f=A+2<r.length,g=f?r[A+2]:0,x=l>>2,y=(l&3)<<4|u>>4;let v=(u&15)<<2|g>>6,S=g&63;f||(S=64,d||(v=64)),s.push(t[x],t[y],t[v],t[S])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(U1(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):g_(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let A=0;A<r.length;){const l=t[r.charAt(A++)],u=A<r.length?t[r.charAt(A)]:0;++A;const g=A<r.length?t[r.charAt(A)]:64;++A;const y=A<r.length?t[r.charAt(A)]:64;if(++A,l==null||u==null||g==null||y==null)throw new p_;const v=l<<2|u>>4;if(s.push(v),g!==64){const S=u<<4&240|g>>2;if(s.push(S),y!==64){const R=g<<6&192|y;s.push(R)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class p_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const x_=function(r){const e=U1(r);return Q1.encodeByteArray(e,!0)},Lh=function(r){return x_(r).replace(/\./g,"")},F1=function(r){try{return Q1.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function y_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const b_=()=>y_().__FIREBASE_DEFAULTS__,v_=()=>{if(typeof process>"u"||typeof Uw>"u")return;const r=Uw.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},w_=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&F1(r[1]);return e&&JSON.parse(e)},wf=()=>{try{return m_()||b_()||v_()||w_()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},I1=r=>wf()?.emulatorHosts?.[r],B_=r=>{const e=I1(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},D1=()=>wf()?.config,k1=r=>wf()?.[`_${r}`];class C_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}function dl(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function R1(r){return(await fetch(r,{credentials:"include"})).ok}function E_(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",A=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:A,exp:A+3600,auth_time:A,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Lh(JSON.stringify(t)),Lh(JSON.stringify(d)),""].join(".")}const Fc={};function N_(){const r={prod:[],emulator:[]};for(const e of Object.keys(Fc))Fc[e]?r.emulator.push(e):r.prod.push(e);return r}function S_(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Qw=!1;function M1(r,e){if(typeof window>"u"||typeof document>"u"||!dl(window.location.host)||Fc[r]===e||Fc[r]||Qw)return;Fc[r]=e;function t(v){return`__firebase__banner__${v}`}const s="__firebase__banner",l=N_().prod.length>0;function d(){const v=document.getElementById(s);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function f(v,S){v.setAttribute("width","24"),v.setAttribute("id",S),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function g(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{Qw=!0,d()},v}function x(v,S){v.setAttribute("id",S),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function y(){const v=S_(s),S=t("text"),R=document.getElementById(S)||document.createElement("span"),j=t("learnmore"),V=document.getElementById(j)||document.createElement("a"),P=t("preprendIcon"),G=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const q=v.element;u(q),x(V,j);const W=g();f(G,P),q.append(G,R,V,W),document.body.appendChild(q)}l?(R.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}function ms(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function j_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ms())}function __(){const r=wf()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function T_(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function U_(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Q_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function F_(){const r=ms();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function I_(){return!__()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function D_(){try{return typeof indexedDB=="object"}catch{return!1}}function k_(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",A=self.indexedDB.open(s);A.onsuccess=()=>{A.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},A.onupgradeneeded=()=>{t=!1},A.onerror=()=>{e(A.error?.message||"")}}catch(t){e(t)}})}const R_="FirebaseError";class Pa extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=R_,Object.setPrototypeOf(this,Pa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,od.prototype.create)}}class od{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},A=`${this.service}/${e}`,l=this.errors[e],d=l?M_(l,s):"Error",u=`${this.serviceName}: ${d} (${A}).`;return new Pa(A,u,s)}}function M_(r,e){return r.replace(L_,(t,s)=>{const A=e[s];return A!=null?String(A):`<${s}?>`})}const L_=/\{\$([^}]+)}/g;function H_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function DA(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const A of t){if(!s.includes(A))return!1;const l=r[A],d=e[A];if(Fw(l)&&Fw(d)){if(!DA(l,d))return!1}else if(l!==d)return!1}for(const A of s)if(!t.includes(A))return!1;return!0}function Fw(r){return r!==null&&typeof r=="object"}function ld(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(A=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(A))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function O_(r,e){const t=new P_(r,e);return t.subscribe.bind(t)}class P_{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let A;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");V_(e,["next","error","complete"])?A=e:A={next:e,error:t,complete:s},A.next===void 0&&(A.next=Xg),A.error===void 0&&(A.error=Xg),A.complete===void 0&&(A.complete=Xg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?A.error(this.finalError):A.complete()}catch{}}),this.observers.push(A),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function V_(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Xg(){}function hn(r){return r&&r._delegate?r._delegate:r}class kA{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const BA="[DEFAULT]";class z_{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new C_;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const A=this.getOrInitializeService({instanceIdentifier:t});A&&s.resolve(A)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(A){if(s)return null;throw A}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(G_(e))try{this.getOrInitializeService({instanceIdentifier:BA})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const A=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:A});s.resolve(l)}catch{}}}}clearInstance(e=BA){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=BA){return this.instances.has(e)}getOptions(e=BA){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const A=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,d]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(l);s===u&&d.resolve(A)}return A}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),A=this.onInitCallbacks.get(s)??new Set;A.add(e),this.onInitCallbacks.set(s,A);const l=this.instances.get(s);return l&&e(l,s),()=>{A.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const A of s)try{A(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:K_(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=BA){return this.component?this.component.multipleInstances?e:BA:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function K_(r){return r===BA?void 0:r}function G_(r){return r.instantiationMode==="EAGER"}class q_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new z_(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var gt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(gt||(gt={}));const Y_={debug:gt.DEBUG,verbose:gt.VERBOSE,info:gt.INFO,warn:gt.WARN,error:gt.ERROR,silent:gt.SILENT},$_=gt.INFO,X_={[gt.DEBUG]:"log",[gt.VERBOSE]:"log",[gt.INFO]:"info",[gt.WARN]:"warn",[gt.ERROR]:"error"},J_=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),A=X_[e];if(A)console[A](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let Wx=class{constructor(e){this.name=e,this._logLevel=$_,this._logHandler=J_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in gt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Y_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,gt.DEBUG,...e),this._logHandler(this,gt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,gt.VERBOSE,...e),this._logHandler(this,gt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,gt.INFO,...e),this._logHandler(this,gt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,gt.WARN,...e),this._logHandler(this,gt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,gt.ERROR,...e),this._logHandler(this,gt.ERROR,...e)}};const W_=(r,e)=>e.some(t=>r instanceof t);let Iw,Dw;function Z_(){return Iw||(Iw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eT(){return Dw||(Dw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const L1=new WeakMap,Gp=new WeakMap,H1=new WeakMap,Jg=new WeakMap,Zx=new WeakMap;function tT(r){const e=new Promise((t,s)=>{const A=()=>{r.removeEventListener("success",l),r.removeEventListener("error",d)},l=()=>{t(Ii(r.result)),A()},d=()=>{s(r.error),A()};r.addEventListener("success",l),r.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&L1.set(t,r)}).catch(()=>{}),Zx.set(e,r),e}function rT(r){if(Gp.has(r))return;const e=new Promise((t,s)=>{const A=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",d),r.removeEventListener("abort",d)},l=()=>{t(),A()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),A()};r.addEventListener("complete",l),r.addEventListener("error",d),r.addEventListener("abort",d)});Gp.set(r,e)}let qp={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Gp.get(r);if(e==="objectStoreNames")return r.objectStoreNames||H1.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ii(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function sT(r){qp=r(qp)}function nT(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(Wg(this),e,...t);return H1.set(s,e.sort?e.sort():[e]),Ii(s)}:eT().includes(r)?function(...e){return r.apply(Wg(this),e),Ii(L1.get(this))}:function(...e){return Ii(r.apply(Wg(this),e))}}function aT(r){return typeof r=="function"?nT(r):(r instanceof IDBTransaction&&rT(r),W_(r,Z_())?new Proxy(r,qp):r)}function Ii(r){if(r instanceof IDBRequest)return tT(r);if(Jg.has(r))return Jg.get(r);const e=aT(r);return e!==r&&(Jg.set(r,e),Zx.set(e,r)),e}const Wg=r=>Zx.get(r);function iT(r,e,{blocked:t,upgrade:s,blocking:A,terminated:l}={}){const d=indexedDB.open(r,e),u=Ii(d);return s&&d.addEventListener("upgradeneeded",f=>{s(Ii(d.result),f.oldVersion,f.newVersion,Ii(d.transaction),f)}),t&&d.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),u.then(f=>{l&&f.addEventListener("close",()=>l()),A&&f.addEventListener("versionchange",g=>A(g.oldVersion,g.newVersion,g))}).catch(()=>{}),u}const AT=["get","getKey","getAll","getAllKeys","count"],oT=["put","add","delete","clear"],Zg=new Map;function kw(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Zg.get(e))return Zg.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,A=oT.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(A||AT.includes(t)))return;const l=async function(d,...u){const f=this.transaction(d,A?"readwrite":"readonly");let g=f.store;return s&&(g=g.index(u.shift())),(await Promise.all([g[t](...u),A&&f.done]))[0]};return Zg.set(e,l),l}sT(r=>({...r,get:(e,t,s)=>kw(e,t)||r.get(e,t,s),has:(e,t)=>!!kw(e,t)||r.has(e,t)}));class lT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(cT(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function cT(r){return r.getComponent()?.type==="VERSION"}const Yp="@firebase/app",Rw="0.14.8";const Ra=new Wx("@firebase/app"),dT="@firebase/app-compat",uT="@firebase/analytics-compat",hT="@firebase/analytics",fT="@firebase/app-check-compat",mT="@firebase/app-check",gT="@firebase/auth",pT="@firebase/auth-compat",xT="@firebase/database",yT="@firebase/data-connect",bT="@firebase/database-compat",vT="@firebase/functions",wT="@firebase/functions-compat",BT="@firebase/installations",CT="@firebase/installations-compat",ET="@firebase/messaging",NT="@firebase/messaging-compat",ST="@firebase/performance",jT="@firebase/performance-compat",_T="@firebase/remote-config",TT="@firebase/remote-config-compat",UT="@firebase/storage",QT="@firebase/storage-compat",FT="@firebase/firestore",IT="@firebase/ai",DT="@firebase/firestore-compat",kT="firebase",RT="12.9.0";const $p="[DEFAULT]",MT={[Yp]:"fire-core",[dT]:"fire-core-compat",[hT]:"fire-analytics",[uT]:"fire-analytics-compat",[mT]:"fire-app-check",[fT]:"fire-app-check-compat",[gT]:"fire-auth",[pT]:"fire-auth-compat",[xT]:"fire-rtdb",[yT]:"fire-data-connect",[bT]:"fire-rtdb-compat",[vT]:"fire-fn",[wT]:"fire-fn-compat",[BT]:"fire-iid",[CT]:"fire-iid-compat",[ET]:"fire-fcm",[NT]:"fire-fcm-compat",[ST]:"fire-perf",[jT]:"fire-perf-compat",[_T]:"fire-rc",[TT]:"fire-rc-compat",[UT]:"fire-gcs",[QT]:"fire-gcs-compat",[FT]:"fire-fst",[DT]:"fire-fst-compat",[IT]:"fire-vertex","fire-js":"fire-js",[kT]:"fire-js-all"};const Hh=new Map,LT=new Map,Xp=new Map;function Mw(r,e){try{r.container.addComponent(e)}catch(t){Ra.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function rl(r){const e=r.name;if(Xp.has(e))return Ra.debug(`There were multiple attempts to register component ${e}.`),!1;Xp.set(e,r);for(const t of Hh.values())Mw(t,r);for(const t of LT.values())Mw(t,r);return!0}function e0(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Nn(r){return r==null?!1:r.settings!==void 0}const HT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Di=new od("app","Firebase",HT);class OT{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new kA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Di.create("app-deleted",{appName:this._name})}}const ul=RT;function t0(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:$p,automaticDataCollectionEnabled:!0,...e},A=s.name;if(typeof A!="string"||!A)throw Di.create("bad-app-name",{appName:String(A)});if(t||(t=D1()),!t)throw Di.create("no-options");const l=Hh.get(A);if(l){if(DA(t,l.options)&&DA(s,l.config))return l;throw Di.create("duplicate-app",{appName:A})}const d=new q_(A);for(const f of Xp.values())d.addComponent(f);const u=new OT(t,s,d);return Hh.set(A,u),u}function O1(r=$p){const e=Hh.get(r);if(!e&&r===$p&&D1())return t0();if(!e)throw Di.create("no-app",{appName:r});return e}function ki(r,e,t){let s=MT[r]??r;t&&(s+=`-${t}`);const A=s.match(/\s|\//),l=e.match(/\s|\//);if(A||l){const d=[`Unable to register library "${s}" with version "${e}":`];A&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),A&&l&&d.push("and"),l&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ra.warn(d.join(" "));return}rl(new kA(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const PT="firebase-heartbeat-database",VT=1,qc="firebase-heartbeat-store";let ep=null;function P1(){return ep||(ep=iT(PT,VT,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(qc)}catch(t){console.warn(t)}}}}).catch(r=>{throw Di.create("idb-open",{originalErrorMessage:r.message})})),ep}async function zT(r){try{const t=(await P1()).transaction(qc),s=await t.objectStore(qc).get(V1(r));return await t.done,s}catch(e){if(e instanceof Pa)Ra.warn(e.message);else{const t=Di.create("idb-get",{originalErrorMessage:e?.message});Ra.warn(t.message)}}}async function Lw(r,e){try{const s=(await P1()).transaction(qc,"readwrite");await s.objectStore(qc).put(e,V1(r)),await s.done}catch(t){if(t instanceof Pa)Ra.warn(t.message);else{const s=Di.create("idb-set",{originalErrorMessage:t?.message});Ra.warn(s.message)}}}function V1(r){return`${r.name}!${r.options.appId}`}const KT=1024,GT=30;class qT{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new $T(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Hw();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(A=>A.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>GT){const A=XT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(A,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ra.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Hw(),{heartbeatsToSend:t,unsentEntries:s}=YT(this._heartbeatsCache.heartbeats),A=Lh(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),A}catch(e){return Ra.warn(e),""}}}function Hw(){return new Date().toISOString().substring(0,10)}function YT(r,e=KT){const t=[];let s=r.slice();for(const A of r){const l=t.find(d=>d.agent===A.agent);if(l){if(l.dates.push(A.date),Ow(t)>e){l.dates.pop();break}}else if(t.push({agent:A.agent,dates:[A.date]}),Ow(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class $T{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return D_()?k_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await zT(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Lw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Lw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Ow(r){return Lh(JSON.stringify({version:2,heartbeats:r})).length}function XT(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}function JT(r){rl(new kA("platform-logger",e=>new lT(e),"PRIVATE")),rl(new kA("heartbeat",e=>new qT(e),"PRIVATE")),ki(Yp,Rw,r),ki(Yp,Rw,"esm2020"),ki("fire-js","")}JT("");var WT="firebase",ZT="12.9.0";ki(WT,ZT,"app");function z1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const eU=z1,K1=new od("auth","Firebase",z1());const Oh=new Wx("@firebase/auth");function tU(r,...e){Oh.logLevel<=gt.WARN&&Oh.warn(`Auth (${ul}): ${r}`,...e)}function Eh(r,...e){Oh.logLevel<=gt.ERROR&&Oh.error(`Auth (${ul}): ${r}`,...e)}function na(r,...e){throw s0(r,...e)}function _n(r,...e){return s0(r,...e)}function r0(r,e,t){const s={...eU(),[e]:t};return new od("auth","Firebase",s).create(e,{appName:r.name})}function _A(r){return r0(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rU(r,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&na(r,"argument-error"),r0(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function s0(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return K1.create(r,...e)}function Je(r,e,...t){if(!r)throw s0(e,...t)}function Ia(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Eh(e),new Error(e)}function Ma(r,e){r||Ia(e)}function Jp(){return typeof self<"u"&&self.location?.href||""}function sU(){return Pw()==="http:"||Pw()==="https:"}function Pw(){return typeof self<"u"&&self.location?.protocol||null}function nU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sU()||U_()||"connection"in navigator)?navigator.onLine:!0}function aU(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class cd{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ma(t>e,"Short delay should be less than long delay!"),this.isMobile=j_()||Q_()}get(){return nU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function n0(r,e){Ma(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class G1{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ia("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ia("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ia("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const iU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const AU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],oU=new cd(3e4,6e4);function a0(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function hl(r,e,t,s,A={}){return q1(r,A,async()=>{let l={},d={};s&&(e==="GET"?d=s:l={body:JSON.stringify(s)});const u=ld({key:r.config.apiKey,...d}).slice(1),f=await r._getAdditionalHeaders();f["Content-Type"]="application/json",r.languageCode&&(f["X-Firebase-Locale"]=r.languageCode);const g={method:e,headers:f,...l};return T_()||(g.referrerPolicy="no-referrer"),r.emulatorConfig&&dl(r.emulatorConfig.host)&&(g.credentials="include"),G1.fetch()(await Y1(r,r.config.apiHost,t,u),g)})}async function q1(r,e,t){r._canInitEmulator=!1;const s={...iU,...e};try{const A=new cU(r),l=await Promise.race([t(),A.promise]);A.clearNetworkTimeout();const d=await l.json();if("needConfirmation"in d)throw Vu(r,"account-exists-with-different-credential",d);if(l.ok&&!("errorMessage"in d))return d;{const u=l.ok?d.errorMessage:d.error.message,[f,g]=u.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vu(r,"credential-already-in-use",d);if(f==="EMAIL_EXISTS")throw Vu(r,"email-already-in-use",d);if(f==="USER_DISABLED")throw Vu(r,"user-disabled",d);const x=s[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw r0(r,x,g);na(r,x)}}catch(A){if(A instanceof Pa)throw A;na(r,"network-request-failed",{message:String(A)})}}async function lU(r,e,t,s,A={}){const l=await hl(r,e,t,s,A);return"mfaPendingCredential"in l&&na(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function Y1(r,e,t,s){const A=`${e}${t}?${s}`,l=r,d=l.config.emulator?n0(r.config,A):`${r.config.apiScheme}://${A}`;return AU.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(d).toString():d}class cU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(_n(this.auth,"network-request-failed")),oU.get())})}}function Vu(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const A=_n(r,e,s);return A.customData._tokenResponse=t,A}async function dU(r,e){return hl(r,"POST","/v1/accounts:delete",e)}async function Ph(r,e){return hl(r,"POST","/v1/accounts:lookup",e)}function Ic(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uU(r,e=!1){const t=hn(r),s=await t.getIdToken(e),A=i0(s);Je(A&&A.exp&&A.auth_time&&A.iat,t.auth,"internal-error");const l=typeof A.firebase=="object"?A.firebase:void 0,d=l?.sign_in_provider;return{claims:A,token:s,authTime:Ic(tp(A.auth_time)),issuedAtTime:Ic(tp(A.iat)),expirationTime:Ic(tp(A.exp)),signInProvider:d||null,signInSecondFactor:l?.sign_in_second_factor||null}}function tp(r){return Number(r)*1e3}function i0(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return Eh("JWT malformed, contained fewer than 3 sections"),null;try{const A=F1(t);return A?JSON.parse(A):(Eh("Failed to decode base64 JWT payload"),null)}catch(A){return Eh("Caught error parsing JWT payload as JSON",A?.toString()),null}}function Vw(r){const e=i0(r);return Je(e,"internal-error"),Je(typeof e.exp<"u","internal-error"),Je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Yc(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Pa&&hU(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function hU({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class fU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Wp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ic(this.lastLoginAt),this.creationTime=Ic(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Vh(r){const e=r.auth,t=await r.getIdToken(),s=await Yc(r,Ph(e,{idToken:t}));Je(s?.users.length,e,"internal-error");const A=s.users[0];r._notifyReloadListener(A);const l=A.providerUserInfo?.length?$1(A.providerUserInfo):[],d=gU(r.providerData,l),u=r.isAnonymous,f=!(r.email&&A.passwordHash)&&!d?.length,g=u?f:!1,x={uid:A.localId,displayName:A.displayName||null,photoURL:A.photoUrl||null,email:A.email||null,emailVerified:A.emailVerified||!1,phoneNumber:A.phoneNumber||null,tenantId:A.tenantId||null,providerData:d,metadata:new Wp(A.createdAt,A.lastLoginAt),isAnonymous:g};Object.assign(r,x)}async function mU(r){const e=hn(r);await Vh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gU(r,e){return[...r.filter(s=>!e.some(A=>A.providerId===s.providerId)),...e]}function $1(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function pU(r,e){const t=await q1(r,{},async()=>{const s=ld({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:A,apiKey:l}=r.config,d=await Y1(r,A,"/v1/token",`key=${l}`),u=await r._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:u,body:s};return r.emulatorConfig&&dl(r.emulatorConfig.host)&&(f.credentials="include"),G1.fetch()(d,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function xU(r,e){return hl(r,"POST","/v2/accounts:revokeToken",a0(r,e))}class $o{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Je(e.idToken,"internal-error"),Je(typeof e.idToken<"u","internal-error"),Je(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Vw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Je(e.length!==0,"internal-error");const t=Vw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:A,expiresIn:l}=await pU(e,t);this.updateTokensAndExpiration(s,A,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:A,expirationTime:l}=t,d=new $o;return s&&(Je(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),A&&(Je(typeof A=="string","internal-error",{appName:e}),d.accessToken=A),l&&(Je(typeof l=="number","internal-error",{appName:e}),d.expirationTime=l),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $o,this.toJSON())}_performRefresh(){return Ia("not implemented")}}function wi(r,e){Je(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Sn{constructor({uid:e,auth:t,stsTokenManager:s,...A}){this.providerId="firebase",this.proactiveRefresh=new fU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=A.displayName||null,this.email=A.email||null,this.emailVerified=A.emailVerified||!1,this.phoneNumber=A.phoneNumber||null,this.photoURL=A.photoURL||null,this.isAnonymous=A.isAnonymous||!1,this.tenantId=A.tenantId||null,this.providerData=A.providerData?[...A.providerData]:[],this.metadata=new Wp(A.createdAt||void 0,A.lastLoginAt||void 0)}async getIdToken(e){const t=await Yc(this,this.stsTokenManager.getToken(this.auth,e));return Je(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return uU(this,e)}reload(){return mU(this)}_assign(e){this!==e&&(Je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Sn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Vh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Nn(this.auth.app))return Promise.reject(_A(this.auth));const e=await this.getIdToken();return await Yc(this,dU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,A=t.email??void 0,l=t.phoneNumber??void 0,d=t.photoURL??void 0,u=t.tenantId??void 0,f=t._redirectEventId??void 0,g=t.createdAt??void 0,x=t.lastLoginAt??void 0,{uid:y,emailVerified:v,isAnonymous:S,providerData:R,stsTokenManager:j}=t;Je(y&&j,e,"internal-error");const V=$o.fromJSON(this.name,j);Je(typeof y=="string",e,"internal-error"),wi(s,e.name),wi(A,e.name),Je(typeof v=="boolean",e,"internal-error"),Je(typeof S=="boolean",e,"internal-error"),wi(l,e.name),wi(d,e.name),wi(u,e.name),wi(f,e.name),wi(g,e.name),wi(x,e.name);const P=new Sn({uid:y,auth:e,email:A,emailVerified:v,displayName:s,isAnonymous:S,photoURL:d,phoneNumber:l,tenantId:u,stsTokenManager:V,createdAt:g,lastLoginAt:x});return R&&Array.isArray(R)&&(P.providerData=R.map(G=>({...G}))),f&&(P._redirectEventId=f),P}static async _fromIdTokenResponse(e,t,s=!1){const A=new $o;A.updateFromServerResponse(t);const l=new Sn({uid:t.localId,auth:e,stsTokenManager:A,isAnonymous:s});return await Vh(l),l}static async _fromGetAccountInfoResponse(e,t,s){const A=t.users[0];Je(A.localId!==void 0,"internal-error");const l=A.providerUserInfo!==void 0?$1(A.providerUserInfo):[],d=!(A.email&&A.passwordHash)&&!l?.length,u=new $o;u.updateFromIdToken(s);const f=new Sn({uid:A.localId,auth:e,stsTokenManager:u,isAnonymous:d}),g={uid:A.localId,displayName:A.displayName||null,photoURL:A.photoUrl||null,email:A.email||null,emailVerified:A.emailVerified||!1,phoneNumber:A.phoneNumber||null,tenantId:A.tenantId||null,providerData:l,metadata:new Wp(A.createdAt,A.lastLoginAt),isAnonymous:!(A.email&&A.passwordHash)&&!l?.length};return Object.assign(f,g),f}}const zw=new Map;function Da(r){Ma(r instanceof Function,"Expected a class definition");let e=zw.get(r);return e?(Ma(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,zw.set(r,e),e)}class X1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}X1.type="NONE";const Kw=X1;function Nh(r,e,t){return`firebase:${r}:${e}:${t}`}class Xo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:A,name:l}=this.auth;this.fullUserKey=Nh(this.userKey,A.apiKey,l),this.fullPersistenceKey=Nh("persistence",A.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ph(this.auth,{idToken:e}).catch(()=>{});return t?Sn._fromGetAccountInfoResponse(this.auth,t,e):null}return Sn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Xo(Da(Kw),e,s);const A=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=A[0]||Da(Kw);const d=Nh(s,e.config.apiKey,e.name);let u=null;for(const g of t)try{const x=await g._get(d);if(x){let y;if(typeof x=="string"){const v=await Ph(e,{idToken:x}).catch(()=>{});if(!v)break;y=await Sn._fromGetAccountInfoResponse(e,v,x)}else y=Sn._fromJSON(e,x);g!==l&&(u=y),l=g;break}}catch{}const f=A.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!f.length?new Xo(l,e,s):(l=f[0],u&&await l._set(d,u.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(d)}catch{}})),new Xo(l,e,s))}}function Gw(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(eE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(J1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rE(e))return"Blackberry";if(sE(e))return"Webos";if(W1(e))return"Safari";if((e.includes("chrome/")||Z1(e))&&!e.includes("edge/"))return"Chrome";if(tE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if(s?.length===2)return s[1]}return"Other"}function J1(r=ms()){return/firefox\//i.test(r)}function W1(r=ms()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Z1(r=ms()){return/crios\//i.test(r)}function eE(r=ms()){return/iemobile/i.test(r)}function tE(r=ms()){return/android/i.test(r)}function rE(r=ms()){return/blackberry/i.test(r)}function sE(r=ms()){return/webos/i.test(r)}function A0(r=ms()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function yU(r=ms()){return A0(r)&&!!window.navigator?.standalone}function bU(){return F_()&&document.documentMode===10}function nE(r=ms()){return A0(r)||tE(r)||sE(r)||rE(r)||/windows phone/i.test(r)||eE(r)}function aE(r,e=[]){let t;switch(r){case"Browser":t=Gw(ms());break;case"Worker":t=`${Gw(ms())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ul}/${s}`}class vU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((d,u)=>{try{const f=e(l);d(f)}catch(f){u(f)}});s.onAbort=t,this.queue.push(s);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const A of t)try{A()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function wU(r,e={}){return hl(r,"GET","/v2/passwordPolicy",a0(r,e))}const BU=6;class CU{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??BU,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,A=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),A&&(t.meetsMaxPasswordLength=e.length<=A)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let A=0;A<e.length;A++)s=e.charAt(A),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,A,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=A)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class EU{constructor(e,t,s,A){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=A,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qw(this),this.idTokenSubscription=new qw(this),this.beforeStateQueue=new vU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=K1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=A.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Da(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Xo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ph(this,{idToken:e}),s=await Sn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Nn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,A=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,d=s?._redirectEventId,u=await this.tryRedirectSignIn(e);(!l||l===d)&&u?.user&&(s=u.user,A=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(A)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Vh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=aU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Nn(this.app))return Promise.reject(_A(this));const t=e?hn(e):null;return t&&Je(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Nn(this.app)?Promise.reject(_A(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Nn(this.app)?Promise.reject(_A(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Da(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wU(this),t=new CU(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new od("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await xU(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Da(e)||this._popupRedirectResolver;Je(t,this,"argument-error"),this.redirectPersistenceManager=await Xo.create(this,[Da(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,A){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let d=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Je(u,this,"internal-error"),u.then(()=>{d||l(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,s,A);return()=>{d=!0,f()}}else{const f=e.addObserver(t);return()=>{d=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=aE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Nn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&tU(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Bf(r){return hn(r)}class qw{constructor(e){this.auth=e,this.observer=null,this.addObserver=O_(t=>this.observer=t)}get next(){return Je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let o0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function NU(r){o0=r}function SU(r){return o0.loadJS(r)}function jU(){return o0.gapiScript}function _U(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function TU(r,e){const t=e0(r,"auth");if(t.isInitialized()){const A=t.getImmediate(),l=t.getOptions();if(DA(l,e??{}))return A;na(A,"already-initialized")}return t.initialize({options:e})}function UU(r,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(Da);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function QU(r,e,t){const s=Bf(r);Je(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const A=!1,l=iE(e),{host:d,port:u}=FU(e),f=u===null?"":`:${u}`,g={url:`${l}//${d}${f}/`},x=Object.freeze({host:d,port:u,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:A})});if(!s._canInitEmulator){Je(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Je(DA(g,s.config.emulator)&&DA(x,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=x,s.settings.appVerificationDisabledForTesting=!0,dl(d)?(R1(`${l}//${d}${f}`),M1("Auth",!0)):IU()}function iE(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function FU(r){const e=iE(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(s);if(A){const l=A[1];return{host:l,port:Yw(s.substr(l.length+1))}}else{const[l,d]=s.split(":");return{host:l,port:Yw(d)}}}function Yw(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function IU(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class AE{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ia("not implemented")}_getIdTokenResponse(e){return Ia("not implemented")}_linkToIdToken(e,t){return Ia("not implemented")}_getReauthenticationResolver(e){return Ia("not implemented")}}async function Jo(r,e){return lU(r,"POST","/v1/accounts:signInWithIdp",a0(r,e))}const DU="http://localhost";class RA extends AE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new RA(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):na("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:A,...l}=t;if(!s||!A)return null;const d=new RA(s,A);return d.idToken=l.idToken||void 0,d.accessToken=l.accessToken||void 0,d.secret=l.secret,d.nonce=l.nonce,d.pendingToken=l.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return Jo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Jo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Jo(e,t)}buildRequest(){const e={requestUri:DU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ld(t)}return e}}class l0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class dd extends l0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ni extends dd{constructor(){super("facebook.com")}static credential(e){return RA._fromParams({providerId:Ni.PROVIDER_ID,signInMethod:Ni.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ni.credentialFromTaggedObject(e)}static credentialFromError(e){return Ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ni.credential(e.oauthAccessToken)}catch{return null}}}Ni.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ni.PROVIDER_ID="facebook.com";class Wn extends dd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return RA._fromParams({providerId:Wn.PROVIDER_ID,signInMethod:Wn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Wn.credentialFromTaggedObject(e)}static credentialFromError(e){return Wn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Wn.credential(t,s)}catch{return null}}}Wn.GOOGLE_SIGN_IN_METHOD="google.com";Wn.PROVIDER_ID="google.com";class Si extends dd{constructor(){super("github.com")}static credential(e){return RA._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Si.credential(e.oauthAccessToken)}catch{return null}}}Si.GITHUB_SIGN_IN_METHOD="github.com";Si.PROVIDER_ID="github.com";class ji extends dd{constructor(){super("twitter.com")}static credential(e,t){return RA._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return ji.credential(t,s)}catch{return null}}}ji.TWITTER_SIGN_IN_METHOD="twitter.com";ji.PROVIDER_ID="twitter.com";class sl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,A=!1){const l=await Sn._fromIdTokenResponse(e,s,A),d=$w(s);return new sl({user:l,providerId:d,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const A=$w(s);return new sl({user:e,providerId:A,_tokenResponse:s,operationType:t})}}function $w(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class zh extends Pa{constructor(e,t,s,A){super(t.code,t.message),this.operationType=s,this.user=A,Object.setPrototypeOf(this,zh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,A){return new zh(e,t,s,A)}}function oE(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?zh._fromErrorAndOperation(r,l,e,s):l})}async function kU(r,e,t=!1){const s=await Yc(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return sl._forOperation(r,"link",s)}async function RU(r,e,t=!1){const{auth:s}=r;if(Nn(s.app))return Promise.reject(_A(s));const A="reauthenticate";try{const l=await Yc(r,oE(s,A,e,r),t);Je(l.idToken,s,"internal-error");const d=i0(l.idToken);Je(d,s,"internal-error");const{sub:u}=d;return Je(r.uid===u,s,"user-mismatch"),sl._forOperation(r,A,l)}catch(l){throw l?.code==="auth/user-not-found"&&na(s,"user-mismatch"),l}}async function MU(r,e,t=!1){if(Nn(r.app))return Promise.reject(_A(r));const s="signIn",A=await oE(r,s,e),l=await sl._fromIdTokenResponse(r,s,A);return t||await r._updateCurrentUser(l.user),l}function LU(r,e,t,s){return hn(r).onIdTokenChanged(e,t,s)}function HU(r,e,t){return hn(r).beforeAuthStateChanged(e,t)}function OU(r,e,t,s){return hn(r).onAuthStateChanged(e,t,s)}function PU(r){return hn(r).signOut()}const Kh="__sak";class lE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Kh,"1"),this.storage.removeItem(Kh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const VU=1e3,zU=10;class cE extends lE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=nE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),A=this.localCache[t];s!==A&&e(t,A,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,u,f)=>{this.notifyListeners(d,f)});return}const s=e.key;t?this.detachListener():this.stopPolling();const A=()=>{const d=this.storage.getItem(s);!t&&this.localCache[s]===d||this.notifyListeners(s,d)},l=this.storage.getItem(s);bU()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(A,zU):A()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const A of Array.from(s))A(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},VU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}cE.type="LOCAL";const KU=cE;class dE extends lE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}dE.type="SESSION";const uE=dE;function GU(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Cf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(A=>A.isListeningto(e));if(t)return t;const s=new Cf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:A,data:l}=t.data,d=this.handlersMap[A];if(!d?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:A});const u=Array.from(d).map(async g=>g(t.origin,l)),f=await GU(u);t.ports[0].postMessage({status:"done",eventId:s,eventType:A,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Cf.receivers=[];function c0(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}class qU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const A=typeof MessageChannel<"u"?new MessageChannel:null;if(!A)throw new Error("connection_unavailable");let l,d;return new Promise((u,f)=>{const g=c0("",20);A.port1.start();const x=setTimeout(()=>{f(new Error("unsupported_event"))},s);d={messageChannel:A,onMessage(y){const v=y;if(v.data.eventId===g)switch(v.data.status){case"ack":clearTimeout(x),l=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),u(v.data.response);break;default:clearTimeout(x),clearTimeout(l),f(new Error("invalid_response"));break}}},this.handlers.add(d),A.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[A.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function Zn(){return window}function YU(r){Zn().location.href=r}function hE(){return typeof Zn().WorkerGlobalScope<"u"&&typeof Zn().importScripts=="function"}async function $U(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function XU(){return navigator?.serviceWorker?.controller||null}function JU(){return hE()?self:null}const fE="firebaseLocalStorageDb",WU=1,Gh="firebaseLocalStorage",mE="fbase_key";class ud{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ef(r,e){return r.transaction([Gh],e?"readwrite":"readonly").objectStore(Gh)}function ZU(){const r=indexedDB.deleteDatabase(fE);return new ud(r).toPromise()}function Zp(){const r=indexedDB.open(fE,WU);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Gh,{keyPath:mE})}catch(A){t(A)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Gh)?e(s):(s.close(),await ZU(),e(await Zp()))})})}async function Xw(r,e,t){const s=Ef(r,!0).put({[mE]:e,value:t});return new ud(s).toPromise()}async function e4(r,e){const t=Ef(r,!1).get(e),s=await new ud(t).toPromise();return s===void 0?null:s.value}function Jw(r,e){const t=Ef(r,!0).delete(e);return new ud(t).toPromise()}const t4=800,r4=3;class gE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>r4)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Cf._getInstance(JU()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await $U(),!this.activeServiceWorker)return;this.sender=new qU(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||XU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zp();return await Xw(e,Kh,"1"),await Jw(e,Kh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Xw(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>e4(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Jw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(A=>{const l=Ef(A,!1).getAll();return new ud(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:A,value:l}of e)s.add(A),JSON.stringify(this.localCache[A])!==JSON.stringify(l)&&(this.notifyListeners(A,l),t.push(A));for(const A of Object.keys(this.localCache))this.localCache[A]&&!s.has(A)&&(this.notifyListeners(A,null),t.push(A));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const A of Array.from(s))A(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),t4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gE.type="LOCAL";const s4=gE;new cd(3e4,6e4);function pE(r,e){return e?Da(e):(Je(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class d0 extends AE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Jo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Jo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Jo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function n4(r){return MU(r.auth,new d0(r),r.bypassAuthState)}function a4(r){const{auth:e,user:t}=r;return Je(t,e,"internal-error"),RU(t,new d0(r),r.bypassAuthState)}async function i4(r){const{auth:e,user:t}=r;return Je(t,e,"internal-error"),kU(t,new d0(r),r.bypassAuthState)}class xE{constructor(e,t,s,A,l=!1){this.auth=e,this.resolver=s,this.user=A,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:A,tenantId:l,error:d,type:u}=e;if(d){this.reject(d);return}const f={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:A||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(f))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return n4;case"linkViaPopup":case"linkViaRedirect":return i4;case"reauthViaPopup":case"reauthViaRedirect":return a4;default:na(this.auth,"internal-error")}}resolve(e){Ma(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ma(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const A4=new cd(2e3,1e4);async function o4(r,e,t){if(Nn(r.app))return Promise.reject(_n(r,"operation-not-supported-in-this-environment"));const s=Bf(r);rU(r,e,l0);const A=pE(s,t);return new NA(s,"signInViaPopup",e,A).executeNotNull()}class NA extends xE{constructor(e,t,s,A,l){super(e,t,A,l),this.provider=s,this.authWindow=null,this.pollId=null,NA.currentPopupAction&&NA.currentPopupAction.cancel(),NA.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Je(e,this.auth,"internal-error"),e}async onExecution(){Ma(this.filter.length===1,"Popup operations only handle one event");const e=c0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(_n(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(_n(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,NA.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_n(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,A4.get())};e()}}NA.currentPopupAction=null;const l4="pendingRedirect",Sh=new Map;class c4 extends xE{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Sh.get(this.auth._key());if(!e){try{const s=await d4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Sh.set(this.auth._key(),e)}return this.bypassAuthState||Sh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function d4(r,e){const t=f4(e),s=h4(r);if(!await s._isAvailable())return!1;const A=await s._get(t)==="true";return await s._remove(t),A}function u4(r,e){Sh.set(r._key(),e)}function h4(r){return Da(r._redirectPersistence)}function f4(r){return Nh(l4,r.config.apiKey,r.name)}async function m4(r,e,t=!1){if(Nn(r.app))return Promise.reject(_A(r));const s=Bf(r),A=pE(s,e),d=await new c4(s,A,t).execute();return d&&!t&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}const g4=600*1e3;class p4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!x4(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!yE(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(_n(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=g4&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ww(e))}saveEventToCache(e){this.cachedEventUids.add(Ww(e)),this.lastProcessedEventTime=Date.now()}}function Ww(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function yE({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function x4(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yE(r);default:return!1}}async function y4(r,e={}){return hl(r,"GET","/v1/projects",e)}const b4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,v4=/^https?/;async function w4(r){if(r.config.emulator)return;const{authorizedDomains:e}=await y4(r);for(const t of e)try{if(B4(t))return}catch{}na(r,"unauthorized-domain")}function B4(r){const e=Jp(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===s}if(!v4.test(t))return!1;if(b4.test(r))return s===r;const A=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(s)}const C4=new cd(3e4,6e4);function Zw(){const r=Zn().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function E4(r){return new Promise((e,t)=>{function s(){Zw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Zw(),t(_n(r,"network-request-failed"))},timeout:C4.get()})}if(Zn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Zn().gapi?.load)s();else{const A=_U("iframefcb");return Zn()[A]=()=>{gapi.load?s():t(_n(r,"network-request-failed"))},SU(`${jU()}?onload=${A}`).catch(l=>t(l))}}).catch(e=>{throw jh=null,e})}let jh=null;function N4(r){return jh=jh||E4(r),jh}const S4=new cd(5e3,15e3),j4="__/auth/iframe",_4="emulator/auth/iframe",T4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},U4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Q4(r){const e=r.config;Je(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?n0(e,_4):`https://${r.config.authDomain}/${j4}`,s={apiKey:e.apiKey,appName:r.name,v:ul},A=U4.get(r.config.apiHost);A&&(s.eid=A);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${ld(s).slice(1)}`}async function F4(r){const e=await N4(r),t=Zn().gapi;return Je(t,r,"internal-error"),e.open({where:document.body,url:Q4(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:T4,dontclear:!0},s=>new Promise(async(A,l)=>{await s.restyle({setHideOnLeave:!1});const d=_n(r,"network-request-failed"),u=Zn().setTimeout(()=>{l(d)},S4.get());function f(){Zn().clearTimeout(u),A(s)}s.ping(f).then(f,()=>{l(d)})}))}const I4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},D4=500,k4=600,R4="_blank",M4="http://localhost";class eB{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function L4(r,e,t,s=D4,A=k4){const l=Math.max((window.screen.availHeight-A)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let u="";const f={...I4,width:s.toString(),height:A.toString(),top:l,left:d},g=ms().toLowerCase();t&&(u=Z1(g)?R4:t),J1(g)&&(e=e||M4,f.scrollbars="yes");const x=Object.entries(f).reduce((v,[S,R])=>`${v}${S}=${R},`,"");if(yU(g)&&u!=="_self")return H4(e||"",u),new eB(null);const y=window.open(e||"",u,x);Je(y,r,"popup-blocked");try{y.focus()}catch{}return new eB(y)}function H4(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}const O4="__/auth/handler",P4="emulator/auth/handler",V4=encodeURIComponent("fac");async function tB(r,e,t,s,A,l){Je(r.config.authDomain,r,"auth-domain-config-required"),Je(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:ul,eventId:A};if(e instanceof l0){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",H_(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,y]of Object.entries({}))d[x]=y}if(e instanceof dd){const x=e.getScopes().filter(y=>y!=="");x.length>0&&(d.scopes=x.join(","))}r.tenantId&&(d.tid=r.tenantId);const u=d;for(const x of Object.keys(u))u[x]===void 0&&delete u[x];const f=await r._getAppCheckToken(),g=f?`#${V4}=${encodeURIComponent(f)}`:"";return`${z4(r)}?${ld(u).slice(1)}${g}`}function z4({config:r}){return r.emulator?n0(r,P4):`https://${r.authDomain}/${O4}`}const rp="webStorageSupport";class K4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uE,this._completeRedirectFn=m4,this._overrideRedirectResult=u4}async _openPopup(e,t,s,A){Ma(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await tB(e,t,s,Jp(),A);return L4(e,l,c0())}async _openRedirect(e,t,s,A){await this._originValidation(e);const l=await tB(e,t,s,Jp(),A);return YU(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:A,promise:l}=this.eventManagers[t];return A?Promise.resolve(A):(Ma(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await F4(e),s=new p4(e);return t.register("authEvent",A=>(Je(A?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(A.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(rp,{type:rp},A=>{const l=A?.[0]?.[rp];l!==void 0&&t(!!l),na(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=w4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return nE()||W1()||A0()}}const G4=K4;var rB="@firebase/auth",sB="1.12.0";class q4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Y4(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $4(r){rl(new kA("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),A=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:d,authDomain:u}=s.options;Je(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const f={apiKey:d,authDomain:u,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aE(r)},g=new EU(s,A,l,f);return UU(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),rl(new kA("auth-internal",e=>{const t=Bf(e.getProvider("auth").getImmediate());return(s=>new q4(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ki(rB,sB,Y4(r)),ki(rB,sB,"esm2020")}const X4=300,J4=k1("authIdTokenMaxAge")||X4;let nB=null;const W4=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>J4)return;const A=t?.token;nB!==A&&(nB=A,await fetch(r,{method:A?"POST":"DELETE",headers:A?{Authorization:`Bearer ${A}`}:{}}))};function bE(r=O1()){const e=e0(r,"auth");if(e.isInitialized())return e.getImmediate();const t=TU(r,{popupRedirectResolver:G4,persistence:[s4,KU,uE]}),s=k1("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const d=W4(l.toString());HU(t,d,()=>d(t.currentUser)),LU(t,u=>d(u))}}const A=I1("auth");return A&&QU(t,`http://${A}`),t}function Z4(){return document.getElementsByTagName("head")?.[0]??document}NU({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=A=>{const l=_n("internal-error");l.customData=A,t(l)},s.type="text/javascript",s.charset="UTF-8",Z4().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$4("Browser");var aB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ri,vE;(function(){var r;function e(E,N){function C(){}C.prototype=N.prototype,E.F=N.prototype,E.prototype=new C,E.prototype.constructor=E,E.D=function(D,Q,T){for(var _=Array(arguments.length-2),U=2;U<arguments.length;U++)_[U-2]=arguments[U];return N.prototype[Q].apply(D,_)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function A(E,N,C){C||(C=0);const D=Array(16);if(typeof N=="string")for(var Q=0;Q<16;++Q)D[Q]=N.charCodeAt(C++)|N.charCodeAt(C++)<<8|N.charCodeAt(C++)<<16|N.charCodeAt(C++)<<24;else for(Q=0;Q<16;++Q)D[Q]=N[C++]|N[C++]<<8|N[C++]<<16|N[C++]<<24;N=E.g[0],C=E.g[1],Q=E.g[2];let T=E.g[3],_;_=N+(T^C&(Q^T))+D[0]+3614090360&4294967295,N=C+(_<<7&4294967295|_>>>25),_=T+(Q^N&(C^Q))+D[1]+3905402710&4294967295,T=N+(_<<12&4294967295|_>>>20),_=Q+(C^T&(N^C))+D[2]+606105819&4294967295,Q=T+(_<<17&4294967295|_>>>15),_=C+(N^Q&(T^N))+D[3]+3250441966&4294967295,C=Q+(_<<22&4294967295|_>>>10),_=N+(T^C&(Q^T))+D[4]+4118548399&4294967295,N=C+(_<<7&4294967295|_>>>25),_=T+(Q^N&(C^Q))+D[5]+1200080426&4294967295,T=N+(_<<12&4294967295|_>>>20),_=Q+(C^T&(N^C))+D[6]+2821735955&4294967295,Q=T+(_<<17&4294967295|_>>>15),_=C+(N^Q&(T^N))+D[7]+4249261313&4294967295,C=Q+(_<<22&4294967295|_>>>10),_=N+(T^C&(Q^T))+D[8]+1770035416&4294967295,N=C+(_<<7&4294967295|_>>>25),_=T+(Q^N&(C^Q))+D[9]+2336552879&4294967295,T=N+(_<<12&4294967295|_>>>20),_=Q+(C^T&(N^C))+D[10]+4294925233&4294967295,Q=T+(_<<17&4294967295|_>>>15),_=C+(N^Q&(T^N))+D[11]+2304563134&4294967295,C=Q+(_<<22&4294967295|_>>>10),_=N+(T^C&(Q^T))+D[12]+1804603682&4294967295,N=C+(_<<7&4294967295|_>>>25),_=T+(Q^N&(C^Q))+D[13]+4254626195&4294967295,T=N+(_<<12&4294967295|_>>>20),_=Q+(C^T&(N^C))+D[14]+2792965006&4294967295,Q=T+(_<<17&4294967295|_>>>15),_=C+(N^Q&(T^N))+D[15]+1236535329&4294967295,C=Q+(_<<22&4294967295|_>>>10),_=N+(Q^T&(C^Q))+D[1]+4129170786&4294967295,N=C+(_<<5&4294967295|_>>>27),_=T+(C^Q&(N^C))+D[6]+3225465664&4294967295,T=N+(_<<9&4294967295|_>>>23),_=Q+(N^C&(T^N))+D[11]+643717713&4294967295,Q=T+(_<<14&4294967295|_>>>18),_=C+(T^N&(Q^T))+D[0]+3921069994&4294967295,C=Q+(_<<20&4294967295|_>>>12),_=N+(Q^T&(C^Q))+D[5]+3593408605&4294967295,N=C+(_<<5&4294967295|_>>>27),_=T+(C^Q&(N^C))+D[10]+38016083&4294967295,T=N+(_<<9&4294967295|_>>>23),_=Q+(N^C&(T^N))+D[15]+3634488961&4294967295,Q=T+(_<<14&4294967295|_>>>18),_=C+(T^N&(Q^T))+D[4]+3889429448&4294967295,C=Q+(_<<20&4294967295|_>>>12),_=N+(Q^T&(C^Q))+D[9]+568446438&4294967295,N=C+(_<<5&4294967295|_>>>27),_=T+(C^Q&(N^C))+D[14]+3275163606&4294967295,T=N+(_<<9&4294967295|_>>>23),_=Q+(N^C&(T^N))+D[3]+4107603335&4294967295,Q=T+(_<<14&4294967295|_>>>18),_=C+(T^N&(Q^T))+D[8]+1163531501&4294967295,C=Q+(_<<20&4294967295|_>>>12),_=N+(Q^T&(C^Q))+D[13]+2850285829&4294967295,N=C+(_<<5&4294967295|_>>>27),_=T+(C^Q&(N^C))+D[2]+4243563512&4294967295,T=N+(_<<9&4294967295|_>>>23),_=Q+(N^C&(T^N))+D[7]+1735328473&4294967295,Q=T+(_<<14&4294967295|_>>>18),_=C+(T^N&(Q^T))+D[12]+2368359562&4294967295,C=Q+(_<<20&4294967295|_>>>12),_=N+(C^Q^T)+D[5]+4294588738&4294967295,N=C+(_<<4&4294967295|_>>>28),_=T+(N^C^Q)+D[8]+2272392833&4294967295,T=N+(_<<11&4294967295|_>>>21),_=Q+(T^N^C)+D[11]+1839030562&4294967295,Q=T+(_<<16&4294967295|_>>>16),_=C+(Q^T^N)+D[14]+4259657740&4294967295,C=Q+(_<<23&4294967295|_>>>9),_=N+(C^Q^T)+D[1]+2763975236&4294967295,N=C+(_<<4&4294967295|_>>>28),_=T+(N^C^Q)+D[4]+1272893353&4294967295,T=N+(_<<11&4294967295|_>>>21),_=Q+(T^N^C)+D[7]+4139469664&4294967295,Q=T+(_<<16&4294967295|_>>>16),_=C+(Q^T^N)+D[10]+3200236656&4294967295,C=Q+(_<<23&4294967295|_>>>9),_=N+(C^Q^T)+D[13]+681279174&4294967295,N=C+(_<<4&4294967295|_>>>28),_=T+(N^C^Q)+D[0]+3936430074&4294967295,T=N+(_<<11&4294967295|_>>>21),_=Q+(T^N^C)+D[3]+3572445317&4294967295,Q=T+(_<<16&4294967295|_>>>16),_=C+(Q^T^N)+D[6]+76029189&4294967295,C=Q+(_<<23&4294967295|_>>>9),_=N+(C^Q^T)+D[9]+3654602809&4294967295,N=C+(_<<4&4294967295|_>>>28),_=T+(N^C^Q)+D[12]+3873151461&4294967295,T=N+(_<<11&4294967295|_>>>21),_=Q+(T^N^C)+D[15]+530742520&4294967295,Q=T+(_<<16&4294967295|_>>>16),_=C+(Q^T^N)+D[2]+3299628645&4294967295,C=Q+(_<<23&4294967295|_>>>9),_=N+(Q^(C|~T))+D[0]+4096336452&4294967295,N=C+(_<<6&4294967295|_>>>26),_=T+(C^(N|~Q))+D[7]+1126891415&4294967295,T=N+(_<<10&4294967295|_>>>22),_=Q+(N^(T|~C))+D[14]+2878612391&4294967295,Q=T+(_<<15&4294967295|_>>>17),_=C+(T^(Q|~N))+D[5]+4237533241&4294967295,C=Q+(_<<21&4294967295|_>>>11),_=N+(Q^(C|~T))+D[12]+1700485571&4294967295,N=C+(_<<6&4294967295|_>>>26),_=T+(C^(N|~Q))+D[3]+2399980690&4294967295,T=N+(_<<10&4294967295|_>>>22),_=Q+(N^(T|~C))+D[10]+4293915773&4294967295,Q=T+(_<<15&4294967295|_>>>17),_=C+(T^(Q|~N))+D[1]+2240044497&4294967295,C=Q+(_<<21&4294967295|_>>>11),_=N+(Q^(C|~T))+D[8]+1873313359&4294967295,N=C+(_<<6&4294967295|_>>>26),_=T+(C^(N|~Q))+D[15]+4264355552&4294967295,T=N+(_<<10&4294967295|_>>>22),_=Q+(N^(T|~C))+D[6]+2734768916&4294967295,Q=T+(_<<15&4294967295|_>>>17),_=C+(T^(Q|~N))+D[13]+1309151649&4294967295,C=Q+(_<<21&4294967295|_>>>11),_=N+(Q^(C|~T))+D[4]+4149444226&4294967295,N=C+(_<<6&4294967295|_>>>26),_=T+(C^(N|~Q))+D[11]+3174756917&4294967295,T=N+(_<<10&4294967295|_>>>22),_=Q+(N^(T|~C))+D[2]+718787259&4294967295,Q=T+(_<<15&4294967295|_>>>17),_=C+(T^(Q|~N))+D[9]+3951481745&4294967295,E.g[0]=E.g[0]+N&4294967295,E.g[1]=E.g[1]+(Q+(_<<21&4294967295|_>>>11))&4294967295,E.g[2]=E.g[2]+Q&4294967295,E.g[3]=E.g[3]+T&4294967295}s.prototype.v=function(E,N){N===void 0&&(N=E.length);const C=N-this.blockSize,D=this.C;let Q=this.h,T=0;for(;T<N;){if(Q==0)for(;T<=C;)A(this,E,T),T+=this.blockSize;if(typeof E=="string"){for(;T<N;)if(D[Q++]=E.charCodeAt(T++),Q==this.blockSize){A(this,D),Q=0;break}}else for(;T<N;)if(D[Q++]=E[T++],Q==this.blockSize){A(this,D),Q=0;break}}this.h=Q,this.o+=N},s.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var N=1;N<E.length-8;++N)E[N]=0;N=this.o*8;for(var C=E.length-8;C<E.length;++C)E[C]=N&255,N/=256;for(this.v(E),E=Array(16),N=0,C=0;C<4;++C)for(let D=0;D<32;D+=8)E[N++]=this.g[C]>>>D&255;return E};function l(E,N){var C=u;return Object.prototype.hasOwnProperty.call(C,E)?C[E]:C[E]=N(E)}function d(E,N){this.h=N;const C=[];let D=!0;for(let Q=E.length-1;Q>=0;Q--){const T=E[Q]|0;D&&T==N||(C[Q]=T,D=!1)}this.g=C}var u={};function f(E){return-128<=E&&E<128?l(E,function(N){return new d([N|0],N<0?-1:0)}):new d([E|0],E<0?-1:0)}function g(E){if(isNaN(E)||!isFinite(E))return y;if(E<0)return V(g(-E));const N=[];let C=1;for(let D=0;E>=C;D++)N[D]=E/C|0,C*=4294967296;return new d(N,0)}function x(E,N){if(E.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(E.charAt(0)=="-")return V(x(E.substring(1),N));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=g(Math.pow(N,8));let D=y;for(let T=0;T<E.length;T+=8){var Q=Math.min(8,E.length-T);const _=parseInt(E.substring(T,T+Q),N);Q<8?(Q=g(Math.pow(N,Q)),D=D.j(Q).add(g(_))):(D=D.j(C),D=D.add(g(_)))}return D}var y=f(0),v=f(1),S=f(16777216);r=d.prototype,r.m=function(){if(j(this))return-V(this).m();let E=0,N=1;for(let C=0;C<this.g.length;C++){const D=this.i(C);E+=(D>=0?D:4294967296+D)*N,N*=4294967296}return E},r.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(R(this))return"0";if(j(this))return"-"+V(this).toString(E);const N=g(Math.pow(E,6));var C=this;let D="";for(;;){const Q=W(C,N).g;C=P(C,Q.j(N));let T=((C.g.length>0?C.g[0]:C.h)>>>0).toString(E);if(C=Q,R(C))return T+D;for(;T.length<6;)T="0"+T;D=T+D}},r.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function R(E){if(E.h!=0)return!1;for(let N=0;N<E.g.length;N++)if(E.g[N]!=0)return!1;return!0}function j(E){return E.h==-1}r.l=function(E){return E=P(this,E),j(E)?-1:R(E)?0:1};function V(E){const N=E.g.length,C=[];for(let D=0;D<N;D++)C[D]=~E.g[D];return new d(C,~E.h).add(v)}r.abs=function(){return j(this)?V(this):this},r.add=function(E){const N=Math.max(this.g.length,E.g.length),C=[];let D=0;for(let Q=0;Q<=N;Q++){let T=D+(this.i(Q)&65535)+(E.i(Q)&65535),_=(T>>>16)+(this.i(Q)>>>16)+(E.i(Q)>>>16);D=_>>>16,T&=65535,_&=65535,C[Q]=_<<16|T}return new d(C,C[C.length-1]&-2147483648?-1:0)};function P(E,N){return E.add(V(N))}r.j=function(E){if(R(this)||R(E))return y;if(j(this))return j(E)?V(this).j(V(E)):V(V(this).j(E));if(j(E))return V(this.j(V(E)));if(this.l(S)<0&&E.l(S)<0)return g(this.m()*E.m());const N=this.g.length+E.g.length,C=[];for(var D=0;D<2*N;D++)C[D]=0;for(D=0;D<this.g.length;D++)for(let Q=0;Q<E.g.length;Q++){const T=this.i(D)>>>16,_=this.i(D)&65535,U=E.i(Q)>>>16,Y=E.i(Q)&65535;C[2*D+2*Q]+=_*Y,G(C,2*D+2*Q),C[2*D+2*Q+1]+=T*Y,G(C,2*D+2*Q+1),C[2*D+2*Q+1]+=_*U,G(C,2*D+2*Q+1),C[2*D+2*Q+2]+=T*U,G(C,2*D+2*Q+2)}for(E=0;E<N;E++)C[E]=C[2*E+1]<<16|C[2*E];for(E=N;E<2*N;E++)C[E]=0;return new d(C,0)};function G(E,N){for(;(E[N]&65535)!=E[N];)E[N+1]+=E[N]>>>16,E[N]&=65535,N++}function q(E,N){this.g=E,this.h=N}function W(E,N){if(R(N))throw Error("division by zero");if(R(E))return new q(y,y);if(j(E))return N=W(V(E),N),new q(V(N.g),V(N.h));if(j(N))return N=W(E,V(N)),new q(V(N.g),N.h);if(E.g.length>30){if(j(E)||j(N))throw Error("slowDivide_ only works with positive integers.");for(var C=v,D=N;D.l(E)<=0;)C=te(C),D=te(D);var Q=z(C,1),T=z(D,1);for(D=z(D,2),C=z(C,2);!R(D);){var _=T.add(D);_.l(E)<=0&&(Q=Q.add(C),T=_),D=z(D,1),C=z(C,1)}return N=P(E,Q.j(N)),new q(Q,N)}for(Q=y;E.l(N)>=0;){for(C=Math.max(1,Math.floor(E.m()/N.m())),D=Math.ceil(Math.log(C)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),T=g(C),_=T.j(N);j(_)||_.l(E)>0;)C-=D,T=g(C),_=T.j(N);R(T)&&(T=v),Q=Q.add(T),E=P(E,_)}return new q(Q,E)}r.B=function(E){return W(this,E).h},r.and=function(E){const N=Math.max(this.g.length,E.g.length),C=[];for(let D=0;D<N;D++)C[D]=this.i(D)&E.i(D);return new d(C,this.h&E.h)},r.or=function(E){const N=Math.max(this.g.length,E.g.length),C=[];for(let D=0;D<N;D++)C[D]=this.i(D)|E.i(D);return new d(C,this.h|E.h)},r.xor=function(E){const N=Math.max(this.g.length,E.g.length),C=[];for(let D=0;D<N;D++)C[D]=this.i(D)^E.i(D);return new d(C,this.h^E.h)};function te(E){const N=E.g.length+1,C=[];for(let D=0;D<N;D++)C[D]=E.i(D)<<1|E.i(D-1)>>>31;return new d(C,E.h)}function z(E,N){const C=N>>5;N%=32;const D=E.g.length-C,Q=[];for(let T=0;T<D;T++)Q[T]=N>0?E.i(T+C)>>>N|E.i(T+C+1)<<32-N:E.i(T+C);return new d(Q,E.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,vE=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=g,d.fromString=x,Ri=d}).apply(typeof aB<"u"?aB:typeof self<"u"?self:typeof window<"u"?window:{});var zu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var wE,bc,BE,_h,ex,CE,EE,NE;(function(){var r,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof zu=="object"&&zu];for(var b=0;b<h.length;++b){var B=h[b];if(B&&B.Math==Math)return B}throw Error("Cannot find global object")}var s=t(this);function A(h,b){if(b)e:{var B=s;h=h.split(".");for(var H=0;H<h.length-1;H++){var se=h[H];if(!(se in B))break e;B=B[se]}h=h[h.length-1],H=B[h],b=b(H),b!=H&&b!=null&&e(B,h,{configurable:!0,writable:!0,value:b})}}A("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),A("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),A("Object.entries",function(h){return h||function(b){var B=[],H;for(H in b)Object.prototype.hasOwnProperty.call(b,H)&&B.push([H,b[H]]);return B}});var l=l||{},d=this||self;function u(h){var b=typeof h;return b=="object"&&h!=null||b=="function"}function f(h,b,B){return h.call.apply(h.bind,arguments)}function g(h,b,B){return g=f,g.apply(null,arguments)}function x(h,b){var B=Array.prototype.slice.call(arguments,1);return function(){var H=B.slice();return H.push.apply(H,arguments),h.apply(this,H)}}function y(h,b){function B(){}B.prototype=b.prototype,h.Z=b.prototype,h.prototype=new B,h.prototype.constructor=h,h.Ob=function(H,se,ce){for(var Ne=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)Ne[rt-2]=arguments[rt];return b.prototype[se].apply(H,Ne)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function S(h){const b=h.length;if(b>0){const B=Array(b);for(let H=0;H<b;H++)B[H]=h[H];return B}return[]}function R(h,b){for(let H=1;H<arguments.length;H++){const se=arguments[H];var B=typeof se;if(B=B!="object"?B:se?Array.isArray(se)?"array":B:"null",B=="array"||B=="object"&&typeof se.length=="number"){B=h.length||0;const ce=se.length||0;h.length=B+ce;for(let Ne=0;Ne<ce;Ne++)h[B+Ne]=se[Ne]}else h.push(se)}}class j{constructor(b,B){this.i=b,this.j=B,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function V(h){d.setTimeout(()=>{throw h},0)}function P(){var h=E;let b=null;return h.g&&(b=h.g,h.g=h.g.next,h.g||(h.h=null),b.next=null),b}class G{constructor(){this.h=this.g=null}add(b,B){const H=q.get();H.set(b,B),this.h?this.h.next=H:this.g=H,this.h=H}}var q=new j(()=>new W,h=>h.reset());class W{constructor(){this.next=this.g=this.h=null}set(b,B){this.h=b,this.g=B,this.next=null}reset(){this.next=this.g=this.h=null}}let te,z=!1,E=new G,N=()=>{const h=Promise.resolve(void 0);te=()=>{h.then(C)}};function C(){for(var h;h=P();){try{h.h.call(h.g)}catch(B){V(B)}var b=q;b.j(h),b.h<100&&(b.h++,h.next=b.g,b.g=h)}z=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Q(h,b){this.type=h,this.g=this.target=b,this.defaultPrevented=!1}Q.prototype.h=function(){this.defaultPrevented=!0};var T=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,b=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const B=()=>{};d.addEventListener("test",B,b),d.removeEventListener("test",B,b)}catch{}return h})();function _(h){return/^[\s\xa0]*$/.test(h)}function U(h,b){Q.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,b)}y(U,Q),U.prototype.init=function(h,b){const B=this.type=h.type,H=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=b,b=h.relatedTarget,b||(B=="mouseover"?b=h.fromElement:B=="mouseout"&&(b=h.toElement)),this.relatedTarget=b,H?(this.clientX=H.clientX!==void 0?H.clientX:H.pageX,this.clientY=H.clientY!==void 0?H.clientY:H.pageY,this.screenX=H.screenX||0,this.screenY=H.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&U.Z.h.call(this)},U.prototype.h=function(){U.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Y="closure_listenable_"+(Math.random()*1e6|0),M=0;function F(h,b,B,H,se){this.listener=h,this.proxy=null,this.src=b,this.type=B,this.capture=!!H,this.ha=se,this.key=++M,this.da=this.fa=!1}function K(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ne(h,b,B){for(const H in h)b.call(B,h[H],H,h)}function ee(h,b){for(const B in h)b.call(void 0,h[B],B,h)}function O(h){const b={};for(const B in h)b[B]=h[B];return b}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ae(h,b){let B,H;for(let se=1;se<arguments.length;se++){H=arguments[se];for(B in H)h[B]=H[B];for(let ce=0;ce<X.length;ce++)B=X[ce],Object.prototype.hasOwnProperty.call(H,B)&&(h[B]=H[B])}}function me(h){this.src=h,this.g={},this.h=0}me.prototype.add=function(h,b,B,H,se){const ce=h.toString();h=this.g[ce],h||(h=this.g[ce]=[],this.h++);const Ne=Be(h,b,H,se);return Ne>-1?(b=h[Ne],B||(b.fa=!1)):(b=new F(b,this.src,ce,!!H,se),b.fa=B,h.push(b)),b};function Ee(h,b){const B=b.type;if(B in h.g){var H=h.g[B],se=Array.prototype.indexOf.call(H,b,void 0),ce;(ce=se>=0)&&Array.prototype.splice.call(H,se,1),ce&&(K(b),h.g[B].length==0&&(delete h.g[B],h.h--))}}function Be(h,b,B,H){for(let se=0;se<h.length;++se){const ce=h[se];if(!ce.da&&ce.listener==b&&ce.capture==!!B&&ce.ha==H)return se}return-1}var ke="closure_lm_"+(Math.random()*1e6|0),Pe={};function Ve(h,b,B,H,se){if(Array.isArray(b)){for(let ce=0;ce<b.length;ce++)Ve(h,b[ce],B,H,se);return null}return B=ot(B),h&&h[Y]?h.J(b,B,u(H)?!!H.capture:!1,se):wt(h,b,B,!1,H,se)}function wt(h,b,B,H,se,ce){if(!b)throw Error("Invalid event type");const Ne=u(se)?!!se.capture:!!se;let rt=ge(h);if(rt||(h[ke]=rt=new me(h)),B=rt.add(b,B,H,Ne,ce),B.proxy)return B;if(H=Xt(),B.proxy=H,H.src=h,H.listener=B,h.addEventListener)T||(se=Ne),se===void 0&&(se=!1),h.addEventListener(b.toString(),H,se);else if(h.attachEvent)h.attachEvent(J(b.toString()),H);else if(h.addListener&&h.removeListener)h.addListener(H);else throw Error("addEventListener and attachEvent are unavailable.");return B}function Xt(){function h(B){return b.call(h.src,h.listener,B)}const b=he;return h}function ue(h,b,B,H,se){if(Array.isArray(b))for(var ce=0;ce<b.length;ce++)ue(h,b[ce],B,H,se);else H=u(H)?!!H.capture:!!H,B=ot(B),h&&h[Y]?(h=h.i,ce=String(b).toString(),ce in h.g&&(b=h.g[ce],B=Be(b,B,H,se),B>-1&&(K(b[B]),Array.prototype.splice.call(b,B,1),b.length==0&&(delete h.g[ce],h.h--)))):h&&(h=ge(h))&&(b=h.g[b.toString()],h=-1,b&&(h=Be(b,B,H,se)),(B=h>-1?b[h]:null)&&L(B))}function L(h){if(typeof h!="number"&&h&&!h.da){var b=h.src;if(b&&b[Y])Ee(b.i,h);else{var B=h.type,H=h.proxy;b.removeEventListener?b.removeEventListener(B,H,h.capture):b.detachEvent?b.detachEvent(J(B),H):b.addListener&&b.removeListener&&b.removeListener(H),(B=ge(b))?(Ee(B,h),B.h==0&&(B.src=null,b[ke]=null)):K(h)}}}function J(h){return h in Pe?Pe[h]:Pe[h]="on"+h}function he(h,b){if(h.da)h=!0;else{b=new U(b,this);const B=h.listener,H=h.ha||h.src;h.fa&&L(h),h=B.call(H,b)}return h}function ge(h){return h=h[ke],h instanceof me?h:null}var Ke="__closure_events_fn_"+(Math.random()*1e9>>>0);function ot(h){return typeof h=="function"?h:(h[Ke]||(h[Ke]=function(b){return h.handleEvent(b)}),h[Ke])}function Xe(){D.call(this),this.i=new me(this),this.M=this,this.G=null}y(Xe,D),Xe.prototype[Y]=!0,Xe.prototype.removeEventListener=function(h,b,B,H){ue(this,h,b,B,H)};function Le(h,b){var B,H=h.G;if(H)for(B=[];H;H=H.G)B.push(H);if(h=h.M,H=b.type||b,typeof b=="string")b=new Q(b,h);else if(b instanceof Q)b.target=b.target||h;else{var se=b;b=new Q(H,h),Ae(b,se)}se=!0;let ce,Ne;if(B)for(Ne=B.length-1;Ne>=0;Ne--)ce=b.g=B[Ne],se=Se(ce,H,!0,b)&&se;if(ce=b.g=h,se=Se(ce,H,!0,b)&&se,se=Se(ce,H,!1,b)&&se,B)for(Ne=0;Ne<B.length;Ne++)ce=b.g=B[Ne],se=Se(ce,H,!1,b)&&se}Xe.prototype.N=function(){if(Xe.Z.N.call(this),this.i){var h=this.i;for(const b in h.g){const B=h.g[b];for(let H=0;H<B.length;H++)K(B[H]);delete h.g[b],h.h--}}this.G=null},Xe.prototype.J=function(h,b,B,H){return this.i.add(String(h),b,!1,B,H)},Xe.prototype.K=function(h,b,B,H){return this.i.add(String(h),b,!0,B,H)};function Se(h,b,B,H){if(b=h.i.g[String(b)],!b)return!0;b=b.concat();let se=!0;for(let ce=0;ce<b.length;++ce){const Ne=b[ce];if(Ne&&!Ne.da&&Ne.capture==B){const rt=Ne.listener,br=Ne.ha||Ne.src;Ne.fa&&Ee(h.i,Ne),se=rt.call(br,H)!==!1&&se}}return se&&!H.defaultPrevented}function Pt(h,b){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:d.setTimeout(h,b||0)}function Nr(h){h.g=Pt(()=>{h.g=null,h.i&&(h.i=!1,Nr(h))},h.l);const b=h.h;h.h=null,h.m.apply(null,b)}class sr extends D{constructor(b,B){super(),this.m=b,this.l=B,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:Nr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ve(h){D.call(this),this.h=h,this.g={}}y(ve,D);var jt=[];function lr(h){ne(h.g,function(b,B){this.g.hasOwnProperty(B)&&L(b)},h),h.g={}}ve.prototype.N=function(){ve.Z.N.call(this),lr(this)},ve.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ut=d.JSON.stringify,gr=d.JSON.parse,Cs=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function As(){}function nr(){}var Jt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function cr(){Q.call(this,"d")}y(cr,Q);function Vr(){Q.call(this,"c")}y(Vr,Q);var Vt={},le=null;function De(){return le=le||new Xe}Vt.Ia="serverreachability";function At(h){Q.call(this,Vt.Ia,h)}y(At,Q);function tt(h){const b=De();Le(b,new At(b))}Vt.STAT_EVENT="statevent";function nt(h,b){Q.call(this,Vt.STAT_EVENT,h),this.stat=b}y(nt,Q);function Qe(h){const b=De();Le(b,new nt(b,h))}Vt.Ja="timingevent";function Kt(h,b){Q.call(this,Vt.Ja,h),this.size=b}y(Kt,Q);function pr(h,b){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},b)}function xr(){this.g=!0}xr.prototype.ua=function(){this.g=!1};function In(h,b,B,H,se,ce){h.info(function(){if(h.g)if(ce){var Ne="",rt=ce.split("&");for(let Nt=0;Nt<rt.length;Nt++){var br=rt[Nt].split("=");if(br.length>1){const Zt=br[0];br=br[1];const Js=Zt.split("_");Ne=Js.length>=2&&Js[1]=="type"?Ne+(Zt+"="+br+"&"):Ne+(Zt+"=redacted&")}}}else Ne=null;else Ne=ce;return"XMLHTTP REQ ("+H+") [attempt "+se+"]: "+b+`
`+B+`
`+Ne})}function mn(h,b,B,H,se,ce,Ne){h.info(function(){return"XMLHTTP RESP ("+H+") [ attempt "+se+"]: "+b+`
`+B+`
`+ce+" "+Ne})}function Ys(h,b,B,H){h.info(function(){return"XMLHTTP TEXT ("+b+"): "+yl(h,B)+(H?" "+H:"")})}function Dn(h,b){h.info(function(){return"TIMEOUT: "+b})}xr.prototype.info=function(){};function yl(h,b){if(!h.g)return b;if(!b)return null;try{const ce=JSON.parse(b);if(ce){for(h=0;h<ce.length;h++)if(Array.isArray(ce[h])){var B=ce[h];if(!(B.length<2)){var H=B[1];if(Array.isArray(H)&&!(H.length<1)){var se=H[0];if(se!="noop"&&se!="stop"&&se!="close")for(let Ne=1;Ne<H.length;Ne++)H[Ne]=""}}}}return Ut(ce)}catch{return b}}var ua={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Va={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},$i;function ha(){}y(ha,As),ha.prototype.g=function(){return new XMLHttpRequest},$i=new ha;function gn(h){return encodeURIComponent(String(h))}function za(h){var b=1;h=h.split(":");const B=[];for(;b>0&&h.length;)B.push(h.shift()),b--;return h.length&&B.push(h.join(":")),B}function gs(h,b,B,H){this.j=h,this.i=b,this.l=B,this.S=H||1,this.V=new ve(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ks}function ks(){this.i=null,this.g="",this.h=!1}var dr={},yr={};function Es(h,b,B){h.M=1,h.A=Xi(Sr(b)),h.u=B,h.R=!0,pe(h,null)}function pe(h,b){h.F=Date.now(),Et(h),h.B=Sr(h.A);var B=h.B,H=h.S;Array.isArray(H)||(H=[String(H)]),$A(B.i,"t",H),h.C=0,B=h.j.L,h.h=new ks,h.g=kd(h.j,B?b:null,!h.u),h.P>0&&(h.O=new sr(g(h.Y,h,h.g),h.P)),b=h.V,B=h.g,H=h.ba;var se="readystatechange";Array.isArray(se)||(se&&(jt[0]=se.toString()),se=jt);for(let ce=0;ce<se.length;ce++){const Ne=Ve(B,se[ce],H||b.handleEvent,!1,b.h||b);if(!Ne)break;b.g[Ne.key]=Ne}b=h.J?O(h.J):{},h.u?(h.v||(h.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,b)):(h.v="GET",h.g.ea(h.B,h.v,null,b)),tt(),In(h.i,h.v,h.B,h.l,h.S,h.u)}gs.prototype.ba=function(h){h=h.target;const b=this.O;b&&yn(h)==3?b.j():this.Y(h)},gs.prototype.Y=function(h){try{if(h==this.g)e:{const rt=yn(this.g),br=this.g.ya(),Nt=this.g.ca();if(!(rt<3)&&(rt!=3||this.g&&(this.h.h||this.g.la()||Jr(this.g)))){this.K||rt!=4||br==7||(br==8||Nt<=0?tt(3):tt(2)),kr(this);var b=this.g.ca();this.X=b;var B=ze(this);if(this.o=b==200,mn(this.i,this.v,this.B,this.l,this.S,rt,b),this.o){if(this.U&&!this.L){t:{if(this.g){var H,se=this.g;if((H=se.g?se.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(H)){var ce=H;break t}}ce=null}if(h=ce)Ys(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ar(this,h);else{this.o=!1,this.m=3,Qe(12),ur(this),$e(this);break e}}if(this.R){h=!0;let Zt;for(;!this.K&&this.C<B.length;)if(Zt=lt(this,B),Zt==yr){rt==4&&(this.m=4,Qe(14),h=!1),Ys(this.i,this.l,null,"[Incomplete Response]");break}else if(Zt==dr){this.m=4,Qe(15),Ys(this.i,this.l,B,"[Invalid Chunk]"),h=!1;break}else Ys(this.i,this.l,Zt,null),ar(this,Zt);if(Ce(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),rt!=4||B.length!=0||this.h.h||(this.m=1,Qe(16),h=!1),this.o=this.o&&h,!h)Ys(this.i,this.l,B,"[Invalid Chunked Response]"),ur(this),$e(this);else if(B.length>0&&!this.W){this.W=!0;var Ne=this.j;Ne.g==this&&Ne.aa&&!Ne.P&&(Ne.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),Tl(Ne),Ne.P=!0,Qe(11))}}else Ys(this.i,this.l,B,null),ar(this,B);rt==4&&ur(this),this.o&&!this.K&&(rt==4?Qd(this.j,this):(this.o=!1,Et(this)))}else ma(this.g),b==400&&B.indexOf("Unknown SID")>0?(this.m=3,Qe(12)):(this.m=0,Qe(13)),ur(this),$e(this)}}}catch{}};function ze(h){if(!Ce(h))return h.g.la();const b=Jr(h.g);if(b==="")return"";let B="";const H=b.length,se=yn(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return ur(h),$e(h),"";h.h.i=new d.TextDecoder}for(let ce=0;ce<H;ce++)h.h.h=!0,B+=h.h.i.decode(b[ce],{stream:!(se&&ce==H-1)});return b.length=0,h.h.g+=B,h.C=0,h.h.g}function Ce(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function lt(h,b){var B=h.C,H=b.indexOf(`
`,B);return H==-1?yr:(B=Number(b.substring(B,H)),isNaN(B)?dr:(H+=1,H+B>b.length?yr:(b=b.slice(H,H+B),h.C=H+B,b)))}gs.prototype.cancel=function(){this.K=!0,ur(this)};function Et(h){h.T=Date.now()+h.H,Wt(h,h.H)}function Wt(h,b){if(h.D!=null)throw Error("WatchDog timer not null");h.D=pr(g(h.aa,h),b)}function kr(h){h.D&&(d.clearTimeout(h.D),h.D=null)}gs.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Dn(this.i,this.B),this.M!=2&&(tt(),Qe(17)),ur(this),this.m=2,$e(this)):Wt(this,this.T-h)};function $e(h){h.j.I==0||h.K||Qd(h.j,h)}function ur(h){kr(h);var b=h.O;b&&typeof b.dispose=="function"&&b.dispose(),h.O=null,lr(h.V),h.g&&(b=h.g,h.g=null,b.abort(),b.dispose())}function ar(h,b){try{var B=h.j;if(B.I!=0&&(B.g==h||ys(B.h,h))){if(!h.L&&ys(B.h,h)&&B.I==3){try{var H=B.Ba.g.parse(b)}catch{H=null}if(Array.isArray(H)&&H.length==3){var se=H;if(se[0]==0){e:if(!B.v){if(B.g)if(B.g.F+3e3<h.F)eo(B),Wa(B);else break e;sA(B),Qe(18)}}else B.xa=se[1],0<B.xa-B.K&&se[2]<37500&&B.F&&B.A==0&&!B.C&&(B.C=pr(g(B.Va,B),6e3));xs(B.h)<=1&&B.ta&&(B.ta=void 0)}else Vn(B,11)}else if((h.L||B.g==h)&&eo(B),!_(b))for(se=B.Ba.g.parse(b),b=0;b<se.length;b++){let Nt=se[b];const Zt=Nt[0];if(!(Zt<=B.K))if(B.K=Zt,Nt=Nt[1],B.I==2)if(Nt[0]=="c"){B.M=Nt[1],B.ba=Nt[2];const Js=Nt[3];Js!=null&&(B.ka=Js,B.j.info("VER="+B.ka));const zn=Nt[4];zn!=null&&(B.za=zn,B.j.info("SVER="+B.za));const bn=Nt[5];bn!=null&&typeof bn=="number"&&bn>0&&(H=1.5*bn,B.O=H,B.j.info("backChannelRequestTimeoutMs_="+H)),H=B;const vn=h.g;if(vn){const nA=vn.g?vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(nA){var ce=H.h;ce.g||nA.indexOf("spdy")==-1&&nA.indexOf("quic")==-1&&nA.indexOf("h2")==-1||(ce.j=ce.l,ce.g=new Set,ce.h&&(kn(ce,ce.h),ce.h=null))}if(H.G){const to=vn.g?vn.g.getResponseHeader("X-HTTP-Session-Id"):null;to&&(H.wa=to,Qt(H.J,H.G,to))}}B.I=3,B.l&&B.l.ra(),B.aa&&(B.T=Date.now()-h.F,B.j.info("Handshake RTT: "+B.T+"ms")),H=B;var Ne=h;if(H.na=Dd(H,H.L?H.ba:null,H.W),Ne.L){Rn(H.h,Ne);var rt=Ne,br=H.O;br&&(rt.H=br),rt.D&&(kr(rt),Et(rt)),H.g=Ne}else Td(H);B.i.length>0&&Pn(B)}else Nt[0]!="stop"&&Nt[0]!="close"||Vn(B,7);else B.I==3&&(Nt[0]=="stop"||Nt[0]=="close"?Nt[0]=="stop"?Vn(B,7):jl(B):Nt[0]!="noop"&&B.l&&B.l.qa(Nt),B.A=0)}}tt(4)}catch{}}var Ht=class{constructor(h,b){this.g=h,this.map=b}};function ps(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Rr(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function xs(h){return h.h?1:h.g?h.g.size:0}function ys(h,b){return h.h?h.h==b:h.g?h.g.has(b):!1}function kn(h,b){h.g?h.g.add(b):h.h=b}function Rn(h,b){h.h&&h.h==b?h.h=null:h.g&&h.g.has(b)&&h.g.delete(b)}ps.prototype.cancel=function(){if(this.i=bl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function bl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let b=h.i;for(const B of h.g.values())b=b.concat(B.G);return b}return S(h.i)}var Cd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qA(h,b){if(h){h=h.split("&");for(let B=0;B<h.length;B++){const H=h[B].indexOf("=");let se,ce=null;H>=0?(se=h[B].substring(0,H),ce=h[B].substring(H+1)):se=h[B],b(se,ce?decodeURIComponent(ce.replace(/\+/g," ")):"")}}}function Rs(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;h instanceof Rs?(this.l=h.l,zr(this,h.j),this.o=h.o,this.g=h.g,Ka(this,h.u),this.h=h.h,vl(this,jd(h.i)),this.m=h.m):h&&(b=String(h).match(Cd))?(this.l=!1,zr(this,b[1]||"",!0),this.o=Mn(b[2]||""),this.g=Mn(b[3]||"",!0),Ka(this,b[4]),this.h=Mn(b[5]||"",!0),vl(this,b[6]||"",!0),this.m=Mn(b[7]||"")):(this.l=!1,this.i=new qa(null,this.l))}Rs.prototype.toString=function(){const h=[];var b=this.j;b&&h.push(Ji(b,YA,!0),":");var B=this.g;return(B||b=="file")&&(h.push("//"),(b=this.o)&&h.push(Ji(b,YA,!0),"@"),h.push(gn(B).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),B=this.u,B!=null&&h.push(":",String(B))),(B=this.h)&&(this.g&&B.charAt(0)!="/"&&h.push("/"),h.push(Ji(B,B.charAt(0)=="/"?wl:Ed,!0))),(B=this.i.toString())&&h.push("?",B),(B=this.m)&&h.push("#",Ji(B,Nd)),h.join("")},Rs.prototype.resolve=function(h){const b=Sr(this);let B=!!h.j;B?zr(b,h.j):B=!!h.o,B?b.o=h.o:B=!!h.g,B?b.g=h.g:B=h.u!=null;var H=h.h;if(B)Ka(b,h.u);else if(B=!!h.h){if(H.charAt(0)!="/")if(this.g&&!this.h)H="/"+H;else{var se=b.h.lastIndexOf("/");se!=-1&&(H=b.h.slice(0,se+1)+H)}if(se=H,se==".."||se==".")H="";else if(se.indexOf("./")!=-1||se.indexOf("/.")!=-1){H=se.lastIndexOf("/",0)==0,se=se.split("/");const ce=[];for(let Ne=0;Ne<se.length;){const rt=se[Ne++];rt=="."?H&&Ne==se.length&&ce.push(""):rt==".."?((ce.length>1||ce.length==1&&ce[0]!="")&&ce.pop(),H&&Ne==se.length&&ce.push("")):(ce.push(rt),H=!0)}H=ce.join("/")}else H=se}return B?b.h=H:B=h.i.toString()!=="",B?vl(b,jd(h.i)):B=!!h.m,B&&(b.m=h.m),b};function Sr(h){return new Rs(h)}function zr(h,b,B){h.j=B?Mn(b,!0):b,h.j&&(h.j=h.j.replace(/:$/,""))}function Ka(h,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);h.u=b}else h.u=null}function vl(h,b,B){b instanceof qa?(h.i=b,XA(h.i,h.l)):(B||(b=Ji(b,Ga)),h.i=new qa(b,h.l))}function Qt(h,b,B){h.i.set(b,B)}function Xi(h){return Qt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Mn(h,b){return h?b?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ji(h,b,B){return typeof h=="string"?(h=encodeURI(h).replace(b,Ns),B&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Ns(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var YA=/[#\/\?@]/g,Ed=/[#\?:]/g,wl=/[#\?]/g,Ga=/[#\?@]/g,Nd=/#/g;function qa(h,b){this.h=this.g=null,this.i=h||null,this.j=!!b}function Ss(h){h.g||(h.g=new Map,h.h=0,h.i&&qA(h.i,function(b,B){h.add(decodeURIComponent(b.replace(/\+/g," ")),B)}))}r=qa.prototype,r.add=function(h,b){Ss(this),this.i=null,h=Ya(this,h);let B=this.g.get(h);return B||this.g.set(h,B=[]),B.push(b),this.h+=1,this};function Sd(h,b){Ss(h),b=Ya(h,b),h.g.has(b)&&(h.i=null,h.h-=h.g.get(b).length,h.g.delete(b))}function Bl(h,b){return Ss(h),b=Ya(h,b),h.g.has(b)}r.forEach=function(h,b){Ss(this),this.g.forEach(function(B,H){B.forEach(function(se){h.call(b,se,H,this)},this)},this)};function Cl(h,b){Ss(h);let B=[];if(typeof b=="string")Bl(h,b)&&(B=B.concat(h.g.get(Ya(h,b))));else for(h=Array.from(h.g.values()),b=0;b<h.length;b++)B=B.concat(h[b]);return B}r.set=function(h,b){return Ss(this),this.i=null,h=Ya(this,h),Bl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[b]),this.h+=1,this},r.get=function(h,b){return h?(h=Cl(this,h),h.length>0?String(h[0]):b):b};function $A(h,b,B){Sd(h,b),B.length>0&&(h.i=null,h.g.set(Ya(h,b),S(B)),h.h+=B.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],b=Array.from(this.g.keys());for(let H=0;H<b.length;H++){var B=b[H];const se=gn(B);B=Cl(this,B);for(let ce=0;ce<B.length;ce++){let Ne=se;B[ce]!==""&&(Ne+="="+gn(B[ce])),h.push(Ne)}}return this.i=h.join("&")};function jd(h){const b=new qa;return b.i=h.i,h.g&&(b.g=new Map(h.g),b.h=h.h),b}function Ya(h,b){return b=String(b),h.j&&(b=b.toLowerCase()),b}function XA(h,b){b&&!h.j&&(Ss(h),h.i=null,h.g.forEach(function(B,H){const se=H.toLowerCase();H!=se&&(Sd(this,H),$A(this,se,B))},h)),h.j=b}function pn(h,b){const B=new xr;if(d.Image){const H=new Image;H.onload=x($s,B,"TestLoadImage: loaded",!0,b,H),H.onerror=x($s,B,"TestLoadImage: error",!1,b,H),H.onabort=x($s,B,"TestLoadImage: abort",!1,b,H),H.ontimeout=x($s,B,"TestLoadImage: timeout",!1,b,H),d.setTimeout(function(){H.ontimeout&&H.ontimeout()},1e4),H.src=h}else b(!1)}function El(h,b){const B=new xr,H=new AbortController,se=setTimeout(()=>{H.abort(),$s(B,"TestPingServer: timeout",!1,b)},1e4);fetch(h,{signal:H.signal}).then(ce=>{clearTimeout(se),ce.ok?$s(B,"TestPingServer: ok",!0,b):$s(B,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(se),$s(B,"TestPingServer: error",!1,b)})}function $s(h,b,B,H,se){try{se&&(se.onload=null,se.onerror=null,se.onabort=null,se.ontimeout=null),H(B)}catch{}}function $a(){this.g=new Cs}function Ln(h){this.i=h.Sb||null,this.h=h.ab||!1}y(Ln,As),Ln.prototype.g=function(){return new Wi(this.i,this.h)};function Wi(h,b){Xe.call(this),this.H=h,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(Wi,Xe),r=Wi.prototype,r.open=function(h,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=b,this.readyState=1,xn(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(b.body=h),(this.H||d).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Xa(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,xn(this)),this.g&&(this.readyState=3,xn(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;JA(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function JA(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var b=h.value?h.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!h.done}))&&(this.response=this.responseText+=b)}h.done?Xa(this):xn(this),this.readyState==3&&JA(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,Xa(this))},r.Na=function(h){this.g&&(this.response=h,Xa(this))},r.ga=function(){this.g&&Xa(this)};function Xa(h){h.readyState=4,h.l=null,h.j=null,h.B=null,xn(h)}r.setRequestHeader=function(h,b){this.A.append(h,b)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],b=this.h.entries();for(var B=b.next();!B.done;)B=B.value,h.push(B[0]+": "+B[1]),B=b.next();return h.join(`\r
`)};function xn(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Wi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Xs(h){let b="";return ne(h,function(B,H){b+=H,b+=":",b+=B,b+=`\r
`}),b}function Zi(h,b,B){e:{for(H in B){var H=!1;break e}H=!0}H||(B=Xs(B),typeof h=="string"?B!=null&&gn(B):Qt(h,b,B))}function Dt(h){Xe.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(Dt,Xe);var Hn=/^https?$/i,Nl=["POST","PUT"];r=Dt.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,b,B,H){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);b=b?b.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():$i.g(),this.g.onreadystatechange=v(g(this.Ca,this));try{this.B=!0,this.g.open(b,String(h),!0),this.B=!1}catch(ce){eA(this,ce);return}if(h=B||"",B=new Map(this.headers),H)if(Object.getPrototypeOf(H)===Object.prototype)for(var se in H)B.set(se,H[se]);else if(typeof H.keys=="function"&&typeof H.get=="function")for(const ce of H.keys())B.set(ce,H.get(ce));else throw Error("Unknown input type for opt_headers: "+String(H));H=Array.from(B.keys()).find(ce=>ce.toLowerCase()=="content-type"),se=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(Nl,b,void 0)>=0)||H||se||B.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ce,Ne]of B)this.g.setRequestHeader(ce,Ne);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(ce){eA(this,ce)}};function eA(h,b){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=b,h.o=5,Sl(h),fa(h)}function Sl(h){h.A||(h.A=!0,Le(h,"complete"),Le(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Le(this,"complete"),Le(this,"abort"),fa(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fa(this,!0)),Dt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?tA(this):this.Xa())},r.Xa=function(){tA(this)};function tA(h){if(h.h&&typeof l<"u"){if(h.v&&yn(h)==4)setTimeout(h.Ca.bind(h),0);else if(Le(h,"readystatechange"),yn(h)==4){h.h=!1;try{const ce=h.ca();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var B;if(!(B=b)){var H;if(H=ce===0){let Ne=String(h.D).match(Cd)[1]||null;!Ne&&d.self&&d.self.location&&(Ne=d.self.location.protocol.slice(0,-1)),H=!Hn.test(Ne?Ne.toLowerCase():"")}B=H}if(B)Le(h,"complete"),Le(h,"success");else{h.o=6;try{var se=yn(h)>2?h.g.statusText:""}catch{se=""}h.l=se+" ["+h.ca()+"]",Sl(h)}}finally{fa(h)}}}}function fa(h,b){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const B=h.g;h.g=null,b||Le(h,"ready");try{B.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function yn(h){return h.g?h.g.readyState:0}r.ca=function(){try{return yn(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var b=this.g.responseText;return h&&b.indexOf(h)==0&&(b=b.substring(h.length)),gr(b)}};function Jr(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ma(h){const b={};h=(h.g&&yn(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let H=0;H<h.length;H++){if(_(h[H]))continue;var B=za(h[H]);const se=B[0];if(B=B[1],typeof B!="string")continue;B=B.trim();const ce=b[se]||[];b[se]=ce,ce.push(B)}ee(b,function(H){return H.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function On(h,b,B){return B&&B.internalChannelParams&&B.internalChannelParams[h]||b}function Ja(h){this.za=0,this.i=[],this.j=new xr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=On("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=On("baseRetryDelayMs",5e3,h),this.Za=On("retryDelaySeedMs",1e4,h),this.Ta=On("forwardChannelMaxRetries",2,h),this.va=On("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new ps(h&&h.concurrentRequestLimit),this.Ba=new $a,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Ja.prototype,r.ka=8,r.I=1,r.connect=function(h,b,B,H){Qe(0),this.W=h,this.H=b||{},B&&H!==void 0&&(this.H.OSID=B,this.H.OAID=H),this.F=this.X,this.J=Dd(this,null,this.W),Pn(this)};function jl(h){if(WA(h),h.I==3){var b=h.V++,B=Sr(h.J);if(Qt(B,"SID",h.M),Qt(B,"RID",b),Qt(B,"TYPE","terminate"),rA(h,B),b=new gs(h,h.j,b),b.M=2,b.A=Xi(Sr(B)),B=!1,d.navigator&&d.navigator.sendBeacon)try{B=d.navigator.sendBeacon(b.A.toString(),"")}catch{}!B&&d.Image&&(new Image().src=b.A,B=!0),B||(b.g=kd(b.j,null),b.g.ea(b.A)),b.F=Date.now(),Et(b)}Id(h)}function Wa(h){h.g&&(Tl(h),h.g.cancel(),h.g=null)}function WA(h){Wa(h),h.v&&(d.clearTimeout(h.v),h.v=null),eo(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function Pn(h){if(!Rr(h.h)&&!h.m){h.m=!0;var b=h.Ea;te||N(),z||(te(),z=!0),E.add(b,h),h.D=0}}function ZA(h,b){return xs(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=b.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=pr(g(h.Ea,h,b),Fd(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const se=new gs(this,this.j,h);let ce=this.o;if(this.U&&(ce?(ce=O(ce),Ae(ce,this.U)):ce=this.U),this.u!==null||this.R||(se.J=ce,ce=null),this.S)e:{for(var b=0,B=0;B<this.i.length;B++){t:{var H=this.i[B];if("__data__"in H.map&&(H=H.map.__data__,typeof H=="string")){H=H.length;break t}H=void 0}if(H===void 0)break;if(b+=H,b>4096){b=B;break e}if(b===4096||B===this.i.length-1){b=B+1;break e}}b=1e3}else b=1e3;b=_d(this,se,b),B=Sr(this.J),Qt(B,"RID",h),Qt(B,"CVER",22),this.G&&Qt(B,"X-HTTP-Session-Id",this.G),rA(this,B),ce&&(this.R?b="headers="+gn(Xs(ce))+"&"+b:this.u&&Zi(B,this.u,ce)),kn(this.h,se),this.Ra&&Qt(B,"TYPE","init"),this.S?(Qt(B,"$req",b),Qt(B,"SID","null"),se.U=!0,Es(se,B,null)):Es(se,B,b),this.I=2}}else this.I==3&&(h?_l(this,h):this.i.length==0||Rr(this.h)||_l(this))};function _l(h,b){var B;b?B=b.l:B=h.V++;const H=Sr(h.J);Qt(H,"SID",h.M),Qt(H,"RID",B),Qt(H,"AID",h.K),rA(h,H),h.u&&h.o&&Zi(H,h.u,h.o),B=new gs(h,h.j,B,h.D+1),h.u===null&&(B.J=h.o),b&&(h.i=b.G.concat(h.i)),b=_d(h,B,1e3),B.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),kn(h.h,B),Es(B,H,b)}function rA(h,b){h.H&&ne(h.H,function(B,H){Qt(b,H,B)}),h.l&&ne({},function(B,H){Qt(b,H,B)})}function _d(h,b,B){B=Math.min(h.i.length,B);const H=h.l?g(h.l.Ka,h.l,h):null;e:{var se=h.i;let rt=-1;for(;;){const br=["count="+B];rt==-1?B>0?(rt=se[0].g,br.push("ofs="+rt)):rt=0:br.push("ofs="+rt);let Nt=!0;for(let Zt=0;Zt<B;Zt++){var ce=se[Zt].g;const Js=se[Zt].map;if(ce-=rt,ce<0)rt=Math.max(0,se[Zt].g-100),Nt=!1;else try{ce="req"+ce+"_"||"";try{var Ne=Js instanceof Map?Js:Object.entries(Js);for(const[zn,bn]of Ne){let vn=bn;u(bn)&&(vn=Ut(bn)),br.push(ce+zn+"="+encodeURIComponent(vn))}}catch(zn){throw br.push(ce+"type="+encodeURIComponent("_badmap")),zn}}catch{H&&H(Js)}}if(Nt){Ne=br.join("&");break e}}Ne=void 0}return h=h.i.splice(0,B),b.G=h,Ne}function Td(h){if(!h.g&&!h.v){h.Y=1;var b=h.Da;te||N(),z||(te(),z=!0),E.add(b,h),h.A=0}}function sA(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=pr(g(h.Da,h),Fd(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,Ud(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=pr(g(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Qe(10),Wa(this),Ud(this))};function Tl(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function Ud(h){h.g=new gs(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var b=Sr(h.na);Qt(b,"RID","rpc"),Qt(b,"SID",h.M),Qt(b,"AID",h.K),Qt(b,"CI",h.F?"0":"1"),!h.F&&h.ia&&Qt(b,"TO",h.ia),Qt(b,"TYPE","xmlhttp"),rA(h,b),h.u&&h.o&&Zi(b,h.u,h.o),h.O&&(h.g.H=h.O);var B=h.g;h=h.ba,B.M=1,B.A=Xi(Sr(b)),B.u=null,B.R=!0,pe(B,h)}r.Va=function(){this.C!=null&&(this.C=null,Wa(this),sA(this),Qe(19))};function eo(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Qd(h,b){var B=null;if(h.g==b){eo(h),Tl(h),h.g=null;var H=2}else if(ys(h.h,b))B=b.G,Rn(h.h,b),H=1;else return;if(h.I!=0){if(b.o)if(H==1){B=b.u?b.u.length:0,b=Date.now()-b.F;var se=h.D;H=De(),Le(H,new Kt(H,B)),Pn(h)}else Td(h);else if(se=b.m,se==3||se==0&&b.X>0||!(H==1&&ZA(h,b)||H==2&&sA(h)))switch(B&&B.length>0&&(b=h.h,b.i=b.i.concat(B)),se){case 1:Vn(h,5);break;case 4:Vn(h,10);break;case 3:Vn(h,6);break;default:Vn(h,2)}}}function Fd(h,b){let B=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(B*=2),B*b}function Vn(h,b){if(h.j.info("Error code "+b),b==2){var B=g(h.bb,h),H=h.Ua;const se=!H;H=new Rs(H||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||zr(H,"https"),Xi(H),se?pn(H.toString(),B):El(H.toString(),B)}else Qe(2);h.I=0,h.l&&h.l.pa(b),Id(h),WA(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Qe(2)):(this.j.info("Failed to ping google.com"),Qe(1))};function Id(h){if(h.I=0,h.ja=[],h.l){const b=bl(h.h);(b.length!=0||h.i.length!=0)&&(R(h.ja,b),R(h.ja,h.i),h.h.i.length=0,S(h.i),h.i.length=0),h.l.oa()}}function Dd(h,b,B){var H=B instanceof Rs?Sr(B):new Rs(B);if(H.g!="")b&&(H.g=b+"."+H.g),Ka(H,H.u);else{var se=d.location;H=se.protocol,b=b?b+"."+se.hostname:se.hostname,se=+se.port;const ce=new Rs(null);H&&zr(ce,H),b&&(ce.g=b),se&&Ka(ce,se),B&&(ce.h=B),H=ce}return B=h.G,b=h.wa,B&&b&&Qt(H,B,b),Qt(H,"VER",h.ka),rA(h,H),H}function kd(h,b,B){if(b&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=h.Aa&&!h.ma?new Dt(new Ln({ab:B})):new Dt(h.ma),b.Fa(h.L),b}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Rd(){}r=Rd.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Za(){}Za.prototype.g=function(h,b){return new bs(h,b)};function bs(h,b){Xe.call(this),this.g=new Ja(b),this.l=h,this.h=b&&b.messageUrlParams||null,h=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(h?h["X-WebChannel-Content-Type"]=b.messageContentType:h={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(h?h["X-WebChannel-Client-Profile"]=b.sa:h={"X-WebChannel-Client-Profile":b.sa}),this.g.U=h,(h=b&&b.Qb)&&!_(h)&&(this.g.u=h),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!_(b)&&(this.g.G=b,h=this.h,h!==null&&b in h&&(h=this.h,b in h&&delete h[b])),this.j=new ga(this)}y(bs,Xe),bs.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},bs.prototype.close=function(){jl(this.g)},bs.prototype.o=function(h){var b=this.g;if(typeof h=="string"){var B={};B.__data__=h,h=B}else this.v&&(B={},B.__data__=Ut(h),h=B);b.i.push(new Ht(b.Ya++,h)),b.I==3&&Pn(b)},bs.prototype.N=function(){this.g.l=null,delete this.j,jl(this.g),delete this.g,bs.Z.N.call(this)};function Md(h){cr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var b=h.__sm__;if(b){e:{for(const B in b){h=B;break e}h=void 0}(this.i=h)&&(h=this.i,b=b!==null&&h in b?b[h]:void 0),this.data=b}else this.data=h}y(Md,cr);function Ld(){Vr.call(this),this.status=1}y(Ld,Vr);function ga(h){this.g=h}y(ga,Rd),ga.prototype.ra=function(){Le(this.g,"a")},ga.prototype.qa=function(h){Le(this.g,new Md(h))},ga.prototype.pa=function(h){Le(this.g,new Ld)},ga.prototype.oa=function(){Le(this.g,"b")},Za.prototype.createWebChannel=Za.prototype.g,bs.prototype.send=bs.prototype.o,bs.prototype.open=bs.prototype.m,bs.prototype.close=bs.prototype.close,NE=function(){return new Za},EE=function(){return De()},CE=Vt,ex={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ua.NO_ERROR=0,ua.TIMEOUT=8,ua.HTTP_ERROR=6,_h=ua,Va.COMPLETE="complete",BE=Va,nr.EventType=Jt,Jt.OPEN="a",Jt.CLOSE="b",Jt.ERROR="c",Jt.MESSAGE="d",Xe.prototype.listen=Xe.prototype.J,bc=nr,Dt.prototype.listenOnce=Dt.prototype.K,Dt.prototype.getLastError=Dt.prototype.Ha,Dt.prototype.getLastErrorCode=Dt.prototype.ya,Dt.prototype.getStatus=Dt.prototype.ca,Dt.prototype.getResponseJson=Dt.prototype.La,Dt.prototype.getResponseText=Dt.prototype.la,Dt.prototype.send=Dt.prototype.ea,Dt.prototype.setWithCredentials=Dt.prototype.Fa,wE=Dt}).apply(typeof zu<"u"?zu:typeof self<"u"?self:typeof window<"u"?window:{});let ds=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ds.UNAUTHENTICATED=new ds(null),ds.GOOGLE_CREDENTIALS=new ds("google-credentials-uid"),ds.FIRST_PARTY=new ds("first-party-uid"),ds.MOCK_USER=new ds("mock-user");let fl="12.9.0";function eQ(r){fl=r}const MA=new Wx("@firebase/firestore");function Oo(){return MA.logLevel}function Ue(r,...e){if(MA.logLevel<=gt.DEBUG){const t=e.map(u0);MA.debug(`Firestore (${fl}): ${r}`,...t)}}function La(r,...e){if(MA.logLevel<=gt.ERROR){const t=e.map(u0);MA.error(`Firestore (${fl}): ${r}`,...t)}}function LA(r,...e){if(MA.logLevel<=gt.WARN){const t=e.map(u0);MA.warn(`Firestore (${fl}): ${r}`,...t)}}function u0(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function Ye(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,SE(r,s,t)}function SE(r,e,t){let s=`FIRESTORE (${fl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw La(s),new Error(s)}function Tt(r,e,t,s){let A="Unexpected state";typeof t=="string"?A=t:s=t,r||SE(e,A,s)}function et(r,e){return r}const we={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class He extends Pa{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Mi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class jE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tQ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ds.UNAUTHENTICATED)))}shutdown(){}}class rQ{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class sQ{constructor(e){this.t=e,this.currentUser=ds.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Tt(this.o===void 0,42304);let s=this.i;const A=f=>this.i!==s?(s=this.i,t(f)):Promise.resolve();let l=new Mi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Mi,e.enqueueRetryable((()=>A(this.currentUser)))};const d=()=>{const f=l;e.enqueueRetryable((async()=>{await f.promise,await A(this.currentUser)}))},u=f=>{Ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((f=>u(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?u(f):(Ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Mi)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(Ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Tt(typeof s.accessToken=="string",31837,{l:s}),new jE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Tt(e===null||typeof e=="string",2055,{h:e}),new ds(e)}}class nQ{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=ds.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class aQ{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new nQ(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(ds.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class iB{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iQ{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Nn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Tt(this.o===void 0,3512);const s=l=>{l.error!=null&&Ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.m;return this.m=l.token,Ue("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const A=l=>{Ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>A(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?A(l):Ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new iB(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Tt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new iB(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function AQ(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}class h0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const A=AQ(40);for(let l=0;l<A.length;++l)s.length<20&&A[l]<t&&(s+=e.charAt(A[l]%62))}return s}}function pt(r,e){return r<e?-1:r>e?1:0}function tx(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const A=r.charAt(s),l=e.charAt(s);if(A!==l)return sp(A)===sp(l)?pt(A,l):sp(A)?1:-1}return pt(r.length,e.length)}const oQ=55296,lQ=57343;function sp(r){const e=r.charCodeAt(0);return e>=oQ&&e<=lQ}function nl(r,e,t){return r.length===e.length&&r.every(((s,A)=>t(s,e[A])))}const AB="__name__";class Jn{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ye(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ye(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Jn.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Jn?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let A=0;A<s;A++){const l=Jn.compareSegments(e.get(A),t.get(A));if(l!==0)return l}return pt(e.length,t.length)}static compareSegments(e,t){const s=Jn.isNumericId(e),A=Jn.isNumericId(t);return s&&!A?-1:!s&&A?1:s&&A?Jn.extractNumericId(e).compare(Jn.extractNumericId(t)):tx(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ri.fromString(e.substring(4,e.length-2))}}class ir extends Jn{construct(e,t,s){return new ir(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new He(we.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((A=>A.length>0)))}return new ir(t)}static emptyPath(){return new ir([])}}const cQ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ns extends Jn{construct(e,t,s){return new ns(e,t,s)}static isValidIdentifier(e){return cQ.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ns.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===AB}static keyField(){return new ns([AB])}static fromServerFormat(e){const t=[];let s="",A=0;const l=()=>{if(s.length===0)throw new He(we.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let d=!1;for(;A<e.length;){const u=e[A];if(u==="\\"){if(A+1===e.length)throw new He(we.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[A+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new He(we.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=f,A+=2}else u==="`"?(d=!d,A++):u!=="."||d?(s+=u,A++):(l(),A++)}if(l(),d)throw new He(we.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ns(t)}static emptyPath(){return new ns([])}}class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(ir.fromString(e))}static fromName(e){return new Ge(ir.fromString(e).popFirst(5))}static empty(){return new Ge(ir.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ir.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ir.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new ir(e.slice()))}}function dQ(r,e,t){if(!t)throw new He(we.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function uQ(r,e,t,s){if(e===!0&&s===!0)throw new He(we.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function oB(r){if(!Ge.isDocumentKey(r))throw new He(we.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function _E(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function f0(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ye(12329,{type:typeof r})}function al(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new He(we.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=f0(r);throw new He(we.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function Ir(r,e){const t={typeString:r};return e&&(t.value=e),t}function hd(r,e){if(!_E(r))throw new He(we.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const A=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const d=r[s];if(A&&typeof d!==A){t=`JSON field '${s}' must be a ${A}.`;break}if(l!==void 0&&d!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new He(we.INVALID_ARGUMENT,t);return!0}const lB=-62135596800,cB=1e6;class Yt{static now(){return Yt.fromMillis(Date.now())}static fromDate(e){return Yt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*cB);return new Yt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new He(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new He(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<lB)throw new He(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new He(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cB}_compareTo(e){return this.seconds===e.seconds?pt(this.nanoseconds,e.nanoseconds):pt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Yt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(hd(e,Yt._jsonSchema))return new Yt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-lB;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Yt._jsonSchemaVersion="firestore/timestamp/1.0",Yt._jsonSchema={type:Ir("string",Yt._jsonSchemaVersion),seconds:Ir("number"),nanoseconds:Ir("number")};class We{static fromTimestamp(e){return new We(e)}static min(){return new We(new Yt(0,0))}static max(){return new We(new Yt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const $c=-1;function hQ(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,A=We.fromTimestamp(s===1e9?new Yt(t+1,0):new Yt(t,s));return new Pi(A,Ge.empty(),e)}function fQ(r){return new Pi(r.readTime,r.key,$c)}class Pi{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Pi(We.min(),Ge.empty(),$c)}static max(){return new Pi(We.max(),Ge.empty(),$c)}}function mQ(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Ge.comparator(r.documentKey,e.documentKey),t!==0?t:pt(r.largestBatchId,e.largestBatchId))}const gQ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pQ{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ml(r){if(r.code!==we.FAILED_PRECONDITION||r.message!==gQ)throw r;Ue("LocalStore","Unexpectedly lost primary lease")}class be{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ye(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new be(((s,A)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,A)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,A)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof be?t:be.resolve(t)}catch(t){return be.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):be.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):be.reject(t)}static resolve(e){return new be(((t,s)=>{t(e)}))}static reject(e){return new be(((t,s)=>{s(e)}))}static waitFor(e){return new be(((t,s)=>{let A=0,l=0,d=!1;e.forEach((u=>{++A,u.next((()=>{++l,d&&l===A&&t()}),(f=>s(f)))})),d=!0,l===A&&t()}))}static or(e){let t=be.resolve(!1);for(const s of e)t=t.next((A=>A?be.resolve(A):s()));return t}static forEach(e,t){const s=[];return e.forEach(((A,l)=>{s.push(t.call(this,A,l))})),this.waitFor(s)}static mapArray(e,t){return new be(((s,A)=>{const l=e.length,d=new Array(l);let u=0;for(let f=0;f<l;f++){const g=f;t(e[g]).next((x=>{d[g]=x,++u,u===l&&s(d)}),(x=>A(x)))}}))}static doWhile(e,t){return new be(((s,A)=>{const l=()=>{e()===!0?t().next((()=>{l()}),A):s()};l()}))}}function xQ(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function gl(r){return r.name==="IndexedDbTransactionError"}class Nf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Nf.ce=-1;const m0=-1;function Sf(r){return r==null}function qh(r){return r===0&&1/r==-1/0}function yQ(r){return typeof r=="number"&&Number.isInteger(r)&&!qh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const TE="";function bQ(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=dB(e)),e=vQ(r.get(t),e);return dB(e)}function vQ(r,e){let t=e;const s=r.length;for(let A=0;A<s;A++){const l=r.charAt(A);switch(l){case"\0":t+="";break;case TE:t+="";break;default:t+=l}}return t}function dB(r){return r+TE+""}function uB(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function PA(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function UE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class or{constructor(e,t){this.comparator=e,this.root=t||ss.EMPTY}insert(e,t){return new or(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ss.BLACK,null,null))}remove(e){return new or(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ss.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const A=this.comparator(e,s.key);if(A===0)return t+s.left.size;A<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ku(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ku(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ku(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ku(this.root,e,this.comparator,!0)}}class Ku{constructor(e,t,s,A){this.isReverse=A,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&A&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ss{constructor(e,t,s,A,l){this.key=e,this.value=t,this.color=s??ss.RED,this.left=A??ss.EMPTY,this.right=l??ss.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,A,l){return new ss(e??this.key,t??this.value,s??this.color,A??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let A=this;const l=s(e,A.key);return A=l<0?A.copy(null,null,null,A.left.insert(e,t,s),null):l===0?A.copy(null,t,null,null,null):A.copy(null,null,null,null,A.right.insert(e,t,s)),A.fixUp()}removeMin(){if(this.left.isEmpty())return ss.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,A=this;if(t(e,A.key)<0)A.left.isEmpty()||A.left.isRed()||A.left.left.isRed()||(A=A.moveRedLeft()),A=A.copy(null,null,null,A.left.remove(e,t),null);else{if(A.left.isRed()&&(A=A.rotateRight()),A.right.isEmpty()||A.right.isRed()||A.right.left.isRed()||(A=A.moveRedRight()),t(e,A.key)===0){if(A.right.isEmpty())return ss.EMPTY;s=A.right.min(),A=A.copy(s.key,s.value,null,null,A.right.removeMin())}A=A.copy(null,null,null,null,A.right.remove(e,t))}return A.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ss.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ss.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ye(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ye(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ye(27949);return e+(this.isRed()?0:1)}}ss.EMPTY=null,ss.RED=!0,ss.BLACK=!1;ss.EMPTY=new class{constructor(){this.size=0}get key(){throw Ye(57766)}get value(){throw Ye(16141)}get color(){throw Ye(16727)}get left(){throw Ye(29726)}get right(){throw Ye(36894)}copy(e,t,s,A,l){return this}insert(e,t,s){return new ss(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Pr{constructor(e){this.comparator=e,this.data=new or(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const A=s.getNext();if(this.comparator(A.key,e[1])>=0)return;t(A.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new hB(this.data.getIterator())}getIteratorFrom(e){return new hB(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Pr)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const A=t.getNext().key,l=s.getNext().key;if(this.comparator(A,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Pr(this.comparator);return t.data=e,t}}class hB{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class jn{constructor(e){this.fields=e,e.sort(ns.comparator)}static empty(){return new jn([])}unionWith(e){let t=new Pr(ns.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new jn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return nl(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}class QE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class is{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(A){try{return atob(A)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new QE("Invalid base64 string: "+l):l}})(e);return new is(t)}static fromUint8Array(e){const t=(function(A){let l="";for(let d=0;d<A.length;++d)l+=String.fromCharCode(A[d]);return l})(e);return new is(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let A=0;A<t.length;A++)s[A]=t.charCodeAt(A);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}is.EMPTY_BYTE_STRING=new is("");const wQ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vi(r){if(Tt(!!r,39018),typeof r=="string"){let e=0;const t=wQ.exec(r);if(Tt(!!t,46558,{timestamp:r}),t[1]){let A=t[1];A=(A+"000000000").substr(0,9),e=Number(A)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Er(r.seconds),nanos:Er(r.nanos)}}function Er(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function zi(r){return typeof r=="string"?is.fromBase64String(r):is.fromUint8Array(r)}const FE="server_timestamp",IE="__type__",DE="__previous_value__",kE="__local_write_time__";function g0(r){return(r?.mapValue?.fields||{})[IE]?.stringValue===FE}function jf(r){const e=r.mapValue.fields[DE];return g0(e)?jf(e):e}function Xc(r){const e=Vi(r.mapValue.fields[kE].timestampValue);return new Yt(e.seconds,e.nanos)}class BQ{constructor(e,t,s,A,l,d,u,f,g,x,y){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=A,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=u,this.longPollingOptions=f,this.useFetchStreams=g,this.isUsingEmulator=x,this.apiKey=y}}const Yh="(default)";class Jc{constructor(e,t){this.projectId=e,this.database=t||Yh}static empty(){return new Jc("","")}get isDefaultDatabase(){return this.database===Yh}isEqual(e){return e instanceof Jc&&e.projectId===this.projectId&&e.database===this.database}}function CQ(r,e){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new He(we.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jc(r.options.projectId,e)}const RE="__type__",EQ="__max__",Gu={mapValue:{}},ME="__vector__",$h="value";function Ki(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?g0(r)?4:SQ(r)?9007199254740991:NQ(r)?10:11:Ye(28295,{value:r})}function aa(r,e){if(r===e)return!0;const t=Ki(r);if(t!==Ki(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Xc(r).isEqual(Xc(e));case 3:return(function(A,l){if(typeof A.timestampValue=="string"&&typeof l.timestampValue=="string"&&A.timestampValue.length===l.timestampValue.length)return A.timestampValue===l.timestampValue;const d=Vi(A.timestampValue),u=Vi(l.timestampValue);return d.seconds===u.seconds&&d.nanos===u.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(A,l){return zi(A.bytesValue).isEqual(zi(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(A,l){return Er(A.geoPointValue.latitude)===Er(l.geoPointValue.latitude)&&Er(A.geoPointValue.longitude)===Er(l.geoPointValue.longitude)})(r,e);case 2:return(function(A,l){if("integerValue"in A&&"integerValue"in l)return Er(A.integerValue)===Er(l.integerValue);if("doubleValue"in A&&"doubleValue"in l){const d=Er(A.doubleValue),u=Er(l.doubleValue);return d===u?qh(d)===qh(u):isNaN(d)&&isNaN(u)}return!1})(r,e);case 9:return nl(r.arrayValue.values||[],e.arrayValue.values||[],aa);case 10:case 11:return(function(A,l){const d=A.mapValue.fields||{},u=l.mapValue.fields||{};if(uB(d)!==uB(u))return!1;for(const f in d)if(d.hasOwnProperty(f)&&(u[f]===void 0||!aa(d[f],u[f])))return!1;return!0})(r,e);default:return Ye(52216,{left:r})}}function Wc(r,e){return(r.values||[]).find((t=>aa(t,e)))!==void 0}function il(r,e){if(r===e)return 0;const t=Ki(r),s=Ki(e);if(t!==s)return pt(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return pt(r.booleanValue,e.booleanValue);case 2:return(function(l,d){const u=Er(l.integerValue||l.doubleValue),f=Er(d.integerValue||d.doubleValue);return u<f?-1:u>f?1:u===f?0:isNaN(u)?isNaN(f)?0:-1:1})(r,e);case 3:return fB(r.timestampValue,e.timestampValue);case 4:return fB(Xc(r),Xc(e));case 5:return tx(r.stringValue,e.stringValue);case 6:return(function(l,d){const u=zi(l),f=zi(d);return u.compareTo(f)})(r.bytesValue,e.bytesValue);case 7:return(function(l,d){const u=l.split("/"),f=d.split("/");for(let g=0;g<u.length&&g<f.length;g++){const x=pt(u[g],f[g]);if(x!==0)return x}return pt(u.length,f.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,d){const u=pt(Er(l.latitude),Er(d.latitude));return u!==0?u:pt(Er(l.longitude),Er(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return mB(r.arrayValue,e.arrayValue);case 10:return(function(l,d){const u=l.fields||{},f=d.fields||{},g=u[$h]?.arrayValue,x=f[$h]?.arrayValue,y=pt(g?.values?.length||0,x?.values?.length||0);return y!==0?y:mB(g,x)})(r.mapValue,e.mapValue);case 11:return(function(l,d){if(l===Gu.mapValue&&d===Gu.mapValue)return 0;if(l===Gu.mapValue)return 1;if(d===Gu.mapValue)return-1;const u=l.fields||{},f=Object.keys(u),g=d.fields||{},x=Object.keys(g);f.sort(),x.sort();for(let y=0;y<f.length&&y<x.length;++y){const v=tx(f[y],x[y]);if(v!==0)return v;const S=il(u[f[y]],g[x[y]]);if(S!==0)return S}return pt(f.length,x.length)})(r.mapValue,e.mapValue);default:throw Ye(23264,{he:t})}}function fB(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return pt(r,e);const t=Vi(r),s=Vi(e),A=pt(t.seconds,s.seconds);return A!==0?A:pt(t.nanos,s.nanos)}function mB(r,e){const t=r.values||[],s=e.values||[];for(let A=0;A<t.length&&A<s.length;++A){const l=il(t[A],s[A]);if(l)return l}return pt(t.length,s.length)}function Al(r){return rx(r)}function rx(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=Vi(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return zi(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Ge.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",A=!0;for(const l of t.values||[])A?A=!1:s+=",",s+=rx(l);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let A="{",l=!0;for(const d of s)l?l=!1:A+=",",A+=`${d}:${rx(t.fields[d])}`;return A+"}"})(r.mapValue):Ye(61005,{value:r})}function Th(r){switch(Ki(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=jf(r);return e?16+Th(e):16;case 5:return 2*r.stringValue.length;case 6:return zi(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((A,l)=>A+Th(l)),0)})(r.arrayValue);case 10:case 11:return(function(s){let A=0;return PA(s.fields,((l,d)=>{A+=l.length+Th(d)})),A})(r.mapValue);default:throw Ye(13486,{value:r})}}function sx(r){return!!r&&"integerValue"in r}function p0(r){return!!r&&"arrayValue"in r}function gB(r){return!!r&&"nullValue"in r}function pB(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Uh(r){return!!r&&"mapValue"in r}function NQ(r){return(r?.mapValue?.fields||{})[RE]?.stringValue===ME}function Dc(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return PA(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Dc(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Dc(r.arrayValue.values[t]);return e}return{...r}}function SQ(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===EQ}class ln{constructor(e){this.value=e}static empty(){return new ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Uh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Dc(t)}setAll(e){let t=ns.emptyPath(),s={},A=[];e.forEach(((d,u)=>{if(!t.isImmediateParentOf(u)){const f=this.getFieldsMap(t);this.applyChanges(f,s,A),s={},A=[],t=u.popLast()}d?s[u.lastSegment()]=Dc(d):A.push(u.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,A)}delete(e){const t=this.field(e.popLast());Uh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return aa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let A=t.mapValue.fields[e.get(s)];Uh(A)&&A.mapValue.fields||(A={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=A),t=A}return t.mapValue.fields}applyChanges(e,t,s){PA(t,((A,l)=>e[A]=l));for(const A of s)delete e[A]}clone(){return new ln(Dc(this.value))}}function LE(r){const e=[];return PA(r.fields,((t,s)=>{const A=new ns([t]);if(Uh(s)){const l=LE(s.mapValue).fields;if(l.length===0)e.push(A);else for(const d of l)e.push(A.child(d))}else e.push(A)})),new jn(e)}class hs{constructor(e,t,s,A,l,d,u){this.key=e,this.documentType=t,this.version=s,this.readTime=A,this.createTime=l,this.data=d,this.documentState=u}static newInvalidDocument(e){return new hs(e,0,We.min(),We.min(),We.min(),ln.empty(),0)}static newFoundDocument(e,t,s,A){return new hs(e,1,t,We.min(),s,A,0)}static newNoDocument(e,t){return new hs(e,2,t,We.min(),We.min(),ln.empty(),0)}static newUnknownDocument(e,t){return new hs(e,3,t,We.min(),We.min(),ln.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(We.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=We.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof hs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Xh{constructor(e,t){this.position=e,this.inclusive=t}}function xB(r,e,t){let s=0;for(let A=0;A<r.position.length;A++){const l=e[A],d=r.position[A];if(l.field.isKeyField()?s=Ge.comparator(Ge.fromName(d.referenceValue),t.key):s=il(d,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function yB(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!aa(r.position[t],e.position[t]))return!1;return!0}class Jh{constructor(e,t="asc"){this.field=e,this.dir=t}}function jQ(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class HE{}class Hr extends HE{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new TQ(e,t,s):t==="array-contains"?new FQ(e,s):t==="in"?new IQ(e,s):t==="not-in"?new DQ(e,s):t==="array-contains-any"?new kQ(e,s):new Hr(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new UQ(e,s):new QQ(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(il(t,this.value)):t!==null&&Ki(this.value)===Ki(t)&&this.matchesComparison(il(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ye(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ia extends HE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ia(e,t)}matches(e){return OE(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function OE(r){return r.op==="and"}function PE(r){return _Q(r)&&OE(r)}function _Q(r){for(const e of r.filters)if(e instanceof ia)return!1;return!0}function nx(r){if(r instanceof Hr)return r.field.canonicalString()+r.op.toString()+Al(r.value);if(PE(r))return r.filters.map((e=>nx(e))).join(",");{const e=r.filters.map((t=>nx(t))).join(",");return`${r.op}(${e})`}}function VE(r,e){return r instanceof Hr?(function(s,A){return A instanceof Hr&&s.op===A.op&&s.field.isEqual(A.field)&&aa(s.value,A.value)})(r,e):r instanceof ia?(function(s,A){return A instanceof ia&&s.op===A.op&&s.filters.length===A.filters.length?s.filters.reduce(((l,d,u)=>l&&VE(d,A.filters[u])),!0):!1})(r,e):void Ye(19439)}function zE(r){return r instanceof Hr?(function(t){return`${t.field.canonicalString()} ${t.op} ${Al(t.value)}`})(r):r instanceof ia?(function(t){return t.op.toString()+" {"+t.getFilters().map(zE).join(" ,")+"}"})(r):"Filter"}class TQ extends Hr{constructor(e,t,s){super(e,t,s),this.key=Ge.fromName(s.referenceValue)}matches(e){const t=Ge.comparator(e.key,this.key);return this.matchesComparison(t)}}class UQ extends Hr{constructor(e,t){super(e,"in",t),this.keys=KE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class QQ extends Hr{constructor(e,t){super(e,"not-in",t),this.keys=KE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function KE(r,e){return(e.arrayValue?.values||[]).map((t=>Ge.fromName(t.referenceValue)))}class FQ extends Hr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return p0(t)&&Wc(t.arrayValue,this.value)}}class IQ extends Hr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Wc(this.value.arrayValue,t)}}class DQ extends Hr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Wc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Wc(this.value.arrayValue,t)}}class kQ extends Hr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!p0(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Wc(this.value.arrayValue,s)))}}class RQ{constructor(e,t=null,s=[],A=[],l=null,d=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=A,this.limit=l,this.startAt=d,this.endAt=u,this.Te=null}}function bB(r,e=null,t=[],s=[],A=null,l=null,d=null){return new RQ(r,e,t,s,A,l,d)}function x0(r){const e=et(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>nx(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),Sf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Al(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Al(s))).join(",")),e.Te=t}return e.Te}function y0(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!jQ(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!VE(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!yB(r.startAt,e.startAt)&&yB(r.endAt,e.endAt)}function ax(r){return Ge.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class _f{constructor(e,t=null,s=[],A=[],l=null,d="F",u=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=A,this.limit=l,this.limitType=d,this.startAt=u,this.endAt=f,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function MQ(r,e,t,s,A,l,d,u){return new _f(r,e,t,s,A,l,d,u)}function b0(r){return new _f(r)}function vB(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function LQ(r){return Ge.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function HQ(r){return r.collectionGroup!==null}function kc(r){const e=et(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let u=new Pr(ns.comparator);return d.filters.forEach((f=>{f.getFlattenedFilters().forEach((g=>{g.isInequality()&&(u=u.add(g.field))}))})),u})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Jh(l,s))})),t.has(ns.keyField().canonicalString())||e.Ie.push(new Jh(ns.keyField(),s))}return e.Ie}function ea(r){const e=et(r);return e.Ee||(e.Ee=OQ(e,kc(r))),e.Ee}function OQ(r,e){if(r.limitType==="F")return bB(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((A=>{const l=A.dir==="desc"?"asc":"desc";return new Jh(A.field,l)}));const t=r.endAt?new Xh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Xh(r.startAt.position,r.startAt.inclusive):null;return bB(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function ix(r,e,t){return new _f(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Tf(r,e){return y0(ea(r),ea(e))&&r.limitType===e.limitType}function GE(r){return`${x0(ea(r))}|lt:${r.limitType}`}function Po(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((A=>zE(A))).join(", ")}]`),Sf(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((A=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(A))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((A=>Al(A))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((A=>Al(A))).join(",")),`Target(${s})`})(ea(r))}; limitType=${r.limitType})`}function Uf(r,e){return e.isFoundDocument()&&(function(s,A){const l=A.key.path;return s.collectionGroup!==null?A.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Ge.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(r,e)&&(function(s,A){for(const l of kc(s))if(!l.field.isKeyField()&&A.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(s,A){for(const l of s.filters)if(!l.matches(A))return!1;return!0})(r,e)&&(function(s,A){return!(s.startAt&&!(function(d,u,f){const g=xB(d,u,f);return d.inclusive?g<=0:g<0})(s.startAt,kc(s),A)||s.endAt&&!(function(d,u,f){const g=xB(d,u,f);return d.inclusive?g>=0:g>0})(s.endAt,kc(s),A))})(r,e)}function PQ(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function qE(r){return(e,t)=>{let s=!1;for(const A of kc(r)){const l=VQ(A,e,t);if(l!==0)return l;s=s||A.field.isKeyField()}return 0}}function VQ(r,e,t){const s=r.field.isKeyField()?Ge.comparator(e.key,t.key):(function(l,d,u){const f=d.data.field(l),g=u.data.field(l);return f!==null&&g!==null?il(f,g):Ye(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ye(19790,{direction:r.dir})}}class VA{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[A,l]of s)if(this.equalsFn(A,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),A=this.inner[s];if(A===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<A.length;l++)if(this.equalsFn(A[l][0],e))return void(A[l]=[e,t]);A.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let A=0;A<s.length;A++)if(this.equalsFn(s[A][0],e))return s.length===1?delete this.inner[t]:s.splice(A,1),this.innerSize--,!0;return!1}forEach(e){PA(this.inner,((t,s)=>{for(const[A,l]of s)e(A,l)}))}isEmpty(){return UE(this.inner)}size(){return this.innerSize}}const zQ=new or(Ge.comparator);function Ha(){return zQ}const YE=new or(Ge.comparator);function vc(...r){let e=YE;for(const t of r)e=e.insert(t.key,t);return e}function $E(r){let e=YE;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function SA(){return Rc()}function XE(){return Rc()}function Rc(){return new VA((r=>r.toString()),((r,e)=>r.isEqual(e)))}const KQ=new or(Ge.comparator),GQ=new Pr(Ge.comparator);function xt(...r){let e=GQ;for(const t of r)e=e.add(t);return e}const qQ=new Pr(pt);function YQ(){return qQ}function v0(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qh(e)?"-0":e}}function JE(r){return{integerValue:""+r}}function $Q(r,e){return yQ(e)?JE(e):v0(r,e)}class Qf{constructor(){this._=void 0}}function XQ(r,e,t){return r instanceof Wh?(function(A,l){const d={fields:{[IE]:{stringValue:FE},[kE]:{timestampValue:{seconds:A.seconds,nanos:A.nanoseconds}}}};return l&&g0(l)&&(l=jf(l)),l&&(d.fields[DE]=l),{mapValue:d}})(t,e):r instanceof Zc?ZE(r,e):r instanceof ed?e2(r,e):(function(A,l){const d=WE(A,l),u=wB(d)+wB(A.Ae);return sx(d)&&sx(A.Ae)?JE(u):v0(A.serializer,u)})(r,e)}function JQ(r,e,t){return r instanceof Zc?ZE(r,e):r instanceof ed?e2(r,e):t}function WE(r,e){return r instanceof Zh?(function(s){return sx(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class Wh extends Qf{}class Zc extends Qf{constructor(e){super(),this.elements=e}}function ZE(r,e){const t=t2(e);for(const s of r.elements)t.some((A=>aa(A,s)))||t.push(s);return{arrayValue:{values:t}}}class ed extends Qf{constructor(e){super(),this.elements=e}}function e2(r,e){let t=t2(e);for(const s of r.elements)t=t.filter((A=>!aa(A,s)));return{arrayValue:{values:t}}}class Zh extends Qf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function wB(r){return Er(r.integerValue||r.doubleValue)}function t2(r){return p0(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function WQ(r,e){return r.field.isEqual(e.field)&&(function(s,A){return s instanceof Zc&&A instanceof Zc||s instanceof ed&&A instanceof ed?nl(s.elements,A.elements,aa):s instanceof Zh&&A instanceof Zh?aa(s.Ae,A.Ae):s instanceof Wh&&A instanceof Wh})(r.transform,e.transform)}class ZQ{constructor(e,t){this.version=e,this.transformResults=t}}class ta{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ta}static exists(e){return new ta(void 0,e)}static updateTime(e){return new ta(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Ff{}function r2(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new w0(r.key,ta.none()):new fd(r.key,r.data,ta.none());{const t=r.data,s=ln.empty();let A=new Pr(ns.comparator);for(let l of e.fields)if(!A.has(l)){let d=t.field(l);d===null&&l.length>1&&(l=l.popLast(),d=t.field(l)),d===null?s.delete(l):s.set(l,d),A=A.add(l)}return new zA(r.key,s,new jn(A.toArray()),ta.none())}}function eF(r,e,t){r instanceof fd?(function(A,l,d){const u=A.value.clone(),f=CB(A.fieldTransforms,l,d.transformResults);u.setAll(f),l.convertToFoundDocument(d.version,u).setHasCommittedMutations()})(r,e,t):r instanceof zA?(function(A,l,d){if(!Qh(A.precondition,l))return void l.convertToUnknownDocument(d.version);const u=CB(A.fieldTransforms,l,d.transformResults),f=l.data;f.setAll(s2(A)),f.setAll(u),l.convertToFoundDocument(d.version,f).setHasCommittedMutations()})(r,e,t):(function(A,l,d){l.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function Mc(r,e,t,s){return r instanceof fd?(function(l,d,u,f){if(!Qh(l.precondition,d))return u;const g=l.value.clone(),x=EB(l.fieldTransforms,f,d);return g.setAll(x),d.convertToFoundDocument(d.version,g).setHasLocalMutations(),null})(r,e,t,s):r instanceof zA?(function(l,d,u,f){if(!Qh(l.precondition,d))return u;const g=EB(l.fieldTransforms,f,d),x=d.data;return x.setAll(s2(l)),x.setAll(g),d.convertToFoundDocument(d.version,x).setHasLocalMutations(),u===null?null:u.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((y=>y.field)))})(r,e,t,s):(function(l,d,u){return Qh(l.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):u})(r,e,t)}function tF(r,e){let t=null;for(const s of r.fieldTransforms){const A=e.data.field(s.field),l=WE(s.transform,A||null);l!=null&&(t===null&&(t=ln.empty()),t.set(s.field,l))}return t||null}function BB(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,A){return s===void 0&&A===void 0||!(!s||!A)&&nl(s,A,((l,d)=>WQ(l,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class fd extends Ff{constructor(e,t,s,A=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=A,this.type=0}getFieldMask(){return null}}class zA extends Ff{constructor(e,t,s,A,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=A,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function s2(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function CB(r,e,t){const s=new Map;Tt(r.length===t.length,32656,{Ve:t.length,de:r.length});for(let A=0;A<t.length;A++){const l=r[A],d=l.transform,u=e.data.field(l.field);s.set(l.field,JQ(d,u,t[A]))}return s}function EB(r,e,t){const s=new Map;for(const A of r){const l=A.transform,d=t.data.field(A.field);s.set(A.field,XQ(l,d,e))}return s}class w0 extends Ff{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rF extends Ff{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class sF{constructor(e,t,s,A){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=A}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let A=0;A<this.mutations.length;A++){const l=this.mutations[A];l.key.isEqual(e.key)&&eF(l,e,s[A])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Mc(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Mc(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=XE();return this.mutations.forEach((A=>{const l=e.get(A.key),d=l.overlayedDocument;let u=this.applyToLocalView(d,l.mutatedFields);u=t.has(A.key)?null:u;const f=r2(d,u);f!==null&&s.set(A.key,f),d.isValidDocument()||d.convertToNoDocument(We.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),xt())}isEqual(e){return this.batchId===e.batchId&&nl(this.mutations,e.mutations,((t,s)=>BB(t,s)))&&nl(this.baseMutations,e.baseMutations,((t,s)=>BB(t,s)))}}class B0{constructor(e,t,s,A){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=A}static from(e,t,s){Tt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let A=(function(){return KQ})();const l=e.mutations;for(let d=0;d<l.length;d++)A=A.insert(l[d].key,s[d].version);return new B0(e,t,s,A)}}class nF{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class aF{constructor(e,t){this.count=e,this.unchangedNames=t}}var Qr,bt;function iF(r){switch(r){case we.OK:return Ye(64938);case we.CANCELLED:case we.UNKNOWN:case we.DEADLINE_EXCEEDED:case we.RESOURCE_EXHAUSTED:case we.INTERNAL:case we.UNAVAILABLE:case we.UNAUTHENTICATED:return!1;case we.INVALID_ARGUMENT:case we.NOT_FOUND:case we.ALREADY_EXISTS:case we.PERMISSION_DENIED:case we.FAILED_PRECONDITION:case we.ABORTED:case we.OUT_OF_RANGE:case we.UNIMPLEMENTED:case we.DATA_LOSS:return!0;default:return Ye(15467,{code:r})}}function n2(r){if(r===void 0)return La("GRPC error has no .code"),we.UNKNOWN;switch(r){case Qr.OK:return we.OK;case Qr.CANCELLED:return we.CANCELLED;case Qr.UNKNOWN:return we.UNKNOWN;case Qr.DEADLINE_EXCEEDED:return we.DEADLINE_EXCEEDED;case Qr.RESOURCE_EXHAUSTED:return we.RESOURCE_EXHAUSTED;case Qr.INTERNAL:return we.INTERNAL;case Qr.UNAVAILABLE:return we.UNAVAILABLE;case Qr.UNAUTHENTICATED:return we.UNAUTHENTICATED;case Qr.INVALID_ARGUMENT:return we.INVALID_ARGUMENT;case Qr.NOT_FOUND:return we.NOT_FOUND;case Qr.ALREADY_EXISTS:return we.ALREADY_EXISTS;case Qr.PERMISSION_DENIED:return we.PERMISSION_DENIED;case Qr.FAILED_PRECONDITION:return we.FAILED_PRECONDITION;case Qr.ABORTED:return we.ABORTED;case Qr.OUT_OF_RANGE:return we.OUT_OF_RANGE;case Qr.UNIMPLEMENTED:return we.UNIMPLEMENTED;case Qr.DATA_LOSS:return we.DATA_LOSS;default:return Ye(39323,{code:r})}}(bt=Qr||(Qr={}))[bt.OK=0]="OK",bt[bt.CANCELLED=1]="CANCELLED",bt[bt.UNKNOWN=2]="UNKNOWN",bt[bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",bt[bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",bt[bt.NOT_FOUND=5]="NOT_FOUND",bt[bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",bt[bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",bt[bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",bt[bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",bt[bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",bt[bt.ABORTED=10]="ABORTED",bt[bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",bt[bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",bt[bt.INTERNAL=13]="INTERNAL",bt[bt.UNAVAILABLE=14]="UNAVAILABLE",bt[bt.DATA_LOSS=15]="DATA_LOSS";function AF(){return new TextEncoder}const oF=new Ri([4294967295,4294967295],0);function NB(r){const e=AF().encode(r),t=new vE;return t.update(e),new Uint8Array(t.digest())}function SB(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),A=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ri([t,s],0),new Ri([A,l],0)]}class C0{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new wc(`Invalid padding: ${t}`);if(s<0)throw new wc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new wc(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new wc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ri.fromNumber(this.ge)}ye(e,t,s){let A=e.add(t.multiply(Ri.fromNumber(s)));return A.compare(oF)===1&&(A=new Ri([A.getBits(0),A.getBits(1)],0)),A.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=NB(e),[s,A]=SB(t);for(let l=0;l<this.hashCount;l++){const d=this.ye(s,A,l);if(!this.we(d))return!1}return!0}static create(e,t,s){const A=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),d=new C0(l,A,t);return s.forEach((u=>d.insert(u))),d}insert(e){if(this.ge===0)return;const t=NB(e),[s,A]=SB(t);for(let l=0;l<this.hashCount;l++){const d=this.ye(s,A,l);this.be(d)}}be(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class wc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class If{constructor(e,t,s,A,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=A,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const A=new Map;return A.set(e,md.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new If(We.min(),A,new or(pt),Ha(),xt())}}class md{constructor(e,t,s,A,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=A,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new md(s,t,xt(),xt(),xt())}}class Fh{constructor(e,t,s,A){this.Se=e,this.removedTargetIds=t,this.key=s,this.De=A}}class a2{constructor(e,t){this.targetId=e,this.Ce=t}}class i2{constructor(e,t,s=is.EMPTY_BYTE_STRING,A=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=A}}class jB{constructor(){this.ve=0,this.Fe=_B(),this.Me=is.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=xt(),t=xt(),s=xt();return this.Fe.forEach(((A,l)=>{switch(l){case 0:e=e.add(A);break;case 2:t=t.add(A);break;case 1:s=s.add(A);break;default:Ye(38017,{changeType:l})}})),new md(this.Me,this.xe,e,t,s)}Ke(){this.Oe=!1,this.Fe=_B()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Tt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class lF{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ha(),this.He=qu(),this.Je=qu(),this.Ze=new or(pt)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.We(),s.Ne||s.Ke(),s.Le(e.resumeToken);break;case 2:s.We(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.Qe(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Ye(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,A)=>{this.rt(A)&&t(A)}))}st(e){const t=e.targetId,s=e.Ce.count,A=this.ot(t);if(A){const l=A.target;if(ax(l))if(s===0){const d=new Ge(l.path);this.et(t,d,hs.newNoDocument(d,We.min()))}else Tt(s===1,20013,{expectedCount:s});else{const d=this._t(t);if(d!==s){const u=this.ut(e),f=u?this.ct(u,e,d):1;if(f!==0){this.it(t);const g=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:A=0},hashCount:l=0}=t;let d,u;try{d=zi(s).toUint8Array()}catch(f){if(f instanceof QE)return LA("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{u=new C0(d,A,l)}catch(f){return LA(f instanceof wc?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return u.ge===0?null:u}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let A=0;return s.forEach((l=>{const d=this.Ge.ht(),u=`projects/${d.projectId}/databases/${d.database}/documents/${l.path.canonicalString()}`;e.mightContain(u)||(this.et(t,l,null),A++)})),A}Tt(e){const t=new Map;this.ze.forEach(((l,d)=>{const u=this.ot(d);if(u){if(l.current&&ax(u.target)){const f=new Ge(u.target.path);this.It(f).has(d)||this.Et(d,f)||this.et(d,f,hs.newNoDocument(f,e))}l.Be&&(t.set(d,l.ke()),l.Ke())}}));let s=xt();this.Je.forEach(((l,d)=>{let u=!0;d.forEachWhile((f=>{const g=this.ot(f);return!g||g.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(s=s.add(l))})),this.je.forEach(((l,d)=>d.setReadTime(e)));const A=new If(e,t,this.Ze,this.je,s);return this.je=Ha(),this.He=qu(),this.Je=qu(),this.Ze=new or(pt),A}Ye(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,s),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const A=this.nt(e);this.Et(e,t)?A.qe(t,1):A.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new jB,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Pr(pt),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Pr(pt),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ue("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new jB),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function qu(){return new or(Ge.comparator)}function _B(){return new or(Ge.comparator)}const cF={asc:"ASCENDING",desc:"DESCENDING"},dF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uF={and:"AND",or:"OR"};class hF{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ax(r,e){return r.useProto3Json||Sf(e)?e:{value:e}}function ef(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function A2(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function fF(r,e){return ef(r,e.toTimestamp())}function ra(r){return Tt(!!r,49232),We.fromTimestamp((function(t){const s=Vi(t);return new Yt(s.seconds,s.nanos)})(r))}function E0(r,e){return ox(r,e).canonicalString()}function ox(r,e){const t=(function(A){return new ir(["projects",A.projectId,"databases",A.database])})(r).child("documents");return e===void 0?t:t.child(e)}function o2(r){const e=ir.fromString(r);return Tt(h2(e),10190,{key:e.toString()}),e}function lx(r,e){return E0(r.databaseId,e.path)}function np(r,e){const t=o2(e);if(t.get(1)!==r.databaseId.projectId)throw new He(we.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new He(we.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Ge(c2(t))}function l2(r,e){return E0(r.databaseId,e)}function mF(r){const e=o2(r);return e.length===4?ir.emptyPath():c2(e)}function cx(r){return new ir(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function c2(r){return Tt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function TB(r,e,t){return{name:lx(r,e),fields:t.value.mapValue.fields}}function gF(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ye(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),A=e.targetChange.targetIds||[],l=(function(g,x){return g.useProto3Json?(Tt(x===void 0||typeof x=="string",58123),is.fromBase64String(x||"")):(Tt(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),is.fromUint8Array(x||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,u=d&&(function(g){const x=g.code===void 0?we.UNKNOWN:n2(g.code);return new He(x,g.message||"")})(d);t=new i2(s,A,l,u||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const A=np(r,s.document.name),l=ra(s.document.updateTime),d=s.document.createTime?ra(s.document.createTime):We.min(),u=new ln({mapValue:{fields:s.document.fields}}),f=hs.newFoundDocument(A,l,d,u),g=s.targetIds||[],x=s.removedTargetIds||[];t=new Fh(g,x,f.key,f)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const A=np(r,s.document),l=s.readTime?ra(s.readTime):We.min(),d=hs.newNoDocument(A,l),u=s.removedTargetIds||[];t=new Fh([],u,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const A=np(r,s.document),l=s.removedTargetIds||[];t=new Fh([],l,A,null)}else{if(!("filter"in e))return Ye(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:A=0,unchangedNames:l}=s,d=new aF(A,l),u=s.targetId;t=new a2(u,d)}}return t}function pF(r,e){let t;if(e instanceof fd)t={update:TB(r,e.key,e.value)};else if(e instanceof w0)t={delete:lx(r,e.key)};else if(e instanceof zA)t={update:TB(r,e.key,e.data),updateMask:NF(e.fieldMask)};else{if(!(e instanceof rF))return Ye(16599,{dt:e.type});t={verify:lx(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,d){const u=d.transform;if(u instanceof Wh)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Zc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof ed)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Zh)return{fieldPath:d.field.canonicalString(),increment:u.Ae};throw Ye(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(A,l){return l.updateTime!==void 0?{updateTime:fF(A,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ye(27497)})(r,e.precondition)),t}function xF(r,e){return r&&r.length>0?(Tt(e!==void 0,14353),r.map((t=>(function(A,l){let d=A.updateTime?ra(A.updateTime):ra(l);return d.isEqual(We.min())&&(d=ra(l)),new ZQ(d,A.transformResults||[])})(t,e)))):[]}function yF(r,e){return{documents:[l2(r,e.path)]}}function bF(r,e){const t={structuredQuery:{}},s=e.path;let A;e.collectionGroup!==null?(A=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(A=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=l2(r,A);const l=(function(g){if(g.length!==0)return u2(ia.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const d=(function(g){if(g.length!==0)return g.map((x=>(function(v){return{field:Vo(v.field),direction:BF(v.dir)}})(x)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const u=Ax(r,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:A}}function vF(r){let e=mF(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let A=null;if(s>0){Tt(s===1,65062);const x=t.from[0];x.allDescendants?A=x.collectionId:e=e.child(x.collectionId)}let l=[];t.where&&(l=(function(y){const v=d2(y);return v instanceof ia&&PE(v)?v.getFilters():[v]})(t.where));let d=[];t.orderBy&&(d=(function(y){return y.map((v=>(function(R){return new Jh(zo(R.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(v)))})(t.orderBy));let u=null;t.limit&&(u=(function(y){let v;return v=typeof y=="object"?y.value:y,Sf(v)?null:v})(t.limit));let f=null;t.startAt&&(f=(function(y){const v=!!y.before,S=y.values||[];return new Xh(S,v)})(t.startAt));let g=null;return t.endAt&&(g=(function(y){const v=!y.before,S=y.values||[];return new Xh(S,v)})(t.endAt)),MQ(e,A,d,l,u,"F",f,g)}function wF(r,e){const t=(function(A){switch(A){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ye(28987,{purpose:A})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function d2(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=zo(t.unaryFilter.field);return Hr.create(s,"==",{doubleValue:NaN});case"IS_NULL":const A=zo(t.unaryFilter.field);return Hr.create(A,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=zo(t.unaryFilter.field);return Hr.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=zo(t.unaryFilter.field);return Hr.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ye(61313);default:return Ye(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Hr.create(zo(t.fieldFilter.field),(function(A){switch(A){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ye(58110);default:return Ye(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return ia.create(t.compositeFilter.filters.map((s=>d2(s))),(function(A){switch(A){case"AND":return"and";case"OR":return"or";default:return Ye(1026)}})(t.compositeFilter.op))})(r):Ye(30097,{filter:r})}function BF(r){return cF[r]}function CF(r){return dF[r]}function EF(r){return uF[r]}function Vo(r){return{fieldPath:r.canonicalString()}}function zo(r){return ns.fromServerFormat(r.fieldPath)}function u2(r){return r instanceof Hr?(function(t){if(t.op==="=="){if(pB(t.value))return{unaryFilter:{field:Vo(t.field),op:"IS_NAN"}};if(gB(t.value))return{unaryFilter:{field:Vo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(pB(t.value))return{unaryFilter:{field:Vo(t.field),op:"IS_NOT_NAN"}};if(gB(t.value))return{unaryFilter:{field:Vo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vo(t.field),op:CF(t.op),value:t.value}}})(r):r instanceof ia?(function(t){const s=t.getFilters().map((A=>u2(A)));return s.length===1?s[0]:{compositeFilter:{op:EF(t.op),filters:s}}})(r):Ye(54877,{filter:r})}function NF(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function h2(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}function f2(r){return!!r&&typeof r._toProto=="function"&&r._protoValueType==="ProtoValue"}class _i{constructor(e,t,s,A,l=We.min(),d=We.min(),u=is.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=A,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=u,this.expectedCount=f}withSequenceNumber(e){return new _i(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class SF{constructor(e){this.yt=e}}function jF(r){const e=vF({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?ix(e,e.limit,"L"):e}class _F{constructor(){this.Sn=new TF}addToCollectionParentIndex(e,t){return this.Sn.add(t),be.resolve()}getCollectionParents(e,t){return be.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return be.resolve()}deleteFieldIndex(e,t){return be.resolve()}deleteAllFieldIndexes(e){return be.resolve()}createTargetIndexes(e,t){return be.resolve()}getDocumentsMatchingTarget(e,t){return be.resolve(null)}getIndexType(e,t){return be.resolve(0)}getFieldIndexes(e,t){return be.resolve([])}getNextCollectionGroupToUpdate(e){return be.resolve(null)}getMinOffset(e,t){return be.resolve(Pi.min())}getMinOffsetFromCollectionGroup(e,t){return be.resolve(Pi.min())}updateCollectionGroup(e,t,s){return be.resolve()}updateIndexEntries(e,t){return be.resolve()}}class TF{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),A=this.index[t]||new Pr(ir.comparator),l=!A.has(s);return this.index[t]=A.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),A=this.index[t];return A&&A.has(s)}getEntries(e){return(this.index[e]||new Pr(ir.comparator)).toArray()}}const UB={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},m2=41943040;class Is{static withCacheSize(e){return new Is(e,Is.DEFAULT_COLLECTION_PERCENTILE,Is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}Is.DEFAULT_COLLECTION_PERCENTILE=10,Is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Is.DEFAULT=new Is(m2,Is.DEFAULT_COLLECTION_PERCENTILE,Is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Is.DISABLED=new Is(-1,0,0);class ol{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new ol(0)}static ar(){return new ol(-1)}}const QB="LruGarbageCollector",UF=1048576;function FB([r,e],[t,s]){const A=pt(r,t);return A===0?pt(e,s):A}class QF{constructor(e){this.Pr=e,this.buffer=new Pr(FB),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();FB(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class FF{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Ue(QB,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){gl(t)?Ue(QB,"Ignoring IndexedDB error during garbage collection: ",t):await ml(t)}await this.Ar(3e5)}))}}class IF{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return be.resolve(Nf.ce);const s=new QF(t);return this.Vr.forEachTarget(e,(A=>s.Er(A.sequenceNumber))).next((()=>this.Vr.mr(e,(A=>s.Er(A))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ue("LruGarbageCollector","Garbage collection skipped; disabled"),be.resolve(UB)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),UB):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let s,A,l,d,u,f,g;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(Ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),A=this.params.maximumSequenceNumbersToCollect):A=y,d=Date.now(),this.nthSequenceNumber(e,A)))).next((y=>(s=y,u=Date.now(),this.removeTargets(e,s,t)))).next((y=>(l=y,f=Date.now(),this.removeOrphanedDocuments(e,s)))).next((y=>(g=Date.now(),Oo()<=gt.DEBUG&&Ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-x}ms
	Determined least recently used ${A} in `+(u-d)+`ms
	Removed ${l} targets in `+(f-u)+`ms
	Removed ${y} documents in `+(g-f)+`ms
Total Duration: ${g-x}ms`),be.resolve({didRun:!0,sequenceNumbersCollected:A,targetsRemoved:l,documentsRemoved:y}))))}}function DF(r,e){return new IF(r,e)}class kF{constructor(){this.changes=new VA((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,hs.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?be.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class RF{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class MF{constructor(e,t,s,A){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=A}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((A=>(s=A,this.remoteDocumentCache.getEntry(e,t)))).next((A=>(s!==null&&Mc(s.mutation,A,jn.empty(),Yt.now()),A)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,xt()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=xt()){const A=SA();return this.populateOverlays(e,A,t).next((()=>this.computeViews(e,t,A,s).next((l=>{let d=vc();return l.forEach(((u,f)=>{d=d.insert(u,f.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const s=SA();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,xt())))}populateOverlays(e,t,s){const A=[];return s.forEach((l=>{t.has(l)||A.push(l)})),this.documentOverlayCache.getOverlays(e,A).next((l=>{l.forEach(((d,u)=>{t.set(d,u)}))}))}computeViews(e,t,s,A){let l=Ha();const d=Rc(),u=(function(){return Rc()})();return t.forEach(((f,g)=>{const x=s.get(g.key);A.has(g.key)&&(x===void 0||x.mutation instanceof zA)?l=l.insert(g.key,g):x!==void 0?(d.set(g.key,x.mutation.getFieldMask()),Mc(x.mutation,g,x.mutation.getFieldMask(),Yt.now())):d.set(g.key,jn.empty())})),this.recalculateAndSaveOverlays(e,l).next((f=>(f.forEach(((g,x)=>d.set(g,x))),t.forEach(((g,x)=>u.set(g,new RF(x,d.get(g)??null)))),u)))}recalculateAndSaveOverlays(e,t){const s=Rc();let A=new or(((d,u)=>d-u)),l=xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const u of d)u.keys().forEach((f=>{const g=t.get(f);if(g===null)return;let x=s.get(f)||jn.empty();x=u.applyToLocalView(g,x),s.set(f,x);const y=(A.get(u.batchId)||xt()).add(f);A=A.insert(u.batchId,y)}))})).next((()=>{const d=[],u=A.getReverseIterator();for(;u.hasNext();){const f=u.getNext(),g=f.key,x=f.value,y=XE();x.forEach((v=>{if(!l.has(v)){const S=r2(t.get(v),s.get(v));S!==null&&y.set(v,S),l=l.add(v)}})),d.push(this.documentOverlayCache.saveOverlays(e,g,y))}return be.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,A){return LQ(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):HQ(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,A):this.getDocumentsMatchingCollectionQuery(e,t,s,A)}getNextDocuments(e,t,s,A){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,A).next((l=>{const d=A-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,A-l.size):be.resolve(SA());let u=$c,f=l;return d.next((g=>be.forEach(g,((x,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),l.get(x)?be.resolve():this.remoteDocumentCache.getEntry(e,x).next((v=>{f=f.insert(x,v)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,f,g,xt()))).next((x=>({batchId:u,changes:$E(x)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ge(t)).next((s=>{let A=vc();return s.isFoundDocument()&&(A=A.insert(s.key,s)),A}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,A){const l=t.collectionGroup;let d=vc();return this.indexManager.getCollectionParents(e,l).next((u=>be.forEach(u,(f=>{const g=(function(y,v){return new _f(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,f.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,s,A).next((x=>{x.forEach(((y,v)=>{d=d.insert(y,v)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,s,A){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((d=>(l=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,A)))).next((d=>{l.forEach(((f,g)=>{const x=g.getKey();d.get(x)===null&&(d=d.insert(x,hs.newInvalidDocument(x)))}));let u=vc();return d.forEach(((f,g)=>{const x=l.get(f);x!==void 0&&Mc(x.mutation,g,jn.empty(),Yt.now()),Uf(t,g)&&(u=u.insert(f,g))})),u}))}}class LF{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return be.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(A){return{id:A.id,version:A.version,createTime:ra(A.createTime)}})(t)),be.resolve()}getNamedQuery(e,t){return be.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(A){return{name:A.name,query:jF(A.bundledQuery),readTime:ra(A.readTime)}})(t)),be.resolve()}}class HF{constructor(){this.overlays=new or(Ge.comparator),this.Lr=new Map}getOverlay(e,t){return be.resolve(this.overlays.get(t))}getOverlays(e,t){const s=SA();return be.forEach(t,(A=>this.getOverlay(e,A).next((l=>{l!==null&&s.set(A,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((A,l)=>{this.bt(e,t,l)})),be.resolve()}removeOverlaysForBatchId(e,t,s){const A=this.Lr.get(s);return A!==void 0&&(A.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(s)),be.resolve()}getOverlaysForCollection(e,t,s){const A=SA(),l=t.length+1,d=new Ge(t.child("")),u=this.overlays.getIteratorFrom(d);for(;u.hasNext();){const f=u.getNext().value,g=f.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&f.largestBatchId>s&&A.set(f.getKey(),f)}return be.resolve(A)}getOverlaysForCollectionGroup(e,t,s,A){let l=new or(((g,x)=>g-x));const d=this.overlays.getIterator();for(;d.hasNext();){const g=d.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>s){let x=l.get(g.largestBatchId);x===null&&(x=SA(),l=l.insert(g.largestBatchId,x)),x.set(g.getKey(),g)}}const u=SA(),f=l.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((g,x)=>u.set(g,x))),!(u.size()>=A)););return be.resolve(u)}bt(e,t,s){const A=this.overlays.get(s.key);if(A!==null){const d=this.Lr.get(A.largestBatchId).delete(s.key);this.Lr.set(A.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new nF(t,s));let l=this.Lr.get(t);l===void 0&&(l=xt(),this.Lr.set(t,l)),this.Lr.set(t,l.add(s.key))}}class OF{constructor(){this.sessionToken=is.EMPTY_BYTE_STRING}getSessionToken(e){return be.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,be.resolve()}}class N0{constructor(){this.kr=new Pr(Yr.Kr),this.qr=new Pr(Yr.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const s=new Yr(e,t);this.kr=this.kr.add(s),this.qr=this.qr.add(s)}$r(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Wr(new Yr(e,t))}Qr(e,t){e.forEach((s=>this.removeReference(s,t)))}Gr(e){const t=new Ge(new ir([])),s=new Yr(t,e),A=new Yr(t,e+1),l=[];return this.qr.forEachInRange([s,A],(d=>{this.Wr(d),l.push(d.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Ge(new ir([])),s=new Yr(t,e),A=new Yr(t,e+1);let l=xt();return this.qr.forEachInRange([s,A],(d=>{l=l.add(d.key)})),l}containsKey(e){const t=new Yr(e,0),s=this.kr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Yr{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Ge.comparator(e.key,t.key)||pt(e.Hr,t.Hr)}static Ur(e,t){return pt(e.Hr,t.Hr)||Ge.comparator(e.key,t.key)}}class PF{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Pr(Yr.Kr)}checkEmpty(e){return be.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,A){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new sF(l,t,s,A);this.mutationQueue.push(d);for(const u of A)this.Jr=this.Jr.add(new Yr(u.key,l)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return be.resolve(d)}lookupMutationBatch(e,t){return be.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,A=this.Xr(s),l=A<0?0:A;return be.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return be.resolve(this.mutationQueue.length===0?m0:this.Yn-1)}getAllMutationBatches(e){return be.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Yr(t,0),A=new Yr(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([s,A],(d=>{const u=this.Zr(d.Hr);l.push(u)})),be.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Pr(pt);return t.forEach((A=>{const l=new Yr(A,0),d=new Yr(A,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,d],(u=>{s=s.add(u.Hr)}))})),be.resolve(this.Yr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,A=s.length+1;let l=s;Ge.isDocumentKey(l)||(l=l.child(""));const d=new Yr(new Ge(l),0);let u=new Pr(pt);return this.Jr.forEachWhile((f=>{const g=f.key.path;return!!s.isPrefixOf(g)&&(g.length===A&&(u=u.add(f.Hr)),!0)}),d),be.resolve(this.Yr(u))}Yr(e){const t=[];return e.forEach((s=>{const A=this.Zr(s);A!==null&&t.push(A)})),t}removeMutationBatch(e,t){Tt(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Jr;return be.forEach(t.mutations,(A=>{const l=new Yr(A.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,A.key)})).next((()=>{this.Jr=s}))}nr(e){}containsKey(e,t){const s=new Yr(t,0),A=this.Jr.firstAfterOrEqual(s);return be.resolve(t.isEqual(A&&A.key))}performConsistencyCheck(e){return this.mutationQueue.length,be.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class VF{constructor(e){this.ti=e,this.docs=(function(){return new or(Ge.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,A=this.docs.get(s),l=A?A.size:0,d=this.ti(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return be.resolve(s?s.document.mutableCopy():hs.newInvalidDocument(t))}getEntries(e,t){let s=Ha();return t.forEach((A=>{const l=this.docs.get(A);s=s.insert(A,l?l.document.mutableCopy():hs.newInvalidDocument(A))})),be.resolve(s)}getDocumentsMatchingQuery(e,t,s,A){let l=Ha();const d=t.path,u=new Ge(d.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(u);for(;f.hasNext();){const{key:g,value:{document:x}}=f.getNext();if(!d.isPrefixOf(g.path))break;g.path.length>d.length+1||mQ(fQ(x),s)<=0||(A.has(x.key)||Uf(t,x))&&(l=l.insert(x.key,x.mutableCopy()))}return be.resolve(l)}getAllFromCollectionGroup(e,t,s,A){Ye(9500)}ni(e,t){return be.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new zF(this)}getSize(e){return be.resolve(this.size)}}class zF extends kF{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,A)=>{A.isValidDocument()?t.push(this.Mr.addEntry(e,A)):this.Mr.removeEntry(s)})),be.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class KF{constructor(e){this.persistence=e,this.ri=new VA((t=>x0(t)),y0),this.lastRemoteSnapshotVersion=We.min(),this.highestTargetId=0,this.ii=0,this.si=new N0,this.targetCount=0,this.oi=ol._r()}forEachTarget(e,t){return this.ri.forEach(((s,A)=>t(A))),be.resolve()}getLastRemoteSnapshotVersion(e){return be.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return be.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),be.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.ii&&(this.ii=t),be.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new ol(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,be.resolve()}updateTargetData(e,t){return this.lr(t),be.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,be.resolve()}removeTargets(e,t,s){let A=0;const l=[];return this.ri.forEach(((d,u)=>{u.sequenceNumber<=t&&s.get(u.targetId)===null&&(this.ri.delete(d),l.push(this.removeMatchingKeysForTargetId(e,u.targetId)),A++)})),be.waitFor(l).next((()=>A))}getTargetCount(e){return be.resolve(this.targetCount)}getTargetData(e,t){const s=this.ri.get(t)||null;return be.resolve(s)}addMatchingKeys(e,t,s){return this.si.$r(t,s),be.resolve()}removeMatchingKeys(e,t,s){this.si.Qr(t,s);const A=this.persistence.referenceDelegate,l=[];return A&&t.forEach((d=>{l.push(A.markPotentiallyOrphaned(e,d))})),be.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),be.resolve()}getMatchingKeysForTargetId(e,t){const s=this.si.jr(t);return be.resolve(s)}containsKey(e,t){return be.resolve(this.si.containsKey(t))}}class g2{constructor(e,t){this._i={},this.overlays={},this.ai=new Nf(0),this.ui=!1,this.ui=!0,this.ci=new OF,this.referenceDelegate=e(this),this.li=new KF(this),this.indexManager=new _F,this.remoteDocumentCache=(function(A){return new VF(A)})((s=>this.referenceDelegate.hi(s))),this.serializer=new SF(t),this.Pi=new LF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new HF,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this._i[e.toKey()];return s||(s=new PF(t,this.referenceDelegate),this._i[e.toKey()]=s),s}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,s){Ue("MemoryPersistence","Starting transaction:",e);const A=new GF(this.ai.next());return this.referenceDelegate.Ti(),s(A).next((l=>this.referenceDelegate.Ii(A).next((()=>l)))).toPromise().then((l=>(A.raiseOnCommittedEvent(),l)))}Ei(e,t){return be.or(Object.values(this._i).map((s=>()=>s.containsKey(e,t))))}}class GF extends pQ{constructor(e){super(),this.currentSequenceNumber=e}}class S0{constructor(e){this.persistence=e,this.Ri=new N0,this.Ai=null}static Vi(e){return new S0(e)}get di(){if(this.Ai)return this.Ai;throw Ye(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.di.delete(s.toString()),be.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.di.add(s.toString()),be.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),be.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((A=>this.di.add(A.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((A=>{A.forEach((l=>this.di.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return be.forEach(this.di,(s=>{const A=Ge.fromPath(s);return this.mi(e,A).next((l=>{l||t.removeEntry(A,We.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((s=>{s?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return be.or([()=>be.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class tf{constructor(e,t){this.persistence=e,this.fi=new VA((s=>bQ(s.path)),((s,A)=>s.isEqual(A))),this.garbageCollector=DF(this,t)}static Vi(e,t){return new tf(e,t)}Ti(){}Ii(e){return be.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((A=>s+A))))}pr(e){let t=0;return this.mr(e,(s=>{t++})).next((()=>t))}mr(e,t){return be.forEach(this.fi,((s,A)=>this.wr(e,s,A).next((l=>l?be.resolve():t(A)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const A=this.persistence.getRemoteDocumentCache(),l=A.newChangeBuffer();return A.ni(e,(d=>this.wr(e,d,t).next((u=>{u||(s++,l.removeEntry(d,We.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),be.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),be.resolve()}removeReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),be.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),be.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Th(e.data.value)),t}wr(e,t,s){return be.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const A=this.fi.get(t);return be.resolve(A!==void 0&&A>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class j0{constructor(e,t,s,A){this.targetId=e,this.fromCache=t,this.Ts=s,this.Is=A}static Es(e,t){let s=xt(),A=xt();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:A=A.add(l.doc.key)}return new j0(e,t.fromCache,s,A)}}class qF{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class YF{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return I_()?8:xQ(ms())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,A){const l={result:null};return this.gs(e,t).next((d=>{l.result=d})).next((()=>{if(!l.result)return this.ps(e,t,A,s).next((d=>{l.result=d}))})).next((()=>{if(l.result)return;const d=new qF;return this.ys(e,t,d).next((u=>{if(l.result=u,this.As)return this.ws(e,t,d,u.size)}))})).next((()=>l.result))}ws(e,t,s,A){return s.documentReadCount<this.Vs?(Oo()<=gt.DEBUG&&Ue("QueryEngine","SDK will not create cache indexes for query:",Po(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),be.resolve()):(Oo()<=gt.DEBUG&&Ue("QueryEngine","Query:",Po(t),"scans",s.documentReadCount,"local documents and returns",A,"documents as results."),s.documentReadCount>this.ds*A?(Oo()<=gt.DEBUG&&Ue("QueryEngine","The SDK decides to create cache indexes for query:",Po(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ea(t))):be.resolve())}gs(e,t){if(vB(t))return be.resolve(null);let s=ea(t);return this.indexManager.getIndexType(e,s).next((A=>A===0?null:(t.limit!==null&&A===1&&(t=ix(t,null,"F"),s=ea(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const d=xt(...l);return this.fs.getDocuments(e,d).next((u=>this.indexManager.getMinOffset(e,s).next((f=>{const g=this.bs(t,u);return this.Ss(t,g,d,f.readTime)?this.gs(e,ix(t,null,"F")):this.Ds(e,g,t,f)}))))})))))}ps(e,t,s,A){return vB(t)||A.isEqual(We.min())?be.resolve(null):this.fs.getDocuments(e,s).next((l=>{const d=this.bs(t,l);return this.Ss(t,d,s,A)?be.resolve(null):(Oo()<=gt.DEBUG&&Ue("QueryEngine","Re-using previous result from %s to execute query: %s",A.toString(),Po(t)),this.Ds(e,d,t,hQ(A,$c)).next((u=>u)))}))}bs(e,t){let s=new Pr(qE(e));return t.forEach(((A,l)=>{Uf(e,l)&&(s=s.add(l))})),s}Ss(e,t,s,A){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(A)>0)}ys(e,t,s){return Oo()<=gt.DEBUG&&Ue("QueryEngine","Using full collection scan to execute query:",Po(t)),this.fs.getDocumentsMatchingQuery(e,t,Pi.min(),s)}Ds(e,t,s,A){return this.fs.getDocumentsMatchingQuery(e,s,A).next((l=>(t.forEach((d=>{l=l.insert(d.key,d)})),l)))}}const _0="LocalStore",$F=3e8;class XF{constructor(e,t,s,A){this.persistence=e,this.Cs=t,this.serializer=A,this.vs=new or(pt),this.Fs=new VA((l=>x0(l)),y0),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(s)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new MF(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function JF(r,e,t,s){return new XF(r,e,t,s)}async function p2(r,e){const t=et(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let A;return t.mutationQueue.getAllMutationBatches(s).next((l=>(A=l,t.Os(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const d=[],u=[];let f=xt();for(const g of A){d.push(g.batchId);for(const x of g.mutations)f=f.add(x.key)}for(const g of l){u.push(g.batchId);for(const x of g.mutations)f=f.add(x.key)}return t.localDocuments.getDocuments(s,f).next((g=>({Ns:g,removedBatchIds:d,addedBatchIds:u})))}))}))}function WF(r,e){const t=et(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const A=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(u,f,g,x){const y=g.batch,v=y.keys();let S=be.resolve();return v.forEach((R=>{S=S.next((()=>x.getEntry(f,R))).next((j=>{const V=g.docVersions.get(R);Tt(V!==null,48541),j.version.compareTo(V)<0&&(y.applyToRemoteDocument(j,g),j.isValidDocument()&&(j.setReadTime(g.commitVersion),x.addEntry(j)))}))})),S.next((()=>u.mutationQueue.removeMutationBatch(f,y)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,A,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(u){let f=xt();for(let g=0;g<u.mutationResults.length;++g)u.mutationResults[g].transformResults.length>0&&(f=f.add(u.batch.mutations[g].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(s,A)))}))}function x2(r){const e=et(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function ZF(r,e){const t=et(r),s=e.snapshotVersion;let A=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const d=t.xs.newChangeBuffer({trackRemovals:!0});A=t.vs;const u=[];e.targetChanges.forEach(((x,y)=>{const v=A.get(y);if(!v)return;u.push(t.li.removeMatchingKeys(l,x.removedDocuments,y).next((()=>t.li.addMatchingKeys(l,x.addedDocuments,y))));let S=v.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(y)!==null?S=S.withResumeToken(is.EMPTY_BYTE_STRING,We.min()).withLastLimboFreeSnapshotVersion(We.min()):x.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(x.resumeToken,s)),A=A.insert(y,S),(function(j,V,P){return j.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=$F?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0})(v,S,x)&&u.push(t.li.updateTargetData(l,S))}));let f=Ha(),g=xt();if(e.documentUpdates.forEach((x=>{e.resolvedLimboDocuments.has(x)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(l,x))})),u.push(eI(l,d,e.documentUpdates).next((x=>{f=x.Bs,g=x.Ls}))),!s.isEqual(We.min())){const x=t.li.getLastRemoteSnapshotVersion(l).next((y=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,s)));u.push(x)}return be.waitFor(u).next((()=>d.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,f,g))).next((()=>f))})).then((l=>(t.vs=A,l)))}function eI(r,e,t){let s=xt(),A=xt();return t.forEach((l=>s=s.add(l))),e.getEntries(r,s).next((l=>{let d=Ha();return t.forEach(((u,f)=>{const g=l.get(u);f.isFoundDocument()!==g.isFoundDocument()&&(A=A.add(u)),f.isNoDocument()&&f.version.isEqual(We.min())?(e.removeEntry(u,f.readTime),d=d.insert(u,f)):!g.isValidDocument()||f.version.compareTo(g.version)>0||f.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(f),d=d.insert(u,f)):Ue(_0,"Ignoring outdated watch update for ",u,". Current version:",g.version," Watch version:",f.version)})),{Bs:d,Ls:A}}))}function tI(r,e){const t=et(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=m0),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function rI(r,e){const t=et(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let A;return t.li.getTargetData(s,e).next((l=>l?(A=l,be.resolve(A)):t.li.allocateTargetId(s).next((d=>(A=new _i(e,d,"TargetPurposeListen",s.currentSequenceNumber),t.li.addTargetData(s,A).next((()=>A)))))))})).then((s=>{const A=t.vs.get(s.targetId);return(A===null||s.snapshotVersion.compareTo(A.snapshotVersion)>0)&&(t.vs=t.vs.insert(s.targetId,s),t.Fs.set(e,s.targetId)),s}))}async function dx(r,e,t){const s=et(r),A=s.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(d=>s.persistence.referenceDelegate.removeTarget(d,A)))}catch(d){if(!gl(d))throw d;Ue(_0,`Failed to update sequence numbers for target ${e}: ${d}`)}s.vs=s.vs.remove(e),s.Fs.delete(A.target)}function IB(r,e,t){const s=et(r);let A=We.min(),l=xt();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(f,g,x){const y=et(f),v=y.Fs.get(x);return v!==void 0?be.resolve(y.vs.get(v)):y.li.getTargetData(g,x)})(s,d,ea(e)).next((u=>{if(u)return A=u.lastLimboFreeSnapshotVersion,s.li.getMatchingKeysForTargetId(d,u.targetId).next((f=>{l=f}))})).next((()=>s.Cs.getDocumentsMatchingQuery(d,e,t?A:We.min(),t?l:xt()))).next((u=>(sI(s,PQ(e),u),{documents:u,ks:l})))))}function sI(r,e,t){let s=r.Ms.get(e)||We.min();t.forEach(((A,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),r.Ms.set(e,s)}class DB{constructor(){this.activeTargetIds=YQ()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nI{constructor(){this.vo=new DB,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,s){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new DB,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class aI{Mo(e){}shutdown(){}}const kB="ConnectivityMonitor";class RB{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Ue(kB,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Ue(kB,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Yu=null;function ux(){return Yu===null?Yu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Yu++,"0x"+Yu.toString(16)}const ap="RestConnection",iI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class AI{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),A=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${s}/databases/${A}`,this.$o=this.databaseId.database===Yh?`project_id=${s}`:`project_id=${s}&database_id=${A}`}Wo(e,t,s,A,l){const d=ux(),u=this.Qo(e,t.toUriEncodedString());Ue(ap,`Sending RPC '${e}' ${d}:`,u,s);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(f,A,l);const{host:g}=new URL(u),x=dl(g);return this.zo(e,u,f,s,x).then((y=>(Ue(ap,`Received RPC '${e}' ${d}: `,y),y)),(y=>{throw LA(ap,`RPC '${e}' ${d} failed with error: `,y,"url: ",u,"request:",s),y}))}jo(e,t,s,A,l,d){return this.Wo(e,t,s,A,l)}Go(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+fl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((A,l)=>e[l]=A)),s&&s.headers.forEach(((A,l)=>e[l]=A))}Qo(e,t){const s=iI[e];let A=`${this.qo}/v1/${t}:${s}`;return this.databaseInfo.apiKey&&(A=`${A}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),A}terminate(){}}class oI{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const ls="WebChannelConnection",mc=(r,e,t)=>{r.listen(e,(s=>{try{t(s)}catch(A){setTimeout((()=>{throw A}),0)}}))};class Wo extends AI{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Wo.c_){const e=EE();mc(e,CE.STAT_EVENT,(t=>{t.stat===ex.PROXY?Ue(ls,"STAT_EVENT: detected buffering proxy"):t.stat===ex.NOPROXY&&Ue(ls,"STAT_EVENT: detected no buffering proxy")})),Wo.c_=!0}}zo(e,t,s,A,l){const d=ux();return new Promise(((u,f)=>{const g=new wE;g.setWithCredentials(!0),g.listenOnce(BE.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case _h.NO_ERROR:const y=g.getResponseJson();Ue(ls,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(y)),u(y);break;case _h.TIMEOUT:Ue(ls,`RPC '${e}' ${d} timed out`),f(new He(we.DEADLINE_EXCEEDED,"Request time out"));break;case _h.HTTP_ERROR:const v=g.getStatus();if(Ue(ls,`RPC '${e}' ${d} failed with status:`,v,"response text:",g.getResponseText()),v>0){let S=g.getResponseJson();Array.isArray(S)&&(S=S[0]);const R=S?.error;if(R&&R.status&&R.message){const j=(function(P){const G=P.toLowerCase().replace(/_/g,"-");return Object.values(we).indexOf(G)>=0?G:we.UNKNOWN})(R.status);f(new He(j,R.message))}else f(new He(we.UNKNOWN,"Server responded with status "+g.getStatus()))}else f(new He(we.UNAVAILABLE,"Connection failed."));break;default:Ye(9055,{l_:e,streamId:d,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{Ue(ls,`RPC '${e}' ${d} completed.`)}}));const x=JSON.stringify(A);Ue(ls,`RPC '${e}' ${d} sending request:`,A),g.send(t,"POST",x,s,15)}))}T_(e,t,s){const A=ux(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=this.createWebChannelTransport(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Go(u.initMessageHeaders,t,s),u.encodeInitMessageHeaders=!0;const g=l.join("");Ue(ls,`Creating RPC '${e}' stream ${A}: ${g}`,u);const x=d.createWebChannel(g,u);this.I_(x);let y=!1,v=!1;const S=new oI({Ho:R=>{v?Ue(ls,`Not sending because RPC '${e}' stream ${A} is closed:`,R):(y||(Ue(ls,`Opening RPC '${e}' stream ${A} transport.`),x.open(),y=!0),Ue(ls,`RPC '${e}' stream ${A} sending:`,R),x.send(R))},Jo:()=>x.close()});return mc(x,bc.EventType.OPEN,(()=>{v||(Ue(ls,`RPC '${e}' stream ${A} transport opened.`),S.i_())})),mc(x,bc.EventType.CLOSE,(()=>{v||(v=!0,Ue(ls,`RPC '${e}' stream ${A} transport closed`),S.o_(),this.E_(x))})),mc(x,bc.EventType.ERROR,(R=>{v||(v=!0,LA(ls,`RPC '${e}' stream ${A} transport errored. Name:`,R.name,"Message:",R.message),S.o_(new He(we.UNAVAILABLE,"The operation could not be completed")))})),mc(x,bc.EventType.MESSAGE,(R=>{if(!v){const j=R.data[0];Tt(!!j,16349);const V=j,P=V?.error||V[0]?.error;if(P){Ue(ls,`RPC '${e}' stream ${A} received error:`,P);const G=P.status;let q=(function(z){const E=Qr[z];if(E!==void 0)return n2(E)})(G),W=P.message;G==="NOT_FOUND"&&W.includes("database")&&W.includes("does not exist")&&W.includes(this.databaseId.database)&&LA(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),q===void 0&&(q=we.INTERNAL,W="Unknown error status: "+G+" with message "+P.message),v=!0,S.o_(new He(q,W)),x.close()}else Ue(ls,`RPC '${e}' stream ${A} received:`,j),S.__(j)}})),Wo.u_(),setTimeout((()=>{S.s_()}),0),S}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,s){super.Go(e,t,s),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return NE()}}function lI(r){return new Wo(r)}function ip(){return typeof document<"u"?document:null}function Df(r){return new hF(r,!0)}Wo.c_=!1;class y2{constructor(e,t,s=1e3,A=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=s,this.A_=A,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),s=Math.max(0,Date.now()-this.f_),A=Math.max(0,t-s);A>0&&Ue("ExponentialBackoff",`Backing off for ${A} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,A,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const MB="PersistentStream";class b2{constructor(e,t,s,A,l,d,u,f){this.Ci=e,this.b_=s,this.S_=A,this.connection=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=u,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new y2(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===we.RESOURCE_EXHAUSTED?(La(t.toString()),La("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===we.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,A])=>{this.D_===t&&this.G_(s,A)}),(s=>{e((()=>{const A=new He(we.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(A)}))}))}G_(e,t){const s=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.Yo((()=>{s((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((A=>{s((()=>this.z_(A)))})),this.stream.onMessage((A=>{s((()=>++this.F_==1?this.H_(A):this.onNext(A)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ue(MB,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(Ue(MB,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class cI extends b2{constructor(e,t,s,A,l,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,A,d),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=gF(this.serializer,e),s=(function(l){if(!("targetChange"in l))return We.min();const d=l.targetChange;return d.targetIds&&d.targetIds.length?We.min():d.readTime?ra(d.readTime):We.min()})(e);return this.listener.J_(t,s)}Z_(e){const t={};t.database=cx(this.serializer),t.addTarget=(function(l,d){let u;const f=d.target;if(u=ax(f)?{documents:yF(l,f)}:{query:bF(l,f).ft},u.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){u.resumeToken=A2(l,d.resumeToken);const g=Ax(l,d.expectedCount);g!==null&&(u.expectedCount=g)}else if(d.snapshotVersion.compareTo(We.min())>0){u.readTime=ef(l,d.snapshotVersion.toTimestamp());const g=Ax(l,d.expectedCount);g!==null&&(u.expectedCount=g)}return u})(this.serializer,e);const s=wF(this.serializer,e);s&&(t.labels=s),this.K_(t)}X_(e){const t={};t.database=cx(this.serializer),t.removeTarget=e,this.K_(t)}}class dI extends b2{constructor(e,t,s,A,l,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,A,d),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Tt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Tt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Tt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=xF(e.writeResults,e.commitTime),s=ra(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=cx(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>pF(this.serializer,s)))};this.K_(t)}}class uI{}class hI extends uI{constructor(e,t,s,A){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=A,this.ia=!1}sa(){if(this.ia)throw new He(we.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,A){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,d])=>this.connection.Wo(e,ox(t,s),A,l,d))).catch((l=>{throw l.name==="FirebaseError"?(l.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new He(we.UNKNOWN,l.toString())}))}jo(e,t,s,A,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,u])=>this.connection.jo(e,ox(t,s),A,d,u,l))).catch((d=>{throw d.name==="FirebaseError"?(d.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new He(we.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function fI(r,e,t,s){return new hI(r,e,t,s)}class mI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(La(t),this.aa=!1):Ue("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const HA="RemoteStore";class gI{constructor(e,t,s,A,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((d=>{s.enqueueAndForget((async()=>{KA(this)&&(Ue(HA,"Restarting streams for network reachability change."),await(async function(f){const g=et(f);g.Ea.add(4),await gd(g),g.Va.set("Unknown"),g.Ea.delete(4),await kf(g)})(this))}))})),this.Va=new mI(s,A)}}async function kf(r){if(KA(r))for(const e of r.Ra)await e(!0)}async function gd(r){for(const e of r.Ra)await e(!1)}function v2(r,e){const t=et(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),F0(t)?Q0(t):pl(t).O_()&&U0(t,e))}function T0(r,e){const t=et(r),s=pl(t);t.Ia.delete(e),s.O_()&&w2(t,e),t.Ia.size===0&&(s.O_()?s.L_():KA(t)&&t.Va.set("Unknown"))}function U0(r,e){if(r.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(We.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}pl(r).Z_(e)}function w2(r,e){r.da.$e(e),pl(r).X_(e)}function Q0(r){r.da=new lF({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),pl(r).start(),r.Va.ua()}function F0(r){return KA(r)&&!pl(r).x_()&&r.Ia.size>0}function KA(r){return et(r).Ea.size===0}function B2(r){r.da=void 0}async function pI(r){r.Va.set("Online")}async function xI(r){r.Ia.forEach(((e,t)=>{U0(r,e)}))}async function yI(r,e){B2(r),F0(r)?(r.Va.ha(e),Q0(r)):r.Va.set("Unknown")}async function bI(r,e,t){if(r.Va.set("Online"),e instanceof i2&&e.state===2&&e.cause)try{await(async function(A,l){const d=l.cause;for(const u of l.targetIds)A.Ia.has(u)&&(await A.remoteSyncer.rejectListen(u,d),A.Ia.delete(u),A.da.removeTarget(u))})(r,e)}catch(s){Ue(HA,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await rf(r,s)}else if(e instanceof Fh?r.da.Xe(e):e instanceof a2?r.da.st(e):r.da.tt(e),!t.isEqual(We.min()))try{const s=await x2(r.localStore);t.compareTo(s)>=0&&await(function(l,d){const u=l.da.Tt(d);return u.targetChanges.forEach(((f,g)=>{if(f.resumeToken.approximateByteSize()>0){const x=l.Ia.get(g);x&&l.Ia.set(g,x.withResumeToken(f.resumeToken,d))}})),u.targetMismatches.forEach(((f,g)=>{const x=l.Ia.get(f);if(!x)return;l.Ia.set(f,x.withResumeToken(is.EMPTY_BYTE_STRING,x.snapshotVersion)),w2(l,f);const y=new _i(x.target,f,g,x.sequenceNumber);U0(l,y)})),l.remoteSyncer.applyRemoteEvent(u)})(r,t)}catch(s){Ue(HA,"Failed to raise snapshot:",s),await rf(r,s)}}async function rf(r,e,t){if(!gl(e))throw e;r.Ea.add(1),await gd(r),r.Va.set("Offline"),t||(t=()=>x2(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{Ue(HA,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await kf(r)}))}function C2(r,e){return e().catch((t=>rf(r,t,e)))}async function Rf(r){const e=et(r),t=Gi(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:m0;for(;vI(e);)try{const A=await tI(e.localStore,s);if(A===null){e.Ta.length===0&&t.L_();break}s=A.batchId,wI(e,A)}catch(A){await rf(e,A)}E2(e)&&N2(e)}function vI(r){return KA(r)&&r.Ta.length<10}function wI(r,e){r.Ta.push(e);const t=Gi(r);t.O_()&&t.Y_&&t.ea(e.mutations)}function E2(r){return KA(r)&&!Gi(r).x_()&&r.Ta.length>0}function N2(r){Gi(r).start()}async function BI(r){Gi(r).ra()}async function CI(r){const e=Gi(r);for(const t of r.Ta)e.ea(t.mutations)}async function EI(r,e,t){const s=r.Ta.shift(),A=B0.from(s,e,t);await C2(r,(()=>r.remoteSyncer.applySuccessfulWrite(A))),await Rf(r)}async function NI(r,e){e&&Gi(r).Y_&&await(async function(s,A){if((function(d){return iF(d)&&d!==we.ABORTED})(A.code)){const l=s.Ta.shift();Gi(s).B_(),await C2(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,A))),await Rf(s)}})(r,e),E2(r)&&N2(r)}async function LB(r,e){const t=et(r);t.asyncQueue.verifyOperationInProgress(),Ue(HA,"RemoteStore received new credentials");const s=KA(t);t.Ea.add(3),await gd(t),s&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await kf(t)}async function SI(r,e){const t=et(r);e?(t.Ea.delete(2),await kf(t)):e||(t.Ea.add(2),await gd(t),t.Va.set("Unknown"))}function pl(r){return r.ma||(r.ma=(function(t,s,A){const l=et(t);return l.sa(),new cI(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,A)})(r.datastore,r.asyncQueue,{Zo:pI.bind(null,r),Yo:xI.bind(null,r),t_:yI.bind(null,r),J_:bI.bind(null,r)}),r.Ra.push((async e=>{e?(r.ma.B_(),F0(r)?Q0(r):r.Va.set("Unknown")):(await r.ma.stop(),B2(r))}))),r.ma}function Gi(r){return r.fa||(r.fa=(function(t,s,A){const l=et(t);return l.sa(),new dI(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,A)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),Yo:BI.bind(null,r),t_:NI.bind(null,r),ta:CI.bind(null,r),na:EI.bind(null,r)}),r.Ra.push((async e=>{e?(r.fa.B_(),await Rf(r)):(await r.fa.stop(),r.Ta.length>0&&(Ue(HA,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class I0{constructor(e,t,s,A,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=A,this.removalCallback=l,this.deferred=new Mi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,A,l){const d=Date.now()+s,u=new I0(e,t,d,A,l);return u.start(s),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new He(we.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function D0(r,e){if(La("AsyncQueue",`${e}: ${r}`),gl(r))return new He(we.UNAVAILABLE,`${e}: ${r}`);throw r}class Zo{static emptySet(e){return new Zo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ge.comparator(t.key,s.key):(t,s)=>Ge.comparator(t.key,s.key),this.keyedMap=vc(),this.sortedSet=new or(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Zo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const A=t.getNext().key,l=s.getNext().key;if(!A.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Zo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class HB{constructor(){this.ga=new or(Ge.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ye(63341,{Vt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class ll{constructor(e,t,s,A,l,d,u,f,g){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=A,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=u,this.excludesMetadataChanges=f,this.hasCachedResults=g}static fromInitialDocuments(e,t,s,A,l){const d=[];return t.forEach((u=>{d.push({type:0,doc:u})})),new ll(e,t,Zo.emptySet(t),d,s,A,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let A=0;A<t.length;A++)if(t[A].type!==s[A].type||!t[A].doc.isEqual(s[A].doc))return!1;return!0}}class jI{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class _I{constructor(){this.queries=OB(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const A=et(t),l=A.queries;A.queries=OB(),l.forEach(((d,u)=>{for(const f of u.ba)f.onError(s)}))})(this,new He(we.ABORTED,"Firestore shutting down"))}}function OB(){return new VA((r=>GE(r)),Tf)}async function TI(r,e){const t=et(r);let s=3;const A=e.query;let l=t.queries.get(A);l?!l.Sa()&&e.Da()&&(s=2):(l=new jI,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(A,!0);break;case 1:l.wa=await t.onListen(A,!1);break;case 2:await t.onFirstRemoteStoreListen(A)}}catch(d){const u=D0(d,`Initialization of query '${Po(e.query)}' failed`);return void e.onError(u)}t.queries.set(A,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&k0(t)}async function UI(r,e){const t=et(r),s=e.query;let A=3;const l=t.queries.get(s);if(l){const d=l.ba.indexOf(e);d>=0&&(l.ba.splice(d,1),l.ba.length===0?A=e.Da()?0:1:!l.Sa()&&e.Da()&&(A=2))}switch(A){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function QI(r,e){const t=et(r);let s=!1;for(const A of e){const l=A.query,d=t.queries.get(l);if(d){for(const u of d.ba)u.Fa(A)&&(s=!0);d.wa=A}}s&&k0(t)}function FI(r,e,t){const s=et(r),A=s.queries.get(e);if(A)for(const l of A.ba)l.onError(t);s.queries.delete(e)}function k0(r){r.Ca.forEach((e=>{e.next()}))}var hx,PB;(PB=hx||(hx={})).Ma="default",PB.Cache="cache";class II{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const A of e.docChanges)A.type!==3&&s.push(A);e=new ll(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.Ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ll.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==hx.Cache}}class S2{constructor(e){this.key=e}}class j2{constructor(e){this.key=e}}class DI{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=xt(),this.mutatedKeys=xt(),this.eu=qE(e),this.tu=new Zo(this.eu)}get nu(){return this.Za}ru(e,t){const s=t?t.iu:new HB,A=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,d=A,u=!1;const f=this.query.limitType==="F"&&A.size===this.query.limit?A.last():null,g=this.query.limitType==="L"&&A.size===this.query.limit?A.first():null;if(e.inorderTraversal(((x,y)=>{const v=A.get(x),S=Uf(this.query,y)?y:null,R=!!v&&this.mutatedKeys.has(v.key),j=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let V=!1;v&&S?v.data.isEqual(S.data)?R!==j&&(s.track({type:3,doc:S}),V=!0):this.su(v,S)||(s.track({type:2,doc:S}),V=!0,(f&&this.eu(S,f)>0||g&&this.eu(S,g)<0)&&(u=!0)):!v&&S?(s.track({type:0,doc:S}),V=!0):v&&!S&&(s.track({type:1,doc:v}),V=!0,(f||g)&&(u=!0)),V&&(S?(d=d.add(S),l=j?l.add(x):l.delete(x)):(d=d.delete(x),l=l.delete(x)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const x=this.query.limitType==="F"?d.last():d.first();d=d.delete(x.key),l=l.delete(x.key),s.track({type:1,doc:x})}return{tu:d,iu:s,Ss:u,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,A){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((x,y)=>(function(S,R){const j=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ye(20277,{Vt:V})}};return j(S)-j(R)})(x.type,y.type)||this.eu(x.doc,y.doc))),this.ou(s),A=A??!1;const u=t&&!A?this._u():[],f=this.Ya.size===0&&this.current&&!A?1:0,g=f!==this.Xa;return this.Xa=f,d.length!==0||g?{snapshot:new ll(this.query,e.tu,l,d,e.mutatedKeys,f===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new HB,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=xt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Ya=this.Ya.add(s.key))}));const t=[];return e.forEach((s=>{this.Ya.has(s)||t.push(new j2(s))})),this.Ya.forEach((s=>{e.has(s)||t.push(new S2(s))})),t}cu(e){this.Za=e.ks,this.Ya=xt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ll.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const R0="SyncEngine";class kI{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class RI{constructor(e){this.key=e,this.hu=!1}}class MI{constructor(e,t,s,A,l,d){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=A,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new VA((u=>GE(u)),Tf),this.Iu=new Map,this.Eu=new Set,this.Ru=new or(Ge.comparator),this.Au=new Map,this.Vu=new N0,this.du={},this.mu=new Map,this.fu=ol.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function LI(r,e,t=!0){const s=I2(r);let A;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),A=l.view.lu()):A=await _2(s,e,t,!0),A}async function HI(r,e){const t=I2(r);await _2(t,e,!0,!1)}async function _2(r,e,t,s){const A=await rI(r.localStore,ea(e)),l=A.targetId,d=r.sharedClientState.addLocalQueryTarget(l,t);let u;return s&&(u=await OI(r,e,l,d==="current",A.resumeToken)),r.isPrimaryClient&&t&&v2(r.remoteStore,A),u}async function OI(r,e,t,s,A){r.pu=(y,v,S)=>(async function(j,V,P,G){let q=V.view.ru(P);q.Ss&&(q=await IB(j.localStore,V.query,!1).then((({documents:E})=>V.view.ru(E,q))));const W=G&&G.targetChanges.get(V.targetId),te=G&&G.targetMismatches.get(V.targetId)!=null,z=V.view.applyChanges(q,j.isPrimaryClient,W,te);return zB(j,V.targetId,z.au),z.snapshot})(r,y,v,S);const l=await IB(r.localStore,e,!0),d=new DI(e,l.ks),u=d.ru(l.documents),f=md.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",A),g=d.applyChanges(u,r.isPrimaryClient,f);zB(r,t,g.au);const x=new kI(e,t,d);return r.Tu.set(e,x),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),g.snapshot}async function PI(r,e,t){const s=et(r),A=s.Tu.get(e),l=s.Iu.get(A.targetId);if(l.length>1)return s.Iu.set(A.targetId,l.filter((d=>!Tf(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(A.targetId),s.sharedClientState.isActiveQueryTarget(A.targetId)||await dx(s.localStore,A.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(A.targetId),t&&T0(s.remoteStore,A.targetId),fx(s,A.targetId)})).catch(ml)):(fx(s,A.targetId),await dx(s.localStore,A.targetId,!0))}async function VI(r,e){const t=et(r),s=t.Tu.get(e),A=t.Iu.get(s.targetId);t.isPrimaryClient&&A.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),T0(t.remoteStore,s.targetId))}async function zI(r,e,t){const s=JI(r);try{const A=await(function(d,u){const f=et(d),g=Yt.now(),x=u.reduce(((S,R)=>S.add(R.key)),xt());let y,v;return f.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let R=Ha(),j=xt();return f.xs.getEntries(S,x).next((V=>{R=V,R.forEach(((P,G)=>{G.isValidDocument()||(j=j.add(P))}))})).next((()=>f.localDocuments.getOverlayedDocuments(S,R))).next((V=>{y=V;const P=[];for(const G of u){const q=tF(G,y.get(G.key).overlayedDocument);q!=null&&P.push(new zA(G.key,q,LE(q.value.mapValue),ta.exists(!0)))}return f.mutationQueue.addMutationBatch(S,g,P,u)})).next((V=>{v=V;const P=V.applyToLocalDocumentSet(y,j);return f.documentOverlayCache.saveOverlays(S,V.batchId,P)}))})).then((()=>({batchId:v.batchId,changes:$E(y)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(A.batchId),(function(d,u,f){let g=d.du[d.currentUser.toKey()];g||(g=new or(pt)),g=g.insert(u,f),d.du[d.currentUser.toKey()]=g})(s,A.batchId,t),await pd(s,A.changes),await Rf(s.remoteStore)}catch(A){const l=D0(A,"Failed to persist write");t.reject(l)}}async function T2(r,e){const t=et(r);try{const s=await ZF(t.localStore,e);e.targetChanges.forEach(((A,l)=>{const d=t.Au.get(l);d&&(Tt(A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size<=1,22616),A.addedDocuments.size>0?d.hu=!0:A.modifiedDocuments.size>0?Tt(d.hu,14607):A.removedDocuments.size>0&&(Tt(d.hu,42227),d.hu=!1))})),await pd(t,s,e)}catch(s){await ml(s)}}function VB(r,e,t){const s=et(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const A=[];s.Tu.forEach(((l,d)=>{const u=d.view.va(e);u.snapshot&&A.push(u.snapshot)})),(function(d,u){const f=et(d);f.onlineState=u;let g=!1;f.queries.forEach(((x,y)=>{for(const v of y.ba)v.va(u)&&(g=!0)})),g&&k0(f)})(s.eventManager,e),A.length&&s.Pu.J_(A),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function KI(r,e,t){const s=et(r);s.sharedClientState.updateQueryState(e,"rejected",t);const A=s.Au.get(e),l=A&&A.key;if(l){let d=new or(Ge.comparator);d=d.insert(l,hs.newNoDocument(l,We.min()));const u=xt().add(l),f=new If(We.min(),new Map,new or(pt),d,u);await T2(s,f),s.Ru=s.Ru.remove(l),s.Au.delete(e),M0(s)}else await dx(s.localStore,e,!1).then((()=>fx(s,e,t))).catch(ml)}async function GI(r,e){const t=et(r),s=e.batch.batchId;try{const A=await WF(t.localStore,e);Q2(t,s,null),U2(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await pd(t,A)}catch(A){await ml(A)}}async function qI(r,e,t){const s=et(r);try{const A=await(function(d,u){const f=et(d);return f.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let x;return f.mutationQueue.lookupMutationBatch(g,u).next((y=>(Tt(y!==null,37113),x=y.keys(),f.mutationQueue.removeMutationBatch(g,y)))).next((()=>f.mutationQueue.performConsistencyCheck(g))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(g,x,u))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,x))).next((()=>f.localDocuments.getDocuments(g,x)))}))})(s.localStore,e);Q2(s,e,t),U2(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await pd(s,A)}catch(A){await ml(A)}}function U2(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function Q2(r,e,t){const s=et(r);let A=s.du[s.currentUser.toKey()];if(A){const l=A.get(e);l&&(t?l.reject(t):l.resolve(),A=A.remove(e)),s.du[s.currentUser.toKey()]=A}}function fx(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Vu.Gr(e).forEach((s=>{r.Vu.containsKey(s)||F2(r,s)}))}function F2(r,e){r.Eu.delete(e.path.canonicalString());const t=r.Ru.get(e);t!==null&&(T0(r.remoteStore,t),r.Ru=r.Ru.remove(e),r.Au.delete(t),M0(r))}function zB(r,e,t){for(const s of t)s instanceof S2?(r.Vu.addReference(s.key,e),YI(r,s)):s instanceof j2?(Ue(R0,"Document no longer in limbo: "+s.key),r.Vu.removeReference(s.key,e),r.Vu.containsKey(s.key)||F2(r,s.key)):Ye(19791,{wu:s})}function YI(r,e){const t=e.key,s=t.path.canonicalString();r.Ru.get(t)||r.Eu.has(s)||(Ue(R0,"New document in limbo: "+t),r.Eu.add(s),M0(r))}function M0(r){for(;r.Eu.size>0&&r.Ru.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new Ge(ir.fromString(e)),s=r.fu.next();r.Au.set(s,new RI(t)),r.Ru=r.Ru.insert(t,s),v2(r.remoteStore,new _i(ea(b0(t.path)),s,"TargetPurposeLimboResolution",Nf.ce))}}async function pd(r,e,t){const s=et(r),A=[],l=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((u,f)=>{d.push(s.pu(f,e,t).then((g=>{if((g||t)&&s.isPrimaryClient){const x=g?!g.fromCache:t?.targetChanges.get(f.targetId)?.current;s.sharedClientState.updateQueryState(f.targetId,x?"current":"not-current")}if(g){A.push(g);const x=j0.Es(f.targetId,g);l.push(x)}})))})),await Promise.all(d),s.Pu.J_(A),await(async function(f,g){const x=et(f);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>be.forEach(g,(v=>be.forEach(v.Ts,(S=>x.persistence.referenceDelegate.addReference(y,v.targetId,S))).next((()=>be.forEach(v.Is,(S=>x.persistence.referenceDelegate.removeReference(y,v.targetId,S)))))))))}catch(y){if(!gl(y))throw y;Ue(_0,"Failed to update sequence numbers: "+y)}for(const y of g){const v=y.targetId;if(!y.fromCache){const S=x.vs.get(v),R=S.snapshotVersion,j=S.withLastLimboFreeSnapshotVersion(R);x.vs=x.vs.insert(v,j)}}})(s.localStore,l))}async function $I(r,e){const t=et(r);if(!t.currentUser.isEqual(e)){Ue(R0,"User change. New user:",e.toKey());const s=await p2(t.localStore,e);t.currentUser=e,(function(l,d){l.mu.forEach((u=>{u.forEach((f=>{f.reject(new He(we.CANCELLED,d))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await pd(t,s.Ns)}}function XI(r,e){const t=et(r),s=t.Au.get(e);if(s&&s.hu)return xt().add(s.key);{let A=xt();const l=t.Iu.get(e);if(!l)return A;for(const d of l){const u=t.Tu.get(d);A=A.unionWith(u.view.nu)}return A}}function I2(r){const e=et(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=T2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=XI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KI.bind(null,e),e.Pu.J_=QI.bind(null,e.eventManager),e.Pu.yu=FI.bind(null,e.eventManager),e}function JI(r){const e=et(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=GI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qI.bind(null,e),e}class sf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Df(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return JF(this.persistence,new YF,e.initialUser,this.serializer)}Cu(e){return new g2(S0.Vi,this.serializer)}Du(e){return new nI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sf.provider={build:()=>new sf};class WI extends sf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Tt(this.persistence.referenceDelegate instanceof tf,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new FF(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Is.withCacheSize(this.cacheSizeBytes):Is.DEFAULT;return new g2((s=>tf.Vi(s,t)),this.serializer)}}class mx{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>VB(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=$I.bind(null,this.syncEngine),await SI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new _I})()}createDatastore(e){const t=Df(e.databaseInfo.databaseId),s=lI(e.databaseInfo);return fI(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,A,l,d,u){return new gI(s,A,l,d,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>VB(this.syncEngine,t,0)),(function(){return RB.v()?new RB:new aI})())}createSyncEngine(e,t){return(function(A,l,d,u,f,g,x){const y=new MI(A,l,d,u,f,g);return x&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=et(t);Ue(HA,"RemoteStore shutting down."),s.Ea.add(5),await gd(s),s.Aa.shutdown(),s.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}mx.provider={build:()=>new mx};class ZI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):La("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const qi="FirestoreClient";class eD{constructor(e,t,s,A,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this._databaseInfo=A,this.user=ds.UNAUTHENTICATED,this.clientId=h0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async d=>{Ue(qi,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(Ue(qi,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=D0(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Ap(r,e){r.asyncQueue.verifyOperationInProgress(),Ue(qi,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async A=>{s.isEqual(A)||(await p2(e.localStore,A),s=A)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function KB(r,e){r.asyncQueue.verifyOperationInProgress();const t=await tD(r);Ue(qi,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>LB(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,A)=>LB(e.remoteStore,A))),r._onlineComponents=e}async function tD(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Ue(qi,"Using user provided OfflineComponentProvider");try{await Ap(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(A){return A.name==="FirebaseError"?A.code===we.FAILED_PRECONDITION||A.code===we.UNIMPLEMENTED:!(typeof DOMException<"u"&&A instanceof DOMException)||A.code===22||A.code===20||A.code===11})(t))throw t;LA("Error using user provided cache. Falling back to memory cache: "+t),await Ap(r,new sf)}}else Ue(qi,"Using default OfflineComponentProvider"),await Ap(r,new WI(void 0));return r._offlineComponents}async function D2(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Ue(qi,"Using user provided OnlineComponentProvider"),await KB(r,r._uninitializedComponentsProvider._online)):(Ue(qi,"Using default OnlineComponentProvider"),await KB(r,new mx))),r._onlineComponents}function rD(r){return D2(r).then((e=>e.syncEngine))}async function sD(r){const e=await D2(r),t=e.eventManager;return t.onListen=LI.bind(null,e.syncEngine),t.onUnlisten=PI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=HI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=VI.bind(null,e.syncEngine),t}function nD(r,e,t={}){const s=new Mi;return r.asyncQueue.enqueueAndForget((async()=>(function(l,d,u,f,g){const x=new ZI({next:v=>{x.Nu(),d.enqueueAndForget((()=>UI(l,y)));const S=v.docs.has(u);!S&&v.fromCache?g.reject(new He(we.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&v.fromCache&&f&&f.source==="server"?g.reject(new He(we.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(v)},error:v=>g.reject(v)}),y=new II(b0(u.path),x,{includeMetadataChanges:!0,Ka:!0});return TI(l,y)})(await sD(r),r.asyncQueue,e,t,s))),s.promise}function aD(r,e){const t=new Mi;return r.asyncQueue.enqueueAndForget((async()=>zI(await rD(r),e,t))),t.promise}function k2(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const iD="ComponentProvider",GB=new Map;function AD(r,e,t,s,A){return new BQ(r,e,t,A.host,A.ssl,A.experimentalForceLongPolling,A.experimentalAutoDetectLongPolling,k2(A.experimentalLongPollingOptions),A.useFetchStreams,A.isUsingEmulator,s)}const R2="firestore.googleapis.com",qB=!0;class YB{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new He(we.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=R2,this.ssl=qB}else this.host=e.host,this.ssl=e.ssl??qB;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=m2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<UF)throw new He(we.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}uQ("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=k2(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new He(we.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new He(we.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new He(we.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,A){return s.timeoutSeconds===A.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class L0{constructor(e,t,s,A){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=A,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new YB({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new He(we.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new He(we.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new YB(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new tQ;switch(s.type){case"firstParty":return new aQ(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new He(we.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=GB.get(t);s&&(Ue(iD,"Removing Datastore"),GB.delete(t),s.terminate())})(this),Promise.resolve()}}function oD(r,e,t,s={}){r=al(r,L0);const A=dl(e),l=r._getSettings(),d={...l,emulatorOptions:r._getEmulatorOptions()},u=`${e}:${t}`;A&&(R1(`https://${u}`),M1("Firestore",!0)),l.host!==R2&&l.host!==u&&LA("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...l,host:u,ssl:A,emulatorOptions:s};if(!DA(f,d)&&(r._setSettings(f),s.mockUserToken)){let g,x;if(typeof s.mockUserToken=="string")g=s.mockUserToken,x=ds.MOCK_USER;else{g=E_(s.mockUserToken,r._app?.options.projectId);const y=s.mockUserToken.sub||s.mockUserToken.user_id;if(!y)throw new He(we.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new ds(y)}r._authCredentials=new rQ(new jE(g,x))}}class H0{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new H0(this.firestore,e,this._query)}}class $r{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new td(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $r(this.firestore,e,this._key)}toJSON(){return{type:$r._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(hd(t,$r._jsonSchema))return new $r(e,s||null,new Ge(ir.fromString(t.referencePath)))}}$r._jsonSchemaVersion="firestore/documentReference/1.0",$r._jsonSchema={type:Ir("string",$r._jsonSchemaVersion),referencePath:Ir("string")};class td extends H0{constructor(e,t,s){super(e,t,b0(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $r(this.firestore,null,new Ge(e))}withConverter(e){return new td(this.firestore,e,this._path)}}function Qo(r,e,...t){if(r=hn(r),arguments.length===1&&(e=h0.newId()),dQ("doc","path",e),r instanceof L0){const s=ir.fromString(e,...t);return oB(s),new $r(r,null,new Ge(s))}{if(!(r instanceof $r||r instanceof td))throw new He(we.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ir.fromString(e,...t));return oB(s),new $r(r.firestore,r instanceof td?r.converter:null,new Ge(s))}}const $B="AsyncQueue";class XB{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new y2(this,"async_queue_retry"),this._c=()=>{const s=ip();s&&Ue($B,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=ip();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=ip();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Mi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!gl(e))throw e;Ue($B,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,La("INTERNAL UNHANDLED ERROR: ",JB(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const A=I0.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(A),A}uc(){this.nc&&Ye(47125,{Pc:JB(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function JB(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Mf extends L0{constructor(e,t,s,A){super(e,t,s,A),this.type="firestore",this._queue=new XB,this._persistenceKey=A?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new XB(e),this._firestoreClient=void 0,await e}}}function M2(r,e){const t=typeof r=="object"?r:O1(),s=typeof r=="string"?r:Yh,A=e0(t,"firestore").getImmediate({identifier:s});if(!A._initialized){const l=B_("firestore");l&&oD(A,...l)}return A}function L2(r){if(r._terminated)throw new He(we.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||lD(r),r._firestoreClient}function lD(r){const e=r._freezeSettings(),t=AD(r._databaseId,r._app?.options.appId||"",r._persistenceKey,r._app?.options.apiKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new eD(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(A){const l=A?._online.build();return{_offline:A?._offline.build(l),_online:l}})(r._componentsProvider))}class cn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new cn(is.fromBase64String(e))}catch(t){throw new He(we.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new cn(is.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:cn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(hd(e,cn._jsonSchema))return cn.fromBase64String(e.bytes)}}cn._jsonSchemaVersion="firestore/bytes/1.0",cn._jsonSchema={type:Ir("string",cn._jsonSchemaVersion),bytes:Ir("string")};class H2{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new He(we.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ns(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class O2{constructor(e){this._methodName=e}}class sa{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new He(we.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new He(we.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return pt(this._lat,e._lat)||pt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:sa._jsonSchemaVersion}}static fromJSON(e){if(hd(e,sa._jsonSchema))return new sa(e.latitude,e.longitude)}}sa._jsonSchemaVersion="firestore/geoPoint/1.0",sa._jsonSchema={type:Ir("string",sa._jsonSchemaVersion),latitude:Ir("number"),longitude:Ir("number")};class Tn{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,A){if(s.length!==A.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==A[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Tn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(hd(e,Tn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Tn(e.vectorValues);throw new He(we.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Tn._jsonSchemaVersion="firestore/vectorValue/1.0",Tn._jsonSchema={type:Ir("string",Tn._jsonSchemaVersion),vectorValues:Ir("object")};const cD=/^__.*__$/;class dD{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new zA(e,this.data,this.fieldMask,t,this.fieldTransforms):new fd(e,this.data,t,this.fieldTransforms)}}function P2(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ye(40011,{dataSource:r})}}class O0{constructor(e,t,s,A,l,d){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=A,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new O0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePathSegment(e),s}childContextForFieldPath(e){const t=this.path?.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePath(),s}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return nf(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(P2(this.dataSource)&&cD.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class uD{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Df(e)}createContext(e,t,s,A=!1){return new O0({dataSource:e,methodName:t,targetDoc:s,path:ns.emptyPath(),arrayElement:!1,hasConverter:A},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hD(r){const e=r._freezeSettings(),t=Df(r._databaseId);return new uD(r._databaseId,!!e.ignoreUndefinedProperties,t)}function fD(r,e,t,s,A,l={}){const d=r.createContext(l.merge||l.mergeFields?2:0,e,t,A);G2("Data must be an object, but it was:",d,s);const u=z2(s,d);let f,g;if(l.merge)f=new jn(d.fieldMask),g=d.fieldTransforms;else if(l.mergeFields){const x=[];for(const y of l.mergeFields){const v=P0(e,y,t);if(!d.contains(v))throw new He(we.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);pD(x,v)||x.push(v)}f=new jn(x),g=d.fieldTransforms.filter((y=>f.covers(y.field)))}else f=null,g=d.fieldTransforms;return new dD(new ln(u),f,g)}function V2(r,e){if(K2(r=hn(r)))return G2("Unsupported field value:",e,r),z2(r,e);if(r instanceof O2)return(function(s,A){if(!P2(A.dataSource))throw A.createError(`${s._methodName}() can only be used with update() and set()`);if(!A.path)throw A.createError(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(A);l&&A.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(s,A){const l=[];let d=0;for(const u of s){let f=V2(u,A.childContextForArray(d));f==null&&(f={nullValue:"NULL_VALUE"}),l.push(f),d++}return{arrayValue:{values:l}}})(r,e)}return(function(s,A){if((s=hn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return $Q(A.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=Yt.fromDate(s);return{timestampValue:ef(A.serializer,l)}}if(s instanceof Yt){const l=new Yt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ef(A.serializer,l)}}if(s instanceof sa)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof cn)return{bytesValue:A2(A.serializer,s._byteString)};if(s instanceof $r){const l=A.databaseId,d=s.firestore._databaseId;if(!d.isEqual(l))throw A.createError(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:E0(s.firestore._databaseId||A.databaseId,s._key.path)}}if(s instanceof Tn)return(function(d,u){const f=d instanceof Tn?d.toArray():d;return{mapValue:{fields:{[RE]:{stringValue:ME},[$h]:{arrayValue:{values:f.map((x=>{if(typeof x!="number")throw u.createError("VectorValues must only contain numeric values.");return v0(u.serializer,x)}))}}}}}})(s,A);if(f2(s))return s._toProto(A.serializer);throw A.createError(`Unsupported field value: ${f0(s)}`)})(r,e)}function z2(r,e){const t={};return UE(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):PA(r,((s,A)=>{const l=V2(A,e.childContextForField(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function K2(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Yt||r instanceof sa||r instanceof cn||r instanceof $r||r instanceof O2||r instanceof Tn||f2(r))}function G2(r,e,t){if(!K2(t)||!_E(t)){const s=f0(t);throw s==="an object"?e.createError(r+" a custom object"):e.createError(r+" "+s)}}function P0(r,e,t){if((e=hn(e))instanceof H2)return e._internalPath;if(typeof e=="string")return gD(r,e);throw nf("Field path arguments must be of type string or ",r,!1,void 0,t)}const mD=new RegExp("[~\\*/\\[\\]]");function gD(r,e,t){if(e.search(mD)>=0)throw nf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new H2(...e.split("."))._internalPath}catch{throw nf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function nf(r,e,t,s,A){const l=s&&!s.isEmpty(),d=A!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let f="";return(l||d)&&(f+=" (found",l&&(f+=` in field ${s}`),d&&(f+=` in document ${A}`),f+=")"),new He(we.INVALID_ARGUMENT,u+r+f)}function pD(r,e){return r.some((t=>t.isEqual(e)))}class xD{convertValue(e,t="none"){switch(Ki(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Er(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ye(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return PA(e,((A,l)=>{s[A]=this.convertValue(l,t)})),s}convertVectorValue(e){const t=e.fields?.[$h].arrayValue?.values?.map((s=>Er(s.doubleValue)));return new Tn(t)}convertGeoPoint(e){return new sa(Er(e.latitude),Er(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=jf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Xc(e));default:return null}}convertTimestamp(e){const t=Vi(e);return new Yt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=ir.fromString(e);Tt(h2(s),9688,{name:e});const A=new Jc(s.get(1),s.get(3)),l=new Ge(s.popFirst(5));return A.isEqual(t)||La(`Document ${l} contains a document reference within a different database (${A.projectId}/${A.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}class yD extends xD{constructor(e){super(),this.firestore=e}convertBytes(e){return new cn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $r(this.firestore,null,t)}}const WB="@firebase/firestore",ZB="4.11.0";class q2{constructor(e,t,s,A,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=A,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new $r(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new bD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(P0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class bD extends q2{data(){return super.data()}}function vD(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class Bc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class TA extends q2{constructor(e,t,s,A,l,d){super(e,t,s,A,d),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ih(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(P0("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new He(we.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=TA._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}TA._jsonSchemaVersion="firestore/documentSnapshot/1.0",TA._jsonSchema={type:Ir("string",TA._jsonSchemaVersion),bundleSource:Ir("string","DocumentSnapshot"),bundleName:Ir("string"),bundle:Ir("string")};class Ih extends TA{data(e={}){return super.data(e)}}class Lc{constructor(e,t,s,A){this._firestore=e,this._userDataWriter=t,this._snapshot=A,this.metadata=new Bc(A.hasPendingWrites,A.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Ih(this._firestore,this._userDataWriter,s.key,s,new Bc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new He(we.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(A,l){if(A._snapshot.oldDocs.isEmpty()){let d=0;return A._snapshot.docChanges.map((u=>{const f=new Ih(A._firestore,A._userDataWriter,u.doc.key,u.doc,new Bc(A._snapshot.mutatedKeys.has(u.doc.key),A._snapshot.fromCache),A.query.converter);return u.doc,{type:"added",doc:f,oldIndex:-1,newIndex:d++}}))}{let d=A._snapshot.oldDocs;return A._snapshot.docChanges.filter((u=>l||u.type!==3)).map((u=>{const f=new Ih(A._firestore,A._userDataWriter,u.doc.key,u.doc,new Bc(A._snapshot.mutatedKeys.has(u.doc.key),A._snapshot.fromCache),A.query.converter);let g=-1,x=-1;return u.type!==0&&(g=d.indexOf(u.doc.key),d=d.delete(u.doc.key)),u.type!==1&&(d=d.add(u.doc),x=d.indexOf(u.doc.key)),{type:wD(u.type),doc:f,oldIndex:g,newIndex:x}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new He(we.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Lc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=h0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],A=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),A.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function wD(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ye(61501,{type:r})}}Lc._jsonSchemaVersion="firestore/querySnapshot/1.0",Lc._jsonSchema={type:Ir("string",Lc._jsonSchemaVersion),bundleSource:Ir("string","QuerySnapshot"),bundleName:Ir("string"),bundle:Ir("string")};function eC(r){r=al(r,$r);const e=al(r.firestore,Mf),t=L2(e);return nD(t,r._key).then((s=>CD(e,r,s)))}function bA(r,e,t){r=al(r,$r);const s=al(r.firestore,Mf),A=vD(r.converter,e,t),l=hD(s);return Y2(s,[fD(l,"setDoc",r._key,A,r.converter!==null,t).toMutation(r._key,ta.none())])}function BD(r){return Y2(al(r.firestore,Mf),[new w0(r._key,ta.none())])}function Y2(r,e){const t=L2(r);return aD(t,e)}function CD(r,e,t){const s=t.docs.get(e._key),A=new yD(r);return new TA(r,A,e._key,s,new Bc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){eQ(ul),rl(new kA("firestore",((s,{instanceIdentifier:A,options:l})=>{const d=s.getProvider("app").getImmediate(),u=new Mf(new sQ(s.getProvider("auth-internal")),new iQ(d,s.getProvider("app-check-internal")),CQ(d,A),d);return l={useFetchStreams:t,...l},u._setSettings(l),u}),"PUBLIC").setMultipleInstances(!0)),ki(WB,ZB,e),ki(WB,ZB,"esm2020")})();const ED={apiKey:"AIzaSyAFS5YsnbWmPKh1lmBGLsLCGtmkrnC4doM",authDomain:"cleargrad-database.firebaseapp.com",projectId:"cleargrad-database",storageBucket:"cleargrad-database.firebasestorage.app",messagingSenderId:"352836249313",appId:"1:352836249313:web:9a21623277828595f379a0",measurementId:"G-2VQBXX1ZN9"},$2=t0(ED);bE($2);M2($2);new Wn;const ND=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),SD=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),tC=r=>{const e=SD(r);return e.charAt(0).toUpperCase()+e.slice(1)},X2=(...r)=>r.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),jD=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var _D={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const TD=k.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:A="",children:l,iconNode:d,...u},f)=>k.createElement("svg",{ref:f,..._D,width:e,height:e,stroke:r,strokeWidth:s?Number(t)*24/Number(e):t,className:X2("lucide",A),...!l&&!jD(u)&&{"aria-hidden":"true"},...u},[...d.map(([g,x])=>k.createElement(g,x)),...Array.isArray(l)?l:[l]]));const _e=(r,e)=>{const t=k.forwardRef(({className:s,...A},l)=>k.createElement(TD,{ref:l,iconNode:e,className:X2(`lucide-${ND(tC(r))}`,`lucide-${r}`,s),...A}));return t.displayName=tC(r),t};const UD=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],J2=_e("arrow-left",UD);const QD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],rC=_e("arrow-right",QD);const FD=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],sC=_e("bell",FD);const ID=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],rr=_e("book-open",ID);const DD=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],nC=_e("bug",DD);const kD=[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]],RD=_e("calendar-range",kD);const MD=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],OA=_e("calendar",MD);const LD=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],vt=_e("check",LD);const HD=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],xd=_e("chevron-down",HD);const OD=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],PD=_e("chevron-left",OD);const VD=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],W2=_e("chevron-right",VD);const zD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ar=_e("circle-alert",zD);const KD=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],aC=_e("circle-check-big",KD);const GD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Z2=_e("circle-check",GD);const qD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],YD=_e("circle-plus",qD);const $D=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],eN=_e("circle-question-mark",$D);const XD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],JD=_e("circle-x",XD);const WD=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],gx=_e("clock",WD);const ZD=[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]],e5=_e("cloud-download",ZD);const t5=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],r5=_e("cloud-upload",t5);const s5=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],n5=_e("code-xml",s5);const a5=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],i5=_e("copy",a5);const A5=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],o5=_e("crown",A5);const l5=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Cc=_e("database",l5);const c5=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Lf=_e("download",c5);const d5=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Or=_e("external-link",d5);const u5=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],h5=_e("file-braces",u5);const f5=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],fs=_e("file-text",f5);const m5=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],op=_e("funnel",m5);const g5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],V0=_e("globe",g5);const p5=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],x5=_e("graduation-cap",p5);const y5=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],b5=_e("history",y5);const v5=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],w5=_e("image",v5);const B5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],C5=_e("info",B5);const E5=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],N5=_e("instagram",E5);const S5=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],j5=_e("key",S5);const _5=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],T5=_e("link",_5);const U5=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],px=_e("loader-circle",U5);const Q5=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],F5=_e("lock-open",Q5);const I5=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Fs=_e("lock",I5);const D5=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],k5=_e("log-out",D5);const R5=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],iC=_e("mail",R5);const M5=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],L5=_e("megaphone",M5);const H5=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],xx=_e("moon",H5);const O5=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],AC=_e("palette",O5);const P5=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],tN=_e("panels-top-left",P5);const V5=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],Dr=_e("paperclip",V5);const z5=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],z0=_e("pencil",z5);const K5=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Xr=_e("plus",K5);const G5=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],q5=_e("refresh-cw",G5);const Y5=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],oC=_e("rotate-ccw",Y5);const $5=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],lC=_e("save",$5);const X5=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],J5=_e("scroll-text",X5);const W5=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],rd=_e("search",W5);const Z5=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],ek=_e("server",Z5);const tk=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],rk=_e("settings",tk);const sk=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],yx=_e("sparkles",sk);const nk=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],bx=_e("sun",nk);const ak=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],rN=_e("tag",ak);const ik=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Un=_e("trash-2",ik);const Ak=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],sd=_e("trash",Ak);const ok=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Bs=_e("triangle-alert",ok);const lk=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],ck=_e("upload",lk);const dk=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],uk=_e("user-cog",dk);const hk=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],sN=_e("user",hk);const fk=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],mk=_e("users",fk);const gk=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],cC=_e("wifi-off",gk);const pk=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],xk=_e("wifi",pk);const yk=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],vx=_e("wrench",yk);const bk=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ut=_e("x",bk),dC={"A+":4.3,A:4,"A-":3.7,"B+":3.3,B:3,"B-":2.7,"C+":2.3,C:2,"C-":1.7,D:1,E:.8,F:0,FAIL:0,X:0},nN=r=>{let e=0,t=0;for(const s of r){if(s.isWithdrawn||s.isExemption||!s.grade||s.grade==="-")continue;const A=s.grade.toUpperCase();if(A in dC){const l=dC[A],d=s.credits||0;d>0&&(e+=l*d,t+=d)}}return t===0?null:{gpa:e/t,credits:t}},vk=r=>r.length===0?null:r.reduce((t,s)=>t+s,0)/r.length,aN=r=>{const e=r.toString(),t=e.indexOf(".");return t===-1||e.length-t-1<=2?r.toFixed(2):(Math.round(r*100)/100).toFixed(2)};function iN(r){var e,t,s="";if(typeof r=="string"||typeof r=="number")s+=r;else if(typeof r=="object")if(Array.isArray(r)){var A=r.length;for(e=0;e<A;e++)r[e]&&(t=iN(r[e]))&&(s&&(s+=" "),s+=t)}else for(t in r)r[t]&&(s&&(s+=" "),s+=t);return s}function Hc(){for(var r,e,t=0,s="",A=arguments.length;t<A;t++)(r=arguments[t])&&(e=iN(r))&&(s&&(s+=" "),s+=e);return s}const $u={total:32,crossCollege:8,boya:{total:13,dimensionsRequired:4}},Ec=["Year 1 Sem 1","Year 1 Sem 2","Year 2 Sem 1","Year 2 Sem 2","Year 3 Sem 1","Year 3 Sem 2","Year 4 Sem 1","Year 4 Sem 2"],wk=["Major Required","Major Elective","General Education","Other"],Bk=["Chinese","English","Cross-College","Boya","Sports","Service","Primer"],wx=["Dimension 1","Dimension 2","Dimension 3","Dimension 4","Dimension 5","Dimension 6"],uC=[];for(let r=7;r<=22;r++)uC.push(`${r.toString().padStart(2,"0")}:00`),uC.push(`${r.toString().padStart(2,"0")}:30`);const Gs="course-card-bg",af={"Major Required":`${Gs} border-l-[4px] !border-l-[#F26060]`,"Major Elective":`${Gs} border-l-[4px] !border-l-[#79A4E8]`,"General Education":`${Gs} border-l-[4px] !border-l-[#997FDC]`,Other:`${Gs} border-l-[4px] !border-l-[#C0D762]`,"University Way":`${Gs} border-l-[4px] !border-l-[#06D6A0]`},Bx={Chinese:`${Gs} border-l-[4px] !border-l-[#EC9385]`,English:`${Gs} border-l-[4px] !border-l-[#EC9385]`,"Cross-College":`${Gs} border-l-[4px] !border-l-[#FCA269]`,Boya:`${Gs} border-l-[4px] !border-l-[#997FDC]`,Sports:`${Gs} border-l-[4px] !border-l-[#79BEB5]`,Service:`${Gs} border-l-[4px] !border-l-[#A48B78]`,Primer:`${Gs} border-l-[4px] !border-l-[#7DC174]`,"Military Training":`${Gs} border-l-[4px] !border-l-[#64748B]`},Ck=(r,e,t)=>k.useMemo(()=>{let A=0,l=0,d=0,u=0,f=0,g=0,x=0,y=0,v=0,S=0;const R=new Set;let j=0;return r.forEach(P=>{if(P.isWithdrawn)return;const G=P.credits,q=["D","E","F","Fail","FAIL"].includes(P.grade||"");if(P.category==="University Way"||P.category==="General Education"&&P.genEduSubCategory==="Primer"){q||(j+=1);return}if(P.genEduSubCategory!=="Sports"&&P.genEduSubCategory!=="Military Training"&&!q&&(A+=G),!q){switch(P.category){case"Major Required":l+=G;break;case"Major Elective":d+=G;break;case"General Education":if(u+=G,P.genEduSubCategory)switch(P.genEduSubCategory){case"Chinese":case"English":f+=G;break;case"Cross-College":g+=G;break;case"Boya":v+=G,P.isEMI&&(S+=G),P.boyaDimension&&R.add(P.boyaDimension);break;case"Service":x+=G;break;case"Sports":y+=G;break}break}P.isEapEsp&&P.genEduSubCategory!=="Cross-College"&&(g+=G)}}),{total:{earned:A,required:t},majorRequired:{earned:l},majorElective:{earned:d},genEdu:{total:{earned:u,required:$u.total},language:{earned:f,required:6},crossCollege:{earned:g,required:$u.crossCollege},boya:{earned:v,required:$u.boya.total,emiEarned:S,emiRequired:e?6:0},service:{earned:x},sports:{earned:y,required:4}},boyaStatus:{dimensionsCount:R.size,dimensionsRequired:$u.boya.dimensionsRequired,uniqueDimensions:Array.from(R)},universityWay:{count:j,required:6}}},[r,e,t]),Ek=(r,e)=>{if(e==="zh"){const t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:""},s=r.split(" ");if(s[0]==="Year"){const A=t[s[1]]||s[1];if(r.includes("Summer"))return`${A} `;if(r.includes("Sem 1"))return`${A} `;if(r.includes("Sem 2"))return`${A} `}return r}return r.replace("Year ","Y").replace("Sem ","S").replace("Summer","Sum")},Nk=(r,e)=>{const t=r.match(/Year (\d+) Sem (\d+)/);if(t){const s=t[1],A=t[2];if(e==="zh"){const l=["","","","","","","","","","",""],d=parseInt(s);return`${l[d]?`${l[d]}`:`${s}`} ${A==="1"?"":""}`}else return`Year ${s} ${A==="1"?"Fall":"Spring"} Semester`}return r},mr=({label:r,current:e,total:t,color:s,subLabel:A,variant:l="m",labelClassName:d})=>{const u=t?Math.min(e/t*100,100):100;return a.jsxs("div",{className:"w-full mb-3",children:[a.jsxs("div",{className:"flex justify-between items-end mb-1",children:[a.jsx("span",{className:Hc("font-medium",d||"text-foreground",l==="l"?"text-lg":"text-sm"),children:r}),a.jsxs("span",{className:"text-sm text-muted",children:[a.jsx("span",{className:Hc("font-bold text-foreground",l==="l"?"text-xl":"text-base"),children:e}),t&&a.jsxs("span",{className:"text-xs",children:[" / ",t]}),A&&a.jsx("span",{className:"ml-2 text-[10px] leading-none text-muted",children:A})]})]}),a.jsx("div",{className:"w-full rounded-full h-2.5 overflow-hidden",style:{backgroundColor:"var(--color-progress-track)"},children:a.jsx("div",{className:Hc("h-2.5 rounded-full transition-all duration-500",s),style:{width:`${u}%`}})})]})},Oc="nsysu-micro-credits-data",el={minTotalCredits:"6",courses:[],manualSemesters:[],deletedSemesters:[],notes:""},Cx=(r=113)=>Array.from({length:3},(e,t)=>r+t).flatMap(e=>[`${e}-Summer()`,`${e}-Winter()`]),Sk=r=>{const e=t=>t.includes("-2")||t.includes("Spring")||t.includes("")?4:t.includes("Winter")||t.includes("")?3:t.includes("-1")||t.includes("Fall")||t.includes("")?2:t.includes("Summer")||t.includes("")?1:0;return r.sort((t,s)=>{const A=parseInt(t.split("-")[0])||0,l=parseInt(s.split("-")[0])||0;return A!==l?A-l:e(t)-e(s)})},K0=(r,e=113)=>{const t=Cx(e),A=Array.from(new Set([...t,...r.manualSemesters||[],...r.courses.map(v=>v.semester).filter(Boolean)])).filter(v=>!(r.deletedSemesters||[]).includes(v)),l=Sk(A),d=r.courses.reduce((v,S)=>{const R=S.semester||"Unknown";return v[R]||(v[R]=[]),v[R].push(S),v},{}),u={};let f=0;l.forEach(v=>{u[v]=0}),Object.entries(d).forEach(([v,S])=>{const R=S.filter(j=>j.completed).reduce((j,V)=>j+(parseFloat(V.credits)||0),0);u[v]=R}),l.forEach(v=>{const S=u[v];S>1&&(f+=S-1)});const g={};let x=0;return l.filter(v=>{const S=u[v];return S>0&&S<1}).forEach(v=>{if(f<=0)return;const S=u[v],R=1-S,j=Math.min(R,f);g[v]=S+j,f-=j}),l.forEach(v=>{g[v]===void 0&&(g[v]=Math.min(1,u[v])),x+=g[v]}),x=Math.floor(Math.min(6,x)),{rawStats:u,effectiveStats:g,grandTotalEffective:x,sortedSemesters:l,activeSemesters:A}},jk={en:{app:{title:"Course Tracker",settings:"Settings",addCourse:"Add Course",export:"Export JSON",import:"Import JSON",clear:"Clear All Data",coursePlan:"Course Plan",addPlan:"Add Plan",totalCourses:"courses total",deleteConfirm:"Are you sure you want to delete this course?",clearConfirm:"Are you sure you want to clear ALL data? This cannot be undone?",tracker:"Tracker",planner:"Planner",backToTracker:"Back to Tracker",fixData:"Fix Data"},common:{actions:"Actions",confirm:"Confirm",cancel:"Cancel",noMatchTitle:"No Match Found",noMatchDesc:"We couldn't find an exact match for this course in your tracker.",manualAdd:"Manual Add",perfectMatchFound:"Perfect Match Found!",matchConfirmText:"This action will sync the course data.",trackerTitle:"Select from Tracker",courseName:"Course Name",credit:"Credit",matchCourse:"Sync Course",addFromTracker:"Add from Tracker",completedCourses:"Completed Courses",plannedCourses:"Planned Courses"},settings:{title:"Settings",language:"Language / ",emiStudent:"I am an EMI Student",emiDesc:"If checked, you'll need 6 credits of Liberal Arts (General Edu) courses to be taught in English.",gradCredits:"Total Graduation Credits",liquidTheme:"Liquid Glass UI",darkMode:"Dark Mode",lightMode:"Light Mode",save:"Save & Close",profile:"Student Profile",major:"Major / Department",selectMajor:"Select Department...",entranceYear:"Entrance Year (e.g. 113)",class:"Class",emiHintActive:"EMI Liberal Arts tracking enabled",profileWarning:"Please ensure your profile is correct to get accurate search results."},dashboard:{title:"Graduation Progress",totalCredits:"Total Credits",progress:"Graduation Progress",genEdu:"General Education",majorReq:"Major Courses",majorRequired:"Major Required",majorElective:"Major Elective",langTotal:"Language Total",langDesc:"Includes Mandatory Chinese & English",crossCollege:"Inter-college Elective",universityWay:"Primer on College Life",events:"events",boya:"Liberal Arts",boyaTotal:"Liberal Arts Total",emiBoya:"EMI Liberal Arts",service:"Practical Experience / Service Learning",dimensions:"Dimensions Covered",uniqueDimensions:"Unique Dimensions",uniqueDim:"Unique Dim:",attendance:"Attendance",sportsCreditsNoCount:"Does not count towards graduation",totalGPA:"Total GPA",avgSemesters:"Avg. of Semesters",addInterdisciplinary:"Add Micro-credit, International or Interdisciplinary Learning",interdisciplinaryView:{title:"Micro-credit, International or Interdisciplinary Learning",placeholder:"Select an item from the left to view details.",sidebar:{microCredits:"Micro-credits",addMicroCredit:"Add Micro-credits",internationalOrCross:"International / Interdisciplinary (Choose 1 of 9)",international:"International Learning",crossDomain:"Interdisciplinary Learning"},requirements:{1:"Exchange or Study Abroad",2:"Approved Foreign Course",3:"Approved Foreign Study Plan",4:"Minor (Intra / Cross-school)",5:"Double Major (Intra / Cross-school)",6:"Teacher Education (Intra / Cross-school)",7:"Micro-program",8:"Integrated Program",9:"Inter-departmental Professional Program"},details:{requirementsHeader:"Requirements:",confirmationHeader:"Confirmation",1:{requirement:"Study abroad for at least 1 semester",confirmation:"I have studied abroad for at least 1 semester"},2:{requirement:`Definition: Student completes a course-based international study approved by their department and earn at least 2 credits.

Requirements (ALL must be met):
1. Location: Course must be offered by a foreign university or an academic foreign education/research institution.
2. Course Nature: Must be a 'Formal Course', with clear course name, content/syllabus, and offering unit.
3. Credit Threshold: Course credits  2 credits (if not NSYSU credit system, must be converted/recognized by department).
4. Department Review: Course must be 'approved by the department'. Retroactive or unapproved courses are not recognized.
5. Proof of Completion: Must provide at least one: Transcript or Certificate of Completion.`,confirmation:"I have completed a course-based international study that meets all valid requirements."},3:{requirement:`Definition: Student completes a program-based international study approved by their department and meets the minimum study hours.

Requirements (ALL must be met):
1. Location: Hosted by a foreign university, research institution, international organization, or their partners.
2. Program Nature: Belongs to 'Study Program / Training / Camp / Workshop / Project'. Does not require being a formal credit course.
3. Study Hours Threshold: Accumulated study hours  36 hours. Can be continuous or non-continuous (as recognized by department).
4. Department Review: Program must be 'approved by the department' and recognized as having 'learning/academic nature'.
5. Proof of Completion: Must provide at least one: Participation Certificate, Completion Certificate, or Hours Certificate issued by the organizer.`,confirmation:"I have completed a program-based international study that meets all valid requirements."}}}},form:{addTitle:"Add New Course",editTitle:"Edit Course",importCatalog:"Import from Catalog",courseName:"Course Name",credits:"Credits",grade:"Grade",semester:"Semester",category:"Category",subCategory:"Sub-Category",dimension:"Dimension",attributes:"Attributes",isEMI:"EMI Course (English Taught)",isEapEsp:"EAP/ESP Course",isWithdrawn:"Withdraw",isExemption:"Exemption",dayTime:"Day & Time (Optional)",selectDay:"Select Day",selectStart:"Start Time",selectEnd:"End Time",cancel:"Cancel",save:"Save Course",verified:"Verified"},schedule:{schedule:"Schedule",scheduledCourses:"Courses Scheduled",headers:{name:"Course Name",credits:"Credits",grade:"Grade",category:"Category"},days:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],courseName:"Course Name",credits:"Credits",grade:"Grade",category:"Category",noCourses:"No courses scheduled for this semester with time information.",exportSchedule:"Export Schedule",exportICS:"Export Calendar (.ics)"},courseSchedule:{button:"Course Selection Schedule",title:"114-2 Course Selection Schedule",inquiry:"Course Inquiry",prelim1:"Preliminary Round 1",prelim2:"Preliminary Round 2",addDrop1:"Add/Drop Round 1",addDrop2:"Add/Drop Round 2",inquiryDate:"Starting from: Jan 6 (Tue) 13:00",prelim1Date:"Jan 30 (Fri) 9:00  Feb 2 (Mon) 17:00",prelim2Date:"Feb 4 (Wed) 9:00  Feb 5 (Thu) 17:00",addDrop1Date:"Feb 9 (Mon) 9:00  Feb 10 (Tue) 17:00",addDrop2Date:"Feb 24 (Tue) 9:00  Feb 25 (Wed) 17:00",updateTime:"Update Time: 2026.01.06",reference:"Reference",warning:"Data is for reference only. Please refer to the official NSYSU announcement for actual dates."},categories:{"General Education":"General Education",Mandatory:"Mandatory",Elective:"Elective",Language:"Language","General Education (Core)":"Gen Edu (Core)","University Way":"Primer on College Life","Service Learning":"Practical Experience / Service Learning","Physical Education":"Physical Education","Major Required":"Major Required","Major Elective":"Major Elective",Other:"Other","Cross-College":"Inter-college Elective",Boya:"Liberal Arts",Chinese:"Chinese",English:"English",Sports:"Sport & Health",Service:"Practical Experience / Service Learning",Primer:"Primer on College Life","Dimension 1":"Dimension 1","Dimension 2":"Dimension 2","Dimension 3":"Dimension 3","Dimension 4":"Dimension 4","Dimension 5":"Dimension 5","Dimension 6":"Dimension 6","EAP/ESP":"EAP/ESP","Military Training":"Military Training"},semesters:{"Year 1 Sem 1":"Year 1 Fall Semester","Year 1 Sem 2":"Year 1 Spring Semester","Year 2 Sem 1":"Year 2 Fall Semester","Year 2 Sem 2":"Year 2 Spring Semester","Year 3 Sem 1":"Year 3 Fall Semester","Year 3 Sem 2":"Year 3 Spring Semester","Year 4 Sem 1":"Year 4 Fall Semester","Year 4 Sem 2":"Year 4 Spring Semester"},importModal:{title:"Overwriting Data",warning:"Importing this file will permanently replace all your existing data. This action cannot be undone.",backupRec:"We strongly recommend backing up your current data before proceeding.",backupBtn:"Backup Current Data & Import",cancel:"Cancel",overwrite:"Overwrite",trackCountPrefix:"You currently have ",trackCountSuffix:" courses tracked."},clearModal:{title:"Clear All Data",warning:"This will permanently delete all your courses and settings. This action cannot be undone.",backupRec:"We recommend backing up your data before clearing.",backupBtn:"Backup & Clear",cancel:"Cancel",clear:"Clear All Data"},courseList:{schedule:"Schedule & Grade",noCourses:"No courses",remove:"Remove",cr:"cr"},tutorial:{start:"Start Tutorial",welcome:{title:"Welcome to ClearGrad.",desc:"Take a quick interactive tour to master your graduation planning."},settings:{title:"Personalized Settings",desc:"Start here. Select your Major, Entrance Year, and EMI status to tailor your graduation requirements."},modeSwitcher:{title:"Workspace Switcher",desc:"Toggle seamlessly between your official 'Tracker' progress and your sandbox 'Planner' schedule."},plannerBoard:{title:"The Planner Board",desc:"Your safe space to draft perfect schedules. Drag, drop, and experimentthese courses won't affect your official records."},plannerSearch:{title:"Smart Course Search",desc:"Find and gather interesting courses from the official catalog to build your draft schedule."},addCourse:{title:"Manual Course Entry",desc:"Add a custom course manually if you can't find it in the official university catalog."},catalogFeature:{title:"Intelligent Import",desc:"Use 'Import from Catalog' to automatically sync course times, credits, and graduation dimensions in one click."},dataSafety:{title:"Total Data Control",desc:"Your data stays on your device. Export backups as JSON files to keep your progress safe or migrate to a new browser."},scheduleGrid:{title:"Visual Timetable",desc:"Review your weekly schedule at a glance to identify any time conflicts before the semester begins."},scheduleList:{title:"Course Roster & Grades",desc:"Scroll down to manage your enrolled courses and input your final semester grades."},dashboard:{title:"Progress Dashboard",desc:"Monitor your journey to graduation with a comprehensive breakdown of required, elective, and general education credits."},coursePlan:{title:"Academic Archive",desc:"Review your historical course records organized cleanly by completed semesters."},scheduleGrade:{title:"Semester Details",desc:"Access your detailed schedule grid and input final grades for any specific semester."},history:{title:"Release Journal",desc:"Stay updated with our latest feature releases and application improvements."},support:{title:"Help & Support",desc:"Have questions or found a bug? Check our FAQs or reach out directly for assistance."},next:"Next",prev:"Previous",skip:"Skip",done:"Done"},updates:{title:"Update Journal",desc:"Track the evolution of this project",close:"Close"},planner:{title:"Planner Board",draftBoard:"Draft Board",weekends:"Weekends",clear:"Clear",export:"Export to Tracker",importDraft:"Import Catalog",days:{any:"Any Day",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat",sun:"Sun"},depts:{all:"All Categories",cs:"CS ()",gen:"GeneralEdu"},incompleteDataWarning:"It seems like the University is adjusting course data (Total: {{count}}). Some courses might be missing.",search:{placeholder:"Search course code, name, teacher...",noResults:"Search to add courses",retry:"Retry",failed:"Failed to load courses"},courseId:"Course ID",addToDraft:"Add to Draft",alreadyAdded:"Already Added",showConflicts:"Show Conflicts",showEMIOnly:"EMI Only",delete:"Delete",edit:"Edit",courseIdCopied:"Course ID Copied!",exportPreview:{title:"Export Preview",desc:"Confirm changes before exporting to",draftSource:"Draft (Source)",destination:"Destination",current:"Current",empty:"Empty Schedule",warning:"Existing courses will remain. New courses will be added.",cancel:"Cancel",confirm:"Confirm Export"},labels:{title:"Manage Labels",library:"My Label Library",applied:"Applied to this Course",newPlaceholder:"New label name...",createFirst:"Create your first label above!",allApplied:"All labels applied!",noApplied:"No labels applied",noLabels:"No custom labels created yet.",deleteConfirm:'Delete "{{label}}" from library?',edit:"Edit",finish:"Finish",exists:"Label already exists"}},catalog:{title:"Course Catalog",subtitle:"Import from NSYSU Open Data",searchPlaceholder:"Search by Name, Teacher, or ID...",loading:"Loading courses...",noResults:"No courses found. Try searching for something else.",dataSource:"Data provided by NSYSU Open Data API",summer:"Summer",coursesFound:"courses found",includeElectives:"Electives",mode:{all:"All Courses",compulsory:"Show Major Req/Elec"},label:{major:"Major",grade:"Grade",class:"Class"},class:{none:"-",shared:"Shared ()",a:"Class A",b:"Class B",english:"English Class"},grades:{1:"Freshman",2:"Sophomore",3:"Junior",4:"Senior"}},announcement:{title:"Welcome to ClearGrad.",defaultMessage:` **ClearGrad v7.0 Major Update: Cloud Sync is Live!**

 **Seamless Cross-Device Sync**
Click 'Sign in with Google' above to automatically and securely back up your drafts. Switch between your phone and laptop without interruption!
 **Offline Planning**
Plan your courses even without an internet connection. Your progress won't be lost.
 **Ultimate Privacy**
Your schedule is protected by Google's enterprise-grade encryption. Any uploaded transcripts or screenshots will **only be stored locally on your device**. We only sync progress data, ensuring 100% privacy!`,disclaimer:"This website is for reference only; please refer to the school for actual graduation progress.",close:"I Understand",dontShowAgain:"Don't show again until next update",version:"Version",firstTime:"First time?",startTutorial:"Start Tutorial",haveQuestions:"Cloud Sync (NEW):"},syncState:{editing:"Editing...",saving:"Saving...",synced:"Synced",idle:"Idle",bound:"Connected"},support:{title:"Support",message:"If you need any support or have questions, please feel free to contact us via email.",contact:"Contact Support",email:"ouuewow@gmail.com",disclaimer:" Unofficial App. Not affiliated with NSYSU.",copyright:"Data for reference only. Please verify with school system.",faqTitle:"FAQs",faq:[{question:"How to add 'Primer on College Life'?",answer:"Select Category 'General Education' and Sub-Category 'Primer on College Life'."},{question:"How to handle course exemptions?",answer:"Check the 'Exemption' box in the Attributes section when adding/editing a course."},{question:"How to export schedule or calendar?",answer:"Click 'Schedule & Grades' on the dashboard. The export buttons are at the top right."},{question:"What are the arrows in the top right?",answer:"Down  = Export Backup (JSON). Up  = Import Backup (JSON)."},{question:"How to add custom labels?",answer:"In the Planner (right side), click the tag icon on any course card to add or create labels."},{question:"Can I search by label?",answer:"Yes! You can search for your custom labels in the Course Catalog search bar."},{question:"Do I need to download data every time?",answer:"No, data is saved automatically in your browser. However, we recommend regular backups."},{question:"What are the ways to add courses?",answer:"Two ways: 1. 'Import from Planner' (recommended). 2. Manually click 'Add Course' on the dashboard."}]},dataFix:{button:"Fix Locations",title:"Missing Data Detected",desc:"Some courses in",descSuffix:"are missing classroom information.",instruction:"Please select the original catalog semester (e.g., 114-1) to auto-fill this data.",sourceLabel:"Original Semester Source",selectPlaceholder:"Select a semester...",skip:"Skip",autoFix:"Auto Fix",success:"Success! Auto-updated",skipped:"ambiguous matches skipped",ambiguousAlert:"Found potential matches but they were ambiguous. Please refine search or use manual mode.",noMatch:"Couldn't find matching data in"},courseSelection:{title:"Multiple Matches Found",desc:"We found multiple courses that look like",select:"Please select the correct one:",teacher:"Teacher",room:"Room",time:"Time",confirm:"Confirm Selection",cancel:"Skip this Course",manualHint:"Please check these courses manually in the planner."},fixReport:{titleAttention:"Fix Report: Attention Needed",titleComplete:"Auto-Fix Complete",successUpdate:"Successfully updated",courses:"courses",unmatched:"Could not find matches for the following courses:",noChanges:"No changes were made. All courses might already be up to date.",done:"Done"},addSemester:{title:"Add New Semester",year:"Year",semester:"Semester",yearOption:"Year {year}",sem1:"Fall Semester",sem2:"Spring Semester",summer:"Summer",exists:"This semester already exists!",cancel:"Cancel",add:"Add"}},zh:{app:{title:"",settings:"",addCourse:"",export:"",import:"",clear:"",coursePlan:"",addPlan:"",totalCourses:"",deleteConfirm:"",clearConfirm:"",tracker:"",planner:"",backToTracker:"",fixData:""},common:{actions:"",confirm:"",cancel:"",noMatchTitle:"",noMatchDesc:"",manualAdd:"",perfectMatchFound:"",matchConfirmText:"",trackerTitle:"",courseName:"",credit:"",matchCourse:"",addFromTracker:"",completedCourses:"",plannedCourses:""},settings:{title:"",language:" / Language",emiStudent:" EMI ",emiDesc:" 6 ",gradCredits:"",liquidTheme:"Liquid Glass UI ()",darkMode:"Dark Mode",lightMode:"Light Mode",save:"",profile:"",major:"",selectMajor:"...",entranceYear:" 113",class:"",emiHintActive:" EMI ",profileWarning:""},dashboard:{title:"",totalCredits:"",progress:"",genEdu:"",majorReq:"",majorRequired:"",majorElective:"",langTotal:"",langDesc:"",crossCollege:"",universityWay:"",events:"",boya:"",boyaTotal:"",emiBoya:"EMI ",service:"",dimensions:"",uniqueDimensions:"",uniqueDim:"",attendance:"",sportsCreditsNoCount:"",totalGPA:" GPA",avgSemesters:"",addInterdisciplinary:"",interdisciplinaryView:{title:"",placeholder:"",sidebar:{microCredits:"",addMicroCredit:"",internationalOrCross:" / ",international:"",crossDomain:""},requirements:{1:"",2:"",3:"",4:" ",5:" ",6:" ",7:"",8:"",9:""},details:{requirementsHeader:"",confirmationHeader:"",1:{requirement:"1",confirmation:"1"},2:{requirement:` 2 

 (ALL )
1.   / 
2.  ( Course )  / 
3.   2  ()
4. 
5.  ( Transcript )   ( Certificate of Completion )`,confirmation:""},3:{requirement:`

 (ALL )
1.  
2.  /  /  /  / 
3.   36  (  )
4.  / 
5.   `,confirmation:""}}}},form:{addTitle:"",editTitle:"",importCatalog:"",courseName:"",credits:"",grade:"",semester:"",category:"",subCategory:"",dimension:"",attributes:"",isEMI:"EMI ",isEapEsp:"EAP/ESP ",isWithdrawn:"",isExemption:"",dayTime:"",selectDay:"",selectStart:"",selectEnd:"",cancel:"",save:"",verified:""},schedule:{schedule:"",scheduledCourses:"",noCourses:"",headers:{name:"",credits:"",grade:"",category:""},days:["","","","","","",""],courseName:"",credits:"",grade:"",category:"",noCoursesScheduled:"",exportSchedule:"",exportICS:".ics"},courseSchedule:{button:"",title:"114-2 ",inquiry:"",prelim1:"",prelim2:"",addDrop1:"",addDrop2:"",inquiryDate:"1/613:00",prelim1Date:"1/309:00  2/217:00",prelim2Date:"2/49:00  2/517:00",addDrop1Date:"2/99:00  2/1017:00",addDrop2Date:"2/249:00  2/2517:00",updateTime:"2026.01.06",reference:"",warning:""},categories:{"General Education":"",Mandatory:"",Elective:"",Language:"","General Education (Core)":"","University Way":"","Service Learning":"","Physical Education":"","Major Required":"","Major Elective":"",Other:"","Cross-College":"",Boya:"",Chinese:"",English:"",Sports:"",Service:"",Primer:"","Dimension 1":"","Dimension 2":"","Dimension 3":"","Dimension 4":"","Dimension 5":"","Dimension 6":"","EAP/ESP":"EAP/ESP","Military Training":""},semesters:{"Year 1 Sem 1":" ","Year 1 Sem 2":" ","Year 2 Sem 1":" ","Year 2 Sem 2":" ","Year 3 Sem 1":" ","Year 3 Sem 2":" ","Year 4 Sem 1":" ","Year 4 Sem 2":" "},importModal:{title:"",warning:"",backupRec:"",backupBtn:"",cancel:"",overwrite:"",trackCountPrefix:" ",trackCountSuffix:" "},courseList:{schedule:" & ",noCourses:"",remove:"",cr:""},clearModal:{title:"",warning:"",backupRec:"",backupBtn:"",cancel:"",clear:""},tutorial:{start:"",welcome:{title:" ClearGrad ",desc:""},settings:{title:"",desc:" EMI "},modeSwitcher:{title:"",desc:""},plannerBoard:{title:"",desc:""},plannerSearch:{title:"",desc:""},addCourse:{title:"",desc:""},catalogFeature:{title:"",desc:" EMI "},dataSafety:{title:"",desc:" JSON "},scheduleGrid:{title:"",desc:""},scheduleList:{title:"",desc:""},dashboard:{title:"",desc:""},coursePlan:{title:"",desc:""},scheduleGrade:{title:"",desc:""},history:{title:"",desc:""},support:{title:"",desc:""},next:"",prev:"",skip:"",done:""},updates:{title:"",desc:"",close:""},planner:{title:"",draftBoard:"",weekends:"",clear:"",export:"",importDraft:"",days:{any:"",mon:"",tue:"",wed:"",thu:"",fri:"",sat:"",sun:""},depts:{all:"",cs:"",ee:"",bm:"",fl:"",gen:""},incompleteDataWarning:" {{count}} ",search:{placeholder:"...",noResults:"",retry:"",failed:""},courseId:"",addToDraft:"",alreadyAdded:"",showConflicts:"",showEMIOnly:" EMI",delete:"",edit:"",courseIdCopied:"",exportPreview:{title:"",desc:"",draftSource:"",destination:"",current:"",empty:"",warning:"",cancel:"",confirm:""},labels:{title:"",library:"",applied:"",newPlaceholder:"...",createFirst:"",allApplied:"",noApplied:"",noLabels:"",deleteConfirm:' "{{label}}" ',edit:"",finish:"",exists:""}},catalog:{title:"",subtitle:"",searchPlaceholder:"...",loading:"...",noResults:"",dataSource:" API",summer:"",coursesFound:"",includeElectives:"",mode:{all:"",compulsory:""},label:{major:"",grade:"",class:""},class:{none:"-",shared:"",a:"",b:"",english:""},grades:{1:"",2:"",3:"",4:""}},announcement:{title:"Welcome to ClearGrad !",defaultMessage:` **ClearGrad v7.0 **

 ****
Google 
 ****

 ****
 Google 100% `,disclaimer:"",close:"",dontShowAgain:"",version:"",firstTime:"",startTutorial:"",haveQuestions:"NEW"},syncState:{editing:"...",saving:"...",synced:"",idle:"",bound:""},support:{title:"",message:"",contact:"",email:"ouuewow@gmail.com",disclaimer:" ",copyright:"",faqTitle:" (FAQs)",faq:[{question:"",answer:"+"},{question:"",answer:""},{question:"",answer:"&"},{question:"",answer:" =  (JSON) = "},{question:"",answer:""},{question:"",answer:""},{question:"",answer:""},{question:"",answer:"1.  2. "}]},dataFix:{button:"",title:"",desc:"",descSuffix:"",instruction:" 114-1",sourceLabel:"",selectPlaceholder:"...",skip:"",autoFix:"",success:"",skipped:"",ambiguousAlert:"",noMatch:""},courseSelection:{title:"",desc:"",select:"",teacher:"",room:"",time:"",confirm:"",cancel:"",manualHint:""},fixReport:{titleAttention:"",titleComplete:"",successUpdate:"",courses:"",unmatched:"",noChanges:"",done:""},addSemester:{title:"",year:"",semester:"",yearOption:"{year}",sem1:"",sem2:"",summer:"",exists:"",cancel:"",add:""}}},AN=k.createContext(void 0),_k=({children:r})=>{const[e,t]=k.useState(()=>{const A=localStorage.getItem("nsysu-language");return A==="en"||A==="zh"?A:"zh"});k.useEffect(()=>{localStorage.setItem("nsysu-language",e),document.documentElement.lang=e},[e]);const s={language:e,setLanguage:t,t:jk[e]};return a.jsx(AN.Provider,{value:s,children:r})},it=()=>{const r=k.useContext(AN);if(r===void 0)throw new Error("useLanguage must be used within a LanguageProvider");return r},Tk=k.memo(({courses:r,isEMIStudent:e,graduationCredits:t,onOpenInterdisciplinary:s,userProfile:A})=>{const{t:l,language:d}=it(),u=Ck(r,e,t),[f,g]=k.useState(0),x=()=>{try{const S=localStorage.getItem(Oc),R=S?JSON.parse(S):el,{grandTotalEffective:j}=K0(R,A?.entranceYear);g(j)}catch{g(0)}};k.useEffect(()=>(x(),window.addEventListener("micro-credits-updated",x),()=>window.removeEventListener("micro-credits-updated",x)),[A?.entranceYear]);const y=u.total.earned+f,v=a.jsxs("span",{children:[l.dashboard.progress,f>0&&a.jsx("span",{className:"text-muted ml-2 text-base font-normal",children:d==="zh"?`(: ${f} )`:`(Micro-credits: ${f} cr)`})]});return a.jsxs("div",{className:"bg-transparent rounded-xl max-w-[85rem] mx-auto",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-foreground pb-2",children:l.dashboard.title}),a.jsxs("button",{onClick:s,className:"flex items-center gap-2 px-3 py-1.5 bg-primary/10 hover:bg-primary/20 text-[#8D9CB2] dark:text-primary text-sm font-medium rounded-full transition-colors mb-2",children:[a.jsx(YD,{size:16}),l.dashboard.addInterdisciplinary]})]}),a.jsxs("div",{className:"flex flex-col gap-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-11 gap-6",children:[a.jsxs("div",{className:"md:col-span-7 bg-background p-6 rounded-xl border border-gray-500",children:[a.jsx("h3",{className:"text-lg font-semibold text-primary mb-4",children:l.dashboard.totalCredits}),a.jsx(mr,{label:v,current:y,total:u.total.required,color:"bg-primary",variant:"l"})]}),a.jsx("div",{className:"md:col-span-4 bg-background rounded-xl border border-gray-500 flex flex-row",children:(()=>{const S=Array.from(new Set(r.map(P=>P.semester))).sort(),R=[],j=[];S.forEach(P=>{const G=r.filter(W=>W.semester===P),q=nN(G);q&&(R.push(q.gpa),j.push(P))});const V=vk(R);return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex-1 p-6 flex flex-col justify-between min-w-0",children:[a.jsx("h3",{className:"text-lg font-semibold text-primary mb-2 whitespace-nowrap",children:l.dashboard.totalGPA}),a.jsxs("div",{className:"flex items-end gap-2 mt-auto",children:[a.jsx("span",{className:"text-4xl font-bold text-foreground",children:V!==null?aN(V):"-.--"}),a.jsx("span",{className:"text-sm text-muted mb-1.5 font-medium",children:"/ 4.30"})]})]}),a.jsx("div",{className:"w-[1px] bg-gray-600 my-4"}),a.jsxs("div",{className:"flex-1 p-6 flex flex-col min-w-0 bg-surface/30 rounded-r-xl",children:[a.jsx("span",{className:"text-xs font-bold text-primary mb-3",children:l.dashboard.avgSemesters}),a.jsx("div",{className:"flex flex-wrap gap-1.5 content-start overflow-y-auto max-h-[80px]",children:j.length>0?j.map(P=>a.jsx("span",{className:"text-[10px] font-bold px-1.5 py-0.5 rounded bg-surface border border-gray-600 text-muted whitespace-nowrap",children:Ek(P,d)},P)):a.jsx("span",{className:"text-[10px] text-muted italic",children:"-"})})]})]})})()})]}),a.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-11 gap-6",children:[a.jsxs("div",{className:"xl:col-span-2 bg-background p-6 rounded-xl border border-gray-500 flex flex-col gap-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-primary mb-4 whitespace-nowrap",children:l.dashboard.majorReq}),a.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-gray-400 flex-1 flex flex-col justify-center items-center text-center",children:[a.jsx("span",{className:"text-foreground text-sm font-medium block mb-1",children:l.dashboard.majorRequired}),a.jsx("span",{className:"text-3xl font-bold text-primary",children:u.majorRequired.earned})]}),a.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-gray-400 flex-1 flex flex-col justify-center items-center text-center",children:[a.jsx("div",{className:"text-foreground text-sm font-medium mb-1",children:l.dashboard.majorElective}),a.jsx("div",{className:"text-3xl font-bold text-primary",children:u.majorElective.earned})]})]}),a.jsxs("div",{className:"xl:col-span-9 bg-background p-6 rounded-xl border border-gray-500 flex flex-col",children:[a.jsx("h3",{className:"text-lg font-semibold text-primary mb-4",children:l.dashboard.genEdu}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-9 gap-6 flex-1",children:[a.jsxs("div",{className:"lg:col-span-5 flex flex-col gap-4 h-full",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 flex-1",children:[a.jsxs("div",{className:"bg-surface/30 p-4 rounded-lg border border-gray-600 h-full flex flex-col justify-center relative",children:[a.jsx(mr,{label:l.dashboard.langTotal,current:u.genEdu.language.earned,total:u.genEdu.language.required,color:"bg-lang",labelClassName:"text-lang"}),a.jsx("div",{className:"absolute bottom-3 left-4 text-[10px] text-muted",children:l.dashboard.langDesc})]}),a.jsxs("div",{className:"bg-surface/30 p-4 rounded-lg border border-gray-600 h-full flex flex-col justify-center relative",children:[a.jsx(mr,{label:l.categories?.Sports||"Sport & Health",current:u.genEdu.sports?.earned||0,total:u.genEdu.sports?.required||4,color:"bg-sports",labelClassName:"text-sports"}),a.jsx("div",{className:"absolute bottom-3 left-4 text-[10px] text-muted",children:l.dashboard.sportsCreditsNoCount})]}),a.jsx("div",{className:"bg-surface/30 p-4 rounded-lg border border-gray-600 h-full flex flex-col justify-center",children:a.jsx(mr,{label:l.dashboard.crossCollege,current:u.genEdu.crossCollege.earned,total:u.genEdu.crossCollege.required,color:"bg-inter",labelClassName:"text-inter"})}),a.jsx("div",{className:"bg-surface/30 p-4 rounded-lg border border-gray-600 h-full flex flex-col justify-center",children:a.jsx(mr,{label:l.dashboard.universityWay,current:u.universityWay.count,total:u.universityWay.required,color:"bg-primer",subLabel:l.dashboard.events,labelClassName:"text-primer"})})]}),a.jsxs("div",{className:Hc("flex items-center justify-between p-6 rounded-lg border transition-all",u.genEdu.service.earned>0?"bg-emerald-500/10 border-emerald-500/30":"bg-surface/30 border-gray-600"),children:[a.jsx("span",{className:"font-medium text-foreground text-sm",children:l.dashboard.service}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:Hc("text-xs font-bold",u.genEdu.service.earned>0?"text-emerald-400":"text-muted"),children:u.genEdu.service.earned>0?"Completed":"Req: 1 Course"}),u.genEdu.service.earned>0&&a.jsx(vt,{size:16,className:"text-emerald-500"})]})]})]}),a.jsxs("div",{className:"lg:col-span-4 bg-surface/30 p-6 rounded-lg border border-gray-600 flex flex-col h-full gap-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-md font-medium text-boya mb-6",children:l.dashboard.boya}),a.jsx(mr,{label:l.dashboard.boyaTotal,current:u.genEdu.boya.earned,total:u.genEdu.boya.required,color:"bg-boya"}),u.genEdu.boya.emiRequired>0&&a.jsx("div",{className:"mt-6",children:a.jsx(mr,{label:l.dashboard.emiBoya,current:u.genEdu.boya.emiEarned,total:u.genEdu.boya.emiRequired,color:"bg-boya-emi",variant:"s"})})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsx("div",{className:"text-xs font-medium text-muted",children:l.dashboard.dimensions}),a.jsxs("div",{className:"text-xs font-medium text-boya",children:[l.dashboard.uniqueDim," ",u.boyaStatus.uniqueDimensions.length," / 4"]})]}),a.jsx("div",{className:"flex flex-wrap justify-start sm:justify-start gap-1.5 sm:gap-2",children:[1,2,3,4,5,6].map(S=>{const R=`Dimension ${S}`,j=u.boyaStatus.uniqueDimensions.includes(R);return a.jsxs("div",{className:`
                                                    w-8 h-8 sm:w-10 sm:h-10 rounded-full flex items-center justify-center text-xs sm:text-sm font-bold border transition-all
                                                    ${j?"bg-boya border-boya text-surface":"bg-surface/50 border-gray-600 text-muted"}
                                                `,children:["D",S]},S)})})]})]})]})]})]})]})]})}),hC="nsysu-labels-library",fC="nsysu-course-labels",lp=["#FCA5A5","#FDBA74","#FCD34D","#86EFAC","#67E8F9","#93C5FD","#C4B5FD","#F9A8D4","#CBD5E1"],mC=[{text:"Easy",color:"#22c55e"},{text:"Hard",color:"#ef4444"},{text:"Morning",color:"#f97316"},{text:"Afternoon",color:"#3b82f6"},{text:"To Take",color:"#a855f7"}],oN=k.createContext(null),Uk=({children:r})=>{const[e,t]=k.useState(()=>{const S=localStorage.getItem(hC);if(!S)return mC;try{const R=JSON.parse(S);return Array.isArray(R)&&typeof R[0]=="string"?R.map((j,V)=>({text:j.trim(),color:lp[V%lp.length]})):R.map(j=>({...j,text:j.text.trim()}))}catch(R){return console.error("Failed to parse labels",R),[]}}),[s,A]=k.useState(()=>{const S=localStorage.getItem(fC);return S?JSON.parse(S):{}});k.useEffect(()=>{localStorage.setItem(hC,JSON.stringify(e))},[e]),k.useEffect(()=>{localStorage.setItem(fC,JSON.stringify(s))},[s]);const v={allUserLabels:e,courseUserLabels:s,addLabelToLibrary:(S,R)=>{const j=S.trim();j&&t(V=>V.some(P=>P.text===j)?V:[...V,{text:j,color:R}])},removeLabelFromLibrary:S=>{t(R=>R.filter(j=>j.text!==S)),A(R=>{const j={...R};return Object.keys(j).forEach(V=>{j[V]=j[V].filter(P=>P!==S)}),j})},toggleLabelForCourse:(S,R,j)=>{const V=R.trim();if(!V)return;const P=j?`${j}_${S}`:S;A(G=>{const q=G[P]||[];if(q.includes(V)){const te=q.filter(z=>z!==V);if(te.length===0){const{[P]:z,...E}=G;return E}return{...G,[P]:te}}else return{...G,[P]:[...q,V]}})},setLabelForCourse:(S,R,j,V)=>{const P=R.trim();if(!P)return;const G=V?`${V}_${S}`:S;A(q=>{const W=q[G]||[],te=W.includes(P);if(j&&!te)return{...q,[G]:[...W,P]};if(!j&&te){const z=W.filter(E=>E!==P);if(z.length===0){const{[G]:E,...N}=q;return N}return{...q,[G]:z}}return q})},getLabelsForCourse:(S,R)=>{const j=R?`${R}_${S}`:S;return(s[j]||[]).map(P=>e.find(G=>G.text===P)).filter(P=>!!P)},clearAllLabels:()=>{t(mC),A({})},importLabels:(S,R)=>{Array.isArray(S)&&t(S),R&&typeof R=="object"&&A(R)},DEFAULT_COLORS:lp};return a.jsx(oN.Provider,{value:v,children:r})},Qk=()=>{const r=k.useContext(oN);if(!r)throw new Error("useLabelContext must be used within a LabelProvider");return r},yd=()=>Qk(),Fk=({course:r,onEdit:e,onLabelClick:t})=>{const{t:s}=it(),{getLabelsForCourse:A}=yd(),d=r.category==="General Education"?r.genEduSubCategory?Bx[r.genEduSubCategory]:af["General Education"]:af[r.category],u=r.genEduSubCategory,f=u?Bx[u]:d,g=A(r.id);return a.jsxs("div",{className:"group/card relative bg-surface hover:bg-surface/80 transition-all active:scale-[0.98] p-3 rounded-lg border border-gray-600 shadow-sm mb-2",children:[a.jsxs("div",{className:"flex justify-between items-start mb-1 gap-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold text-foreground text-sm line-clamp-2",children:r.name}),r.teacher&&a.jsx("p",{className:"text-xs text-muted/80 line-clamp-1",children:r.teacher})]}),a.jsx("div",{className:"flex flex-col items-end gap-1 flex-shrink-0",children:a.jsxs("span",{className:`text-xs font-bold px-1.5 py-0.5 rounded ${r.isWithdrawn||["D","E","F","Fail","FAIL"].includes(r.grade||"")?"bg-red-500/10 text-red-500 decoration-red-500 line-through":"text-muted bg-background"}`,children:[r.credits,s.courseList.cr]})})]}),a.jsx("div",{className:"flex flex-wrap gap-1 mt-1 mb-2",children:t&&g.map(x=>a.jsx("span",{className:"text-[10px] text-white px-2 py-0.5 rounded-full font-bold shadow-sm backdrop-blur-[2px]",style:{backgroundColor:`${x.color}99`},children:x.text},x.text))}),a.jsxs("div",{className:"flex justify-between items-end mt-2",children:[a.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.jsx("span",{className:`text-[10px] uppercase font-bold px-1.5 py-0.5 rounded ${f}`,children:r.category==="General Education"?s.categories[u]||u||"GenEdu":(s.categories[r.category]||r.category).replace("Major ","")}),r.isEMI&&!r.isExemption&&r.genEduSubCategory!=="Primer"&&a.jsx("span",{className:"text-[10px] font-bold px-1.5 py-0.5 rounded bg-warning text-black",children:"EMI"}),r.isExemption&&a.jsx("span",{className:"text-[10px] font-bold px-1.5 py-0.5 rounded bg-gray-500 text-white",children:s.form.isExemption})]}),a.jsxs("div",{className:"flex gap-1 opacity-0 group-hover/card:opacity-100 transition-all",children:[t&&a.jsx("button",{onClick:()=>t(r),className:"text-muted hover:text-primary p-1 hover:bg-surface/50 rounded",title:"Labels",children:a.jsx(rN,{size:14})}),a.jsx("button",{onClick:()=>e(r),className:"text-muted hover:text-primary p-1 hover:bg-surface/50 rounded",title:"Edit",children:a.jsx(z0,{size:14})})]})]})]})},Ik=({semester:r,courses:e,onEdit:t,onViewSchedule:s,onLabelClick:A,onFixData:l})=>{const{t:d}=it(),u=f=>{if(d.semesters[f])return d.semesters[f];const g=f.split(" ");if(g.length>=2&&g[0]==="Year"){const x=g[1],y=g.slice(2).join(" ");if(d.semesters["Year 1 Sem 1"].includes("")){const S=["","","","","","","",""][parseInt(x)-1]||x;if(y==="Summer")return`${S} ${d.catalog.summer}`;if(y==="Sem 1")return`${S} `;if(y==="Sem 2")return`${S} `}else{if(y==="Sem 1")return`Year ${x} Fall Semester`;if(y==="Sem 2")return`Year ${x} Spring Semester`;if(y==="Summer")return`Year ${x} Summer`}}return f.replace("Summer",d.catalog.summer)};return a.jsxs("div",{className:"w-80 flex-shrink-0 flex flex-col h-full",children:[a.jsxs("div",{className:"mb-3 px-1",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("h3",{className:"font-bold text-foreground",children:u(r)}),(()=>{const f=nN(e);return f?a.jsxs("span",{className:"text-xs font-bold text-primary bg-primary/10 px-2 py-1 rounded",children:["GPA ",aN(f.gpa)]}):null})()]}),a.jsx("button",{id:r==="Year 1 Sem 1"?"schedule-grade-btn":void 0,onClick:s,className:"w-full text-xs bg-surface hover:bg-primary hover:text-white text-muted px-3 py-2 rounded-lg transition-colors border border-gray-600 hover:border-primary font-medium flex items-center justify-center gap-2",children:d.courseList.schedule}),l&&e.some(f=>f.isExemption||f.category==="University Way"||f.category==="General Education"&&(f.genEduSubCategory==="Primer"||f.genEduSubCategory==="Service")||f.userLabels?.includes("manual")||!f.name.includes(`
`)&&!/[\u4e00-\u9fa5]/.test(f.name)||(f.fixAttempts||0)>=2?!1:!f.originalId||!f.originalSemester||!f.department)&&a.jsxs("button",{onClick:()=>l(r),className:"w-full mt-2 text-xs bg-red-50 hover:bg-red-100 text-red-600 px-3 py-2 rounded-lg transition-colors border border-red-200 hover:border-red-300 font-medium flex items-center justify-center gap-2",children:[a.jsx(vx,{size:12}),d.app.fixData||"Fix Data"]})]}),a.jsxs("div",{className:"flex-1 rounded-xl p-3 border-2 transition-colors min-h-[150px] bg-background border-gray-600/30 flex flex-col",children:[e.length===0&&a.jsx("div",{className:"h-full flex items-center justify-center text-slate-600 text-sm italic",children:d.courseList.noCourses}),a.jsx("div",{className:"flex-1 overflow-y-auto [-webkit-overflow-scrolling:touch]",children:e.map(f=>a.jsx(Fk,{course:f,onEdit:t,onLabelClick:A},f.id))})]})]})},Dk=k.memo(({semesters:r,courses:e,onEdit:t,onViewSchedule:s,onLabelClick:A,onFixData:l})=>{const d=k.useRef(null);k.useEffect(()=>{const g=localStorage.getItem("nsysu-tracker-scroll");g&&d.current&&r.length>0&&setTimeout(()=>{d.current&&(d.current.scrollLeft=Number(g))},0)},[r.length]);const u=()=>{d.current&&localStorage.setItem("nsysu-tracker-scroll",d.current.scrollLeft.toString())},f=g=>{d.current&&d.current.scrollBy({left:g,behavior:"smooth"})};return a.jsxs("div",{className:"relative group",children:[a.jsx("button",{onClick:()=>f(-300),className:"absolute -left-12 top-1/2 -translate-y-1/2 z-10 bg-surface border border-border p-2 rounded-full text-foreground shadow-lg hover:bg-primary hover:border-primary hover:text-white transition-all shadow-black/10 opacity-0 group-hover:opacity-100",title:"Scroll Left",children:a.jsx(PD,{})}),a.jsx("div",{ref:d,onScroll:u,className:"flex gap-4 overflow-x-auto pb-4 px-1 snap-x custom-scrollbar",children:r.map(g=>a.jsx("div",{className:"snap-start h-full",children:a.jsx(Ik,{semester:g,courses:e.filter(x=>x.semester===g),onEdit:t,onViewSchedule:()=>s(g),onFixData:l,onLabelClick:A})},g))}),a.jsx("button",{onClick:()=>f(300),className:"absolute -right-12 top-1/2 -translate-y-1/2 z-10 bg-surface border border-border p-2 rounded-full text-foreground shadow-lg hover:bg-primary hover:border-primary hover:text-white transition-all shadow-black/10 opacity-0 group-hover:opacity-100",title:"Scroll Right",children:a.jsx(W2,{})})]})});var $t=T1();var Ex=function(r,e){return Ex=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var A in s)Object.prototype.hasOwnProperty.call(s,A)&&(t[A]=s[A])},Ex(r,e)};function Fn(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Ex(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Nx=function(){return Nx=Object.assign||function(e){for(var t,s=1,A=arguments.length;s<A;s++){t=arguments[s];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},Nx.apply(this,arguments)};function ws(r,e,t,s){function A(l){return l instanceof t?l:new t(function(d){d(l)})}return new(t||(t=Promise))(function(l,d){function u(x){try{g(s.next(x))}catch(y){d(y)}}function f(x){try{g(s.throw(x))}catch(y){d(y)}}function g(x){x.done?l(x.value):A(x.value).then(u,f)}g((s=s.apply(r,[])).next())})}function cs(r,e){var t={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,A,l,d;return d={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function u(g){return function(x){return f([g,x])}}function f(g){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,A&&(l=g[0]&2?A.return:g[0]?A.throw||((l=A.return)&&l.call(A),0):A.next)&&!(l=l.call(A,g[1])).done)return l;switch(A=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,A=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(l=t.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){t.label=g[1];break}if(g[0]===6&&t.label<l[1]){t.label=l[1],l=g;break}if(l&&t.label<l[2]){t.label=l[2],t.ops.push(g);break}l[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(r,t)}catch(x){g=[6,x],A=0}finally{s=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}function Xu(r,e,t){if(arguments.length===2)for(var s=0,A=e.length,l;s<A;s++)(l||!(s in e))&&(l||(l=Array.prototype.slice.call(e,0,s)),l[s]=e[s]);return r.concat(l||e)}var Oa=(function(){function r(e,t,s,A){this.left=e,this.top=t,this.width=s,this.height=A}return r.prototype.add=function(e,t,s,A){return new r(this.left+e,this.top+t,this.width+s,this.height+A)},r.fromClientRect=function(e,t){return new r(t.left+e.windowBounds.left,t.top+e.windowBounds.top,t.width,t.height)},r.fromDOMRectList=function(e,t){var s=Array.from(t).find(function(A){return A.width!==0});return s?new r(s.left+e.windowBounds.left,s.top+e.windowBounds.top,s.width,s.height):r.EMPTY},r.EMPTY=new r(0,0,0,0),r})(),Hf=function(r,e){return Oa.fromClientRect(r,e.getBoundingClientRect())},kk=function(r){var e=r.body,t=r.documentElement;if(!e||!t)throw new Error("Unable to get document size");var s=Math.max(Math.max(e.scrollWidth,t.scrollWidth),Math.max(e.offsetWidth,t.offsetWidth),Math.max(e.clientWidth,t.clientWidth)),A=Math.max(Math.max(e.scrollHeight,t.scrollHeight),Math.max(e.offsetHeight,t.offsetHeight),Math.max(e.clientHeight,t.clientHeight));return new Oa(0,0,s,A)},Of=function(r){for(var e=[],t=0,s=r.length;t<s;){var A=r.charCodeAt(t++);if(A>=55296&&A<=56319&&t<s){var l=r.charCodeAt(t++);(l&64512)===56320?e.push(((A&1023)<<10)+(l&1023)+65536):(e.push(A),t--)}else e.push(A)}return e},Cr=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,r);var t=r.length;if(!t)return"";for(var s=[],A=-1,l="";++A<t;){var d=r[A];d<=65535?s.push(d):(d-=65536,s.push((d>>10)+55296,d%1024+56320)),(A+1===t||s.length>16384)&&(l+=String.fromCharCode.apply(String,s),s.length=0)}return l},gC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Rk=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ju=0;Ju<gC.length;Ju++)Rk[gC.charCodeAt(Ju)]=Ju;var pC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Nc=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Wu=0;Wu<pC.length;Wu++)Nc[pC.charCodeAt(Wu)]=Wu;var Mk=function(r){var e=r.length*.75,t=r.length,s,A=0,l,d,u,f;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);var g=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),x=Array.isArray(g)?g:new Uint8Array(g);for(s=0;s<t;s+=4)l=Nc[r.charCodeAt(s)],d=Nc[r.charCodeAt(s+1)],u=Nc[r.charCodeAt(s+2)],f=Nc[r.charCodeAt(s+3)],x[A++]=l<<2|d>>4,x[A++]=(d&15)<<4|u>>2,x[A++]=(u&3)<<6|f&63;return g},Lk=function(r){for(var e=r.length,t=[],s=0;s<e;s+=2)t.push(r[s+1]<<8|r[s]);return t},Hk=function(r){for(var e=r.length,t=[],s=0;s<e;s+=4)t.push(r[s+3]<<24|r[s+2]<<16|r[s+1]<<8|r[s]);return t},UA=5,G0=11,cp=2,Ok=G0-UA,lN=65536>>UA,Pk=1<<UA,dp=Pk-1,Vk=1024>>UA,zk=lN+Vk,Kk=zk,Gk=32,qk=Kk+Gk,Yk=65536>>G0,$k=1<<Ok,Xk=$k-1,xC=function(r,e,t){return r.slice?r.slice(e,t):new Uint16Array(Array.prototype.slice.call(r,e,t))},Jk=function(r,e,t){return r.slice?r.slice(e,t):new Uint32Array(Array.prototype.slice.call(r,e,t))},Wk=function(r,e){var t=Mk(r),s=Array.isArray(t)?Hk(t):new Uint32Array(t),A=Array.isArray(t)?Lk(t):new Uint16Array(t),l=24,d=xC(A,l/2,s[4]/2),u=s[5]===2?xC(A,(l+s[4])/2):Jk(s,Math.ceil((l+s[4])/4));return new Zk(s[0],s[1],s[2],s[3],d,u)},Zk=(function(){function r(e,t,s,A,l,d){this.initialValue=e,this.errorValue=t,this.highStart=s,this.highValueIndex=A,this.index=l,this.data=d}return r.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>UA],t=(t<<cp)+(e&dp),this.data[t];if(e<=65535)return t=this.index[lN+(e-55296>>UA)],t=(t<<cp)+(e&dp),this.data[t];if(e<this.highStart)return t=qk-Yk+(e>>G0),t=this.index[t],t+=e>>UA&Xk,t=this.index[t],t=(t<<cp)+(e&dp),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},r})(),yC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e3=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Zu=0;Zu<yC.length;Zu++)e3[yC.charCodeAt(Zu)]=Zu;var t3="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",bC=50,r3=1,cN=2,dN=3,s3=4,n3=5,vC=7,uN=8,wC=9,Ti=10,Sx=11,BC=12,jx=13,a3=14,Sc=15,_x=16,eh=17,gc=18,i3=19,CC=20,Tx=21,pc=22,up=23,Fo=24,Ks=25,jc=26,_c=27,Io=28,A3=29,CA=30,o3=31,th=32,rh=33,Ux=34,Qx=35,Fx=36,nd=37,Ix=38,Dh=39,kh=40,hp=41,hN=42,l3=43,c3=[9001,65288],fN="!",mt="",sh="",Dx=Wk(t3),Qa=[CA,Fx],kx=[r3,cN,dN,n3],mN=[Ti,uN],EC=[_c,jc],d3=kx.concat(mN),NC=[Ix,Dh,kh,Ux,Qx],u3=[Sc,jx],h3=function(r,e){e===void 0&&(e="strict");var t=[],s=[],A=[];return r.forEach(function(l,d){var u=Dx.get(l);if(u>bC?(A.push(!0),u-=bC):A.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(l)!==-1)return s.push(d),t.push(_x);if(u===s3||u===Sx){if(d===0)return s.push(d),t.push(CA);var f=t[d-1];return d3.indexOf(f)===-1?(s.push(s[d-1]),t.push(f)):(s.push(d),t.push(CA))}if(s.push(d),u===o3)return t.push(e==="strict"?Tx:nd);if(u===hN||u===A3)return t.push(CA);if(u===l3)return l>=131072&&l<=196605||l>=196608&&l<=262141?t.push(nd):t.push(CA);t.push(u)}),[s,t,A]},fp=function(r,e,t,s){var A=s[t];if(Array.isArray(r)?r.indexOf(A)!==-1:r===A)for(var l=t;l<=s.length;){l++;var d=s[l];if(d===e)return!0;if(d!==Ti)break}if(A===Ti)for(var l=t;l>0;){l--;var u=s[l];if(Array.isArray(r)?r.indexOf(u)!==-1:r===u)for(var f=t;f<=s.length;){f++;var d=s[f];if(d===e)return!0;if(d!==Ti)break}if(u!==Ti)break}return!1},SC=function(r,e){for(var t=r;t>=0;){var s=e[t];if(s===Ti)t--;else return s}return 0},f3=function(r,e,t,s,A){if(t[s]===0)return mt;var l=s-1;if(Array.isArray(A)&&A[l]===!0)return mt;var d=l-1,u=l+1,f=e[l],g=d>=0?e[d]:0,x=e[u];if(f===cN&&x===dN)return mt;if(kx.indexOf(f)!==-1)return fN;if(kx.indexOf(x)!==-1||mN.indexOf(x)!==-1)return mt;if(SC(l,e)===uN)return sh;if(Dx.get(r[l])===Sx||(f===th||f===rh)&&Dx.get(r[u])===Sx||f===vC||x===vC||f===wC||[Ti,jx,Sc].indexOf(f)===-1&&x===wC||[eh,gc,i3,Fo,Io].indexOf(x)!==-1||SC(l,e)===pc||fp(up,pc,l,e)||fp([eh,gc],Tx,l,e)||fp(BC,BC,l,e))return mt;if(f===Ti)return sh;if(f===up||x===up)return mt;if(x===_x||f===_x)return sh;if([jx,Sc,Tx].indexOf(x)!==-1||f===a3||g===Fx&&u3.indexOf(f)!==-1||f===Io&&x===Fx||x===CC||Qa.indexOf(x)!==-1&&f===Ks||Qa.indexOf(f)!==-1&&x===Ks||f===_c&&[nd,th,rh].indexOf(x)!==-1||[nd,th,rh].indexOf(f)!==-1&&x===jc||Qa.indexOf(f)!==-1&&EC.indexOf(x)!==-1||EC.indexOf(f)!==-1&&Qa.indexOf(x)!==-1||[_c,jc].indexOf(f)!==-1&&(x===Ks||[pc,Sc].indexOf(x)!==-1&&e[u+1]===Ks)||[pc,Sc].indexOf(f)!==-1&&x===Ks||f===Ks&&[Ks,Io,Fo].indexOf(x)!==-1)return mt;if([Ks,Io,Fo,eh,gc].indexOf(x)!==-1)for(var y=l;y>=0;){var v=e[y];if(v===Ks)return mt;if([Io,Fo].indexOf(v)!==-1)y--;else break}if([_c,jc].indexOf(x)!==-1)for(var y=[eh,gc].indexOf(f)!==-1?d:l;y>=0;){var v=e[y];if(v===Ks)return mt;if([Io,Fo].indexOf(v)!==-1)y--;else break}if(Ix===f&&[Ix,Dh,Ux,Qx].indexOf(x)!==-1||[Dh,Ux].indexOf(f)!==-1&&[Dh,kh].indexOf(x)!==-1||[kh,Qx].indexOf(f)!==-1&&x===kh||NC.indexOf(f)!==-1&&[CC,jc].indexOf(x)!==-1||NC.indexOf(x)!==-1&&f===_c||Qa.indexOf(f)!==-1&&Qa.indexOf(x)!==-1||f===Fo&&Qa.indexOf(x)!==-1||Qa.concat(Ks).indexOf(f)!==-1&&x===pc&&c3.indexOf(r[u])===-1||Qa.concat(Ks).indexOf(x)!==-1&&f===gc)return mt;if(f===hp&&x===hp){for(var S=t[l],R=1;S>0&&(S--,e[S]===hp);)R++;if(R%2!==0)return mt}return f===th&&x===rh?mt:sh},m3=function(r,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var t=h3(r,e.lineBreak),s=t[0],A=t[1],l=t[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(A=A.map(function(u){return[Ks,CA,hN].indexOf(u)!==-1?nd:u}));var d=e.wordBreak==="keep-all"?l.map(function(u,f){return u&&r[f]>=19968&&r[f]<=40959}):void 0;return[s,A,d]},g3=(function(){function r(e,t,s,A){this.codePoints=e,this.required=t===fN,this.start=s,this.end=A}return r.prototype.slice=function(){return Cr.apply(void 0,this.codePoints.slice(this.start,this.end))},r})(),p3=function(r,e){var t=Of(r),s=m3(t,e),A=s[0],l=s[1],d=s[2],u=t.length,f=0,g=0;return{next:function(){if(g>=u)return{done:!0,value:null};for(var x=mt;g<u&&(x=f3(t,l,A,++g,d))===mt;);if(x!==mt||g===u){var y=new g3(t,x,f,g);return f=g,{value:y,done:!1}}return{done:!0,value:null}}}},x3=1,y3=2,bd=4,jC=8,Af=10,_C=47,Pc=92,b3=9,v3=32,nh=34,xc=61,w3=35,B3=36,C3=37,ah=39,ih=40,yc=41,E3=95,Ds=45,N3=33,S3=60,j3=62,_3=64,T3=91,U3=93,Q3=61,F3=123,Ah=63,I3=125,TC=124,D3=126,k3=128,UC=65533,mp=42,jA=43,R3=44,M3=58,L3=59,ad=46,H3=0,O3=8,P3=11,V3=14,z3=31,K3=127,$n=-1,gN=48,pN=97,xN=101,G3=102,q3=117,Y3=122,yN=65,bN=69,vN=70,$3=85,X3=90,us=function(r){return r>=gN&&r<=57},J3=function(r){return r>=55296&&r<=57343},Do=function(r){return us(r)||r>=yN&&r<=vN||r>=pN&&r<=G3},W3=function(r){return r>=pN&&r<=Y3},Z3=function(r){return r>=yN&&r<=X3},eR=function(r){return W3(r)||Z3(r)},tR=function(r){return r>=k3},oh=function(r){return r===Af||r===b3||r===v3},of=function(r){return eR(r)||tR(r)||r===E3},QC=function(r){return of(r)||us(r)||r===Ds},rR=function(r){return r>=H3&&r<=O3||r===P3||r>=V3&&r<=z3||r===K3},Ei=function(r,e){return r!==Pc?!1:e!==Af},lh=function(r,e,t){return r===Ds?of(e)||Ei(e,t):of(r)?!0:!!(r===Pc&&Ei(r,e))},gp=function(r,e,t){return r===jA||r===Ds?us(e)?!0:e===ad&&us(t):us(r===ad?e:r)},sR=function(r){var e=0,t=1;(r[e]===jA||r[e]===Ds)&&(r[e]===Ds&&(t=-1),e++);for(var s=[];us(r[e]);)s.push(r[e++]);var A=s.length?parseInt(Cr.apply(void 0,s),10):0;r[e]===ad&&e++;for(var l=[];us(r[e]);)l.push(r[e++]);var d=l.length,u=d?parseInt(Cr.apply(void 0,l),10):0;(r[e]===bN||r[e]===xN)&&e++;var f=1;(r[e]===jA||r[e]===Ds)&&(r[e]===Ds&&(f=-1),e++);for(var g=[];us(r[e]);)g.push(r[e++]);var x=g.length?parseInt(Cr.apply(void 0,g),10):0;return t*(A+u*Math.pow(10,-d))*Math.pow(10,f*x)},nR={type:2},aR={type:3},iR={type:4},AR={type:13},oR={type:8},lR={type:21},cR={type:9},dR={type:10},uR={type:11},hR={type:12},fR={type:14},ch={type:23},mR={type:1},gR={type:25},pR={type:24},xR={type:26},yR={type:27},bR={type:28},vR={type:29},wR={type:31},Rx={type:32},wN=(function(){function r(){this._value=[]}return r.prototype.write=function(e){this._value=this._value.concat(Of(e))},r.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==Rx;)e.push(t),t=this.consumeToken();return e},r.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case nh:return this.consumeStringToken(nh);case w3:var t=this.peekCodePoint(0),s=this.peekCodePoint(1),A=this.peekCodePoint(2);if(QC(t)||Ei(s,A)){var l=lh(t,s,A)?y3:x3,d=this.consumeName();return{type:5,value:d,flags:l}}break;case B3:if(this.peekCodePoint(0)===xc)return this.consumeCodePoint(),AR;break;case ah:return this.consumeStringToken(ah);case ih:return nR;case yc:return aR;case mp:if(this.peekCodePoint(0)===xc)return this.consumeCodePoint(),fR;break;case jA:if(gp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case R3:return iR;case Ds:var u=e,f=this.peekCodePoint(0),g=this.peekCodePoint(1);if(gp(u,f,g))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(lh(u,f,g))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(f===Ds&&g===j3)return this.consumeCodePoint(),this.consumeCodePoint(),pR;break;case ad:if(gp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case _C:if(this.peekCodePoint(0)===mp)for(this.consumeCodePoint();;){var x=this.consumeCodePoint();if(x===mp&&(x=this.consumeCodePoint(),x===_C))return this.consumeToken();if(x===$n)return this.consumeToken()}break;case M3:return xR;case L3:return yR;case S3:if(this.peekCodePoint(0)===N3&&this.peekCodePoint(1)===Ds&&this.peekCodePoint(2)===Ds)return this.consumeCodePoint(),this.consumeCodePoint(),gR;break;case _3:var y=this.peekCodePoint(0),v=this.peekCodePoint(1),S=this.peekCodePoint(2);if(lh(y,v,S)){var d=this.consumeName();return{type:7,value:d}}break;case T3:return bR;case Pc:if(Ei(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case U3:return vR;case Q3:if(this.peekCodePoint(0)===xc)return this.consumeCodePoint(),oR;break;case F3:return uR;case I3:return hR;case q3:case $3:var R=this.peekCodePoint(0),j=this.peekCodePoint(1);return R===jA&&(Do(j)||j===Ah)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case TC:if(this.peekCodePoint(0)===xc)return this.consumeCodePoint(),cR;if(this.peekCodePoint(0)===TC)return this.consumeCodePoint(),lR;break;case D3:if(this.peekCodePoint(0)===xc)return this.consumeCodePoint(),dR;break;case $n:return Rx}return oh(e)?(this.consumeWhiteSpace(),wR):us(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):of(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Cr(e)}},r.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},r.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},r.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},r.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();Do(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var s=!1;t===Ah&&e.length<6;)e.push(t),t=this.consumeCodePoint(),s=!0;if(s){var A=parseInt(Cr.apply(void 0,e.map(function(f){return f===Ah?gN:f})),16),l=parseInt(Cr.apply(void 0,e.map(function(f){return f===Ah?vN:f})),16);return{type:30,start:A,end:l}}var d=parseInt(Cr.apply(void 0,e),16);if(this.peekCodePoint(0)===Ds&&Do(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var u=[];Do(t)&&u.length<6;)u.push(t),t=this.consumeCodePoint();var l=parseInt(Cr.apply(void 0,u),16);return{type:30,start:d,end:l}}else return{type:30,start:d,end:d}},r.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===ih?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===ih?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},r.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===$n)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===ah||t===nh){var s=this.consumeStringToken(this.consumeCodePoint());return s.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===$n||this.peekCodePoint(0)===yc)?(this.consumeCodePoint(),{type:22,value:s.value}):(this.consumeBadUrlRemnants(),ch)}for(;;){var A=this.consumeCodePoint();if(A===$n||A===yc)return{type:22,value:Cr.apply(void 0,e)};if(oh(A))return this.consumeWhiteSpace(),this.peekCodePoint(0)===$n||this.peekCodePoint(0)===yc?(this.consumeCodePoint(),{type:22,value:Cr.apply(void 0,e)}):(this.consumeBadUrlRemnants(),ch);if(A===nh||A===ah||A===ih||rR(A))return this.consumeBadUrlRemnants(),ch;if(A===Pc)if(Ei(A,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),ch;else e.push(A)}},r.prototype.consumeWhiteSpace=function(){for(;oh(this.peekCodePoint(0));)this.consumeCodePoint()},r.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===yc||e===$n)return;Ei(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},r.prototype.consumeStringSlice=function(e){for(var t=5e4,s="";e>0;){var A=Math.min(t,e);s+=Cr.apply(void 0,this._value.splice(0,A)),e-=A}return this._value.shift(),s},r.prototype.consumeStringToken=function(e){var t="",s=0;do{var A=this._value[s];if(A===$n||A===void 0||A===e)return t+=this.consumeStringSlice(s),{type:0,value:t};if(A===Af)return this._value.splice(0,s),mR;if(A===Pc){var l=this._value[s+1];l!==$n&&l!==void 0&&(l===Af?(t+=this.consumeStringSlice(s),s=-1,this._value.shift()):Ei(A,l)&&(t+=this.consumeStringSlice(s),t+=Cr(this.consumeEscapedCodePoint()),s=-1))}s++}while(!0)},r.prototype.consumeNumber=function(){var e=[],t=bd,s=this.peekCodePoint(0);for((s===jA||s===Ds)&&e.push(this.consumeCodePoint());us(this.peekCodePoint(0));)e.push(this.consumeCodePoint());s=this.peekCodePoint(0);var A=this.peekCodePoint(1);if(s===ad&&us(A))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=jC;us(this.peekCodePoint(0));)e.push(this.consumeCodePoint());s=this.peekCodePoint(0),A=this.peekCodePoint(1);var l=this.peekCodePoint(2);if((s===bN||s===xN)&&((A===jA||A===Ds)&&us(l)||us(A)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=jC;us(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[sR(e),t]},r.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],s=e[1],A=this.peekCodePoint(0),l=this.peekCodePoint(1),d=this.peekCodePoint(2);if(lh(A,l,d)){var u=this.consumeName();return{type:15,number:t,flags:s,unit:u}}return A===C3?(this.consumeCodePoint(),{type:16,number:t,flags:s}):{type:17,number:t,flags:s}},r.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Do(e)){for(var t=Cr(e);Do(this.peekCodePoint(0))&&t.length<6;)t+=Cr(this.consumeCodePoint());oh(this.peekCodePoint(0))&&this.consumeCodePoint();var s=parseInt(t,16);return s===0||J3(s)||s>1114111?UC:s}return e===$n?UC:e},r.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(QC(t))e+=Cr(t);else if(Ei(t,this.peekCodePoint(0)))e+=Cr(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(t),e}},r})(),BN=(function(){function r(e){this._tokens=e}return r.create=function(e){var t=new wN;return t.write(e),new r(t.read())},r.parseValue=function(e){return r.create(e).parseComponentValue()},r.parseValues=function(e){return r.create(e).parseComponentValues()},r.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},r.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(t.type===32)return e;e.push(t),e.push()}},r.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},r.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},s=this.consumeToken();;){if(s.type===32||CR(s,e))return t;this.reconsumeToken(s),t.values.push(this.consumeComponentValue()),s=this.consumeToken()}},r.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var s=this.consumeToken();if(s.type===32||s.type===3)return t;this.reconsumeToken(s),t.values.push(this.consumeComponentValue())}},r.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?Rx:e},r.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},r})(),vd=function(r){return r.type===15},xl=function(r){return r.type===17},Lt=function(r){return r.type===20},BR=function(r){return r.type===0},Mx=function(r,e){return Lt(r)&&r.value===e},CN=function(r){return r.type!==31},cl=function(r){return r.type!==31&&r.type!==4},la=function(r){var e=[],t=[];return r.forEach(function(s){if(s.type===4){if(t.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(t),t=[];return}s.type!==31&&t.push(s)}),t.length&&e.push(t),e},CR=function(r,e){return e===11&&r.type===12||e===28&&r.type===29?!0:e===2&&r.type===3},Yi=function(r){return r.type===17||r.type===15},Fr=function(r){return r.type===16||Yi(r)},EN=function(r){return r.length>1?[r[0],r[1]]:[r[0]]},as={type:17,number:0,flags:bd},q0={type:16,number:50,flags:bd},Ui={type:16,number:100,flags:bd},Tc=function(r,e,t){var s=r[0],A=r[1];return[zt(s,e),zt(typeof A<"u"?A:s,t)]},zt=function(r,e){if(r.type===16)return r.number/100*e;if(vd(r))switch(r.unit){case"rem":case"em":return 16*r.number;default:return r.number}return r.number},NN="deg",SN="grad",jN="rad",_N="turn",Pf={name:"angle",parse:function(r,e){if(e.type===15)switch(e.unit){case NN:return Math.PI*e.number/180;case SN:return Math.PI/200*e.number;case jN:return e.number;case _N:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},TN=function(r){return r.type===15&&(r.unit===NN||r.unit===SN||r.unit===jN||r.unit===_N)},UN=function(r){var e=r.filter(Lt).map(function(t){return t.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[as,as];case"to top":case"bottom":return dn(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[as,Ui];case"to right":case"left":return dn(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Ui,Ui];case"to bottom":case"top":return dn(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Ui,as];case"to left":case"right":return dn(270)}return 0},dn=function(r){return Math.PI*r/180},Li={name:"color",parse:function(r,e){if(e.type===18){var t=ER[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return t(r,e.values)}if(e.type===5){if(e.value.length===3){var s=e.value.substring(0,1),A=e.value.substring(1,2),l=e.value.substring(2,3);return Qi(parseInt(s+s,16),parseInt(A+A,16),parseInt(l+l,16),1)}if(e.value.length===4){var s=e.value.substring(0,1),A=e.value.substring(1,2),l=e.value.substring(2,3),d=e.value.substring(3,4);return Qi(parseInt(s+s,16),parseInt(A+A,16),parseInt(l+l,16),parseInt(d+d,16)/255)}if(e.value.length===6){var s=e.value.substring(0,2),A=e.value.substring(2,4),l=e.value.substring(4,6);return Qi(parseInt(s,16),parseInt(A,16),parseInt(l,16),1)}if(e.value.length===8){var s=e.value.substring(0,2),A=e.value.substring(2,4),l=e.value.substring(4,6),d=e.value.substring(6,8);return Qi(parseInt(s,16),parseInt(A,16),parseInt(l,16),parseInt(d,16)/255)}}if(e.type===20){var u=ka[e.value.toUpperCase()];if(typeof u<"u")return u}return ka.TRANSPARENT}},Hi=function(r){return(255&r)===0},Gr=function(r){var e=255&r,t=255&r>>8,s=255&r>>16,A=255&r>>24;return e<255?"rgba("+A+","+s+","+t+","+e/255+")":"rgb("+A+","+s+","+t+")"},Qi=function(r,e,t,s){return(r<<24|e<<16|t<<8|Math.round(s*255)<<0)>>>0},FC=function(r,e){if(r.type===17)return r.number;if(r.type===16){var t=e===3?1:255;return e===3?r.number/100*t:Math.round(r.number/100*t)}return 0},IC=function(r,e){var t=e.filter(cl);if(t.length===3){var s=t.map(FC),A=s[0],l=s[1],d=s[2];return Qi(A,l,d,1)}if(t.length===4){var u=t.map(FC),A=u[0],l=u[1],d=u[2],f=u[3];return Qi(A,l,d,f)}return 0};function pp(r,e,t){return t<0&&(t+=1),t>=1&&(t-=1),t<1/6?(e-r)*t*6+r:t<1/2?e:t<2/3?(e-r)*6*(2/3-t)+r:r}var DC=function(r,e){var t=e.filter(cl),s=t[0],A=t[1],l=t[2],d=t[3],u=(s.type===17?dn(s.number):Pf.parse(r,s))/(Math.PI*2),f=Fr(A)?A.number/100:0,g=Fr(l)?l.number/100:0,x=typeof d<"u"&&Fr(d)?zt(d,1):1;if(f===0)return Qi(g*255,g*255,g*255,1);var y=g<=.5?g*(f+1):g+f-g*f,v=g*2-y,S=pp(v,y,u+1/3),R=pp(v,y,u),j=pp(v,y,u-1/3);return Qi(S*255,R*255,j*255,x)},ER={hsl:DC,hsla:DC,rgb:IC,rgba:IC},Vc=function(r,e){return Li.parse(r,BN.create(e).parseComponentValue())},ka={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},NR={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(r,e){return e.map(function(t){if(Lt(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},SR={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Vf=function(r,e){var t=Li.parse(r,e[0]),s=e[1];return s&&Fr(s)?{color:t,stop:s}:{color:t,stop:null}},kC=function(r,e){var t=r[0],s=r[r.length-1];t.stop===null&&(t.stop=as),s.stop===null&&(s.stop=Ui);for(var A=[],l=0,d=0;d<r.length;d++){var u=r[d].stop;if(u!==null){var f=zt(u,e);f>l?A.push(f):A.push(l),l=f}else A.push(null)}for(var g=null,d=0;d<A.length;d++){var x=A[d];if(x===null)g===null&&(g=d);else if(g!==null){for(var y=d-g,v=A[g-1],S=(x-v)/(y+1),R=1;R<=y;R++)A[g+R-1]=S*R;g=null}}return r.map(function(j,V){var P=j.color;return{color:P,stop:Math.max(Math.min(1,A[V]/e),0)}})},jR=function(r,e,t){var s=e/2,A=t/2,l=zt(r[0],e)-s,d=A-zt(r[1],t);return(Math.atan2(d,l)+Math.PI*2)%(Math.PI*2)},_R=function(r,e,t){var s=typeof r=="number"?r:jR(r,e,t),A=Math.abs(e*Math.sin(s))+Math.abs(t*Math.cos(s)),l=e/2,d=t/2,u=A/2,f=Math.sin(s-Math.PI/2)*u,g=Math.cos(s-Math.PI/2)*u;return[A,l-g,l+g,d-f,d+f]},En=function(r,e){return Math.sqrt(r*r+e*e)},RC=function(r,e,t,s,A){var l=[[0,0],[0,e],[r,0],[r,e]];return l.reduce(function(d,u){var f=u[0],g=u[1],x=En(t-f,s-g);return(A?x<d.optimumDistance:x>d.optimumDistance)?{optimumCorner:u,optimumDistance:x}:d},{optimumDistance:A?1/0:-1/0,optimumCorner:null}).optimumCorner},TR=function(r,e,t,s,A){var l=0,d=0;switch(r.size){case 0:r.shape===0?l=d=Math.min(Math.abs(e),Math.abs(e-s),Math.abs(t),Math.abs(t-A)):r.shape===1&&(l=Math.min(Math.abs(e),Math.abs(e-s)),d=Math.min(Math.abs(t),Math.abs(t-A)));break;case 2:if(r.shape===0)l=d=Math.min(En(e,t),En(e,t-A),En(e-s,t),En(e-s,t-A));else if(r.shape===1){var u=Math.min(Math.abs(t),Math.abs(t-A))/Math.min(Math.abs(e),Math.abs(e-s)),f=RC(s,A,e,t,!0),g=f[0],x=f[1];l=En(g-e,(x-t)/u),d=u*l}break;case 1:r.shape===0?l=d=Math.max(Math.abs(e),Math.abs(e-s),Math.abs(t),Math.abs(t-A)):r.shape===1&&(l=Math.max(Math.abs(e),Math.abs(e-s)),d=Math.max(Math.abs(t),Math.abs(t-A)));break;case 3:if(r.shape===0)l=d=Math.max(En(e,t),En(e,t-A),En(e-s,t),En(e-s,t-A));else if(r.shape===1){var u=Math.max(Math.abs(t),Math.abs(t-A))/Math.max(Math.abs(e),Math.abs(e-s)),y=RC(s,A,e,t,!1),g=y[0],x=y[1];l=En(g-e,(x-t)/u),d=u*l}break}return Array.isArray(r.size)&&(l=zt(r.size[0],s),d=r.size.length===2?zt(r.size[1],A):l),[l,d]},UR=function(r,e){var t=dn(180),s=[];return la(e).forEach(function(A,l){if(l===0){var d=A[0];if(d.type===20&&d.value==="to"){t=UN(A);return}else if(TN(d)){t=Pf.parse(r,d);return}}var u=Vf(r,A);s.push(u)}),{angle:t,stops:s,type:1}},dh=function(r,e){var t=dn(180),s=[];return la(e).forEach(function(A,l){if(l===0){var d=A[0];if(d.type===20&&["top","left","right","bottom"].indexOf(d.value)!==-1){t=UN(A);return}else if(TN(d)){t=(Pf.parse(r,d)+dn(270))%dn(360);return}}var u=Vf(r,A);s.push(u)}),{angle:t,stops:s,type:1}},QR=function(r,e){var t=dn(180),s=[],A=1,l=0,d=3,u=[];return la(e).forEach(function(f,g){var x=f[0];if(g===0){if(Lt(x)&&x.value==="linear"){A=1;return}else if(Lt(x)&&x.value==="radial"){A=2;return}}if(x.type===18){if(x.name==="from"){var y=Li.parse(r,x.values[0]);s.push({stop:as,color:y})}else if(x.name==="to"){var y=Li.parse(r,x.values[0]);s.push({stop:Ui,color:y})}else if(x.name==="color-stop"){var v=x.values.filter(cl);if(v.length===2){var y=Li.parse(r,v[1]),S=v[0];xl(S)&&s.push({stop:{type:16,number:S.number*100,flags:S.flags},color:y})}}}}),A===1?{angle:(t+dn(180))%dn(360),stops:s,type:A}:{size:d,shape:l,stops:s,position:u,type:A}},QN="closest-side",FN="farthest-side",IN="closest-corner",DN="farthest-corner",kN="circle",RN="ellipse",MN="cover",LN="contain",FR=function(r,e){var t=0,s=3,A=[],l=[];return la(e).forEach(function(d,u){var f=!0;if(u===0){var g=!1;f=d.reduce(function(y,v){if(g)if(Lt(v))switch(v.value){case"center":return l.push(q0),y;case"top":case"left":return l.push(as),y;case"right":case"bottom":return l.push(Ui),y}else(Fr(v)||Yi(v))&&l.push(v);else if(Lt(v))switch(v.value){case kN:return t=0,!1;case RN:return t=1,!1;case"at":return g=!0,!1;case QN:return s=0,!1;case MN:case FN:return s=1,!1;case LN:case IN:return s=2,!1;case DN:return s=3,!1}else if(Yi(v)||Fr(v))return Array.isArray(s)||(s=[]),s.push(v),!1;return y},f)}if(f){var x=Vf(r,d);A.push(x)}}),{size:s,shape:t,stops:A,position:l,type:2}},uh=function(r,e){var t=0,s=3,A=[],l=[];return la(e).forEach(function(d,u){var f=!0;if(u===0?f=d.reduce(function(x,y){if(Lt(y))switch(y.value){case"center":return l.push(q0),!1;case"top":case"left":return l.push(as),!1;case"right":case"bottom":return l.push(Ui),!1}else if(Fr(y)||Yi(y))return l.push(y),!1;return x},f):u===1&&(f=d.reduce(function(x,y){if(Lt(y))switch(y.value){case kN:return t=0,!1;case RN:return t=1,!1;case LN:case QN:return s=0,!1;case FN:return s=1,!1;case IN:return s=2,!1;case MN:case DN:return s=3,!1}else if(Yi(y)||Fr(y))return Array.isArray(s)||(s=[]),s.push(y),!1;return x},f)),f){var g=Vf(r,d);A.push(g)}}),{size:s,shape:t,stops:A,position:l,type:2}},IR=function(r){return r.type===1},DR=function(r){return r.type===2},Y0={name:"image",parse:function(r,e){if(e.type===22){var t={url:e.value,type:0};return r.cache.addImage(e.value),t}if(e.type===18){var s=HN[e.name];if(typeof s>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return s(r,e.values)}throw new Error("Unsupported image type "+e.type)}};function kR(r){return!(r.type===20&&r.value==="none")&&(r.type!==18||!!HN[r.name])}var HN={"linear-gradient":UR,"-moz-linear-gradient":dh,"-ms-linear-gradient":dh,"-o-linear-gradient":dh,"-webkit-linear-gradient":dh,"radial-gradient":FR,"-moz-radial-gradient":uh,"-ms-radial-gradient":uh,"-o-radial-gradient":uh,"-webkit-radial-gradient":uh,"-webkit-gradient":QR},RR={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(r,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e.filter(function(s){return cl(s)&&kR(s)}).map(function(s){return Y0.parse(r,s)})}},MR={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(r,e){return e.map(function(t){if(Lt(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},LR={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(r,e){return la(e).map(function(t){return t.filter(Fr)}).map(EN)}},HR={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(r,e){return la(e).map(function(t){return t.filter(Lt).map(function(s){return s.value}).join(" ")}).map(OR)}},OR=function(r){switch(r){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}},tl;(function(r){r.AUTO="auto",r.CONTAIN="contain",r.COVER="cover"})(tl||(tl={}));var PR={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(r,e){return la(e).map(function(t){return t.filter(VR)})}},VR=function(r){return Lt(r)||Fr(r)},zf=function(r){return{name:"border-"+r+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},zR=zf("top"),KR=zf("right"),GR=zf("bottom"),qR=zf("left"),Kf=function(r){return{name:"border-radius-"+r,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return EN(t.filter(Fr))}}},YR=Kf("top-left"),$R=Kf("top-right"),XR=Kf("bottom-right"),JR=Kf("bottom-left"),Gf=function(r){return{name:"border-"+r+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},WR=Gf("top"),ZR=Gf("right"),eM=Gf("bottom"),tM=Gf("left"),qf=function(r){return{name:"border-"+r+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return vd(t)?t.number:0}}},rM=qf("top"),sM=qf("right"),nM=qf("bottom"),aM=qf("left"),iM={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},AM={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(r,e){return e==="rtl"?1:0}},oM={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(r,e){return e.filter(Lt).reduce(function(t,s){return t|lM(s.value)},0)}},lM=function(r){switch(r){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},cM={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},dM={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(r,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},lf;(function(r){r.NORMAL="normal",r.STRICT="strict"})(lf||(lf={}));var uM={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){return e==="strict"?lf.STRICT:lf.NORMAL}},hM={name:"line-height",initialValue:"normal",prefix:!1,type:4},MC=function(r,e){return Lt(r)&&r.value==="normal"?1.2*e:r.type===17?e*r.number:Fr(r)?zt(r,e):e},fM={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(r,e){return e.type===20&&e.value==="none"?null:Y0.parse(r,e)}},mM={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(r,e){return e==="inside"?0:1}},Lx={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},Yf=function(r){return{name:"margin-"+r,initialValue:"0",prefix:!1,type:4}},gM=Yf("top"),pM=Yf("right"),xM=Yf("bottom"),yM=Yf("left"),bM={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(r,e){return e.filter(Lt).map(function(t){switch(t.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}})}},vM={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){return e==="break-word"?"break-word":"normal"}},$f=function(r){return{name:"padding-"+r,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},wM=$f("top"),BM=$f("right"),CM=$f("bottom"),EM=$f("left"),NM={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(r,e){switch(e){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},SM={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(r,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},jM={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(r,e){return e.length===1&&Mx(e[0],"none")?[]:la(e).map(function(t){for(var s={color:ka.TRANSPARENT,offsetX:as,offsetY:as,blur:as},A=0,l=0;l<t.length;l++){var d=t[l];Yi(d)?(A===0?s.offsetX=d:A===1?s.offsetY=d:s.blur=d,A++):s.color=Li.parse(r,d)}return s})}},_M={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},TM={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(r,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var t=FM[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return t(e.values)}return null}},UM=function(r){var e=r.filter(function(t){return t.type===17}).map(function(t){return t.number});return e.length===6?e:null},QM=function(r){var e=r.filter(function(f){return f.type===17}).map(function(f){return f.number}),t=e[0],s=e[1];e[2],e[3];var A=e[4],l=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var d=e[12],u=e[13];return e[14],e[15],e.length===16?[t,s,A,l,d,u]:null},FM={matrix:UM,matrix3d:QM},LC={type:16,number:50,flags:bd},IM=[LC,LC],DM={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(r,e){var t=e.filter(Fr);return t.length!==2?IM:[t[0],t[1]]}},kM={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"hidden":return 1;case"collapse":return 2;default:return 0}}},zc;(function(r){r.NORMAL="normal",r.BREAK_ALL="break-all",r.KEEP_ALL="keep-all"})(zc||(zc={}));var RM={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"break-all":return zc.BREAK_ALL;case"keep-all":return zc.KEEP_ALL;default:return zc.NORMAL}}},MM={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(r,e){if(e.type===20)return{auto:!0,order:0};if(xl(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},ON={name:"time",parse:function(r,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},LM={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(r,e){return xl(e)?e.number:1}},HM={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},OM={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(r,e){return e.filter(Lt).map(function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(t){return t!==0})}},PM={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(r,e){var t=[],s=[];return e.forEach(function(A){switch(A.type){case 20:case 0:t.push(A.value);break;case 17:t.push(A.number.toString());break;case 4:s.push(t.join(" ")),t.length=0;break}}),t.length&&s.push(t.join(" ")),s.map(function(A){return A.indexOf(" ")===-1?A:"'"+A+"'"})}},VM={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},zM={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(r,e){return xl(e)?e.number:Lt(e)&&e.value==="bold"?700:400}},KM={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(r,e){return e.filter(Lt).map(function(t){return t.value})}},GM={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},Lr=function(r,e){return(r&e)!==0},qM={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(r,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e}},YM={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(r,e){if(e.length===0)return null;var t=e[0];if(t.type===20&&t.value==="none")return null;for(var s=[],A=e.filter(CN),l=0;l<A.length;l++){var d=A[l],u=A[l+1];if(d.type===20){var f=u&&xl(u)?u.number:1;s.push({counter:d.value,increment:f})}}return s}},$M={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(r,e){if(e.length===0)return[];for(var t=[],s=e.filter(CN),A=0;A<s.length;A++){var l=s[A],d=s[A+1];if(Lt(l)&&l.value!=="none"){var u=d&&xl(d)?d.number:0;t.push({counter:l.value,reset:u})}}return t}},XM={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(r,e){return e.filter(vd).map(function(t){return ON.parse(r,t)})}},JM={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(r,e){if(e.length===0)return null;var t=e[0];if(t.type===20&&t.value==="none")return null;var s=[],A=e.filter(BR);if(A.length%2!==0)return null;for(var l=0;l<A.length;l+=2){var d=A[l].value,u=A[l+1].value;s.push({open:d,close:u})}return s}},HC=function(r,e,t){if(!r)return"";var s=r[Math.min(e,r.length-1)];return s?t?s.open:s.close:""},WM={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(r,e){return e.length===1&&Mx(e[0],"none")?[]:la(e).map(function(t){for(var s={color:255,offsetX:as,offsetY:as,blur:as,spread:as,inset:!1},A=0,l=0;l<t.length;l++){var d=t[l];Mx(d,"inset")?s.inset=!0:Yi(d)?(A===0?s.offsetX=d:A===1?s.offsetY=d:A===2?s.blur=d:s.spread=d,A++):s.color=Li.parse(r,d)}return s})}},ZM={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(r,e){var t=[0,1,2],s=[];return e.filter(Lt).forEach(function(A){switch(A.value){case"stroke":s.push(1);break;case"fill":s.push(0);break;case"markers":s.push(2);break}}),t.forEach(function(A){s.indexOf(A)===-1&&s.push(A)}),s}},eL={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},tL={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(r,e){return vd(e)?e.number:0}},rL=(function(){function r(e,t){var s,A;this.animationDuration=Te(e,XM,t.animationDuration),this.backgroundClip=Te(e,NR,t.backgroundClip),this.backgroundColor=Te(e,SR,t.backgroundColor),this.backgroundImage=Te(e,RR,t.backgroundImage),this.backgroundOrigin=Te(e,MR,t.backgroundOrigin),this.backgroundPosition=Te(e,LR,t.backgroundPosition),this.backgroundRepeat=Te(e,HR,t.backgroundRepeat),this.backgroundSize=Te(e,PR,t.backgroundSize),this.borderTopColor=Te(e,zR,t.borderTopColor),this.borderRightColor=Te(e,KR,t.borderRightColor),this.borderBottomColor=Te(e,GR,t.borderBottomColor),this.borderLeftColor=Te(e,qR,t.borderLeftColor),this.borderTopLeftRadius=Te(e,YR,t.borderTopLeftRadius),this.borderTopRightRadius=Te(e,$R,t.borderTopRightRadius),this.borderBottomRightRadius=Te(e,XR,t.borderBottomRightRadius),this.borderBottomLeftRadius=Te(e,JR,t.borderBottomLeftRadius),this.borderTopStyle=Te(e,WR,t.borderTopStyle),this.borderRightStyle=Te(e,ZR,t.borderRightStyle),this.borderBottomStyle=Te(e,eM,t.borderBottomStyle),this.borderLeftStyle=Te(e,tM,t.borderLeftStyle),this.borderTopWidth=Te(e,rM,t.borderTopWidth),this.borderRightWidth=Te(e,sM,t.borderRightWidth),this.borderBottomWidth=Te(e,nM,t.borderBottomWidth),this.borderLeftWidth=Te(e,aM,t.borderLeftWidth),this.boxShadow=Te(e,WM,t.boxShadow),this.color=Te(e,iM,t.color),this.direction=Te(e,AM,t.direction),this.display=Te(e,oM,t.display),this.float=Te(e,cM,t.cssFloat),this.fontFamily=Te(e,PM,t.fontFamily),this.fontSize=Te(e,VM,t.fontSize),this.fontStyle=Te(e,GM,t.fontStyle),this.fontVariant=Te(e,KM,t.fontVariant),this.fontWeight=Te(e,zM,t.fontWeight),this.letterSpacing=Te(e,dM,t.letterSpacing),this.lineBreak=Te(e,uM,t.lineBreak),this.lineHeight=Te(e,hM,t.lineHeight),this.listStyleImage=Te(e,fM,t.listStyleImage),this.listStylePosition=Te(e,mM,t.listStylePosition),this.listStyleType=Te(e,Lx,t.listStyleType),this.marginTop=Te(e,gM,t.marginTop),this.marginRight=Te(e,pM,t.marginRight),this.marginBottom=Te(e,xM,t.marginBottom),this.marginLeft=Te(e,yM,t.marginLeft),this.opacity=Te(e,LM,t.opacity);var l=Te(e,bM,t.overflow);this.overflowX=l[0],this.overflowY=l[l.length>1?1:0],this.overflowWrap=Te(e,vM,t.overflowWrap),this.paddingTop=Te(e,wM,t.paddingTop),this.paddingRight=Te(e,BM,t.paddingRight),this.paddingBottom=Te(e,CM,t.paddingBottom),this.paddingLeft=Te(e,EM,t.paddingLeft),this.paintOrder=Te(e,ZM,t.paintOrder),this.position=Te(e,SM,t.position),this.textAlign=Te(e,NM,t.textAlign),this.textDecorationColor=Te(e,HM,(s=t.textDecorationColor)!==null&&s!==void 0?s:t.color),this.textDecorationLine=Te(e,OM,(A=t.textDecorationLine)!==null&&A!==void 0?A:t.textDecoration),this.textShadow=Te(e,jM,t.textShadow),this.textTransform=Te(e,_M,t.textTransform),this.transform=Te(e,TM,t.transform),this.transformOrigin=Te(e,DM,t.transformOrigin),this.visibility=Te(e,kM,t.visibility),this.webkitTextStrokeColor=Te(e,eL,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=Te(e,tL,t.webkitTextStrokeWidth),this.wordBreak=Te(e,RM,t.wordBreak),this.zIndex=Te(e,MM,t.zIndex)}return r.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},r.prototype.isTransparent=function(){return Hi(this.backgroundColor)},r.prototype.isTransformed=function(){return this.transform!==null},r.prototype.isPositioned=function(){return this.position!==0},r.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},r.prototype.isFloating=function(){return this.float!==0},r.prototype.isInlineLevel=function(){return Lr(this.display,4)||Lr(this.display,33554432)||Lr(this.display,268435456)||Lr(this.display,536870912)||Lr(this.display,67108864)||Lr(this.display,134217728)},r})(),sL=(function(){function r(e,t){this.content=Te(e,qM,t.content),this.quotes=Te(e,JM,t.quotes)}return r})(),OC=(function(){function r(e,t){this.counterIncrement=Te(e,YM,t.counterIncrement),this.counterReset=Te(e,$M,t.counterReset)}return r})(),Te=function(r,e,t){var s=new wN,A=t!==null&&typeof t<"u"?t.toString():e.initialValue;s.write(A);var l=new BN(s.read());switch(e.type){case 2:var d=l.parseComponentValue();return e.parse(r,Lt(d)?d.value:e.initialValue);case 0:return e.parse(r,l.parseComponentValue());case 1:return e.parse(r,l.parseComponentValues());case 4:return l.parseComponentValue();case 3:switch(e.format){case"angle":return Pf.parse(r,l.parseComponentValue());case"color":return Li.parse(r,l.parseComponentValue());case"image":return Y0.parse(r,l.parseComponentValue());case"length":var u=l.parseComponentValue();return Yi(u)?u:as;case"length-percentage":var f=l.parseComponentValue();return Fr(f)?f:as;case"time":return ON.parse(r,l.parseComponentValue())}break}},nL="data-html2canvas-debug",aL=function(r){var e=r.getAttribute(nL);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},Hx=function(r,e){var t=aL(r);return t===1||e===t},ca=(function(){function r(e,t){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,Hx(t,3))debugger;this.styles=new rL(e,window.getComputedStyle(t,null)),Vx(t)&&(this.styles.animationDuration.some(function(s){return s>0})&&(t.style.animationDuration="0s"),this.styles.transform!==null&&(t.style.transform="none")),this.bounds=Hf(this.context,t),Hx(t,4)&&(this.flags|=16)}return r})(),iL="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",PC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Uc=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var hh=0;hh<PC.length;hh++)Uc[PC.charCodeAt(hh)]=hh;var AL=function(r){var e=r.length*.75,t=r.length,s,A=0,l,d,u,f;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);var g=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),x=Array.isArray(g)?g:new Uint8Array(g);for(s=0;s<t;s+=4)l=Uc[r.charCodeAt(s)],d=Uc[r.charCodeAt(s+1)],u=Uc[r.charCodeAt(s+2)],f=Uc[r.charCodeAt(s+3)],x[A++]=l<<2|d>>4,x[A++]=(d&15)<<4|u>>2,x[A++]=(u&3)<<6|f&63;return g},oL=function(r){for(var e=r.length,t=[],s=0;s<e;s+=2)t.push(r[s+1]<<8|r[s]);return t},lL=function(r){for(var e=r.length,t=[],s=0;s<e;s+=4)t.push(r[s+3]<<24|r[s+2]<<16|r[s+1]<<8|r[s]);return t},QA=5,$0=11,xp=2,cL=$0-QA,PN=65536>>QA,dL=1<<QA,yp=dL-1,uL=1024>>QA,hL=PN+uL,fL=hL,mL=32,gL=fL+mL,pL=65536>>$0,xL=1<<cL,yL=xL-1,VC=function(r,e,t){return r.slice?r.slice(e,t):new Uint16Array(Array.prototype.slice.call(r,e,t))},bL=function(r,e,t){return r.slice?r.slice(e,t):new Uint32Array(Array.prototype.slice.call(r,e,t))},vL=function(r,e){var t=AL(r),s=Array.isArray(t)?lL(t):new Uint32Array(t),A=Array.isArray(t)?oL(t):new Uint16Array(t),l=24,d=VC(A,l/2,s[4]/2),u=s[5]===2?VC(A,(l+s[4])/2):bL(s,Math.ceil((l+s[4])/4));return new wL(s[0],s[1],s[2],s[3],d,u)},wL=(function(){function r(e,t,s,A,l,d){this.initialValue=e,this.errorValue=t,this.highStart=s,this.highValueIndex=A,this.index=l,this.data=d}return r.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>QA],t=(t<<xp)+(e&yp),this.data[t];if(e<=65535)return t=this.index[PN+(e-55296>>QA)],t=(t<<xp)+(e&yp),this.data[t];if(e<this.highStart)return t=gL-pL+(e>>$0),t=this.index[t],t+=e>>QA&yL,t=this.index[t],t=(t<<xp)+(e&yp),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},r})(),zC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",BL=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var fh=0;fh<zC.length;fh++)BL[zC.charCodeAt(fh)]=fh;var CL=1,bp=2,vp=3,KC=4,GC=5,EL=7,qC=8,wp=9,Bp=10,YC=11,$C=12,XC=13,JC=14,Cp=15,NL=function(r){for(var e=[],t=0,s=r.length;t<s;){var A=r.charCodeAt(t++);if(A>=55296&&A<=56319&&t<s){var l=r.charCodeAt(t++);(l&64512)===56320?e.push(((A&1023)<<10)+(l&1023)+65536):(e.push(A),t--)}else e.push(A)}return e},SL=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,r);var t=r.length;if(!t)return"";for(var s=[],A=-1,l="";++A<t;){var d=r[A];d<=65535?s.push(d):(d-=65536,s.push((d>>10)+55296,d%1024+56320)),(A+1===t||s.length>16384)&&(l+=String.fromCharCode.apply(String,s),s.length=0)}return l},jL=vL(iL),An="",Ep="",_L=function(r){return jL.get(r)},TL=function(r,e,t){var s=t-2,A=e[s],l=e[t-1],d=e[t];if(l===bp&&d===vp)return An;if(l===bp||l===vp||l===KC||d===bp||d===vp||d===KC)return Ep;if(l===qC&&[qC,wp,YC,$C].indexOf(d)!==-1||(l===YC||l===wp)&&(d===wp||d===Bp)||(l===$C||l===Bp)&&d===Bp||d===XC||d===GC||d===EL||l===CL)return An;if(l===XC&&d===JC){for(;A===GC;)A=e[--s];if(A===JC)return An}if(l===Cp&&d===Cp){for(var u=0;A===Cp;)u++,A=e[--s];if(u%2===0)return An}return Ep},UL=function(r){var e=NL(r),t=e.length,s=0,A=0,l=e.map(_L);return{next:function(){if(s>=t)return{done:!0,value:null};for(var d=An;s<t&&(d=TL(e,l,++s))===An;);if(d!==An||s===t){var u=SL.apply(null,e.slice(A,s));return A=s,{value:u,done:!1}}return{done:!0,value:null}}}},QL=function(r){for(var e=UL(r),t=[],s;!(s=e.next()).done;)s.value&&t.push(s.value.slice());return t},FL=function(r){var e=123;if(r.createRange){var t=r.createRange();if(t.getBoundingClientRect){var s=r.createElement("boundtest");s.style.height=e+"px",s.style.display="block",r.body.appendChild(s),t.selectNode(s);var A=t.getBoundingClientRect(),l=Math.round(A.height);if(r.body.removeChild(s),l===e)return!0}}return!1},IL=function(r){var e=r.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",r.body.appendChild(e);var t=r.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var s=e.firstChild,A=Of(s.data).map(function(f){return Cr(f)}),l=0,d={},u=A.every(function(f,g){t.setStart(s,l),t.setEnd(s,l+f.length);var x=t.getBoundingClientRect();l+=f.length;var y=x.x>d.x||x.y>d.y;return d=x,g===0?!0:y});return r.body.removeChild(e),u},DL=function(){return typeof new Image().crossOrigin<"u"},kL=function(){return typeof new XMLHttpRequest().responseType=="string"},RL=function(r){var e=new Image,t=r.createElement("canvas"),s=t.getContext("2d");if(!s)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{s.drawImage(e,0,0),t.toDataURL()}catch{return!1}return!0},WC=function(r){return r[0]===0&&r[1]===255&&r[2]===0&&r[3]===255},ML=function(r){var e=r.createElement("canvas"),t=100;e.width=t,e.height=t;var s=e.getContext("2d");if(!s)return Promise.reject(!1);s.fillStyle="rgb(0, 255, 0)",s.fillRect(0,0,t,t);var A=new Image,l=e.toDataURL();A.src=l;var d=Ox(t,t,0,0,A);return s.fillStyle="red",s.fillRect(0,0,t,t),ZC(d).then(function(u){s.drawImage(u,0,0);var f=s.getImageData(0,0,t,t).data;s.fillStyle="red",s.fillRect(0,0,t,t);var g=r.createElement("div");return g.style.backgroundImage="url("+l+")",g.style.height=t+"px",WC(f)?ZC(Ox(t,t,0,0,g)):Promise.reject(!1)}).then(function(u){return s.drawImage(u,0,0),WC(s.getImageData(0,0,t,t).data)}).catch(function(){return!1})},Ox=function(r,e,t,s,A){var l="http://www.w3.org/2000/svg",d=document.createElementNS(l,"svg"),u=document.createElementNS(l,"foreignObject");return d.setAttributeNS(null,"width",r.toString()),d.setAttributeNS(null,"height",e.toString()),u.setAttributeNS(null,"width","100%"),u.setAttributeNS(null,"height","100%"),u.setAttributeNS(null,"x",t.toString()),u.setAttributeNS(null,"y",s.toString()),u.setAttributeNS(null,"externalResourcesRequired","true"),d.appendChild(u),u.appendChild(A),d},ZC=function(r){return new Promise(function(e,t){var s=new Image;s.onload=function(){return e(s)},s.onerror=t,s.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(r))})},rs={get SUPPORT_RANGE_BOUNDS(){var r=FL(document);return Object.defineProperty(rs,"SUPPORT_RANGE_BOUNDS",{value:r}),r},get SUPPORT_WORD_BREAKING(){var r=rs.SUPPORT_RANGE_BOUNDS&&IL(document);return Object.defineProperty(rs,"SUPPORT_WORD_BREAKING",{value:r}),r},get SUPPORT_SVG_DRAWING(){var r=RL(document);return Object.defineProperty(rs,"SUPPORT_SVG_DRAWING",{value:r}),r},get SUPPORT_FOREIGNOBJECT_DRAWING(){var r=typeof Array.from=="function"&&typeof window.fetch=="function"?ML(document):Promise.resolve(!1);return Object.defineProperty(rs,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:r}),r},get SUPPORT_CORS_IMAGES(){var r=DL();return Object.defineProperty(rs,"SUPPORT_CORS_IMAGES",{value:r}),r},get SUPPORT_RESPONSE_TYPE(){var r=kL();return Object.defineProperty(rs,"SUPPORT_RESPONSE_TYPE",{value:r}),r},get SUPPORT_CORS_XHR(){var r="withCredentials"in new XMLHttpRequest;return Object.defineProperty(rs,"SUPPORT_CORS_XHR",{value:r}),r},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var r=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(rs,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:r}),r}},Kc=(function(){function r(e,t){this.text=e,this.bounds=t}return r})(),LL=function(r,e,t,s){var A=PL(e,t),l=[],d=0;return A.forEach(function(u){if(t.textDecorationLine.length||u.trim().length>0)if(rs.SUPPORT_RANGE_BOUNDS){var f=e1(s,d,u.length).getClientRects();if(f.length>1){var g=X0(u),x=0;g.forEach(function(v){l.push(new Kc(v,Oa.fromDOMRectList(r,e1(s,x+d,v.length).getClientRects()))),x+=v.length})}else l.push(new Kc(u,Oa.fromDOMRectList(r,f)))}else{var y=s.splitText(u.length);l.push(new Kc(u,HL(r,s))),s=y}else rs.SUPPORT_RANGE_BOUNDS||(s=s.splitText(u.length));d+=u.length}),l},HL=function(r,e){var t=e.ownerDocument;if(t){var s=t.createElement("html2canvaswrapper");s.appendChild(e.cloneNode(!0));var A=e.parentNode;if(A){A.replaceChild(s,e);var l=Hf(r,s);return s.firstChild&&A.replaceChild(s.firstChild,s),l}}return Oa.EMPTY},e1=function(r,e,t){var s=r.ownerDocument;if(!s)throw new Error("Node has no owner document");var A=s.createRange();return A.setStart(r,e),A.setEnd(r,e+t),A},X0=function(r){if(rs.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(r)).map(function(t){return t.segment})}return QL(r)},OL=function(r,e){if(rs.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(t.segment(r)).map(function(s){return s.segment})}return zL(r,e)},PL=function(r,e){return e.letterSpacing!==0?X0(r):OL(r,e)},VL=[32,160,4961,65792,65793,4153,4241],zL=function(r,e){for(var t=p3(r,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),s=[],A,l=function(){if(A.value){var d=A.value.slice(),u=Of(d),f="";u.forEach(function(g){VL.indexOf(g)===-1?f+=Cr(g):(f.length&&s.push(f),s.push(Cr(g)),f="")}),f.length&&s.push(f)}};!(A=t.next()).done;)l();return s},KL=(function(){function r(e,t,s){this.text=GL(t.data,s.textTransform),this.textBounds=LL(e,this.text,s,t)}return r})(),GL=function(r,e){switch(e){case 1:return r.toLowerCase();case 3:return r.replace(qL,YL);case 2:return r.toUpperCase();default:return r}},qL=/(^|\s|:|-|\(|\))([a-z])/g,YL=function(r,e,t){return r.length>0?e+t.toUpperCase():r},VN=(function(r){Fn(e,r);function e(t,s){var A=r.call(this,t,s)||this;return A.src=s.currentSrc||s.src,A.intrinsicWidth=s.naturalWidth,A.intrinsicHeight=s.naturalHeight,A.context.cache.addImage(A.src),A}return e})(ca),zN=(function(r){Fn(e,r);function e(t,s){var A=r.call(this,t,s)||this;return A.canvas=s,A.intrinsicWidth=s.width,A.intrinsicHeight=s.height,A}return e})(ca),KN=(function(r){Fn(e,r);function e(t,s){var A=r.call(this,t,s)||this,l=new XMLSerializer,d=Hf(t,s);return s.setAttribute("width",d.width+"px"),s.setAttribute("height",d.height+"px"),A.svg="data:image/svg+xml,"+encodeURIComponent(l.serializeToString(s)),A.intrinsicWidth=s.width.baseVal.value,A.intrinsicHeight=s.height.baseVal.value,A.context.cache.addImage(A.svg),A}return e})(ca),GN=(function(r){Fn(e,r);function e(t,s){var A=r.call(this,t,s)||this;return A.value=s.value,A}return e})(ca),Px=(function(r){Fn(e,r);function e(t,s){var A=r.call(this,t,s)||this;return A.start=s.start,A.reversed=typeof s.reversed=="boolean"&&s.reversed===!0,A}return e})(ca),$L=[{type:15,flags:0,unit:"px",number:3}],XL=[{type:16,flags:0,number:50}],JL=function(r){return r.width>r.height?new Oa(r.left+(r.width-r.height)/2,r.top,r.height,r.height):r.width<r.height?new Oa(r.left,r.top+(r.height-r.width)/2,r.width,r.width):r},WL=function(r){var e=r.type===ZL?new Array(r.value.length+1).join(""):r.value;return e.length===0?r.placeholder||"":e},cf="checkbox",df="radio",ZL="password",t1=707406591,J0=(function(r){Fn(e,r);function e(t,s){var A=r.call(this,t,s)||this;switch(A.type=s.type.toLowerCase(),A.checked=s.checked,A.value=WL(s),(A.type===cf||A.type===df)&&(A.styles.backgroundColor=3739148031,A.styles.borderTopColor=A.styles.borderRightColor=A.styles.borderBottomColor=A.styles.borderLeftColor=2779096575,A.styles.borderTopWidth=A.styles.borderRightWidth=A.styles.borderBottomWidth=A.styles.borderLeftWidth=1,A.styles.borderTopStyle=A.styles.borderRightStyle=A.styles.borderBottomStyle=A.styles.borderLeftStyle=1,A.styles.backgroundClip=[0],A.styles.backgroundOrigin=[0],A.bounds=JL(A.bounds)),A.type){case cf:A.styles.borderTopRightRadius=A.styles.borderTopLeftRadius=A.styles.borderBottomRightRadius=A.styles.borderBottomLeftRadius=$L;break;case df:A.styles.borderTopRightRadius=A.styles.borderTopLeftRadius=A.styles.borderBottomRightRadius=A.styles.borderBottomLeftRadius=XL;break}return A}return e})(ca),qN=(function(r){Fn(e,r);function e(t,s){var A=r.call(this,t,s)||this,l=s.options[s.selectedIndex||0];return A.value=l&&l.text||"",A}return e})(ca),YN=(function(r){Fn(e,r);function e(t,s){var A=r.call(this,t,s)||this;return A.value=s.value,A}return e})(ca),$N=(function(r){Fn(e,r);function e(t,s){var A=r.call(this,t,s)||this;A.src=s.src,A.width=parseInt(s.width,10)||0,A.height=parseInt(s.height,10)||0,A.backgroundColor=A.styles.backgroundColor;try{if(s.contentWindow&&s.contentWindow.document&&s.contentWindow.document.documentElement){A.tree=JN(t,s.contentWindow.document.documentElement);var l=s.contentWindow.document.documentElement?Vc(t,getComputedStyle(s.contentWindow.document.documentElement).backgroundColor):ka.TRANSPARENT,d=s.contentWindow.document.body?Vc(t,getComputedStyle(s.contentWindow.document.body).backgroundColor):ka.TRANSPARENT;A.backgroundColor=Hi(l)?Hi(d)?A.styles.backgroundColor:d:l}}catch{}return A}return e})(ca),eH=["OL","UL","MENU"],Rh=function(r,e,t,s){for(var A=e.firstChild,l=void 0;A;A=l)if(l=A.nextSibling,WN(A)&&A.data.trim().length>0)t.textNodes.push(new KL(r,A,t.styles));else if(qo(A))if(rS(A)&&A.assignedNodes)A.assignedNodes().forEach(function(u){return Rh(r,u,t,s)});else{var d=XN(r,A);d.styles.isVisible()&&(tH(A,d,s)?d.flags|=4:rH(d.styles)&&(d.flags|=2),eH.indexOf(A.tagName)!==-1&&(d.flags|=8),t.elements.push(d),A.slot,A.shadowRoot?Rh(r,A.shadowRoot,d,s):!uf(A)&&!ZN(A)&&!hf(A)&&Rh(r,A,d,s))}},XN=function(r,e){return zx(e)?new VN(r,e):eS(e)?new zN(r,e):ZN(e)?new KN(r,e):sH(e)?new GN(r,e):nH(e)?new Px(r,e):aH(e)?new J0(r,e):hf(e)?new qN(r,e):uf(e)?new YN(r,e):tS(e)?new $N(r,e):new ca(r,e)},JN=function(r,e){var t=XN(r,e);return t.flags|=4,Rh(r,e,t,t),t},tH=function(r,e,t){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||W0(r)&&t.styles.isTransparent()},rH=function(r){return r.isPositioned()||r.isFloating()},WN=function(r){return r.nodeType===Node.TEXT_NODE},qo=function(r){return r.nodeType===Node.ELEMENT_NODE},Vx=function(r){return qo(r)&&typeof r.style<"u"&&!Mh(r)},Mh=function(r){return typeof r.className=="object"},sH=function(r){return r.tagName==="LI"},nH=function(r){return r.tagName==="OL"},aH=function(r){return r.tagName==="INPUT"},iH=function(r){return r.tagName==="HTML"},ZN=function(r){return r.tagName==="svg"},W0=function(r){return r.tagName==="BODY"},eS=function(r){return r.tagName==="CANVAS"},r1=function(r){return r.tagName==="VIDEO"},zx=function(r){return r.tagName==="IMG"},tS=function(r){return r.tagName==="IFRAME"},s1=function(r){return r.tagName==="STYLE"},AH=function(r){return r.tagName==="SCRIPT"},uf=function(r){return r.tagName==="TEXTAREA"},hf=function(r){return r.tagName==="SELECT"},rS=function(r){return r.tagName==="SLOT"},n1=function(r){return r.tagName.indexOf("-")>0},oH=(function(){function r(){this.counters={}}return r.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},r.prototype.getCounterValues=function(e){var t=this.counters[e];return t||[]},r.prototype.pop=function(e){var t=this;e.forEach(function(s){return t.counters[s].pop()})},r.prototype.parse=function(e){var t=this,s=e.counterIncrement,A=e.counterReset,l=!0;s!==null&&s.forEach(function(u){var f=t.counters[u.counter];f&&u.increment!==0&&(l=!1,f.length||f.push(1),f[Math.max(0,f.length-1)]+=u.increment)});var d=[];return l&&A.forEach(function(u){var f=t.counters[u.counter];d.push(u.counter),f||(f=t.counters[u.counter]=[]),f.push(u.reset)}),d},r})(),a1={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},i1={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},lH={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},cH={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},ko=function(r,e,t,s,A,l){return r<e||r>t?id(r,A,l.length>0):s.integers.reduce(function(d,u,f){for(;r>=u;)r-=u,d+=s.values[f];return d},"")+l},sS=function(r,e,t,s){var A="";do t||r--,A=s(r)+A,r/=e;while(r*e>=e);return A},Br=function(r,e,t,s,A){var l=t-e+1;return(r<0?"-":"")+(sS(Math.abs(r),l,s,function(d){return Cr(Math.floor(d%l)+e)})+A)},vA=function(r,e,t){t===void 0&&(t=". ");var s=e.length;return sS(Math.abs(r),s,!1,function(A){return e[Math.floor(A%s)]})+t},Ko=1,Bi=2,Ci=4,Qc=8,Fa=function(r,e,t,s,A,l){if(r<-9999||r>9999)return id(r,4,A.length>0);var d=Math.abs(r),u=A;if(d===0)return e[0]+u;for(var f=0;d>0&&f<=4;f++){var g=d%10;g===0&&Lr(l,Ko)&&u!==""?u=e[g]+u:g>1||g===1&&f===0||g===1&&f===1&&Lr(l,Bi)||g===1&&f===1&&Lr(l,Ci)&&r>100||g===1&&f>1&&Lr(l,Qc)?u=e[g]+(f>0?t[f-1]:"")+u:g===1&&f>0&&(u=t[f-1]+u),d=Math.floor(d/10)}return(r<0?s:"")+u},A1="",o1="",l1="",Np="",id=function(r,e,t){var s=t?". ":"",A=t?"":"",l=t?", ":"",d=t?" ":"";switch(e){case 0:return""+d;case 1:return""+d;case 2:return""+d;case 5:var u=Br(r,48,57,!0,s);return u.length<4?"0"+u:u;case 4:return vA(r,"",A);case 6:return ko(r,1,3999,a1,3,s).toLowerCase();case 7:return ko(r,1,3999,a1,3,s);case 8:return Br(r,945,969,!1,s);case 9:return Br(r,97,122,!1,s);case 10:return Br(r,65,90,!1,s);case 11:return Br(r,1632,1641,!0,s);case 12:case 49:return ko(r,1,9999,i1,3,s);case 35:return ko(r,1,9999,i1,3,s).toLowerCase();case 13:return Br(r,2534,2543,!0,s);case 14:case 30:return Br(r,6112,6121,!0,s);case 15:return vA(r,"",A);case 16:return vA(r,"",A);case 17:case 48:return Fa(r,"",A1,"",A,Bi|Ci|Qc);case 47:return Fa(r,"",o1,"",A,Ko|Bi|Ci|Qc);case 42:return Fa(r,"",A1,"",A,Bi|Ci|Qc);case 41:return Fa(r,"",o1,"",A,Ko|Bi|Ci|Qc);case 26:return Fa(r,"","",l1,A,0);case 25:return Fa(r,"","",l1,A,Ko|Bi|Ci);case 31:return Fa(r,"","",Np,l,Ko|Bi|Ci);case 33:return Fa(r,"","",Np,l,0);case 32:return Fa(r,"","",Np,l,Ko|Bi|Ci);case 18:return Br(r,2406,2415,!0,s);case 20:return ko(r,1,19999,cH,3,s);case 21:return Br(r,2790,2799,!0,s);case 22:return Br(r,2662,2671,!0,s);case 22:return ko(r,1,10999,lH,3,s);case 23:return vA(r,"");case 24:return vA(r,"");case 27:return Br(r,3302,3311,!0,s);case 28:return vA(r,"",A);case 29:return vA(r,"",A);case 34:return Br(r,3792,3801,!0,s);case 37:return Br(r,6160,6169,!0,s);case 38:return Br(r,4160,4169,!0,s);case 39:return Br(r,2918,2927,!0,s);case 40:return Br(r,1776,1785,!0,s);case 43:return Br(r,3046,3055,!0,s);case 44:return Br(r,3174,3183,!0,s);case 45:return Br(r,3664,3673,!0,s);case 46:return Br(r,3872,3881,!0,s);default:return Br(r,48,57,!0,s)}},nS="data-html2canvas-ignore",c1=(function(){function r(e,t,s){if(this.context=e,this.options=s,this.scrolledElements=[],this.referenceElement=t,this.counters=new oH,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return r.prototype.toIFrame=function(e,t){var s=this,A=dH(e,t);if(!A.contentWindow)return Promise.reject("Unable to find iframe window");var l=e.defaultView.pageXOffset,d=e.defaultView.pageYOffset,u=A.contentWindow,f=u.document,g=fH(A).then(function(){return ws(s,void 0,void 0,function(){var x,y;return cs(this,function(v){switch(v.label){case 0:return this.scrolledElements.forEach(xH),u&&(u.scrollTo(t.left,t.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(u.scrollY!==t.top||u.scrollX!==t.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(u.scrollX-t.left,u.scrollY-t.top,0,0))),x=this.options.onclone,y=this.clonedReferenceElement,typeof y>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:f.fonts&&f.fonts.ready?[4,f.fonts.ready]:[3,2];case 1:v.sent(),v.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,hH(f)]:[3,4];case 3:v.sent(),v.label=4;case 4:return typeof x=="function"?[2,Promise.resolve().then(function(){return x(f,y)}).then(function(){return A})]:[2,A]}})})});return f.open(),f.write(gH(document.doctype)+"<html></html>"),pH(this.referenceElement.ownerDocument,l,d),f.replaceChild(f.adoptNode(this.documentElement),f.documentElement),f.close(),g},r.prototype.createElementClone=function(e){if(Hx(e,2))debugger;if(eS(e))return this.createCanvasClone(e);if(r1(e))return this.createVideoClone(e);if(s1(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return zx(t)&&(zx(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),t.loading==="lazy"&&(t.loading="eager")),n1(t)?this.createCustomElementClone(t):t},r.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return Sp(e.style,t),t},r.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var s=[].slice.call(t.cssRules,0).reduce(function(l,d){return d&&typeof d.cssText=="string"?l+d.cssText:l},""),A=e.cloneNode(!1);return A.textContent=s,A}}catch(l){if(this.context.logger.error("Unable to access cssRules property",l),l.name!=="SecurityError")throw l}return e.cloneNode(!1)},r.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var s=e.ownerDocument.createElement("img");try{return s.src=e.toDataURL(),s}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var A=e.cloneNode(!1);try{A.width=e.width,A.height=e.height;var l=e.getContext("2d"),d=A.getContext("2d");if(d)if(!this.options.allowTaint&&l)d.putImageData(l.getImageData(0,0,e.width,e.height),0,0);else{var u=(t=e.getContext("webgl2"))!==null&&t!==void 0?t:e.getContext("webgl");if(u){var f=u.getContextAttributes();f?.preserveDrawingBuffer===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}d.drawImage(e,0,0)}return A}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return A},r.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var s=t.getContext("2d");try{return s&&(s.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||s.getImageData(0,0,t.width,t.height)),t}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var A=e.ownerDocument.createElement("canvas");return A.width=e.offsetWidth,A.height=e.offsetHeight,A},r.prototype.appendChildNode=function(e,t,s){(!qo(t)||!AH(t)&&!t.hasAttribute(nS)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(t)))&&(!this.options.copyStyles||!qo(t)||!s1(t))&&e.appendChild(this.cloneNode(t,s))},r.prototype.cloneChildNodes=function(e,t,s){for(var A=this,l=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;l;l=l.nextSibling)if(qo(l)&&rS(l)&&typeof l.assignedNodes=="function"){var d=l.assignedNodes();d.length&&d.forEach(function(u){return A.appendChildNode(t,u,s)})}else this.appendChildNode(t,l,s)},r.prototype.cloneNode=function(e,t){if(WN(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var s=e.ownerDocument.defaultView;if(s&&qo(e)&&(Vx(e)||Mh(e))){var A=this.createElementClone(e);A.style.transitionProperty="none";var l=s.getComputedStyle(e),d=s.getComputedStyle(e,":before"),u=s.getComputedStyle(e,":after");this.referenceElement===e&&Vx(A)&&(this.clonedReferenceElement=A),W0(A)&&vH(A);var f=this.counters.parse(new OC(this.context,l)),g=this.resolvePseudoContent(e,A,d,Gc.BEFORE);n1(e)&&(t=!0),r1(e)||this.cloneChildNodes(e,A,t),g&&A.insertBefore(g,A.firstChild);var x=this.resolvePseudoContent(e,A,u,Gc.AFTER);return x&&A.appendChild(x),this.counters.pop(f),(l&&(this.options.copyStyles||Mh(e))&&!tS(e)||t)&&Sp(l,A),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([A,e.scrollLeft,e.scrollTop]),(uf(e)||hf(e))&&(uf(A)||hf(A))&&(A.value=e.value),A}return e.cloneNode(!1)},r.prototype.resolvePseudoContent=function(e,t,s,A){var l=this;if(s){var d=s.content,u=t.ownerDocument;if(!(!u||!d||d==="none"||d==="-moz-alt-content"||s.display==="none")){this.counters.parse(new OC(this.context,s));var f=new sL(this.context,s),g=u.createElement("html2canvaspseudoelement");Sp(s,g),f.content.forEach(function(y){if(y.type===0)g.appendChild(u.createTextNode(y.value));else if(y.type===22){var v=u.createElement("img");v.src=y.value,v.style.opacity="1",g.appendChild(v)}else if(y.type===18){if(y.name==="attr"){var S=y.values.filter(Lt);S.length&&g.appendChild(u.createTextNode(e.getAttribute(S[0].value)||""))}else if(y.name==="counter"){var R=y.values.filter(cl),j=R[0],V=R[1];if(j&&Lt(j)){var P=l.counters.getCounterValue(j.value),G=V&&Lt(V)?Lx.parse(l.context,V.value):3;g.appendChild(u.createTextNode(id(P,G,!1)))}}else if(y.name==="counters"){var q=y.values.filter(cl),j=q[0],W=q[1],V=q[2];if(j&&Lt(j)){var te=l.counters.getCounterValues(j.value),z=V&&Lt(V)?Lx.parse(l.context,V.value):3,E=W&&W.type===0?W.value:"",N=te.map(function(Q){return id(Q,z,!1)}).join(E);g.appendChild(u.createTextNode(N))}}}else if(y.type===20)switch(y.value){case"open-quote":g.appendChild(u.createTextNode(HC(f.quotes,l.quoteDepth++,!0)));break;case"close-quote":g.appendChild(u.createTextNode(HC(f.quotes,--l.quoteDepth,!1)));break;default:g.appendChild(u.createTextNode(y.value))}}),g.className=Kx+" "+Gx;var x=A===Gc.BEFORE?" "+Kx:" "+Gx;return Mh(t)?t.className.baseValue+=x:t.className+=x,g}}},r.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},r})(),Gc;(function(r){r[r.BEFORE=0]="BEFORE",r[r.AFTER=1]="AFTER"})(Gc||(Gc={}));var dH=function(r,e){var t=r.createElement("iframe");return t.className="html2canvas-container",t.style.visibility="hidden",t.style.position="fixed",t.style.left="-10000px",t.style.top="0px",t.style.border="0",t.width=e.width.toString(),t.height=e.height.toString(),t.scrolling="no",t.setAttribute(nS,"true"),r.body.appendChild(t),t},uH=function(r){return new Promise(function(e){if(r.complete){e();return}if(!r.src){e();return}r.onload=e,r.onerror=e})},hH=function(r){return Promise.all([].slice.call(r.images,0).map(uH))},fH=function(r){return new Promise(function(e,t){var s=r.contentWindow;if(!s)return t("No window assigned for iframe");var A=s.document;s.onload=r.onload=function(){s.onload=r.onload=null;var l=setInterval(function(){A.body.childNodes.length>0&&A.readyState==="complete"&&(clearInterval(l),e(r))},50)}})},mH=["all","d","content"],Sp=function(r,e){for(var t=r.length-1;t>=0;t--){var s=r.item(t);mH.indexOf(s)===-1&&e.style.setProperty(s,r.getPropertyValue(s))}return e},gH=function(r){var e="";return r&&(e+="<!DOCTYPE ",r.name&&(e+=r.name),r.internalSubset&&(e+=r.internalSubset),r.publicId&&(e+='"'+r.publicId+'"'),r.systemId&&(e+='"'+r.systemId+'"'),e+=">"),e},pH=function(r,e,t){r&&r.defaultView&&(e!==r.defaultView.pageXOffset||t!==r.defaultView.pageYOffset)&&r.defaultView.scrollTo(e,t)},xH=function(r){var e=r[0],t=r[1],s=r[2];e.scrollLeft=t,e.scrollTop=s},yH=":before",bH=":after",Kx="___html2canvas___pseudoelement_before",Gx="___html2canvas___pseudoelement_after",d1=`{
    content: "" !important;
    display: none !important;
}`,vH=function(r){wH(r,"."+Kx+yH+d1+`
         .`+Gx+bH+d1)},wH=function(r,e){var t=r.ownerDocument;if(t){var s=t.createElement("style");s.textContent=e,r.appendChild(s)}},aS=(function(){function r(){}return r.getOrigin=function(e){var t=r._link;return t?(t.href=e,t.href=t.href,t.protocol+t.hostname+t.port):"about:blank"},r.isSameOrigin=function(e){return r.getOrigin(e)===r._origin},r.setContext=function(e){r._link=e.document.createElement("a"),r._origin=r.getOrigin(e.location.href)},r._origin="about:blank",r})(),BH=(function(){function r(e,t){this.context=e,this._options=t,this._cache={}}return r.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)||(_p(e)||SH(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),t},r.prototype.match=function(e){return this._cache[e]},r.prototype.loadImage=function(e){return ws(this,void 0,void 0,function(){var t,s,A,l,d=this;return cs(this,function(u){switch(u.label){case 0:return t=aS.isSameOrigin(e),s=!jp(e)&&this._options.useCORS===!0&&rs.SUPPORT_CORS_IMAGES&&!t,A=!jp(e)&&!t&&!_p(e)&&typeof this._options.proxy=="string"&&rs.SUPPORT_CORS_XHR&&!s,!t&&this._options.allowTaint===!1&&!jp(e)&&!_p(e)&&!A&&!s?[2]:(l=e,A?[4,this.proxy(l)]:[3,2]);case 1:l=u.sent(),u.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(f,g){var x=new Image;x.onload=function(){return f(x)},x.onerror=g,(jH(l)||s)&&(x.crossOrigin="anonymous"),x.src=l,x.complete===!0&&setTimeout(function(){return f(x)},500),d._options.imageTimeout>0&&setTimeout(function(){return g("Timed out ("+d._options.imageTimeout+"ms) loading image")},d._options.imageTimeout)})];case 3:return[2,u.sent()]}})})},r.prototype.has=function(e){return typeof this._cache[e]<"u"},r.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},r.prototype.proxy=function(e){var t=this,s=this._options.proxy;if(!s)throw new Error("No proxy defined");var A=e.substring(0,256);return new Promise(function(l,d){var u=rs.SUPPORT_RESPONSE_TYPE?"blob":"text",f=new XMLHttpRequest;f.onload=function(){if(f.status===200)if(u==="text")l(f.response);else{var y=new FileReader;y.addEventListener("load",function(){return l(y.result)},!1),y.addEventListener("error",function(v){return d(v)},!1),y.readAsDataURL(f.response)}else d("Failed to proxy resource "+A+" with status code "+f.status)},f.onerror=d;var g=s.indexOf("?")>-1?"&":"?";if(f.open("GET",""+s+g+"url="+encodeURIComponent(e)+"&responseType="+u),u!=="text"&&f instanceof XMLHttpRequest&&(f.responseType=u),t._options.imageTimeout){var x=t._options.imageTimeout;f.timeout=x,f.ontimeout=function(){return d("Timed out ("+x+"ms) proxying "+A)}}f.send()})},r})(),CH=/^data:image\/svg\+xml/i,EH=/^data:image\/.*;base64,/i,NH=/^data:image\/.*/i,SH=function(r){return rs.SUPPORT_SVG_DRAWING||!_H(r)},jp=function(r){return NH.test(r)},jH=function(r){return EH.test(r)},_p=function(r){return r.substr(0,4)==="blob"},_H=function(r){return r.substr(-3).toLowerCase()==="svg"||CH.test(r)},je=(function(){function r(e,t){this.type=0,this.x=e,this.y=t}return r.prototype.add=function(e,t){return new r(this.x+e,this.y+t)},r})(),Ro=function(r,e,t){return new je(r.x+(e.x-r.x)*t,r.y+(e.y-r.y)*t)},mh=(function(){function r(e,t,s,A){this.type=1,this.start=e,this.startControl=t,this.endControl=s,this.end=A}return r.prototype.subdivide=function(e,t){var s=Ro(this.start,this.startControl,e),A=Ro(this.startControl,this.endControl,e),l=Ro(this.endControl,this.end,e),d=Ro(s,A,e),u=Ro(A,l,e),f=Ro(d,u,e);return t?new r(this.start,s,d,f):new r(f,u,l,this.end)},r.prototype.add=function(e,t){return new r(this.start.add(e,t),this.startControl.add(e,t),this.endControl.add(e,t),this.end.add(e,t))},r.prototype.reverse=function(){return new r(this.end,this.endControl,this.startControl,this.start)},r})(),on=function(r){return r.type===1},TH=(function(){function r(e){var t=e.styles,s=e.bounds,A=Tc(t.borderTopLeftRadius,s.width,s.height),l=A[0],d=A[1],u=Tc(t.borderTopRightRadius,s.width,s.height),f=u[0],g=u[1],x=Tc(t.borderBottomRightRadius,s.width,s.height),y=x[0],v=x[1],S=Tc(t.borderBottomLeftRadius,s.width,s.height),R=S[0],j=S[1],V=[];V.push((l+f)/s.width),V.push((R+y)/s.width),V.push((d+j)/s.height),V.push((g+v)/s.height);var P=Math.max.apply(Math,V);P>1&&(l/=P,d/=P,f/=P,g/=P,y/=P,v/=P,R/=P,j/=P);var G=s.width-f,q=s.height-v,W=s.width-y,te=s.height-j,z=t.borderTopWidth,E=t.borderRightWidth,N=t.borderBottomWidth,C=t.borderLeftWidth,D=zt(t.paddingTop,e.bounds.width),Q=zt(t.paddingRight,e.bounds.width),T=zt(t.paddingBottom,e.bounds.width),_=zt(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=l>0||d>0?tr(s.left+C/3,s.top+z/3,l-C/3,d-z/3,_t.TOP_LEFT):new je(s.left+C/3,s.top+z/3),this.topRightBorderDoubleOuterBox=l>0||d>0?tr(s.left+G,s.top+z/3,f-E/3,g-z/3,_t.TOP_RIGHT):new je(s.left+s.width-E/3,s.top+z/3),this.bottomRightBorderDoubleOuterBox=y>0||v>0?tr(s.left+W,s.top+q,y-E/3,v-N/3,_t.BOTTOM_RIGHT):new je(s.left+s.width-E/3,s.top+s.height-N/3),this.bottomLeftBorderDoubleOuterBox=R>0||j>0?tr(s.left+C/3,s.top+te,R-C/3,j-N/3,_t.BOTTOM_LEFT):new je(s.left+C/3,s.top+s.height-N/3),this.topLeftBorderDoubleInnerBox=l>0||d>0?tr(s.left+C*2/3,s.top+z*2/3,l-C*2/3,d-z*2/3,_t.TOP_LEFT):new je(s.left+C*2/3,s.top+z*2/3),this.topRightBorderDoubleInnerBox=l>0||d>0?tr(s.left+G,s.top+z*2/3,f-E*2/3,g-z*2/3,_t.TOP_RIGHT):new je(s.left+s.width-E*2/3,s.top+z*2/3),this.bottomRightBorderDoubleInnerBox=y>0||v>0?tr(s.left+W,s.top+q,y-E*2/3,v-N*2/3,_t.BOTTOM_RIGHT):new je(s.left+s.width-E*2/3,s.top+s.height-N*2/3),this.bottomLeftBorderDoubleInnerBox=R>0||j>0?tr(s.left+C*2/3,s.top+te,R-C*2/3,j-N*2/3,_t.BOTTOM_LEFT):new je(s.left+C*2/3,s.top+s.height-N*2/3),this.topLeftBorderStroke=l>0||d>0?tr(s.left+C/2,s.top+z/2,l-C/2,d-z/2,_t.TOP_LEFT):new je(s.left+C/2,s.top+z/2),this.topRightBorderStroke=l>0||d>0?tr(s.left+G,s.top+z/2,f-E/2,g-z/2,_t.TOP_RIGHT):new je(s.left+s.width-E/2,s.top+z/2),this.bottomRightBorderStroke=y>0||v>0?tr(s.left+W,s.top+q,y-E/2,v-N/2,_t.BOTTOM_RIGHT):new je(s.left+s.width-E/2,s.top+s.height-N/2),this.bottomLeftBorderStroke=R>0||j>0?tr(s.left+C/2,s.top+te,R-C/2,j-N/2,_t.BOTTOM_LEFT):new je(s.left+C/2,s.top+s.height-N/2),this.topLeftBorderBox=l>0||d>0?tr(s.left,s.top,l,d,_t.TOP_LEFT):new je(s.left,s.top),this.topRightBorderBox=f>0||g>0?tr(s.left+G,s.top,f,g,_t.TOP_RIGHT):new je(s.left+s.width,s.top),this.bottomRightBorderBox=y>0||v>0?tr(s.left+W,s.top+q,y,v,_t.BOTTOM_RIGHT):new je(s.left+s.width,s.top+s.height),this.bottomLeftBorderBox=R>0||j>0?tr(s.left,s.top+te,R,j,_t.BOTTOM_LEFT):new je(s.left,s.top+s.height),this.topLeftPaddingBox=l>0||d>0?tr(s.left+C,s.top+z,Math.max(0,l-C),Math.max(0,d-z),_t.TOP_LEFT):new je(s.left+C,s.top+z),this.topRightPaddingBox=f>0||g>0?tr(s.left+Math.min(G,s.width-E),s.top+z,G>s.width+E?0:Math.max(0,f-E),Math.max(0,g-z),_t.TOP_RIGHT):new je(s.left+s.width-E,s.top+z),this.bottomRightPaddingBox=y>0||v>0?tr(s.left+Math.min(W,s.width-C),s.top+Math.min(q,s.height-N),Math.max(0,y-E),Math.max(0,v-N),_t.BOTTOM_RIGHT):new je(s.left+s.width-E,s.top+s.height-N),this.bottomLeftPaddingBox=R>0||j>0?tr(s.left+C,s.top+Math.min(te,s.height-N),Math.max(0,R-C),Math.max(0,j-N),_t.BOTTOM_LEFT):new je(s.left+C,s.top+s.height-N),this.topLeftContentBox=l>0||d>0?tr(s.left+C+_,s.top+z+D,Math.max(0,l-(C+_)),Math.max(0,d-(z+D)),_t.TOP_LEFT):new je(s.left+C+_,s.top+z+D),this.topRightContentBox=f>0||g>0?tr(s.left+Math.min(G,s.width+C+_),s.top+z+D,G>s.width+C+_?0:f-C+_,g-(z+D),_t.TOP_RIGHT):new je(s.left+s.width-(E+Q),s.top+z+D),this.bottomRightContentBox=y>0||v>0?tr(s.left+Math.min(W,s.width-(C+_)),s.top+Math.min(q,s.height+z+D),Math.max(0,y-(E+Q)),v-(N+T),_t.BOTTOM_RIGHT):new je(s.left+s.width-(E+Q),s.top+s.height-(N+T)),this.bottomLeftContentBox=R>0||j>0?tr(s.left+C+_,s.top+te,Math.max(0,R-(C+_)),j-(N+T),_t.BOTTOM_LEFT):new je(s.left+C+_,s.top+s.height-(N+T))}return r})(),_t;(function(r){r[r.TOP_LEFT=0]="TOP_LEFT",r[r.TOP_RIGHT=1]="TOP_RIGHT",r[r.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",r[r.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(_t||(_t={}));var tr=function(r,e,t,s,A){var l=4*((Math.sqrt(2)-1)/3),d=t*l,u=s*l,f=r+t,g=e+s;switch(A){case _t.TOP_LEFT:return new mh(new je(r,g),new je(r,g-u),new je(f-d,e),new je(f,e));case _t.TOP_RIGHT:return new mh(new je(r,e),new je(r+d,e),new je(f,g-u),new je(f,g));case _t.BOTTOM_RIGHT:return new mh(new je(f,e),new je(f,e+u),new je(r+d,g),new je(r,g));case _t.BOTTOM_LEFT:default:return new mh(new je(f,g),new je(f-d,g),new je(r,e+u),new je(r,e))}},ff=function(r){return[r.topLeftBorderBox,r.topRightBorderBox,r.bottomRightBorderBox,r.bottomLeftBorderBox]},UH=function(r){return[r.topLeftContentBox,r.topRightContentBox,r.bottomRightContentBox,r.bottomLeftContentBox]},mf=function(r){return[r.topLeftPaddingBox,r.topRightPaddingBox,r.bottomRightPaddingBox,r.bottomLeftPaddingBox]},QH=(function(){function r(e,t,s){this.offsetX=e,this.offsetY=t,this.matrix=s,this.type=0,this.target=6}return r})(),gh=(function(){function r(e,t){this.path=e,this.target=t,this.type=1}return r})(),FH=(function(){function r(e){this.opacity=e,this.type=2,this.target=6}return r})(),IH=function(r){return r.type===0},iS=function(r){return r.type===1},DH=function(r){return r.type===2},u1=function(r,e){return r.length===e.length?r.some(function(t,s){return t===e[s]}):!1},kH=function(r,e,t,s,A){return r.map(function(l,d){switch(d){case 0:return l.add(e,t);case 1:return l.add(e+s,t);case 2:return l.add(e+s,t+A);case 3:return l.add(e,t+A)}return l})},AS=(function(){function r(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return r})(),oS=(function(){function r(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new TH(this.container),this.container.styles.opacity<1&&this.effects.push(new FH(this.container.styles.opacity)),this.container.styles.transform!==null){var s=this.container.bounds.left+this.container.styles.transformOrigin[0].number,A=this.container.bounds.top+this.container.styles.transformOrigin[1].number,l=this.container.styles.transform;this.effects.push(new QH(s,A,l))}if(this.container.styles.overflowX!==0){var d=ff(this.curves),u=mf(this.curves);u1(d,u)?this.effects.push(new gh(d,6)):(this.effects.push(new gh(d,2)),this.effects.push(new gh(u,4)))}}return r.prototype.getEffects=function(e){for(var t=[2,3].indexOf(this.container.styles.position)===-1,s=this.parent,A=this.effects.slice(0);s;){var l=s.effects.filter(function(f){return!iS(f)});if(t||s.container.styles.position!==0||!s.parent){if(A.unshift.apply(A,l),t=[2,3].indexOf(s.container.styles.position)===-1,s.container.styles.overflowX!==0){var d=ff(s.curves),u=mf(s.curves);u1(d,u)||A.unshift(new gh(u,6))}}else A.unshift.apply(A,l);s=s.parent}return A.filter(function(f){return Lr(f.target,e)})},r})(),qx=function(r,e,t,s){r.container.elements.forEach(function(A){var l=Lr(A.flags,4),d=Lr(A.flags,2),u=new oS(A,r);Lr(A.styles.display,2048)&&s.push(u);var f=Lr(A.flags,8)?[]:s;if(l||d){var g=l||A.styles.isPositioned()?t:e,x=new AS(u);if(A.styles.isPositioned()||A.styles.opacity<1||A.styles.isTransformed()){var y=A.styles.zIndex.order;if(y<0){var v=0;g.negativeZIndex.some(function(R,j){return y>R.element.container.styles.zIndex.order?(v=j,!1):v>0}),g.negativeZIndex.splice(v,0,x)}else if(y>0){var S=0;g.positiveZIndex.some(function(R,j){return y>=R.element.container.styles.zIndex.order?(S=j+1,!1):S>0}),g.positiveZIndex.splice(S,0,x)}else g.zeroOrAutoZIndexOrTransformedOrOpacity.push(x)}else A.styles.isFloating()?g.nonPositionedFloats.push(x):g.nonPositionedInlineLevel.push(x);qx(u,x,l?x:t,f)}else A.styles.isInlineLevel()?e.inlineLevel.push(u):e.nonInlineLevel.push(u),qx(u,e,t,f);Lr(A.flags,8)&&lS(A,f)})},lS=function(r,e){for(var t=r instanceof Px?r.start:1,s=r instanceof Px?r.reversed:!1,A=0;A<e.length;A++){var l=e[A];l.container instanceof GN&&typeof l.container.value=="number"&&l.container.value!==0&&(t=l.container.value),l.listValue=id(t,l.container.styles.listStyleType,!0),t+=s?-1:1}},RH=function(r){var e=new oS(r,null),t=new AS(e),s=[];return qx(e,t,t,s),lS(e.container,s),t},h1=function(r,e){switch(e){case 0:return un(r.topLeftBorderBox,r.topLeftPaddingBox,r.topRightBorderBox,r.topRightPaddingBox);case 1:return un(r.topRightBorderBox,r.topRightPaddingBox,r.bottomRightBorderBox,r.bottomRightPaddingBox);case 2:return un(r.bottomRightBorderBox,r.bottomRightPaddingBox,r.bottomLeftBorderBox,r.bottomLeftPaddingBox);default:return un(r.bottomLeftBorderBox,r.bottomLeftPaddingBox,r.topLeftBorderBox,r.topLeftPaddingBox)}},MH=function(r,e){switch(e){case 0:return un(r.topLeftBorderBox,r.topLeftBorderDoubleOuterBox,r.topRightBorderBox,r.topRightBorderDoubleOuterBox);case 1:return un(r.topRightBorderBox,r.topRightBorderDoubleOuterBox,r.bottomRightBorderBox,r.bottomRightBorderDoubleOuterBox);case 2:return un(r.bottomRightBorderBox,r.bottomRightBorderDoubleOuterBox,r.bottomLeftBorderBox,r.bottomLeftBorderDoubleOuterBox);default:return un(r.bottomLeftBorderBox,r.bottomLeftBorderDoubleOuterBox,r.topLeftBorderBox,r.topLeftBorderDoubleOuterBox)}},LH=function(r,e){switch(e){case 0:return un(r.topLeftBorderDoubleInnerBox,r.topLeftPaddingBox,r.topRightBorderDoubleInnerBox,r.topRightPaddingBox);case 1:return un(r.topRightBorderDoubleInnerBox,r.topRightPaddingBox,r.bottomRightBorderDoubleInnerBox,r.bottomRightPaddingBox);case 2:return un(r.bottomRightBorderDoubleInnerBox,r.bottomRightPaddingBox,r.bottomLeftBorderDoubleInnerBox,r.bottomLeftPaddingBox);default:return un(r.bottomLeftBorderDoubleInnerBox,r.bottomLeftPaddingBox,r.topLeftBorderDoubleInnerBox,r.topLeftPaddingBox)}},HH=function(r,e){switch(e){case 0:return ph(r.topLeftBorderStroke,r.topRightBorderStroke);case 1:return ph(r.topRightBorderStroke,r.bottomRightBorderStroke);case 2:return ph(r.bottomRightBorderStroke,r.bottomLeftBorderStroke);default:return ph(r.bottomLeftBorderStroke,r.topLeftBorderStroke)}},ph=function(r,e){var t=[];return on(r)?t.push(r.subdivide(.5,!1)):t.push(r),on(e)?t.push(e.subdivide(.5,!0)):t.push(e),t},un=function(r,e,t,s){var A=[];return on(r)?A.push(r.subdivide(.5,!1)):A.push(r),on(t)?A.push(t.subdivide(.5,!0)):A.push(t),on(s)?A.push(s.subdivide(.5,!0).reverse()):A.push(s),on(e)?A.push(e.subdivide(.5,!1).reverse()):A.push(e),A},cS=function(r){var e=r.bounds,t=r.styles;return e.add(t.borderLeftWidth,t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth),-(t.borderTopWidth+t.borderBottomWidth))},gf=function(r){var e=r.styles,t=r.bounds,s=zt(e.paddingLeft,t.width),A=zt(e.paddingRight,t.width),l=zt(e.paddingTop,t.width),d=zt(e.paddingBottom,t.width);return t.add(s+e.borderLeftWidth,l+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+s+A),-(e.borderTopWidth+e.borderBottomWidth+l+d))},OH=function(r,e){return r===0?e.bounds:r===2?gf(e):cS(e)},PH=function(r,e){return r===0?e.bounds:r===2?gf(e):cS(e)},Tp=function(r,e,t){var s=OH(Go(r.styles.backgroundOrigin,e),r),A=PH(Go(r.styles.backgroundClip,e),r),l=VH(Go(r.styles.backgroundSize,e),t,s),d=l[0],u=l[1],f=Tc(Go(r.styles.backgroundPosition,e),s.width-d,s.height-u),g=zH(Go(r.styles.backgroundRepeat,e),f,l,s,A),x=Math.round(s.left+f[0]),y=Math.round(s.top+f[1]);return[g,x,y,d,u]},Mo=function(r){return Lt(r)&&r.value===tl.AUTO},xh=function(r){return typeof r=="number"},VH=function(r,e,t){var s=e[0],A=e[1],l=e[2],d=r[0],u=r[1];if(!d)return[0,0];if(Fr(d)&&u&&Fr(u))return[zt(d,t.width),zt(u,t.height)];var f=xh(l);if(Lt(d)&&(d.value===tl.CONTAIN||d.value===tl.COVER)){if(xh(l)){var g=t.width/t.height;return g<l!=(d.value===tl.COVER)?[t.width,t.width/l]:[t.height*l,t.height]}return[t.width,t.height]}var x=xh(s),y=xh(A),v=x||y;if(Mo(d)&&(!u||Mo(u))){if(x&&y)return[s,A];if(!f&&!v)return[t.width,t.height];if(v&&f){var S=x?s:A*l,R=y?A:s/l;return[S,R]}var j=x?s:t.width,V=y?A:t.height;return[j,V]}if(f){var P=0,G=0;return Fr(d)?P=zt(d,t.width):Fr(u)&&(G=zt(u,t.height)),Mo(d)?P=G*l:(!u||Mo(u))&&(G=P/l),[P,G]}var q=null,W=null;if(Fr(d)?q=zt(d,t.width):u&&Fr(u)&&(W=zt(u,t.height)),q!==null&&(!u||Mo(u))&&(W=x&&y?q/s*A:t.height),W!==null&&Mo(d)&&(q=x&&y?W/A*s:t.width),q!==null&&W!==null)return[q,W];throw new Error("Unable to calculate background-size for element")},Go=function(r,e){var t=r[e];return typeof t>"u"?r[0]:t},zH=function(r,e,t,s,A){var l=e[0],d=e[1],u=t[0],f=t[1];switch(r){case 2:return[new je(Math.round(s.left),Math.round(s.top+d)),new je(Math.round(s.left+s.width),Math.round(s.top+d)),new je(Math.round(s.left+s.width),Math.round(f+s.top+d)),new je(Math.round(s.left),Math.round(f+s.top+d))];case 3:return[new je(Math.round(s.left+l),Math.round(s.top)),new je(Math.round(s.left+l+u),Math.round(s.top)),new je(Math.round(s.left+l+u),Math.round(s.height+s.top)),new je(Math.round(s.left+l),Math.round(s.height+s.top))];case 1:return[new je(Math.round(s.left+l),Math.round(s.top+d)),new je(Math.round(s.left+l+u),Math.round(s.top+d)),new je(Math.round(s.left+l+u),Math.round(s.top+d+f)),new je(Math.round(s.left+l),Math.round(s.top+d+f))];default:return[new je(Math.round(A.left),Math.round(A.top)),new je(Math.round(A.left+A.width),Math.round(A.top)),new je(Math.round(A.left+A.width),Math.round(A.height+A.top)),new je(Math.round(A.left),Math.round(A.height+A.top))]}},KH="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",f1="Hidden Text",GH=(function(){function r(e){this._data={},this._document=e}return r.prototype.parseMetrics=function(e,t){var s=this._document.createElement("div"),A=this._document.createElement("img"),l=this._document.createElement("span"),d=this._document.body;s.style.visibility="hidden",s.style.fontFamily=e,s.style.fontSize=t,s.style.margin="0",s.style.padding="0",s.style.whiteSpace="nowrap",d.appendChild(s),A.src=KH,A.width=1,A.height=1,A.style.margin="0",A.style.padding="0",A.style.verticalAlign="baseline",l.style.fontFamily=e,l.style.fontSize=t,l.style.margin="0",l.style.padding="0",l.appendChild(this._document.createTextNode(f1)),s.appendChild(l),s.appendChild(A);var u=A.offsetTop-l.offsetTop+2;s.removeChild(l),s.appendChild(this._document.createTextNode(f1)),s.style.lineHeight="normal",A.style.verticalAlign="super";var f=A.offsetTop-s.offsetTop+2;return d.removeChild(s),{baseline:u,middle:f}},r.prototype.getMetrics=function(e,t){var s=e+" "+t;return typeof this._data[s]>"u"&&(this._data[s]=this.parseMetrics(e,t)),this._data[s]},r})(),dS=(function(){function r(e,t){this.context=e,this.options=t}return r})(),qH=1e4,YH=(function(r){Fn(e,r);function e(t,s){var A=r.call(this,t,s)||this;return A._activeEffects=[],A.canvas=s.canvas?s.canvas:document.createElement("canvas"),A.ctx=A.canvas.getContext("2d"),s.canvas||(A.canvas.width=Math.floor(s.width*s.scale),A.canvas.height=Math.floor(s.height*s.scale),A.canvas.style.width=s.width+"px",A.canvas.style.height=s.height+"px"),A.fontMetrics=new GH(document),A.ctx.scale(A.options.scale,A.options.scale),A.ctx.translate(-s.x,-s.y),A.ctx.textBaseline="bottom",A._activeEffects=[],A.context.logger.debug("Canvas renderer initialized ("+s.width+"x"+s.height+") with scale "+s.scale),A}return e.prototype.applyEffects=function(t){for(var s=this;this._activeEffects.length;)this.popEffect();t.forEach(function(A){return s.applyEffect(A)})},e.prototype.applyEffect=function(t){this.ctx.save(),DH(t)&&(this.ctx.globalAlpha=t.opacity),IH(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),iS(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(t){return ws(this,void 0,void 0,function(){var s;return cs(this,function(A){switch(A.label){case 0:return s=t.element.container.styles,s.isVisible()?[4,this.renderStackContent(t)]:[3,2];case 1:A.sent(),A.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(t){return ws(this,void 0,void 0,function(){return cs(this,function(s){switch(s.label){case 0:if(Lr(t.container.flags,16))debugger;return t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return s.sent(),[4,this.renderNodeContent(t)];case 2:s.sent(),s.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(t,s,A){var l=this;if(s===0)this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+A);else{var d=X0(t.text);d.reduce(function(u,f){return l.ctx.fillText(f,u,t.bounds.top+A),u+l.ctx.measureText(f).width},t.bounds.left)}},e.prototype.createFontStyle=function(t){var s=t.fontVariant.filter(function(d){return d==="normal"||d==="small-caps"}).join(""),A=ZH(t.fontFamily).join(", "),l=vd(t.fontSize)?""+t.fontSize.number+t.fontSize.unit:t.fontSize.number+"px";return[[t.fontStyle,s,t.fontWeight,l,A].join(" "),A,l]},e.prototype.renderTextNode=function(t,s){return ws(this,void 0,void 0,function(){var A,l,d,u,f,g,x,y,v=this;return cs(this,function(S){return A=this.createFontStyle(s),l=A[0],d=A[1],u=A[2],this.ctx.font=l,this.ctx.direction=s.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",f=this.fontMetrics.getMetrics(d,u),g=f.baseline,x=f.middle,y=s.paintOrder,t.textBounds.forEach(function(R){y.forEach(function(j){switch(j){case 0:v.ctx.fillStyle=Gr(s.color),v.renderTextWithLetterSpacing(R,s.letterSpacing,g);var V=s.textShadow;V.length&&R.text.trim().length&&(V.slice(0).reverse().forEach(function(P){v.ctx.shadowColor=Gr(P.color),v.ctx.shadowOffsetX=P.offsetX.number*v.options.scale,v.ctx.shadowOffsetY=P.offsetY.number*v.options.scale,v.ctx.shadowBlur=P.blur.number,v.renderTextWithLetterSpacing(R,s.letterSpacing,g)}),v.ctx.shadowColor="",v.ctx.shadowOffsetX=0,v.ctx.shadowOffsetY=0,v.ctx.shadowBlur=0),s.textDecorationLine.length&&(v.ctx.fillStyle=Gr(s.textDecorationColor||s.color),s.textDecorationLine.forEach(function(P){switch(P){case 1:v.ctx.fillRect(R.bounds.left,Math.round(R.bounds.top+g),R.bounds.width,1);break;case 2:v.ctx.fillRect(R.bounds.left,Math.round(R.bounds.top),R.bounds.width,1);break;case 3:v.ctx.fillRect(R.bounds.left,Math.ceil(R.bounds.top+x),R.bounds.width,1);break}}));break;case 1:s.webkitTextStrokeWidth&&R.text.trim().length&&(v.ctx.strokeStyle=Gr(s.webkitTextStrokeColor),v.ctx.lineWidth=s.webkitTextStrokeWidth,v.ctx.lineJoin=window.chrome?"miter":"round",v.ctx.strokeText(R.text,R.bounds.left,R.bounds.top+g)),v.ctx.strokeStyle="",v.ctx.lineWidth=0,v.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(t,s,A){if(A&&t.intrinsicWidth>0&&t.intrinsicHeight>0){var l=gf(t),d=mf(s);this.path(d),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(A,0,0,t.intrinsicWidth,t.intrinsicHeight,l.left,l.top,l.width,l.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(t){return ws(this,void 0,void 0,function(){var s,A,l,d,u,f,G,G,g,x,y,v,W,S,R,te,j,V,P,G,q,W,te;return cs(this,function(z){switch(z.label){case 0:this.applyEffects(t.getEffects(4)),s=t.container,A=t.curves,l=s.styles,d=0,u=s.textNodes,z.label=1;case 1:return d<u.length?(f=u[d],[4,this.renderTextNode(f,l)]):[3,4];case 2:z.sent(),z.label=3;case 3:return d++,[3,1];case 4:if(!(s instanceof VN))return[3,8];z.label=5;case 5:return z.trys.push([5,7,,8]),[4,this.context.cache.match(s.src)];case 6:return G=z.sent(),this.renderReplacedElement(s,A,G),[3,8];case 7:return z.sent(),this.context.logger.error("Error loading image "+s.src),[3,8];case 8:if(s instanceof zN&&this.renderReplacedElement(s,A,s.canvas),!(s instanceof KN))return[3,12];z.label=9;case 9:return z.trys.push([9,11,,12]),[4,this.context.cache.match(s.svg)];case 10:return G=z.sent(),this.renderReplacedElement(s,A,G),[3,12];case 11:return z.sent(),this.context.logger.error("Error loading svg "+s.svg.substring(0,255)),[3,12];case 12:return s instanceof $N&&s.tree?(g=new e(this.context,{scale:this.options.scale,backgroundColor:s.backgroundColor,x:0,y:0,width:s.width,height:s.height}),[4,g.render(s.tree)]):[3,14];case 13:x=z.sent(),s.width&&s.height&&this.ctx.drawImage(x,0,0,s.width,s.height,s.bounds.left,s.bounds.top,s.bounds.width,s.bounds.height),z.label=14;case 14:if(s instanceof J0&&(y=Math.min(s.bounds.width,s.bounds.height),s.type===cf?s.checked&&(this.ctx.save(),this.path([new je(s.bounds.left+y*.39363,s.bounds.top+y*.79),new je(s.bounds.left+y*.16,s.bounds.top+y*.5549),new je(s.bounds.left+y*.27347,s.bounds.top+y*.44071),new je(s.bounds.left+y*.39694,s.bounds.top+y*.5649),new je(s.bounds.left+y*.72983,s.bounds.top+y*.23),new je(s.bounds.left+y*.84,s.bounds.top+y*.34085),new je(s.bounds.left+y*.39363,s.bounds.top+y*.79)]),this.ctx.fillStyle=Gr(t1),this.ctx.fill(),this.ctx.restore()):s.type===df&&s.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(s.bounds.left+y/2,s.bounds.top+y/2,y/4,0,Math.PI*2,!0),this.ctx.fillStyle=Gr(t1),this.ctx.fill(),this.ctx.restore())),$H(s)&&s.value.length){switch(v=this.createFontStyle(l),W=v[0],S=v[1],R=this.fontMetrics.getMetrics(W,S).baseline,this.ctx.font=W,this.ctx.fillStyle=Gr(l.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=JH(s.styles.textAlign),te=gf(s),j=0,s.styles.textAlign){case 1:j+=te.width/2;break;case 2:j+=te.width;break}V=te.add(j,0,0,-te.height/2+1),this.ctx.save(),this.path([new je(te.left,te.top),new je(te.left+te.width,te.top),new je(te.left+te.width,te.top+te.height),new je(te.left,te.top+te.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Kc(s.value,V),l.letterSpacing,R),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Lr(s.styles.display,2048))return[3,20];if(s.styles.listStyleImage===null)return[3,19];if(P=s.styles.listStyleImage,P.type!==0)return[3,18];G=void 0,q=P.url,z.label=15;case 15:return z.trys.push([15,17,,18]),[4,this.context.cache.match(q)];case 16:return G=z.sent(),this.ctx.drawImage(G,s.bounds.left-(G.width+10),s.bounds.top),[3,18];case 17:return z.sent(),this.context.logger.error("Error loading list-style-image "+q),[3,18];case 18:return[3,20];case 19:t.listValue&&s.styles.listStyleType!==-1&&(W=this.createFontStyle(l)[0],this.ctx.font=W,this.ctx.fillStyle=Gr(l.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",te=new Oa(s.bounds.left,s.bounds.top+zt(s.styles.paddingTop,s.bounds.width),s.bounds.width,MC(l.lineHeight,l.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Kc(t.listValue,te),l.letterSpacing,MC(l.lineHeight,l.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),z.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(t){return ws(this,void 0,void 0,function(){var s,A,P,l,d,P,u,f,P,g,x,P,y,v,P,S,R,P,j,V,P;return cs(this,function(G){switch(G.label){case 0:if(Lr(t.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:G.sent(),s=0,A=t.negativeZIndex,G.label=2;case 2:return s<A.length?(P=A[s],[4,this.renderStack(P)]):[3,5];case 3:G.sent(),G.label=4;case 4:return s++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:G.sent(),l=0,d=t.nonInlineLevel,G.label=7;case 7:return l<d.length?(P=d[l],[4,this.renderNode(P)]):[3,10];case 8:G.sent(),G.label=9;case 9:return l++,[3,7];case 10:u=0,f=t.nonPositionedFloats,G.label=11;case 11:return u<f.length?(P=f[u],[4,this.renderStack(P)]):[3,14];case 12:G.sent(),G.label=13;case 13:return u++,[3,11];case 14:g=0,x=t.nonPositionedInlineLevel,G.label=15;case 15:return g<x.length?(P=x[g],[4,this.renderStack(P)]):[3,18];case 16:G.sent(),G.label=17;case 17:return g++,[3,15];case 18:y=0,v=t.inlineLevel,G.label=19;case 19:return y<v.length?(P=v[y],[4,this.renderNode(P)]):[3,22];case 20:G.sent(),G.label=21;case 21:return y++,[3,19];case 22:S=0,R=t.zeroOrAutoZIndexOrTransformedOrOpacity,G.label=23;case 23:return S<R.length?(P=R[S],[4,this.renderStack(P)]):[3,26];case 24:G.sent(),G.label=25;case 25:return S++,[3,23];case 26:j=0,V=t.positiveZIndex,G.label=27;case 27:return j<V.length?(P=V[j],[4,this.renderStack(P)]):[3,30];case 28:G.sent(),G.label=29;case 29:return j++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},e.prototype.formatPath=function(t){var s=this;t.forEach(function(A,l){var d=on(A)?A.start:A;l===0?s.ctx.moveTo(d.x,d.y):s.ctx.lineTo(d.x,d.y),on(A)&&s.ctx.bezierCurveTo(A.startControl.x,A.startControl.y,A.endControl.x,A.endControl.y,A.end.x,A.end.y)})},e.prototype.renderRepeat=function(t,s,A,l){this.path(t),this.ctx.fillStyle=s,this.ctx.translate(A,l),this.ctx.fill(),this.ctx.translate(-A,-l)},e.prototype.resizeImage=function(t,s,A){var l;if(t.width===s&&t.height===A)return t;var d=(l=this.canvas.ownerDocument)!==null&&l!==void 0?l:document,u=d.createElement("canvas");u.width=Math.max(1,s),u.height=Math.max(1,A);var f=u.getContext("2d");return f.drawImage(t,0,0,t.width,t.height,0,0,s,A),u},e.prototype.renderBackgroundImage=function(t){return ws(this,void 0,void 0,function(){var s,A,l,d,u,f;return cs(this,function(g){switch(g.label){case 0:s=t.styles.backgroundImage.length-1,A=function(x){var y,v,S,D,M,F,_,U,N,R,D,M,F,_,U,j,V,P,G,q,W,te,z,E,N,C,D,Q,T,_,U,Y,M,F,K,ne,ee,O,X,Ae,me,Ee;return cs(this,function(Be){switch(Be.label){case 0:if(x.type!==0)return[3,5];y=void 0,v=x.url,Be.label=1;case 1:return Be.trys.push([1,3,,4]),[4,l.context.cache.match(v)];case 2:return y=Be.sent(),[3,4];case 3:return Be.sent(),l.context.logger.error("Error loading background-image "+v),[3,4];case 4:return y&&(S=Tp(t,s,[y.width,y.height,y.width/y.height]),D=S[0],M=S[1],F=S[2],_=S[3],U=S[4],N=l.ctx.createPattern(l.resizeImage(y,_,U),"repeat"),l.renderRepeat(D,N,M,F)),[3,6];case 5:IR(x)?(R=Tp(t,s,[null,null,null]),D=R[0],M=R[1],F=R[2],_=R[3],U=R[4],j=_R(x.angle,_,U),V=j[0],P=j[1],G=j[2],q=j[3],W=j[4],te=document.createElement("canvas"),te.width=_,te.height=U,z=te.getContext("2d"),E=z.createLinearGradient(P,q,G,W),kC(x.stops,V).forEach(function(ke){return E.addColorStop(ke.stop,Gr(ke.color))}),z.fillStyle=E,z.fillRect(0,0,_,U),_>0&&U>0&&(N=l.ctx.createPattern(te,"repeat"),l.renderRepeat(D,N,M,F))):DR(x)&&(C=Tp(t,s,[null,null,null]),D=C[0],Q=C[1],T=C[2],_=C[3],U=C[4],Y=x.position.length===0?[q0]:x.position,M=zt(Y[0],_),F=zt(Y[Y.length-1],U),K=TR(x,M,F,_,U),ne=K[0],ee=K[1],ne>0&&ee>0&&(O=l.ctx.createRadialGradient(Q+M,T+F,0,Q+M,T+F,ne),kC(x.stops,ne*2).forEach(function(ke){return O.addColorStop(ke.stop,Gr(ke.color))}),l.path(D),l.ctx.fillStyle=O,ne!==ee?(X=t.bounds.left+.5*t.bounds.width,Ae=t.bounds.top+.5*t.bounds.height,me=ee/ne,Ee=1/me,l.ctx.save(),l.ctx.translate(X,Ae),l.ctx.transform(1,0,0,me,0,0),l.ctx.translate(-X,-Ae),l.ctx.fillRect(Q,Ee*(T-Ae)+Ae,_,U*Ee),l.ctx.restore()):l.ctx.fill())),Be.label=6;case 6:return s--,[2]}})},l=this,d=0,u=t.styles.backgroundImage.slice(0).reverse(),g.label=1;case 1:return d<u.length?(f=u[d],[5,A(f)]):[3,4];case 2:g.sent(),g.label=3;case 3:return d++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(t,s,A){return ws(this,void 0,void 0,function(){return cs(this,function(l){return this.path(h1(A,s)),this.ctx.fillStyle=Gr(t),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(t,s,A,l){return ws(this,void 0,void 0,function(){var d,u;return cs(this,function(f){switch(f.label){case 0:return s<3?[4,this.renderSolidBorder(t,A,l)]:[3,2];case 1:return f.sent(),[2];case 2:return d=MH(l,A),this.path(d),this.ctx.fillStyle=Gr(t),this.ctx.fill(),u=LH(l,A),this.path(u),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(t){return ws(this,void 0,void 0,function(){var s,A,l,d,u,f,g,x,y=this;return cs(this,function(v){switch(v.label){case 0:return this.applyEffects(t.getEffects(2)),s=t.container.styles,A=!Hi(s.backgroundColor)||s.backgroundImage.length,l=[{style:s.borderTopStyle,color:s.borderTopColor,width:s.borderTopWidth},{style:s.borderRightStyle,color:s.borderRightColor,width:s.borderRightWidth},{style:s.borderBottomStyle,color:s.borderBottomColor,width:s.borderBottomWidth},{style:s.borderLeftStyle,color:s.borderLeftColor,width:s.borderLeftWidth}],d=XH(Go(s.backgroundClip,0),t.curves),A||s.boxShadow.length?(this.ctx.save(),this.path(d),this.ctx.clip(),Hi(s.backgroundColor)||(this.ctx.fillStyle=Gr(s.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:v.sent(),this.ctx.restore(),s.boxShadow.slice(0).reverse().forEach(function(S){y.ctx.save();var R=ff(t.curves),j=S.inset?0:qH,V=kH(R,-j+(S.inset?1:-1)*S.spread.number,(S.inset?1:-1)*S.spread.number,S.spread.number*(S.inset?-2:2),S.spread.number*(S.inset?-2:2));S.inset?(y.path(R),y.ctx.clip(),y.mask(V)):(y.mask(R),y.ctx.clip(),y.path(V)),y.ctx.shadowOffsetX=S.offsetX.number+j,y.ctx.shadowOffsetY=S.offsetY.number,y.ctx.shadowColor=Gr(S.color),y.ctx.shadowBlur=S.blur.number,y.ctx.fillStyle=S.inset?Gr(S.color):"rgba(0,0,0,1)",y.ctx.fill(),y.ctx.restore()}),v.label=2;case 2:u=0,f=0,g=l,v.label=3;case 3:return f<g.length?(x=g[f],x.style!==0&&!Hi(x.color)&&x.width>0?x.style!==2?[3,5]:[4,this.renderDashedDottedBorder(x.color,x.width,u,t.curves,2)]:[3,11]):[3,13];case 4:return v.sent(),[3,11];case 5:return x.style!==3?[3,7]:[4,this.renderDashedDottedBorder(x.color,x.width,u,t.curves,3)];case 6:return v.sent(),[3,11];case 7:return x.style!==4?[3,9]:[4,this.renderDoubleBorder(x.color,x.width,u,t.curves)];case 8:return v.sent(),[3,11];case 9:return[4,this.renderSolidBorder(x.color,u,t.curves)];case 10:v.sent(),v.label=11;case 11:u++,v.label=12;case 12:return f++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(t,s,A,l,d){return ws(this,void 0,void 0,function(){var u,f,g,x,y,v,S,R,j,V,P,G,q,W,te,z,te,z;return cs(this,function(E){return this.ctx.save(),u=HH(l,A),f=h1(l,A),d===2&&(this.path(f),this.ctx.clip()),on(f[0])?(g=f[0].start.x,x=f[0].start.y):(g=f[0].x,x=f[0].y),on(f[1])?(y=f[1].end.x,v=f[1].end.y):(y=f[1].x,v=f[1].y),A===0||A===2?S=Math.abs(g-y):S=Math.abs(x-v),this.ctx.beginPath(),d===3?this.formatPath(u):this.formatPath(f.slice(0,2)),R=s<3?s*3:s*2,j=s<3?s*2:s,d===3&&(R=s,j=s),V=!0,S<=R*2?V=!1:S<=R*2+j?(P=S/(2*R+j),R*=P,j*=P):(G=Math.floor((S+j)/(R+j)),q=(S-G*R)/(G-1),W=(S-(G+1)*R)/G,j=W<=0||Math.abs(j-q)<Math.abs(j-W)?q:W),V&&(d===3?this.ctx.setLineDash([0,R+j]):this.ctx.setLineDash([R,j])),d===3?(this.ctx.lineCap="round",this.ctx.lineWidth=s):this.ctx.lineWidth=s*2+1.1,this.ctx.strokeStyle=Gr(t),this.ctx.stroke(),this.ctx.setLineDash([]),d===2&&(on(f[0])&&(te=f[3],z=f[0],this.ctx.beginPath(),this.formatPath([new je(te.end.x,te.end.y),new je(z.start.x,z.start.y)]),this.ctx.stroke()),on(f[1])&&(te=f[1],z=f[2],this.ctx.beginPath(),this.formatPath([new je(te.end.x,te.end.y),new je(z.start.x,z.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(t){return ws(this,void 0,void 0,function(){var s;return cs(this,function(A){switch(A.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Gr(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),s=RH(t),[4,this.renderStack(s)];case 1:return A.sent(),this.applyEffects([]),[2,this.canvas]}})})},e})(dS),$H=function(r){return r instanceof YN||r instanceof qN?!0:r instanceof J0&&r.type!==df&&r.type!==cf},XH=function(r,e){switch(r){case 0:return ff(e);case 2:return UH(e);default:return mf(e)}},JH=function(r){switch(r){case 1:return"center";case 2:return"right";default:return"left"}},WH=["-apple-system","system-ui"],ZH=function(r){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?r.filter(function(e){return WH.indexOf(e)===-1}):r},eO=(function(r){Fn(e,r);function e(t,s){var A=r.call(this,t,s)||this;return A.canvas=s.canvas?s.canvas:document.createElement("canvas"),A.ctx=A.canvas.getContext("2d"),A.options=s,A.canvas.width=Math.floor(s.width*s.scale),A.canvas.height=Math.floor(s.height*s.scale),A.canvas.style.width=s.width+"px",A.canvas.style.height=s.height+"px",A.ctx.scale(A.options.scale,A.options.scale),A.ctx.translate(-s.x,-s.y),A.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+s.width+"x"+s.height+" at "+s.x+","+s.y+") with scale "+s.scale),A}return e.prototype.render=function(t){return ws(this,void 0,void 0,function(){var s,A;return cs(this,function(l){switch(l.label){case 0:return s=Ox(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,tO(s)];case 1:return A=l.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Gr(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(A,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e})(dS),tO=function(r){return new Promise(function(e,t){var s=new Image;s.onload=function(){e(s)},s.onerror=t,s.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(r))})},rO=(function(){function r(e){var t=e.id,s=e.enabled;this.id=t,this.enabled=s,this.start=Date.now()}return r.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Xu([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},r.prototype.getTime=function(){return Date.now()-this.start},r.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Xu([this.id,this.getTime()+"ms"],e))},r.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Xu([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},r.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Xu([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},r.instances={},r})(),sO=(function(){function r(e,t){var s;this.windowBounds=t,this.instanceName="#"+r.instanceCount++,this.logger=new rO({id:this.instanceName,enabled:e.logging}),this.cache=(s=e.cache)!==null&&s!==void 0?s:new BH(this,e)}return r.instanceCount=1,r})(),nO=function(r,e){return e===void 0&&(e={}),aO(r,e)};typeof window<"u"&&aS.setContext(window);var aO=function(r,e){return ws(void 0,void 0,void 0,function(){var t,s,A,l,d,u,f,g,x,y,v,S,R,j,V,P,G,q,W,te,E,z,E,N,C,D,Q,T,_,U,Y,M,F,K,ne,ee,O,X,Ae,me;return cs(this,function(Ee){switch(Ee.label){case 0:if(!r||typeof r!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(t=r.ownerDocument,!t)throw new Error("Element is not attached to a Document");if(s=t.defaultView,!s)throw new Error("Document is not attached to a Window");return A={allowTaint:(N=e.allowTaint)!==null&&N!==void 0?N:!1,imageTimeout:(C=e.imageTimeout)!==null&&C!==void 0?C:15e3,proxy:e.proxy,useCORS:(D=e.useCORS)!==null&&D!==void 0?D:!1},l=Nx({logging:(Q=e.logging)!==null&&Q!==void 0?Q:!0,cache:e.cache},A),d={windowWidth:(T=e.windowWidth)!==null&&T!==void 0?T:s.innerWidth,windowHeight:(_=e.windowHeight)!==null&&_!==void 0?_:s.innerHeight,scrollX:(U=e.scrollX)!==null&&U!==void 0?U:s.pageXOffset,scrollY:(Y=e.scrollY)!==null&&Y!==void 0?Y:s.pageYOffset},u=new Oa(d.scrollX,d.scrollY,d.windowWidth,d.windowHeight),f=new sO(l,u),g=(M=e.foreignObjectRendering)!==null&&M!==void 0?M:!1,x={allowTaint:(F=e.allowTaint)!==null&&F!==void 0?F:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:g,copyStyles:g},f.logger.debug("Starting document clone with size "+u.width+"x"+u.height+" scrolled to "+-u.left+","+-u.top),y=new c1(f,r,x),v=y.clonedReferenceElement,v?[4,y.toIFrame(t,u)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return S=Ee.sent(),R=W0(v)||iH(v)?kk(v.ownerDocument):Hf(f,v),j=R.width,V=R.height,P=R.left,G=R.top,q=iO(f,v,e.backgroundColor),W={canvas:e.canvas,backgroundColor:q,scale:(ne=(K=e.scale)!==null&&K!==void 0?K:s.devicePixelRatio)!==null&&ne!==void 0?ne:1,x:((ee=e.x)!==null&&ee!==void 0?ee:0)+P,y:((O=e.y)!==null&&O!==void 0?O:0)+G,width:(X=e.width)!==null&&X!==void 0?X:Math.ceil(j),height:(Ae=e.height)!==null&&Ae!==void 0?Ae:Math.ceil(V)},g?(f.logger.debug("Document cloned, using foreign object rendering"),E=new eO(f,W),[4,E.render(v)]):[3,3];case 2:return te=Ee.sent(),[3,5];case 3:return f.logger.debug("Document cloned, element located at "+P+","+G+" with size "+j+"x"+V+" using computed rendering"),f.logger.debug("Starting DOM parsing"),z=JN(f,v),q===z.styles.backgroundColor&&(z.styles.backgroundColor=ka.TRANSPARENT),f.logger.debug("Starting renderer for element at "+W.x+","+W.y+" with size "+W.width+"x"+W.height),E=new YH(f,W),[4,E.render(z)];case 4:te=Ee.sent(),Ee.label=5;case 5:return(!((me=e.removeContainer)!==null&&me!==void 0)||me)&&(c1.destroy(S)||f.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),f.logger.debug("Finished rendering"),[2,te]}})})},iO=function(r,e,t){var s=e.ownerDocument,A=s.documentElement?Vc(r,getComputedStyle(s.documentElement).backgroundColor):ka.TRANSPARENT,l=s.body?Vc(r,getComputedStyle(s.body).backgroundColor):ka.TRANSPARENT,d=typeof t=="string"?Vc(r,t):t===null?ka.TRANSPARENT:4294967295;return e===s.documentElement?Hi(A)?Hi(l)?d:l:A:d};const AO=r=>{const e=new Set,t={};return r.forEach(s=>{if(!s.day||!s.startTime||!s.endTime)return;const A=s.day;t[A]||(t[A]=[]),t[A].push(s)}),Object.values(t).forEach(s=>{if(!(s.length<2))for(let A=0;A<s.length;A++)for(let l=A+1;l<s.length;l++){const d=s[A],u=s[l];Yx(d,u)&&(e.add(d.id),e.add(u.id))}}),e},yh=r=>{const[e,t]=r.split(":").map(Number);return e*60+t},Yx=(r,e)=>{if(!r.startTime||!r.endTime||!e.startTime||!e.endTime)return!1;const t=yh(r.startTime),s=yh(r.endTime),A=yh(e.startTime),l=yh(e.endTime);return t<l&&A<s},EA={A:{start:"07:00",end:"07:50"},1:{start:"08:10",end:"09:00"},2:{start:"09:10",end:"10:00"},3:{start:"10:10",end:"11:00"},4:{start:"11:10",end:"12:00"},B:{start:"12:10",end:"13:00"},5:{start:"13:10",end:"14:00"},6:{start:"14:10",end:"15:00"},7:{start:"15:10",end:"16:00"},8:{start:"16:10",end:"17:00"},9:{start:"17:10",end:"18:00"},C:{start:"18:10",end:"19:00"},D:{start:"19:10",end:"20:00"},E:{start:"20:10",end:"21:00"},F:{start:"21:10",end:"22:00"}},Xn=["A","1","2","3","4","B","5","6","7","8","9","C","D","E","F"],oO=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Oi=r=>{let e=[];if(Array.isArray(r))e=r;else if(typeof r=="string")return[];if(!e||e.length===0)return[];const t=[];for(let s=0;s<7;s++){const A=e[s];if(A&&A.length>0){const l=(s+1)%7,d=oO[l],u=A[0],f=A[A.length-1],g=EA[u]?.start,x=EA[f]?.end;g&&x&&t.push({day:d,startTime:g,endTime:x})}}return t},uS=r=>{const e=Oi(r);return e.length>0?e[0]:null},bh=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],m1=Xn.indexOf("1"),g1=Xn.indexOf("9"),pf=({semester:r,courses:e,onCourseClick:t,onRemoveCourse:s,id:A="schedule-visual-grid",showConflictWarnings:l=!0,readOnly:d=!1,actionType:u="delete"})=>{const{t:f}=it(),[g,x]=k.useState(window.innerWidth<768);k.useEffect(()=>{const z=()=>x(window.innerWidth<768);return window.addEventListener("resize",z),()=>window.removeEventListener("resize",z)},[]);const y=k.useMemo(()=>e.filter(z=>z.semester===r&&(z.classTime&&typeof z.classTime!="string"&&z.classTime.length>0||typeof z.classTime=="string"||Oi(z.classTime||[]).length>0||z.day&&z.startTime&&z.endTime)),[e,r]),v=z=>{if(!z)return-1;const[E,N]=z.split(":").map(Number),C=E*60+N;return Xn.findIndex(D=>{const Q=EA[D],[T,_]=Q.start.split(":").map(Number),[U,Y]=Q.end.split(":").map(Number),M=T*60+_,F=U*60+Y;return C>=M&&C<F})},S=z=>Xn.findIndex(E=>EA[E].end===z),{activeDays:R,startIdx:j,endIdx:V}=k.useMemo(()=>{let z=!1,E=m1,N=g1;return y.forEach(C=>{const D=Oi(C.classTime||[]);if(D.length>0)D.forEach(Q=>{(Q.day==="Saturday"||Q.day==="Sunday")&&(z=!0);const T=v(Q.startTime),_=S(Q.endTime)!==-1?S(Q.endTime):v(Q.endTime);T!==-1&&T<E&&(E=T),_!==-1&&_>N&&(N=_)});else{if(C.day&&(C.day==="Saturday"||C.day==="Sunday")&&(z=!0),C.startTime){const Q=v(C.startTime);Q!==-1&&Q<E&&(E=Q)}if(C.endTime){const Q=S(C.endTime);if(Q!==-1&&Q>N&&(N=Q),Q===-1){const T=v(C.endTime);T!==-1&&T>N&&(N=T)}}}}),E=Math.max(0,E),N=Math.min(Xn.length-1,N),E>N&&(E=m1,N=g1),{activeDays:z?bh:bh.slice(1,6),startIdx:E,endIdx:N}},[y]),P=k.useMemo(()=>Xn.slice(j,V+1),[j,V]),G=k.useMemo(()=>AO(y),[y]),q=k.useMemo(()=>{const z=new Map;return y.forEach(E=>{const N=Oi(E.classTime||[]);if(N.length>0){N.forEach(Q=>{let T=v(Q.startTime),_=S(Q.endTime);if(T!==-1){_===-1&&(_=T);for(let U=T;U<=_;U++){const Y=Xn[U],M=`${Q.day}-${Y}`;z.has(M)||z.set(M,[]);const F=z.get(M);F.some(K=>K.id===E.id)||F.push(E)}}});return}if(!E.startTime||!E.endTime||!E.day)return;let C=v(E.startTime),D=S(E.endTime);if(C===-1){const[Q,T]=E.startTime.split(":").map(Number),_=Q*60+T;C=Xn.findIndex(U=>{const Y=EA[U].start.split(":").map(Number);return Y[0]*60+Y[1]>=_})}if(D===-1){const[Q,T]=E.endTime.split(":").map(Number),_=Q*60+T;D=Xn.findIndex(U=>{const Y=EA[U].end.split(":").map(Number);return Y[0]*60+Y[1]>=_})}if(C!==-1){D===-1&&(D=C);for(let Q=C;Q<=D;Q++){const T=Xn[Q],_=`${E.day}-${T}`;z.has(_)||z.set(_,[]),z.get(_).push(E)}}}),z.forEach(E=>{E.sort((N,C)=>N.id.localeCompare(C.id))}),z},[y,j,V]),W=z=>{let E=z;if(/[\u4e00-\u9fa5]/.test(z)){let N=z.match(/^(.+?)(\s+[A-Za-z0-9\(])/);E=N?N[1]:z,E=E.replace(/\s*\(?[]\s*[\d,]+\)?\s*$/g,"")}if(/[:]/.test(E)){const N=E.split(/([:])/);return a.jsx(k.Fragment,{children:N.map((C,D)=>a.jsxs(k.Fragment,{children:[C,/[:]/.test(C)&&D<N.length-1&&a.jsx("br",{})]},D))})}return E},te=z=>{const E=z.match(/^[]\s*[\d,A-Za-z]+\s*\((.*?)\)$/);if(E)return E[1];const N=z.match(/^\((.*?)\)$/);return N?N[1]:z};return a.jsxs("div",{id:A,className:"grid bg-surface/50 border border-gray-700/50 rounded-lg overflow-hidden relative w-full",style:{gridTemplateColumns:`${g?"22px":"minmax(35px, 60px)"} repeat(${R.length}, minmax(0, 1fr))`,gridTemplateRows:`auto repeat(${P.length}, minmax(40px, auto))`},children:[a.jsx("div",{className:"bg-surface/80 p-0.5 md:p-2 border-r border-b border-gray-700/50 flex items-center justify-center text-[9px] md:text-xs text-muted font-mono leading-tight text-center [.export-mode_&]:transform-none",children:a.jsx("span",{className:"[.export-mode_&]:-translate-y-[2px]",children:"Period"})}),R.map(z=>a.jsxs("div",{className:"bg-surface/80 p-0.5 md:p-2 flex items-center justify-center text-center font-bold text-[10px] md:text-sm text-foreground/80 border-b border-gray-700/50 sticky top-0 z-30 backdrop-blur-md [.export-mode_&]:transform-none",children:[a.jsx("span",{className:"hidden md:inline [.export-mode_&]:-translate-y-[2px]",children:f.schedule.days[bh.indexOf(z)]}),a.jsx("span",{className:"md:hidden [.export-mode_&]:-translate-y-[2px]",children:f.schedule.days[bh.indexOf(z)].replace("","")})]},z)),P.map((z,E)=>{const N=EA[z];return a.jsxs(k.Fragment,{children:[a.jsxs("div",{className:"relative border-r border-gray-700/30 border-t border-gray-700/50 flex flex-col items-center justify-center p-0.5 [.export-mode_&]:transform-none",style:{gridRow:E+2,gridColumn:1,minHeight:"40px"},children:[a.jsx("span",{className:"font-bold text-[10px] md:text-sm text-primary [.export-mode_&]:-translate-y-[2px]",children:z}),a.jsxs("div",{className:"flex flex-col items-center text-[8px] md:text-[10px] text-muted leading-none opacity-80 mt-0.5 md:mt-0 [.export-mode_&]:-translate-y-[2px]",children:[a.jsx("span",{children:N.start}),a.jsx("span",{className:"hidden md:block text-[10px] leading-[0.5] opacity-50 my-0.5",children:"|"}),a.jsx("span",{children:N.end})]})]}),R.map((C,D)=>{const Q=`${C}-${z}`,T=q.get(Q)||[];return a.jsx("div",{className:`
                                        border-t border-gray-300 dark:border-gray-700/50
                                        border-r border-gray-300 dark:border-gray-700/30
                                        flex flex-col gap-1 p-0.5 justify-center
                                    `,style:{gridRow:E+2,gridColumn:D+2},children:T.map((_,U)=>{const Y=G.has(_.id);let M=af[_.category]||af.Other;return _.category==="General Education"&&_.genEduSubCategory&&(M=Bx[_.genEduSubCategory]||M),a.jsxs("div",{className:`
                                                    m-0.5 rounded-md border border-gray-200 dark:border-border
                                                    flex flex-col p-0.5 md:p-1
                                                    ${d?"cursor-default":"cursor-pointer hover:brightness-110 active:scale-95"}
                                                    items-center justify-center text-center
                                                     transition-all group
                                                    shadow-sm flex-shrink-0 relative overflow-hidden
                                                    ${M}
                                                    ${_.isWithdrawn?"opacity-50 grayscale":""}
                                                    ${Y&&l?"ring-1 md:ring-2 ring-red-500":""}
                                                    [.export-mode_&]:flex [.export-mode_&]:flex-col [.export-mode_&]:justify-center [.export-mode_&]:items-center
                                                `,style:{minHeight:"38px",width:"calc(100% - 4px)"},onClick:()=>!d&&t(_),children:[!d&&s&&a.jsx("div",{className:`absolute -top-1 -right-1 z-50 opacity-0 group-hover:opacity-100 transition-opacity bg-white 
                                                            ${u==="delete"?"text-red-500 hover:scale-110":"text-primary hover:scale-110"} 
                                                            rounded-full shadow-md p-0.5 cursor-pointer transform`,onClick:F=>{F.stopPropagation(),s(_)},title:u==="delete"?f.planner.delete||"Remove Course":f.planner.edit||"Edit Course",children:u==="delete"?a.jsx(ut,{size:12,strokeWidth:3}):a.jsx(z0,{size:12,strokeWidth:3})}),Y&&l&&a.jsx("div",{className:"absolute top-0 right-0 p-0.5 text-red-500 bg-white/90 rounded-bl-md z-30 shadow-sm",title:"Time Conflict!",children:a.jsx(Bs,{size:12,strokeWidth:3})}),_.isWithdrawn&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:a.jsx(ut,{size:48,className:"text-red-500/80 font-bold",strokeWidth:3})}),a.jsxs("div",{className:"w-full flex-1 flex flex-col justify-center items-center my-auto [.export-mode_&]:my-auto [.export-mode_&]:pb-3",children:[a.jsx("div",{className:`
                                                        font-bold text-[9px] md:text-sm leading-tight md:leading-snug break-words text-center mx-auto
                                                        ${_.isWithdrawn?"line-through decoration-red-500 decoration-2":""}
                                                        [.export-mode_&]:transform-none
                                                        `,children:a.jsx("div",{children:W(_.name)})}),_.room&&a.jsx("div",{className:"text-[8px] md:text-xs font-medium leading-[1.1] md:leading-tight mt-0.5 break-words opacity-90 mx-auto [.export-mode_&]:transform-none",children:te(_.room)})]}),_.isEMI&&a.jsx("div",{className:`absolute bottom-0 right-0 w-[8px] h-[8px] md:w-[28px] md:h-[16px] rounded-tl-full md:rounded-bl-none md:rounded-tl-xl md:rounded-br-md bg-amber-400 md:text-[10px] font-black text-amber-950 shadow-sm z-10 flex items-center justify-center leading-none md:pt-[1px]\r
                                                        [.export-mode_&]:pt-0 [.export-mode_&]:pb-[8px]\r
                                                    `,children:a.jsx("span",{className:"hidden md:inline",children:"EMI"})})]},`${_.id}-${z}-${U}`)})},`${C}-${z}`)})]},z)})]})},Up=r=>{const e=r.getFullYear(),t=String(r.getMonth()+1).padStart(2,"0"),s=String(r.getDate()).padStart(2,"0"),A=String(r.getHours()).padStart(2,"0"),l=String(r.getMinutes()).padStart(2,"0"),d=String(r.getSeconds()).padStart(2,"0");return`${e}${t}${s}T${A}${l}${d}`},hS=r=>{let e=r.trim().toLowerCase();const t=e.includes("pm")||e.includes("")||e.includes("p.m."),s=e.includes("am")||e.includes("")||e.includes("a.m."),A=e.match(/(\d{1,2}):(\d{2})/);if(A){let l=parseInt(A[1],10),d=parseInt(A[2],10);return t&&l<12?l+=12:s&&l===12&&(l=0),{hours:l,minutes:d}}return{hours:0,minutes:0}},lO=(r,e)=>{const t=new Date,s=t.getDay(),A=(r+7-s)%7,l=new Date(t);l.setDate(t.getDate()+A);const{hours:d,minutes:u}=hS(e);return l.setHours(d,u,0,0),l},cO={Sunday:"SU",Monday:"MO",Tuesday:"TU",Wednesday:"WE",Thursday:"TH",Friday:"FR",Saturday:"SA"},dO={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},uO=r=>{let e=["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//NSYSU Course Tracker//EN","CALSCALE:GREGORIAN","METHOD:PUBLISH"];return r.forEach(t=>{if(!t.day||!t.startTime||!t.endTime)return;t.day.split(/,\s*/).forEach(A=>{const l=cO[A],d=dO[A];if(!l||d===void 0)return;const u=lO(d,t.startTime),{hours:f,minutes:g}=hS(t.endTime),x=new Date(u);x.setHours(f,g,0,0);const y=`${t.id}-${l}-${Date.now()}@nsysu-tracker`,v=t.teacher||"Unknown Teacher";e.push("BEGIN:VEVENT",`UID:${y}`,`DTSTAMP:${Up(new Date)}`,`DTSTART:${Up(u)}`,`DTEND:${Up(x)}`,`SUMMARY:${t.name}`,`DESCRIPTION:ID: ${t.id}\\nTeacher: ${v}\\nCredits: ${t.credits}`,`LOCATION:${t.room||"TBA"}`,`RRULE:FREQ=WEEKLY;COUNT=18;BYDAY=${l}`,"END:VEVENT")})}),e.push("END:VCALENDAR"),e.join(`\r
`)},hO=({semester:r,courses:e,onClose:t,onEditCourse:s,onFixData:A})=>{const{t:l}=it(),[d,u]=k.useState(!1),f=k.useRef(null);k.useEffect(()=>{const j=V=>{f.current&&!f.current.contains(V.target)&&u(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),k.useEffect(()=>{const j=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=j}},[]);const g=k.useMemo(()=>e.filter(j=>j.semester===r&&j.day&&j.startTime&&j.endTime&&!j.isExemption&&j.category!=="University Way"&&!(j.category==="General Education"&&j.genEduSubCategory==="Primer")),[e,r]),x=k.useMemo(()=>e.filter(j=>j.semester===r),[e,r]),y=k.useMemo(()=>e.some(j=>{const V=j.category==="General Education"&&j.genEduSubCategory==="Primer",P=j.category==="General Education"&&j.genEduSubCategory==="Service";return j.userLabels?.includes("manual")||!j.name.includes(`
`)&&!/[\u4e00-\u9fa5]/.test(j.name)||(j.fixAttempts||0)>=2?!1:j.semester===r&&!V&&!P&&j.category!=="University Way"}),[e,r]),v=j=>{if(l.semesters[j])return l.semesters[j];const V=j.split(" ");if(V.length>=2&&V[0]==="Year"){const P=V[1],G=V.slice(2).join(" ");if(l.semesters["Year 1 Sem 1"].includes("")){const W=["","","","","","","",""][parseInt(P)-1]||P;if(G==="Summer")return`${W} ${l.catalog.summer}`;if(G==="Sem 1")return`${W} `;if(G==="Sem 2")return`${W} `}else{if(G==="Sem 1")return`Year ${P} Fall Semester`;if(G==="Sem 2")return`Year ${P} Spring Semester`;if(G==="Summer")return`Year ${P} Summer`}}return j.replace("Summer",l.catalog.summer)},S=()=>{const j=uO(g),V=new Blob([j],{type:"text/calendar"}),P=URL.createObjectURL(V),G=document.createElement("a");G.href=P;const q=v(r);G.download=`${q}_schedule.ics`.replace(/\s+/g,"_"),G.click(),URL.revokeObjectURL(P),u(!1)},R=async()=>{const j=document.getElementById("schedule-visual-grid");if(j){const V=j.style.overflow;j.style.overflow="visible",j.classList.add("export-mode");try{const P=await nO(j,{backgroundColor:getComputedStyle(document.documentElement).getPropertyValue("--color-background").trim(),scale:3,useCORS:!0,onclone:E=>{const N=E.getElementById("schedule-visual-grid");N&&(N.style.overflow="visible",N.style.height="auto",N.querySelectorAll("span.absolute").forEach(T=>{T.style.zIndex="10",T.style.position="absolute",T.style.top="0px",T.style.left="4px",T.style.transform="translateY(-50%)"}),N.querySelectorAll(".sticky").forEach(T=>{T.style.position="static",T.style.top="auto",T.classList.remove("sticky","top-0","backdrop-blur-md")}),N.querySelectorAll('div[class*="rounded"]').forEach(T=>{T.classList.remove("overflow-hidden"),T.style.overflow="visible",T.style.height="auto";const _=T.querySelector(".line-clamp-3");_&&(_.classList.remove("line-clamp-3"),_.style.whiteSpace="normal",_.style.overflow="visible"),T.querySelectorAll(".truncate").forEach(Y=>{Y.classList.remove("truncate"),Y.style.whiteSpace="normal",Y.style.overflow="visible"})}))}}),G=P.toDataURL("image/png"),q=v(r),W=l.schedule.schedule,te=`${q}_${W}.png`.replace(/\s+/g,"_");if(window.innerWidth<768&&navigator.share)try{const E=await new Promise(N=>P.toBlob(N,"image/png"));if(E){const N=new File([E],te,{type:"image/png"});if(navigator.canShare&&navigator.canShare({files:[N]})){await navigator.share({files:[N],title:te,text:"NSYXU Course Tracker Schedule"});return}}}catch(E){if(E.name==="AbortError")return;console.warn("Share API failed, falling back to traditional download:",E)}const z=document.createElement("a");z.href=G,z.download=te,z.click()}catch(P){console.error("Export failed",P),alert("Failed to generate image.")}finally{j.style.overflow=V,j.classList.remove("export-mode")}}};return $t.createPortal(a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[9999] p-1 md:p-4",children:a.jsxs("div",{className:"bg-background border border-gray-600 rounded-xl w-[98vw] md:w-full max-w-6xl shadow-2xl h-[95vh] md:h-[90vh] flex flex-col schedule-modal-content",children:[a.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-600 bg-background/50",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-xl font-bold text-foreground",children:[v(r)," ",l.schedule.schedule]}),a.jsxs("p",{className:"text-sm text-muted",children:[g.length," ",l.schedule.scheduledCourses]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[y&&A&&a.jsxs("button",{onClick:()=>A(r),className:"flex items-center gap-2 bg-yellow-500 hover:bg-yellow-400 text-black px-3 py-2 rounded-lg text-sm font-bold shadow-lg shadow-yellow-500/20 transition-colors mr-2 animate-pulse",children:[a.jsx(Bs,{size:18}),l.app.fixData||"Fix Data"]}),a.jsxs("div",{className:"relative",ref:f,children:[a.jsxs("button",{onClick:()=>u(!d),className:"flex items-center gap-2 bg-primary hover:bg-sky-400 text-white px-3 py-2 rounded-lg text-sm font-bold shadow-lg transition-colors",children:[a.jsx(Lf,{size:18}),l.schedule.exportSchedule,a.jsx(xd,{size:14,className:`transition-transform duration-200 ${d?"rotate-180":""}`})]}),d&&a.jsxs("div",{className:"absolute top-full right-0 mt-2 w-56 bg-surface border border-border rounded-lg shadow-xl overflow-hidden z-50 animate-in fade-in zoom-in-95 duration-200",children:[a.jsxs("button",{onClick:R,className:"w-full text-left px-4 py-3 text-sm text-foreground hover:bg-primary/10 flex items-center gap-3 font-medium transition-colors",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500/20 text-blue-500 flex items-center justify-center",children:a.jsx(w5,{size:16})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-bold",children:"Image (.png)"}),a.jsx("div",{className:"text-xs text-muted",children:"Original format"})]})]}),a.jsxs("button",{onClick:S,className:"w-full text-left px-4 py-3 text-sm text-foreground hover:bg-primary/10 flex items-center gap-3 font-medium transition-colors border-t border-border/50",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500/20 text-purple-500 flex items-center justify-center",children:a.jsx(OA,{size:16})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-bold",children:"Calendar (.ics)"}),a.jsx("div",{className:"text-xs text-muted",children:"For Google/Apple Cal"})]})]})]})]}),a.jsx("button",{onClick:t,className:"text-muted hover:text-foreground transition-colors ml-2",children:a.jsx(ut,{size:24})})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-1 md:p-4 pb-8 custom-scrollbar w-full",children:a.jsxs("div",{className:"w-full",children:[a.jsx(pf,{semester:r,courses:e.filter(j=>!j.isExemption&&j.category!=="University Way"&&!(j.category==="General Education"&&j.genEduSubCategory==="Primer")),onCourseClick:s,onRemoveCourse:s,actionType:"edit"}),a.jsx("div",{id:"schedule-list",className:"mt-6 bg-surface/20 border border-gray-600 rounded-lg overflow-hidden flex flex-col",children:a.jsxs("table",{className:"w-full text-sm text-left text-muted table-fixed",children:[a.jsx("thead",{className:"bg-surface text-muted uppercase text-[10px] md:text-xs",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-2 md:px-4 py-2 md:py-3 w-[50%] md:w-[40%]",children:l.schedule.courseName}),a.jsx("th",{className:"px-1 md:px-4 py-2 md:py-3 w-[15%] text-center",children:l.schedule.credits}),a.jsx("th",{className:"px-1 md:px-4 py-2 md:py-3 w-[15%] text-center",children:l.schedule.grade}),a.jsx("th",{className:"hidden md:table-cell px-4 py-3 w-[20%] text-center",children:l.schedule.category}),a.jsx("th",{className:"px-2 md:px-4 py-2 md:py-3 w-[20%] md:w-[10%] text-right",children:l.common?.actions||"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-600/50",children:x.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"px-4 py-4 text-center text-muted italic",children:l.schedule.noCourses})}):x.map(j=>a.jsxs("tr",{className:"hover:bg-surface/30 transition-colors group text-xs md:text-sm",children:[a.jsx("td",{className:"px-2 md:px-4 py-2 md:py-3 font-medium text-foreground truncate max-w-[120px] md:max-w-none",title:j.name,children:j.name}),a.jsx("td",{className:"px-1 md:px-4 py-2 md:py-3 text-center",children:j.credits}),a.jsx("td",{className:"px-1 md:px-4 py-2 md:py-3 text-center",children:j.isExemption?a.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-bold bg-gray-500/20 text-gray-400",children:l.form.isExemption}):a.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold ${["Fail","D","E"].includes(j.grade)?"bg-red-500/20 text-red-400":j.grade?"bg-green-500/20 text-green-400":"bg-surface text-muted"}`,children:j.grade||"-"})}),a.jsxs("td",{className:"hidden md:table-cell px-4 py-3 text-center",children:[l.categories[j.category]||j.category,j.category==="General Education"&&j.genEduSubCategory&&a.jsxs("span",{className:"ml-2 text-xs text-muted",children:["(",l.categories[j.genEduSubCategory]||j.genEduSubCategory,")"]})]}),a.jsx("td",{className:"px-2 md:px-4 py-2 md:py-4 text-right",children:a.jsx("button",{onClick:()=>s(j),className:"text-muted hover:text-primary transition-colors p-1 hover:bg-surface rounded",title:l.planner?.edit||"Edit",children:a.jsx(z0,{size:16})})})]},j.id))})]})})]})})]})}),document.body)},fO=({onClose:r,onAdd:e,existingSemesters:t})=>{const{t:s}=it(),[A,l]=k.useState(1),[d,u]=k.useState("Sem 1"),[f,g]=k.useState(""),x=()=>{const y=d==="Summer"?`Year ${A} Summer`:`Year ${A} ${d}`;if(t.includes(y)){g(s.addSemester?.exists||"This semester already exists!");return}e(A,d),r()};return $t.createPortal(a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[9999] p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-surface border border-border rounded-xl w-full max-w-sm shadow-2xl p-6 relative animate-in zoom-in-95 duration-200",children:[a.jsx("button",{onClick:r,className:"absolute top-4 right-4 text-muted hover:text-foreground transition-colors",children:a.jsx(ut,{size:20})}),a.jsx("h2",{className:"text-xl font-bold mb-6 text-foreground",children:s.addSemester?.title||"Add New Semester"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-1",children:s.addSemester?.year||"Year"}),a.jsx("select",{value:A,onChange:y=>{l(Number(y.target.value)),g("")},className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:ring-2 focus:ring-primary outline-none",children:[1,2,3,4,5,6,7,8].map(y=>{const v=["","","","","","","",""],S=s.addSemester?.yearOption?.includes("")?v[y-1]:y;return a.jsx("option",{value:y,children:s.addSemester?.yearOption?.replace("{year}",String(S))||`Year ${y}`},y)})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-1",children:s.addSemester?.semester||"Semester"}),a.jsxs("select",{value:d,onChange:y=>{u(y.target.value),g("")},className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:ring-2 focus:ring-primary outline-none",children:[a.jsx("option",{value:"Sem 1",children:s.addSemester?.sem1||"Semester 1"}),a.jsx("option",{value:"Sem 2",children:s.addSemester?.sem2||"Semester 2"}),a.jsx("option",{value:"Summer",children:s.addSemester?.summer||"Summer"})]})]}),f&&a.jsx("div",{className:"text-red-500 text-sm font-medium bg-red-500/10 p-2 rounded border border-red-500/20",children:f}),a.jsxs("div",{className:"flex gap-3 mt-6 pt-2",children:[a.jsx("button",{onClick:r,className:"flex-1 px-4 py-2 rounded-lg border border-border text-foreground hover:bg-background/80 transition-colors",children:s.addSemester?.cancel||"Cancel"}),a.jsx("button",{onClick:x,className:"flex-1 px-4 py-2 rounded-lg bg-primary text-white font-bold hover:bg-sky-400 transition-colors shadow-lg shadow-primary/20",children:s.addSemester?.add||"Add"})]})]})]})}),document.body)},mO=({courses:r,semesters:e,isEMIStudent:t,graduationCredits:s,onEditCourse:A,onAddSemester:l,onFixData:d,activeScheduleSemester:u,onViewSchedule:f,onOpenInterdisciplinary:g,userProfile:x})=>{const{t:y}=it(),[v,S]=k.useState(!1);return a.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[a.jsx("section",{id:"dashboard-section",children:a.jsx(Tk,{courses:r,isEMIStudent:t,graduationCredits:s,onOpenInterdisciplinary:g,userProfile:x})}),a.jsxs("section",{id:"semester-view-section",className:"max-w-[85rem] mx-auto w-full",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h2",{className:"text-2xl font-bold",children:y.app.coursePlan}),a.jsxs("button",{onClick:()=>S(!0),className:"bg-surface border border-border hover:bg-primary/10 hover:border-primary text-muted hover:text-primary px-3 py-1.5 rounded-lg transition-all flex items-center gap-2 text-sm font-medium",title:y.app.addPlan,children:[a.jsx(Xr,{size:16}),y.app.addPlan]})]}),a.jsxs("div",{className:"text-sm text-muted",children:[r.length," ",y.app.totalCourses]})]}),a.jsx(Dk,{semesters:e,courses:r,onEdit:A,onViewSchedule:f,onFixData:d})]}),u&&a.jsx(hO,{semester:u,courses:r,onClose:()=>f(null),onEditCourse:A,onFixData:d}),v&&a.jsx(fO,{existingSemesters:e,onClose:()=>S(!1),onAdd:l})]})},gO={:0,:1,:2,:3,:4,:5,:6},Qp=r=>{if(r.classTime&&r.classTime.some(l=>l&&l.length>0)||!r.room)return r;const e=/([])([0-9A-Z,]+)/g;let t;const s=["","","","","","",""];let A=!1;for(;(t=e.exec(r.room))!==null;){const l=t[1],d=t[2],u=gO[l];if(u!==void 0){const f=d.replace(/,/g,"");s[u]=(s[u]||"")+f,A=!0}}return A?{...r,classTime:s}:r},FA=()=>Math.random().toString(36).substring(2,9)+Date.now().toString(36),wA="https://nsysu-opendev.github.io/NSYSUCourseAPI",Fp=r=>{const e=new Map;return r.forEach(t=>{const s=`${t.id}|${JSON.stringify(t.classTime)}|${t.room}|${t.teacher}|${t.department}`;if(e.has(s)){const A=e.get(s);(!A.class&&t.class||A.class===""&&t.class&&t.class!=="")&&e.set(s,t)}else e.set(s,t)}),Array.from(e.values())},fS=k.createContext(null),pO=({children:r})=>{const[e,t]=k.useState([]),[s,A]=k.useState([]),[l,d]=k.useState(!1),[u,f]=k.useState(!1),[g,x]=k.useState(null),[y,v]=k.useState(!1),[S,R]=k.useState(null),j=k.useRef(new Set),V=k.useRef({}),P=k.useRef({}),G=async(E,N)=>{try{if(localStorage.getItem("nsysu-force-offline")==="true")throw new Error("Simulated Network Error (Force Offline Mode)");const C=await fetch(E);if(!C.ok)throw new Error("Network error");return await C.json()}catch{console.warn(`API failed for ${E}, trying local fallback ${N}`);const D=await fetch(N);if(!D.ok)throw new Error("Local fallback failed");return await D.json()}};k.useEffect(()=>{let E=!0;return(async()=>{try{const C=await G(`${wA}/version.json?t=${Date.now()}`,"./Backup/version.json");if(!E)return;const D=Object.keys(C.history).sort((Q,T)=>T.localeCompare(Q));if(t(D),D.length>0){const Q=D[0];console.log(`Preloading latest semester: ${Q}`),W(Q)}}catch(C){console.error("Failed to load semesters",C)}})(),()=>{E=!1}},[]);const q=async E=>{if(!E)return;if(j.current.has(E)){const D=P.current[E];v(D==="backup");return}d(!0),x(null);const N=e.indexOf(E),C=N!==-1&&N<=1;try{let D,Q=!1;if(C){let U=V.current[E];if(!U)try{U=(await G(`${wA}/${E}/version.json?t=${Date.now()}`,"./Backup/version.json")).latest,V.current[E]=U}catch{console.warn(`Version check failed for ${E}, attempting blind fetch`)}try{if(U){const Y=await fetch(`${wA}/${E}/${U}/all.json`);if(!Y.ok)throw new Error("API failed");D=await Y.json()}else throw new Error("No version info");Q||R(Date.now())}catch{console.warn(`API load failed for ${E}, trying local...`);const M=await fetch(`./Backup/${E}.json`);if(!M.ok)throw new Error(`Local data not found for ${E}`);D=await M.json(),Q=!0}}else{const U=await fetch(`./Backup/${E}.json`);if(!U.ok)throw new Error(`Backup data not found for archived semester ${E}`);D=await U.json(),Q=!0}v(Q),P.current[E]=Q?"backup":"api";const T=D.map(Qp),_=Fp(T).map(U=>({...U,semester:E}));A(U=>[...U.filter(M=>M.semester!==E),..._]),j.current.add(E)}catch(D){console.error(D),x(`Failed to load course data for ${E}`)}finally{d(!1)}},W=E=>{q(E)},te=async()=>{if(u)return;const E=e.filter(Q=>Q>="1111"&&!j.current.has(Q));if(E.length===0)return;f(!0);const N=E.map(async Q=>{try{let T=null;try{let _=V.current[Q];if(!_){const U=await fetch(`${wA}/${Q}/version.json`);U.ok&&(_=(await U.json()).latest)}if(_){const U=await fetch(`${wA}/${Q}/${_}/all.json`);U.ok&&(T=await U.json())}}catch{}if(!T){const _=await fetch(`./Backup/${Q}.json`);_.ok&&(T=await _.json())}if(T){j.current.add(Q);const _=T.map(Qp);return Fp(_).map(U=>({...U,semester:Q}))}return[]}catch{return[]}}),D=(await Promise.all(N)).flat();D.length>0&&A(Q=>[...Q,...D]),f(!1)},z=async E=>{if(!E||y)return;const N=e.indexOf(E);if(N!==-1&&N<=1)try{const Q=(await G(`${wA}/${E}/version.json?t=${Date.now()}`,"./Backup/version.json")).latest,T=V.current[E];if(Q&&Q!==T){console.log(`New version detected for ${E}: ${Q} (was ${T}). Updating...`),V.current[E]=Q;const _=await fetch(`${wA}/${E}/${Q}/all.json`);if(!_.ok)throw new Error("API failed");const Y=(await _.json()).map(Qp),M=Fp(Y).map(F=>({...F,semester:E}));A(F=>[...F.filter(ne=>ne.semester!==E),...M]),j.current.add(E)}R(Date.now())}catch(D){console.warn(`Update check failed for ${E}`,D)}};return a.jsx(fS.Provider,{value:{semesters:e,courses:s,fetchCourses:q,checkForUpdates:z,fetchHistory:te,loading:l,loadingHistory:u,error:g,usingBackup:y,lastChecked:S},children:r})},mS=()=>{const r=k.useContext(fS);if(!r)throw new Error("useCourseDataContext must be used within a CourseDataProvider");return r},da=()=>mS(),Xf=[{category:"College of Liberal Arts",departments:["","","",""]},{category:"College of Science",departments:["","","",""]},{category:"College of Engineering",departments:["","","","",""]},{category:"College of Management",departments:["","","",""]},{category:"College of Marine Sciences",departments:["","",""]},{category:"College of Social Sciences",departments:["",""]},{category:"College of Medicine",departments:["","",""]},{category:"Si-Wan College",departments:["",""]}],gS=Xf.flatMap(r=>r.departments).sort((r,e)=>r.localeCompare(e,"zh-TW")),xO=(r,e)=>{if(!e)return!1;const t=e.replace(/[]/g,"");return r.replace(/[]/g,"")===t||r.includes(t)||t.includes(r)},yO=(r,e)=>{if(!e||!r.compulsory)return!1;const t=Xf.find(d=>d.departments.includes(e)||d.departments.some(u=>e.includes(u)));if(!t)return!1;const s=r.name.toLowerCase(),A=t.category.includes("Engineering")||t.category.includes("Science")||t.category.includes("Marine"),l=t.category.includes("Management");return A?["","calculus","","physics","","chemistry","","biology","","linear algebra","","differential equations","","circuits"].some(u=>s.includes(u)):l?["","calculus","","economics","","accounting","","statistics","","management"].some(u=>s.includes(u)):!1},Yo=(r,e="",t=0)=>{let s="Other",A,l,d=!1;const u=r.department||"",f=r.name.toUpperCase(),g=r.department.toUpperCase(),x=r.id.substring(0,4).toUpperCase();x==="GEAE"?(s="General Education",A="Boya"):x==="GEAI"?(s="General Education",A="Cross-College"):x==="GEAP"||x==="GESP"?(s="General Education",A="Cross-College",d=!0):x==="GEPE"&&(s="General Education",A="Sports");const y=s!=="Other";if(!y&&(xO(u,e)||yO(r,e)))if(r.compulsory){const v=parseInt(r.grade||"0");t>0&&v>0&&v!==t?s="Major Elective":s="Major Required"}else s="Major Elective";else if(!y&&(r.id.startsWith("GEPE")||u.includes("")||g.includes("SPORT")||g.includes("PHYSICAL EDUCATION")))s="General Education",A="Sports";else if(y&&A==="Boya"||!y&&(u.includes("")||u.includes("General Education")||u.includes("")||Array.isArray(r.tags)&&r.tags.some(v=>v.includes("")))){y||(s="General Education",A="Boya");const v=(u+" "+(r.tags?.join(" ")||"")).toUpperCase();v.includes("")||v.includes("DIMENSION 1")?l="Dimension 1":v.includes("")||v.includes("DIMENSION 2")?l="Dimension 2":v.includes("")||v.includes("DIMENSION 3")?l="Dimension 3":v.includes("")||v.includes("DIMENSION 4")?l="Dimension 4":v.includes("")||v.includes("DIMENSION 5")?l="Dimension 5":(v.includes("")||v.includes("DIMENSION 6"))&&(l="Dimension 6")}else!y&&u.includes("")||!y&&u.includes("")?(s="General Education",A="Chinese"):y&&A==="Cross-College"||!y&&(u.includes("")||Array.isArray(r.tags)&&r.tags.includes(""))?y||(s="General Education",A="Cross-College"):!y&&(u.includes("")||g.includes("GENERAL ENGLISH")||f.includes("GENERAL ENGLISH")||["","","",""].some(v=>u.includes(v)))?(s="General Education",A="English"):!y&&r.name.includes("")&&(s="Other",A="Military Training");if(!d){const v=/\bESP\b/;(/\bEAP\b/.test(f)||v.test(f)||f.includes("ESP")||g.includes("ESP")||g.includes("EAP")||Array.isArray(r.tags)&&(r.tags.includes("ESP")||r.tags.includes("EAP")))&&(d=!0,A!=="Boya"&&A!=="Sports"&&(s==="Other"||s==="General Education")&&(s="General Education",A="Cross-College"))}return{category:s,genEduSubCategory:A,boyaDimension:l,isEMI:r.english||!1,isEapEsp:d}},Z0=({isOpen:r,title:e,message:t,onConfirm:s,onCancel:A,confirmText:l,cancelText:d,isDestructive:u=!1})=>{const{t:f}=it();return r?a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[100] p-4 animate-in fade-in duration-200",children:a.jsx("div",{className:"bg-surface border border-border rounded-xl w-full max-w-sm shadow-2xl scale-100 animate-in zoom-in-95 duration-200 overflow-hidden",children:a.jsxs("div",{className:"p-6 text-center",children:[a.jsx("div",{className:`mx-auto mb-4 w-12 h-12 rounded-full flex items-center justify-center ${u?"bg-red-500/10 text-red-500":"bg-primary/10 text-primary"}`,children:u?a.jsx(Bs,{size:24}):a.jsx(Bs,{size:24})}),e&&a.jsx("h3",{className:"text-lg font-bold text-foreground mb-2",children:e}),a.jsx("p",{className:"text-muted text-sm mb-6",children:t}),a.jsxs("div",{className:"flex gap-3 justify-center",children:[a.jsx("button",{onClick:A,className:"px-4 py-2 rounded-lg border border-border text-muted hover:bg-surface hover:text-foreground transition-colors font-medium text-sm min-w-[80px]",children:d||f.form.cancel}),a.jsx("button",{onClick:s,className:`px-4 py-2 rounded-lg text-white font-bold transition-colors text-sm min-w-[80px] shadow-lg ${u?"bg-red-500 hover:bg-red-600 shadow-red-500/20":"bg-primary hover:bg-primary/80 shadow-primary/20"}`,children:l||"Confirm"})]})]})})}):null},bO=({courseId:r,courseName:e,semester:t,onClose:s})=>{const{t:A}=it(),l=yd(),{allUserLabels:d,toggleLabelForCourse:u,setLabelForCourse:f,getLabelsForCourse:g,addLabelToLibrary:x,removeLabelFromLibrary:y}=l,v=l.DEFAULT_COLORS||["#22c55e","#ef4444","#3b82f6"],[S,R]=k.useState(""),[j,V]=k.useState(v[0]),[P,G]=k.useState(!1),[q,W]=k.useState(null),[te,z]=k.useState(!1),[E,N]=k.useState(null),C=k.useRef(null),D=g(r,t),Q=D.map(K=>K.text),T=d.filter(K=>!Q.includes(K.text));k.useEffect(()=>{const K=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=K}},[]),k.useEffect(()=>(P&&!te?C.current=setTimeout(()=>{G(!1)},5e3):C.current&&clearTimeout(C.current),()=>{C.current&&clearTimeout(C.current)}),[P,te]);const _=()=>{if(!S.trim())return;const K=d.find(ee=>ee.text.toLowerCase()===S.trim().toLowerCase());if(K){f(r,K.text,!0,t),R(""),W(null);return}const ne=S.trim();if(x(ne,j),f(r,ne,!0,t),v&&v.length>0){const ee=(v.indexOf(j)+1)%v.length;V(v[ee])}R(""),W(null)},U=K=>{P?(C.current&&clearTimeout(C.current),N(K),z(!0)):u(r,K.text,t)},Y=()=>{E&&(y(E.text),N(null)),z(!1)},M=()=>{N(null),z(!1)},F=k.useRef(null);return k.useEffect(()=>{const K=ne=>{te||F.current&&!F.current.contains(ne.target)&&s()};return document.addEventListener("mousedown",K),()=>document.removeEventListener("mousedown",K)},[s,te]),$t.createPortal(a.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:[a.jsx(Z0,{isOpen:te,title:A.common?.confirm||"Confirm",message:(A.planner.labels?.deleteConfirm||'Delete "{{label}}"?').replace("{{label}}",E?.text||""),onConfirm:Y,onCancel:M,isDestructive:!0,confirmText:A.common?.actions||"Delete"}),a.jsxs("div",{ref:F,className:"bg-surface w-full max-w-md h-[550px] rounded-2xl shadow-2xl flex flex-col overflow-hidden border border-border animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-4 border-b border-border bg-background/50 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg",children:A.planner.labels?.title||"Manage Labels"}),a.jsx("p",{className:"text-xs text-muted truncate max-w-[250px]",children:e})]}),a.jsx("button",{onClick:s,className:"p-2 hover:bg-muted/20 rounded-full transition-colors",children:a.jsx(ut,{size:20})})]}),a.jsxs("div",{className:"flex-1 flex flex-col min-h-0 bg-background/30",children:[a.jsxs("div",{className:"p-3 border-b border-border space-y-3 bg-surface",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:S,onChange:K=>{R(K.target.value),W(null)},onKeyDown:K=>{K.nativeEvent.isComposing||K.key==="Enter"&&_()},placeholder:A.planner.labels?.newPlaceholder||"New label name...",className:`flex-1 bg-background border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary outline-none ${q?"border-red-500":"border-border"}`}),a.jsx("button",{onClick:_,disabled:!S.trim(),className:"bg-primary text-white p-2 rounded-lg hover:bg-primary/90 disabled:opacity-50 transition-colors",children:a.jsx(Xr,{size:20})})]}),q&&a.jsx("p",{className:"text-xs text-red-500 font-medium pl-1",children:q}),a.jsx("div",{className:"flex gap-1.5 overflow-x-auto pb-1 pt-1 mt-3 custom-scrollbar pl-2",children:v.map(K=>a.jsx("button",{onClick:()=>V(K),className:`w-6 h-6 rounded-full border-2 transition-all flex-shrink-0 ${j===K?"border-foreground scale-110 shadow-sm":"border-transparent hover:scale-110"}`,style:{backgroundColor:K}},K))})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsx("h4",{className:"text-xs font-bold text-muted uppercase tracking-wider",children:A.planner.labels?.library||"Label Library"}),d.length>0&&a.jsx("button",{onClick:()=>G(!P),className:`text-xs font-medium px-2 py-1 rounded transition-colors ${P?"bg-primary text-white":"text-primary hover:bg-primary/10"}`,children:P?A.planner.labels?.finish||"Finish":A.planner.labels?.edit||"Edit"})]}),T.length===0&&a.jsx("div",{className:"text-center text-muted text-sm py-8 italic",children:d.length===0?A.planner.labels?.createFirst||"Create your first label above!":A.planner.labels?.allApplied||"All labels applied!"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:T.map(K=>a.jsxs("div",{className:"relative group/item",children:[a.jsxs("button",{onClick:()=>U(K),className:`px-3 py-1.5 rounded-full text-xs font-bold text-white shadow-sm transition-all flex items-center gap-1 ${P?"ring-2 ring-red-500 ring-offset-1 cursor-pointer animate-pulse-slow":"hover:brightness-110 active:scale-95"}`,style:{backgroundColor:K.color},children:[a.jsx(Xr,{size:12,strokeWidth:3,className:P?"hidden":"block"}),K.text]}),P&&a.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center border border-white pointer-events-none z-10",children:a.jsx("div",{className:"w-2 h-0.5 bg-white rounded-full"})})]},K.text))})]})]}),a.jsx("div",{className:"h-1 bg-gradient-to-r from-transparent via-border to-transparent"}),a.jsxs("div",{className:"h-[25%] min-h-[120px] bg-surface flex flex-col relative",children:[a.jsx("div",{className:"p-3 bg-muted/5",children:a.jsx("h4",{className:"text-xs font-bold text-muted uppercase tracking-wider",children:A.planner.labels?.applied||"Applied to Course"})}),a.jsx("div",{className:"p-4 overflow-y-auto flex-1 pb-12",children:D.length===0?a.jsx("div",{className:"text-center text-muted text-sm italic py-2",children:A.planner.labels?.noApplied||"No labels applied"}):a.jsx("div",{className:"flex flex-wrap gap-2",children:D.map(K=>a.jsxs("button",{onClick:()=>u(r,K.text,t),className:"px-3 py-1.5 rounded-full text-xs font-bold text-white shadow-md hover:brightness-110 transition-all active:scale-95 flex items-center gap-1.5 group relative overflow-hidden",style:{backgroundColor:K.color},children:[a.jsx("div",{className:"absolute inset-0 bg-black/10 opacity-0 group-hover:opacity-100 transition-opacity"}),a.jsx(vt,{size:12,strokeWidth:3}),K.text]},K.text))})}),a.jsx("div",{className:"absolute bottom-3 right-3",children:a.jsxs("button",{onClick:s,className:"bg-primary hover:bg-primary/90 text-white px-3 py-1.5 rounded-lg text-sm font-bold shadow-lg shadow-primary/20 transition-all active:scale-95 flex items-center gap-1.5",children:[a.jsx(vt,{size:16,strokeWidth:3}),A.common?.confirm||"Done"]})})]})]})]}),document.body)},p1=k.memo(({course:r,isAdded:e,isConflicting:t,highlightedCourseId:s,onAddCourse:A,onOpenSyllabus:l,onLabelClick:d,onCopyId:u,userProfile:f,getTypeBadgeStyle:g,getTypeLabel:x,getCreditColor:y})=>{const{t:v}=it(),{getLabelsForCourse:S}=yd(),R=S(r.id,r.semester);return a.jsxs("div",{id:`course-card-${r.id}`,className:`
                bg-surface border rounded-lg p-2 shadow-sm transition-all group relative hover:shadow-md
                ${t?"border-red-500/50 bg-red-500/5":"border-border hover:border-primary"}
                ${e&&s!==r.id?"opacity-50":""}
            `,children:[s===r.id&&a.jsx("div",{className:"absolute inset-0 z-20 pointer-events-none rounded-lg border-2 border-yellow-400 shadow-[0_0_15px_rgba(250,204,21,0.6)] bg-yellow-400/10 animate-pulse"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:()=>A(r),disabled:e,className:`
                        p-2 rounded-full transition-all shrink-0
                        ${t?"bg-red-500/10 text-red-500 hover:bg-red-500 hover:text-white":"bg-primary/10 hover:bg-primary text-primary hover:text-white"}
                        ${e?"opacity-50 cursor-not-allowed bg-transparent":""}
                    `,title:e?v.planner.alreadyAdded:t?"Add anyway (Conflict)":v.planner.addToDraft,children:e?a.jsx(vt,{size:18}):t?a.jsx(Bs,{size:18}):a.jsx(Xr,{size:18})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex justify-between items-start gap-2",children:[a.jsx("h3",{className:"font-bold text-foreground text-sm truncate cursor-pointer hover:text-primary hover:underline decoration-primary/50 underline-offset-2 transition-colors flex-1",title:`${r.name} (Click to view syllabus)`,onClick:j=>l(j,r),children:r.name}),a.jsx("button",{onClick:j=>{j.stopPropagation(),d(r)},className:"text-muted hover:text-primary transition-colors p-1",title:"Label Course",children:a.jsx(rN,{size:16})})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-1.5 text-xs text-muted",children:[a.jsx("div",{className:`flex flex-col gap-0.5 ${t?"text-red-500 font-bold":""}`,children:r.parsedTimes&&r.parsedTimes.length>0?r.parsedTimes.map((j,V)=>a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(gx,{size:10}),a.jsx("span",{children:`${{Monday:v.planner.days.mon,Tuesday:v.planner.days.tue,Wednesday:v.planner.days.wed,Thursday:v.planner.days.thu,Friday:v.planner.days.fri,Saturday:v.planner.days.sat,Sunday:v.planner.days.sun}[j.day]||j.day} ${j.startTime}-${j.endTime}`})]},V)):a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(gx,{size:10}),a.jsx("span",{children:"TBA"})]})}),a.jsx("span",{className:"text-border",children:"|"}),a.jsx("span",{children:r.department}),a.jsx("span",{className:"text-border",children:"|"}),a.jsx("span",{children:r.teacher}),r.parsedRoom&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-border",children:"|"}),a.jsx("span",{title:r.room,children:r.parsedRoom})]})]}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsxs("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${y(r.credit)}`,children:[r.credit," cr"]}),a.jsxs("span",{onClick:j=>{j.stopPropagation(),u(r.id)},title:"Click to copy ID",className:"text-[10px] text-muted font-mono bg-background px-1 rounded border border-border/50 cursor-pointer hover:border-primary hover:text-primary transition-colors select-none active:scale-95",children:[v.planner.courseId,": ",r.id]}),R.map(j=>a.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded font-bold shadow-sm backdrop-blur-[2px] border",style:{backgroundColor:`${j.color}26`,color:j.color,borderColor:`${j.color}4D`},children:j.text},j.text)),a.jsx("div",{className:"flex-1"}),r.english&&a.jsx("span",{className:`
                                text-[10px] px-1.5 py-0.5 rounded border font-bold
                                ${f?.studentClass===""?"bg-amber-500/20 text-amber-600 border-amber-500/40 shadow-[0_0_10px_rgba(245,158,11,0.2)]":"bg-amber-500/10 text-amber-600 border-amber-500/20"}
                            `,children:"EMI"}),r.name.includes("")&&a.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded border font-bold bg-slate-500/20 text-slate-500 border-slate-500/40",children:v.categories["Military Training"]||"Military Training"}),a.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${g(r)} whitespace-nowrap`,children:x(r)}),r.tags?.filter(j=>!j.includes("")&&!j.includes("")).map((j,V)=>a.jsx("span",{className:`
                                text-[10px] px-1.5 py-0.5 rounded border bg-gray-500/10 
                                ${j.endsWith("")?"text-gray-600 border-gray-500/20 dark:text-[#C1C1C1] dark:border-[#C1C1C1]":"text-gray-600 border-gray-500/20"}
                            `,children:j},`${j}-${V}`))]})]})]})]})}),vO=r=>{switch(r.category){case"Major Required":return"bg-[#F26060]/10 text-[#F26060] border-[#F26060]/50 font-bold border-[#F26060] shadow-[0_0_8px_rgba(242,96,96,0.2)] ring-1 ring-[#F26060]/20";case"Major Elective":return"bg-[#79A4E8]/10 text-[#79A4E8] border-[#79A4E8]/20 font-medium";case"General Education":const e=r.genEduSubCategory;return e==="Boya"?"bg-[#997FDC]/10 text-[#997FDC] border-[#997FDC]/20":e==="Chinese"||e==="English"?"bg-[#EC9385]/10 text-[#EC9385] border-[#EC9385]/20":e==="Cross-College"?"bg-[#FCA269]/10 text-[#FCA269] border-[#FCA269]/20":e==="Service"?"bg-[#A48B78]/10 text-[#A48B78] border-[#A48B78]/20":e==="Sports"?"bg-[#79BEB5]/10 text-[#79BEB5] border-[#79BEB5]/20":e==="Primer"?"bg-[#7DC174]/10 text-[#7DC174] border-[#7DC174]/20":"bg-[#C0D762]/10 text-[#C0D762] border-[#C0D762]/20";case"University Way":return"bg-emerald-500/10 text-emerald-600 border-emerald-500/20";default:return"bg-[#79A4E8]/10 text-[#79A4E8] border-[#79A4E8]/20"}},x1=r=>r===1?"bg-[#7DC174]/10 text-[#7DC174] border-[#7DC174]/20":r===2?"bg-[#79A4E8]/10 text-[#79A4E8] border-[#79A4E8]/20":"bg-[#997FDC]/10 text-[#997FDC] border-[#997FDC]/20",wO=({onAddCourse:r,currentSchedule:e=[],userProfile:t,searchTerm:s,onSearchChange:A,highlightedCourseId:l,onHighlightClear:d})=>{const{t:u,language:f}=it(),[g,x]=k.useState(window.innerWidth<768);k.useEffect(()=>{const le=()=>x(window.innerWidth<768);return window.addEventListener("resize",le),()=>window.removeEventListener("resize",le)},[]);const{courses:y,fetchCourses:v,checkForUpdates:S,loading:R,semesters:j,error:V,usingBackup:P}=da(),[G,q]=k.useState("");k.useEffect(()=>{!G&&j.length>0&&q(j[0])},[j]);const[W,te]=k.useState(!1),[z,E]=k.useState(""),[N,C]=k.useState(""),[D,Q]=k.useState(""),[T,_]=k.useState(!0),[U,Y]=k.useState(""),[M,F]=k.useState(""),[K,ne]=k.useState(""),[ee,O]=k.useState(!0),[X,Ae]=k.useState(!1),[me,Ee]=k.useState(null),{allUserLabels:Be,getLabelsForCourse:ke,courseUserLabels:Pe}=yd(),[Ve,wt]=k.useState([]),[Xt,ue]=k.useState(!1),L=k.useRef(null),J=k.useRef(null);k.useEffect(()=>{const le=De=>{const At=L.current&&L.current.contains(De.target),tt=J.current&&J.current.contains(De.target);!At&&!tt&&ue(!1)};return document.addEventListener("mousedown",le),()=>document.removeEventListener("mousedown",le)},[]);const he=le=>{wt(De=>De.includes(le)?De.filter(At=>At!==le):[...De,le]),ue(!1)},ge=le=>{wt(De=>De.filter(At=>At!==le))},[Ke,ot]=k.useState(null),[Xe,Le]=k.useState(!1);k.useEffect(()=>{if(Ke){Le(!1);const le=setTimeout(()=>{Le(!0),setTimeout(()=>{ot(null),Le(!1)},300)},2e3);return()=>clearTimeout(le)}},[Ke]),k.useEffect(()=>{G&&v(G)},[G]),k.useEffect(()=>{if(!G)return;const le=setInterval(()=>{S(G)},6e4);return()=>clearInterval(le)},[G]);const Se=k.useRef(!1);k.useEffect(()=>{l&&(Y(""),F(""),ne(""),wt([]),Ae(!1),te(!1),Se.current=!0,setTimeout(()=>{const le=document.getElementById(`course-card-${l}`);le&&le.scrollIntoView({behavior:"auto",block:"center"}),setTimeout(()=>{Se.current=!1},100)},50))},[l]);const Pt=()=>{l&&!Se.current&&d&&d()},Nr=(le,De)=>{if(le.stopPropagation(),!De.semester||!De.id)return;const At=De.semester.slice(0,3),nt=De.semester.slice(3),Qe=`https://selcrs.nsysu.edu.tw/menu5/showoutline.asp?SYEAR=${At}&SEM=${nt}&CrsDat=${De.id}`;window.open(Qe,"_blank")},sr=le=>{const De=uS(le.classTime),At=Oi(le.classTime),tt=le.room?le.room.match(/\((.*?)\)/)?.[1]||le.room:"";return{...le,parsedTime:De,parsedTimes:At,parsedRoom:tt}},ve=le=>{if(!t?.major)return!1;const De=t.major.replace(/[]/g,"");return le.replace(/[]/g,"")===De||le.includes(De)||De.includes(le)},jt=G?parseInt(G.substring(0,3)):0,lr=t&&jt?jt-t.entranceYear+1:0;k.useEffect(()=>{if(W&&t&&G){if(t.major&&E(t.major),t.entranceYear){const le=jt-t.entranceYear+1;le>=1&&le<=4?C(le.toString()):C("-")}t.studentClass?Q(t.studentClass):Q("-"),_(!0)}},[W,G,t]);const Ut=le=>{const De=Yo(le,t?.major,lr);return vO(De)},gr=le=>{const De=Yo(le,t?.major),At=ve(le.department),{compulsory:tt,grade:nt}=le;if(De.category==="General Education"){const Qe=De.genEduSubCategory||"General Education";return u.categories?.[Qe]||Qe}return f==="en"?At?tt&&parseInt(nt)===lr?"Major Req":"Major Elec":tt?"Required":"Elective":At?tt&&parseInt(nt)===lr?"":"":tt?"":""},Cs=k.useMemo(()=>y.filter(le=>le.semester===G).length,[y,G]),As=k.useMemo(()=>R||!G||G.endsWith("3")?!1:Cs>0&&Cs<2e3,[R,G,Cs]),nr=k.useMemo(()=>y.filter(le=>{if(le.semester!==G)return!1;if(W){if(z&&le.department!==z&&!le.department.includes(z.replace(/[]/g,""))||le.department.endsWith("")||le.department.endsWith("")||le.department.endsWith("")||le.department.includes("")||le.department.includes("")||le.department.includes("")||N&&N!=="-"&&le.grade!==N)return!1;if(D&&D!=="-"){const nt=le.class||"";if(D===""){if(!(nt.includes("")||le.english===!0))return!1}else if(D===""){if(!nt.includes(""))return!1}else if(D===""){if(!nt.includes(""))return!1}else if(D===""&&!nt.includes(""))return!1}return!(!T&&!le.compulsory)}if(Ve.length>0){const nt=ke(le.id,G).map(Kt=>Kt.text);if(!Ve.every(Kt=>nt.includes(Kt)))return!1}const De=/[\s,]+/,At=s.toLowerCase().split(De).filter(nt=>nt.trim().length>0);if(At.length>0&&!At.every(Qe=>{const Kt=le.name.toLowerCase().includes(Qe)||le.teacher.toLowerCase().includes(Qe)||le.id.toLowerCase().includes(Qe)||le.department.toLowerCase().includes(Qe);let pr=!1;if(!Kt)if((In=>le.tags?.some(mn=>mn.includes(In)))(Qe))pr=!0;else{const In=le.compulsory;(Qe==="required"||Qe==="req"||Qe===""||Qe==="")&&In&&(pr=!0),(Qe==="elective"||Qe==="elec"||Qe===""||Qe==="")&&!In&&(pr=!0),Qe==="emi"&&le.english&&(pr=!0)}return Kt||pr}))return!1;let tt=!0;if(U){const nt=Yo(le,t?.major),Qe=["Boya","Sports","Cross-College","Chinese","English","Service"].includes(U);U==="EAP/ESP"?nt.isEapEsp||(tt=!1):Qe?(nt.genEduSubCategory!==U&&(tt=!1),tt&&U==="Boya"&&M&&nt.boyaDimension!==M&&(tt=!1)):nt.category!==U&&(tt=!1)}if(!tt||K&&!Oi(le.classTime).some(Qe=>Qe.day.includes(K)))return!1;if(!ee&&e.length>0){const nt=Oi(le.classTime);if(nt.length>0&&nt.some(Kt=>{const pr={...le,day:Kt.day,startTime:Kt.startTime,endTime:Kt.endTime};return e.some(xr=>xr.day===pr.day&&Yx(pr,xr))}))return!1}return!(X&&!Yo(le,t?.major).isEMI)}).map(sr),[y,G,s,Ve,U,M,K,ee,X,e,t,Pe,W,z,N,D,T]),[Jt,cr]=k.useState(50),Vr=k.useRef(null);k.useEffect(()=>{cr(50)},[nr]),k.useEffect(()=>{const le=new IntersectionObserver(At=>{At[0].isIntersecting&&Jt<nr.length&&cr(tt=>tt+50)},{threshold:.1}),De=Vr.current;return De&&le.observe(De),()=>{De&&le.unobserve(De)}},[Jt,nr.length]);const Vt=k.useMemo(()=>{const le=new Set;return e.length===0||nr.forEach(De=>{if(!De.parsedTimes||De.parsedTimes.length===0)return;De.parsedTimes.some(tt=>{const nt={...De,day:tt.day,startTime:tt.startTime,endTime:tt.endTime};return e.some(Qe=>Qe.day===nt.day&&Yx(nt,Qe))})&&le.add(De.id)}),le},[nr,e]);return a.jsxs("div",{className:"flex flex-col h-full bg-background border-l border-border w-full",children:[a.jsxs("div",{className:"flex-none p-2 md:p-4 border-b border-border space-y-2 md:space-y-3 bg-background/50 backdrop-blur-sm z-10",children:[a.jsx("div",{className:"flex items-center justify-between mb-1 md:mb-2",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(rd,{className:"text-primary",size:20}),a.jsx("h2",{className:"font-bold text-lg",children:u.catalog.title})]}),a.jsxs("div",{className:"flex items-center gap-2 bg-background border border-border rounded-md px-2 py-1",children:[a.jsx(RD,{size:14,className:"text-muted"}),a.jsx("select",{value:G,onChange:le=>q(le.target.value),className:"bg-transparent text-sm outline-none text-foreground cursor-pointer",children:j.map(le=>{const De=le.slice(0,3),At=le.slice(3),tt=At==="3"?`${De}-Summer`:`${De}-${At}`;return a.jsx("option",{value:le,className:"bg-surface text-foreground",children:le.length===4?tt:le},le)})})]}),a.jsxs("div",{className:"flex items-center bg-surface/50 rounded-lg p-1 border border-border/50",children:[a.jsx("button",{onClick:()=>{te(!1),A("")},className:`px-3 py-1 rounded-md text-xs font-medium transition-all ${W?"text-muted hover:text-foreground":"bg-primary text-white dark:text-[#303030] shadow-sm"}`,children:u.catalog.mode?.all||"All Courses"}),a.jsx("button",{onClick:()=>{te(!0),A(""),wt([])},className:`px-3 py-1 rounded-md text-xs font-medium transition-all ${W?"bg-primary text-white dark:text-[#303030] shadow-sm":"text-muted hover:text-foreground"}`,children:u.catalog.mode?.compulsory||"Import Compulsory"})]})]})}),W?a.jsxs("div",{className:"w-full bg-background border border-border rounded-lg p-2 md:p-3 flex flex-row md:flex-wrap overflow-x-auto hide-scrollbar gap-2 md:gap-4 items-center animate-in fade-in slide-in-from-top-1",children:[a.jsxs("div",{className:"flex flex-col gap-0.5 md:gap-1 min-w-[130px]",children:[a.jsxs("label",{className:"text-[10px] md:text-xs text-muted flex items-center gap-1",children:[a.jsx(x5,{size:12,className:"hidden md:inline"}),u.catalog.label?.major||"Major"]}),a.jsxs("select",{value:z,onChange:le=>E(le.target.value),className:"text-sm bg-surface border border-border rounded px-2 py-1.5 outline-none focus:border-primary",children:[a.jsx("option",{value:"",children:"-"}),Xf.map(le=>a.jsx("optgroup",{label:le.category,className:"text-primary font-bold",children:le.departments.map(De=>a.jsx("option",{value:De,className:"text-foreground font-normal",children:De},De))},le.category))]})]}),a.jsxs("div",{className:"flex flex-col gap-0.5 md:gap-1 min-w-[80px] md:min-w-[100px]",children:[a.jsxs("label",{className:"text-[10px] md:text-xs text-muted flex items-center gap-1",children:[a.jsx(rr,{size:12,className:"hidden md:inline"}),u.catalog.label?.grade||"Grade"]}),a.jsxs("select",{value:N,onChange:le=>C(le.target.value),className:"text-sm bg-surface border border-border rounded px-2 py-1.5 outline-none focus:border-primary",children:[a.jsx("option",{value:"-",children:"-"}),[1,2,3,4].map(le=>a.jsx("option",{value:le,children:u.catalog.grades?.[le]||`Year ${le}`},le))]})]}),a.jsxs("div",{className:"flex flex-col gap-0.5 md:gap-1 min-w-[100px] md:min-w-[140px]",children:[a.jsxs("label",{className:"text-[10px] md:text-xs text-muted flex items-center gap-1",children:[a.jsx(mk,{size:12,className:"hidden md:inline"}),u.catalog.label?.class||"Class"]}),a.jsxs("select",{value:D,onChange:le=>Q(le.target.value),className:"text-sm bg-surface border border-border rounded px-2 py-1.5 outline-none focus:border-primary",children:[a.jsx("option",{value:"-",children:u.catalog.class?.none||"-"}),a.jsx("option",{value:"",children:u.catalog.class?.shared||"Shared"}),a.jsx("option",{value:"",children:u.catalog.class?.a||"Class A"}),a.jsx("option",{value:"",children:u.catalog.class?.b||"Class B"}),a.jsx("option",{value:"",children:u.catalog.class?.english||"English Class"})]})]}),a.jsxs("div",{className:"flex flex-col gap-0.5 md:gap-1 shrink-0",children:[a.jsxs("div",{className:"text-[10px] md:text-xs text-muted flex items-center gap-1 opacity-0 select-none hidden md:flex",children:[a.jsx(op,{size:12}),a.jsx("span",{children:"Spacer"})]}),a.jsxs("label",{className:"flex items-center gap-1.5 md:gap-2 px-2 md:px-3 py-1 md:py-1.5 rounded border border-border bg-surface hover:bg-surface/80 cursor-pointer transition-colors select-none h-[30px] md:h-[34px] mt-0 md:mt-0",children:[a.jsx("div",{className:`
                                    w-3.5 h-3.5 rounded border flex items-center justify-center transition-colors
                                    ${T?"bg-primary border-primary text-white":"bg-transparent border-muted text-transparent"}
                                `,children:T&&a.jsx(vt,{size:10,strokeWidth:4})}),a.jsx("input",{type:"checkbox",className:"hidden",checked:T,onChange:()=>_(!T)}),a.jsx("span",{className:`text-xs md:text-sm ${T?"text-primary font-medium":"text-muted-foreground"} whitespace-nowrap`,children:u.catalog.includeElectives||"Include Electives"})]})]}),a.jsxs("div",{className:"hidden md:block ml-auto text-xs text-muted italic border-l border-border pl-3",children:["Checking ",a.jsxs("strong",{children:[z||"..."," - ",u.catalog.grades?.[N]||"-"]}),T&&a.jsx("span",{children:" (+Electives)"})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"relative group z-20",children:[a.jsxs("div",{className:"w-full bg-background border border-border rounded-lg pl-3 pr-10 py-1.5 focus-within:ring-2 focus-within:ring-primary flex flex-wrap items-center gap-2 min-h-[42px]",children:[Ve.map(le=>{const At=Be.find(tt=>tt.text===le)?.color||"#94a3b8";return a.jsxs("div",{className:"flex items-center gap-1 px-2 py-0.5 rounded-md text-xs font-medium cursor-pointer transition-all hover:ring-1 hover:ring-red-500 group/chip",style:{backgroundColor:`${At}20`,color:At,border:`1px solid ${At}40`},onClick:()=>ge(le),children:[a.jsx("span",{children:le}),a.jsx("div",{className:"hidden group-hover/chip:flex bg-red-500 text-white rounded-full w-3 h-3 items-center justify-center",children:a.jsx("svg",{width:"8",height:"8",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})})})]},le)}),a.jsx("input",{type:"text",placeholder:Ve.length>0?"":u.planner.search.placeholder,value:s,onChange:le=>A(le.target.value),className:"bg-transparent outline-none flex-1 min-w-[120px] text-sm py-1"})]}),a.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1",children:[R&&a.jsx(px,{className:"animate-spin text-muted mr-1",size:16}),(s||Ve.length>0)&&a.jsx("button",{onClick:()=>{A(""),wt([])},className:"text-muted hover:text-foreground p-1",children:a.jsx("div",{className:"bg-muted/20 hover:bg-muted/40 rounded-full p-0.5",children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 6 6 18"}),a.jsx("path",{d:"m6 6 12 12"})]})})}),a.jsx("button",{ref:J,onClick:()=>ue(!Xt),className:`p-1.5 rounded-md transition-colors ${Ve.length>0?"text-primary bg-primary/10":"text-muted hover:text-foreground hover:bg-muted/20"}`,title:"Filter by Label",children:a.jsx(op,{size:16})})]}),Xt&&a.jsxs("div",{ref:L,className:"absolute top-full left-0 right-0 mt-2 p-2 bg-surface border border-border rounded-lg shadow-xl z-50 animate-in fade-in slide-in-from-top-2",children:[a.jsx("div",{className:"text-xs font-semibold text-muted mb-2 px-1 uppercase tracking-wider",children:u.planner.labels.library}),a.jsx("div",{className:"flex flex-wrap gap-2 max-h-[200px] overflow-y-auto custom-scrollbar p-1",children:Be.length===0?a.jsx("div",{className:"text-sm text-muted italic w-full text-center py-2",children:u.planner.labels.noLabels}):Be.map(le=>{const De=Ve.includes(le.text);return a.jsx("button",{onClick:()=>he(le.text),className:`
                                                        px-2 py-1 rounded-md text-xs border transition-all
                                                        ${De?"opacity-50 grayscale cursor-not-allowed":"hover:scale-105 active:scale-95"}
                                                    `,style:{backgroundColor:`${le.color}20`,color:le.color,borderColor:`${le.color}40`},disabled:De,children:le.text},le.text)})})]})]}),a.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-1 custom-scrollbar",children:[a.jsxs("select",{value:K,onChange:le=>ne(le.target.value),className:"bg-background border border-border rounded-md px-2 py-1 text-sm outline-none focus:border-primary",children:[a.jsx("option",{value:"",children:u.planner.days.any}),a.jsx("option",{value:"Mon",children:u.planner.days.mon}),a.jsx("option",{value:"Tue",children:u.planner.days.tue}),a.jsx("option",{value:"Wed",children:u.planner.days.wed}),a.jsx("option",{value:"Thu",children:u.planner.days.thu}),a.jsx("option",{value:"Fri",children:u.planner.days.fri})]}),a.jsxs("select",{value:U,onChange:le=>{Y(le.target.value),F("")},className:"bg-background border border-border rounded-md px-2 py-1 text-sm outline-none focus:border-primary max-w-[150px]",children:[a.jsx("option",{value:"",children:u.planner.depts.all}),a.jsx("option",{value:"Major Required",children:u.categories?.["Major Required"]||"Major Required"}),a.jsx("option",{value:"Major Elective",children:u.categories?.["Major Elective"]||"Major Elective"}),a.jsx("option",{value:"Boya",children:u.categories?.Boya||"Boya"}),a.jsx("option",{value:"Sports",children:u.categories?.Sports||"Sports"}),a.jsx("option",{value:"Cross-College",children:u.categories?.["Cross-College"]||"Cross-College"}),a.jsx("option",{value:"Chinese",children:u.categories?.Chinese||"Chinese"}),a.jsx("option",{value:"English",children:u.categories?.English||"English"}),a.jsx("option",{value:"EAP/ESP",children:u.categories?.["EAP/ESP"]||"EAP / ESP"}),a.jsx("option",{value:"Other",children:u.categories?.Other||"Other"})]}),U==="Boya"&&a.jsxs("select",{value:M,onChange:le=>F(le.target.value),className:"bg-background border border-border rounded-md px-2 py-1 text-sm outline-none focus:border-primary max-w-[150px] animate-in slide-in-from-left-2 fade-in duration-300",children:[a.jsx("option",{value:"",children:f==="zh"?"":"All Dimensions"}),wx.map(le=>a.jsx("option",{value:le,children:u.categories?.[le]||le},le))]}),a.jsxs("label",{className:"flex items-center gap-1 px-2 py-1 md:px-3 md:py-1.5 rounded-full md:rounded-md border border-border bg-surface hover:bg-surface/80 cursor-pointer transition-colors select-none whitespace-nowrap",children:[a.jsx("div",{className:`
                                w-3.5 h-3.5 md:w-4 md:h-4 rounded border flex items-center justify-center transition-colors
                                ${ee?"bg-red-500 border-red-500 text-white":"bg-transparent border-muted text-transparent"}
                            `,children:ee&&a.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("polyline",{points:"20 6 9 17 4 12"})})}),a.jsx("input",{type:"checkbox",className:"hidden",checked:ee,onChange:()=>O(!ee)}),a.jsx("span",{className:`text-xs md:text-sm ${ee?"text-red-500 font-medium":"text-muted-foreground"}`,children:u.planner.showConflicts})]}),a.jsxs("label",{className:"flex items-center gap-1 px-2 py-1 md:px-3 md:py-1.5 rounded-full md:rounded-md border border-border bg-surface hover:bg-surface/80 cursor-pointer transition-colors select-none whitespace-nowrap",children:[a.jsx("div",{className:`
                                w-3.5 h-3.5 md:w-4 md:h-4 rounded border flex items-center justify-center transition-colors
                                ${X?"bg-sky-500 border-sky-500 text-white":"bg-transparent border-muted text-transparent"}
                            `,children:X&&a.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("polyline",{points:"20 6 9 17 4 12"})})}),a.jsx("input",{type:"checkbox",className:"hidden",checked:X,onChange:()=>Ae(!X)}),a.jsx("span",{className:`text-xs md:text-sm ${X?"text-sky-500 font-medium":"text-muted-foreground"}`,children:u.planner.showEMIOnly||"EMI Only"})]})]})]}),a.jsxs("div",{className:"flex justify-between items-center text-xs text-muted pt-1 px-1",children:[a.jsxs("div",{className:"flex items-center gap-1.5 opacity-70",title:P?"Using offline backup":"Auto-checking for updates every 60s",children:[a.jsxs("span",{className:"relative flex h-2 w-2",children:[!P&&a.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),a.jsx("span",{className:`relative inline-flex rounded-full h-2 w-2 ${P?"bg-gray-400":"bg-green-500"}`})]}),a.jsx("span",{children:P?"Backup Course Data":"Latest Course Data"})]}),a.jsxs("span",{children:[nr.length," ",u.catalog.coursesFound]})]})]}),g?a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 pb-24 space-y-2 w-full",onClickCapture:Pt,children:[nr.slice(0,Jt).map((le,De)=>{const At=Vt.has(le.id),tt=e.some(Qe=>Qe.id===le.id),nt=Qe=>x1(parseInt(Qe));return a.jsx(p1,{course:le,isAdded:tt,isConflicting:At,highlightedCourseId:l,onAddCourse:r,onOpenSyllabus:Nr,onLabelClick:Ee,onCopyId:Qe=>{navigator.clipboard.writeText(Qe).then(()=>{ot(u.planner.courseIdCopied)})},userProfile:t,currentGrade:lr,getTypeBadgeStyle:Ut,getTypeLabel:gr,getCreditColor:nt},`${le.id}-${De}`)}),Jt<nr.length&&a.jsx("div",{ref:Vr,className:"py-6 flex justify-center",children:a.jsx(px,{className:"animate-spin text-muted font-bold opacity-50",size:28})})]}):a.jsxs("div",{className:"flex-1 min-h-0 w-full relative overflow-y-auto p-4 pb-24 space-y-2",onScroll:Pt,onClickCapture:Pt,children:[As&&a.jsxs("div",{className:"sticky top-0 z-10 bg-orange-500/10 border border-orange-500/20 text-orange-600 text-xs px-3 py-2 rounded-lg mb-2 flex items-start gap-2 backdrop-blur-md animate-in slide-in-from-top-2",children:[a.jsx(Bs,{size:14,className:"mt-0.5 flex-shrink-0"}),a.jsx("span",{children:u.planner.incompleteDataWarning?.replace("{{count}}",Cs.toString())||`Warning: Low course count (${Cs}). University API might be updating.`})]}),V?a.jsxs("div",{className:"text-center text-red-500 py-10 flex flex-col items-center animate-in fade-in",children:[a.jsx(Bs,{size:32,className:"mb-2 opacity-80"}),a.jsx("p",{className:"font-medium",children:u.planner.search.failed}),a.jsx("p",{className:"text-xs text-muted mt-1 max-w-[200px]",children:V}),a.jsx("button",{onClick:()=>G&&v(G),className:"mt-4 text-xs bg-surface border border-border px-3 py-1.5 rounded-lg hover:bg-surface/80 transition-colors",children:u.planner.search.retry})]}):nr.length===0?a.jsxs("div",{className:"text-center text-muted py-10 flex flex-col items-center",children:[a.jsx(op,{size:32,className:"mb-2 opacity-50"}),a.jsx("p",{children:s||W?u.catalog.noResults:u.planner.search.noResults})]}):nr.map((le,De)=>{const At=Vt.has(le.id),tt=e.some(Qe=>Qe.id===le.id),nt=Qe=>x1(parseInt(Qe));return a.jsx(p1,{course:le,isAdded:tt,isConflicting:At,highlightedCourseId:l,onAddCourse:r,onOpenSyllabus:Nr,onLabelClick:Ee,onCopyId:Qe=>{navigator.clipboard.writeText(Qe).then(()=>{ot(u.planner.courseIdCopied)})},userProfile:t,currentGrade:lr,getTypeBadgeStyle:Ut,getTypeLabel:gr,getCreditColor:nt},`${le.id}-${De}`)})]}),Ke&&a.jsxs("div",{className:`
                    absolute bottom-4 left-1/2 -translate-x-1/2 
                    bg-foreground text-background text-xs font-bold px-3 py-2 rounded-full shadow-lg z-50 flex items-center gap-2
                    transition-all duration-300
                    ${Xe?"opacity-0 translate-y-2 scale-95":"opacity-100 translate-y-0 scale-100 animate-in slide-in-from-bottom-2 fade-in"}
                `,children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500"}),Ke]}),me&&a.jsx(bO,{courseId:me.id,courseName:me.name,semester:me.semester,onClose:()=>Ee(null)})]})},BO=({draftCourses:r,existingCourses:e,targetSemester:t,onConfirm:s,onCancel:A})=>{const{t:l,language:d}=it(),u=e.filter(y=>y.semester===t),f=r.filter(y=>u.some(v=>v.originalId===y.id&&v.originalSemester===y.originalSemester)),g=r.reduce((y,v)=>y+(Number(v.credits)||0),0),x=u.reduce((y,v)=>y+(Number(v.credits)||0),0);return a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-surface border border-border rounded-xl w-full max-w-6xl h-[90vh] flex flex-col shadow-2xl overflow-hidden",children:[a.jsxs("div",{className:"p-4 border-b border-border bg-background/50 flex justify-between items-center shrink-0",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-foreground flex items-center gap-2",children:l.planner.exportPreview?.title||"Export Preview"}),a.jsxs("p",{className:"text-sm text-muted",children:[l.planner.exportPreview?.desc||"Confirm changes before exporting to"," ",a.jsx("strong",{children:t})]})]}),a.jsx("button",{onClick:A,className:"text-muted hover:text-foreground transition-colors",children:a.jsx(ut,{size:24})})]}),a.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col md:flex-row divide-y md:divide-y-0 md:divide-x divide-border",children:[a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden bg-surface/30",children:[a.jsxs("div",{className:"p-3 bg-primary/10 border-b border-primary/20 flex justify-between items-center",children:[a.jsx("span",{className:"font-bold text-primary",children:l.planner.exportPreview?.draftSource||"Draft (Source)"}),a.jsxs("span",{className:"text-xs bg-primary/20 text-primary px-2 py-1 rounded",children:["+",r.length," ",l.app.totalCourses," (",g," cr)"]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-2 custom-scrollbar",children:a.jsx(pf,{semester:"Draft",courses:r.filter(y=>!y.isExemption),onCourseClick:()=>{},id:"preview-source-grid",readOnly:!0})})]}),a.jsx("div",{className:"hidden md:flex items-center justify-center w-12 bg-background/50 z-10",children:a.jsx("div",{className:"bg-surface border border-border p-2 rounded-full shadow-lg",children:a.jsx(rC,{className:"text-muted-foreground",size:24})})}),a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden bg-surface/30",children:[a.jsxs("div",{className:"p-3 bg-surface border-b border-border flex justify-between items-center",children:[a.jsxs("span",{className:"font-bold text-foreground",children:[l.planner.exportPreview?.destination||"Destination"," (",t,")"]}),a.jsxs("span",{className:"text-xs bg-surface border border-border text-muted px-2 py-1 rounded",children:[l.planner.exportPreview?.current||"Current",": ",u.length," ",l.app.totalCourses," (",x," cr)"]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-2 custom-scrollbar relative",children:[u.length===0&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-muted/50 font-medium",children:l.planner.exportPreview?.empty||"Empty Schedule"}),a.jsx(pf,{semester:t,courses:u,onCourseClick:()=>{},id:"preview-dest-grid",readOnly:!0})]}),u.length>0&&a.jsxs("div",{className:"p-2 bg-yellow-500/10 border-t border-yellow-500/20 text-xs text-yellow-500 flex flex-col items-center gap-1 justify-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Bs,{size:14}),a.jsx("span",{children:l.planner.exportPreview?.warning||"Existing courses will remain. New courses will be added."})]}),f.length>0&&a.jsxs("div",{className:"text-red-400 font-semibold mt-1",children:[f.length," ",d==="zh"?"":"course(s) already exist and will be skipped."]})]})]})]}),a.jsxs("div",{className:"p-4 border-t border-border bg-background/50 flex justify-end gap-3 shrink-0",children:[a.jsx("button",{onClick:A,className:"px-4 py-2 rounded-lg text-sm font-medium hover:bg-surface border border-transparent hover:border-border transition-all",children:l.planner.exportPreview?.cancel||"Cancel"}),a.jsxs("button",{onClick:s,className:"bg-primary hover:bg-sky-400 text-white px-6 py-2 rounded-lg text-sm font-bold shadow-lg shadow-primary/20 transition-all flex items-center gap-2",children:[l.planner.exportPreview?.confirm||"Confirm Export",a.jsx(rC,{size:16})]})]})]})})},y1="Draft",CO=({semesters:r,onAddCourse:e,userProfile:t,existingCourses:s,onSaveCourses:A})=>{const{t:l,language:d}=it(),[u,f]=k.useState(!1);k.useEffect(()=>(u?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[u]);const[g,x]=k.useState(()=>{const ee=localStorage.getItem("nsysu-planner-draft");let O=ee?JSON.parse(ee):[];const X={"08:00":"08:10","09:00":"09:10","10:00":"10:10","11:00":"11:10","12:00":"12:10","13:00":"13:10","14:00":"14:10","15:00":"15:10","16:00":"16:10","17:00":"17:10","18:30":"18:10","19:30":"19:10","20:30":"20:10","21:30":"21:10"};return O=O.map(Ae=>Ae.startTime&&X[Ae.startTime]?{...Ae,startTime:X[Ae.startTime]}:Ae),O});k.useEffect(()=>{localStorage.setItem("nsysu-planner-draft",JSON.stringify(g))},[g]);const[y,v]=k.useState(!1),[S,R]=k.useState(()=>{const ee=localStorage.getItem("nsysu-planner-last-export-semester");return ee&&r.includes(ee)?ee:r.length>0?r[0]:""}),[j,V]=k.useState(""),[P,G]=k.useState(void 0),[q,W]=k.useState(!0),te=ee=>{const O=uS(ee.classTime);if(g.some(Be=>Be.id===ee.id)){alert("Course already in draft!");return}const X=ee.semester?ee.semester.substring(0,3):r.length>0?r[0].substring(0,3):"113",Ae=t&&!isNaN(parseInt(X))?parseInt(X)-t.entranceYear+1:1,me=Yo(ee,t.major,Ae),Ee={id:ee.id,name:ee.name,credits:Number(ee.credit)||3,grade:"",category:me.category,genEduSubCategory:me.genEduSubCategory,boyaDimension:me.boyaDimension,semester:y1,day:O?.day,startTime:O?.startTime,endTime:O?.endTime,classTime:ee.classTime,room:ee.room?ee.room.match(/\((.*?)\)/)?.[1]||ee.room:void 0,isEMI:me.isEMI,isEapEsp:me.isEapEsp,teacher:ee.teacher,department:ee.department,originalTags:ee.tags,originalSemester:ee.semester,originalId:ee.id,userLabels:[]};x(Be=>[...Be,Ee]),f(!1)},[z,E]=k.useState(null),N=ee=>{E(ee)},C=()=>{z&&(x(ee=>ee.filter(O=>O.id!==z.id)),E(null))},[D,Q]=k.useState(!1);k.useEffect(()=>{if(D){const ee=setTimeout(()=>Q(!1),3e3);return()=>clearTimeout(ee)}},[D]);const T=()=>{if(g.length===0){Q(!1),alert("Draft board is already clear!");return}D?(x([]),Q(!1)):Q(!0)},[_,U]=k.useState(!1),Y=()=>{if(g.length!==0){if(!S){alert("Please select a semester to export to.");return}U(!0)}},{courses:M}=da(),F=()=>{const ee=[],O=s.filter(me=>me.semester===S);let X=0;g.forEach(me=>{if(O.some(Pe=>Pe.originalId===me.id&&Pe.originalSemester===me.originalSemester)){X++;return}let Be=me;if(Be.originalId){const Pe=M.find(Ve=>Ve.id===Be.originalId);Pe&&(Be={...Be,room:Pe.room?Pe.room.match(/\((.*?)\)/)?.[1]||Pe.room:Be.room,teacher:Pe.teacher||Be.teacher,classTime:Pe.classTime||Be.classTime,department:Pe.department||Be.department,originalTags:Pe.tags||Be.originalTags,originalSemester:Pe.semester||Be.originalSemester,...Pe.classTime?(()=>{const Ve=Oi(Pe.classTime||[]);return Ve.length>0?{day:Ve[0].day,startTime:Ve[0].startTime,endTime:Ve[0].endTime}:{}})():{}})}const ke={...Be,id:crypto.randomUUID(),courseCode:me.id,semester:S,fromCatalog:!0};ee.push(ke)}),A?A(ee):ee.forEach(me=>e(me));let Ae=d==="zh"?` ${ee.length}  ${S}`:`Successfully exported ${ee.length} courses to ${S}!`;X>0&&(Ae+=d==="zh"?`
 ${X} `:`
Skipped ${X} existing duplicate courses.`),localStorage.setItem("nsysu-planner-last-export-semester",S),alert(Ae),v(!1),U(!1)},K=ee=>{V(""),G(ee.id)},ne=ee=>{if(l.semesters[ee])return l.semesters[ee];if(d==="zh"&&ee.startsWith("Year ")){const O=ee.split(" "),X=O[1],Ae=O.slice(2).join(" "),Ee=["","","","","","","",""][parseInt(X)-1]||X;if(Ae==="Summer")return`${Ee} `;if(Ae==="Sem 1")return`${Ee} `;if(Ae==="Sem 2")return`${Ee} `}else if(ee.startsWith("Year ")){const O=ee.split(" "),X=O[1],Ae=O.slice(2).join(" ");if(Ae==="Sem 1")return`Year ${X} Fall Semester`;if(Ae==="Sem 2")return`Year ${X} Spring Semester`;if(Ae==="Summer")return`Year ${X} Summer`}return ee};return a.jsxs("div",{className:"flex flex-col lg:flex-row h-[calc(100vh-80px)] gap-2 animate-in fade-in slide-in-from-bottom-2 duration-500 p-2",children:[a.jsxs("div",{id:"planner-draft-board",className:"flex-[2] lg:flex-[55] flex flex-col min-w-0 bg-background border border-border rounded-xl overflow-hidden shadow-sm",children:[a.jsxs("div",{className:"p-3 border-b border-border flex justify-between items-center bg-background backdrop-blur-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"bg-primary/20 p-1.5 rounded-md text-primary",children:a.jsx(lC,{size:18})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h2",{className:"font-bold text-foreground text-sm sm:text-base",children:l.planner.title}),a.jsxs("span",{className:"text-xs px-2 py-1 rounded-md bg-primary/10 text-primary font-bold border border-primary/20",children:[l.dashboard.totalCredits,": ",g.reduce((ee,O)=>ee+(Number(O.credits)||0),0)," cr"]})]}),a.jsx("p",{className:"text-[10px] text-muted hidden sm:block",children:"Experiment freely."})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer bg-surface border border-border px-2 py-1.5 rounded-lg hover:bg-surface/80 transition-colors",children:[a.jsx("input",{type:"checkbox",checked:q,onChange:ee=>W(ee.target.checked),className:"accent-red-500 w-3.5 h-3.5 cursor-pointer"}),a.jsx("span",{className:"text-xs font-medium text-muted hover:text-foreground select-none",children:l.planner.showConflicts})]}),a.jsxs("button",{onClick:T,className:`
                                px-2 py-1.5 rounded-lg text-xs font-medium transition-all border flex items-center gap-1
                                ${D?"bg-red-500 text-white border-red-500 hover:bg-red-600 animate-in fade-in zoom-in duration-200":"bg-surface hover:bg-red-500/10 text-muted hover:text-red-500 border-border hover:border-red-500/30"}
                            `,title:l.planner.clear,children:[a.jsx(sd,{size:14,className:D?"animate-pulse":""}),a.jsx("span",{className:"hidden sm:inline",children:D?"Really Clear?":l.planner.clear})]}),a.jsx("div",{className:"h-5 w-[1px] bg-border mx-1"}),y?a.jsxs("div",{className:"flex items-center gap-2 animate-in slide-in-from-right-2",children:[a.jsx("select",{value:S,onChange:ee=>R(ee.target.value),className:"bg-background border border-border text-foreground rounded-lg px-2 py-1 text-xs focus:ring-2 focus:ring-primary outline-none",children:r.map(ee=>a.jsx("option",{value:ee,children:ne(ee)},ee))}),a.jsx("button",{onClick:Y,className:"bg-primary hover:bg-[#8299BB] text-white dark:text-[#303030] px-3 py-1 rounded-lg text-xs font-bold shadow-sm transition-colors",children:"OK"}),a.jsx("button",{onClick:()=>v(!1),className:"text-muted hover:text-foreground px-1 text-xs",children:l.form.cancel})]}):a.jsxs("button",{onClick:()=>v(!0),className:"bg-primary hover:bg-[#8299BB] text-white dark:text-[#303030] px-3 py-1.5 rounded-lg text-xs font-bold shadow-lg shadow-primary/20 transition-all flex items-center gap-1",children:[a.jsx(lC,{size:14}),l.planner.export]})]})]}),a.jsx("div",{className:"flex-1 overflow-hidden relative p-1",children:a.jsx("div",{className:"h-full overflow-y-auto custom-scrollbar rounded-lg border border-border/50 bg-background/50",children:a.jsx(pf,{semester:y1,courses:g.filter(ee=>!ee.isExemption),onCourseClick:K,onRemoveCourse:N,id:"planner-schedule-grid",showConflictWarnings:q})})})]}),a.jsxs("div",{id:"planner-search-panel",className:`
                    lg:relative lg:flex lg:flex-[45] lg:flex-shrink-0 lg:h-full lg:rounded-xl lg:overflow-hidden lg:shadow-xl lg:border lg:border-border/50 lg:z-10
                    fixed inset-x-0 bottom-0 z-[6000] h-[95vh] bg-background rounded-t-3xl shadow-2xl border-t border-border flex flex-col md:hidden transition-transform duration-300 ease-out will-change-transform
                    ${u?"translate-y-0":"translate-y-full lg:translate-y-0 hidden lg:flex"}
                `,children:[a.jsxs("div",{className:"lg:hidden flex justify-between items-center p-4 border-b border-border bg-surface/50 backdrop-blur-md rounded-t-2xl",children:[a.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2 text-foreground",children:[a.jsx(rd,{size:20,className:"text-primary"}),d==="zh"?"":"Course Catalog"]}),a.jsx("button",{onClick:()=>f(!1),className:"p-2 rounded-full bg-background/50 hover:bg-surface text-muted hover:text-foreground transition-colors border border-border/50",children:a.jsx(ut,{size:20})})]}),a.jsx("div",{className:"flex-1 overflow-hidden flex flex-col min-h-0 relative",children:a.jsx(wO,{onAddCourse:te,currentSchedule:g,userProfile:t,searchTerm:j,onSearchChange:ee=>{V(ee),ee&&G(void 0)},highlightedCourseId:P,onHighlightClear:()=>G(void 0)})})]}),a.jsx("div",{className:`fixed inset-0 bg-black/60 z-[5000] lg:hidden backdrop-blur-sm transition-opacity duration-300 ${u?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:()=>f(!1)}),a.jsxs("button",{onClick:()=>f(!0),className:"lg:hidden fixed bottom-20 right-6 z-40 px-5 py-3.5 bg-primary text-white rounded-full shadow-lg shadow-top shadow-primary/30 flex items-center justify-center hover:scale-105 active:scale-95 transition-all outline-none focus:outline-none",children:[a.jsx(rd,{size:22,className:"stroke-[2.5px] mr-2"}),a.jsx("span",{className:"font-bold tracking-wide",children:d==="zh"?"":"Search Courses"})]}),_&&a.jsx(BO,{draftCourses:g,existingCourses:s,targetSemester:S,onConfirm:F,onCancel:()=>U(!1)}),a.jsx(Z0,{isOpen:!!z,title:d==="zh"?"":"Remove Course?",message:z?l.app.deleteConfirm||`Remove ${z.name} from draft?`:"",confirmText:l.courseList.remove||"Remove",cancelText:l.form.cancel,isDestructive:!0,onConfirm:C,onCancel:()=>E(null)})]})},EO=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Fi={A:{start:"07:00",end:"07:50"},1:{start:"08:10",end:"09:00"},2:{start:"09:10",end:"10:00"},3:{start:"10:10",end:"11:00"},4:{start:"11:10",end:"12:00"},B:{start:"12:10",end:"13:00"},5:{start:"13:10",end:"14:00"},6:{start:"14:10",end:"15:00"},7:{start:"15:10",end:"16:00"},8:{start:"16:10",end:"17:00"},9:{start:"17:10",end:"18:00"},C:{start:"18:20",end:"19:10"},D:{start:"19:15",end:"20:05"},E:{start:"20:10",end:"21:00"},F:{start:"21:05",end:"21:55"}},$x=r=>{if(!Array.isArray(r))return null;for(let e=0;e<7;e++){const t=r[e];if(t&&t.length>0){const s=(e+1)%7,A=EO[s],l=t[0],d=t[t.length-1];let u,f;if(Fi[l]&&(u=Fi[l].start),Fi[d]&&(f=Fi[d].end),A&&u&&f)return{day:A,startTime:u,endTime:f}}}return null},GA=({onClose:r,onSelect:e,defaultSearch:t=""})=>{const{t:s}=it(),{semesters:A,courses:l,fetchCourses:d,loading:u}=da(),[f,g]=k.useState(""),[x,y]=k.useState(t);k.useEffect(()=>{A.length>0&&!f&&(g(A[0]),d(A[0]))},[A]);const v=q=>{const W=q.target.value;g(W),d(W)},[S,R]=k.useState("");k.useEffect(()=>{const q=setTimeout(()=>{R(x)},300);return()=>clearTimeout(q)},[x]);const j=(q,W)=>{if(q.stopPropagation(),!W.semester||!W.id)return;const te=W.semester.slice(0,3),E=W.semester.slice(3),N=`https://selcrs.nsysu.edu.tw/menu5/showoutline.asp?SYEAR=${te}&SEM=${E}&CrsDat=${W.id}`;window.open(N,"_blank")},V=q=>q?q.endsWith("3")?`${q.slice(0,q.length-1)}-${s.catalog.summer}`:q.length>1?`${q.slice(0,q.length-1)}-${q.slice(q.length-1)}`:q:"",P=q=>{const W=$x(q);if(!W)return null;const te=W.day.toLowerCase().slice(0,3);return`${s.planner?.days?.[te]||W.day} ${W.startTime}-${W.endTime}`},G=k.useMemo(()=>{if(!S)return l.filter(T=>T.semester===f);let q=S.toLowerCase();const W=["required","major req","compulsory",""],te=["elective","major elec","optional",""],z=W.some(T=>q.includes(T)),E=te.some(T=>q.includes(T));z&&W.forEach(T=>q=q.replace(T,"").trim()),E&&te.forEach(T=>q=q.replace(T,"").trim());const N=q==="boya"?"":q,C=q.includes("boya")||q.includes(""),D=T=>z&&!T.compulsory||E&&T.compulsory?!1:N?T.name.toLowerCase().includes(N)||T.teacher.toLowerCase().includes(N)||T.id.toLowerCase().includes(N)||T.department.toLowerCase().includes(N)||T.tags&&T.tags.some(_=>_.toLowerCase().includes(N))||C&&T.department.includes(""):!0,Q=l.filter(T=>T.semester===f&&D(T));return Q.length>0?Q:l.filter(T=>D(T))},[l,f,S]);return k.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),$t.createPortal(a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex flex-col justify-end z-[60000] sm:items-center sm:justify-center p-0 sm:p-4",children:a.jsxs("div",{className:"bg-surface border border-border w-full sm:max-w-2xl shadow-2xl overflow-hidden flex flex-col h-[95vh] sm:h-[85vh] sm:rounded-xl rounded-t-3xl animate-in slide-in-from-bottom-full sm:slide-in-from-bottom-0 sm:fade-in sm:zoom-in-95 duration-300",children:[a.jsxs("div",{className:"p-4 border-b border-border bg-background/50 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-foreground",children:s.catalog.title}),a.jsx("p",{className:"text-sm text-muted",children:s.catalog.subtitle})]}),a.jsx("button",{onClick:r,className:"text-muted hover:text-foreground transition-colors",children:a.jsx(ut,{size:24})})]}),a.jsx("div",{className:"p-4 space-y-4",children:a.jsxs("div",{className:"flex gap-4",children:[a.jsx("select",{value:f,onChange:v,className:"bg-background border border-border text-foreground rounded-lg px-3 py-2 outline-none focus:ring-2 focus:ring-primary/50",children:A.map(q=>a.jsx("option",{value:q,children:V(q)},q))}),a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(rd,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted",size:18}),a.jsx("input",{type:"text",placeholder:s.catalog.searchPlaceholder,value:x,onChange:q=>y(q.target.value),className:"w-full bg-background border border-border text-foreground rounded-lg pl-10 pr-4 py-2 outline-none focus:ring-2 focus:ring-primary/50 placeholder:text-muted/50"})]})]})}),a.jsxs("div",{className:"flex justify-end text-sm text-muted px-4 pb-2 shrink-0",children:[G.length," ",s.catalog.coursesFound," ",S&&`for "${S}"`]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 pb-24 space-y-2 custom-scrollbar bg-background/30",children:u?a.jsxs("div",{className:"flex flex-col items-center justify-center h-40 text-muted",children:[a.jsx(px,{className:"animate-spin mb-2",size:32}),s.catalog.loading]}):G.length===0?a.jsx("div",{className:"text-center text-muted py-10",children:S?s.catalog.noResults:"Select a semester to view courses"}):G.map((q,W)=>a.jsxs("div",{onClick:()=>e(q),className:"group p-3 rounded-lg border border-border/50 bg-surface hover:border-primary cursor-pointer transition-all hover:shadow-lg flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"font-bold text-foreground group-hover:text-primary transition-colors cursor-pointer hover:underline decoration-primary/50 underline-offset-2",onClick:te=>j(te,q),title:"Click to view syllabus",children:q.name}),q.semester&&a.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${q.semester===f?"bg-primary/20 border-primary/30 text-primary":"bg-surface border-gray-600 text-muted"}`,children:V(q.semester)}),q.english&&a.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded border bg-purple-500/10 border-purple-500/30 text-purple-400 font-medium",children:"EMI"})]}),a.jsxs("div",{className:"text-xs text-muted mt-1 flex gap-2",children:[a.jsxs("span",{className:"bg-background/50 px-1.5 py-0.5 rounded border border-border/50",children:["ID: ",q.id]}),a.jsx("span",{className:"bg-background/50 px-1.5 py-0.5 rounded border border-border/50",children:q.teacher}),a.jsxs("span",{className:"bg-background/50 px-1.5 py-0.5 rounded border border-border/50",children:[q.credit," cr"]}),a.jsx("span",{className:"bg-background/50 px-1.5 py-0.5 rounded border border-border/50",children:q.department}),P(q.classTime)&&a.jsx("span",{className:"bg-blue-500/10 text-blue-400 px-1.5 py-0.5 rounded border border-blue-500/20",children:P(q.classTime)})]})]}),a.jsx("div",{className:"ml-4 opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(rr,{className:"text-primary",size:20})})]},`${q.id}-${q.semester}-${W}`))},S),a.jsx("div",{className:"p-4 border-t border-border bg-background/30 text-xs text-muted text-center",children:s.catalog.dataSource})]})}),document.body)},NO="ClearGradAssets",fn="files",SO=1,wd=()=>new Promise((r,e)=>{const t=indexedDB.open(NO,SO);t.onupgradeneeded=s=>{const A=s.target.result;A.objectStoreNames.contains(fn)||A.createObjectStore(fn,{keyPath:"id"})},t.onsuccess=s=>{r(s.target.result)},t.onerror=s=>{e(s.target.error)}}),Qn=async(r,e)=>{const t=await wd();return new Promise((s,A)=>{const d=t.transaction(fn,"readwrite").objectStore(fn),u={id:r,file:e,name:e.name,type:e.type,lastModified:e.lastModified},f=d.put(u);f.onsuccess=()=>s(),f.onerror=()=>A(f.error)})},Aa=async r=>{const e=await wd();return new Promise((t,s)=>{const d=e.transaction(fn,"readonly").objectStore(fn).get(r);d.onsuccess=()=>{const u=d.result;if(u){const f=new File([u.file],u.name,{type:u.type,lastModified:u.lastModified});t(f)}else t(null)},d.onerror=()=>s(d.error)})},oa=async r=>{const e=await wd();return new Promise((t,s)=>{const d=e.transaction(fn,"readwrite").objectStore(fn).delete(r);d.onsuccess=()=>t(),d.onerror=()=>s(d.error)})},jO=async()=>{const r=await wd();return new Promise((e,t)=>{const l=r.transaction(fn,"readwrite").objectStore(fn).clear();l.onsuccess=()=>e(),l.onerror=()=>t(l.error)})},b1=async()=>{const r=await wd();return new Promise((e,t)=>{const l=r.transaction(fn,"readonly").objectStore(fn).getAll();l.onsuccess=()=>e(l.result),l.onerror=()=>t(l.error)})},_O=r=>new Promise((e,t)=>{const s=new FileReader;s.readAsDataURL(r),s.onload=()=>e(s.result),s.onerror=A=>t(A)}),TO=async r=>(await fetch(r)).blob(),UO=async r=>{for(const e of r)if(e.id&&e.data)try{const t=await TO(e.data),s=new File([t],e.name,{type:e.type,lastModified:e.lastModified});await Qn(e.id,s)}catch(t){console.error(`Failed to restore asset ${e.id}`,t)}},QO=()=>Math.random().toString(36).substring(2,9)+Date.now().toString(36),FO={department:"",minTotalCredits:"",targetYear:"",status:"in_progress",prerequisites:{isWaived:!1,courses:[{id:"init-pre",name:"",credits:"",completed:!1,isAutoCreated:!0}]},designatedRequired:{minCredits:"",courses:[{id:"init-des",name:"",credits:"",completed:!1,isAutoCreated:!0}]},electiveRequired:{minCredits:"",courses:[{id:"init-ele",name:"",credits:"",completed:!1,isAutoCreated:!0}]},proofFileName:"",notes:""},Ip="nsysu-interdisciplinary-minor-data",IO={en:{basicInfo:"Basic Info",minorDept:"Minor Department",selectDept:"Select Department...",applicableYear:"Applicable Year",selectYear:"Select Year...",minTotalCredits:"Minimum Total Credits for Minor",totalProgress:"Total Minor Credits Progress",prerequisites:"Prerequisites",none:"None",noPrereqs:"No prerequisites required.",allPrereqsDone:"All Prerequisites Completed!",designated:"Designated Required",elective:"Elective Required",minCredits:"Min Credits:",sectionComplete:"Section Complete!",courseName:"Course Name",typeToAdd:"Type to add course...",credit:"Credit",pleaseFill:'Please fill in "Min Credits" to track progress.',pleaseFillTotal:'Please fill in "Minimum Total Credits" to track progress.',officialRegulations:"NSYSU Minor Regulations",status:"Minor Status",statusPlanned:"Planned",statusInProgress:"In Progress",statusPending:"Pending Approval",statusCompleted:"Approved / Completed",creditWarning:"Completion of credit requirements does not imply official approval; actual results are subject to NSYSU's official announcement",prerequisiteNotice:'Prerequisites are courses required before the minor. If none, check "None".',proofSection:"Approval / Proof (optional)",proofStatus:"Status:",notSubmitted:"Not Submitted",submitted:"Submitted",approved:"Approved",uploadOrLink:"Upload or Paste Link:",uploadType:"Approval Letter / System Screenshot",notes:"Notes (Optional)",viewFile:"View Attached File",uploadFile:"Upload File",safetyNotice:"Files are stored locally in your browser and are not uploaded to any server.",confirmRemove:"Are you sure you want to remove this file?",storedOnOriginalDevice:"Stored on original upload device",reUpload:"Re-upload"},zh:{basicInfo:"",minorDept:"",selectDept:"...",applicableYear:"",selectYear:"...",minTotalCredits:"",totalProgress:"",prerequisites:"",none:"",noPrereqs:"",allPrereqsDone:"",designated:"",elective:"",minCredits:"",sectionComplete:"",courseName:"",typeToAdd:"...",credit:"",pleaseFill:"",pleaseFillTotal:"",officialRegulations:"",status:"",statusPlanned:"",statusInProgress:"",statusPending:"",statusCompleted:"",creditWarning:"",prerequisiteNotice:"",proofSection:"",proofStatus:"",notSubmitted:"",submitted:"",approved:"",uploadOrLink:"",uploadType:" / ",notes:"",viewFile:"",uploadFile:"",safetyNotice:"",confirmRemove:"",storedOnOriginalDevice:"",reUpload:""}},DO=({onStatusChange:r})=>{const{language:e}=it(),t=IO[e==="zh"?"zh":"en"],{semesters:s}=da(),[A,l]=k.useState(()=>{const U=localStorage.getItem(Ip);if(U){const Y=JSON.parse(U);return Y.status||(Y.status="in_progress"),Y}return FO}),[d,u]=k.useState(!1),[f,g]=k.useState(!1),[x,y]=k.useState(null),[v,S]=k.useState(null),[R,j]=k.useState(null);k.useEffect(()=>{Aa("minor_4_proof").then(U=>{U&&j(U)})},[]);const V=async U=>{if(U.target.files&&U.target.files[0]){const Y=U.target.files[0];await Qn("minor_4_proof",Y),j(Y),q("proofFileName","",Y.name)}},P=async()=>{window.confirm(t.confirmRemove)&&(await oa("minor_4_proof"),j(null),q("proofFileName","",""))};k.useEffect(()=>{const U=localStorage.getItem(Ip),Y=JSON.stringify(A);U!==Y&&localStorage.setItem(Ip,Y)},[A]);const G=s.map(U=>{if(U.length===4){const Y=U.substring(0,3),M=U.substring(3);return M==="3"?`${Y}-Summer`:`${Y}-${M}`}return U}),q=(U,Y,M)=>{l(F=>({...F,[U]:typeof F[U]=="object"?{...F[U],[Y]:M}:M}))},W=(U,Y,M)=>{l(F=>({...F,[U]:{...F[U],[Y]:M}}))},te=(U,Y,M,F)=>{l(K=>{const ne=[...K[U].courses],ee=ne.findIndex(X=>X.id===Y);if(ee===-1)return K;const O={...ne[ee],[M]:F};return O.isAutoCreated&&M==="name"&&F.trim()!==""&&(O.isAutoCreated=!1,ne.push({id:QO(),name:"",credits:"",completed:!1,isAutoCreated:!0})),ne[ee]=O,{...K,[U]:{...K[U],courses:ne}}})},z=(U,Y)=>{l(M=>({...M,[U]:{...M[U],courses:M[U].courses.filter(F=>F.id!==Y)}}))},E=U=>{const Y=A[U].courses.filter(F=>F.completed&&!F.isAutoCreated).reduce((F,K)=>F+(parseFloat(K.credits)||0),0),M=parseFloat(A[U].minCredits)||0;return{completed:Y,target:M}},N=()=>{const U=A.designatedRequired.courses.filter(ne=>ne.completed).reduce((ne,ee)=>ne+(parseFloat(ee.credits)||0),0),Y=A.electiveRequired.courses.filter(ne=>ne.completed).reduce((ne,ee)=>ne+(parseFloat(ee.credits)||0),0),M=A.prerequisites.isWaived?0:A.prerequisites.courses.filter(ne=>ne.completed).reduce((ne,ee)=>ne+(parseFloat(ee.credits)||0),0),F=U+Y+M,K=parseFloat(A.minTotalCredits)||0;return{total:F,target:K}};k.useEffect(()=>{if(!r)return;const U=N(),Y=E("designatedRequired"),M=E("electiveRequired"),F=U.target>0&&U.total>=U.target,K=Y.target>0&&Y.completed>=Y.target,ne=M.target>0&&M.completed>=M.target,ee=A.prerequisites.courses.filter(Ae=>!Ae.isAutoCreated),O=A.prerequisites.isWaived||ee.length>0&&ee.every(Ae=>Ae.completed),X=F&&K&&ne&&O&&A.status==="completed";r(X)},[A,r]);const C=U=>{x&&v&&(te(x,v,"name",U.name),te(x,v,"credits",U.credit.toString()),u(!1),y(null),S(null))},D=(U,Y)=>a.jsxs("div",{className:`flex items-center gap-2 mb-2 ${Y.completed?"opacity-50":""}`,children:[!Y.isAutoCreated&&a.jsx("div",{onClick:()=>te(U,Y.id,"completed",!Y.completed),className:`w-5 h-5 rounded border flex items-center justify-center cursor-pointer flex-shrink-0 transition-colors ${Y.completed?"bg-emerald-500 border-emerald-500 text-white":"border-border hover:border-primary"}`,children:Y.completed&&a.jsx(vt,{size:14,strokeWidth:3})}),Y.isAutoCreated&&a.jsx("div",{className:"w-5 h-5 flex-shrink-0"}),a.jsxs("div",{className:"relative flex-1",children:[a.jsx("input",{type:"text",value:Y.name,placeholder:Y.isAutoCreated?t.typeToAdd:t.courseName,onChange:M=>te(U,Y.id,"name",M.target.value),className:`w-full bg-background border border-border rounded-lg px-3 py-1.5 text-sm outline-none focus:ring-2 focus:ring-primary/50 ${Y.completed?"line-through text-muted":"text-foreground"}`}),!Y.completed&&a.jsx("button",{onClick:()=>{y(U),S(Y.id),u(!0)},className:"absolute right-2 top-1/2 -translate-y-1/2 text-muted hover:text-primary",title:"Import from Catalog",children:a.jsx(Xr,{size:14})})]}),a.jsx("input",{type:"text",value:Y.credits,placeholder:t.credit,onChange:M=>{/^\d*\.?\d*$/.test(M.target.value)&&te(U,Y.id,"credits",M.target.value)},className:`w-20 bg-background border border-border rounded-lg px-2 py-1.5 text-sm text-center outline-none focus:ring-2 focus:ring-primary/50 ${Y.completed?"line-through text-muted":"text-foreground"}`}),Y.isAutoCreated?a.jsx("div",{className:"w-[26px] flex-shrink-0"}):a.jsx("button",{onClick:()=>z(U,Y.id),className:"text-muted hover:text-destructive p-1 w-[26px] flex justify-center flex-shrink-0",children:a.jsx(Un,{size:16})})]},Y.id),Q=N(),T=E("designatedRequired"),_=E("electiveRequired");return a.jsxs("div",{className:"space-y-8 max-w-3xl mx-auto animate-in fade-in zoom-in-95 duration-300 pb-20",children:[a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary flex items-center gap-2",children:[a.jsx(rr,{size:20}),t.basicInfo]}),a.jsxs("a",{href:"https://oaa.nsysu.edu.tw/p/412-1003-3253.php?Lang=zh-tw",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 px-3 py-1.5 bg-primary/10 hover:bg-primary/20 text-primary text-xs font-medium rounded-lg transition-colors",children:[t.officialRegulations,a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),a.jsx("polyline",{points:"15 3 21 3 21 9"}),a.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"md:col-span-2 relative",children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:t.status}),a.jsxs("button",{onClick:()=>g(!f),className:`w-full flex items-center justify-between bg-background border rounded-lg px-3 py-2 text-sm outline-none transition-all ${f?"ring-2 ring-primary/50 border-primary":"border-border hover:border-primary/50"}`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${A.status==="planned"?"bg-warning shadow-[0_0_8px] shadow-warning/50":A.status==="in_progress"?"bg-primary shadow-[0_0_8px] shadow-primary/50":A.status==="pending"?"bg-orange-500 shadow-[0_0_8px] shadow-orange-500/50":"bg-success shadow-[0_0_8px] shadow-success/50"}`}),a.jsx("span",{className:"text-foreground",children:A.status==="planned"?t.statusPlanned:A.status==="in_progress"?t.statusInProgress:A.status==="pending"?t.statusPending:t.statusCompleted})]}),a.jsx(xd,{size:16,className:`text-muted transition-transform duration-200 ${f?"rotate-180":"rotate-0"}`})]}),f&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>g(!1)}),a.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-surface border border-border rounded-lg shadow-xl z-20 py-1 overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[{val:"planned",label:t.statusPlanned,color:"bg-warning",text:"text-warning"},{val:"in_progress",label:t.statusInProgress,color:"bg-primary",text:"text-primary"},{val:"pending",label:t.statusPending,color:"bg-orange-500",text:"text-orange-500"},{val:"completed",label:t.statusCompleted,color:"bg-success",text:"text-success"}].map(U=>a.jsxs("button",{onClick:()=>{q("status","",U.val),g(!1)},className:`w-full flex items-center gap-3 px-3 py-2.5 text-sm transition-colors ${A.status===U.val?"bg-primary/10":"hover:bg-white/5"}`,children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${U.color} ${A.status===U.val?"shadow-[0_0_6px] "+U.color:""}`}),a.jsx("span",{className:`${A.status===U.val?U.text+" font-medium":"text-foreground"}`,children:U.label}),A.status===U.val&&a.jsx(vt,{size:14,className:`ml-auto ${U.text}`})]},U.val))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:t.minorDept}),a.jsxs("select",{value:A.department,onChange:U=>q("department","",U.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50",children:[a.jsx("option",{value:"",children:t.selectDept}),gS.map(U=>a.jsx("option",{value:U,children:U},U))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:t.applicableYear}),a.jsxs("select",{value:A.targetYear,onChange:U=>q("targetYear","",U.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50",children:[a.jsx("option",{value:"",children:t.selectYear}),G.map(U=>a.jsx("option",{value:U,children:U},U))]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:t.minTotalCredits}),a.jsx("input",{type:"text",value:A.minTotalCredits,onChange:U=>/^\d*$/.test(U.target.value)&&q("minTotalCredits","",U.target.value),placeholder:"e.g. 20",className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50"})]})]})]}),a.jsx("div",{className:"bg-surface/50 p-4 rounded-xl border border-border",children:Q.target>0?a.jsxs(a.Fragment,{children:[a.jsx(mr,{label:t.totalProgress,current:Q.total,total:Q.target,color:"bg-primary",variant:"l"}),a.jsx("div",{className:"flex justify-end mt-1",children:a.jsxs("span",{className:"text-xs text-muted flex items-center gap-1",children:[a.jsx(Ar,{size:12}),t.creditWarning]})})]}):a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("span",{className:"font-medium text-foreground text-lg mb-1",children:t.totalProgress}),a.jsxs("div",{className:"text-sm text-orange-500 font-medium flex items-center gap-2 bg-orange-500/10 p-2 rounded",children:[a.jsx("span",{className:"text-lg",children:"!"})," ",t.pleaseFillTotal]})]})}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"text-lg font-bold text-primary",children:t.prerequisites}),a.jsx("span",{className:"text-xs text-muted md:hidden lg:inline-block hidden",children:t.prerequisiteNotice})]}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:A.prerequisites.isWaived,onChange:U=>W("prerequisites","isWaived",U.target.checked),className:"w-4 h-4 rounded border-border text-primary focus:ring-primary"}),a.jsx("span",{className:"text-sm text-foreground",children:t.none})]})]}),a.jsx("div",{className:"text-xs text-muted md:hidden block -mt-2 mb-2",children:t.prerequisiteNotice}),!A.prerequisites.isWaived&&a.jsxs("div",{className:"space-y-2",children:[A.prerequisites.courses.map(U=>D("prerequisites",U)),A.prerequisites.courses.every(U=>U.completed&&!U.isAutoCreated)&&A.prerequisites.courses.length>1&&a.jsx("div",{className:"text-sm text-emerald-500 font-medium text-center py-2 bg-emerald-500/10 rounded-lg",children:t.allPrereqsDone})]}),A.prerequisites.isWaived&&a.jsx("div",{className:"text-sm text-muted italic",children:t.noPrereqs})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[a.jsx("h3",{className:"text-lg font-bold text-primary",children:t.designated}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-xs text-muted whitespace-nowrap",children:t.minCredits}),a.jsx("input",{type:"text",value:A.designatedRequired.minCredits,onChange:U=>/^\d*$/.test(U.target.value)&&W("designatedRequired","minCredits",U.target.value),className:"w-16 bg-background border border-border rounded px-2 py-1 text-sm text-center outline-none focus:ring-primary/50"})]})]}),a.jsx("div",{className:"pb-4 border-b border-border/50",children:T.target>0?a.jsxs(a.Fragment,{children:[a.jsx(mr,{label:t.designated+" Progress",current:T.completed,total:T.target,color:"bg-inter",variant:"s"}),T.completed>=T.target&&a.jsx("div",{className:"text-center text-emerald-500 font-bold text-sm mt-1",children:t.sectionComplete})]}):a.jsxs("div",{className:"text-sm text-orange-500 font-medium flex items-center gap-2 bg-orange-500/10 p-2 rounded",children:[a.jsx("span",{className:"text-lg",children:"!"})," ",t.pleaseFill]})}),a.jsx("div",{className:"space-y-2 mt-4",children:A.designatedRequired.courses.map(U=>D("designatedRequired",U))})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[a.jsx("h3",{className:"text-lg font-bold text-primary",children:t.elective}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-xs text-muted whitespace-nowrap",children:t.minCredits}),a.jsx("input",{type:"text",value:A.electiveRequired.minCredits,onChange:U=>/^\d*$/.test(U.target.value)&&W("electiveRequired","minCredits",U.target.value),className:"w-16 bg-background border border-border rounded px-2 py-1 text-sm text-center outline-none focus:ring-primary/50"})]})]}),a.jsx("div",{className:"pb-4 border-b border-border/50",children:_.target>0?a.jsxs(a.Fragment,{children:[a.jsx(mr,{label:t.elective+" Progress",current:_.completed,total:_.target,color:"bg-primer",variant:"s"}),_.completed>=_.target&&a.jsx("div",{className:"text-center text-emerald-500 font-bold text-sm mt-1",children:t.sectionComplete})]}):a.jsxs("div",{className:"text-sm text-orange-500 font-medium flex items-center gap-2 bg-orange-500/10 p-2 rounded",children:[a.jsx("span",{className:"text-lg",children:"!"})," ",t.pleaseFill]})}),a.jsx("div",{className:"space-y-2 mt-4",children:A.electiveRequired.courses.map(U=>D("electiveRequired",U))})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-6",children:[a.jsx("h3",{className:"text-lg font-bold text-primary border-b border-border/50 pb-2",children:t.proofSection}),a.jsx("div",{className:"space-y-6 pl-2",children:a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6 space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:t.proofStatus}),a.jsxs("div",{className:"space-y-2 pl-2",children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[a.jsx("input",{type:"radio",name:"proof_status",checked:A.status==="planned"||A.status==="in_progress",onChange:()=>q("status","","in_progress"),className:"w-4 h-4 text-primary bg-background border-border focus:ring-primary"}),a.jsx("span",{className:`text-sm transition-colors ${A.status==="planned"||A.status==="in_progress"?"text-foreground":"text-muted group-hover:text-foreground"}`,children:t.notSubmitted})]}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[a.jsx("input",{type:"radio",name:"proof_status",checked:A.status==="pending",onChange:()=>q("status","","pending"),className:"w-4 h-4 text-orange-500 bg-background border-border focus:ring-orange-500"}),a.jsx("span",{className:`text-sm transition-colors ${A.status==="pending"?"text-orange-500 font-medium":"text-muted group-hover:text-foreground"}`,children:t.submitted})]}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[a.jsx("input",{type:"radio",name:"proof_status",checked:A.status==="completed",onChange:()=>q("status","","completed"),className:"w-4 h-4 text-emerald-500 bg-background border-border focus:ring-emerald-500"}),a.jsx("span",{className:`text-sm transition-colors ${A.status==="completed"?"text-emerald-500 font-medium":"text-muted group-hover:text-foreground"}`,children:t.approved})]})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:t.uploadOrLink}),a.jsxs("div",{className:"pl-4 space-y-3",children:[a.jsxs("span",{className:"text-sm text-foreground block",children:[" ",t.uploadType]}),a.jsxs("div",{className:"text-xs text-muted flex items-start gap-1.5 bg-surface/50 p-2 rounded border border-border/50",children:[a.jsx(Ar,{size:14,className:"mt-0.5 flex-shrink-0"}),a.jsx("span",{children:t.safetyNotice})]}),R?a.jsxs("div",{className:"flex items-center gap-3 bg-primary/10 border border-primary/20 rounded-lg p-3 max-w-md",children:[a.jsx(fs,{className:"text-primary flex-shrink-0",size:20}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-primary truncate",children:R.name}),a.jsx("div",{className:"text-xs text-muted flex gap-2",children:a.jsxs("span",{children:[(R.size/1024).toFixed(1)," KB"]})})]}),a.jsx("button",{onClick:()=>{const U=URL.createObjectURL(R);window.open(U,"_blank")},className:"p-1.5 hover:bg-white/20 rounded-md text-primary transition-colors",title:t.viewFile,children:a.jsx(Or,{size:16})}),a.jsx("button",{onClick:P,className:"p-1.5 hover:bg-white/20 rounded-md text-primary hover:text-destructive transition-colors",title:"Remove",children:a.jsx(ut,{size:16})})]}):A.proofFileName?a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 bg-surface/50 border border-dashed border-border rounded-lg p-3 max-w-md",children:[a.jsxs("div",{className:"flex items-center gap-3 opacity-70 overflow-hidden",children:[a.jsx(fs,{className:"text-muted flex-shrink-0",size:20}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:A.proofFileName}),a.jsx("p",{className:"text-xs text-muted truncate",children:t.storedOnOriginalDevice})]})]}),a.jsxs("label",{className:"cursor-pointer p-1.5 hover:bg-white/10 rounded-md text-primary transition-colors text-xs flex items-center gap-1 flex-shrink-0 self-start sm:self-auto border border-primary/20 bg-primary/5",children:[a.jsx(Dr,{size:14})," ",t.reUpload,a.jsx("input",{type:"file",accept:"image/*,application/pdf",className:"hidden",onChange:V})]})]}):a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("label",{className:"cursor-pointer bg-surface hover:bg-surface/80 border border-border rounded-lg px-4 py-2 flex items-center gap-2 transition-all",children:[a.jsx(Dr,{size:16,className:"text-muted"}),a.jsx("span",{className:"text-sm text-foreground",children:t.uploadFile}),a.jsx("input",{type:"file",accept:"image/*,application/pdf",className:"hidden",onChange:V})]})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:t.notes}),a.jsx("textarea",{value:A.notes||"",onChange:U=>q("notes","",U.target.value),className:"w-full bg-background border border-border rounded-lg p-3 text-sm focus:ring-2 focus:ring-primary/50 outline-none min-h-[80px]",placeholder:"..."})]})]})})]}),d&&a.jsx(GA,{onClose:()=>{u(!1),y(null),S(null)},onSelect:C})]})},v1=()=>Math.random().toString(36).substring(2,9)+Date.now().toString(36),Dp={department:"",minTotalCredits:"",targetYear:"",status:"in_progress",applicationNotes:{items:[{id:"pre-1",text:"",checked:!1},{id:"pre-2",text:" GPA / ",checked:!1},{id:"pre-3",text:"",checked:!1},{id:"auto-note",text:"",checked:!1,isAutoCreated:!0}]},designatedRequired:{minCredits:"",courses:[{id:"init-des",name:"",credits:"",completed:!1,isAutoCreated:!0}]},electiveRequired:{minCredits:"",courses:[{id:"init-ele",name:"",credits:"",completed:!1,isAutoCreated:!0}]},proofFileName:"",notes:""},kp="nsysu-interdisciplinary-double-major-data",kO={en:{basicInfo:"Basic Info",doubleMajorDept:"Double Major Department",selectDept:"Select Department...",applicableYear:"Applicable Year",selectYear:"Select Year...",minTotalCredits:"Minimum Total Credits for Double Major",totalProgress:"Total Double Major Credits Progress",appNotes:"Application / Eligibility Notes",appNotesNotice:"Check requirements before applying.",checklist_1:"Completed at least one semester",checklist_2:"Met requirements (e.g. GPA / Ranking)",checklist_3:"Submitted application during official period",checkAll:"All Requirements Met!",typeToCheck:"Type to add note...",designated:"Double Major Required Courses",elective:"Double Major Elective Courses",minCredits:"Min Credits:",sectionComplete:"Section Complete!",courseName:"Course Name",typeToAdd:"Type to add course...",credit:"Credit",pleaseFill:'Please fill in "Min Credits" to track progress.',pleaseFillTotal:'Please fill in "Minimum Total Credits" to track progress.',officialRegulations:"NSYSU Double Major Regulations",status:"Double Major Status",statusPlanned:"Planned",statusInProgress:"In Progress",statusPending:"Pending Department Approval",statusCompleted:"Approved  Double Major",creditWarning:"Completion of credit requirements does not imply official approval; actual results are subject to NSYSU's official announcement",proofSection:"Approval / Proof (optional)",proofStatus:"Status:",notSubmitted:"Not Submitted",submitted:"Submitted",approved:"Approved",uploadOrLink:"Upload or Paste Link:",uploadType:"Approval Letter / System Screenshot",notes:"Notes (Optional)",viewFile:"View Attached File",uploadFile:"Upload File",safetyNotice:"Files are stored locally in your browser and are not uploaded to any server.",confirmRemove:"Are you sure you want to remove this file?",storedOnOriginalDevice:"Stored on original upload device",reUpload:"Re-upload"},zh:{basicInfo:"",doubleMajorDept:"",selectDept:"...",applicableYear:"",selectYear:"...",minTotalCredits:"",totalProgress:"",appNotes:" / ",appNotesNotice:"",checklist_1:"",checklist_2:" GPA / ",checklist_3:"",checkAll:"",typeToCheck:"...",designated:"",elective:"",minCredits:"",sectionComplete:"",courseName:"",typeToAdd:"...",credit:"",pleaseFill:"",pleaseFillTotal:"",officialRegulations:"",status:"",statusPlanned:"",statusInProgress:"",statusPending:"",statusCompleted:"",creditWarning:"",proofSection:"",proofStatus:"",notSubmitted:"",submitted:"",approved:"",uploadOrLink:"",uploadType:" / ",notes:"",viewFile:"",uploadFile:"",safetyNotice:"",confirmRemove:"",storedOnOriginalDevice:"",reUpload:""}},RO=({onStatusChange:r})=>{const{language:e}=it(),t=kO[e==="zh"?"zh":"en"],{semesters:s}=da(),[A,l]=k.useState(()=>{const F=localStorage.getItem(kp);if(F){const K=JSON.parse(F);return K.status||(K.status="in_progress"),K.prerequisites&&(delete K.prerequisites,K.applicationNotes=Dp.applicationNotes),K.applicationNotes||(K.applicationNotes=Dp.applicationNotes),K}return Dp}),[d,u]=k.useState(!1),[f,g]=k.useState(!1),[x,y]=k.useState(null),[v,S]=k.useState(null),[R,j]=k.useState(null);k.useEffect(()=>{Aa("double_major_5_proof").then(F=>{F&&j(F)})},[]);const V=async F=>{if(F.target.files&&F.target.files[0]){const K=F.target.files[0];await Qn("double_major_5_proof",K),j(K),q("proofFileName","",K.name)}},P=async()=>{window.confirm(t.confirmRemove)&&(await oa("double_major_5_proof"),j(null),q("proofFileName","",""))};k.useEffect(()=>{const F=localStorage.getItem(kp),K=JSON.stringify(A);F!==K&&localStorage.setItem(kp,K)},[A]);const G=s.map(F=>{if(F.length===4){const K=F.substring(0,3),ne=F.substring(3);return ne==="3"?`${K}-Summer`:`${K}-${ne}`}return F}),q=(F,K,ne)=>{l(ee=>({...ee,[F]:typeof ee[F]=="object"?{...ee[F],[K]:ne}:ne}))},W=(F,K,ne)=>{l(ee=>({...ee,[F]:{...ee[F],[K]:ne}}))},te=(F,K,ne,ee)=>{l(O=>{const X=[...O[F].courses],Ae=X.findIndex(Ee=>Ee.id===K);if(Ae===-1)return O;const me={...X[Ae],[ne]:ee};return me.isAutoCreated&&ne==="name"&&ee.trim()!==""&&(me.isAutoCreated=!1,X.push({id:v1(),name:"",credits:"",completed:!1,isAutoCreated:!0})),X[Ae]=me,{...O,[F]:{...O[F],courses:X}}})},z=(F,K,ne)=>{l(ee=>{const O=[...ee.applicationNotes.items],X=O.findIndex(me=>me.id===F);if(X===-1)return ee;const Ae={...O[X],[K]:ne};return Ae.isAutoCreated&&K==="text"&&ne.trim()!==""&&(Ae.isAutoCreated=!1,O.push({id:v1(),text:"",checked:!1,isAutoCreated:!0})),O[X]=Ae,{...ee,applicationNotes:{items:O}}})},E=(F,K)=>{l(ne=>({...ne,[F]:{...ne[F],courses:ne[F].courses.filter(ee=>ee.id!==K)}}))},N=F=>{l(K=>({...K,applicationNotes:{items:K.applicationNotes.items.filter(ne=>ne.id!==F)}}))},C=F=>{const K=A[F].courses.filter(ee=>ee.completed&&!ee.isAutoCreated).reduce((ee,O)=>ee+(parseFloat(O.credits)||0),0),ne=parseFloat(A[F].minCredits)||0;return{completed:K,target:ne}},D=()=>{const F=A.designatedRequired.courses.filter(O=>O.completed).reduce((O,X)=>O+(parseFloat(X.credits)||0),0),K=A.electiveRequired.courses.filter(O=>O.completed).reduce((O,X)=>O+(parseFloat(X.credits)||0),0),ne=F+K,ee=parseFloat(A.minTotalCredits)||0;return{total:ne,target:ee}};k.useEffect(()=>{if(!r)return;const F=D(),K=C("designatedRequired"),ne=C("electiveRequired"),ee=F.target>0&&F.total>=F.target,O=K.target>0&&K.completed>=K.target,X=ne.target>0&&ne.completed>=ne.target,Ae=ee&&O&&X&&A.status==="completed";r(Ae)},[A,r]);const Q=F=>{x&&v&&(te(x,v,"name",F.name),te(x,v,"credits",F.credit.toString()),u(!1),y(null),S(null))},T=(F,K)=>a.jsxs("div",{className:`flex items-center gap-2 mb-2 ${K.completed?"opacity-50":""}`,children:[!K.isAutoCreated&&a.jsx("div",{onClick:()=>te(F,K.id,"completed",!K.completed),className:`w-5 h-5 rounded border flex items-center justify-center cursor-pointer flex-shrink-0 transition-colors ${K.completed?"bg-emerald-500 border-emerald-500 text-white":"border-border hover:border-primary"}`,children:K.completed&&a.jsx(vt,{size:14,strokeWidth:3})}),K.isAutoCreated&&a.jsx("div",{className:"w-5 h-5 flex-shrink-0"}),a.jsxs("div",{className:"relative flex-1",children:[a.jsx("input",{type:"text",value:K.name,placeholder:K.isAutoCreated?t.typeToAdd:t.courseName,onChange:ne=>te(F,K.id,"name",ne.target.value),className:`w-full bg-background border border-border rounded-lg px-3 py-1.5 text-sm outline-none focus:ring-2 focus:ring-primary/50 ${K.completed?"line-through text-muted":"text-foreground"}`}),!K.completed&&a.jsx("button",{onClick:()=>{y(F),S(K.id),u(!0)},className:"absolute right-2 top-1/2 -translate-y-1/2 text-muted hover:text-primary",title:"Import from Catalog",children:a.jsx(Xr,{size:14})})]}),a.jsx("input",{type:"text",value:K.credits,placeholder:t.credit,onChange:ne=>{/^\d*\.?\d*$/.test(ne.target.value)&&te(F,K.id,"credits",ne.target.value)},className:`w-20 bg-background border border-border rounded-lg px-2 py-1.5 text-sm text-center outline-none focus:ring-2 focus:ring-primary/50 ${K.completed?"line-through text-muted":"text-foreground"}`}),K.isAutoCreated?a.jsx("div",{className:"w-[26px] flex-shrink-0"}):a.jsx("button",{onClick:()=>E(F,K.id),className:"text-muted hover:text-destructive p-1 w-[26px] flex justify-center flex-shrink-0",children:a.jsx(Un,{size:16})})]},K.id),_=F=>a.jsxs("div",{className:`flex items-center gap-2 mb-2 ${F.checked?"opacity-50":""}`,children:[!F.isAutoCreated&&a.jsx("div",{onClick:()=>z(F.id,"checked",!F.checked),className:`w-5 h-5 rounded border flex items-center justify-center cursor-pointer flex-shrink-0 transition-colors ${F.checked?"bg-emerald-500 border-emerald-500 text-white":"border-border hover:border-primary"}`,children:F.checked&&a.jsx(vt,{size:14,strokeWidth:3})}),F.isAutoCreated&&a.jsx("div",{className:"w-5 h-5 flex-shrink-0"}),a.jsx("div",{className:"relative flex-1",children:["pre-1","pre-2","pre-3"].includes(F.id)?a.jsx("div",{className:`w-full px-3 py-1.5 text-sm ${F.checked?"line-through text-muted":"text-foreground"}`,children:F.id==="pre-1"?t.checklist_1:F.id==="pre-2"?t.checklist_2:t.checklist_3}):a.jsx("input",{type:"text",value:F.text,placeholder:F.isAutoCreated?t.typeToCheck:"Requirement note...",onChange:K=>z(F.id,"text",K.target.value),className:`w-full bg-background border border-border rounded-lg px-3 py-1.5 text-sm outline-none focus:ring-2 focus:ring-primary/50 ${F.checked?"line-through text-muted":"text-foreground"}`})}),!F.isAutoCreated&&!["pre-1","pre-2","pre-3"].includes(F.id)?a.jsx("button",{onClick:()=>N(F.id),className:"text-muted hover:text-destructive p-1 w-[26px] flex justify-center flex-shrink-0",children:a.jsx(Un,{size:16})}):a.jsx("div",{className:"w-[26px] flex-shrink-0"})]},F.id),U=D(),Y=C("designatedRequired"),M=C("electiveRequired");return a.jsxs("div",{className:"space-y-8 max-w-3xl mx-auto animate-in fade-in zoom-in-95 duration-300 pb-20",children:[a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary flex items-center gap-2",children:[a.jsx(rr,{size:20}),t.basicInfo]}),a.jsxs("a",{href:"https://oaa.nsysu.edu.tw/p/412-1003-3252.php?Lang=zh-tw",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 px-3 py-1.5 bg-primary/10 hover:bg-primary/20 text-primary text-xs font-medium rounded-lg transition-colors",children:[t.officialRegulations,a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),a.jsx("polyline",{points:"15 3 21 3 21 9"}),a.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"md:col-span-2 relative",children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:t.status}),a.jsxs("button",{onClick:()=>g(!f),className:`w-full flex items-center justify-between bg-background border rounded-lg px-3 py-2 text-sm outline-none transition-all ${f?"ring-2 ring-primary/50 border-primary":"border-border hover:border-primary/50"}`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${A.status==="planned"?"bg-warning shadow-[0_0_8px] shadow-warning/50":A.status==="in_progress"?"bg-primary shadow-[0_0_8px] shadow-primary/50":A.status==="pending"?"bg-orange-500 shadow-[0_0_8px] shadow-orange-500/50":"bg-success shadow-[0_0_8px] shadow-success/50"}`}),a.jsx("span",{className:"text-foreground",children:A.status==="planned"?t.statusPlanned:A.status==="in_progress"?t.statusInProgress:A.status==="pending"?t.statusPending:t.statusCompleted})]}),a.jsx(xd,{size:16,className:`text-muted transition-transform duration-200 ${f?"rotate-180":"rotate-0"}`})]}),f&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>g(!1)}),a.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-surface border border-border rounded-lg shadow-xl z-20 py-1 overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[{val:"planned",label:t.statusPlanned,color:"bg-warning",text:"text-warning"},{val:"in_progress",label:t.statusInProgress,color:"bg-primary",text:"text-primary"},{val:"pending",label:t.statusPending,color:"bg-orange-500",text:"text-orange-500"},{val:"completed",label:t.statusCompleted,color:"bg-success",text:"text-success"}].map(F=>a.jsxs("button",{onClick:()=>{q("status","",F.val),g(!1)},className:`w-full flex items-center gap-3 px-3 py-2.5 text-sm transition-colors ${A.status===F.val?"bg-primary/10":"hover:bg-white/5"}`,children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${F.color} ${A.status===F.val?"shadow-[0_0_6px] "+F.color:""}`}),a.jsx("span",{className:`${A.status===F.val?F.text+" font-medium":"text-foreground"}`,children:F.label}),A.status===F.val&&a.jsx(vt,{size:14,className:`ml-auto ${F.text}`})]},F.val))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:t.doubleMajorDept}),a.jsxs("select",{value:A.department,onChange:F=>q("department","",F.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50",children:[a.jsx("option",{value:"",children:t.selectDept}),gS.map(F=>a.jsx("option",{value:F,children:F},F))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:t.applicableYear}),a.jsxs("select",{value:A.targetYear,onChange:F=>q("targetYear","",F.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50",children:[a.jsx("option",{value:"",children:t.selectYear}),G.map(F=>a.jsx("option",{value:F,children:F},F))]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:t.minTotalCredits}),a.jsx("input",{type:"text",value:A.minTotalCredits,onChange:F=>/^\d*$/.test(F.target.value)&&q("minTotalCredits","",F.target.value),placeholder:"e.g. 40",className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50"})]})]})]}),a.jsx("div",{className:"bg-surface/50 p-4 rounded-xl border border-border",children:U.target>0?a.jsxs(a.Fragment,{children:[a.jsx(mr,{label:t.totalProgress,current:U.total,total:U.target,color:"bg-primary",variant:"l"}),a.jsx("div",{className:"flex justify-end mt-1",children:a.jsxs("span",{className:"text-xs text-muted flex items-center gap-1",children:[a.jsx(Ar,{size:12}),t.creditWarning]})})]}):a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("span",{className:"font-medium text-foreground text-lg mb-1",children:t.totalProgress}),a.jsxs("div",{className:"text-sm text-orange-500 font-medium flex items-center gap-2 bg-orange-500/10 p-2 rounded",children:[a.jsx("span",{className:"text-lg",children:"!"})," ",t.pleaseFillTotal]})]})}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsx("div",{className:"flex justify-between items-center",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"text-lg font-bold text-primary",children:t.appNotes}),a.jsx("span",{className:"text-xs text-muted md:hidden lg:inline-block hidden",children:t.appNotesNotice})]})}),a.jsx("div",{className:"text-xs text-muted md:hidden block -mt-2 mb-2",children:t.appNotesNotice}),a.jsxs("div",{className:"space-y-2",children:[A.applicationNotes.items.map(F=>_(F)),A.applicationNotes.items.every(F=>F.checked&&!F.isAutoCreated)&&A.applicationNotes.items.length>1&&a.jsx("div",{className:"text-sm text-emerald-500 font-medium text-center py-2 bg-emerald-500/10 rounded-lg",children:t.checkAll})]})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[a.jsx("h3",{className:"text-lg font-bold text-primary",children:t.designated}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-xs text-muted whitespace-nowrap",children:t.minCredits}),a.jsx("input",{type:"text",value:A.designatedRequired.minCredits,onChange:F=>/^\d*$/.test(F.target.value)&&W("designatedRequired","minCredits",F.target.value),className:"w-16 bg-background border border-border rounded px-2 py-1 text-sm text-center outline-none focus:ring-primary/50"})]})]}),a.jsx("div",{className:"pb-4 border-b border-border/50",children:Y.target>0?a.jsxs(a.Fragment,{children:[a.jsx(mr,{label:t.designated+" Progress",current:Y.completed,total:Y.target,color:"bg-inter",variant:"s"}),Y.completed>=Y.target&&a.jsx("div",{className:"text-center text-emerald-500 font-bold text-sm mt-1",children:t.sectionComplete})]}):a.jsxs("div",{className:"text-sm text-orange-500 font-medium flex items-center gap-2 bg-orange-500/10 p-2 rounded",children:[a.jsx("span",{className:"text-lg",children:"!"})," ",t.pleaseFill]})}),a.jsx("div",{className:"space-y-2 mt-4",children:A.designatedRequired.courses.map(F=>T("designatedRequired",F))})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[a.jsx("h3",{className:"text-lg font-bold text-primary",children:t.elective}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-xs text-muted whitespace-nowrap",children:t.minCredits}),a.jsx("input",{type:"text",value:A.electiveRequired.minCredits,onChange:F=>/^\d*$/.test(F.target.value)&&W("electiveRequired","minCredits",F.target.value),className:"w-16 bg-background border border-border rounded px-2 py-1 text-sm text-center outline-none focus:ring-primary/50"})]})]}),a.jsx("div",{className:"pb-4 border-b border-border/50",children:M.target>0?a.jsxs(a.Fragment,{children:[a.jsx(mr,{label:t.elective+" Progress",current:M.completed,total:M.target,color:"bg-primer",variant:"s"}),M.completed>=M.target&&a.jsx("div",{className:"text-center text-emerald-500 font-bold text-sm mt-1",children:t.sectionComplete})]}):a.jsxs("div",{className:"text-sm text-orange-500 font-medium flex items-center gap-2 bg-orange-500/10 p-2 rounded",children:[a.jsx("span",{className:"text-lg",children:"!"})," ",t.pleaseFill]})}),a.jsx("div",{className:"space-y-2 mt-4",children:A.electiveRequired.courses.map(F=>T("electiveRequired",F))})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-6",children:[a.jsx("h3",{className:"text-lg font-bold text-primary border-b border-border/50 pb-2",children:t.proofSection}),a.jsx("div",{className:"space-y-6 pl-2",children:a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6 space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:t.proofStatus}),a.jsxs("div",{className:"space-y-2 pl-2",children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[a.jsx("input",{type:"radio",name:"proof_status",checked:A.status==="planned"||A.status==="in_progress",onChange:()=>q("status","","in_progress"),className:"w-4 h-4 text-primary bg-background border-border focus:ring-primary"}),a.jsx("span",{className:`text-sm transition-colors ${A.status==="planned"||A.status==="in_progress"?"text-foreground":"text-muted group-hover:text-foreground"}`,children:t.notSubmitted})]}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[a.jsx("input",{type:"radio",name:"proof_status",checked:A.status==="pending",onChange:()=>q("status","","pending"),className:"w-4 h-4 text-orange-500 bg-background border-border focus:ring-orange-500"}),a.jsx("span",{className:`text-sm transition-colors ${A.status==="pending"?"text-orange-500 font-medium":"text-muted group-hover:text-foreground"}`,children:t.submitted})]}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[a.jsx("input",{type:"radio",name:"proof_status",checked:A.status==="completed",onChange:()=>q("status","","completed"),className:"w-4 h-4 text-emerald-500 bg-background border-border focus:ring-emerald-500"}),a.jsx("span",{className:`text-sm transition-colors ${A.status==="completed"?"text-emerald-500 font-medium":"text-muted group-hover:text-foreground"}`,children:t.approved})]})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:t.uploadOrLink}),a.jsxs("div",{className:"pl-4 space-y-3",children:[a.jsxs("span",{className:"text-sm text-foreground block",children:[" ",t.uploadType]}),a.jsxs("div",{className:"text-xs text-muted flex items-start gap-1.5 bg-surface/50 p-2 rounded border border-border/50",children:[a.jsx(Ar,{size:14,className:"mt-0.5 flex-shrink-0"}),a.jsx("span",{children:t.safetyNotice})]}),R?a.jsxs("div",{className:"flex items-center gap-3 bg-primary/10 border border-primary/20 rounded-lg p-3 max-w-md",children:[a.jsx(fs,{className:"text-primary flex-shrink-0",size:20}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-primary truncate",children:R.name}),a.jsx("div",{className:"text-xs text-muted flex gap-2",children:a.jsxs("span",{children:[(R.size/1024).toFixed(1)," KB"]})})]}),a.jsx("button",{onClick:()=>{const F=URL.createObjectURL(R);window.open(F,"_blank")},className:"p-1.5 hover:bg-white/20 rounded-md text-primary transition-colors",title:t.viewFile,children:a.jsx(Or,{size:16})}),a.jsx("button",{onClick:P,className:"p-1.5 hover:bg-white/20 rounded-md text-primary hover:text-destructive transition-colors",title:"Remove",children:a.jsx(ut,{size:16})})]}):A.proofFileName?a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 bg-surface/50 border border-dashed border-border rounded-lg p-3 max-w-md",children:[a.jsxs("div",{className:"flex items-center gap-3 opacity-70 overflow-hidden",children:[a.jsx(fs,{className:"text-muted flex-shrink-0",size:20}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:A.proofFileName}),a.jsx("p",{className:"text-xs text-muted truncate",children:t.storedOnOriginalDevice})]})]}),a.jsxs("label",{className:"cursor-pointer p-1.5 hover:bg-white/10 rounded-md text-primary transition-colors text-xs flex items-center gap-1 flex-shrink-0 self-start sm:self-auto border border-primary/20 bg-primary/5",children:[a.jsx(Dr,{size:14})," ",t.reUpload,a.jsx("input",{type:"file",accept:"image/*,application/pdf",className:"hidden",onChange:V})]})]}):a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("label",{className:"cursor-pointer bg-surface hover:bg-surface/80 border border-border rounded-lg px-4 py-2 flex items-center gap-2 transition-all",children:[a.jsx(Dr,{size:16,className:"text-muted"}),a.jsx("span",{className:"text-sm text-foreground",children:t.uploadFile}),a.jsx("input",{type:"file",accept:"image/*,application/pdf",className:"hidden",onChange:V})]})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:t.notes}),a.jsx("textarea",{value:A.notes||"",onChange:F=>q("notes","",F.target.value),className:"w-full bg-background border border-border rounded-lg p-3 text-sm focus:ring-2 focus:ring-primary/50 outline-none min-h-[80px]",placeholder:"..."})]})]})})]}),d&&a.jsx(GA,{onClose:()=>{u(!1),y(null),S(null)},onSelect:Q})]})},MO=()=>Math.random().toString(36).substring(2,9)+Date.now().toString(36),vh={department:"",minTotalCredits:"26",targetYear:"",status:"in_progress",designatedRequired:{minCredits:"",courses:[{id:"init-des",name:"",credits:"",completed:!1,isAutoCreated:!0}]},electiveRequired:{minCredits:"",courses:[{id:"init-ele",name:"",credits:"",completed:!1,isAutoCreated:!0}]},practicum:{teachingInternship:"not_started",educationalPracticum:"not_started",qualificationReview:!1,note:""},proofFileName:"",notes:""},Rp="nsysu-interdisciplinary-teacher-education-data",LO={en:{basicInfo:"Basic Info",doubleMajorDept:"Teacher Education Program",selectDept:"Select Department...",applicableYear:"Applicable Year",selectYear:"Select Year...",minTotalCredits:"Educational Professional Course Credit Requirements",totalProgress:"Teacher Education Progress",step1:"Coursework Completed",stepApply:"Eligible for Practicum Application",step2:"Qualified for Practicum",step3:"Practicum Completed",step4:"Teacher Qualification Certified (Optional)",designated:"Teacher Education Required Courses",elective:"Teacher Education Elective Courses",minCredits:"Min Credits:",sectionComplete:"Section Complete!",courseName:"Course Name",typeToAdd:"Type to add course...",credit:"Credit",earnedCredits:"Earned Educational Professional Credits",threshold:"Threshold",pleaseFill:'Please fill in "Min Credits" to track progress.',pleaseFillTotal:'Please fill in "Minimum Total Credits" to track progress.',officialRegulations:"Teacher Education Regulations",status:"Teacher Education Status",statusPlanned:"Planned",statusInProgress:"In Progress",statusPending:"Qualified for Educational Practicum",statusCompleted:"Teacher Qualification Obtained",creditWarning:"This system is for personal tracking only; official teacher qualification is subject to approval by the Teacher Education Center and the Ministry of Education.",creditPrerequisiteNotice:"Educational Professional Course credits are one of the prerequisites for qualifying for educational practicum",practicumTitle:"Practicum & Teaching Internship",teachingInternship:"Teaching Internship (In-course Practice)",educationalPracticum:"Educational Practicum (External School Teaching)",practicumNotice:"Educational practicum is a prerequisite for obtaining teacher qualification.",teachingInternshipNotice:"Teaching Internship is a professional educational course; upon completion, you may apply for the educational practicum qualification review.",qualificationReviewLabel:"Passed Educational Practicum Qualification Review (Certified by Teacher Education Center)",educationalPracticumNotice:"Educational practicum is a prerequisite for obtaining teacher qualification.",pStatus_not_started:"Not started",pStatus_in_progress:"In progress",pStatus_completed:"Completed",practicumNotePlaceholder:"Practicum School (Optional), Semester (Optional)",proofSection:"Approval & Certification",proofStatus:"Status:",notSubmitted:"Not Qualified",submitted:"Qualified for Educational Practicum",approved:"Teacher Qualification Obtained",uploadOrLink:"Upload or Paste Link:",uploadType:"Approval Letter / System Screenshot",notes:"Notes (Optional)",viewFile:"View Attached File",uploadFile:"Upload File",safetyNotice:"Files are stored locally in your browser and are not uploaded to any server.",confirmRemove:"Are you sure you want to remove this file?",storedOnOriginalDevice:"Stored on original upload device",reUpload:"Re-upload"},zh:{basicInfo:"",doubleMajorDept:"",selectDept:"...",applicableYear:"",selectYear:"...",minTotalCredits:"",totalProgress:"",step1:"",stepApply:"",step2:"",step3:"",step4:`
`,designated:"",elective:"",earnedCredits:"",threshold:"",minCredits:"",sectionComplete:"",courseName:"",typeToAdd:"...",credit:"",pleaseFill:"",pleaseFillTotal:"",officialRegulations:"",status:"",statusPlanned:"",statusInProgress:"",statusPending:"",statusCompleted:"",creditWarning:"",creditPrerequisiteNotice:"",practicumTitle:" / ",teachingInternship:"",educationalPracticum:"",practicumNotice:"",teachingInternshipNotice:"",qualificationReviewLabel:"",educationalPracticumNotice:"",pStatus_not_started:"",pStatus_in_progress:"",pStatus_completed:"",practicumNotePlaceholder:"",proofSection:"",proofStatus:"",notSubmitted:"",submitted:"",approved:"",uploadOrLink:"",uploadType:" / ",notes:"",viewFile:"",uploadFile:"",safetyNotice:"",confirmRemove:"",storedOnOriginalDevice:"",reUpload:""}},HO=({onStatusChange:r})=>{const{language:e}=it(),t=LO[e==="zh"?"zh":"en"],{semesters:s}=da(),[A,l]=k.useState(()=>{const U=localStorage.getItem(Rp);if(U){const Y=JSON.parse(U);return Y.status||(Y.status="in_progress"),Y.department||(Y.department=vh.department),Y.minTotalCredits||(Y.minTotalCredits=vh.minTotalCredits),Y.applicationNotes&&delete Y.applicationNotes,Y.practicum||(Y.practicum=vh.practicum),Y}return vh}),[d,u]=k.useState(!1),[f,g]=k.useState(!1),[x,y]=k.useState(null),[v,S]=k.useState(null),[R,j]=k.useState(null);k.useEffect(()=>{Aa("teacher_education_6_proof").then(U=>{U&&j(U)})},[]);const V=async U=>{if(U.target.files&&U.target.files[0]){const Y=U.target.files[0];await Qn("teacher_education_6_proof",Y),j(Y),q("proofFileName","",Y.name)}},P=async()=>{window.confirm(t.confirmRemove)&&(await oa("teacher_education_6_proof"),j(null),q("proofFileName","",""))};k.useEffect(()=>{const U=localStorage.getItem(Rp),Y=JSON.stringify(A);U!==Y&&localStorage.setItem(Rp,Y)},[A]);const G=s.map(U=>{if(U.length===4){const Y=U.substring(0,3),M=U.substring(3);return M==="3"?`${Y}-Summer`:`${Y}-${M}`}return U}),q=(U,Y,M)=>{l(F=>({...F,[U]:typeof F[U]=="object"?{...F[U],[Y]:M}:M}))},W=(U,Y,M)=>{l(F=>({...F,[U]:{...F[U],[Y]:M}}))},te=(U,Y,M,F)=>{l(K=>{const ne=[...K[U].courses],ee=ne.findIndex(X=>X.id===Y);if(ee===-1)return K;const O={...ne[ee],[M]:F};return O.isAutoCreated&&M==="name"&&F.trim()!==""&&(O.isAutoCreated=!1,ne.push({id:MO(),name:"",credits:"",completed:!1,isAutoCreated:!0})),ne[ee]=O,{...K,[U]:{...K[U],courses:ne}}})},z=(U,Y)=>{l(M=>({...M,[U]:{...M[U],courses:M[U].courses.filter(F=>F.id!==Y)}}))},E=U=>{const Y=A[U].courses.filter(F=>F.completed&&!F.isAutoCreated).reduce((F,K)=>F+(parseFloat(K.credits)||0),0),M=parseFloat(A[U].minCredits)||0;return{completed:Y,target:M}},N=()=>{const U=A.designatedRequired.courses.filter(K=>K.completed).reduce((K,ne)=>K+(parseFloat(ne.credits)||0),0),Y=A.electiveRequired.courses.filter(K=>K.completed).reduce((K,ne)=>K+(parseFloat(ne.credits)||0),0),M=U+Y,F=parseFloat(A.minTotalCredits)||0;return{total:M,target:F}};k.useEffect(()=>{if(!r)return;const U=N(),Y=E("designatedRequired"),M=E("electiveRequired"),F=U.target>0&&U.total>=U.target,K=Y.target>0&&Y.completed>=Y.target,ne=M.target>0&&M.completed>=M.target,ee=F&&K&&ne&&(A.practicum.educationalPracticum==="completed"||A.status==="certified");r(ee)},[A,r]);const C=U=>{x&&v&&(te(x,v,"name",U.name),te(x,v,"credits",U.credit.toString()),u(!1),y(null),S(null))},D=(U,Y)=>a.jsxs("div",{className:`flex items-center gap-2 mb-2 ${Y.completed?"opacity-50":""}`,children:[!Y.isAutoCreated&&a.jsx("div",{onClick:()=>te(U,Y.id,"completed",!Y.completed),className:`w-5 h-5 rounded border flex items-center justify-center cursor-pointer flex-shrink-0 transition-colors ${Y.completed?"bg-emerald-500 border-emerald-500 text-white":"border-border hover:border-primary"}`,children:Y.completed&&a.jsx(vt,{size:14,strokeWidth:3})}),Y.isAutoCreated&&a.jsx("div",{className:"w-5 h-5 flex-shrink-0"}),a.jsxs("div",{className:"relative flex-1",children:[a.jsx("input",{type:"text",value:Y.name,placeholder:Y.isAutoCreated?t.typeToAdd:t.courseName,onChange:M=>te(U,Y.id,"name",M.target.value),className:`w-full bg-background border border-border rounded-lg px-3 py-1.5 text-sm outline-none focus:ring-2 focus:ring-primary/50 ${Y.completed?"line-through text-muted":"text-foreground"}`}),!Y.completed&&a.jsx("button",{onClick:()=>{y(U),S(Y.id),u(!0)},className:"absolute right-2 top-1/2 -translate-y-1/2 text-muted hover:text-primary",title:"Import from Catalog",children:a.jsx(Xr,{size:14})})]}),a.jsx("input",{type:"text",value:Y.credits,placeholder:t.credit,onChange:M=>{/^\d*\.?\d*$/.test(M.target.value)&&te(U,Y.id,"credits",M.target.value)},className:`w-20 bg-background border border-border rounded-lg px-2 py-1.5 text-sm text-center outline-none focus:ring-2 focus:ring-primary/50 ${Y.completed?"line-through text-muted":"text-foreground"}`}),Y.isAutoCreated?a.jsx("div",{className:"w-[26px] flex-shrink-0"}):a.jsx("button",{onClick:()=>z(U,Y.id),className:"text-muted hover:text-destructive p-1 w-[26px] flex justify-center flex-shrink-0",children:a.jsx(Un,{size:16})})]},Y.id),Q=N(),T=E("designatedRequired"),_=E("electiveRequired");return k.useEffect(()=>{const Y=Q.target>0&&Q.total>=Q.target&&(T.target>0?T.completed>=T.target:!0)&&(_.target>0?_.completed>=_.target:!0)&&A.practicum.teachingInternship==="completed";let M=!1,F={...A};!Y&&F.practicum.qualificationReview&&(F.practicum={...F.practicum,qualificationReview:!1},M=!0),!F.practicum.qualificationReview&&F.practicum.educationalPracticum!=="not_started"&&(F.practicum={...F.practicum,educationalPracticum:"not_started"},M=!0),F.practicum.qualificationReview?(F.practicum.educationalPracticum,F.status!=="practicum"&&F.status!=="certified"&&(F.status="practicum",M=!0)):(F.status==="practicum"||F.status==="certified")&&(F.status="in_progress",M=!0),M&&l(F)},[Q.target,Q.total,T.target,T.completed,_.target,_.completed,A.practicum.teachingInternship,A.practicum.qualificationReview,A.practicum.educationalPracticum,A.status]),a.jsxs("div",{className:"space-y-8 max-w-3xl mx-auto animate-in fade-in zoom-in-95 duration-300 pb-20",children:[a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsx("div",{className:"flex justify-between items-center",children:a.jsxs("h3",{className:"text-lg font-bold text-primary flex items-center gap-2",children:[a.jsx(rr,{size:20}),t.basicInfo]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"md:col-span-2 relative",children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:t.status}),a.jsxs("button",{onClick:()=>g(!f),className:`w-full flex items-center justify-between bg-background border rounded-lg px-3 py-2 text-sm outline-none transition-all ${f?"ring-2 ring-primary/50 border-primary":"border-border hover:border-primary/50"}`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${A.status==="planned"?"bg-warning shadow-[0_0_8px] shadow-warning/50":A.status==="in_progress"?"bg-primary shadow-[0_0_8px] shadow-primary/50":A.status==="practicum"?"bg-orange-500 shadow-[0_0_8px] shadow-orange-500/50":"bg-success shadow-[0_0_8px] shadow-success/50"}`}),a.jsx("span",{className:"text-foreground",children:A.status==="planned"?t.statusPlanned:A.status==="in_progress"?t.statusInProgress:A.status==="practicum"?t.statusPending:t.statusCompleted})]}),a.jsx(xd,{size:16,className:`text-muted transition-transform duration-200 ${f?"rotate-180":"rotate-0"}`})]}),f&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>g(!1)}),a.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-surface border border-border rounded-lg shadow-xl z-20 py-1 overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[{val:"planned",label:t.statusPlanned,color:"bg-warning",text:"text-warning"},{val:"in_progress",label:t.statusInProgress,color:"bg-primary",text:"text-primary"},{val:"pending",label:t.statusPending,color:"bg-orange-500",text:"text-orange-500"},{val:"certified",label:t.statusCompleted,color:"bg-success",text:"text-success"}].map(U=>{const Y=U.val==="pending"||U.val==="certified";return a.jsxs("button",{disabled:Y,onClick:()=>{if(Y)return;q("status","",{planned:"planned",in_progress:"in_progress",pending:"practicum",certified:"certified"}[U.val]),g(!1)},className:`w-full flex items-center gap-3 px-3 py-2.5 text-sm transition-colors ${Y?"opacity-50 cursor-not-allowed bg-surface/50":U.val==="pending"&&A.status==="practicum"||U.val==="certified"&&A.status==="certified"||A.status===U.val?"bg-primary/10":"hover:bg-white/5"}`,children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${U.color} ${!Y&&A.status===U.val?"shadow-[0_0_6px] "+U.color:""}`}),a.jsx("span",{className:`${!Y&&A.status===U.val?U.text+" font-medium":"text-foreground"}`,children:U.label}),Y&&a.jsx("div",{className:"ml-auto text-muted",children:a.jsx(Ar,{size:14})}),!Y&&(U.val==="pending"&&A.status==="practicum"||U.val==="certified"&&A.status==="certified"||A.status===U.val)&&a.jsx(vt,{size:14,className:`ml-auto ${U.text}`})]},U.val)})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:t.doubleMajorDept}),a.jsx("input",{type:"text",value:A.department,onChange:U=>q("department","",U.target.value),placeholder:e==="zh"?"":"Center for Teacher Education",className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:t.applicableYear}),a.jsxs("select",{value:A.targetYear,onChange:U=>q("targetYear","",U.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50",children:[a.jsx("option",{value:"",children:t.selectYear}),G.map(U=>a.jsx("option",{value:U,children:U},U))]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:t.minTotalCredits}),a.jsx("input",{type:"text",value:A.minTotalCredits,onChange:U=>/^\d*$/.test(U.target.value)&&q("minTotalCredits","",U.target.value),placeholder:"e.g. 40",className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50"})]})]})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border",children:[a.jsx("h3",{className:"text-lg font-bold text-primary mb-6",children:t.totalProgress}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute top-4 left-0 h-1 bg-border rounded-l-full -z-0",style:{width:"70%"}}),a.jsx("div",{className:"absolute top-4 left-[70%] h-1 border-t-4 border-dotted border-border -z-0",style:{width:"20%"}}),a.jsx("div",{className:"absolute top-4 left-0 h-1 bg-emerald-500 rounded-full z-0 transition-all duration-500 ease-out",style:{width:(()=>{if(!(Q.target>0&&Q.total>=Q.target&&(T.target>0?T.completed>=T.target:!0)&&(_.target>0?_.completed>=_.target:!0))){const Y=Q.target>0?Q.total/Q.target:0;return`${Math.min(1,Y)*10}%`}return A.practicum.teachingInternship!=="completed"?A.practicum.teachingInternship==="in_progress"?"20%":"10%":A.practicum.qualificationReview?A.practicum.educationalPracticum!=="completed"?A.practicum.educationalPracticum==="in_progress"?"60%":"50%":A.status!=="certified"?"70%":"90%":"30%"})(),maxWidth:"100%"}}),a.jsx("div",{className:"flex justify-between relative z-10",children:[{id:1,label:t.step1,isCompleted:Q.target>0&&Q.total>=Q.target&&(T.target>0?T.completed>=T.target:!0)&&(_.target>0?_.completed>=_.target:!0)},{id:1.5,label:t.stepApply,isCompleted:Q.target>0&&Q.total>=Q.target&&(T.target>0?T.completed>=T.target:!0)&&(_.target>0?_.completed>=_.target:!0)&&A.practicum.teachingInternship==="completed"},{id:2,label:t.step2,isCompleted:A.practicum.qualificationReview},{id:3,label:t.step3,isCompleted:A.practicum.educationalPracticum==="completed"},{id:4,label:t.step4,isCompleted:A.status==="certified"}].map(U=>a.jsxs("div",{className:"flex flex-col items-center flex-1",children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 transition-all duration-300 bg-background ${U.isCompleted?"border-emerald-500 text-emerald-500 shadow-[0_0_10px_rgba(16,185,129,0.3)]":"border-border text-muted"}`,children:a.jsx(vt,{size:16,strokeWidth:3})}),a.jsx("div",{className:`text-xs text-center mt-2 px-1 transition-colors duration-300 whitespace-pre-line ${U.isCompleted?"text-emerald-500 font-medium":"text-muted"}`,children:U.label})]},U.id))})]}),Q.target<=0&&a.jsxs("div",{className:"mt-6 text-sm text-orange-500 font-medium flex items-center gap-2 bg-orange-500/10 p-2 rounded",children:[a.jsx("span",{className:"text-lg",children:"!"})," ",t.pleaseFillTotal]}),Q.target>0&&a.jsx("div",{className:"mt-6 pt-4 border-t border-border/50 flex justify-between items-center text-sm",children:a.jsxs("span",{className:"flex items-center flex-wrap gap-2",children:[a.jsxs("span",{className:"text-foreground",children:[t.earnedCredits,"",Q.total,"",t.threshold," ",Q.target,""]}),a.jsxs("span",{className:"flex items-center text-xs text-muted",children:[a.jsx(C5,{size:14,className:"mr-1"}),t.creditPrerequisiteNotice]})]})})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[a.jsx("h3",{className:"text-lg font-bold text-primary",children:t.designated}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-xs text-muted whitespace-nowrap",children:t.minCredits}),a.jsx("input",{type:"text",value:A.designatedRequired.minCredits,onChange:U=>/^\d*$/.test(U.target.value)&&W("designatedRequired","minCredits",U.target.value),className:"w-16 bg-background border border-border rounded px-2 py-1 text-sm text-center outline-none focus:ring-primary/50"})]})]}),a.jsx("div",{className:"pb-4 border-b border-border/50",children:T.target>0?a.jsxs(a.Fragment,{children:[a.jsx(mr,{label:t.designated+" Progress",current:T.completed,total:T.target,color:"bg-inter",variant:"s"}),T.completed>=T.target&&a.jsx("div",{className:"text-center text-emerald-500 font-bold text-sm mt-1",children:t.sectionComplete})]}):a.jsxs("div",{className:"text-sm text-orange-500 font-medium flex items-center gap-2 bg-orange-500/10 p-2 rounded",children:[a.jsx("span",{className:"text-lg",children:"!"})," ",t.pleaseFill]})}),a.jsx("div",{className:"space-y-2 mt-4",children:A.designatedRequired.courses.map(U=>D("designatedRequired",U))})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[a.jsx("h3",{className:"text-lg font-bold text-primary",children:t.elective}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-xs text-muted whitespace-nowrap",children:t.minCredits}),a.jsx("input",{type:"text",value:A.electiveRequired.minCredits,onChange:U=>/^\d*$/.test(U.target.value)&&W("electiveRequired","minCredits",U.target.value),className:"w-16 bg-background border border-border rounded px-2 py-1 text-sm text-center outline-none focus:ring-primary/50"})]})]}),a.jsx("div",{className:"pb-4 border-b border-border/50",children:_.target>0?a.jsxs(a.Fragment,{children:[a.jsx(mr,{label:t.elective+" Progress",current:_.completed,total:_.target,color:"bg-primer",variant:"s"}),_.completed>=_.target&&a.jsx("div",{className:"text-center text-emerald-500 font-bold text-sm mt-1",children:t.sectionComplete})]}):a.jsxs("div",{className:"text-sm text-orange-500 font-medium flex items-center gap-2 bg-orange-500/10 p-2 rounded",children:[a.jsx("span",{className:"text-lg",children:"!"})," ",t.pleaseFill]})}),a.jsx("div",{className:"space-y-2 mt-4",children:A.electiveRequired.courses.map(U=>D("electiveRequired",U))})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsx("div",{className:"flex justify-between items-center",children:a.jsx("h3",{className:"text-lg font-bold text-primary",children:t.practicumTitle})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"p-3 bg-background/50 rounded-lg border border-border/50 space-y-2",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2",children:[a.jsx("span",{className:"text-sm font-medium text-foreground",children:t.teachingInternship}),a.jsx("div",{className:"flex items-center gap-1",children:["not_started","in_progress","completed"].map(U=>a.jsx("button",{onClick:()=>W("practicum","teachingInternship",U),className:`px-3 py-1.5 rounded-md text-xs transition-all border ${A.practicum.teachingInternship===U?U==="completed"?"bg-success/20 text-success border-success/50 font-bold":U==="in_progress"?"bg-primary/20 text-primary border-primary/50 font-bold":"bg-muted/20 text-muted-foreground border-border font-bold":"border-transparent text-muted hover:bg-surface"}`,children:U==="not_started"?t.pStatus_not_started:U==="in_progress"?t.pStatus_in_progress:t.pStatus_completed},U))})]}),a.jsxs("div",{className:"w-full text-xs text-muted flex items-center gap-1",children:["- ",t.teachingInternshipNotice]})]}),(()=>{const Y=Q.target>0&&Q.total>=Q.target&&(T.target>0?T.completed>=T.target:!0)&&(_.target>0?_.completed>=_.target:!0)&&A.practicum.teachingInternship==="completed";return a.jsx("div",{className:`p-3 bg-background/50 rounded-lg border border-border/50 ${Y?"":"opacity-50"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("label",{className:`flex items-center gap-3 group ${Y?"cursor-pointer":"cursor-not-allowed"}`,children:[a.jsx("div",{className:`w-5 h-5 rounded border flex items-center justify-center transition-colors ${A.practicum.qualificationReview?"bg-emerald-500 border-emerald-500 text-white":"border-muted "+(Y?"group-hover:border-primary":"")}`,children:A.practicum.qualificationReview&&a.jsx(vt,{size:14,strokeWidth:3})}),a.jsx("input",{type:"checkbox",className:"hidden",disabled:!Y,checked:!!A.practicum.qualificationReview,onChange:M=>{const F=M.target.checked;W("practicum","qualificationReview",F),F&&q("status","","practicum")}}),a.jsx("span",{className:"text-sm transition-colors text-foreground",children:t.qualificationReviewLabel})]}),!Y&&a.jsx(Fs,{size:14,className:"text-muted-foreground ml-2"})]})})})(),a.jsxs("div",{className:`p-3 bg-background/50 rounded-lg border border-border/50 space-y-2 ${A.practicum.qualificationReview?"":"opacity-50"}`,children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-medium text-foreground",children:t.educationalPracticum}),!A.practicum.qualificationReview&&a.jsx(Fs,{size:12,className:"text-muted-foreground"})]}),a.jsx("div",{className:"flex items-center gap-1",children:["not_started","in_progress","completed"].map(U=>a.jsx("button",{disabled:!A.practicum.qualificationReview,onClick:()=>W("practicum","educationalPracticum",U),className:`px-3 py-1.5 rounded-md text-xs transition-all border ${A.practicum.educationalPracticum===U?U==="completed"?"bg-success/20 text-success border-success/50 font-bold":U==="in_progress"?"bg-primary/20 text-primary border-primary/50 font-bold":"bg-muted/20 text-muted-foreground border-border font-bold":"border-transparent text-muted "+(A.practicum.qualificationReview?"hover:bg-surface":"cursor-not-allowed")}`,children:U==="not_started"?t.pStatus_not_started:U==="in_progress"?t.pStatus_in_progress:t.pStatus_completed},U))})]}),a.jsxs("div",{className:"w-full text-xs text-muted flex items-center gap-1",children:["- ",t.educationalPracticumNotice]})]}),a.jsx("div",{children:a.jsx("input",{type:"text",value:A.practicum.note||"",onChange:U=>W("practicum","note",U.target.value),placeholder:t.practicumNotePlaceholder,className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-primary/50"})})]})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-6",children:[a.jsx("h3",{className:"text-lg font-bold text-primary border-b border-border/50 pb-2",children:t.proofSection}),a.jsx("div",{className:"space-y-6 pl-2",children:a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6 space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:t.proofStatus}),a.jsxs("div",{className:"space-y-2 pl-2",children:[(()=>{const U=!A.practicum.qualificationReview;return a.jsxs("label",{className:`flex items-center gap-2 group ${U?"cursor-not-allowed opacity-50":"cursor-pointer"}`,children:[a.jsx("input",{type:"radio",name:"proof_status",disabled:U,checked:A.status==="practicum",onChange:()=>q("status","","practicum"),className:"w-4 h-4 text-orange-500 bg-background border-border focus:ring-orange-500"}),a.jsx("span",{className:`text-sm transition-colors ${A.status==="practicum"?"text-orange-500 font-medium":"text-muted "+(U?"":"group-hover:text-foreground")}`,children:t.submitted}),U&&a.jsx(Fs,{size:12,className:"text-muted-foreground ml-2"})]})})(),(()=>{const U=A.practicum.educationalPracticum!=="completed";return a.jsxs("label",{className:`flex items-center gap-2 group ${U?"cursor-not-allowed opacity-50":"cursor-pointer"}`,children:[a.jsx("input",{type:"radio",name:"proof_status",disabled:U,checked:A.status==="certified",onChange:()=>q("status","","certified"),className:"w-4 h-4 text-emerald-500 bg-background border-border focus:ring-emerald-500"}),a.jsx("span",{className:`text-sm transition-colors ${A.status==="certified"?"text-emerald-500 font-bold":"text-muted "+(U?"":"group-hover:text-foreground")}`,children:t.approved}),U&&a.jsx(Fs,{size:12,className:"text-muted-foreground ml-2"})]})})()]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:t.uploadOrLink}),R?a.jsxs("div",{className:"flex items-center gap-3 bg-primary/10 border border-primary/20 rounded-lg p-3 max-w-md",children:[a.jsx(fs,{className:"text-primary flex-shrink-0",size:20}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-primary truncate",children:R.name}),a.jsx("div",{className:"text-xs text-muted flex gap-2",children:a.jsxs("span",{children:[(R.size/1024).toFixed(1)," KB"]})})]}),a.jsx("button",{onClick:()=>{const U=URL.createObjectURL(R);window.open(U,"_blank")},className:"p-1.5 hover:bg-white/20 rounded-md text-primary transition-colors",title:t.viewFile,children:a.jsx(Or,{size:16})}),a.jsx("button",{onClick:P,className:"p-1.5 hover:bg-white/20 rounded-md text-primary hover:text-destructive transition-colors",title:"Remove",children:a.jsx(ut,{size:16})})]}):A.proofFileName?a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 bg-surface/50 border border-dashed border-border rounded-lg p-3 max-w-md",children:[a.jsxs("div",{className:"flex items-center gap-3 opacity-70 overflow-hidden",children:[a.jsx(fs,{className:"text-muted flex-shrink-0",size:20}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:A.proofFileName}),a.jsx("p",{className:"text-xs text-muted truncate",children:t.storedOnOriginalDevice})]})]}),a.jsxs("label",{className:"cursor-pointer p-1.5 hover:bg-white/10 rounded-md text-primary transition-colors text-xs flex items-center gap-1 flex-shrink-0 self-start sm:self-auto border border-primary/20 bg-primary/5",children:[a.jsx(Dr,{size:14})," ",t.reUpload,a.jsx("input",{type:"file",accept:"image/*,application/pdf",className:"hidden",onChange:V})]})]}):a.jsx("div",{className:"flex items-center gap-3",children:a.jsxs("label",{className:"flex items-center justify-center px-4 py-2 bg-primary/10 hover:bg-primary/20 text-primary rounded-lg cursor-pointer transition-colors border border-primary/20",children:[a.jsx(Dr,{size:18,className:"mr-2"}),a.jsx("span",{className:"text-sm font-medium",children:t.uploadType}),a.jsx("input",{type:"file",accept:"image/*,application/pdf",className:"hidden",onChange:V})]})}),a.jsxs("div",{className:"mt-4 text-[10px] text-muted flex items-center gap-1",children:[a.jsx(Ar,{size:10}),t.safetyNotice]})]}),a.jsx("div",{children:a.jsx("textarea",{value:A.notes,onChange:U=>q("notes","",U.target.value),placeholder:t.notes,className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-primary/50 min-h-[80px]"})})]})})]}),d&&a.jsx(GA,{onClose:()=>u(!1),onSelect:C})]})},OO=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","()","","","","","","","","","",""," Practical English Cross-Disciplinary Program (Program Taught in English)","","IC","IC","","","","","Human Rights Studies Program(Program Taught in English)","","","","()","","AI","AI","AI","AI","",""],PO=["","","",""," EMI General Education Honors Program"],VO=["","","()","  ()","","","","","","","","","","","","()","()","","","","","","","","","","","","","","","","","","","","","",""," Micro-Program of Taiwanese Culture in English(Program Taught in English)","","","","","","","STREAM ","","",""," English Micro-module: Science, Technology and the Environment (Program Taught in English)","","","","","","","","","","","","","","","","","","AI()","","","",""],zO=({candidate:r,onConfirm:e,onCancel:t,T:s})=>(k.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),$t.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-md shadow-2xl p-6 flex flex-col gap-4 animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[a.jsx("div",{className:"mx-auto w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center text-primary mb-2",children:a.jsx(vt,{size:24,strokeWidth:3})}),a.jsx("h3",{className:"text-xl font-bold",children:s.perfectMatchFound}),a.jsx("p",{className:"text-muted text-sm",children:s.matchConfirmText})]}),a.jsxs("div",{className:"bg-surface/50 p-4 rounded-lg flex flex-col gap-2 border border-border",children:[a.jsx("div",{className:"font-bold text-center text-lg",children:r.match.name}),a.jsxs("div",{className:"flex justify-center gap-4 text-xs text-muted",children:[a.jsxs("span",{children:[r.match.credits," cr"]}),a.jsx("span",{children:""}),a.jsx("span",{children:r.match.teacher})]}),a.jsx("div",{className:"text-center text-xs text-muted/80",children:r.match.department})]}),a.jsxs("div",{className:"flex gap-3 mt-2",children:[a.jsx("button",{onClick:t,className:"flex-1 py-2.5 px-4 rounded-lg border border-border hover:bg-surface font-medium transition-colors",children:"Cancel"}),a.jsx("button",{onClick:e,className:"flex-1 py-2.5 px-4 rounded-lg bg-primary hover:bg-primary/90 text-white font-bold transition-colors shadow-lg shadow-primary/20",children:"Confirm Sync"})]})]})}),document.body)),KO=({isOpen:r,onClose:e,courses:t,onAdd:s,searchQuery:A,setSearchQuery:l,T:d})=>{if(!r)return null;const u=t.filter(f=>f.name.toLowerCase().includes(A.toLowerCase())||f.id.toLowerCase().includes(A.toLowerCase())||f.userLabels&&f.userLabels.some(g=>g.toLowerCase().includes(A.toLowerCase()))||f.originalTags&&f.originalTags.some(g=>g.toLowerCase().includes(A.toLowerCase())));return k.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),$t.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-lg shadow-2xl max-h-[85vh] flex flex-col animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-4 border-b border-border flex justify-between items-center",children:[a.jsx("h3",{className:"font-bold text-lg",children:d.trackerTitle}),a.jsx("button",{onClick:e,children:a.jsx(ut,{size:20})})]}),a.jsx("div",{className:"p-4 border-b border-border",children:a.jsx("input",{type:"text",placeholder:"Search...",value:A,onChange:f=>l(f.target.value),autoFocus:!0,className:"w-full bg-background border border-border rounded-lg px-3 py-2 outline-none focus:ring-2 focus:ring-primary/50"})}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-2",children:[u.map(f=>a.jsxs("button",{onClick:()=>s(f),className:"w-full text-left p-3 rounded-lg hover:bg-surface/50 border border-transparent hover:border-border transition-all group flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("span",{className:"font-bold",children:f.name})}),a.jsxs("div",{className:"text-xs text-muted flex items-center gap-1",children:[a.jsxs("span",{className:"font-medium text-foreground/80",children:[f.credits," cr"]}),a.jsx("span",{children:""}),[f.teacher||(f.id&&f.id.length<20?f.id:"Custom Course"),f.department].filter(Boolean).join("  ")]})]}),a.jsx("div",{className:"p-2 bg-primary/10 text-primary rounded-full opacity-0 group-hover:opacity-100 transition-all",children:a.jsx(Xr,{size:16})})]},f.id)),u.length===0&&a.jsx("div",{className:"text-center p-8 text-muted",children:"No courses found"})]})]})}),document.body)},Mp=()=>Math.random().toString(36).substring(2,9)+Date.now().toString(36),Lp={department:"",minTotalCredits:"9",minCoreCredits:"0",targetYear:"",status:"in_progress",courses:[],proofFileName:"",notes:"",coursePlanUrl:"",coursePlanFileName:""},Hp="nsysu-interdisciplinary-cross-disciplinary-data",GO={en:{referenceProcess:"Reference Process",step1:"Program Introduction",step1_sub1:"Go to About -> Find [Micro-Program] -> Check Rules",step1_sub2:"Scroll down to 'Micro-Program Introduction' to find your program",step1_sub3_pre:"Click ",step1_sub3_link:"'Course Plan'",step1_sub4:"Check 'Core Courses', 'Electives', and 'Credit Requirements'",step2:"Add your planned/completed courses to the list below",step2_sub1:"Fill in Basic Info",step3:"ClearGrad tracks your progress in real-time",basicInfo:"Basic Info",doubleMajorDept:"Program Name",selectDept:"Select Program...",applicableYear:"Applicable Year",selectYear:"Select Year...",minTotalCredits:"Minimum Total Credits",minCoreCredits:"Core Course Required Credits",totalProgress:"Total Credits Progress",externalCreditsCheck:"At least 3 credits from courses outside your Major, Minor, and Double Major departments",externalCreditsProgress:"External Credits: ",coursePlanInput:"Course Plan / Regulations",addFromTracker:"Add from Tracker",addFromCatalog:"Add from Catalog",trackerTitle:"Select from Tracker",syncBtn:"Sync",matchCourse:"Match/Sync",matchConfirmTitle:"Confirm Course Match",matchConfirmText:"We found a matching course in your tracker. Do you want to sync data from this course?",perfectMatchFound:"Perfect Match Found!",noMatchFound:"No exact match found in your tracker.",noMatchTitle:"No Match Found",noMatchDesc:"We couldn't find an exact match for this course in your tracker.",manualAdd:"Manual Add",cancel:"Cancel",confirm:"Confirm",deleteConfirmTitle:"Delete Course?",deleteConfirmText:"Are you sure you want to remove this course from your list? This action cannot be undone.",selectCourse:"Select Course",fromTracker:"From Tracker",uploadPlan:"Upload File",pasteLink:"Paste Link...",viewPlan:"View Plan",designated:"Required Courses",coreCourses:"Core Courses",attachments:"Attachments",completedCourses:"Completed Courses",plannedCourses:"Planned Courses",badgeCompleted:"Completed",badgePlanned:"Planned",addCourse:"Add Course",elective:"Elective Courses",minCredits:"Min Credits:",sectionComplete:"Section Complete!",courseName:"Course Name",typeToAdd:"Type to add course...",credit:"Credit",pleaseFill:'Please fill in "Min Credits" to track progress.',pleaseFillTotal:'Please fill in "Minimum Total Credits" to track progress.',officialRegulations:"Reference",status:"Status",statusPlanned:"Planned",statusInProgress:"In Progress",statusPending:"Pending Approval",statusCompleted:"Approved",creditWarning:"Completion of credit requirements does not imply official approval.",proofSection:"Approval / Proof (optional)",proofStatus:"Status:",notSubmitted:"Not Submitted",submitted:"Submitted",approved:"Approved",uploadOrLink:"Upload or Paste Link:",uploadType:"Approval Letter / System Screenshot",notes:"Notes (Optional)",viewFile:"View Attached File",uploadFile:"Upload File",safetyNotice:"Files are stored locally in your browser and are not uploaded to any server.",confirmRemove:"Are you sure you want to remove this file?",storedOnOriginalDevice:"Stored on original upload device",reUpload:"Re-upload"},zh:{referenceProcess:"",step1:"",step1_sub1:" ",step1_sub2:"",step1_sub3_pre:"",step1_sub3_link:"",step1_sub4:"",step2:"",step2_sub1:"",step3:"ClearGrad ",basicInfo:"",doubleMajorDept:"",selectDept:"...",applicableYear:"",selectYear:"...",minTotalCredits:"",minCoreCredits:"",totalProgress:"",externalCreditsCheck:" 3 ",externalCreditsProgress:"",coursePlanInput:" / ",addFromTracker:"",addFromCatalog:"",trackerTitle:"",syncBtn:"",matchCourse:"/",matchConfirmTitle:"",matchConfirmText:"",perfectMatchFound:"",noMatchFound:"",noMatchTitle:"",noMatchDesc:"",manualAdd:"",cancel:"",confirm:"",deleteConfirmTitle:"",deleteConfirmText:"",selectCourse:"",fromTracker:"",uploadPlan:"",pasteLink:"...",viewPlan:"",attachments:"",designated:"",coreCourses:"",completedCourses:"",plannedCourses:"",badgeCompleted:"",badgePlanned:"",addCourse:"",elective:"",minCredits:"",sectionComplete:"",courseName:"",typeToAdd:"...",credit:"",pleaseFill:"",pleaseFillTotal:"",officialRegulations:"",status:"",statusPlanned:"",statusInProgress:"",statusPending:"",statusCompleted:"",creditWarning:"",proofSection:"",proofStatus:"",notSubmitted:"",submitted:"",approved:"",uploadOrLink:"",uploadType:" / ",notes:"",viewFile:"",uploadFile:"",safetyNotice:"",confirmRemove:"",storedOnOriginalDevice:"",reUpload:""}},qO=({onStatusChange:r,userProfile:e,courses:t=[]})=>{const{language:s}=it(),A=GO[s==="zh"?"zh":"en"],{semesters:l}=da(),[d,u]=k.useState(()=>{const L=localStorage.getItem(Hp);if(L)try{const J=JSON.parse(L);if(!Array.isArray(J.courses)){const he=[];J.designatedRequired?.courses&&he.push(...J.designatedRequired.courses),J.electiveRequired?.courses&&he.push(...J.electiveRequired.courses),J.courses=he,J.courses.length===0&&(J.courses=Lp.courses)}return J}catch(J){return console.error("Failed to parse saved data",J),Lp}return Lp}),[f,g]=k.useState(!1),[x,y]=k.useState(!1),[v,S]=k.useState(""),[R,j]=k.useState(""),[V,P]=k.useState(null),[G,q]=k.useState(null);k.useEffect(()=>{Aa("cross_disciplinary_7_proof").then(L=>{L&&P(L)}),Aa("cross_disciplinary_7_course_plan").then(L=>{L&&q(L)})},[]);const W=async L=>{if(L.target.files&&L.target.files[0]){const J=L.target.files[0];await Qn("cross_disciplinary_7_proof",J),P(J),C("proofFileName",J.name)}},te=async L=>{if(L.target.files&&L.target.files[0]){const J=L.target.files[0];await Qn("cross_disciplinary_7_course_plan",J),q(J),C("coursePlanFileName",J.name)}},z=async()=>{window.confirm(A.confirmRemove)&&(await oa("cross_disciplinary_7_proof"),P(null),C("proofFileName",""))},E=async()=>{window.confirm(A.confirmRemove)&&(await oa("cross_disciplinary_7_course_plan"),q(null),C("coursePlanFileName",""))};k.useEffect(()=>{const L=localStorage.getItem(Hp),J=JSON.stringify(d);L!==J&&localStorage.setItem(Hp,J)},[d]);const N=l.map(L=>{if(L.length===4){const J=L.substring(0,3),he=L.substring(3);return he==="3"?`${J}-Summer`:`${J}-${he}`}return L}),C=(L,J)=>{u(he=>({...he,[L]:J}))},D=(L,J,he)=>{u(ge=>{const Ke=[...ge.courses],ot=Ke.findIndex(Le=>Le.id===L);if(ot===-1)return ge;const Xe={...Ke[ot],[J]:he};return Ke[ot]=Xe,{...ge,courses:Ke}})},Q=(L="core")=>{u(J=>({...J,courses:[...J.courses,{id:Mp(),name:"",credits:"",completed:!1,isAutoCreated:!1,category:L}]}))},T=L=>{u(J=>({...J,courses:J.courses.filter(he=>he.id!==L)}))},_=()=>{const L=d.courses.filter(he=>he.completed).reduce((he,ge)=>he+(parseFloat(ge.credits)||0),0),J=parseFloat(d.minTotalCredits)||0;return{total:L,target:J}},U=()=>{const L=d.courses.filter(he=>he.completed&&(he.category==="core"||!he.category)).reduce((he,ge)=>he+(parseFloat(ge.credits)||0),0),J=parseFloat(d.minCoreCredits)||0;return{total:L,target:J}},Y=()=>{const L=new Set;e?.major&&L.add(e.major);try{const ge=JSON.parse(localStorage.getItem("nsysu-interdisciplinary-minor-data")||"{}");ge.department&&L.add(ge.department)}catch(ge){console.error("Error reading minor data",ge)}try{const ge=JSON.parse(localStorage.getItem("nsysu-interdisciplinary-double-major-data")||"{}");ge.department&&L.add(ge.department)}catch(ge){console.error("Error reading double major data",ge)}return d.courses.filter(ge=>{if(!ge.completed)return!1;if(!ge.department)return!0;for(const Ke of Array.from(L))if(ge.department===Ke)return!1;return!0}).reduce((ge,Ke)=>ge+(parseFloat(Ke.credits)||0),0)};k.useEffect(()=>{if(!r)return;const L=_(),J=U(),he=Y(),ge=L.target>0&&L.total>=L.target,Ke=J.target>0?J.total>=J.target:!0,ot=he>=3;r(ge&&Ke&&ot)},[d,r,e]);const M=L=>{if(d.courses.some(ge=>ge.name===L.name&&ge.credits===L.credit.toString())){alert("This course is already in the list!");return}const he={id:Mp(),name:L.name,credits:L.credit.toString(),completed:!1,isAutoCreated:!1,category:Ae.current,department:L.department,fromCatalog:!0};u(ge=>({...ge,courses:[...ge.courses,he]})),g(!1)},F=L=>{if(d.courses.some(ge=>ge.name===L.name&&ge.credits===L.credits.toString())){alert("This course is already in the list!");return}const he={id:Mp(),name:L.name,credits:L.credits.toString(),completed:!0,isAutoCreated:!1,category:Ae.current,department:L.department,fromCatalog:!0};u(ge=>({...ge,courses:[...ge.courses,he]})),y(!1)},K=({onCancel:L,onManualAdd:J,T:he})=>(k.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),$t.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-sm shadow-2xl p-6 flex flex-col gap-4 animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[a.jsx("div",{className:"mx-auto w-12 h-12 bg-orange-500/10 rounded-full flex items-center justify-center text-orange-500 mb-2",children:a.jsx(Ar,{size:24,strokeWidth:3})}),a.jsx("h3",{className:"text-xl font-bold",children:he.noMatchTitle}),a.jsx("p",{className:"text-muted text-sm text-center",children:he.noMatchDesc})]}),a.jsxs("div",{className:"flex gap-3 mt-2",children:[a.jsx("button",{onClick:L,className:"flex-1 py-2.5 px-4 rounded-lg border border-border hover:bg-surface font-medium transition-colors",children:he.cancel}),a.jsx("button",{onClick:J,className:"flex-1 py-2.5 px-4 rounded-lg bg-primary hover:bg-primary/90 text-white font-bold transition-colors shadow-lg shadow-primary/20",children:he.manualAdd})]})]})}),document.body)),[ne,ee]=k.useState(null),[O,X]=k.useState(!1),Ae=k.useRef("core"),[me,Ee]=k.useState(null),Be=()=>{me&&(T(me.id),Ee(null))},ke=({isOpen:L,onClose:J,onConfirm:he,T:ge})=>(k.useEffect(()=>(L&&(document.body.style.overflow="hidden"),()=>{document.body.style.overflow="auto"}),[L]),L?$t.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-sm shadow-2xl p-6 flex flex-col gap-4 animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[a.jsx("div",{className:"mx-auto w-12 h-12 bg-destructive/10 rounded-full flex items-center justify-center text-destructive mb-2",children:a.jsx(Ar,{size:24,strokeWidth:3})}),a.jsx("h3",{className:"text-xl font-bold",children:ge.deleteConfirmTitle}),a.jsx("p",{className:"text-muted text-sm text-center",children:ge.deleteConfirmText})]}),a.jsxs("div",{className:"flex gap-3 mt-2",children:[a.jsx("button",{onClick:J,className:"flex-1 py-2.5 px-4 rounded-lg border border-border hover:bg-surface font-medium transition-colors",children:ge.cancel}),a.jsx("button",{onClick:he,className:"flex-1 py-2.5 px-4 rounded-lg bg-red-500 hover:bg-red-600 text-white font-bold transition-colors shadow-lg shadow-red-500/20",children:ge.confirm})]})]})}),document.body):null),Pe=()=>{if(!ne)return;const{item:L,match:J}=ne;D(L.id,"completed",!0),D(L.id,"credits",J.credits.toString()),D(L.id,"department",J.department),D(L.id,"fromCatalog",!0),ee(null)},Ve=L=>{const J=t.find(he=>he.id===L.id||he.name===L.name&&he.credits.toString()===L.credits);J?ee({item:L,match:J}):X(!0)},wt=({item:L})=>a.jsxs("div",{className:"group relative bg-surface hover:bg-surface/80 transition-all p-3 rounded-lg border border-border shadow-sm flex flex-col gap-2",children:[a.jsxs("div",{className:"flex justify-between items-start gap-2",children:[a.jsx("input",{type:"text",value:L.name,disabled:L.fromCatalog,placeholder:A.courseName,onChange:J=>D(L.id,"name",J.target.value),className:`bg-transparent border-none text-sm font-semibold text-foreground placeholder-muted w-full focus:outline-none focus:ring-1 focus:ring-primary/50 rounded px-1 -ml-1 ${L.fromCatalog?"opacity-80 cursor-not-allowed":""}`}),a.jsx("button",{onClick:()=>Ee(L),className:"text-muted hover:text-destructive p-1 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(Un,{size:14})})]}),a.jsxs("div",{className:"flex justify-between items-end",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("input",{type:"text",value:L.credits,disabled:L.fromCatalog,placeholder:"0",onChange:J=>/^\d*\.?\d*$/.test(J.target.value)&&D(L.id,"credits",J.target.value),className:`w-8 bg-transparent text-xs font-bold text-center border-b border-border focus:border-primary outline-none ${L.fromCatalog?"opacity-80 cursor-not-allowed border-transparent":""}`}),a.jsx("span",{className:"text-[10px] text-muted",children:A.credit})]}),a.jsxs("div",{className:"flex gap-1",children:[!L.completed&&a.jsxs("button",{onClick:()=>Ve(L),className:"text-[10px] px-2 py-1 rounded bg-surface border border-border hover:bg-surface/80 flex items-center gap-1",title:A.matchCourse,children:[a.jsx(Or,{size:10})," ",A.syncBtn]}),a.jsx("div",{className:`text-[10px] px-2 py-1 rounded-full font-bold border transition-colors select-none ${L.completed?"bg-emerald-500/10 text-emerald-500 border-emerald-500/20":"bg-blue-500/10 text-blue-500 border-blue-500/20"}`,children:L.completed?A.badgeCompleted:A.badgePlanned})]})]})]}),Xt=({title:L,category:J})=>{const he=d.courses.filter(Se=>J==="core"?Se.category==="core"||!Se.category:Se.category==="elective"),ge=he.filter(Se=>Se.completed),Ke=he.filter(Se=>!Se.completed),ot=J==="elective"?"text-orange-500":"text-primary",Xe=J==="elective"?"bg-orange-500 hover:bg-orange-600":"bg-primary hover:bg-primary/90",Le=J==="elective"?"bg-orange-400":"bg-emerald-500";return a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:`text-lg font-bold flex items-center gap-2 ${ot}`,children:L}),a.jsxs("div",{className:"flex gap-2",children:[J==="core"&&null,a.jsxs("button",{onClick:()=>Q(J),className:`flex items-center gap-1.5 px-3 py-1.5 text-white text-xs font-medium rounded-lg transition-colors ${Xe}`,children:[a.jsx(Xr,{size:14}),A.addCourse]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between pb-2 border-b border-border",children:[a.jsxs("h4",{className:"font-bold text-foreground text-sm flex items-center gap-2",children:[a.jsx("span",{className:`w-2 h-2 rounded-full ${Le}`}),A.completedCourses]}),a.jsxs("div",{className:"flex gap-2 items-center",children:[a.jsxs("button",{onClick:()=>{let Se=d.department;const Pt=Se.match(/(.+?)(?=\()/);Pt&&(Se=Pt[1]),S(Se),Ae.current=J,y(!0)},className:"text-[10px] text-primary hover:underline flex items-center gap-1",children:[a.jsx(rr,{size:10})," ",A.addFromTracker]}),a.jsxs("span",{className:"text-xs text-muted",children:[ge.length," items"]})]})]}),a.jsxs("div",{className:"space-y-2 min-h-[100px]",children:[ge.map(Se=>a.jsx(wt,{item:Se},Se.id)),ge.length===0&&a.jsx("div",{className:"text-center text-muted text-xs py-8 border border-dashed border-border rounded-lg",children:"No completed courses"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between pb-2 border-b border-border",children:[a.jsxs("h4",{className:"font-bold text-foreground text-sm flex items-center gap-2",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"}),A.plannedCourses]}),a.jsxs("div",{className:"flex gap-2 items-center",children:[a.jsxs("button",{onClick:()=>{let Se=d.department;const Pt=Se.match(/(.+?)(?=\()/);Pt&&(Se=Pt[1]),j(Se),Ae.current=J,g(!0)},className:"text-[10px] text-blue-500 hover:underline flex items-center gap-1",children:[a.jsx(rr,{size:10})," ",A.addFromCatalog]}),a.jsxs("span",{className:"text-xs text-muted",children:[Ke.length," items"]})]})]}),a.jsxs("div",{className:"space-y-2 min-h-[100px]",children:[Ke.map(Se=>a.jsx(wt,{item:Se},Se.id)),Ke.length===0&&a.jsx("div",{className:"text-center text-muted text-xs py-8 border border-dashed border-border rounded-lg",children:"No planned courses"})]})]})]})]})},ue=_();return a.jsxs("div",{className:"space-y-8 max-w-3xl mx-auto animate-in fade-in zoom-in-95 duration-300 pb-20",children:[a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary flex items-center gap-2",children:[a.jsx(rr,{size:20}),A.referenceProcess]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"pt-0.5",children:a.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-xs font-bold text-primary",children:"1"})}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("div",{className:"flex items-center gap-2 font-medium text-foreground",children:a.jsxs("a",{href:"https://ctdr.nsysu.edu.tw/class2.php",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-primary hover:underline underline-offset-4",children:[A.step1,a.jsx(Or,{size:14})]})}),a.jsxs("ul",{className:"text-sm text-muted list-disc list-inside space-y-0.5 pl-1",children:[a.jsx("li",{children:A.step1_sub1}),a.jsx("li",{children:A.step1_sub2}),a.jsxs("li",{children:[A.step1_sub3_pre,a.jsx("span",{className:"underline decoration-primary/50 underline-offset-2",children:A.step1_sub3_link})]}),a.jsx("li",{children:A.step1_sub4})]})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"pt-0.5",children:a.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-xs font-bold text-primary",children:"2"})}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("div",{className:"font-medium text-foreground",children:A.step2}),a.jsx("ul",{className:"text-sm text-muted list-disc list-inside space-y-0.5 pl-1",children:a.jsx("li",{children:A.step2_sub1})})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"pt-0.5",children:a.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-xs font-bold text-primary",children:"3"})}),a.jsxs("div",{className:"font-medium text-foreground flex items-center gap-2",children:[A.step3,a.jsx(vt,{size:16,className:"text-primary"})]})]})]})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary flex items-center gap-2",children:[a.jsx(rr,{size:20}),A.basicInfo]}),a.jsxs("a",{href:"https://oaa.nsysu.edu.tw/static/file/3/1003/attach/20/pta_232069_5443563_94211.pdf",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 px-3 py-1.5 bg-primary/10 hover:bg-primary/20 text-primary text-xs font-medium rounded-lg transition-colors",children:[A.officialRegulations,a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),a.jsx("polyline",{points:"15 3 21 3 21 9"}),a.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:A.doubleMajorDept}),a.jsxs("select",{value:d.department,onChange:L=>C("department",L.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50",children:[a.jsx("option",{value:"",children:A.selectDept}),a.jsx("optgroup",{label:" (Micro-Programs)",children:VO.map(L=>a.jsx("option",{value:L,children:L},L))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:A.applicableYear}),a.jsxs("select",{value:d.targetYear,onChange:L=>C("targetYear",L.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50",children:[a.jsx("option",{value:"",children:A.selectYear}),N.map(L=>a.jsx("option",{value:L,children:L},L))]})]}),a.jsxs("div",{className:"md:col-span-2 grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:A.minTotalCredits}),a.jsx("input",{type:"text",value:d.minTotalCredits,onChange:L=>/^\d*$/.test(L.target.value)&&C("minTotalCredits",L.target.value),placeholder:"e.g. 9",className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:A.minCoreCredits}),a.jsx("input",{type:"text",value:d.minCoreCredits||"",onChange:L=>/^\d*$/.test(L.target.value)&&C("minCoreCredits",L.target.value),placeholder:"Optional",className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50"})]})]}),a.jsxs("div",{className:"md:col-span-2 pt-2 border-t border-border/50",children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-2",children:A.coursePlanInput}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("input",{type:"text",value:d.coursePlanUrl||"",onChange:L=>C("coursePlanUrl",L.target.value),placeholder:A.pasteLink,className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground text-sm outline-none focus:ring-2 focus:ring-primary/50"}),d.coursePlanUrl&&a.jsxs("a",{href:d.coursePlanUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-primary hover:underline mt-1 flex items-center gap-1",children:[a.jsx(Or,{size:10}),A.viewPlan]})]}),a.jsxs("div",{children:[a.jsx("input",{type:"file",id:"course-plan-upload",className:"hidden",accept:"image/*,.pdf",onChange:te}),G?a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-primary/5 border border-primary/20 rounded-lg",children:[a.jsx("div",{className:"p-1.5 bg-primary/10 rounded-full text-primary",children:a.jsx(fs,{size:14})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsx("div",{className:"text-sm font-medium text-foreground truncate",children:G.name})}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>{const L=URL.createObjectURL(G);window.open(L,"_blank")},className:"p-1 text-primary hover:bg-primary/10 rounded transition-colors",title:A.viewFile,children:a.jsx(Or,{size:14})}),a.jsx("button",{onClick:E,className:"p-1 text-muted hover:text-destructive hover:bg-destructive/10 rounded transition-colors",children:a.jsx(ut,{size:14})})]})]}):a.jsxs("label",{htmlFor:"course-plan-upload",className:"cursor-pointer flex items-center justify-center gap-2 px-4 py-2 bg-background border border-border hover:border-primary text-foreground rounded-lg transition-all shadow-sm active:scale-95 text-sm",children:[a.jsx(Dr,{size:14}),A.uploadPlan]})]})]})]})]})]}),a.jsxs("div",{className:"bg-surface/50 p-4 rounded-xl border border-border",children:[ue.target>0?a.jsxs(a.Fragment,{children:[a.jsx(mr,{label:A.totalProgress,current:ue.total,total:ue.target,color:"bg-primary",variant:"l"}),a.jsx("div",{className:"flex justify-end mt-1",children:a.jsxs("span",{className:"text-xs text-muted flex items-center gap-1",children:[a.jsx(Ar,{size:12}),A.creditWarning]})})]}):a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("span",{className:"font-medium text-foreground text-lg mb-1",children:A.totalProgress}),a.jsxs("div",{className:"text-sm text-orange-500 font-medium flex items-center gap-2 bg-orange-500/10 p-2 rounded",children:[a.jsx("span",{className:"text-lg",children:"!"})," ",A.pleaseFillTotal]})]}),U().target>0&&a.jsx("div",{className:"mt-4 pt-4 border-t border-border/50",children:a.jsx(mr,{label:A.minCoreCredits,current:U().total,total:U().target,color:"bg-emerald-500",variant:"l"})})]}),a.jsxs("div",{className:"bg-surface/50 p-4 rounded-xl border border-border flex items-center gap-4",children:[a.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center border transition-colors ${Y()>=3?"bg-emerald-500 border-emerald-500 text-white":"border-muted text-transparent"}`,children:a.jsx(vt,{size:16,strokeWidth:3})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-sm font-medium text-foreground",children:A.externalCreditsCheck}),a.jsxs("div",{className:"text-xs text-muted mt-0.5",children:[A.externalCreditsProgress,a.jsx("span",{className:Y()>=3?"text-emerald-500 font-bold":"text-foreground",children:Y()})," / 3"]})]})]}),a.jsx(Xt,{title:A.coreCourses,category:"core"}),a.jsx(Xt,{title:A.elective,category:"elective"}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary border-b border-border/50 pb-2 flex items-center gap-2",children:[a.jsx(Dr,{size:20}),A.attachments," & ",A.notes]}),a.jsxs("div",{className:"flex flex-col gap-8",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:A.uploadOrLink}),a.jsxs("div",{className:"space-y-3 pl-2",children:[a.jsxs("div",{children:[a.jsx("input",{type:"file",id:"proof-upload-7",className:"hidden",accept:"image/*,.pdf",onChange:W}),V?a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-primary/5 border border-primary/20 rounded-lg animate-in fade-in slide-in-from-left-2",children:[a.jsx("div",{className:"p-2 bg-primary/10 rounded-full text-primary",children:a.jsx(fs,{size:18})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm font-medium text-foreground truncate max-w-[200px]",children:V.name}),a.jsxs("div",{className:"text-xs text-muted",children:[(V.size/1024).toFixed(1)," KB"]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>{const L=URL.createObjectURL(V);window.open(L,"_blank")},className:"p-1.5 text-primary hover:bg-primary/10 rounded-md transition-colors",title:A.viewFile,children:a.jsx(Or,{size:16})}),a.jsx("button",{onClick:z,className:"p-1.5 text-muted hover:text-destructive hover:bg-destructive/10 rounded-md transition-colors",children:a.jsx(ut,{size:16})})]})]}):d.proofFileName?a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 bg-surface/50 border border-dashed border-border rounded-lg p-3 max-w-md animate-in fade-in slide-in-from-left-2",children:[a.jsxs("div",{className:"flex items-center gap-3 opacity-70 overflow-hidden",children:[a.jsx(fs,{className:"text-muted flex-shrink-0",size:20}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:d.proofFileName}),a.jsx("p",{className:"text-xs text-muted truncate",children:A.storedOnOriginalDevice})]})]}),a.jsxs("label",{className:"cursor-pointer p-1.5 hover:bg-white/10 rounded-md text-primary transition-colors text-xs flex items-center gap-1 flex-shrink-0 self-start sm:self-auto border border-primary/20 bg-primary/5",children:[a.jsx(Dr,{size:14})," ",A.reUpload,a.jsx("input",{type:"file",accept:"image/*,application/pdf",className:"hidden",onChange:W})]})]}):a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("label",{htmlFor:"proof-upload-7",className:"cursor-pointer flex items-center gap-2 px-4 py-2 bg-background border border-border hover:border-primary text-foreground rounded-lg transition-all shadow-sm active:scale-95",children:[a.jsx(Dr,{size:16}),a.jsx("span",{className:"text-sm font-medium",children:A.uploadFile})]}),a.jsx("span",{className:"text-xs text-muted",children:A.uploadType})]})]}),a.jsxs("div",{className:"text-xs text-muted flex items-center gap-1.5 mt-1",children:[a.jsx(Ar,{size:10,className:"text-muted"}),A.safetyNotice]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:A.notes}),a.jsx("div",{className:"pl-2",children:a.jsx("textarea",{value:d.notes,onChange:L=>C("notes",L.target.value),placeholder:"e.g. ...",className:"w-full bg-background border border-border rounded-lg px-4 py-3 text-foreground outline-none focus:ring-2 focus:ring-primary/50 min-h-[100px] resize-y"})})]})]})]}),f&&a.jsx(GA,{onClose:()=>g(!1),onSelect:M,defaultSearch:R}),x&&a.jsx(KO,{isOpen:x,onClose:()=>y(!1),courses:t,onAdd:F,searchQuery:v,setSearchQuery:S,T:A}),ne&&a.jsx(zO,{candidate:ne,onConfirm:Pe,onCancel:()=>ee(null),T:A}),O&&a.jsx(K,{onCancel:()=>X(!1),onManualAdd:()=>{X(!1),S(""),y(!0)},T:A}),me&&a.jsx(ke,{isOpen:!!me,onClose:()=>Ee(null),onConfirm:Be,T:A})]})},YO=({candidate:r,onConfirm:e,onCancel:t,T:s})=>(k.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),$t.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-md shadow-2xl p-6 flex flex-col gap-4 animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[a.jsx("div",{className:"mx-auto w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center text-primary mb-2",children:a.jsx(vt,{size:24,strokeWidth:3})}),a.jsx("h3",{className:"text-xl font-bold",children:s.perfectMatchFound}),a.jsx("p",{className:"text-muted text-sm",children:s.matchConfirmText})]}),a.jsxs("div",{className:"bg-surface/50 p-4 rounded-lg flex flex-col gap-2 border border-border",children:[a.jsx("div",{className:"font-bold text-center text-lg",children:r.match.name}),a.jsxs("div",{className:"flex justify-center gap-4 text-xs text-muted",children:[a.jsxs("span",{children:[r.match.credits," cr"]}),a.jsx("span",{children:""}),a.jsx("span",{children:r.match.teacher})]}),a.jsx("div",{className:"text-center text-xs text-muted/80",children:r.match.department})]}),a.jsxs("div",{className:"flex gap-3 mt-2",children:[a.jsx("button",{onClick:t,className:"flex-1 py-2.5 px-4 rounded-lg border border-border hover:bg-surface font-medium transition-colors",children:"Cancel"}),a.jsx("button",{onClick:e,className:"flex-1 py-2.5 px-4 rounded-lg bg-primary hover:bg-primary/90 text-white font-bold transition-colors shadow-lg shadow-primary/20",children:"Confirm Sync"})]})]})}),document.body)),$O=({isOpen:r,onClose:e,courses:t,onAdd:s,searchQuery:A,setSearchQuery:l,T:d})=>{if(!r)return null;const u=t.filter(f=>f.name.toLowerCase().includes(A.toLowerCase())||f.id.toLowerCase().includes(A.toLowerCase())||f.userLabels&&f.userLabels.some(g=>g.toLowerCase().includes(A.toLowerCase()))||f.originalTags&&f.originalTags.some(g=>g.toLowerCase().includes(A.toLowerCase())));return k.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),$t.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-lg shadow-2xl max-h-[85vh] flex flex-col animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-4 border-b border-border flex justify-between items-center",children:[a.jsx("h3",{className:"font-bold text-lg",children:d.trackerTitle}),a.jsx("button",{onClick:e,children:a.jsx(ut,{size:20})})]}),a.jsx("div",{className:"p-4 border-b border-border",children:a.jsx("input",{type:"text",placeholder:"Search...",value:A,onChange:f=>l(f.target.value),autoFocus:!0,className:"w-full bg-background border border-border rounded-lg px-3 py-2 outline-none focus:ring-2 focus:ring-primary/50"})}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-2",children:[u.map(f=>a.jsxs("button",{onClick:()=>s(f),className:"w-full text-left p-3 rounded-lg hover:bg-surface/50 border border-transparent hover:border-border transition-all group flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("span",{className:"font-bold",children:f.name})}),a.jsxs("div",{className:"text-xs text-muted flex items-center gap-1",children:[a.jsxs("span",{className:"font-medium text-foreground/80",children:[f.credits," cr"]}),a.jsx("span",{children:""}),[f.teacher||(f.id&&f.id.length<20?f.id:"Custom Course"),f.department].filter(Boolean).join("  ")]})]}),a.jsx("div",{className:"p-2 bg-primary/10 text-primary rounded-full opacity-0 group-hover:opacity-100 transition-all",children:a.jsx(Xr,{size:16})})]},f.id)),u.length===0&&a.jsx("div",{className:"text-center p-8 text-muted",children:"No courses found"})]})]})}),document.body)},Op={department:"",minTotalCredits:"",minCoreCredits:"",targetYear:"",status:"in_progress",courses:[],proofFileName:"",notes:"",coursePlanUrl:"",coursePlanFileName:""},Pp="nsysu-diverse-learning-data",XO={en:{referenceProcess:"Reference Process",step1:"Program Introduction",step1_sub1:"Go to About -> Find [Integrated Program] -> Check Rules",step1_sub2:"Scroll down to 'Integrated Program Introduction' to find your program",step1_sub3_pre:"Click ",step1_sub3_link:"'Course Plan'",step1_sub4:"Check 'Core Courses', 'Electives', and 'Credit Requirements'",step2:"Add your planned/completed courses to the list below",step2_sub1:"Fill in Basic Info",step3:"ClearGrad tracks your progress in real-time",basicInfo:"Basic Info",doubleMajorDept:"Program Name",selectDept:"Select Program...",applicableYear:"Applicable Year",selectYear:"Select Year...",minTotalCredits:"Minimum Total Credits",minCoreCredits:"Core Course Required Credits",totalProgress:"Total Credits Progress",externalCreditsCheck:"At least 6 credits from courses outside your Major, Minor, and Double Major departments",externalCreditsProgress:"External Credits: ",coursePlanInput:"Course Plan / Regulations",addFromTracker:"Add from Tracker",addFromCatalog:"Add from Catalog",trackerTitle:"Select from Tracker",syncBtn:"Sync",matchCourse:"Match/Sync",matchConfirmTitle:"Confirm Course Match",matchConfirmText:"We found a matching course in your tracker. Do you want to sync data from this course?",perfectMatchFound:"Perfect Match Found!",noMatchFound:"No exact match found in your tracker.",noMatchTitle:"No Match Found",noMatchDesc:"We couldn't find an exact match for this course in your tracker.",manualAdd:"Manual Add",cancel:"Cancel",confirm:"Confirm",deleteConfirmTitle:"Delete Course?",deleteConfirmText:"Are you sure you want to remove this course from your list? This action cannot be undone.",selectCourse:"Select Course",fromTracker:"From Tracker",uploadPlan:"Upload File",pasteLink:"Paste Link...",viewPlan:"View Plan",designated:"Required Courses",coreCourses:"Core Courses",attachments:"Attachments",completedCourses:"Completed Courses",plannedCourses:"Planned Courses",badgeCompleted:"Completed",badgePlanned:"Planned",addCourse:"Add Course",elective:"Elective Courses",minCredits:"Min Credits:",sectionComplete:"Section Complete!",courseName:"Course Name",typeToAdd:"Type to add course...",credit:"Credit",pleaseFill:'Please fill in "Min Credits" to track progress.',pleaseFillTotal:'Please fill in "Minimum Total Credits" to track progress.',officialRegulations:"Reference",status:"Status",statusPlanned:"Planned",statusInProgress:"In Progress",statusPending:"Pending Approval",statusCompleted:"Approved",creditWarning:"Completion of credit requirements does not imply official approval.",proofSection:"Approval / Proof (optional)",proofStatus:"Status:",notSubmitted:"Not Submitted",submitted:"Submitted",approved:"Approved",uploadOrLink:"Upload or Paste Link:",uploadType:"Approval Letter / System Screenshot",notes:"Notes (Optional)",viewFile:"View Attached File",uploadFile:"Upload File",safetyNotice:"Files are stored locally in your browser and are not uploaded to any server.",confirmRemove:"Are you sure you want to remove this file?",storedOnOriginalDevice:"Stored on original upload device",reUpload:"Re-upload"},zh:{referenceProcess:"",step1:"",step1_sub1:" ",step1_sub2:"",step1_sub3_pre:"",step1_sub3_link:"",step1_sub4:"",step2:"",step2_sub1:"",step3:"ClearGrad ",basicInfo:"",doubleMajorDept:"",selectDept:"...",applicableYear:"",selectYear:"...",minTotalCredits:"",minCoreCredits:"",totalProgress:"",externalCreditsCheck:" 6 ",externalCreditsProgress:"",coursePlanInput:" / ",addFromTracker:"",addFromCatalog:"",trackerTitle:"",syncBtn:"",matchCourse:"/",matchConfirmTitle:"",matchConfirmText:"",perfectMatchFound:"",noMatchFound:"",noMatchTitle:"",noMatchDesc:"",manualAdd:"",cancel:"",confirm:"",deleteConfirmTitle:"",deleteConfirmText:"",selectCourse:"",fromTracker:"",uploadPlan:"",pasteLink:"...",viewPlan:"",attachments:"",designated:"",coreCourses:"",completedCourses:"",plannedCourses:"",badgeCompleted:"",badgePlanned:"",addCourse:"",elective:"",minCredits:"",sectionComplete:"",courseName:"",typeToAdd:"...",credit:"",pleaseFill:"",pleaseFillTotal:"",officialRegulations:"",status:"",statusPlanned:"",statusInProgress:"",statusPending:"",statusCompleted:"",creditWarning:"",proofSection:"",proofStatus:"",notSubmitted:"",submitted:"",approved:"",uploadOrLink:"",uploadType:" / ",notes:"",viewFile:"",uploadFile:"",safetyNotice:"",confirmRemove:"",storedOnOriginalDevice:"",reUpload:""}},JO=({onStatusChange:r,userProfile:e,courses:t=[]})=>{const{language:s}=it(),A=XO[s==="zh"?"zh":"en"],{semesters:l}=da(),[d,u]=k.useState(()=>{const L=localStorage.getItem(Pp);if(L)try{const J=JSON.parse(L);if(!Array.isArray(J.courses)){const he=[];J.designatedRequired?.courses&&he.push(...J.designatedRequired.courses),J.electiveRequired?.courses&&he.push(...J.electiveRequired.courses),J.courses=he,J.courses.length===0&&(J.courses=Op.courses)}return J}catch(J){return console.error("Failed to parse saved data",J),Op}return Op}),[f,g]=k.useState(!1),[x,y]=k.useState(!1),[v,S]=k.useState(""),[R,j]=k.useState(""),[V,P]=k.useState(null),[G,q]=k.useState(null);k.useEffect(()=>{Aa("diverse_learning_8_proof").then(L=>{L&&P(L)}),Aa("diverse_learning_8_course_plan").then(L=>{L&&q(L)})},[]);const W=async L=>{if(L.target.files&&L.target.files[0]){const J=L.target.files[0];await Qn("diverse_learning_8_proof",J),P(J),C("proofFileName",J.name)}},te=async L=>{if(L.target.files&&L.target.files[0]){const J=L.target.files[0];await Qn("diverse_learning_8_course_plan",J),q(J),C("coursePlanFileName",J.name)}},z=async()=>{window.confirm(A.confirmRemove)&&(await oa("diverse_learning_8_proof"),P(null),C("proofFileName",""))},E=async()=>{window.confirm(A.confirmRemove)&&(await oa("diverse_learning_8_course_plan"),q(null),C("coursePlanFileName",""))};k.useEffect(()=>{const L=localStorage.getItem(Pp),J=JSON.stringify(d);L!==J&&localStorage.setItem(Pp,J)},[d]);const N=l.map(L=>{if(L.length===4){const J=L.substring(0,3),he=L.substring(3);return he==="3"?`${J}-Summer`:`${J}-${he}`}return L}),C=(L,J)=>{u(he=>({...he,[L]:J}))},D=(L,J,he)=>{u(ge=>{const Ke=[...ge.courses],ot=Ke.findIndex(Le=>Le.id===L);if(ot===-1)return ge;const Xe={...Ke[ot],[J]:he};return Ke[ot]=Xe,{...ge,courses:Ke}})},Q=(L="core")=>{u(J=>({...J,courses:[...J.courses,{id:FA(),name:"",credits:"",completed:!1,isAutoCreated:!1,category:L}]}))},T=L=>{u(J=>({...J,courses:J.courses.filter(he=>he.id!==L)}))},_=()=>{const L=d.courses.filter(he=>he.completed).reduce((he,ge)=>he+(parseFloat(ge.credits)||0),0),J=parseFloat(d.minTotalCredits)||0;return{total:L,target:J}},U=()=>{const L=d.courses.filter(he=>he.completed&&(he.category==="core"||!he.category)).reduce((he,ge)=>he+(parseFloat(ge.credits)||0),0),J=parseFloat(d.minCoreCredits)||0;return{total:L,target:J}},Y=()=>{const L=new Set;e?.major&&L.add(e.major);try{const ge=JSON.parse(localStorage.getItem("nsysu-interdisciplinary-minor-data")||"{}");ge.department&&L.add(ge.department)}catch(ge){console.error("Error reading minor data",ge)}try{const ge=JSON.parse(localStorage.getItem("nsysu-interdisciplinary-double-major-data")||"{}");ge.department&&L.add(ge.department)}catch(ge){console.error("Error reading double major data",ge)}return d.courses.filter(ge=>{if(!ge.completed)return!1;if(!ge.department)return!0;for(const Ke of Array.from(L))if(ge.department===Ke)return!1;return!0}).reduce((ge,Ke)=>ge+(parseFloat(Ke.credits)||0),0)};k.useEffect(()=>{if(!r)return;const L=_(),J=U(),he=Y(),ge=L.target>0&&L.total>=L.target,Ke=J.target>0?J.total>=J.target:!0,ot=he>=6;r(ge&&Ke&&ot)},[d,r,e]);const M=L=>{if(d.courses.some(ge=>ge.name===L.name&&ge.credits===L.credit.toString())){alert("This course is already in the list!");return}const he={id:FA(),name:L.name,credits:L.credit.toString(),completed:!1,isAutoCreated:!1,category:Ae.current,department:L.department,fromCatalog:!0};u(ge=>({...ge,courses:[...ge.courses,he]})),g(!1)},F=L=>{if(d.courses.some(ge=>ge.name===L.name&&ge.credits===L.credits.toString())){alert("This course is already in the list!");return}const he={id:FA(),name:L.name,credits:L.credits.toString(),completed:!0,isAutoCreated:!1,category:Ae.current,department:L.department,fromCatalog:!0};u(ge=>({...ge,courses:[...ge.courses,he]})),y(!1)},K=({onCancel:L,onManualAdd:J,T:he})=>(k.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),$t.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-sm shadow-2xl p-6 flex flex-col gap-4 animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[a.jsx("div",{className:"mx-auto w-12 h-12 bg-orange-500/10 rounded-full flex items-center justify-center text-orange-500 mb-2",children:a.jsx(Ar,{size:24,strokeWidth:3})}),a.jsx("h3",{className:"text-xl font-bold",children:he.noMatchTitle}),a.jsx("p",{className:"text-muted text-sm text-center",children:he.noMatchDesc})]}),a.jsxs("div",{className:"flex gap-3 mt-2",children:[a.jsx("button",{onClick:L,className:"flex-1 py-2.5 px-4 rounded-lg border border-border hover:bg-surface font-medium transition-colors",children:he.cancel}),a.jsx("button",{onClick:J,className:"flex-1 py-2.5 px-4 rounded-lg bg-primary hover:bg-primary/90 text-white font-bold transition-colors shadow-lg shadow-primary/20",children:he.manualAdd})]})]})}),document.body)),[ne,ee]=k.useState(null),[O,X]=k.useState(!1),Ae=k.useRef("core"),[me,Ee]=k.useState(null),Be=()=>{me&&(T(me.id),Ee(null))},ke=({isOpen:L,onClose:J,onConfirm:he,T:ge})=>(k.useEffect(()=>(L&&(document.body.style.overflow="hidden"),()=>{document.body.style.overflow="auto"}),[L]),L?$t.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-sm shadow-2xl p-6 flex flex-col gap-4 animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[a.jsx("div",{className:"mx-auto w-12 h-12 bg-destructive/10 rounded-full flex items-center justify-center text-destructive mb-2",children:a.jsx(Ar,{size:24,strokeWidth:3})}),a.jsx("h3",{className:"text-xl font-bold",children:ge.deleteConfirmTitle}),a.jsx("p",{className:"text-muted text-sm text-center",children:ge.deleteConfirmText})]}),a.jsxs("div",{className:"flex gap-3 mt-2",children:[a.jsx("button",{onClick:J,className:"flex-1 py-2.5 px-4 rounded-lg border border-border hover:bg-surface font-medium transition-colors",children:ge.cancel}),a.jsx("button",{onClick:he,className:"flex-1 py-2.5 px-4 rounded-lg bg-red-500 hover:bg-red-600 text-white font-bold transition-colors shadow-lg shadow-red-500/20",children:ge.confirm})]})]})}),document.body):null),Pe=()=>{if(!ne)return;const{item:L,match:J}=ne;D(L.id,"completed",!0),D(L.id,"credits",J.credits.toString()),D(L.id,"department",J.department),D(L.id,"fromCatalog",!0),ee(null)},Ve=L=>{const J=t.find(he=>he.id===L.id||he.name===L.name&&he.credits.toString()===L.credits);J?ee({item:L,match:J}):X(!0)},wt=({item:L})=>a.jsxs("div",{className:"group relative bg-surface hover:bg-surface/80 transition-all p-3 rounded-lg border border-border shadow-sm flex flex-col gap-2",children:[a.jsxs("div",{className:"flex justify-between items-start gap-2",children:[a.jsx("input",{type:"text",value:L.name,disabled:L.fromCatalog,placeholder:A.courseName,onChange:J=>D(L.id,"name",J.target.value),className:`bg-transparent border-none text-sm font-semibold text-foreground placeholder-muted w-full focus:outline-none focus:ring-1 focus:ring-primary/50 rounded px-1 -ml-1 ${L.fromCatalog?"opacity-80 cursor-not-allowed":""}`}),a.jsx("button",{onClick:()=>Ee(L),className:"text-muted hover:text-destructive p-1 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(Un,{size:14})})]}),a.jsxs("div",{className:"flex justify-between items-end",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("input",{type:"text",value:L.credits,disabled:L.fromCatalog,placeholder:"0",onChange:J=>/^\d*\.?\d*$/.test(J.target.value)&&D(L.id,"credits",J.target.value),className:`w-8 bg-transparent text-xs font-bold text-center border-b border-border focus:border-primary outline-none ${L.fromCatalog?"opacity-80 cursor-not-allowed border-transparent":""}`}),a.jsx("span",{className:"text-[10px] text-muted",children:A.credit})]}),a.jsxs("div",{className:"flex gap-1",children:[!L.completed&&a.jsxs("button",{onClick:()=>Ve(L),className:"text-[10px] px-2 py-1 rounded bg-surface border border-border hover:bg-surface/80 flex items-center gap-1",title:A.matchCourse,children:[a.jsx(Or,{size:10})," ",A.syncBtn]}),a.jsx("div",{className:`text-[10px] px-2 py-1 rounded-full font-bold border transition-colors select-none ${L.completed?"bg-emerald-500/10 text-emerald-500 border-emerald-500/20":"bg-blue-500/10 text-blue-500 border-blue-500/20"}`,children:L.completed?A.badgeCompleted:A.badgePlanned})]})]})]}),Xt=({title:L,category:J})=>{const he=d.courses.filter(Se=>J==="core"?Se.category==="core"||!Se.category:Se.category==="elective"),ge=he.filter(Se=>Se.completed),Ke=he.filter(Se=>!Se.completed),ot=J==="elective"?"text-orange-500":"text-primary",Xe=J==="elective"?"bg-orange-500 hover:bg-orange-600":"bg-primary hover:bg-primary/90",Le=J==="elective"?"bg-orange-400":"bg-emerald-500";return a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:`text-lg font-bold flex items-center gap-2 ${ot}`,children:L}),a.jsxs("div",{className:"flex gap-2",children:[J==="core"&&null,a.jsxs("button",{onClick:()=>Q(J),className:`flex items-center gap-1.5 px-3 py-1.5 text-white text-xs font-medium rounded-lg transition-colors ${Xe}`,children:[a.jsx(Xr,{size:14}),A.addCourse]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between pb-2 border-b border-border",children:[a.jsxs("h4",{className:"font-bold text-foreground text-sm flex items-center gap-2",children:[a.jsx("span",{className:`w-2 h-2 rounded-full ${Le}`}),A.completedCourses]}),a.jsxs("div",{className:"flex gap-2 items-center",children:[a.jsxs("button",{onClick:()=>{let Se=d.department;const Pt=Se.match(/(.+?)(?=\()/);Pt&&(Se=Pt[1]),S(Se),Ae.current=J,y(!0)},className:"text-[10px] text-primary hover:underline flex items-center gap-1",children:[a.jsx(rr,{size:10})," ",A.addFromTracker]}),a.jsxs("span",{className:"text-xs text-muted",children:[ge.length," items"]})]})]}),a.jsxs("div",{className:"space-y-2 min-h-[100px]",children:[ge.map(Se=>a.jsx(wt,{item:Se},Se.id)),ge.length===0&&a.jsx("div",{className:"text-center text-muted text-xs py-8 border border-dashed border-border rounded-lg",children:"No completed courses"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between pb-2 border-b border-border",children:[a.jsxs("h4",{className:"font-bold text-foreground text-sm flex items-center gap-2",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"}),A.plannedCourses]}),a.jsxs("div",{className:"flex gap-2 items-center",children:[a.jsxs("button",{onClick:()=>{let Se=d.department;const Pt=Se.match(/(.+?)(?=\()/);Pt&&(Se=Pt[1]),j(Se),Ae.current=J,g(!0)},className:"text-[10px] text-blue-500 hover:underline flex items-center gap-1",children:[a.jsx(rr,{size:10})," ",A.addFromCatalog]}),a.jsxs("span",{className:"text-xs text-muted",children:[Ke.length," items"]})]})]}),a.jsxs("div",{className:"space-y-2 min-h-[100px]",children:[Ke.map(Se=>a.jsx(wt,{item:Se},Se.id)),Ke.length===0&&a.jsx("div",{className:"text-center text-muted text-xs py-8 border border-dashed border-border rounded-lg",children:"No planned courses"})]})]})]})]})},ue=_();return a.jsxs("div",{className:"space-y-8 max-w-3xl mx-auto animate-in fade-in zoom-in-95 duration-300 pb-20",children:[a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary flex items-center gap-2",children:[a.jsx(rr,{size:20}),A.referenceProcess]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"pt-0.5",children:a.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-xs font-bold text-primary",children:"1"})}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("div",{className:"flex items-center gap-2 font-medium text-foreground",children:a.jsxs("a",{href:"https://ctdr.nsysu.edu.tw/class2.php",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-primary hover:underline underline-offset-4",children:[A.step1,a.jsx(Or,{size:14})]})}),a.jsxs("ul",{className:"text-sm text-muted list-disc list-inside space-y-0.5 pl-1",children:[a.jsx("li",{children:A.step1_sub1}),a.jsx("li",{children:A.step1_sub2}),a.jsxs("li",{children:[A.step1_sub3_pre,a.jsx("span",{className:"underline decoration-primary/50 underline-offset-2",children:A.step1_sub3_link})]}),a.jsx("li",{children:A.step1_sub4})]})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"pt-0.5",children:a.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-xs font-bold text-primary",children:"2"})}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("div",{className:"font-medium text-foreground",children:A.step2}),a.jsx("ul",{className:"text-sm text-muted list-disc list-inside space-y-0.5 pl-1",children:a.jsx("li",{children:A.step2_sub1})})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"pt-0.5",children:a.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-xs font-bold text-primary",children:"3"})}),a.jsxs("div",{className:"font-medium text-foreground flex items-center gap-2",children:[A.step3,a.jsx(vt,{size:16,className:"text-primary"})]})]})]})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary flex items-center gap-2",children:[a.jsx(rr,{size:20}),A.basicInfo]}),a.jsxs("a",{href:"https://oaa.nsysu.edu.tw/static/file/3/1003/attach/20/pta_232069_5443563_94211.pdf",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 px-3 py-1.5 bg-primary/10 hover:bg-primary/20 text-primary text-xs font-medium rounded-lg transition-colors",children:[A.officialRegulations,a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),a.jsx("polyline",{points:"15 3 21 3 21 9"}),a.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:A.doubleMajorDept}),a.jsxs("select",{value:d.department,onChange:L=>C("department",L.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50",children:[a.jsx("option",{value:"",children:A.selectDept}),a.jsx("optgroup",{label:" (Integrated Programs)",children:OO.map(L=>a.jsx("option",{value:L,children:L},L))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:A.applicableYear}),a.jsxs("select",{value:d.targetYear,onChange:L=>C("targetYear",L.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50",children:[a.jsx("option",{value:"",children:A.selectYear}),N.map(L=>a.jsx("option",{value:L,children:L},L))]})]}),a.jsxs("div",{className:"md:col-span-2 grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:A.minTotalCredits}),a.jsx("input",{type:"text",value:d.minTotalCredits,onChange:L=>/^\d*$/.test(L.target.value)&&C("minTotalCredits",L.target.value),placeholder:"e.g. 15",className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:A.minCoreCredits}),a.jsx("input",{type:"text",value:d.minCoreCredits||"",onChange:L=>/^\d*$/.test(L.target.value)&&C("minCoreCredits",L.target.value),placeholder:"e.g. 9",className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50"})]})]}),a.jsxs("div",{className:"md:col-span-2 pt-2 border-t border-border/50",children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-2",children:A.coursePlanInput}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("input",{type:"text",value:d.coursePlanUrl||"",onChange:L=>C("coursePlanUrl",L.target.value),placeholder:A.pasteLink,className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground text-sm outline-none focus:ring-2 focus:ring-primary/50"}),d.coursePlanUrl&&a.jsxs("a",{href:d.coursePlanUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-primary hover:underline mt-1 flex items-center gap-1",children:[a.jsx(Or,{size:10}),A.viewPlan]})]}),a.jsxs("div",{children:[a.jsx("input",{type:"file",id:"course-plan-upload",className:"hidden",accept:"image/*,.pdf",onChange:te}),G?a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-primary/5 border border-primary/20 rounded-lg",children:[a.jsx("div",{className:"p-1.5 bg-primary/10 rounded-full text-primary",children:a.jsx(fs,{size:14})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsx("div",{className:"text-sm font-medium text-foreground truncate",children:G.name})}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>{const L=URL.createObjectURL(G);window.open(L,"_blank")},className:"p-1 text-primary hover:bg-primary/10 rounded transition-colors",title:A.viewFile,children:a.jsx(Or,{size:14})}),a.jsx("button",{onClick:E,className:"p-1 text-muted hover:text-destructive hover:bg-destructive/10 rounded transition-colors",children:a.jsx(ut,{size:14})})]})]}):a.jsxs("label",{htmlFor:"course-plan-upload",className:"cursor-pointer flex items-center justify-center gap-2 px-4 py-2 bg-background border border-border hover:border-primary text-foreground rounded-lg transition-all shadow-sm active:scale-95 text-sm",children:[a.jsx(Dr,{size:14}),A.uploadPlan]})]})]})]})]})]}),a.jsxs("div",{className:"bg-surface/50 p-4 rounded-xl border border-border",children:[ue.target>0?a.jsxs(a.Fragment,{children:[a.jsx(mr,{label:A.totalProgress,current:ue.total,total:ue.target,color:"bg-primary",variant:"l"}),a.jsx("div",{className:"flex justify-end mt-1",children:a.jsxs("span",{className:"text-xs text-muted flex items-center gap-1",children:[a.jsx(Ar,{size:12}),A.creditWarning]})})]}):a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("span",{className:"font-medium text-foreground text-lg mb-1",children:A.totalProgress}),a.jsxs("div",{className:"text-sm text-orange-500 font-medium flex items-center gap-2 bg-orange-500/10 p-2 rounded",children:[a.jsx("span",{className:"text-lg",children:"!"})," ",A.pleaseFillTotal]})]}),U().target>0&&a.jsx("div",{className:"mt-4 pt-4 border-t border-border/50",children:a.jsx(mr,{label:A.minCoreCredits,current:U().total,total:U().target,color:"bg-emerald-500",variant:"l"})})]}),a.jsxs("div",{className:"bg-surface/50 p-4 rounded-xl border border-border flex items-center gap-4",children:[a.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center border transition-colors ${Y()>=6?"bg-emerald-500 border-emerald-500 text-white":"border-muted text-transparent"}`,children:a.jsx(vt,{size:16,strokeWidth:3})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-sm font-medium text-foreground",children:A.externalCreditsCheck}),a.jsxs("div",{className:"text-xs text-muted mt-0.5",children:[A.externalCreditsProgress,a.jsx("span",{className:Y()>=6?"text-emerald-500 font-bold":"text-foreground",children:Y()})," / 6"]})]})]}),a.jsx(Xt,{title:A.coreCourses,category:"core"}),a.jsx(Xt,{title:A.elective,category:"elective"}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary border-b border-border/50 pb-2 flex items-center gap-2",children:[a.jsx(Dr,{size:20}),A.attachments," & ",A.notes]}),a.jsxs("div",{className:"flex flex-col gap-8",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:A.uploadOrLink}),a.jsxs("div",{className:"space-y-3 pl-2",children:[a.jsxs("div",{children:[a.jsx("input",{type:"file",id:"proof-upload-7",className:"hidden",accept:"image/*,.pdf",onChange:W}),V?a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-primary/5 border border-primary/20 rounded-lg animate-in fade-in slide-in-from-left-2",children:[a.jsx("div",{className:"p-2 bg-primary/10 rounded-full text-primary",children:a.jsx(fs,{size:18})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm font-medium text-foreground truncate max-w-[200px]",children:V.name}),a.jsxs("div",{className:"text-xs text-muted",children:[(V.size/1024).toFixed(1)," KB"]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>{const L=URL.createObjectURL(V);window.open(L,"_blank")},className:"p-1.5 text-primary hover:bg-primary/10 rounded-md transition-colors",title:A.viewFile,children:a.jsx(Or,{size:16})}),a.jsx("button",{onClick:z,className:"p-1.5 text-muted hover:text-destructive hover:bg-destructive/10 rounded-md transition-colors",children:a.jsx(ut,{size:16})})]})]}):d.proofFileName?a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 bg-surface/50 border border-dashed border-border rounded-lg p-3 max-w-md animate-in fade-in slide-in-from-left-2",children:[a.jsxs("div",{className:"flex items-center gap-3 opacity-70 overflow-hidden",children:[a.jsx(fs,{className:"text-muted flex-shrink-0",size:20}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:d.proofFileName}),a.jsx("p",{className:"text-xs text-muted truncate",children:A.storedOnOriginalDevice})]})]}),a.jsxs("label",{className:"cursor-pointer p-1.5 hover:bg-white/10 rounded-md text-primary transition-colors text-xs flex items-center gap-1 flex-shrink-0 self-start sm:self-auto border border-primary/20 bg-primary/5",children:[a.jsx(Dr,{size:14})," ",A.reUpload,a.jsx("input",{type:"file",accept:"image/*,application/pdf",className:"hidden",onChange:W})]})]}):a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("label",{htmlFor:"proof-upload-7",className:"cursor-pointer flex items-center gap-2 px-4 py-2 bg-background border border-border hover:border-primary text-foreground rounded-lg transition-all shadow-sm active:scale-95",children:[a.jsx(Dr,{size:16}),a.jsx("span",{className:"text-sm font-medium",children:A.uploadFile})]}),a.jsx("span",{className:"text-xs text-muted",children:A.uploadType})]})]}),a.jsxs("div",{className:"text-xs text-muted flex items-center gap-1.5 mt-1",children:[a.jsx(Ar,{size:10,className:"text-muted"}),A.safetyNotice]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:A.notes}),a.jsx("div",{className:"pl-2",children:a.jsx("textarea",{value:d.notes,onChange:L=>C("notes",L.target.value),placeholder:"e.g. ...",className:"w-full bg-background border border-border rounded-lg px-4 py-3 text-foreground outline-none focus:ring-2 focus:ring-primary/50 min-h-[100px] resize-y"})})]})]})]}),f&&a.jsx(GA,{onClose:()=>g(!1),onSelect:M,defaultSearch:R}),x&&a.jsx($O,{isOpen:x,onClose:()=>y(!1),courses:t,onAdd:F,searchQuery:v,setSearchQuery:S,T:A}),ne&&a.jsx(YO,{candidate:ne,onConfirm:Pe,onCancel:()=>ee(null),T:A}),O&&a.jsx(K,{onCancel:()=>X(!1),onManualAdd:()=>{X(!1),S(""),y(!0)},T:A}),me&&a.jsx(ke,{isOpen:!!me,onClose:()=>Ee(null),onConfirm:Be,T:A})]})},WO=({candidate:r,onConfirm:e,onCancel:t,T:s})=>(k.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),$t.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-md shadow-2xl p-6 flex flex-col gap-4 animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[a.jsx("div",{className:"mx-auto w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center text-primary mb-2",children:a.jsx(vt,{size:24,strokeWidth:3})}),a.jsx("h3",{className:"text-xl font-bold",children:s.perfectMatchFound}),a.jsx("p",{className:"text-muted text-sm",children:s.matchConfirmText})]}),a.jsxs("div",{className:"bg-surface/50 p-4 rounded-lg flex flex-col gap-2 border border-border",children:[a.jsx("div",{className:"font-bold text-center text-lg",children:r.match.name}),a.jsxs("div",{className:"flex justify-center gap-4 text-xs text-muted",children:[a.jsxs("span",{children:[r.match.credits," cr"]}),a.jsx("span",{children:""}),a.jsx("span",{children:r.match.teacher})]}),a.jsx("div",{className:"text-center text-xs text-muted/80",children:r.match.department})]}),a.jsxs("div",{className:"flex gap-3 mt-2",children:[a.jsx("button",{onClick:t,className:"flex-1 py-2.5 px-4 rounded-lg border border-border hover:bg-surface font-medium transition-colors",children:"Cancel"}),a.jsx("button",{onClick:e,className:"flex-1 py-2.5 px-4 rounded-lg bg-primary hover:bg-primary/90 text-white font-bold transition-colors shadow-lg shadow-primary/20",children:"Confirm Sync"})]})]})}),document.body)),ZO=({isOpen:r,onClose:e,courses:t,onAdd:s,searchQuery:A,setSearchQuery:l,T:d})=>{if(!r)return null;const u=t.filter(f=>f.name.toLowerCase().includes(A.toLowerCase())||f.id.toLowerCase().includes(A.toLowerCase())||f.userLabels&&f.userLabels.some(g=>g.toLowerCase().includes(A.toLowerCase()))||f.originalTags&&f.originalTags.some(g=>g.toLowerCase().includes(A.toLowerCase())));return k.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),$t.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-lg shadow-2xl max-h-[85vh] flex flex-col animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-4 border-b border-border flex justify-between items-center",children:[a.jsx("h3",{className:"font-bold text-lg",children:d.trackerTitle}),a.jsx("button",{onClick:e,children:a.jsx(ut,{size:20})})]}),a.jsx("div",{className:"p-4 border-b border-border",children:a.jsx("input",{type:"text",placeholder:"Search...",value:A,onChange:f=>l(f.target.value),autoFocus:!0,className:"w-full bg-background border border-border rounded-lg px-3 py-2 outline-none focus:ring-2 focus:ring-primary/50"})}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-2",children:[u.map(f=>a.jsxs("button",{onClick:()=>s(f),className:"w-full text-left p-3 rounded-lg hover:bg-surface/50 border border-transparent hover:border-border transition-all group flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("span",{className:"font-bold",children:f.name})}),a.jsxs("div",{className:"text-xs text-muted flex items-center gap-1",children:[a.jsxs("span",{className:"font-medium text-foreground/80",children:[f.credits," cr"]}),a.jsx("span",{children:""}),[f.teacher||(f.id&&f.id.length<20?f.id:"Custom Course"),f.department].filter(Boolean).join("  ")]})]}),a.jsx("div",{className:"p-2 bg-primary/10 text-primary rounded-full opacity-0 group-hover:opacity-100 transition-all",children:a.jsx(Xr,{size:16})})]},f.id)),u.length===0&&a.jsx("div",{className:"text-center p-8 text-muted",children:"No courses found"})]})]})}),document.body)},Vp={department:"",minTotalCredits:"",minCoreCredits:"",targetYear:"",status:"in_progress",courses:[],proofFileName:"",notes:"",coursePlanUrl:"",coursePlanFileName:""},zp="nsysu-interdisciplinary-course-9-data",e6={en:{referenceProcess:"Reference Process",step1:"Program Introduction",step1_sub1:"Go to About -> Find [Departmental Professional Program] -> Check Rules",step1_sub2:"Scroll down to 'Departmental Professional Program Introduction' to find your program",step1_sub3_pre:"Click ",step1_sub3_link:"'Course Plan'",step1_sub4:"Check 'Professional Module Courses', 'Interdisciplinary Electives', and 'Credit Requirements'",step2:"Add your planned/completed courses to the list below",step2_sub1:"Fill in Basic Info",step3:"ClearGrad tracks your progress in real-time",basicInfo:"Basic Info",doubleMajorDept:"Program Name",selectDept:"Select Program...",applicableYear:"Applicable Year",selectYear:"Select Year...",minTotalCredits:"Minimum Total Credits",minCoreCredits:"Professional Module Course Required Credits",totalProgress:"Total Credits Progress",externalCreditsCheck:"At least 6 credits from courses outside your Major, Minor, and Double Major departments",externalCreditsProgress:"External Credits: ",coursePlanInput:"Course Plan / Regulations",addFromTracker:"Add from Tracker",addFromCatalog:"Add from Catalog",trackerTitle:"Select from Tracker",syncBtn:"Sync",matchCourse:"Match/Sync",matchConfirmTitle:"Confirm Course Match",matchConfirmText:"We found a matching course in your tracker. Do you want to sync data from this course?",perfectMatchFound:"Perfect Match Found!",noMatchFound:"No exact match found in your tracker.",noMatchTitle:"No Match Found",noMatchDesc:"We couldn't find an exact match for this course in your tracker.",manualAdd:"Manual Add",cancel:"Cancel",confirm:"Confirm",deleteConfirmTitle:"Delete Course?",deleteConfirmText:"Are you sure you want to remove this course from your list? This action cannot be undone.",selectCourse:"Select Course",fromTracker:"From Tracker",uploadPlan:"Upload File",pasteLink:"Paste Link...",viewPlan:"View Plan",designated:"Required Courses",coreCourses:"Professional Module Courses",attachments:"Attachments",completedCourses:"Completed Courses",plannedCourses:"Planned Courses",badgeCompleted:"Completed",badgePlanned:"Planned",addCourse:"Add Course",elective:"Interdisciplinary Electives",minCredits:"Min Credits:",sectionComplete:"Section Complete!",courseName:"Course Name",typeToAdd:"Type to add course...",credit:"Credit",pleaseFill:'Please fill in "Min Credits" to track progress.',pleaseFillTotal:'Please fill in "Minimum Total Credits" to track progress.',officialRegulations:"Reference",status:"Status",statusPlanned:"Planned",statusInProgress:"In Progress",statusPending:"Pending Approval",statusCompleted:"Approved",creditWarning:"Completion of credit requirements does not imply official approval.",proofSection:"Approval / Proof (optional)",proofStatus:"Status:",notSubmitted:"Not Submitted",submitted:"Submitted",approved:"Approved",uploadOrLink:"Upload or Paste Link:",uploadType:"Approval Letter / System Screenshot",notes:"Notes (Optional)",viewFile:"View Attached File",uploadFile:"Upload File",safetyNotice:"Files are stored locally in your browser and are not uploaded to any server.",confirmRemove:"Are you sure you want to remove this file?",storedOnOriginalDevice:"Stored on original upload device",reUpload:"Re-upload"},zh:{referenceProcess:"",step1:"",step1_sub1:" ()",step1_sub2:"",step1_sub3_pre:"",step1_sub3_link:"",step1_sub4:"()",step2:"",step2_sub1:"",step3:"ClearGrad ",basicInfo:"",doubleMajorDept:"",selectDept:"...",applicableYear:"",selectYear:"...",minTotalCredits:"",minCoreCredits:"",totalProgress:"",externalCreditsCheck:" 6 ",externalCreditsProgress:"",coursePlanInput:" / ",addFromTracker:"",addFromCatalog:"",trackerTitle:"",syncBtn:"",matchCourse:"/",matchConfirmTitle:"",matchConfirmText:"",perfectMatchFound:"",noMatchFound:"",noMatchTitle:"",noMatchDesc:"",manualAdd:"",cancel:"",confirm:"",deleteConfirmTitle:"",deleteConfirmText:"",selectCourse:"",fromTracker:"",uploadPlan:"",pasteLink:"...",viewPlan:"",attachments:"",designated:"",coreCourses:"",completedCourses:"",plannedCourses:"",badgeCompleted:"",badgePlanned:"",addCourse:"",elective:"",minCredits:"",sectionComplete:"",courseName:"",typeToAdd:"...",credit:"",pleaseFill:"",pleaseFillTotal:"",officialRegulations:"",status:"",statusPlanned:"",statusInProgress:"",statusPending:"",statusCompleted:"",creditWarning:"",proofSection:"",proofStatus:"",notSubmitted:"",submitted:"",approved:"",uploadOrLink:"",uploadType:" / ",notes:"",viewFile:"",uploadFile:"",safetyNotice:"",confirmRemove:"",storedOnOriginalDevice:"",reUpload:""}},t6=({onStatusChange:r,userProfile:e,courses:t=[]})=>{const{language:s}=it(),A=e6[s==="zh"?"zh":"en"],{semesters:l}=da(),[d,u]=k.useState(()=>{const ue=localStorage.getItem(zp);if(ue)try{const L=JSON.parse(ue);if(!Array.isArray(L.courses)){const J=[];L.designatedRequired?.courses&&J.push(...L.designatedRequired.courses),L.electiveRequired?.courses&&J.push(...L.electiveRequired.courses),L.courses=J,L.courses.length===0&&(L.courses=Vp.courses)}return L}catch(L){return console.error("Failed to parse saved data",L),Vp}return Vp}),[f,g]=k.useState(!1),[x,y]=k.useState(!1),[v,S]=k.useState(""),[R,j]=k.useState(""),[V,P]=k.useState(null),[G,q]=k.useState(null);k.useEffect(()=>{Aa("interdisciplinary_course_9_proof").then(ue=>{ue&&P(ue)}),Aa("interdisciplinary_course_9_course_plan").then(ue=>{ue&&q(ue)})},[]);const W=async ue=>{if(ue.target.files&&ue.target.files[0]){const L=ue.target.files[0];await Qn("interdisciplinary_course_9_proof",L),P(L),C("proofFileName",L.name)}},te=async ue=>{if(ue.target.files&&ue.target.files[0]){const L=ue.target.files[0];await Qn("interdisciplinary_course_9_course_plan",L),q(L),C("coursePlanFileName",L.name)}},z=async()=>{window.confirm(A.confirmRemove)&&(await oa("interdisciplinary_course_9_proof"),P(null),C("proofFileName",""))},E=async()=>{window.confirm(A.confirmRemove)&&(await oa("interdisciplinary_course_9_course_plan"),q(null),C("coursePlanFileName",""))};k.useEffect(()=>{const ue=localStorage.getItem(zp),L=JSON.stringify(d);ue!==L&&localStorage.setItem(zp,L)},[d]);const N=l.map(ue=>{if(ue.length===4){const L=ue.substring(0,3),J=ue.substring(3);return J==="3"?`${L}-Summer`:`${L}-${J}`}return ue}),C=(ue,L)=>{u(J=>({...J,[ue]:L}))},D=(ue,L,J)=>{u(he=>{const ge=[...he.courses],Ke=ge.findIndex(Xe=>Xe.id===ue);if(Ke===-1)return he;const ot={...ge[Ke],[L]:J};return ge[Ke]=ot,{...he,courses:ge}})},Q=(ue="core")=>{u(L=>({...L,courses:[...L.courses,{id:FA(),name:"",credits:"",completed:!1,isAutoCreated:!1,category:ue}]}))},T=ue=>{u(L=>({...L,courses:L.courses.filter(J=>J.id!==ue)}))},_=()=>{const ue=d.courses.filter(J=>J.completed).reduce((J,he)=>J+(parseFloat(he.credits)||0),0),L=parseFloat(d.minTotalCredits)||0;return{total:ue,target:L}},U=()=>{const ue=d.courses.filter(J=>J.completed&&(J.category==="core"||!J.category)).reduce((J,he)=>J+(parseFloat(he.credits)||0),0),L=parseFloat(d.minCoreCredits)||0;return{total:ue,target:L}};k.useEffect(()=>{if(!r)return;const ue=_(),L=U(),J=ue.target>0&&ue.total>=ue.target,he=L.target>0?L.total>=L.target:!0;r(J&&he)},[d,r,e]);const Y=ue=>{if(d.courses.some(he=>he.name===ue.name&&he.credits===ue.credit.toString())){alert("This course is already in the list!");return}const J={id:FA(),name:ue.name,credits:ue.credit.toString(),completed:!1,isAutoCreated:!1,category:X.current,department:ue.department,fromCatalog:!0};u(he=>({...he,courses:[...he.courses,J]})),g(!1)},M=ue=>{if(d.courses.some(he=>he.name===ue.name&&he.credits===ue.credits.toString())){alert("This course is already in the list!");return}const J={id:FA(),name:ue.name,credits:ue.credits.toString(),completed:!0,isAutoCreated:!1,category:X.current,department:ue.department,fromCatalog:!0};u(he=>({...he,courses:[...he.courses,J]})),y(!1)},F=({onCancel:ue,onManualAdd:L,T:J})=>(k.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),$t.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-sm shadow-2xl p-6 flex flex-col gap-4 animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[a.jsx("div",{className:"mx-auto w-12 h-12 bg-orange-500/10 rounded-full flex items-center justify-center text-orange-500 mb-2",children:a.jsx(Ar,{size:24,strokeWidth:3})}),a.jsx("h3",{className:"text-xl font-bold",children:J.noMatchTitle}),a.jsx("p",{className:"text-muted text-sm text-center",children:J.noMatchDesc})]}),a.jsxs("div",{className:"flex gap-3 mt-2",children:[a.jsx("button",{onClick:ue,className:"flex-1 py-2.5 px-4 rounded-lg border border-border hover:bg-surface font-medium transition-colors",children:J.cancel}),a.jsx("button",{onClick:L,className:"flex-1 py-2.5 px-4 rounded-lg bg-primary hover:bg-primary/90 text-white font-bold transition-colors shadow-lg shadow-primary/20",children:J.manualAdd})]})]})}),document.body)),[K,ne]=k.useState(null),[ee,O]=k.useState(!1),X=k.useRef("core"),[Ae,me]=k.useState(null),Ee=()=>{Ae&&(T(Ae.id),me(null))},Be=({isOpen:ue,onClose:L,onConfirm:J,T:he})=>(k.useEffect(()=>(ue&&(document.body.style.overflow="hidden"),()=>{document.body.style.overflow="auto"}),[ue]),ue?$t.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-sm shadow-2xl p-6 flex flex-col gap-4 animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[a.jsx("div",{className:"mx-auto w-12 h-12 bg-destructive/10 rounded-full flex items-center justify-center text-destructive mb-2",children:a.jsx(Ar,{size:24,strokeWidth:3})}),a.jsx("h3",{className:"text-xl font-bold",children:he.deleteConfirmTitle}),a.jsx("p",{className:"text-muted text-sm text-center",children:he.deleteConfirmText})]}),a.jsxs("div",{className:"flex gap-3 mt-2",children:[a.jsx("button",{onClick:L,className:"flex-1 py-2.5 px-4 rounded-lg border border-border hover:bg-surface font-medium transition-colors",children:he.cancel}),a.jsx("button",{onClick:J,className:"flex-1 py-2.5 px-4 rounded-lg bg-red-500 hover:bg-red-600 text-white font-bold transition-colors shadow-lg shadow-red-500/20",children:he.confirm})]})]})}),document.body):null),ke=()=>{if(!K)return;const{item:ue,match:L}=K;D(ue.id,"completed",!0),D(ue.id,"credits",L.credits.toString()),D(ue.id,"department",L.department),D(ue.id,"fromCatalog",!0),ne(null)},Pe=ue=>{const L=t.find(J=>J.id===ue.id||J.name===ue.name&&J.credits.toString()===ue.credits);L?ne({item:ue,match:L}):O(!0)},Ve=({item:ue})=>a.jsxs("div",{className:"group relative bg-surface hover:bg-surface/80 transition-all p-3 rounded-lg border border-border shadow-sm flex flex-col gap-2",children:[a.jsxs("div",{className:"flex justify-between items-start gap-2",children:[a.jsx("input",{type:"text",value:ue.name,disabled:ue.fromCatalog,placeholder:A.courseName,onChange:L=>D(ue.id,"name",L.target.value),className:`bg-transparent border-none text-sm font-semibold text-foreground placeholder-muted w-full focus:outline-none focus:ring-1 focus:ring-primary/50 rounded px-1 -ml-1 ${ue.fromCatalog?"opacity-80 cursor-not-allowed":""}`}),a.jsx("button",{onClick:()=>me(ue),className:"text-muted hover:text-destructive p-1 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(Un,{size:14})})]}),a.jsxs("div",{className:"flex justify-between items-end",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("input",{type:"text",value:ue.credits,disabled:ue.fromCatalog,placeholder:"0",onChange:L=>/^\d*\.?\d*$/.test(L.target.value)&&D(ue.id,"credits",L.target.value),className:`w-8 bg-transparent text-xs font-bold text-center border-b border-border focus:border-primary outline-none ${ue.fromCatalog?"opacity-80 cursor-not-allowed border-transparent":""}`}),a.jsx("span",{className:"text-[10px] text-muted",children:A.credit})]}),a.jsxs("div",{className:"flex gap-1",children:[!ue.completed&&a.jsxs("button",{onClick:()=>Pe(ue),className:"text-[10px] px-2 py-1 rounded bg-surface border border-border hover:bg-surface/80 flex items-center gap-1",title:A.matchCourse,children:[a.jsx(Or,{size:10})," ",A.syncBtn]}),a.jsx("div",{className:`text-[10px] px-2 py-1 rounded-full font-bold border transition-colors select-none ${ue.completed?"bg-emerald-500/10 text-emerald-500 border-emerald-500/20":"bg-blue-500/10 text-blue-500 border-blue-500/20"}`,children:ue.completed?A.badgeCompleted:A.badgePlanned})]})]})]}),wt=({title:ue,category:L})=>{const J=d.courses.filter(Le=>L==="core"?Le.category==="core"||!Le.category:Le.category==="elective"),he=J.filter(Le=>Le.completed),ge=J.filter(Le=>!Le.completed),Ke=L==="elective"?"text-orange-500":"text-primary",ot=L==="elective"?"bg-orange-500 hover:bg-orange-600":"bg-primary hover:bg-primary/90",Xe=L==="elective"?"bg-orange-400":"bg-emerald-500";return a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:`text-lg font-bold flex items-center gap-2 ${Ke}`,children:ue}),a.jsxs("div",{className:"flex gap-2",children:[L==="core"&&null,a.jsxs("button",{onClick:()=>Q(L),className:`flex items-center gap-1.5 px-3 py-1.5 text-white text-xs font-medium rounded-lg transition-colors ${ot}`,children:[a.jsx(Xr,{size:14}),A.addCourse]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between pb-2 border-b border-border",children:[a.jsxs("h4",{className:"font-bold text-foreground text-sm flex items-center gap-2",children:[a.jsx("span",{className:`w-2 h-2 rounded-full ${Xe}`}),A.completedCourses]}),a.jsxs("div",{className:"flex gap-2 items-center",children:[a.jsxs("button",{onClick:()=>{let Le=d.department;const Se=Le.match(/(.+?)(?=\()/);Se&&(Le=Se[1]),S(Le),X.current=L,y(!0)},className:"text-[10px] text-primary hover:underline flex items-center gap-1",children:[a.jsx(rr,{size:10})," ",A.addFromTracker]}),a.jsxs("span",{className:"text-xs text-muted",children:[he.length," items"]})]})]}),a.jsxs("div",{className:"space-y-2 min-h-[100px]",children:[he.map(Le=>a.jsx(Ve,{item:Le},Le.id)),he.length===0&&a.jsx("div",{className:"text-center text-muted text-xs py-8 border border-dashed border-border rounded-lg",children:"No completed courses"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between pb-2 border-b border-border",children:[a.jsxs("h4",{className:"font-bold text-foreground text-sm flex items-center gap-2",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"}),A.plannedCourses]}),a.jsxs("div",{className:"flex gap-2 items-center",children:[a.jsxs("button",{onClick:()=>{let Le=d.department;const Se=Le.match(/(.+?)(?=\()/);Se&&(Le=Se[1]),j(Le),X.current=L,g(!0)},className:"text-[10px] text-blue-500 hover:underline flex items-center gap-1",children:[a.jsx(rr,{size:10})," ",A.addFromCatalog]}),a.jsxs("span",{className:"text-xs text-muted",children:[ge.length," items"]})]})]}),a.jsxs("div",{className:"space-y-2 min-h-[100px]",children:[ge.map(Le=>a.jsx(Ve,{item:Le},Le.id)),ge.length===0&&a.jsx("div",{className:"text-center text-muted text-xs py-8 border border-dashed border-border rounded-lg",children:"No planned courses"})]})]})]})]})},Xt=_();return a.jsxs("div",{className:"space-y-8 max-w-3xl mx-auto animate-in fade-in zoom-in-95 duration-300 pb-20",children:[a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary flex items-center gap-2",children:[a.jsx(rr,{size:20}),A.referenceProcess]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"pt-0.5",children:a.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-xs font-bold text-primary",children:"1"})}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("div",{className:"flex items-center gap-2 font-medium text-foreground",children:a.jsxs("a",{href:"https://ctdr.nsysu.edu.tw/class2.php",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-primary hover:underline underline-offset-4",children:[A.step1,a.jsx(Or,{size:14})]})}),a.jsxs("ul",{className:"text-sm text-muted list-disc list-inside space-y-0.5 pl-1",children:[a.jsx("li",{children:A.step1_sub1}),a.jsx("li",{children:A.step1_sub2}),a.jsxs("li",{children:[A.step1_sub3_pre,a.jsx("span",{className:"underline decoration-primary/50 underline-offset-2",children:A.step1_sub3_link})]}),a.jsx("li",{children:A.step1_sub4})]})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"pt-0.5",children:a.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-xs font-bold text-primary",children:"2"})}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("div",{className:"font-medium text-foreground",children:A.step2}),a.jsx("ul",{className:"text-sm text-muted list-disc list-inside space-y-0.5 pl-1",children:a.jsx("li",{children:A.step2_sub1})})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"pt-0.5",children:a.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-xs font-bold text-primary",children:"3"})}),a.jsxs("div",{className:"font-medium text-foreground flex items-center gap-2",children:[A.step3,a.jsx(vt,{size:16,className:"text-primary"})]})]})]})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary flex items-center gap-2",children:[a.jsx(rr,{size:20}),A.basicInfo]}),a.jsxs("a",{href:"https://oaa.nsysu.edu.tw/static/file/3/1003/attach/20/pta_232069_5443563_94211.pdf",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 px-3 py-1.5 bg-primary/10 hover:bg-primary/20 text-primary text-xs font-medium rounded-lg transition-colors",children:[A.officialRegulations,a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),a.jsx("polyline",{points:"15 3 21 3 21 9"}),a.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:A.doubleMajorDept}),a.jsxs("select",{value:d.department,onChange:ue=>C("department",ue.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50",children:[a.jsx("option",{value:"",children:A.selectDept}),a.jsx("optgroup",{label:"() (Departmental Professional Programs)",children:PO.map(ue=>a.jsx("option",{value:ue,children:ue},ue))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:A.applicableYear}),a.jsxs("select",{value:d.targetYear,onChange:ue=>C("targetYear",ue.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50",children:[a.jsx("option",{value:"",children:A.selectYear}),N.map(ue=>a.jsx("option",{value:ue,children:ue},ue))]})]}),a.jsxs("div",{className:"md:col-span-2 grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:A.minTotalCredits}),a.jsx("input",{type:"text",value:d.minTotalCredits,onChange:ue=>/^\d*$/.test(ue.target.value)&&C("minTotalCredits",ue.target.value),placeholder:"e.g. 15",className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:A.minCoreCredits}),a.jsx("input",{type:"text",value:d.minCoreCredits||"",onChange:ue=>/^\d*$/.test(ue.target.value)&&C("minCoreCredits",ue.target.value),placeholder:"e.g. 9",className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50"})]})]}),a.jsxs("div",{className:"md:col-span-2 pt-2 border-t border-border/50",children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-2",children:A.coursePlanInput}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("input",{type:"text",value:d.coursePlanUrl||"",onChange:ue=>C("coursePlanUrl",ue.target.value),placeholder:A.pasteLink,className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground text-sm outline-none focus:ring-2 focus:ring-primary/50"}),d.coursePlanUrl&&a.jsxs("a",{href:d.coursePlanUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-primary hover:underline mt-1 flex items-center gap-1",children:[a.jsx(Or,{size:10}),A.viewPlan]})]}),a.jsxs("div",{children:[a.jsx("input",{type:"file",id:"course-plan-upload",className:"hidden",accept:"image/*,.pdf",onChange:te}),G?a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-primary/5 border border-primary/20 rounded-lg",children:[a.jsx("div",{className:"p-1.5 bg-primary/10 rounded-full text-primary",children:a.jsx(fs,{size:14})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsx("div",{className:"text-sm font-medium text-foreground truncate",children:G.name})}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>{const ue=URL.createObjectURL(G);window.open(ue,"_blank")},className:"p-1 text-primary hover:bg-primary/10 rounded transition-colors",title:A.viewFile,children:a.jsx(Or,{size:14})}),a.jsx("button",{onClick:E,className:"p-1 text-muted hover:text-destructive hover:bg-destructive/10 rounded transition-colors",children:a.jsx(ut,{size:14})})]})]}):a.jsxs("label",{htmlFor:"course-plan-upload",className:"cursor-pointer flex items-center justify-center gap-2 px-4 py-2 bg-background border border-border hover:border-primary text-foreground rounded-lg transition-all shadow-sm active:scale-95 text-sm",children:[a.jsx(Dr,{size:14}),A.uploadPlan]})]})]})]})]})]}),a.jsxs("div",{className:"bg-surface/50 p-4 rounded-xl border border-border",children:[Xt.target>0?a.jsxs(a.Fragment,{children:[a.jsx(mr,{label:A.totalProgress,current:Xt.total,total:Xt.target,color:"bg-primary",variant:"l"}),a.jsx("div",{className:"flex justify-end mt-1",children:a.jsxs("span",{className:"text-xs text-muted flex items-center gap-1",children:[a.jsx(Ar,{size:12}),A.creditWarning]})})]}):a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("span",{className:"font-medium text-foreground text-lg mb-1",children:A.totalProgress}),a.jsxs("div",{className:"text-sm text-orange-500 font-medium flex items-center gap-2 bg-orange-500/10 p-2 rounded",children:[a.jsx("span",{className:"text-lg",children:"!"})," ",A.pleaseFillTotal]})]}),U().target>0&&a.jsx("div",{className:"mt-4 pt-4 border-t border-border/50",children:a.jsx(mr,{label:A.minCoreCredits,current:U().total,total:U().target,color:"bg-emerald-500",variant:"l"})})]}),a.jsx(wt,{title:A.coreCourses,category:"core"}),a.jsx(wt,{title:A.elective,category:"elective"}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary border-b border-border/50 pb-2 flex items-center gap-2",children:[a.jsx(Dr,{size:20}),A.attachments," & ",A.notes]}),a.jsxs("div",{className:"flex flex-col gap-8",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:A.uploadOrLink}),a.jsxs("div",{className:"space-y-3 pl-2",children:[a.jsxs("div",{children:[a.jsx("input",{type:"file",id:"proof-upload-7",className:"hidden",accept:"image/*,.pdf",onChange:W}),V?a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-primary/5 border border-primary/20 rounded-lg animate-in fade-in slide-in-from-left-2",children:[a.jsx("div",{className:"p-2 bg-primary/10 rounded-full text-primary",children:a.jsx(fs,{size:18})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm font-medium text-foreground truncate max-w-[200px]",children:V.name}),a.jsxs("div",{className:"text-xs text-muted",children:[(V.size/1024).toFixed(1)," KB"]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>{const ue=URL.createObjectURL(V);window.open(ue,"_blank")},className:"p-1.5 text-primary hover:bg-primary/10 rounded-md transition-colors",title:A.viewFile,children:a.jsx(Or,{size:16})}),a.jsx("button",{onClick:z,className:"p-1.5 text-muted hover:text-destructive hover:bg-destructive/10 rounded-md transition-colors",children:a.jsx(ut,{size:16})})]})]}):d.proofFileName?a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 bg-surface/50 border border-dashed border-border rounded-lg p-3 max-w-md animate-in fade-in slide-in-from-left-2",children:[a.jsxs("div",{className:"flex items-center gap-3 opacity-70 overflow-hidden",children:[a.jsx(fs,{className:"text-muted flex-shrink-0",size:20}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:d.proofFileName}),a.jsx("p",{className:"text-xs text-muted truncate",children:A.storedOnOriginalDevice})]})]}),a.jsxs("label",{className:"cursor-pointer p-1.5 hover:bg-white/10 rounded-md text-primary transition-colors text-xs flex items-center gap-1 flex-shrink-0 self-start sm:self-auto border border-primary/20 bg-primary/5",children:[a.jsx(Dr,{size:14})," ",A.reUpload,a.jsx("input",{type:"file",accept:"image/*,application/pdf",className:"hidden",onChange:W})]})]}):a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("label",{htmlFor:"proof-upload-7",className:"cursor-pointer flex items-center gap-2 px-4 py-2 bg-background border border-border hover:border-primary text-foreground rounded-lg transition-all shadow-sm active:scale-95",children:[a.jsx(Dr,{size:16}),a.jsx("span",{className:"text-sm font-medium",children:A.uploadFile})]}),a.jsx("span",{className:"text-xs text-muted",children:A.uploadType})]})]}),a.jsxs("div",{className:"text-xs text-muted flex items-center gap-1.5 mt-1",children:[a.jsx(Ar,{size:10,className:"text-muted"}),A.safetyNotice]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:A.notes}),a.jsx("div",{className:"pl-2",children:a.jsx("textarea",{value:d.notes,onChange:ue=>C("notes",ue.target.value),placeholder:"e.g. ...",className:"w-full bg-background border border-border rounded-lg px-4 py-3 text-foreground outline-none focus:ring-2 focus:ring-primary/50 min-h-[100px] resize-y"})})]})]})]}),f&&a.jsx(GA,{onClose:()=>g(!1),onSelect:Y,defaultSearch:R}),x&&a.jsx(ZO,{isOpen:x,onClose:()=>y(!1),courses:t,onAdd:M,searchQuery:v,setSearchQuery:S,T:A}),K&&a.jsx(WO,{candidate:K,onConfirm:ke,onCancel:()=>ne(null),T:A}),ee&&a.jsx(F,{onCancel:()=>O(!1),onManualAdd:()=>{O(!1),S(""),y(!0)},T:A}),Ae&&a.jsx(Be,{isOpen:!!Ae,onClose:()=>me(null),onConfirm:Ee,T:A})]})},r6={en:{title:"Micro-credits",desc:"Track accumulation of micro-credits. Max 1 credit per semester counts towards graduation (Total Max: 6).",basicInfo:"Targets",minTotalCredits:"Target Total Credits",totalProgress:"Effective Progress",addCourse:"Add Item",courseName:"Name / Activity",hours:"Hours",credit:"Credit",completed:"Approved!",pending:"In Progress",deleteConfirmTitle:"Delete Item?",deleteConfirmText:"Are you sure you want to remove this item?",cancel:"Cancel",confirm:"Confirm",notes:"Notes",pleaseFill:"Set a target to track progress.",completedItems:"Completed Items",semTotal:"Sem Total:",effective:"Effective:",semester:"Semester",selectSem:"Select...",ruleWarning:"Need official approval every year.",maxPerSemWarning:"Max 1 credit/semester counts.",officialApproval:"Official Approval Required",semExists:"Semester already exists!"},zh:{title:"",desc:" 1  6 ",basicInfo:"",minTotalCredits:"",totalProgress:"",addCourse:"",courseName:" / ",hours:"",credit:"",completed:"",pending:"",deleteConfirmTitle:"",deleteConfirmText:"",cancel:"",confirm:"",notes:"",pleaseFill:"",completedItems:"",semTotal:"",effective:"",semester:"",selectSem:"...",ruleWarning:"",maxPerSemWarning:" 1 ",officialApproval:"",semExists:""}},s6=({isOpen:r,onClose:e,onConfirm:t,language:s,T:A,existingSemesters:l})=>{const[d,u]=k.useState(String(new Date().getFullYear()-1911)),[f,g]=k.useState("1");if(k.useEffect(()=>{r&&(u(String(new Date().getFullYear()-1911)),g("Summer"))},[r]),!r)return null;let x="";f==="1"||f==="2"?x=`${d}-${f}`:x=`${d}-${f==="Summer"?"Summer()":"Winter()"}`;const y=l.some(v=>v===x);return $t.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-sm shadow-2xl p-6 flex flex-col gap-4 animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[a.jsx("div",{className:"mx-auto w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center text-primary mb-2",children:a.jsx(Xr,{size:24,strokeWidth:3})}),a.jsx("h3",{className:"text-xl font-bold",children:s==="zh"?"":"Add Semester"}),a.jsx("p",{className:"text-muted text-sm text-center",children:s==="zh"?"":"Enter year and select semester type"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-bold text-muted uppercase mb-1 block",children:s==="zh"?"":"Year"}),a.jsx("input",{type:"number",value:d,onChange:v=>u(v.target.value),className:"w-full bg-surface border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary font-mono",autoFocus:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-bold text-muted uppercase mb-1 block",children:s==="zh"?"":"Semester"}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:f,onChange:v=>g(v.target.value),className:"w-full appearance-none bg-surface border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary font-bold cursor-pointer",children:[a.jsx("option",{value:"Summer",children:s==="zh"?"":"Summer"}),a.jsx("option",{value:"1",children:s==="zh"?"":"Fall(sem 1)"}),a.jsx("option",{value:"Winter",children:s==="zh"?"":"Winter"}),a.jsx("option",{value:"2",children:s==="zh"?"":"Spring(sem 2)"})]}),a.jsx(xd,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted pointer-events-none",size:16})]})]}),y&&a.jsxs("div",{className:"flex items-center gap-2 text-destructive text-sm font-bold justify-center bg-destructive/10 p-2 rounded",children:[a.jsx(Ar,{size:16}),A.semExists]})]}),a.jsxs("div",{className:"flex gap-3 mt-2",children:[a.jsx("button",{onClick:e,className:"flex-1 py-2.5 px-4 rounded-lg border border-border hover:bg-surface font-medium transition-colors",children:A.cancel}),a.jsx("button",{onClick:()=>t(d,f),disabled:!d||y,className:"flex-1 py-2.5 px-4 rounded-lg bg-primary hover:bg-primary/90 text-white font-bold transition-colors shadow-lg shadow-primary/20 disabled:opacity-50 disabled:cursor-not-allowed",children:A.confirm})]})]})}),document.body)},n6=({onStatusChange:r,userProfile:e})=>{const{language:t}=it(),s=r6[t==="zh"?"zh":"en"],A=e?.entranceYear||113,[l,d]=k.useState(()=>{const M=localStorage.getItem(Oc);if(M)try{const F=JSON.parse(M);if(F.courses){const K=Cx(A)[0];F.courses=F.courses.map(ne=>{let ee=ne.semester||K||"Unknown";return(/^\d+$/.test(ee)||/^\d+-\d+$/.test(ee))&&(ee=K),{...ne,semester:ee}})}return{...el,...F}}catch(F){return console.error("Failed to parse micro-credits data",F),el}return el}),{effectiveStats:u,grandTotalEffective:f,sortedSemesters:g,activeSemesters:x,rawStats:y}=K0(l,A),[v,S]=k.useState(null),[R,j]=k.useState(null),[V,P]=k.useState({}),[G,q]=k.useState([]),[W,te]=k.useState(!1);k.useEffect(()=>{const M=localStorage.getItem(Oc),F=JSON.stringify(l);M!==F&&(localStorage.setItem(Oc,F),window.dispatchEvent(new Event("micro-credits-updated")))},[l]);const z=l.courses.reduce((M,F)=>{const K=F.semester||"Unknown";return M[K]||(M[K]=[]),M[K].push(F),M},{}),E=parseFloat(l.minTotalCredits)||0;k.useEffect(()=>{if(!r)return;const M=E>0&&f>=E;r(M)},[f,E,r]);const N=M=>{const F={id:FA(),name:"",credits:"",hours:"",completed:!1,semester:M};d(K=>({...K,courses:[...K.courses,F]})),P(K=>({...K,[M]:!0}))},C=(M,F,K)=>{d(ne=>({...ne,courses:ne.courses.map(ee=>ee.id===M?{...ee,[F]:K}:ee)}))},D=()=>{v&&(d(M=>({...M,courses:M.courses.filter(F=>F.id!==v.id)})),S(null))},Q=M=>{P(F=>({...F,[M]:!F[M]}))},T=(M,F)=>{if(!M||isNaN(parseInt(M)))return;let K="";F==="1"||F==="2"?K=`${M}-${F}`:K=`${M}-${F==="Summer"?"Summer()":"Winter()"}`,x.includes(K)||(d(ne=>{const ee=ne.deletedSemesters||[],O=ne.manualSemesters||[],X=ee.filter(Ee=>Ee!==K);let Ae=O;const me=Cx(A);return!O.includes(K)&&!me.includes(K)&&(Ae=[...O,K]),{...ne,manualSemesters:Ae,deletedSemesters:X}}),q([K]),setTimeout(()=>q([]),2e3)),te(!1)},_=()=>{R&&(d(M=>({...M,manualSemesters:(M.manualSemesters||[]).filter(F=>F!==R),deletedSemesters:[...M.deletedSemesters||[],R],courses:M.courses.filter(F=>F.semester!==R)})),j(null))},U=M=>{j(M)},Y=()=>{if(!v&&!R)return null;const M=!!R,F=M?t==="zh"?"":"Delete Semester?":s.deleteConfirmTitle,K=M?t==="zh"?" ()":"Are you sure you want to remove this semester? (All items will be deleted)":s.deleteConfirmText,ne=M?_:D,ee=M?()=>j(null):()=>S(null);return $t.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-background rounded-xl border border-border w-full max-w-sm shadow-2xl p-6 flex flex-col gap-4 animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[a.jsx("div",{className:"mx-auto w-12 h-12 bg-destructive/10 rounded-full flex items-center justify-center text-destructive mb-2",children:a.jsx(Ar,{size:24,strokeWidth:3})}),a.jsx("h3",{className:"text-xl font-bold",children:F}),a.jsx("p",{className:"text-muted text-sm text-center",children:K})]}),a.jsxs("div",{className:"flex gap-3 mt-2",children:[a.jsx("button",{onClick:ee,className:"flex-1 py-2.5 px-4 rounded-lg border border-border hover:bg-surface font-medium transition-colors",children:s.cancel}),a.jsx("button",{onClick:ne,className:"flex-1 py-2.5 px-4 rounded-lg bg-red-500 hover:bg-red-600 text-white font-bold transition-colors shadow-lg shadow-red-500/20",children:s.confirm})]})]})}),document.body)};return a.jsxs("div",{className:"w-full max-w-4xl mx-auto space-y-8 animate-in fade-in zoom-in-95 duration-300 pb-20 px-1",children:[a.jsx(Y,{}),a.jsx(s6,{isOpen:W,onClose:()=>te(!1),onConfirm:T,language:t,T:s,existingSemesters:x}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("h2",{className:"text-2xl font-bold text-foreground",children:s.title}),a.jsxs("div",{className:"flex items-start gap-2 text-muted text-sm bg-blue-500/10 p-3 rounded-lg border border-blue-500/20",children:[a.jsx(Ar,{size:16,className:"mt-0.5 text-blue-500 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("p",{children:s.desc}),a.jsx("p",{className:"text-blue-400 mt-1 font-bold",children:s.ruleWarning})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"md:col-span-1 bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsx("h3",{className:"text-sm font-bold text-primary uppercase tracking-wider mb-4 flex items-center gap-2",children:s.basicInfo}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-muted mb-1.5",children:s.minTotalCredits}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",value:l.minTotalCredits,onChange:M=>{const F=M.target.value;/^\d*\.?\d*$/.test(F)&&(F===""||parseFloat(F)<=6)&&d(K=>({...K,minTotalCredits:F}))},placeholder:"6.0",className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary font-mono"}),a.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-muted font-bold",children:"Cr (Max 6)"})]})]})]}),a.jsxs("div",{className:"md:col-span-2 bg-surface/50 p-6 rounded-xl border border-border flex flex-col justify-center",children:[a.jsx("h3",{className:"text-sm font-bold text-primary uppercase tracking-wider mb-4",children:s.totalProgress}),a.jsxs("div",{className:"flex items-end gap-2 mb-2",children:[a.jsx("span",{className:`text-4xl font-bold font-mono ${E>0&&f>=E?"text-emerald-500":"text-foreground"}`,children:f}),a.jsxs("span",{className:"text-lg text-muted mb-1 font-mono",children:["/ ",E||"-"]})]}),E>0?a.jsx(mr,{label:"",current:f,total:E,color:f>=E?"bg-emerald-500":"bg-primary"}):a.jsx("div",{className:"text-sm text-muted",children:s.pleaseFill})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{onClick:()=>te(!0),className:"text-xs flex items-center gap-1 text-primary hover:text-primary/80 transition-colors font-bold bg-primary/5 px-3 py-1.5 rounded-lg border border-primary/10",children:[a.jsx(Xr,{size:14}),t==="zh"?"":"Add Year"]})}),g.map(M=>{const F=z[M]||[],K=y[M]||0,ne=u[M]||0,ee=!!V[M],O=G.includes(M);return a.jsxs("div",{className:`
                                    bg-surface/50 rounded-xl border overflow-hidden transition-all duration-500
                                    ${O?"border-primary shadow-[0_0_15px_rgba(var(--primary-rgb),0.3)] scale-[1.01]":"border-border"}
                                `,children:[a.jsxs("div",{className:"group p-4 flex items-center justify-between cursor-pointer hover:bg-surface/80 transition-colors",onClick:()=>Q(M),children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`p-1 rounded bg-surface border border-border transition-transform ${ee?"rotate-90":""}`,children:a.jsx(W2,{size:14})}),a.jsx("h3",{className:"font-bold text-foreground w-40 shrink-0",children:(()=>{if(M.includes("Summer")||M.includes("")){const X=M.split("-")[0];return t==="zh"?`${X}-`:`${X}-Summer`}if(M.includes("Winter")||M.includes("")){const X=M.split("-")[0];return t==="zh"?`${X}-`:`${X}-Winter`}if(M.endsWith("-1")){const X=M.split("-")[0];return t==="zh"?`${X}-`:`${X}-Fall`}if(M.endsWith("-2")){const X=M.split("-")[0];return t==="zh"?`${X}-`:`${X}-Spring`}return M})()}),a.jsxs("div",{className:"flex items-center gap-2 text-xs ml-auto sm:ml-2",children:[a.jsxs("span",{className:"text-muted",children:[s.semTotal," ",a.jsx("span",{className:"font-mono font-bold text-foreground",children:K.toFixed(1)})]}),a.jsx("span",{className:"text-muted",children:"/"}),a.jsxs("span",{className:`${ne<K?"text-orange-400":"text-emerald-500"}`,children:[s.effective," ",a.jsx("span",{className:"font-mono font-bold",children:ne.toFixed(1)})]}),ne<K&&a.jsx("span",{className:"text-[10px] bg-orange-500/10 text-orange-400 px-1.5 py-0.5 rounded border border-orange-500/20 hidden sm:inline-block",children:s.maxPerSemWarning})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:X=>{X.stopPropagation(),U(M)},className:"text-muted hover:text-destructive p-1.5 rounded hover:bg-surface transition-colors opacity-0 group-hover:opacity-100 duration-200",title:"Delete Semester",children:a.jsx(Un,{size:16})}),a.jsx("button",{onClick:X=>{X.stopPropagation(),N(M)},className:"bg-primary/10 hover:bg-primary text-primary hover:text-white p-1.5 rounded transition-colors",children:a.jsx(Xr,{size:16})})]})]}),ee&&a.jsxs("div",{className:"p-4 space-y-3 border-t border-border/50 animate-in slide-in-from-top-2 duration-200",children:[F.length===0&&a.jsx("div",{className:"text-center py-4 text-muted text-xs italic",children:"No items"}),F.map(X=>a.jsxs("div",{className:"group relative bg-background p-3 rounded-lg border border-border flex flex-col md:flex-row gap-3 items-start md:items-center",children:[a.jsx("div",{className:"flex-1 w-full",children:a.jsx("input",{type:"text",value:X.name,placeholder:s.courseName,onChange:Ae=>C(X.id,"name",Ae.target.value),className:"bg-transparent border-none text-sm font-semibold text-foreground placeholder-muted w-full focus:outline-none focus:ring-0 px-0"})}),a.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto justify-between",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("input",{type:"text",value:X.hours||"",placeholder:"e.g. 8",onChange:Ae=>C(X.id,"hours",Ae.target.value),className:"w-16 bg-surface text-sm font-bold text-center border border-border rounded focus:border-primary outline-none py-1 placeholder:font-normal"}),a.jsx("span",{className:"text-xs text-muted",children:s.hours})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("input",{type:"text",value:X.credits,placeholder:"e.g. 0.1",onChange:Ae=>/^\d*\.?\d*$/.test(Ae.target.value)&&C(X.id,"credits",Ae.target.value),className:"w-20 bg-surface text-sm font-bold text-center border border-border rounded focus:border-primary outline-none py-1 placeholder:font-normal"}),a.jsx("span",{className:"text-xs text-muted",children:s.credit})]}),a.jsxs("div",{className:"flex items-center bg-surface border border-border rounded-lg p-0.5 overflow-hidden",children:[a.jsx("button",{onClick:()=>C(X.id,"completed",!1),className:`px-3 py-1.5 text-xs font-bold rounded-md transition-all ${X.completed?"text-muted hover:bg-background/50":"bg-orange-500/10 text-orange-500 shadow-sm"}`,children:s.pending}),a.jsxs("button",{onClick:()=>C(X.id,"completed",!0),className:`px-3 py-1.5 text-xs font-bold rounded-md flex items-center gap-1 transition-all ${X.completed?"bg-emerald-500 text-white shadow-sm":"text-muted hover:bg-background/50"}`,children:[X.completed&&a.jsx(Z2,{size:12}),s.completed]})]}),a.jsx("button",{onClick:()=>S(X),className:"text-muted hover:text-destructive p-1.5 rounded hover:bg-surface transition-colors opacity-0 group-hover:opacity-100 duration-200",children:a.jsx(Un,{size:14})})]})]},X.id))]})]},M)})]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-4",children:[a.jsx("h3",{className:"text-sm font-bold text-muted uppercase tracking-wider",children:s.notes}),a.jsx("textarea",{value:l.notes||"",onChange:M=>d(F=>({...F,notes:M.target.value})),className:"w-full h-24 bg-background border border-border rounded-lg p-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary resize-none",placeholder:"..."}),a.jsxs("p",{className:"text-xs text-muted flex items-center gap-1",children:[a.jsx(Ar,{size:12}),s.ruleWarning]})]})]})},a6={en:{attachments:"Attachments",notes:"Notes (Optional)",uploadOrLink:"Upload or Paste Link:",uploadFile:"Upload File",uploadType:"Approval Letter / System Screenshot",viewFile:"View Attached File",safetyNotice:"Files are stored locally in your browser and are not uploaded to any server.",confirmRemove:"Are you sure you want to remove this file?"},zh:{attachments:"",notes:"",uploadOrLink:"",uploadFile:"",uploadType:" / ",viewFile:"",safetyNotice:"",confirmRemove:""}},i6=({storageKey:r,dbKeyPrefix:e})=>{const{language:t}=it(),s=a6[t],[A,l]=k.useState(""),[d,u]=k.useState(null);k.useEffect(()=>{const y=localStorage.getItem(r);l(y||""),(async()=>{const S=await Aa(`${e}proof`);u(S||null)})()},[r,e]);const f=y=>{l(y),localStorage.setItem(r,y)},g=async y=>{if(y.target.files&&y.target.files[0]){const v=y.target.files[0];await Qn(`${e}proof`,v),u(v)}},x=async()=>{window.confirm(s.confirmRemove)&&(await oa(`${e}proof`),u(null))};return a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border space-y-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary border-b border-border/50 pb-2 flex items-center gap-2",children:[a.jsx(Dr,{size:20}),s.attachments," & ",s.notes]}),a.jsxs("div",{className:"flex flex-col gap-8",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:s.uploadOrLink}),a.jsxs("div",{className:"space-y-3 pl-2",children:[a.jsxs("div",{children:[a.jsx("input",{type:"file",id:`proof-upload-${e}`,className:"hidden",accept:"image/*,.pdf",onChange:g}),d?a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-primary/5 border border-primary/20 rounded-lg animate-in fade-in slide-in-from-left-2",children:[a.jsx("div",{className:"p-2 bg-primary/10 rounded-full text-primary",children:a.jsx(fs,{size:18})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm font-medium text-foreground truncate max-w-[200px]",children:d.name}),a.jsxs("div",{className:"text-xs text-muted",children:[(d.size/1024).toFixed(1)," KB"]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>{const y=URL.createObjectURL(d);window.open(y,"_blank")},className:"p-1.5 text-primary hover:bg-primary/10 rounded-md transition-colors",title:s.viewFile,children:a.jsx(Or,{size:16})}),a.jsx("button",{onClick:x,className:"p-1.5 text-muted hover:text-destructive hover:bg-destructive/10 rounded-md transition-colors",children:a.jsx(ut,{size:16})})]})]}):a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("label",{htmlFor:`proof-upload-${e}`,className:"cursor-pointer flex items-center gap-2 px-4 py-2 bg-background border border-border hover:border-primary text-foreground rounded-lg transition-all shadow-sm active:scale-95",children:[a.jsx(Dr,{size:16}),a.jsx("span",{className:"text-sm font-medium",children:s.uploadFile})]}),a.jsx("span",{className:"text-xs text-muted",children:s.uploadType})]})]}),a.jsxs("div",{className:"text-xs text-muted flex items-center gap-1.5 mt-1",children:[a.jsx(Ar,{size:10,className:"text-muted"}),s.safetyNotice]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:s.notes}),a.jsx("div",{className:"pl-2",children:a.jsx("textarea",{value:A,onChange:y=>f(y.target.value),placeholder:"...",className:"w-full bg-background border border-border rounded-lg px-4 py-3 text-foreground outline-none focus:ring-2 focus:ring-primary/50 min-h-[100px] resize-y"})})]})]})]})},A6=({theme:r,userProfile:e,courses:t})=>{const{t:s}=it(),[A,l]=k.useState(null),[d,u]=k.useState(()=>{const g=localStorage.getItem("nsysu-interdisciplinary-status");return g?JSON.parse(g):{}});k.useEffect(()=>{const g=localStorage.getItem("nsysu-interdisciplinary-status"),x=JSON.stringify(d);g!==x&&localStorage.setItem("nsysu-interdisciplinary-status",x)},[d]);const f=g=>{u(x=>({...x,[g]:!x[g]}))};return a.jsxs("div",{className:"max-w-[85rem] mx-auto animate-in fade-in duration-500",children:[a.jsxs("h1",{className:"text-2xl font-bold text-foreground mb-6 flex items-center gap-3",children:[a.jsx("img",{src:r==="dark"?"./graduation-cap-white.png":"./graduation-cap-black.png",alt:"Icon",className:"w-8 h-8 object-contain"}),s.dashboard.interdisciplinaryView?.title]}),a.jsxs("div",{className:"bg-background border border-border rounded-xl flex flex-col md:flex-row min-h-[70vh] overflow-hidden shadow-sm",children:[a.jsx("div",{className:"md:hidden p-4 border-b border-border bg-surface/50",children:a.jsxs("select",{value:A||"",onChange:g=>l(g.target.value?Number(g.target.value):null),className:"w-full p-3 rounded-lg border border-border bg-background text-foreground shadow-sm outline-none focus:ring-2 focus:ring-primary appearance-none font-medium",children:[a.jsxs("option",{value:"",disabled:!0,children:["-- ",s.dashboard.interdisciplinaryView?.placeholder||""," --"]}),a.jsx("optgroup",{label:s.dashboard.interdisciplinaryView?.sidebar?.microCredits,children:a.jsx("option",{value:"10",children:s.dashboard.interdisciplinaryView?.sidebar?.addMicroCredit})}),a.jsxs("optgroup",{label:s.dashboard.interdisciplinaryView?.sidebar?.international,children:[a.jsxs("option",{value:"1",children:["1. ",s.dashboard.interdisciplinaryView?.requirements?.[1]]}),a.jsxs("option",{value:"2",children:["2. ",s.dashboard.interdisciplinaryView?.requirements?.[2]]}),a.jsxs("option",{value:"3",children:["3. ",s.dashboard.interdisciplinaryView?.requirements?.[3]]})]}),a.jsxs("optgroup",{label:s.dashboard.interdisciplinaryView?.sidebar?.crossDomain,children:[a.jsxs("option",{value:"4",children:["4. ",s.dashboard.interdisciplinaryView?.requirements?.[4]]}),a.jsxs("option",{value:"5",children:["5. ",s.dashboard.interdisciplinaryView?.requirements?.[5]]}),a.jsxs("option",{value:"6",children:["6. ",s.dashboard.interdisciplinaryView?.requirements?.[6]]}),a.jsxs("option",{value:"7",children:["7. ",s.dashboard.interdisciplinaryView?.requirements?.[7]]}),a.jsxs("option",{value:"8",children:["8. ",s.dashboard.interdisciplinaryView?.requirements?.[8]]}),a.jsxs("option",{value:"9",children:["9. ",s.dashboard.interdisciplinaryView?.requirements?.[9]]})]})]})}),a.jsxs("div",{className:"hidden md:block w-[30%] flex-shrink-0 border-r border-border bg-transparent p-6 overflow-y-auto",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("div",{className:"flex items-center gap-2 mb-3",children:a.jsx("h3",{className:"text-sm font-bold text-[#8D9CB2] dark:text-[#A8C8FA] uppercase tracking-wider",children:s.dashboard.interdisciplinaryView?.sidebar?.microCredits})}),a.jsx("ul",{className:"space-y-1",children:a.jsxs("li",{onClick:()=>l(10),className:"relative flex items-center gap-3 text-sm p-2.5 rounded-lg cursor-pointer transition-all font-medium group text-foreground overflow-hidden",children:[a.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 h-7 w-full flex items-center pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:a.jsx("div",{className:"w-1 h-full bg-[#FCA269]"})}),a.jsx("div",{className:`absolute inset-0 bg-primary/5 transition-opacity duration-200 ${A===10?"opacity-100":"opacity-0"}`}),a.jsx("span",{className:`w-1.5 h-1.5 rounded-full transition-colors relative z-10 ${d[10]?"bg-emerald-500":"bg-muted group-hover:bg-[#FCA269]"}`}),a.jsx("span",{className:`leading-none pt-0.5 relative z-10 ${d[10]?"text-emerald-500":""} ${A===10?"text-primary dark:text-white":""}`,children:s.dashboard.interdisciplinaryView?.sidebar?.addMicroCredit}),d[10]&&a.jsx(vt,{size:14,className:"ml-auto text-emerald-500 relative z-10"})]})})]}),a.jsxs("div",{children:[a.jsx("div",{className:"flex items-center gap-2 mb-3",children:a.jsx("h3",{className:"text-sm font-bold text-[#8D9CB2] dark:text-[#A8C8FA] uppercase tracking-wider",children:s.dashboard.interdisciplinaryView?.sidebar?.internationalOrCross})}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h4",{className:"text-xs font-semibold text-primary/80 mb-2 px-2.5",children:s.dashboard.interdisciplinaryView?.sidebar?.international}),a.jsx("ul",{className:"space-y-1",children:[1,2,3].map(g=>a.jsxs("li",{onClick:()=>l(g),className:"relative flex items-center gap-3 text-sm p-2.5 rounded-lg cursor-pointer transition-all group overflow-hidden",children:[a.jsxs("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 h-7 w-full flex items-center pointer-events-none",children:[a.jsx("div",{className:`w-1 h-full bg-[#FCA269] transition-opacity duration-200 ${A===g?"opacity-100":"opacity-0 group-hover:opacity-100"}`}),a.jsx("div",{className:`flex-1 h-full bg-gradient-to-r from-[#303030]/10 to-transparent dark:from-[#EFEFEF]/10 transition-opacity duration-200 ${A===g?"opacity-100":"opacity-0"}`})]}),a.jsxs("span",{className:`w-5 flex-shrink-0 text-xs font-mono relative z-10 ${A===g?"text-primary dark:text-white":"text-muted group-hover:text-foreground"} ${d[g]?"!text-emerald-500":""}`,children:[g,"."]}),a.jsx("div",{className:`flex-1 leading-relaxed relative z-10 ${d[g]?"text-emerald-500":"text-foreground"}`,children:s.dashboard.interdisciplinaryView?.requirements?.[g]}),d[g]&&a.jsx(vt,{size:16,className:"text-emerald-500 relative z-10"})]},g))})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-xs font-semibold text-primary/80 mb-2 px-2.5",children:s.dashboard.interdisciplinaryView?.sidebar?.crossDomain}),a.jsx("ul",{className:"space-y-1",children:[4,5,6,7,8,9].map(g=>a.jsxs("li",{onClick:()=>l(g),className:"relative flex items-center gap-3 text-sm p-2.5 rounded-lg cursor-pointer transition-all group overflow-hidden",children:[a.jsxs("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 h-7 w-full flex items-center pointer-events-none",children:[a.jsx("div",{className:`w-1 h-full bg-[#FCA269] transition-opacity duration-200 ${A===g?"opacity-100":"opacity-0 group-hover:opacity-100"}`}),a.jsx("div",{className:`flex-1 h-full bg-gradient-to-r from-[#303030]/10 to-transparent dark:from-[#EFEFEF]/10 transition-opacity duration-200 ${A===g?"opacity-100":"opacity-0"}`})]}),a.jsxs("span",{className:`w-5 flex-shrink-0 text-xs font-mono relative z-10 ${A===g?"text-primary dark:text-white":"text-muted group-hover:text-foreground"} ${d[g]?"!text-emerald-500":""}`,children:[g,"."]}),a.jsx("div",{className:`flex-1 leading-relaxed relative z-10 ${d[g]?"text-emerald-500":"text-foreground"}`,children:s.dashboard.interdisciplinaryView?.requirements?.[g]}),d[g]&&a.jsx(vt,{size:16,className:"text-emerald-500 relative z-10"})]},g))})]})]})]}),a.jsx("div",{className:"w-full md:w-[70%] bg-transparent p-6 md:p-12 flex flex-col justify-start md:justify-center relative",children:A&&[1,2,3].includes(A)?a.jsxs("div",{className:"w-full max-w-2xl mx-auto animate-in fade-in zoom-in-95 duration-300",children:[a.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-4 mb-6 md:mb-8",children:[a.jsx("div",{className:"p-2 md:p-3 bg-primary/10 rounded-xl text-primary",children:a.jsx(V0,{size:24,className:"md:w-8 md:h-8"})}),a.jsx("h2",{className:"text-xl md:text-2xl font-bold text-foreground",children:s.dashboard.interdisciplinaryView?.requirements?.[A]})]}),a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary mb-6 flex items-center gap-2",children:[a.jsx(J5,{size:20}),s.dashboard.interdisciplinaryView?.details?.requirementsHeader]}),(()=>{const x=(s.dashboard.interdisciplinaryView?.details?.[A]?.requirement||"").split(`

`);return a.jsx("div",{className:"space-y-6",children:x.map((y,v)=>{if(y.startsWith("Definition:")||y.startsWith("")){const S=y.includes("")?"":":",R=y.split(S)[0],j=y.substring(y.indexOf(S)+1);return a.jsxs("div",{className:"bg-primary/5 rounded-lg p-4 border border-primary/10",children:[a.jsxs("h4",{className:"font-bold text-primary mb-2 flex items-center gap-2 text-sm uppercase tracking-wide",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),R]}),a.jsx("p",{className:"text-foreground/90 leading-relaxed pl-3.5",children:j})]},v)}if(y.startsWith("Requirements")||y.startsWith("")){const S=y.split(`
`),R=S[0],j=S.slice(1);return a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-foreground mb-3 flex items-center gap-2 pl-1",children:R}),a.jsx("ul",{className:"space-y-3 pl-1",children:j.map((V,P)=>{const G=V.match(/^(\d+)\.\s*(.+)/);return G?a.jsxs("li",{className:"flex gap-3 text-foreground/80 leading-relaxed",children:[a.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-surface border border-border flex items-center justify-center text-xs font-mono text-muted-foreground mt-0.5",children:G[1]}),a.jsx("span",{children:G[2]})]},P):a.jsx("li",{className:"text-foreground/80 leading-relaxed pl-9",children:V},P)})})]},v)}return a.jsx("p",{className:"text-foreground/80 leading-relaxed whitespace-pre-wrap",children:y},v)})})})()]}),a.jsxs("div",{className:"bg-surface/50 p-6 rounded-xl border border-border",children:[a.jsxs("h3",{className:"text-lg font-bold text-primary mb-4 flex items-center gap-2",children:[a.jsx(Z2,{size:20}),s.dashboard.interdisciplinaryView?.details?.confirmationHeader]}),a.jsxs("label",{className:"flex items-center gap-4 p-4 rounded-lg bg-background/50 border border-transparent hover:border-primary/30 cursor-pointer transition-all group",children:[a.jsx("div",{className:`w-6 h-6 rounded border flex items-center justify-center transition-colors ${d[A]?"bg-primary border-primary text-background":"border-muted group-hover:border-primary"}`,children:d[A]&&a.jsx(vt,{size:16,strokeWidth:3})}),a.jsx("input",{type:"checkbox",className:"hidden",checked:!!d[A],onChange:()=>f(A)}),a.jsx("span",{className:`text-lg transition-colors ${d[A]?"text-emerald-500 font-medium":"text-foreground/80"}`,children:s.dashboard.interdisciplinaryView?.details?.[A]?.confirmation})]})]}),a.jsx(i6,{storageKey:`nsysu-interdisciplinary-item-${A}-notes`,dbKeyPrefix:`interdisciplinary_item_${A}_`})]})]}):A===4?a.jsxs("div",{className:"w-full h-full overflow-y-auto pr-0 md:pr-2",children:[a.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-4 mb-4 md:mb-6",children:[a.jsx("div",{className:"p-2 md:p-3 bg-primary/10 rounded-xl text-primary",children:a.jsx(rr,{size:24,className:"md:w-[28px] md:h-[28px]"})}),a.jsx("h2",{className:"text-xl md:text-2xl font-bold text-foreground",children:s.dashboard.interdisciplinaryView?.requirements?.[4]})]}),a.jsx(DO,{onStatusChange:g=>{u(x=>x[4]===g?x:{...x,4:g})}})]}):A===5?a.jsxs("div",{className:"w-full h-full overflow-y-auto pr-0 md:pr-2",children:[a.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-4 mb-4 md:mb-6",children:[a.jsx("div",{className:"p-2 md:p-3 bg-primary/10 rounded-xl text-primary",children:a.jsx(rr,{size:24,className:"md:w-[28px] md:h-[28px]"})}),a.jsx("h2",{className:"text-xl md:text-2xl font-bold text-foreground",children:s.dashboard.interdisciplinaryView?.requirements?.[5]})]}),a.jsx(RO,{onStatusChange:g=>{u(x=>x[5]===g?x:{...x,5:g})}})]}):A===6?a.jsxs("div",{className:"w-full h-full overflow-y-auto pr-0 md:pr-2",children:[a.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-4 mb-4 md:mb-6",children:[a.jsx("div",{className:"p-2 md:p-3 bg-primary/10 rounded-xl text-primary",children:a.jsx(rr,{size:24,className:"md:w-[28px] md:h-[28px]"})}),a.jsx("h2",{className:"text-xl md:text-2xl font-bold text-foreground",children:s.dashboard.interdisciplinaryView?.requirements?.[6]})]}),a.jsx(HO,{onStatusChange:g=>{u(x=>x[6]===g?x:{...x,6:g})}})]}):A===7?a.jsxs("div",{className:"w-full h-full overflow-y-auto pr-0 md:pr-2",children:[a.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-4 mb-4 md:mb-6",children:[a.jsx("div",{className:"p-2 md:p-3 bg-primary/10 rounded-xl text-primary",children:a.jsx(rr,{size:24,className:"md:w-[28px] md:h-[28px]"})}),a.jsx("h2",{className:"text-xl md:text-2xl font-bold text-foreground",children:s.dashboard.interdisciplinaryView?.requirements?.[7]})]}),a.jsx(qO,{userProfile:e,courses:t,onStatusChange:g=>{u(x=>x[7]===g?x:{...x,7:g})}})]}):A===8?a.jsxs("div",{className:"w-full h-full overflow-y-auto pr-0 md:pr-2",children:[a.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-4 mb-4 md:mb-6",children:[a.jsx("div",{className:"p-2 md:p-3 bg-primary/10 rounded-xl text-primary",children:a.jsx(rr,{size:24,className:"md:w-[28px] md:h-[28px]"})}),a.jsx("h2",{className:"text-xl md:text-2xl font-bold text-foreground",children:s.dashboard.interdisciplinaryView?.requirements?.[8]})]}),a.jsx(JO,{userProfile:e,courses:t,onStatusChange:g=>{u(x=>x[8]===g?x:{...x,8:g})}})]}):A===9?a.jsxs("div",{className:"w-full h-full overflow-y-auto pr-0 md:pr-2",children:[a.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-4 mb-4 md:mb-6",children:[a.jsx("div",{className:"p-2 md:p-3 bg-primary/10 rounded-xl text-primary",children:a.jsx(rr,{size:24,className:"md:w-[28px] md:h-[28px]"})}),a.jsx("h2",{className:"text-xl md:text-2xl font-bold text-foreground",children:s.dashboard.interdisciplinaryView?.requirements?.[9]})]}),a.jsx(t6,{userProfile:e,courses:t,onStatusChange:g=>{u(x=>x[9]===g?x:{...x,9:g})}})]}):A===10?a.jsx("div",{className:"w-full h-full overflow-y-auto pr-0 md:pr-2",children:a.jsx(n6,{userProfile:e,onStatusChange:g=>{u(x=>x[10]===g?x:{...x,10:g})}})}):a.jsxs("div",{className:"w-full px-8 text-center flex flex-col items-center justify-center h-full",children:[a.jsx("div",{className:"mb-6 inline-block",children:a.jsx("img",{src:r==="dark"?"./graduation-cap-white.png":"./graduation-cap-black.png",alt:"Graduation Cap",className:"w-24 h-24 object-contain"})}),a.jsx("h2",{className:"text-xl font-bold text-foreground mb-2 whitespace-nowrap",children:s.dashboard.interdisciplinaryView?.title}),a.jsx("p",{className:"text-muted",children:s.dashboard.interdisciplinaryView?.placeholder})]})})]})]})},w1=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o6=["A+","A","A-","B+","B","B-","C+","C","C-","D","E","Fail","None"],l6=({onSave:r,onClose:e,onDelete:t,initialCourse:s,userMajor:A,theme:l="dark"})=>{const{t:d,language:u}=it(),[f,g]=k.useState(s?.name||""),[x,y]=k.useState(s?.room||""),[v,S]=k.useState(s?.credits||3),[R,j]=k.useState(s?.grade||""),[V,P]=k.useState(s?.teacher||""),[G,q]=k.useState(s?.originalTags||[]),[W,te]=k.useState(s?.originalSemester||""),[z,E]=k.useState(s?.originalId||""),[N,C]=k.useState(s?.department||""),[D,Q]=k.useState(()=>{if(s?.semester)return s.semester;const ve=localStorage.getItem("nsysu-last-semester");return ve&&Ec.includes(ve)?ve:Ec[0]}),[T,_]=k.useState(s?.category||"Major Required"),[U,Y]=k.useState(s?.genEduSubCategory),[M,F]=k.useState(s?.boyaDimension),[K,ne]=k.useState(s?.isEMI||!1),[ee,O]=k.useState(s?.isEapEsp||!1),[X,Ae]=k.useState(s?.isWithdrawn||!1),[me,Ee]=k.useState(s?.isExemption||!1),[Be,ke]=k.useState(s?.fromCatalog||!1),[Pe,Ve]=k.useState(!1),[wt,Xt]=k.useState(s?.category||"Major Required"),[ue,L]=k.useState(s?.genEduSubCategory),[J,he]=k.useState(s?.day),[ge,Ke]=k.useState(s?.startTime),[ot,Xe]=k.useState(s?.endTime),[Le,Se]=k.useState(!1),[Pt]=k.useState(s?.userLabels||[]);k.useEffect(()=>{T==="University Way"||T==="General Education"&&U==="Primer"?(S(0),j("None"),ne(!1),O(!1),Ae(!1),Ee(!1)):T==="Other"&&U==="Military Training"&&Ee(!1)},[T,U]);const Nr=ve=>{ve.preventDefault();let jt=Pt;const lr=!!z;!s&&!lr&&(jt.includes("manual")||(jt=[...jt,"manual"]));const Ut={id:s?.id||crypto.randomUUID(),name:f,credits:v,grade:R==="None"?void 0:R,semester:D,category:T,genEduSubCategory:T==="General Education"||T==="Other"?U:void 0,boyaDimension:T==="General Education"&&U==="Boya"?M:void 0,isEMI:K,isEapEsp:ee,isWithdrawn:X,isExemption:me,room:x,day:J,startTime:ge,endTime:ot,userLabels:jt,fromCatalog:s?.fromCatalog||lr,teacher:V,originalTags:G,originalSemester:W,originalId:z,department:N};r(Ut),e()},sr=ve=>{g(ve.name),y(ve.room||""),S(Number(ve.credit)||0),P(ve.teacher||""),q(ve.tags||[]),ve.semester&&te(ve.semester),ve.semester&&te(ve.semester),ve.id&&E(ve.id),C(ve.department||"");const jt=Yo(ve,A);if(_(jt.category),Y(jt.genEduSubCategory),F(jt.boyaDimension),ne(jt.isEMI),O(jt.isEapEsp),ke(!0),Array.isArray(ve.classTime)){const lr=ve.classTime;for(let Ut=0;Ut<7;Ut++){const gr=lr[Ut];if(gr&&gr.length>0){const Cs=(Ut+1)%7;he(w1[Cs]);const As=gr[0],nr=gr[gr.length-1];Fi[As]&&Ke(Fi[As].start),Fi[nr]&&Xe(Fi[nr].end);break}}}if(ve.semester){const lr=ve.semester.slice(0,3),Ut=ve.semester.slice(3);let gr="";Ut==="1"?gr=`Year ${lr} Sem 1`:Ut==="2"?gr=`Year ${lr} Sem 2`:Ut==="3"&&(gr=`Year ${lr} Summer`),gr&&Ec.includes(gr)&&Q(gr)}Ve(!1)};return $t.createPortal(a.jsxs("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[10000] p-4",children:[Pe&&a.jsx(GA,{onClose:()=>Ve(!1),onSelect:sr}),a.jsx("div",{className:"bg-surface border border-border rounded-xl w-full max-w-md shadow-2xl overflow-y-auto max-h-[90vh] custom-scrollbar",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-foreground",children:s?d.form.editTitle:d.form.addTitle}),a.jsx("button",{onClick:e,className:"text-muted hover:text-foreground transition-colors",children:a.jsx(ut,{size:24})})]}),!s&&a.jsx("div",{className:"mb-4",children:a.jsxs("button",{id:"btn-import-catalog",type:"button",onClick:()=>Ve(!0),className:"w-full py-2 px-4 rounded-lg border-2 border-dashed border-primary/50 text-primary hover:bg-primary/10 transition-colors flex items-center justify-center gap-2 font-medium",children:[a.jsx(rr,{size:18}),d.form.importCatalog||"Import from Catalog"]})}),a.jsxs("form",{onSubmit:Nr,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-muted mb-1 flex justify-between",children:[a.jsxs("span",{children:[d.form.courseName," ",a.jsx("span",{className:"text-red-400",children:"*"})]}),Be&&a.jsxs("span",{className:"text-[10px] text-primary flex items-center gap-1",children:[a.jsx(Fs,{size:10}),d.form.verified]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{required:!0,type:"text",value:f,disabled:Be,onChange:ve=>g(ve.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary disabled:opacity-50 disabled:bg-surface",placeholder:"e.g. Calculus I"}),Be&&a.jsx("button",{type:"button",onClick:()=>ke(!1),className:"absolute right-2 top-1/2 -translate-y-1/2 text-muted hover:text-foreground transition-colors p-1",title:"Unlock to edit manually",children:a.jsx(Fs,{size:14})})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-muted mb-1 flex justify-between",children:[d.courseSelection?.teacher||"Teacher",Be&&a.jsxs("span",{className:"text-[10px] text-primary flex items-center gap-1",children:[a.jsx(Fs,{size:10}),d.form.verified]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",value:V,disabled:Be,onChange:ve=>P(ve.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary disabled:opacity-50 disabled:bg-surface",placeholder:"e.g. Professor Smith"}),Be&&a.jsx("button",{type:"button",onClick:()=>ke(!1),className:"absolute right-2 top-1/2 -translate-y-1/2 text-muted hover:text-foreground transition-colors p-1",title:"Unlock to edit manually",children:a.jsx(Fs,{size:14})})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-muted mb-1 flex justify-between",children:[d.form.credits,Be&&a.jsxs("span",{className:"text-[10px] text-primary flex items-center gap-1",children:[a.jsx(Fs,{size:10}),d.form.verified]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"number",min:"0",step:"1",value:v,onChange:ve=>S(Number(ve.target.value)),disabled:T==="University Way"||T==="General Education"&&U==="Primer"||Be,className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary disabled:opacity-50 disabled:bg-surface"}),Be&&a.jsx("button",{type:"button",onClick:()=>ke(!1),className:"absolute right-2 top-1/2 -translate-y-1/2 text-muted hover:text-foreground transition-colors p-1",title:"Unlock to edit credits manually",children:a.jsx(Fs,{size:14})}),!Be&&s?.fromCatalog&&a.jsx("button",{type:"button",onClick:()=>ke(!0),className:"absolute right-2 top-1/2 -translate-y-1/2 text-muted hover:text-primary transition-colors p-1",title:"Lock (Verified from Catalog)",children:a.jsx(F5,{size:14})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-1",children:d.form.grade}),a.jsxs("select",{value:R||"None",onChange:ve=>j(ve.target.value),disabled:me||X||T==="General Education"&&U==="Primer",className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary appearance-none disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx("option",{value:"None",children:"-"}),o6.map(ve=>a.jsx("option",{value:ve,children:ve},ve))]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-1",children:d.form.semester}),a.jsx("select",{value:D,onChange:ve=>{const jt=ve.target.value;Q(jt),localStorage.setItem("nsysu-last-semester",jt)},className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary appearance-none",children:Ec.map(ve=>a.jsx("option",{value:ve,children:Nk(ve,u)},ve))})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-muted mb-1 flex justify-between",children:[d.form.category,Be&&a.jsxs("span",{className:"text-[10px] text-primary flex items-center gap-1",children:[a.jsx(Fs,{size:10}),d.form.verified]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("select",{value:T,disabled:Be,onChange:ve=>_(ve.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary appearance-none disabled:opacity-50 disabled:bg-surface",children:wk.map(ve=>a.jsxs("option",{value:ve,children:[d.categories[ve]||ve,ve==="General Education"||ve==="Other"?" ":""]},ve))}),Be&&a.jsx("button",{type:"button",onClick:()=>ke(!1),className:"absolute right-8 top-1/2 -translate-y-1/2 text-muted hover:text-foreground transition-colors p-1",title:"Unlock to edit manually",children:a.jsx(Fs,{size:14})})]})]}),(T==="General Education"||T==="Other")&&a.jsxs("div",{className:"bg-background/50 p-3 rounded-lg border border-border/50 space-y-3 animate-in fade-in slide-in-from-top-1",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-1",children:d.form.subCategory}),a.jsxs("select",{value:U||"",onChange:ve=>Y(ve.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary appearance-none",children:[a.jsx("option",{value:"",disabled:T==="General Education",children:"-"}),T==="General Education"?Bk.filter(ve=>ve!=="Military Training").map(ve=>a.jsx("option",{value:ve,children:d.categories[ve]||ve},ve)):a.jsx("option",{value:"Military Training",children:d.categories["Military Training"]||"Military Training"})]})]}),U==="Boya"&&T==="General Education"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-1",children:d.form.dimension}),a.jsx("select",{value:M||wx[0],onChange:ve=>F(ve.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary appearance-none",children:wx.map(ve=>a.jsx("option",{value:ve,children:ve},ve))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:d.form.attributes}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:`flex items-center space-x-3 cursor-pointer p-2 rounded hover:bg-surface transition-colors ${T==="University Way"||T==="General Education"&&U==="Primer"?"opacity-50 cursor-not-allowed":""}`,children:[a.jsx("input",{type:"checkbox",checked:K,onChange:ve=>ne(ve.target.checked),disabled:Be||T==="University Way"||T==="General Education"&&U==="Primer",className:"w-4 h-4 rounded border-border text-primary focus:ring-primary bg-background disabled:cursor-not-allowed disabled:opacity-50"}),a.jsx("span",{className:"text-sm text-foreground",children:d.form.isEMI}),Be&&a.jsx("button",{type:"button",onClick:ve=>{ve.preventDefault(),ke(!1)},className:"ml-auto text-muted hover:text-foreground transition-colors p-1",title:"Unlock to edit manually",children:a.jsx(Fs,{size:14})})]}),a.jsxs("label",{className:`flex items-center space-x-3 cursor-pointer p-2 rounded hover:bg-surface transition-colors ${T==="University Way"||T==="General Education"&&U==="Primer"?"opacity-50 cursor-not-allowed":""}`,children:[a.jsx("input",{type:"checkbox",checked:ee,onChange:ve=>{const jt=ve.target.checked;O(jt),jt?(Xt(T),L(U),_("General Education"),Y("Cross-College")):(_(wt),Y(ue))},disabled:T==="University Way"||T==="General Education"&&U==="Primer",className:"w-4 h-4 rounded border-border text-primary focus:ring-primary bg-background disabled:cursor-not-allowed"}),a.jsx("span",{className:"text-sm text-foreground",children:d.form.isEapEsp})]}),a.jsxs("label",{className:`flex items-center space-x-3 cursor-pointer p-2 rounded hover:bg-surface transition-colors ${T==="University Way"||T==="General Education"&&U==="Primer"?"opacity-50 cursor-not-allowed":""}`,children:[a.jsx("input",{type:"checkbox",checked:X,onChange:ve=>{Ae(ve.target.checked),ve.target.checked&&(Ee(!1),j("None"))},disabled:T==="University Way"||T==="General Education"&&U==="Primer",className:"w-4 h-4 rounded border-border text-red-500 focus:ring-red-500 bg-background disabled:cursor-not-allowed"}),a.jsx("span",{className:"text-sm text-foreground",children:d.form.isWithdrawn})]}),a.jsxs("label",{className:`flex items-center space-x-3 cursor-pointer p-2 rounded hover:bg-surface transition-colors ${T==="University Way"||T==="General Education"&&U==="Primer"||T==="Other"&&U==="Military Training"?"opacity-50 cursor-not-allowed":""}`,children:[a.jsx("input",{type:"checkbox",checked:me,onChange:ve=>{Ee(ve.target.checked),ve.target.checked&&(Ae(!1),j("None"))},disabled:T==="University Way"||T==="General Education"&&U==="Primer"||T==="Other"&&U==="Military Training",className:"w-4 h-4 rounded border-border text-green-500 focus:ring-green-500 bg-background disabled:cursor-not-allowed"}),a.jsx("span",{className:"text-sm text-foreground",children:d.form.isExemption})]})]})]}),a.jsxs("div",{className:"bg-background/50 p-3 rounded-lg border border-border/50",children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:d.form.dayTime}),a.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[a.jsxs("select",{value:J||"",onChange:ve=>he(ve.target.value?ve.target.value:void 0),className:"col-span-1 bg-background border border-border rounded-lg px-2 py-2 text-sm text-foreground focus:outline-none focus:ring-2 focus:ring-primary appearance-none",children:[a.jsx("option",{value:"",children:d.form.selectDay}),w1.map(ve=>a.jsx("option",{value:ve,children:ve},ve))]}),a.jsx("input",{type:"time",value:ge||"",onChange:ve=>Ke(ve.target.value||void 0),className:"col-span-1 bg-background border border-border rounded-lg px-2 py-2 text-sm text-foreground focus:outline-none focus:ring-2 focus:ring-primary appearance-none",style:{backgroundColor:l==="light"?"#ffffff":void 0,colorScheme:l}}),a.jsx("input",{type:"time",value:ot||"",onChange:ve=>Xe(ve.target.value||void 0),className:"col-span-1 bg-background border border-border rounded-lg px-2 py-2 text-sm text-foreground focus:outline-none focus:ring-2 focus:ring-primary appearance-none",style:{backgroundColor:l==="light"?"#ffffff":void 0,colorScheme:l}})]})]}),a.jsxs("div",{className:"flex gap-3 pt-2",children:[s&&t&&a.jsx("button",{type:"button",onClick:()=>Se(!0),className:"px-3 py-2 rounded-lg border border-red-500/50 text-red-400 hover:bg-red-500/10 transition-colors",title:"Delete Course",children:a.jsx(sd,{size:20})}),a.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 rounded-lg border border-border text-muted hover:bg-surface transition-colors font-medium",children:d.form.cancel}),a.jsxs("button",{type:"submit",className:"w-full bg-primary hover:bg-[var(--color-primary-hover)] text-white font-bold py-3 rounded-lg shadow-lg shadow-primary/20 transition-all flex justify-center items-center gap-2",children:[a.jsx(vt,{size:20}),d.form.save]})]})]})]})}),a.jsx(Z0,{isOpen:Le,title:d.courseList?.remove?`${d.courseList.remove} ${d.form.courseName}`:"Delete Course",message:d.app.deleteConfirm||"Are you sure you want to delete this course?",confirmText:"Confirm",cancelText:d.form.cancel,isDestructive:!0,onConfirm:()=>{s&&t&&(t(s.id),e())},onCancel:()=>Se(!1)})]}),document.body)},pS=[{version:"v7.2",date:"2026.02.28",changes:[" ","  (Web Share API)"," ","  Bug"]},{version:"v7.1",date:"2026.02.28",changes:["  (BottomNav)  (FAB)"," "," ","  100% "," "]},{version:"v7.0",date:"2026.02.27",changes:[" "," Google  Firebase Auth  Firestore"," "," ","  Metadata "]},{version:"v6.3",date:"2026.02.24",changes:[" Smart Export: Planner avoids duplicating courses you've already exported."," Search Reliability: Fixed an issue preventing catalog scroll and highlight if a hidden label filter was active."," UI Polish: Added comfortable padding to the Semester Schedule grade table."]},{version:"v6.2",date:"2026.02.03",changes:[" Safe Export: Fixed data loss when exporting from Planner (Teacher/Time/Room now sync correctly)."," Smart Colors: 'Major Req' badges in Planner now correctly check the course's year instead of your current year."]},{version:"v6.1",date:"2026.01.25",changes:[" Social Connect: Added official Instagram link in Support."," Micro-credits+: Added Fall/Spring semesters & improved sorting (Chronological)."]},{version:"v6.0",date:"2026.01.21",changes:[" Rule Check Complete: Added all 9 Interdisciplinary Options (Minors, Double Major, Teacher Ed, etc.)."," Micro-credits Flow: Visualize your micro-credit accumulation with a new interactive status panel."," Data Persistence: Your progress in 'Rule Check' is now fully backed up and restored via JSON."," Complete Audit: Adjusted logic for Teacher Education, Cross-disciplinary, and Diverse Learning programs."]},{version:"v5.3",date:"2026.01.10",changes:[" Credit Locking: Official catalog courses now have locked credits to prevent accidental edits (unlockable)."," Military Training: Full support added with auto-categorization, localized badges, and exemption logic."," Support FAQs: Added a comprehensive FAQ section in the Support window to answer common questions."," UI Polish: Enhanced localized labels and interactions for a smoother experience."]},{version:"v5.2",date:"2026.01.09",changes:[" Smarter Logic: 'Primer on College Life' now auto-locks to Grade '-' and 0 credits."," Fix Location Refined: 'Primer', 'Exemption', and 'Service Learning' no longer prompt for location fixes."," Dark Mode Polish: Improved visibility for Schedule buttons and badges."," Quality of Life: Smoother interactions for Exemption/Withdraw statuses."]},{version:"v5.1",date:"2026.01.09",changes:[" Exemption Feature (): Track credit-bearing courses that don't affect GPA (e.g. transfer credits)."," Enhanced Logic: 'Exemption' and 'Withdraw' are now mutually exclusive."," Ui Refinements: Simplified labels & Grey badges for neutral status."," Support Update: Direct email integration with clearer subject lines."]},{version:"v5.0",date:"2026.01.08",changes:[" GPA Calculation: Now supporting Semester GPA & Total Average (Avg of Semesters)."," Refined Dashboard: 11-column grid layout for perfect alignment & responsiveness."," UI Polish: Optimized 'Course Plan' navigation & visual balances."," Deep Localization: Full Mandarin support for all new metrics."]},{version:"v5.0.2",date:"2026.01.09",changes:[" Catalog Upgrade: Now displays course times (e.g., Tue 10:10-12:00) in the Import from Catalog list."]},{version:"v4.5",date:"2026.01.08",changes:[" Smart Major Planning: One-click import now covers 'Major Electives' & filters out Graduate courses."," Enhanced Data Safety: Your 'Label Library' is now protected when clearing data."," 114-2 Ready: Optimized UI and performance for the upcoming course selection period."," Visual Polish: Refined alignments and interactions for a premium experience."]},{version:"v4.4",date:"2026.01.07",changes:[" Rebranding: We are now 'ClearGrad '! Refreshed identity."," Brand New UI: Total overhaul of Theme Colors for both Dark & Light modes."," Colorful Badges: Distinct, vibrant labels for Course Catalog & Schedule."," Plan Smart: Preloaded Catalog data for instant Planner switching."]},{version:"v4.3",date:"2026.01.06",changes:[" Labeling System: Organize your planner with custom colored labels (e.g. 'Backup', 'High Priority')."," Course Selection Schedule: Added detailed 114-2 timeline (accessible in Planner)."," Easter Egg: v4.3 is the highest GPA possible! Wishing everyone a perfect 4.3 semester! "]},{version:"v4.2",date:"2026.01.04",changes:[" Dashboard Redesign: New layout for Graduation Progress with clearer visuals & compaction."," Violet & Indigo Theme: Liberal Arts section now uses distinct purple shades for clarity."," Completed Localization: Fully translated all Dashboard labels (Unique Dim, Gen Edu)."," New App Icon: Updated header logo and favicon to new brand asset."]},{version:"v4.1",date:"2026.01.02",changes:[" Smart Data Warning: Auto-detects if the University Catalog data is incomplete (e.g. 114-2)."," Setup Reminder: Friendly prompt to help new users set up their profile."," Tutorial Upgrade: Interactive guide now covers the new Planner & Search features."," Fixes: Reverted EAP/ESP filter strictness & UI polish."]},{version:"v4.0",date:"2026.01.01",changes:[" Major Update: Course Planner & Classification Intelligence"," Enhanced Catalog Filters: Added ID-Based Rules (GEAE/GEAI...), EAP/ESP & EMI Filters"," UI Refinements: Enhanced Time Picker, Dark Mode & overall Visual Polish"," Copy Course ID: Click any Course ID to copy it instantly (with toast notification)"," Calendar Export: Export schedule to Google/Apple Calendar (.ics)"]},{version:"v3.2",date:"2025.12.30",changes:[" EMI Labels: English-taught courses are now clearly marked with a purple 'EMI' badge in the catalog.","Easily identify courses that meet your English graduation requirements."]},{version:"v3.1",date:"2025.12.30",changes:[" Categorized Majors: Settings now list departments by College (Arts, Science, Engineering, etc.).","Easier to find your major among 30+ options.","Verified department names against internal course data."]},{version:"v3.0",date:"2025.12.30",changes:[" Smart Graduation Audit: Set your Major in Settings!","Auto-Detect: Importing courses now checks YOUR major requirements automatically.","Know instantly if a course is 'Required' or 'Elective' for YOU.","Added Settings for 'Entrance Year' for future rule checks."]},{version:"v2.11",date:"2025.12.30",changes:["Offline Fallback: Course data (111-114) is now bundled!","If the school API goes down, the app will automatically use local data.","Includes 112 semesters as requested."]},{version:"v2.9",date:"2025.12.30",changes:["Custom Semesters: Use '+ Add Plan' to create semesters (e.g. Year 1 Summer)","Dynamic Semester Sorting: Summer and other semesters auto-arrange efficiently","114-2 Courses are now available in Catalog!"]},{version:"v2.3",date:"2025.12.30",changes:["New Announcement System: Welcome info on startup","Added Quick Language & Theme toggles in Announcement","Added 'Start Tutorial' button directly in welcome message","Smart Skip: 'Don't show again' remembers your preference until next update"]},{version:"v2.2",date:"2025.12.29",changes:["UI Improvements: More compact grid for better visibility","Tutorial Updates: Fixed highlighting issues"]},{version:"v2.1",date:"2025.12.29",changes:["Enhanced Course Search: Strictly scoped to selected semester for accuracy","Added Schedule Image Download functionality","Improved lazy loading for faster catalog performance"]},{version:"v2.0",date:"2025.12.29",changes:["Major Update: Course Catalog Integration",'Added "Import from Catalog" feature with NSYSU Open Data',"Smart Auto-fill: Schedule, Credits, and Course Name","Auto-detection for EMI, EAP/ESP, and Cross-College courses","Auto-categorization for Boya (Dimensions), Chinese, and Sports"]},{version:"v1.4",date:"2025.12.28",changes:['Introduced "Daylight Mode" (Light Theme)',"Refined Dashboard styling for better readability","Added Theme Toggle in Settings"]},{version:"v1.3",date:"2025.12.28",changes:["Improved Support Modal (Direct Gmail Link)","Optimized UI for better readability","Added edit functionality to course cards","Improved Interactive Tutorial (Better UI, Skip, Schedule Step)","Improved Course Plan navigation buttons (Always visible)"]},{version:"v1.2",date:"2025.12.28",changes:["Added 'Withdraw' () feature for course management","Added Update Journal & Support features","Improve translation functionality"]},{version:"v1.1",date:"2025.12.27",changes:["Refactored Semester Column layout","Add course schedule feature","Optimized UI for better readability"]},{version:"v1.0",date:"2025.12.26",changes:["Initial Release","Dual Language Support (English / Chinese)","Complete Graduation Credit Calculation"]}],xf=pS[0].version,c6=({onClose:r})=>{const{t:e}=it();return a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-surface border border-border rounded-xl w-full max-w-lg shadow-2xl overflow-hidden flex flex-col max-h-[85vh]",children:[a.jsxs("div",{className:"p-4 border-b border-border bg-background/50 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-foreground",children:e.updates.title}),a.jsx("p",{className:"text-sm text-muted",children:e.updates.desc})]}),a.jsx("button",{onClick:r,className:"text-muted hover:text-foreground transition-colors",children:a.jsx(ut,{size:24})})]}),a.jsx("div",{className:"overflow-y-auto p-6 space-y-6 custom-scrollbar",children:a.jsx("div",{className:"space-y-8",children:pS.map((t,s)=>{const A=t.version.startsWith("v5."),l=t.version.startsWith("v4.");let d="border-border hover:border-primary",u="border-primary",f="text-primary",g="text-muted marker:text-muted";return t.version.startsWith("v7.")?(d="border-amber-500/50 hover:border-amber-500",u="border-amber-500 shadow-[0_0_10px_rgba(245,158,11,0.5)]",f="bg-gradient-to-r from-amber-400 to-orange-500 bg-clip-text text-transparent",g="text-foreground font-medium marker:text-amber-500"):t.version.startsWith("v6.")?(d="border-emerald-500/50 hover:border-emerald-500",u="border-emerald-500 shadow-[0_0_10px_rgba(16,185,129,0.5)]",f="bg-gradient-to-r from-emerald-400 to-cyan-400 bg-clip-text text-transparent",g="text-foreground font-medium marker:text-emerald-500"):A?(d="border-sky-500/50 hover:border-sky-500",u="border-sky-500 shadow-[0_0_10px_rgba(14,165,233,0.5)]",f="bg-gradient-to-r from-sky-400 to-blue-600 bg-clip-text text-transparent",g="text-foreground font-medium marker:text-sky-500"):l&&(d="border-purple-500/50 hover:border-purple-500",u="border-purple-500 shadow-[0_0_10px_rgba(168,85,247,0.5)]",f="bg-gradient-to-r from-purple-400 to-pink-600 bg-clip-text text-transparent",g="text-foreground font-medium marker:text-purple-500"),a.jsxs("div",{className:`relative pl-6 border-l-2 transition-colors ${d}`,children:[a.jsx("div",{className:`
                                        absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-surface border-2 
                                        ${u}
                                    `}),a.jsxs("div",{className:"mb-2 flex items-baseline gap-3",children:[a.jsx("span",{className:`text-lg font-bold ${f}`,children:t.version}),a.jsxs("span",{className:"text-xs text-muted font-mono flex items-center gap-1",children:[a.jsx(OA,{size:12}),t.date]})]}),a.jsx("ul",{className:"space-y-1",children:t.changes.map((x,y)=>a.jsx("li",{className:`text-sm list-disc list-inside ${g}`,children:x},y))})]},s)})})}),a.jsx("div",{className:"p-4 border-t border-border bg-background/30",children:a.jsx("button",{onClick:r,className:"w-full bg-surface hover:bg-background text-foreground font-medium py-2 rounded-lg transition-colors border border-border",children:e.updates.close})})]})})},d6={apiKey:"AIzaSyAFS5YsnbWmPKh1lmBGLsLCGtmkrnC4doM",authDomain:"cleargrad-database.firebaseapp.com",projectId:"cleargrad-database",storageBucket:"cleargrad-database.firebasestorage.app",messagingSenderId:"352836249313",appId:"1:352836249313:web:9a21623277828595f379a0",measurementId:"G-2VQBXX1ZN9"},xS=t0(d6),ey=bE(xS),Lo=M2(xS),u6=new Wn,h6=async()=>{try{return(await o4(ey,u6)).user}catch(r){throw console.error("Login failed:",r),r}},f6=async()=>{try{await PU(ey)}catch(r){throw console.error("Logout failed:",r),r}},yS=k.createContext(void 0),m6=({children:r})=>{const[e,t]=k.useState(null),[s,A]=k.useState(!0);k.useEffect(()=>{const u=OU(ey,f=>{t(f),A(!1)});return()=>u()},[]);const l=async()=>{try{await h6()}catch(u){console.error("Login Error:",u)}},d=async()=>{try{await f6()}catch(u){console.error("Logout Error:",u)}};return a.jsx(yS.Provider,{value:{user:e,loading:s,login:l,logout:d},children:r})},Bd=()=>{const r=k.useContext(yS);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r},g6=({onClose:r})=>{const{t:e}=it(),{login:t}=Bd(),[s,A]=k.useState("main");return k.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-surface border border-border rounded-xl w-full max-w-lg shadow-2xl p-6 relative overflow-hidden",children:[a.jsx("button",{onClick:r,className:"absolute top-4 right-4 text-muted hover:text-foreground transition-colors",children:a.jsx(ut,{size:24})}),s==="main"?a.jsxs("div",{className:"mt-2 text-center animate-in fade-in slide-in-from-left-4 duration-300",children:[a.jsx("div",{className:"w-16 h-16 bg-primary/20 text-primary rounded-full flex items-center justify-center mx-auto mb-4 border border-primary/20",children:a.jsx(iC,{size:32})}),a.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:e.support.title}),a.jsx("p",{className:"text-muted mb-8 leading-relaxed",children:e.support.message}),a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsxs("button",{onClick:l=>{l.preventDefault();const d=Date.now(),f=(window._supportMailClicks||[]).filter(g=>d-g<1e3);if(f.push(d),window._supportMailClicks=f,f.length>=3){window._supportMailClicks=[],r(),t();return}f.length===1&&setTimeout(()=>{(window._supportMailClicks||[]).filter(x=>Date.now()-x<1e3).length<3&&window.open("https://mail.google.com/mail/?view=cm&fs=1&to=coursetracker.supp0rt@gmail.com&su=ClearGrad.-Support&body=(Content)","_blank")},400)},className:"flex items-center justify-center gap-3 w-full bg-surface hover:bg-background border border-border text-foreground font-medium py-3 rounded-lg transition-all shadow-sm hover:shadow-md group",children:[a.jsx(iC,{className:"text-primary group-hover:scale-110 transition-transform"}),"coursetracker.supp0rt@gmail.com"]}),a.jsxs("a",{href:"https://www.instagram.com/cleargrad?igsh=ZXR5MmtyaGlrejgx&utm_source=qr",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-3 w-full bg-surface hover:bg-background border border-border text-foreground font-medium py-3 rounded-lg transition-all shadow-sm hover:shadow-md group",children:[a.jsx(N5,{className:"text-pink-600 group-hover:scale-110 transition-transform"}),"ClearGrad Instagram"]}),a.jsxs("button",{onClick:()=>A("faq"),className:"flex items-center justify-center gap-3 w-full bg-surface hover:bg-background border border-border text-foreground font-medium py-3 rounded-lg transition-all shadow-sm hover:shadow-md group",children:[a.jsx(eN,{className:"text-primary group-hover:scale-110 transition-transform"}),e.support.faqTitle||"Frequently Asked Questions"]})]})]}):a.jsxs("div",{className:"mt-2 text-left animate-in fade-in slide-in-from-right-4 duration-300",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b border-border pb-2",children:[a.jsx("button",{onClick:()=>A("main"),className:"p-1 rounded-full hover:bg-surface text-muted hover:text-foreground transition-colors",children:a.jsx(J2,{size:20})}),a.jsx("h3",{className:"text-lg font-bold text-foreground",children:e.support.faqTitle||"FAQ"})]}),a.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto custom-scrollbar pr-2",children:e.support.faq&&e.support.faq.map((l,d)=>a.jsxs("details",{className:"group bg-surface/50 border border-border rounded-lg overflow-hidden",onToggle:u=>{const f=u.currentTarget;f.open&&setTimeout(()=>{f.scrollIntoView({behavior:"smooth",block:"nearest"})},100)},children:[a.jsxs("summary",{className:"flex items-center justify-between p-3 cursor-pointer hover:bg-surface transition-colors select-none font-medium text-sm text-foreground",children:[a.jsx("span",{children:l.question}),a.jsx("span",{className:"transition-transform group-open:rotate-180 text-muted",children:""})]}),a.jsx("div",{className:"p-3 pt-0 text-sm text-muted border-t border-border/50 bg-background/30 leading-relaxed",children:a.jsx("div",{className:"pt-2",children:l.answer})})]},d))})]}),a.jsxs("div",{className:"border-t border-border mt-6 pt-4 text-center",children:[a.jsx("p",{className:"text-xs text-muted/50 mb-1",children:e.support.disclaimer||" Unofficial App. Not affiliated with NSYSU."}),a.jsx("p",{className:"text-[10px] text-muted/30",children:e.support.copyright||"Data for reference only. Please verify with school system."})]})]})})},p6=({onClose:r,theme:e,setTheme:t,onStartTutorial:s})=>{const{t:A,language:l,setLanguage:d}=it(),[u,f]=k.useState(!1),{login:g,user:x}=Bd();return k.useEffect(()=>(document.body.style.overflow="hidden",document.body.classList.add("overflow-hidden"),()=>{document.body.style.overflow="",document.body.classList.remove("overflow-hidden")}),[]),a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[100] p-4 animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-surface border border-border rounded-xl w-full max-w-2xl shadow-2xl overflow-hidden flex flex-col relative animate-in zoom-in-95 duration-300",children:[a.jsxs("div",{className:"absolute top-3 left-3 flex items-center gap-2 z-10",children:[a.jsx("div",{className:"px-3 py-0.5 bg-surface border border-amber-500/50 rounded-full shadow-[0_0_10px_rgba(245,158,11,0.5)]",children:a.jsx("span",{className:"text-xs font-bold bg-gradient-to-r from-amber-400 to-orange-500 bg-clip-text text-transparent",children:xf})}),a.jsx("button",{onClick:()=>d(l==="en"?"zh":"en"),className:"p-1 rounded-full bg-surface hover:bg-background border border-border text-muted hover:text-primary transition-colors",title:A.settings.language,children:a.jsx(V0,{size:14})}),a.jsx("button",{onClick:()=>t(e==="dark"?"light":"dark"),className:"p-1 rounded-full bg-surface hover:bg-background border border-border text-muted hover:text-warning transition-colors",title:e==="dark"?A.settings.lightMode:A.settings.darkMode,children:e==="dark"?a.jsx(bx,{size:14}):a.jsx(xx,{size:14})})]}),a.jsx("button",{onClick:()=>r(!1),className:"absolute top-3 right-3 text-muted hover:text-foreground transition-colors p-1",children:a.jsx(ut,{size:20})}),a.jsxs("div",{className:"p-6 pb-2 text-center flex flex-col items-center mt-4",children:[a.jsx("div",{className:"bg-primary/10 p-3 rounded-full mb-3 ring-1 ring-primary/20",children:a.jsx(L5,{size:28,className:"text-primary animate-bounce-subtle"})}),a.jsx("h2",{className:"text-xl font-bold text-foreground",children:A.announcement.title})]}),a.jsx("div",{className:"px-6 py-2",children:a.jsxs("div",{className:"bg-background/50 border border-border/50 rounded-lg p-4 text-left",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3 pb-3 border-b border-border/50",children:[a.jsx("span",{className:"text-sm font-medium text-foreground",children:A.announcement.firstTime}),a.jsxs("button",{onClick:()=>{r(!1),s()},className:"flex items-center gap-1.5 px-3 py-1 bg-primary/10 hover:bg-primary/20 text-primary text-xs font-bold rounded-full border border-primary/20 transition-all hover:scale-105",children:[a.jsx(yx,{size:12}),A.announcement.startTutorial]})]}),a.jsxs("div",{className:"flex items-center gap-2 mb-3 pb-3 border-b border-border/50",children:[a.jsx("span",{className:"text-sm font-medium text-foreground",children:A.announcement.haveQuestions}),x?a.jsxs("div",{className:"flex w-full items-center justify-between border border-primary/30 max-w-xs px-3 py-1.5 bg-primary/5 rounded-full",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[x.photoURL?a.jsx("img",{src:x.photoURL,alt:x.displayName||"User",className:"w-5 h-5 rounded-full object-cover border border-border"}):a.jsx("div",{className:"w-5 h-5 rounded-full bg-primary/20 flex items-center justify-center text-[10px] text-primary font-bold",children:(x.displayName||x.email||"?").charAt(0).toUpperCase()}),a.jsx("span",{className:"text-sm font-bold text-primary truncate max-w-[120px]",children:x.displayName||"User"})]}),a.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600 dark:text-green-400 font-bold bg-green-500/10 px-2 py-0.5 rounded-full",children:[a.jsxs("span",{className:"relative flex h-2 w-2",children:[a.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),a.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]}),A.syncState.bound]})]}):a.jsxs("button",{onClick:async()=>{x||await g()},className:"flex items-center gap-2 px-4 py-1.5 bg-white hover:bg-gray-100 text-gray-800 text-sm font-bold rounded-full border border-gray-300 transition-all hover:scale-105 shadow-sm dark:bg-gray-800 dark:border-gray-600 dark:text-white dark:hover:bg-gray-700",children:[a.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",children:[a.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),a.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),a.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),a.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Log in with Google"]})]}),a.jsx("div",{className:"text-foreground/90 text-sm leading-relaxed space-y-1",children:A.announcement.defaultMessage.split(`
`).map((y,v)=>a.jsx("p",{className:`min-h-[1.25rem] ${y.trim()===""?"h-2":""}`,children:y.split(/(\*\*.*?\*\*)/).map((S,R)=>S.startsWith("**")&&S.endsWith("**")?a.jsx("strong",{className:"text-primary font-bold",children:S.slice(2,-2)},R):S)},v))})]})}),a.jsxs("div",{className:"p-6 pt-2 flex flex-col items-center gap-4",children:[a.jsx("p",{className:"text-[#EC9385] text-xs text-center font-bold px-4",children:A.announcement.disclaimer}),a.jsxs("div",{className:"w-full space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx("input",{type:"checkbox",id:"skip-announcement",checked:u,onChange:y=>f(y.target.checked),className:"w-4 h-4 rounded border-gray-600 bg-surface text-primary focus:ring-primary/50"}),a.jsx("label",{htmlFor:"skip-announcement",className:"text-xs text-muted cursor-pointer select-none",children:A.announcement.dontShowAgain})]}),a.jsx("button",{onClick:()=>r(u),className:"w-full bg-[#303030] hover:bg-[#8D9CB2] text-white dark:bg-[#EFEFEF] dark:hover:bg-[#A8C8FA] dark:text-[#303030] font-bold py-3 rounded-lg transition-all shadow-lg hover:shadow-primary/25 active:scale-95",children:A.announcement.close})]})]})]})})},x6=({semesterName:r,availableSemesters:e,onFix:t,onSkip:s,isLoading:A,missingCourses:l=[]})=>{const{t:d}=it(),[u,f]=k.useState("");return $t.createPortal(a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[10000] p-4 animate-in fade-in duration-300",children:a.jsx("div",{className:"bg-surface border border-yellow-500/50 rounded-xl w-full max-w-md shadow-2xl p-6 relative transition-all",children:A?a.jsxs("div",{className:"flex flex-col items-center justify-center py-8 space-y-4",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-500"}),a.jsxs("p",{className:"text-lg font-bold text-foreground animate-pulse",children:[d.dataFix?.button?`${d.dataFix.autoFix}`:"Fixing...","..."]}),a.jsx("p",{className:"text-sm text-muted",children:d.dataFix?.instruction?d.dataFix.instruction.split("(")[0]:"Matching courses..."})]}):a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:s,className:"absolute right-4 top-4 text-muted hover:text-foreground transition-colors",children:a.jsx(ut,{size:20})}),a.jsxs("div",{className:"flex items-center gap-3 mb-4 text-yellow-500",children:[a.jsx("div",{className:"bg-yellow-500/10 p-2 rounded-full",children:a.jsx(Bs,{size:24})}),a.jsx("h2",{className:"text-lg font-bold",children:d.dataFix?.title||"Missing Data Detected"})]}),a.jsxs("p",{className:"text-muted mb-2 leading-relaxed",children:[d.dataFix?.desc||"Some courses in"," ",a.jsx("strong",{className:"text-foreground",children:r})," ",d.dataFix?.descSuffix||"are missing details (Teacher, Department, etc)."]}),l.length>0&&a.jsxs("div",{className:"bg-surface/50 rounded-lg p-3 mb-4 border border-border/50 max-h-32 overflow-y-auto custom-scrollbar",children:[a.jsx("p",{className:"text-xs font-bold text-muted uppercase mb-2",children:"Affected Courses:"}),a.jsx("ul",{className:"list-disc list-inside text-sm text-foreground space-y-1",children:l.map((g,x)=>a.jsx("li",{className:"truncate",children:g},x))})]}),a.jsx("p",{className:"text-sm text-muted mb-6",children:d.dataFix?.instruction||"Please select the original catalog semester (e.g., 114-1) to auto-fill this data."}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-1.5",children:d.dataFix?.sourceLabel||"Original Semester Source"}),a.jsxs("select",{value:u,onChange:g=>f(g.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2.5 text-foreground focus:outline-none focus:ring-2 focus:ring-yellow-500 appearance-none",children:[a.jsx("option",{value:"",children:d.dataFix?.selectPlaceholder||"Select a semester..."}),e.map(g=>{let x=g;return g.endsWith("3")?x=`${g.slice(0,g.length-1)}-${d.catalog?.summer||"Summer"}`:g.length===4&&(x=`${g.substring(0,3)}-${g.substring(3)}`),a.jsx("option",{value:g,children:x},g)})]})]}),a.jsxs("div",{className:"flex gap-3 pt-2",children:[a.jsx("button",{onClick:s,className:"flex-1 px-4 py-2 rounded-lg border border-border text-muted hover:bg-surface transition-colors font-medium",children:d.dataFix?.skip||"Skip"}),a.jsxs("button",{onClick:()=>{u&&t(u)},disabled:!u,className:`flex-1 px-4 py-2 rounded-lg font-bold shadow-lg transition-all flex justify-center items-center gap-2 ${u?"bg-yellow-500 hover:bg-yellow-400 text-black shadow-yellow-500/20":"bg-surface border border-border text-muted cursor-not-allowed"}`,children:[a.jsx(T5,{size:18}),d.dataFix?.autoFix||"Auto Fix"]})]})]})]})})}),document.body)},y6=({candidates:r,userCourse:e,onSelect:t,onCancel:s})=>{const{t:A}=it(),[l,d]=k.useState(null);return k.useEffect(()=>{d(null)},[e.id]),$t.createPortal(a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[10001] p-4 animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-surface border border-border rounded-xl w-full max-w-lg shadow-2xl flex flex-col max-h-[85vh]",children:[a.jsxs("div",{className:"p-4 border-b border-border bg-background/50 flex justify-between items-center",children:[a.jsx("h2",{className:"text-lg font-bold text-foreground",children:A.courseSelection?.title||"Multiple Matches Found"}),a.jsx("button",{onClick:s,className:"text-muted hover:text-foreground transition-colors",children:a.jsx(ut,{size:20})})]}),a.jsxs("div",{className:"p-4 overflow-y-auto custom-scrollbar",children:[a.jsxs("p",{className:"text-muted mb-4",children:[A.courseSelection?.desc||"We found multiple courses that look like"," ",a.jsx("strong",{className:"text-foreground",children:e.name}),". ",A.courseSelection?.select||"Please select the correct one:"]}),a.jsx("div",{className:"space-y-2",children:r.map(u=>{const f=l===u.id;return a.jsxs("div",{onClick:()=>d(u.id),className:`p-3 rounded-lg border cursor-pointer transition-all flex items-start gap-3 ${f?"bg-primary/20 border-primary shadow-lg shadow-primary/10":"bg-surface border-border hover:bg-surface/80 hover:border-primary/50"}`,children:[a.jsx("div",{className:`mt-1 w-4 h-4 rounded-full border flex items-center justify-center shrink-0 ${f?"border-primary bg-primary":"border-muted"}`,children:f&&a.jsx(vt,{size:10,className:"text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsx("h3",{className:`font-bold ${f?"text-primary":"text-foreground"}`,children:u.name}),a.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded border border-border bg-background/50 text-muted",children:u.id})]}),a.jsxs("div",{className:"text-sm text-muted mt-1 grid grid-cols-2 gap-x-4 gap-y-1",children:[a.jsxs("span",{children:[a.jsxs("span",{className:"opacity-70 mr-1",children:[A.courseSelection?.teacher||"Teacher",":"]}),u.teacher]}),a.jsxs("span",{children:[a.jsxs("span",{className:"opacity-70 mr-1",children:[A.courseSelection?.room||"Room",":"]}),u.room||"-"]})]})]})]},u.id)})})]}),a.jsxs("div",{className:"p-4 border-t border-border bg-background/50 flex gap-3 justify-end",children:[a.jsx("button",{onClick:s,className:"px-4 py-2 rounded-lg text-muted hover:text-foreground hover:bg-surface transition-colors font-medium text-sm",children:A.courseSelection?.cancel||"Skip this Course"}),a.jsx("button",{onClick:()=>{const u=r.find(f=>f.id===l);u&&t(u)},disabled:!l,className:`px-4 py-2 rounded-lg font-bold text-sm shadow-lg transition-all ${l?"bg-primary hover:bg-sky-400 text-white shadow-primary/20":"bg-surface border border-border text-muted cursor-not-allowed"}`,children:A.app.settings==="Settings"?"Confirm Selection":A.courseSelection?.confirm||"Confirm"})]})]})}),document.body)},b6=({patchedCount:r,unmatchedNames:e,onClose:t})=>{const{t:s}=it();return $t.createPortal(a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[10002] p-4 animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-surface border border-border rounded-xl w-full max-w-md shadow-2xl p-6 relative flex flex-col max-h-[85vh]",children:[a.jsx("button",{onClick:t,className:"absolute right-4 top-4 text-muted hover:text-foreground transition-colors",children:a.jsx(ut,{size:20})}),a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.length>0?a.jsx("div",{className:"bg-red-500/10 p-2 rounded-full text-red-500",children:a.jsx(JD,{size:24})}):a.jsx("div",{className:"bg-green-500/10 p-2 rounded-full text-green-500",children:a.jsx(aC,{size:24})}),a.jsx("h2",{className:"text-lg font-bold text-foreground",children:e.length>0?s.fixReport?.titleAttention||"Fix Report: Attention Needed":s.fixReport?.titleComplete||"Auto-Fix Complete"})]}),a.jsxs("div",{className:"space-y-6 overflow-y-auto custom-scrollbar pr-2",children:[r>0&&a.jsxs("div",{className:"bg-green-500/5 border border-green-500/20 rounded-lg p-4 flex items-center gap-3",children:[a.jsx(aC,{size:20,className:"text-green-500 shrink-0"}),a.jsxs("p",{className:"text-foreground",children:[s.fixReport?.successUpdate||"Successfully updated"," ",a.jsx("strong",{className:"text-green-500",children:r})," ",s.fixReport?.courses||"courses","."]})]}),e.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsx("p",{className:"text-foreground font-medium",children:s.fixReport?.unmatched||"Could not find matches for the following courses:"}),a.jsx("div",{className:"bg-surface/50 border border-border rounded-lg p-1",children:e.map((A,l)=>a.jsxs("div",{className:"px-3 py-2 border-b last:border-0 border-border/50 text-sm text-muted flex items-start gap-2",children:[a.jsx("span",{className:"text-red-500 mt-0.5",children:""}),A]},l))}),a.jsx("p",{className:"text-xs text-muted",children:s.courseSelection?.manualHint||"Please check these courses manually in the planner."})]}),r===0&&e.length===0&&a.jsx("p",{className:"text-muted text-center py-4",children:s.fixReport?.noChanges||"No changes made. Try selecting a different source semester, or the course names might not match the catalog."})]}),a.jsx("div",{className:"mt-6 pt-4 border-t border-border flex justify-end",children:a.jsx("button",{onClick:t,className:"px-6 py-2 rounded-lg bg-primary hover:bg-sky-400 text-white font-bold shadow-lg shadow-primary/20 transition-all",children:s.fixReport?.done||"Done"})})]})}),document.body)},v6=({onConfirm:r,onBackupAndConfirm:e,onCancel:t,existingCount:s})=>{const{t:A}=it(),l=k.useRef(null);return k.useEffect(()=>{const d=u=>{l.current&&!l.current.contains(u.target)&&t()};return document.addEventListener("mousedown",d),()=>{document.removeEventListener("mousedown",d)}},[t]),a.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-[100] p-4 animate-in fade-in duration-200",children:a.jsxs("div",{ref:l,className:"bg-surface border border-border rounded-xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"bg-yellow-500/10 border-b border-yellow-500/20 p-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2 text-yellow-500 font-bold text-lg",children:[a.jsx(Bs,{size:24}),A.importModal.title]}),a.jsx("button",{onClick:t,className:"text-muted hover:text-foreground transition-colors",children:a.jsx(ut,{size:20})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("p",{className:"text-foreground",children:[A.importModal.trackCountPrefix," ",a.jsx("span",{className:"font-bold text-primary",children:s})," ",A.importModal.trackCountSuffix]}),a.jsx("p",{className:"text-muted text-sm",children:A.importModal.warning}),a.jsx("p",{className:"text-muted text-sm",children:A.importModal.backupRec})]}),a.jsxs("div",{className:"bg-background/50 p-4 border-t border-border flex flex-col gap-3",children:[a.jsxs("button",{onClick:e,className:"w-full bg-primary hover:bg-sky-400 text-white px-4 py-3 rounded-lg font-bold shadow-lg shadow-primary/20 transition-all flex items-center justify-center gap-2",children:[a.jsx(Lf,{size:18}),A.importModal.backupBtn]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx("button",{onClick:t,className:"bg-surface hover:bg-surface/80 border border-border text-foreground px-4 py-2 rounded-lg font-medium transition-colors",children:A.importModal.cancel}),a.jsxs("button",{onClick:r,className:"bg-surface hover:bg-red-500/10 border border-border hover:border-red-500/30 text-muted hover:text-red-500 px-4 py-2 rounded-lg font-medium transition-colors flex items-center justify-center gap-2 group",children:[a.jsx("span",{className:"group-hover:hidden",children:A.importModal.overwrite}),a.jsxs("span",{className:"hidden group-hover:inline flex items-center gap-1",children:[a.jsx(Cc,{size:14}),A.importModal.overwrite]})]})]})]})]})})},w6=({onConfirm:r,onBackupAndConfirm:e,onCancel:t,existingCount:s,filesCount:A})=>{const{t:l}=it(),d=k.useRef(null);return k.useEffect(()=>{const u=f=>{d.current&&!d.current.contains(f.target)&&t()};return document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}},[t]),a.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-[100] p-4 animate-in fade-in duration-200",children:a.jsxs("div",{ref:d,className:"bg-surface border border-border rounded-xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"bg-red-500/10 border-b border-red-500/20 p-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2 text-red-500 font-bold text-lg",children:[a.jsx(Bs,{size:24}),l.clearModal.title]}),a.jsx("button",{onClick:t,className:"text-muted hover:text-foreground transition-colors",children:a.jsx(ut,{size:20})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("p",{className:"text-foreground",children:[l.importModal.trackCountPrefix," ",a.jsx("span",{className:"font-bold text-primary",children:s})," ",l.importModal.trackCountSuffix]}),A>0&&a.jsxs("p",{className:"text-foreground",children:["Uploads: ",a.jsx("span",{className:"font-bold text-primary",children:A})," file(s)."]}),a.jsx("p",{className:"text-foreground text-sm",children:"Also clearing: User settings, Custom Labels, Interdisciplinary Status, and Uploaded Files."}),a.jsx("p",{className:"text-muted text-sm",children:l.clearModal.warning}),a.jsx("p",{className:"text-muted text-sm",children:l.clearModal.backupRec})]}),a.jsxs("div",{className:"bg-background/50 p-4 border-t border-border flex flex-col gap-3",children:[a.jsxs("button",{onClick:e,className:"w-full bg-surface hover:bg-surface/80 border border-border text-foreground px-4 py-3 rounded-lg font-medium shadow-sm transition-all flex items-center justify-center gap-2",children:[a.jsx(Lf,{size:18}),l.clearModal.backupBtn]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx("button",{onClick:t,className:"bg-surface hover:bg-surface/80 border border-border text-foreground px-4 py-2 rounded-lg font-medium transition-colors",children:l.clearModal.cancel}),a.jsxs("button",{onClick:r,className:"bg-red-600 hover:bg-red-700 text-white border border-red-700 hover:border-red-800 px-4 py-2 rounded-lg font-bold transition-colors flex items-center justify-center gap-2",children:[a.jsx(sd,{size:16}),l.clearModal.clear]})]})]})]})})},B6=({onClose:r,onGoToSettings:e})=>{const{language:t}=it();return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-surface border border-border rounded-xl shadow-2xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-4 border-b border-border flex justify-between items-center bg-primary/5",children:[a.jsxs("div",{className:"flex items-center gap-2 text-primary font-bold text-lg",children:[a.jsx(uk,{size:24}),a.jsx("h2",{children:t==="zh"?"":"Complete Your Profile"})]}),a.jsx("button",{onClick:r,className:"p-1 hover:bg-black/5 dark:hover:bg-white/10 rounded-full transition-colors",children:a.jsx(ut,{size:20})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("p",{className:"text-foreground/90 leading-relaxed",children:t==="zh"?"":"Hey! We noticed you haven't set up your student profile yet (Major, Year, or Credits). For accurate tracking, we recommend setting this up now!"}),a.jsx("p",{className:"text-sm text-muted",children:t==="zh"?"()":"(This notification will only show once)"})]}),a.jsxs("div",{className:"p-4 border-t border-border bg-surface/50 flex gap-3 justify-end",children:[a.jsx("button",{onClick:r,className:"px-4 py-2 rounded-lg text-sm font-medium text-muted hover:text-foreground hover:bg-primary/10 transition-colors",children:t==="zh"?"":"Set up later"}),a.jsx("button",{onClick:e,className:"px-4 py-2 rounded-lg text-sm font-bold bg-primary text-white hover:bg-primary/90 shadow-md transition-all",children:t==="zh"?"":"Go to Settings"})]})]})})},C6=({onClose:r})=>{const{t:e}=it(),t=({title:s,date:A})=>a.jsxs("div",{className:"mb-4",children:[a.jsxs("h3",{className:"text-primary font-bold text-lg mb-1 flex items-center gap-2",children:["- ",s," -"]}),a.jsx("p",{className:"text-foreground pl-4 font-medium whitespace-pre-line",children:A})]});return $t.createPortal(a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-surface w-full max-w-lg rounded-2xl shadow-2xl flex flex-col overflow-hidden border border-border animate-in zoom-in-95 duration-200 component-padding",children:[a.jsxs("div",{className:"p-4 border-b border-border bg-background/50 flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"p-2 bg-primary/10 rounded-full text-primary",children:a.jsx(OA,{size:20})}),a.jsx("h2",{className:"font-bold text-lg text-foreground",children:e.courseSchedule?.title||"114-2 Course Selection Schedule"})]}),a.jsx("button",{onClick:r,className:"p-2 hover:bg-muted/20 rounded-full transition-colors text-muted hover:text-foreground",children:a.jsx(ut,{size:20})})]}),a.jsxs("div",{className:"p-6 overflow-y-auto max-h-[70vh]",children:[a.jsx(t,{title:e.courseSchedule?.inquiry||"Course Inquiry",date:e.courseSchedule?.inquiryDate||"Starting from: Jan 6 (Tue) 13:00"}),a.jsx(t,{title:e.courseSchedule?.prelim1||"Preliminary Round 1",date:e.courseSchedule?.prelim1Date||"Jan 30 (Fri) 9:00  Feb 2 (Mon) 17:00"}),a.jsx(t,{title:e.courseSchedule?.prelim2||"Preliminary Round 2",date:e.courseSchedule?.prelim2Date||"Feb 4 (Wed) 9:00  Feb 5 (Thu) 17:00"}),a.jsx(t,{title:e.courseSchedule?.addDrop1||"Add/Drop Round 1",date:e.courseSchedule?.addDrop1Date||"Feb 9 (Mon) 9:00  Feb 10 (Tue) 17:00"}),a.jsx(t,{title:e.courseSchedule?.addDrop2||"Add/Drop Round 2",date:e.courseSchedule?.addDrop2Date||"Feb 24 (Tue) 9:00  Feb 25 (Wed) 17:00"}),a.jsxs("div",{className:"mt-8 space-y-2 text-sm",children:[a.jsx("p",{className:"text-muted font-mono",children:e.courseSchedule?.updateTime||"Update Time: 2026.01.06"}),a.jsxs("p",{className:"text-muted",children:[e.courseSchedule?.reference||"Reference",":"," ",a.jsx("a",{href:"https://oaa.nsysu.edu.tw/static/file/3/1003/attach/82/pta_236821_3882484_96074.pdf",target:"_blank",rel:"noreferrer",className:"text-primary hover:underline underline-offset-4 break-all",children:"https://oaa.nsysu.edu.tw/static/file/3/1003/attach/82/pta_236821_3882484_96074.pdf"})]})]})]}),a.jsx("div",{className:"p-3 bg-red-500/10 border-t border-red-500/20 text-center",children:a.jsx("p",{className:"text-xs font-bold text-red-500",children:e.courseSchedule?.warning||"Data is for reference only."})})]})}),document.body)},E6="Brian",N6="CGmanage",S6=({onClose:r,onLogin:e})=>{const[t,s]=k.useState(""),[A,l]=k.useState(""),[d,u]=k.useState(!1),f=k.useRef(null);k.useEffect(()=>{f.current?.focus()},[]);const g=x=>{x.preventDefault();const y=t.toLowerCase();(y===E6.toLowerCase()||y==="abel")&&A===N6?(e(t),r()):(u(!0),l(""))};return $t.createPortal(a.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-md flex items-center justify-center z-[50000] p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl w-full max-w-sm shadow-2xl p-6 relative",children:[a.jsx("button",{onClick:r,className:"absolute right-4 top-4 text-zinc-500 hover:text-white transition-colors",children:a.jsx(ut,{size:20})}),a.jsxs("div",{className:"flex flex-col items-center mb-6",children:[a.jsx("div",{className:"w-12 h-12 bg-red-500/10 text-red-500 rounded-full flex items-center justify-center mb-4 border border-red-500/20",children:a.jsx(Fs,{size:24})}),a.jsx("h2",{className:"text-xl font-bold text-white",children:"Restricted Access"}),a.jsx("p",{className:"text-sm text-zinc-500",children:"Course Data Inspector"})]}),a.jsxs("form",{onSubmit:g,className:"space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(sN,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-500",size:16}),a.jsx("input",{ref:f,type:"text",value:t,onChange:x=>{s(x.target.value),u(!1)},className:`w-full bg-black/50 border ${d?"border-red-500":"border-zinc-700"} text-white rounded-lg pl-10 pr-4 py-2.5 outline-none focus:ring-2 focus:ring-red-500/50 transition-all placeholder:text-zinc-600`,placeholder:"Admin Name"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(j5,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-500",size:16}),a.jsx("input",{type:"password",value:A,onChange:x=>{l(x.target.value),u(!1)},className:`w-full bg-black/50 border ${d?"border-red-500":"border-zinc-700"} text-white rounded-lg pl-10 pr-4 py-2.5 outline-none focus:ring-2 focus:ring-red-500/50 transition-all placeholder:text-zinc-600`,placeholder:"Passcode"})]}),d&&a.jsx("p",{className:"text-xs text-red-500 text-center font-medium animate-in fade-in slide-in-from-top-1",children:"Invalid Admin ID or Passcode"}),a.jsx("button",{type:"submit",className:"w-full bg-white hover:bg-zinc-200 text-black font-bold py-2.5 rounded-lg transition-colors",children:"Authenticate"})]})]})}),document.body)},j6=[{id:"schedule",title:"Course Selection Schedule",period:180,desc:"Update dates for Prelim, Add/Drop rounds in i18n.ts"},{id:"programs",title:"Cross-Disciplinary Programs",period:365,desc:"Scrape new programs from ctdr.nsysu.edu.tw"},{id:"gen_edu",title:"General Education Courses",period:180,desc:"Verify new sem Gen Edu categories (Primer, etc.)"},{id:"dept_codes",title:"Department Standard Codes",period:365,desc:"Check if new departments (e.g., Semiconductor) are added"},{id:"api_check",title:"API Endpoint Health",period:90,desc:"Verify NSYSU Open Data API endpoints are still valid"}],_6=({courses:r,onClose:e,adminId:t})=>{const[s,A]=k.useState(""),[l,d]=k.useState(null),[u,f]=k.useState(!1),[g,x]=k.useState("data"),{usingBackup:y,lastChecked:v,semesters:S}=mS(),R=k.useMemo(()=>{try{const C=localStorage.getItem(Oc);return C?JSON.parse(C):el}catch{return el}},[g]),j=k.useMemo(()=>K0(R,113),[R]),V=k.useMemo(()=>{try{const C=localStorage.getItem("nsysu-interdisciplinary-status");return C?JSON.parse(C):{}}catch{return{}}},[g]),[P,G]=k.useState(()=>JSON.parse(localStorage.getItem("nsysu-admin-maintenance-log")||"{}")),q=C=>{const D=Date.now(),Q={...P,[C]:D};G(Q),localStorage.setItem("nsysu-admin-maintenance-log",JSON.stringify(Q))},W=(C,D)=>{const Q=P[C];if(!Q)return"overdue";const T=(Date.now()-Q)/(1e3*60*60*24);return T>D?"overdue":T>D*.8?"due-soon":"ok"},te=()=>{const C=localStorage.getItem("nsysu-force-offline")==="true";localStorage.setItem("nsysu-force-offline",(!C).toString()),window.location.reload()},z=k.useMemo(()=>{if(!s)return r;const C=s.toLowerCase();return r.filter(D=>D.name.toLowerCase().includes(C)||D.id.includes(C)||D.teacher?.toLowerCase().includes(C)||D.department?.toLowerCase().includes(C))},[r,s]),E=()=>{l&&(navigator.clipboard.writeText(JSON.stringify(l,null,2)),f(!0),setTimeout(()=>f(!1),2e3))},N=(t||"").toLowerCase()==="brian";return $t.createPortal(a.jsxs("div",{className:"fixed inset-0 bg-black/95 flex z-[50000] animate-in fade-in duration-300 font-mono text-sm",children:[a.jsxs("div",{className:"w-[400px] border-r border-zinc-800 flex flex-col bg-zinc-900/50",children:[a.jsxs("div",{className:`p-4 border-b ${N?"border-purple-900/30 bg-purple-950/10":"border-zinc-800 bg-zinc-900"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:`flex items-center gap-2 ${N?"text-purple-400":"text-emerald-400"}`,children:[N?a.jsx(n5,{size:20}):a.jsx(Cc,{size:20}),a.jsxs("div",{children:[a.jsx("h2",{className:`font-bold text-lg ${N?"text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-amber-300":"text-white"}`,children:N?"Developer Console":"Admin Console"}),N&&a.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-amber-400/80 font-medium",children:[a.jsx(o5,{size:10})," System Architect"]})]})]}),a.jsx("div",{className:"text-xs text-zinc-500 bg-zinc-800 px-2 py-1 rounded",children:xf})]}),a.jsxs("div",{className:"flex bg-zinc-800/50 p-1 rounded-lg mb-4",children:[a.jsx("button",{onClick:()=>x("data"),className:`flex-1 py-1.5 text-xs font-bold rounded-md transition-all ${g==="data"?"bg-zinc-700 text-white shadow":"text-zinc-500 hover:text-zinc-300"}`,children:"Data"}),a.jsxs("button",{onClick:()=>x("style"),className:`flex-1 py-1.5 text-xs font-bold rounded-md transition-all flex items-center justify-center gap-1 ${g==="style"?"bg-zinc-700 text-white shadow":"text-zinc-500 hover:text-zinc-300"}`,children:[a.jsx(AC,{size:12}),"Design"]}),a.jsx("button",{onClick:()=>x("rules"),className:`flex-1 py-1.5 text-xs font-bold rounded-md transition-all ${g==="rules"?"bg-zinc-700 text-white shadow":"text-zinc-500 hover:text-zinc-300"}`,children:"Logic"}),a.jsxs("button",{onClick:()=>x("maintenance"),className:`flex-1 py-1.5 text-xs font-bold rounded-md transition-all flex items-center justify-center gap-1 ${g==="maintenance"?"bg-zinc-700 text-white shadow":"text-zinc-500 hover:text-zinc-300"}`,children:[a.jsx(sC,{size:12}),"Task"]}),(t||"").toLowerCase()!=="abel"&&a.jsxs("button",{onClick:()=>x("tools"),className:`flex-1 py-1.5 text-xs font-bold rounded-md transition-all flex items-center justify-center gap-1 ${g==="tools"?"bg-zinc-700 text-white shadow":"text-zinc-500 hover:text-zinc-300"}`,children:[a.jsx(vx,{size:12}),"Tools"]})]}),g==="data"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-4 gap-1 mb-4 text-[10px] text-zinc-500 text-center",children:[a.jsxs("div",{className:"bg-zinc-800/50 rounded py-1",children:[a.jsx("div",{className:"text-white font-bold text-xs",children:r.length}),a.jsx("div",{children:"Total"})]}),a.jsxs("div",{className:"bg-blue-500/10 rounded py-1 text-blue-400",children:[a.jsx("div",{className:"font-bold text-xs",children:r.filter(C=>C.fromCatalog).length}),a.jsx("div",{children:"Verif."})]}),a.jsxs("div",{className:"bg-yellow-500/10 rounded py-1 text-yellow-400",children:[a.jsx("div",{className:"font-bold text-xs",children:r.filter(C=>C.userLabels?.includes("manual")).length}),a.jsx("div",{children:"Man."})]}),a.jsxs("div",{className:"bg-red-500/10 rounded py-1 text-red-400",children:[a.jsx("div",{className:"font-bold text-xs",children:r.filter(C=>!C.teacher||!C.department||C.credits===0).length}),a.jsx("div",{children:"Issues"})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(rd,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-500",size:14}),a.jsx("input",{type:"text",value:s,onChange:C=>A(C.target.value),placeholder:"Search by ID, Name, Teacher...",className:"w-full bg-black border border-zinc-700 text-zinc-300 rounded pl-9 pr-3 py-2 outline-none focus:border-emerald-500"})]})]})]}),g==="data"?a.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:z.map(C=>a.jsxs("div",{onClick:()=>d(C),className:`p-3 border-b border-zinc-800/50 cursor-pointer hover:bg-white/5 transition-colors ${l?.id===C.id?"bg-emerald-500/10 border-l-2 border-l-emerald-500":"border-l-2 border-l-transparent"}`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-1",children:[a.jsx("span",{className:`font-bold line-clamp-1 ${l?.id===C.id?"text-emerald-400":"text-zinc-200"}`,children:C.name}),a.jsx("span",{className:"text-[10px] text-zinc-500",children:C.semester})]}),a.jsxs("div",{className:"flex justify-between text-xs text-zinc-500",children:[a.jsx("span",{children:C.teacher||"<No Teacher>"}),a.jsxs("span",{className:"font-mono text-[10px] opacity-50",children:[C.id.slice(0,8),"..."]})]}),a.jsxs("div",{className:"flex gap-1 mt-2",children:[C.fromCatalog&&a.jsx("span",{className:"px-1.5 py-0.5 bg-blue-500/10 text-blue-400 text-[10px] rounded",children:"Catalog"}),C.userLabels?.includes("manual")&&a.jsx("span",{className:"px-1.5 py-0.5 bg-yellow-500/10 text-yellow-400 text-[10px] rounded",children:"Manual"}),(!C.teacher||!C.department)&&a.jsx("span",{className:"px-1.5 py-0.5 bg-red-500/10 text-red-400 text-[10px] rounded",children:"Missing Data"})]})]},C.id))}):g==="rules"?a.jsxs("div",{className:"p-4 text-zinc-500 text-xs leading-relaxed",children:[a.jsx("p",{className:"mb-4",children:"Select a Logic Flow on the right to visualize how the application calculates credits and processes data."}),a.jsxs("div",{className:"p-3 bg-zinc-800/30 rounded border border-zinc-800",children:[a.jsx("strong",{children:"Legend:"}),a.jsxs("ul",{className:"list-disc pl-4 mt-2 space-y-1",children:[a.jsxs("li",{children:[a.jsx("span",{className:"text-zinc-300",children:"Box"}),": Data or State"]}),a.jsxs("li",{children:[a.jsx("span",{className:"text-emerald-400",children:"Green"}),": Include / Pass"]}),a.jsxs("li",{children:[a.jsx("span",{className:"text-red-400",children:"Red"}),": Exclude / Fail"]})]})]})]}):g==="maintenance"?a.jsxs("div",{className:"p-4 text-zinc-500 text-xs leading-relaxed",children:[a.jsx("p",{className:"mb-4",children:"Maintenance Tasks Overview."}),a.jsx("div",{className:"p-3 bg-zinc-800/30 rounded border border-zinc-800",children:"Updates are manual. Use this checklist to keep data fresh."})]}):a.jsxs("div",{className:"p-4 text-zinc-500 text-xs leading-relaxed",children:[a.jsx("p",{className:"mb-4",children:"Developer Tools & Debugging."}),a.jsx("div",{className:"p-3 bg-zinc-800/30 rounded border border-zinc-800 text-yellow-500",children:" Use with caution. Actions here affect app state directly."})]})]}),a.jsxs("div",{className:"flex-1 flex flex-col bg-[#0d0d0d] relative",children:[a.jsx("button",{onClick:e,className:"absolute right-4 top-4 text-zinc-500 hover:text-white p-2 z-10",children:a.jsx(ut,{size:24})}),g==="style"?a.jsxs("div",{className:"flex-1 p-10 overflow-auto flex flex-col animate-in slide-in-from-bottom-4 duration-300",children:[a.jsx("div",{className:"flex items-center justify-between mb-8",children:a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[a.jsx(AC,{size:24}),"Design System"]}),a.jsx("p",{className:"text-zinc-500 text-sm mt-1",children:"Application color palette and usage guidelines."})]})}),a.jsxs("div",{className:"space-y-8 max-w-4xl",children:[a.jsxs("section",{children:[a.jsx("h3",{className:"text-sm font-bold text-zinc-400 uppercase tracking-wider mb-4 border-b border-zinc-800 pb-2",children:"Core Theme (Dark Mode)"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"p-4 bg-[#303030] rounded-xl border border-zinc-700",children:[a.jsx("div",{className:"h-12 w-full bg-[#303030] rounded mb-2 border border-white/10"}),a.jsx("div",{className:"font-bold text-white text-sm",children:"Background"}),a.jsx("div",{className:"text-[10px] text-zinc-400",children:"#303030 (App Body)"})]}),a.jsxs("div",{className:"p-4 bg-[#424242] rounded-xl border border-zinc-700",children:[a.jsx("div",{className:"h-12 w-full bg-[#424242] rounded mb-2 border border-white/10"}),a.jsx("div",{className:"font-bold text-white text-sm",children:"Surface"}),a.jsx("div",{className:"text-[10px] text-zinc-400",children:"#424242 (Cards/Modals)"})]}),a.jsxs("div",{className:"p-4 bg-[#0d0d0d] rounded-xl border border-zinc-800",children:[a.jsx("div",{className:"h-12 w-full bg-[#A8C8FA] rounded mb-2"}),a.jsx("div",{className:"font-bold text-white text-sm",children:"Primary"}),a.jsx("div",{className:"text-[10px] text-zinc-400",children:"#A8C8FA (Actions/Active)"})]}),a.jsxs("div",{className:"p-4 bg-[#0d0d0d] rounded-xl border border-zinc-800",children:[a.jsx("div",{className:"h-12 w-full bg-[#EFEFEF] rounded mb-2"}),a.jsx("div",{className:"font-bold text-white text-sm",children:"Text"}),a.jsx("div",{className:"text-[10px] text-zinc-400",children:"#EFEFEF (Headings)"})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-sm font-bold text-zinc-400 uppercase tracking-wider mb-4 border-b border-zinc-800 pb-2",children:"Course Categories"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[a.jsxs("div",{className:"bg-[#303030] p-3 rounded border border-zinc-700",children:[a.jsx("div",{style:{backgroundColor:"#FFC8BF",color:"#505050"},className:"px-2 py-1 rounded text-xs font-bold text-center mb-2",children:"Language"}),a.jsx("div",{className:"text-[10px] text-zinc-400 text-center",children:"#FFC8BF"}),a.jsx("div",{className:"text-[10px] text-zinc-500 text-center",children:"Required Foreign Lang"})]}),a.jsxs("div",{className:"bg-[#303030] p-3 rounded border border-zinc-700",children:[a.jsx("div",{style:{backgroundColor:"#FFD5AA",color:"#505050"},className:"px-2 py-1 rounded text-xs font-bold text-center mb-2",children:"Interdisc."}),a.jsx("div",{className:"text-[10px] text-zinc-400 text-center",children:"#FFD5AA"}),a.jsx("div",{className:"text-[10px] text-zinc-500 text-center",children:"Cross-Disciplinary"})]}),a.jsxs("div",{className:"bg-[#303030] p-3 rounded border border-zinc-700",children:[a.jsx("div",{style:{backgroundColor:"#DFFFFB",color:"#505050"},className:"px-2 py-1 rounded text-xs font-bold text-center mb-2",children:"Sports"}),a.jsx("div",{className:"text-[10px] text-zinc-400 text-center",children:"#DFFFFB"}),a.jsx("div",{className:"text-[10px] text-zinc-500 text-center",children:"PE / Military"})]}),a.jsxs("div",{className:"bg-[#303030] p-3 rounded border border-zinc-700",children:[a.jsx("div",{style:{backgroundColor:"#D9FFD4",color:"#505050"},className:"px-2 py-1 rounded text-xs font-bold text-center mb-2",children:"Primer"}),a.jsx("div",{className:"text-[10px] text-zinc-400 text-center",children:"#D9FFD4"}),a.jsx("div",{className:"text-[10px] text-zinc-500 text-center",children:"Gen Edu Primer"})]}),a.jsxs("div",{className:"bg-[#303030] p-3 rounded border border-zinc-700",children:[a.jsx("div",{style:{backgroundColor:"#D8C9FF",color:"#505050"},className:"px-2 py-1 rounded text-xs font-bold text-center mb-2",children:"Boya"}),a.jsx("div",{className:"text-[10px] text-zinc-400 text-center",children:"#D8C9FF"}),a.jsx("div",{className:"text-[10px] text-zinc-500 text-center",children:"Liberal Arts"})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-sm font-bold text-zinc-400 uppercase tracking-wider mb-4 border-b border-zinc-800 pb-2",children:"UI Status"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-[#0d0d0d] p-3 rounded border border-zinc-800 flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded bg-emerald-500/10 text-emerald-500 flex items-center justify-center border border-emerald-500/20",children:a.jsx(vt,{size:16})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-white font-bold",children:"Success"}),a.jsx("div",{className:"text-[10px] text-emerald-500",children:"emerald-500"})]})]}),a.jsxs("div",{className:"bg-[#0d0d0d] p-3 rounded border border-zinc-800 flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded bg-red-500/10 text-red-500 flex items-center justify-center border border-red-500/20",children:a.jsx(ut,{size:16})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-white font-bold",children:"Error/Missing"}),a.jsx("div",{className:"text-[10px] text-red-500",children:"red-500"})]})]}),a.jsxs("div",{className:"bg-[#0d0d0d] p-3 rounded border border-zinc-800 flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded bg-blue-500/10 text-blue-500 flex items-center justify-center border border-blue-500/20",children:a.jsx(Cc,{size:16})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-white font-bold",children:"Info/Catalog"}),a.jsx("div",{className:"text-[10px] text-blue-500",children:"blue-500"})]})]}),a.jsxs("div",{className:"bg-[#0d0d0d] p-3 rounded border border-zinc-800 flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded bg-yellow-500/10 text-yellow-500 flex items-center justify-center border border-yellow-500/20",children:a.jsx(Bs,{size:16})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-white font-bold",children:"Warning/Manual"}),a.jsx("div",{className:"text-[10px] text-yellow-500",children:"yellow-500"})]})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-sm font-bold text-zinc-400 uppercase tracking-wider mb-4 border-b border-zinc-800 pb-2",children:"Typography"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"p-4 bg-zinc-900/30 rounded-xl border border-zinc-800",children:[a.jsx("div",{className:"text-2xl font-bold text-white mb-1",children:"Heading 1"}),a.jsx("div",{className:"text-xs text-zinc-500 font-mono",children:"text-2xl font-bold text-foreground"})]}),a.jsxs("div",{className:"p-4 bg-zinc-900/30 rounded-xl border border-zinc-800",children:[a.jsx("div",{className:"text-xl font-semibold text-primary mb-1",children:"Heading 2"}),a.jsx("div",{className:"text-xs text-zinc-500 font-mono",children:"text-xl font-semibold text-primary"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"p-4 bg-zinc-900/30 rounded-xl border border-zinc-800",children:[a.jsx("div",{className:"text-sm text-zinc-300 mb-1",children:"Body Text (Default)"}),a.jsx("div",{className:"text-xs text-zinc-500 font-mono",children:"text-sm text-zinc-300"})]}),a.jsxs("div",{className:"p-4 bg-zinc-900/30 rounded-xl border border-zinc-800",children:[a.jsx("div",{className:"text-xs text-muted mb-1",children:"Muted Text / Metadata"}),a.jsx("div",{className:"text-xs text-zinc-500 font-mono",children:"text-xs text-muted"})]}),a.jsxs("div",{className:"p-4 bg-zinc-900/30 rounded-xl border border-zinc-800",children:[a.jsx("div",{className:"text-xs font-mono text-purple-400 mb-1",children:"Monospaced Code"}),a.jsx("div",{className:"text-xs text-zinc-500 font-mono",children:"font-mono text-xs"})]})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-sm font-bold text-zinc-400 uppercase tracking-wider mb-4 border-b border-zinc-800 pb-2",children:"Components"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-xs font-bold text-zinc-500 mb-4",children:"Buttons"}),a.jsxs("div",{className:"flex flex-wrap gap-4",children:[a.jsx("button",{className:"px-4 py-2 bg-blue-500 text-white rounded-lg text-sm font-bold shadow-lg shadow-blue-500/20",children:"Primary"}),a.jsx("button",{className:"px-4 py-2 bg-zinc-700 text-white rounded-lg text-sm font-bold hover:bg-zinc-600",children:"Secondary"}),a.jsx("button",{className:"px-4 py-2 bg-red-500 text-white rounded-lg text-sm font-bold shadow-lg shadow-red-500/20",children:"Destructive"}),a.jsx("button",{className:"px-4 py-2 bg-zinc-800 text-zinc-400 rounded-lg text-sm font-bold border border-zinc-700 hover:text-white",children:"Outline"})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-xs font-bold text-zinc-500 mb-4",children:"Input Fields"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("input",{type:"text",placeholder:"Standard Input",disabled:!0,className:"w-full bg-black border border-zinc-700 text-zinc-300 rounded px-3 py-2 outline-none focus:border-emerald-500"}),a.jsxs("div",{className:"bg-surface p-3 rounded-lg border border-border flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-foreground font-medium",children:"Card Item"}),a.jsx("span",{className:"text-xs text-muted",children:"Metadata"})]})]})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-sm font-bold text-zinc-400 uppercase tracking-wider mb-4 border-b border-zinc-800 pb-2",children:"Effects & Animations"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"p-4 bg-zinc-900 rounded-xl border border-zinc-800 flex flex-col items-center justify-center gap-2",children:[a.jsx("div",{className:"w-12 h-12 bg-emerald-500/20 rounded-full animate-pulse border border-emerald-500/50"}),a.jsx("span",{className:"text-xs text-zinc-500 font-mono",children:"animate-pulse"})]}),a.jsxs("div",{className:"p-4 bg-zinc-900 rounded-xl border border-zinc-800 flex flex-col items-center justify-center gap-2",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-xl shadow-lg shadow-blue-500/50"}),a.jsx("span",{className:"text-xs text-zinc-500 font-mono",children:"shadow-lg"})]}),a.jsxs("div",{className:"p-4 bg-zinc-900 rounded-xl border border-zinc-800 flex flex-col items-center justify-center gap-2",children:[a.jsx("div",{className:"w-12 h-12 bg-purple-500/10 rounded-xl border border-purple-500/50 hover:bg-purple-500/30 transition-colors duration-300"}),a.jsx("span",{className:"text-xs text-zinc-500 font-mono",children:"transition-colors"})]}),a.jsxs("div",{className:"p-4 bg-zinc-900 rounded-xl border border-zinc-800 flex flex-col items-center justify-center gap-2",children:[a.jsxs("div",{className:"relative flex h-3 w-3",children:[a.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-sky-400 opacity-75"}),a.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-sky-500"})]}),a.jsx("span",{className:"text-xs text-zinc-500 font-mono",children:"animate-ping"})]})]})]})]})]}):g==="data"?l?a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-zinc-800 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-white mb-1",children:l.name}),a.jsx("code",{className:"text-zinc-500",children:l.id})]}),a.jsxs("button",{onClick:E,className:"flex items-center gap-2 px-3 py-1.5 bg-zinc-800 hover:bg-zinc-700 text-zinc-300 rounded transition-colors text-xs",children:[u?a.jsx(vt,{size:14,className:"text-emerald-400"}):a.jsx(i5,{size:14}),u?"Copied!":"Copy JSON"]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-8",children:[a.jsxs("section",{children:[a.jsx("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider mb-3",children:"Core Data"}),a.jsx("table",{className:"w-full text-left border-collapse",children:a.jsxs("tbody",{children:[a.jsxs("tr",{className:"border-b border-zinc-800/50",children:[a.jsx("th",{className:"py-2 text-zinc-400 font-normal w-32",children:"Credits"}),a.jsx("td",{className:"py-2 text-zinc-200",children:l.credits})]}),a.jsxs("tr",{className:"border-b border-zinc-800/50",children:[a.jsx("th",{className:"py-2 text-zinc-400 font-normal",children:"Grade"}),a.jsx("td",{className:"py-2 text-zinc-200",children:l.grade||"-"})]}),a.jsxs("tr",{className:"border-b border-zinc-800/50",children:[a.jsx("th",{className:"py-2 text-zinc-400 font-normal",children:"Category"}),a.jsx("td",{className:"py-2 text-zinc-200",children:l.category})]}),a.jsxs("tr",{className:"border-b border-zinc-800/50",children:[a.jsx("th",{className:"py-2 text-zinc-400 font-normal",children:"Sub-Cat"}),a.jsx("td",{className:"py-2 text-zinc-200",children:l.genEduSubCategory||"-"})]})]})})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider mb-3",children:"Metadata"}),a.jsx("table",{className:"w-full text-left border-collapse",children:a.jsxs("tbody",{children:[a.jsxs("tr",{className:"border-b border-zinc-800/50",children:[a.jsx("th",{className:"py-2 text-zinc-400 font-normal w-32",children:"Teacher"}),a.jsx("td",{className:"py-2 text-zinc-200",children:l.teacher||a.jsx("span",{className:"text-red-500",children:"Missing"})})]}),a.jsxs("tr",{className:"border-b border-zinc-800/50",children:[a.jsx("th",{className:"py-2 text-zinc-400 font-normal",children:"Department"}),a.jsx("td",{className:"py-2 text-zinc-200",children:l.department||a.jsx("span",{className:"text-red-500",children:"Missing"})})]}),a.jsxs("tr",{className:"border-b border-zinc-800/50",children:[a.jsx("th",{className:"py-2 text-zinc-400 font-normal",children:"Orig. ID"}),a.jsx("td",{className:"py-2 text-zinc-200",children:l.originalId||a.jsx("span",{className:"text-zinc-600",children:"N/A"})})]}),a.jsxs("tr",{className:"border-b border-zinc-800/50",children:[a.jsx("th",{className:"py-2 text-zinc-400 font-normal",children:"Orig. Sem"}),a.jsx("td",{className:"py-2 text-zinc-200",children:l.originalSemester||a.jsx("span",{className:"text-red-500",children:"Missing"})})]})]})})]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider mb-3 flex items-center gap-2",children:[a.jsx(h5,{size:14}),"Raw JSON Object"]}),a.jsx("pre",{className:"bg-[#111] border border-zinc-800 rounded-lg p-4 overflow-x-auto text-xs text-blue-300 font-mono leading-relaxed",children:JSON.stringify(l,null,2)})]})]})]}):a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-zinc-600",children:[a.jsx(Cc,{size:48,className:"mb-4 opacity-50"}),a.jsx("p",{children:"Select a course to inspect raw data"})]}):g==="rules"?a.jsxs("div",{className:"flex-1 p-10 overflow-auto flex flex-col items-center animate-in slide-in-from-bottom-4 duration-300",children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-8",children:"Credits Logic Flow"}),a.jsxs("div",{className:"flex flex-col items-center gap-6 max-w-2xl w-full",children:[a.jsx("div",{className:"bg-zinc-800 px-6 py-3 rounded-xl border border-zinc-700 font-bold text-white shadow-lg",children:"Raw Course Data"}),a.jsx("div",{className:"h-8 w-0.5 bg-zinc-700"}),a.jsxs("div",{className:"relative p-4 rounded-xl border border-zinc-700 bg-[#0d0d0d] w-full text-center group hover:border-zinc-500 transition-colors",children:[a.jsx("span",{className:"text-xs text-zinc-500 uppercase tracking-widest font-bold mb-2 block",children:"Check 1"}),a.jsx("div",{className:"text-lg text-zinc-200 font-bold",children:"Is Withdrawn?"}),a.jsx("div",{className:"absolute top-1/2 right-full w-8 h-[1px] bg-red-500/50"}),a.jsx("div",{className:"absolute top-1/2 right-full -translate-x-full -translate-y-1/2 text-red-400 text-xs px-2 whitespace-nowrap",children:"Yes  Discard"})]}),a.jsx("div",{className:"h-8 w-0.5 bg-zinc-700"}),a.jsxs("div",{className:"relative p-4 rounded-xl border border-zinc-700 bg-[#0d0d0d] w-full text-center group hover:border-zinc-500 transition-colors",children:[a.jsx("span",{className:"text-xs text-zinc-500 uppercase tracking-widest font-bold mb-2 block",children:"Check 2"}),a.jsx("div",{className:"text-lg text-zinc-200 font-bold",children:"Is Grade < 60? (or F/E)"}),a.jsx("div",{className:"absolute top-1/2 right-full w-8 h-[1px] bg-red-500/50"}),a.jsx("div",{className:"absolute top-1/2 right-full -translate-x-full -translate-y-1/2 text-red-400 text-xs px-2 whitespace-nowrap",children:"Yes  No Credit (GPA Only)"})]}),a.jsx("div",{className:"h-8 w-0.5 bg-zinc-700"}),a.jsxs("div",{className:"relative p-4 rounded-xl border border-zinc-700 bg-[#0d0d0d] w-full text-center group hover:border-zinc-500 transition-colors",children:[a.jsx("span",{className:"text-xs text-zinc-500 uppercase tracking-widest font-bold mb-2 block",children:"Check 3: Special Category"}),a.jsxs("div",{className:"text-sm text-zinc-300 grid grid-cols-2 gap-4 text-left",children:[a.jsxs("div",{className:"bg-zinc-800/50 p-2 rounded",children:[a.jsx("div",{className:"font-bold text-yellow-400",children:"University Way / Primer"}),a.jsx("div",{className:"text-[10px] text-zinc-500",children:' Adds to "Events" count'}),a.jsx("div",{className:"text-[10px] text-red-400",children:" 0 Credits for Grad"})]}),a.jsxs("div",{className:"bg-zinc-800/50 p-2 rounded",children:[a.jsx("div",{className:"font-bold text-purple-400",children:"Sports / Military"}),a.jsx("div",{className:"text-[10px] text-zinc-500",children:" Included in Transcript"}),a.jsx("div",{className:"text-[10px] text-red-400",children:" 0 Credits for Grad"})]})]})]}),a.jsx("div",{className:"h-8 w-0.5 bg-zinc-700"}),a.jsxs("div",{className:"bg-emerald-500/10 px-8 py-4 rounded-xl border-2 border-emerald-500/50 text-emerald-400 shadow-[0_0_30px_rgba(16,185,129,0.1)] text-center",children:[a.jsx("div",{className:"font-bold text-xl mb-1",children:"Add to Total Credits"}),a.jsx("div",{className:"text-xs opacity-75",children:"Used for Graduation Progress Bar"})]})]}),a.jsx("div",{className:"h-8 w-0.5 bg-zinc-700"}),a.jsxs("section",{className:"relative pl-8 pb-8 border-l-2 border-zinc-800",children:[a.jsx("div",{className:"absolute -left-[11px] top-0 w-6 h-6 rounded-full bg-zinc-800 border-2 border-zinc-600 flex items-center justify-center text-[10px] font-bold",children:"4"}),a.jsx("h3",{className:"text-xl font-bold text-zinc-300 mb-6",children:"Phase 4: GPA Calculation"}),a.jsxs("div",{className:"bg-zinc-900/30 p-4 rounded-lg border border-zinc-800",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsxs("div",{className:"p-3 bg-black/50 rounded border border-zinc-800 text-center flex-1",children:[a.jsx("strong",{className:"text-white block text-sm",children:"Valid Grades"}),a.jsx("span",{className:"text-[10px] text-zinc-400",children:"A+, A ... D, E"}),a.jsx("div",{className:"text-emerald-400 text-xs mt-1",children:"Included in GPA"})]}),a.jsx("div",{className:"text-zinc-600",children:"vs"}),a.jsxs("div",{className:"p-3 bg-black/50 rounded border border-zinc-800 text-center flex-1",children:[a.jsx("strong",{className:"text-white block text-sm",children:"Invalid / Withdraw"}),a.jsx("span",{className:"text-[10px] text-zinc-400",children:"W, X, Exemptions"}),a.jsx("div",{className:"text-red-400 text-xs mt-1",children:"Excluded from GPA"})]})]}),a.jsxs("div",{className:"p-3 bg-zinc-800/50 rounded border border-zinc-700 mb-2",children:[a.jsx("strong",{className:"text-orange-400 block text-sm mb-1",children:" Failure Case (F, Fail, Grade < 60)"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-red-500 font-bold",children:""}),a.jsxs("span",{children:["Credits: ",a.jsx("strong",{children:"0"})," (No Earned Credits)"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(vt,{size:12,className:"text-emerald-500"}),a.jsxs("span",{children:["GPA: ",a.jsx("strong",{children:"Included"})," (Points: 0)"]})]})]})]}),a.jsx("div",{className:"mt-4 p-3 border border-zinc-700 rounded bg-black/30 font-mono text-xs text-center text-zinc-400",children:"GPA = Sum(GradePoints  Credits) / Sum(Credits)"})]})]}),a.jsx("div",{className:"h-8 w-0.5 bg-zinc-700"}),a.jsxs("section",{className:"relative pl-8 pb-8 border-l-2 border-zinc-800",children:[a.jsx("div",{className:"absolute -left-[11px] top-0 w-6 h-6 rounded-full bg-indigo-900 border-2 border-indigo-500 text-indigo-100 flex items-center justify-center text-[10px] font-bold",children:"5"}),a.jsx("h3",{className:"text-xl font-bold text-zinc-300 mb-6",children:"Interdisciplinary & Micro-credits"}),a.jsxs("div",{className:"bg-zinc-900/30 p-4 rounded-lg border border-zinc-800",children:[a.jsxs("div",{className:"flex flex-col items-center gap-4 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2 w-full justify-center",children:[a.jsx("div",{className:"p-2 bg-zinc-800 rounded border border-zinc-700 text-xs text-center w-24",children:"External Activity"}),a.jsx("div",{className:"h-0.5 w-4 bg-zinc-600"}),a.jsx("div",{className:"p-2 bg-zinc-800 rounded border border-zinc-700 text-xs text-center w-24",children:"Verification"}),a.jsx("div",{className:"h-0.5 w-4 bg-zinc-600"}),a.jsx("div",{className:"p-2 bg-indigo-500/10 border border-indigo-500/50 text-indigo-300 rounded text-xs text-center w-28",children:"Micro-credit Item"})]}),a.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-zinc-500",children:[a.jsx("span",{children:"Start"}),a.jsx("div",{className:"h-0.5 w-8 bg-zinc-700"}),a.jsx("span",{className:"text-emerald-500",children:"Process"}),a.jsx("div",{className:"h-0.5 w-8 bg-zinc-700"}),a.jsx("span",{className:"text-indigo-400",children:"Result"})]}),a.jsxs("div",{className:"w-full border-t border-zinc-800 pt-4 flex justify-between items-start gap-4",children:[a.jsxs("div",{className:"flex-1 text-center",children:[a.jsx("div",{className:"text-zinc-400 text-xs font-bold mb-1",children:"Constraints"}),a.jsxs("div",{className:"text-[10px] text-zinc-500 space-y-1",children:[a.jsxs("p",{children:[" Max ",a.jsx("span",{className:"text-white",children:"1.0"})," credit / semester"]}),a.jsxs("p",{children:[" Excess credits fill ",a.jsx("span",{className:"text-white",children:"older gaps"})," priority"]})]})]}),a.jsx("div",{className:"w-px bg-zinc-800 self-stretch"}),a.jsxs("div",{className:"flex-1 text-center",children:[a.jsx("div",{className:"text-emerald-400 text-xs font-bold mb-1",children:"Output"}),a.jsxs("div",{className:"text-[10px] text-zinc-500",children:[a.jsxs("p",{children:["Added directly to ",a.jsx("span",{className:"text-white",children:"Graduation Total"})]}),a.jsx("p",{className:"text-red-400 opacity-80",children:"(Not included in GPA)"})]})]})]})]}),a.jsxs("div",{className:"bg-black/40 rounded border border-zinc-800 p-3",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"text-xs font-bold text-zinc-300",children:"Current Status (Simulated)"}),a.jsx("span",{className:"text-[10px] bg-indigo-500/20 text-indigo-300 px-1.5 py-0.5 rounded",children:"Live Data"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[a.jsxs("div",{className:"bg-zinc-800/50 rounded p-2",children:[a.jsx("div",{className:"text-[10px] text-zinc-500",children:"Total Raw"}),a.jsx("div",{className:"text-sm font-mono text-zinc-300",children:Object.values(j.rawStats).reduce((C,D)=>C+D,0).toFixed(1)})]}),a.jsxs("div",{className:"bg-indigo-500/10 border border-indigo-500/20 rounded p-2",children:[a.jsx("div",{className:"text-[10px] text-indigo-300",children:"Effective"}),a.jsxs("div",{className:"text-sm font-mono text-indigo-400 font-bold",children:[j.grandTotalEffective," / 6.0"]})]})]}),j.grandTotalEffective>0&&a.jsxs("div",{className:"mt-2 text-[10px] text-zinc-500 text-center",children:["Contributing ",a.jsxs("span",{className:"text-indigo-400 font-bold",children:["+",j.grandTotalEffective]})," to Graduation Progress"]})]})]})]}),a.jsx("div",{className:"h-8 w-0.5 bg-zinc-700"}),a.jsxs("section",{className:"relative pl-8 pb-8 border-l-2 border-zinc-800",children:[a.jsx("div",{className:"absolute -left-[11px] top-0 w-6 h-6 rounded-full bg-cyan-900 border-2 border-cyan-500 text-cyan-100 flex items-center justify-center text-[10px] font-bold",children:"6"}),a.jsx("h3",{className:"text-xl font-bold text-zinc-300 mb-6",children:"International & Interdisciplinary Limit"}),a.jsxs("div",{className:"bg-zinc-900/30 p-4 rounded-lg border border-zinc-800",children:[a.jsxs("div",{className:"flex flex-col items-center gap-4 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2 w-full justify-center",children:[a.jsx("div",{className:"grid grid-cols-3 gap-1",children:[1,2,3,4,5,6,7,8,9].map(C=>a.jsx("div",{className:"w-6 h-6 bg-zinc-800 border border-zinc-700 rounded flex items-center justify-center text-[10px] text-zinc-500",children:C},C))}),a.jsx("div",{className:"h-0.5 w-4 bg-zinc-600"}),a.jsx("div",{className:"p-2 bg-zinc-800 rounded border border-zinc-700 text-xs text-center",children:"Verify Any (1)"}),a.jsx("div",{className:"h-0.5 w-4 bg-zinc-600"}),a.jsx("div",{className:"p-2 bg-cyan-500/10 border border-cyan-500/50 text-cyan-300 rounded text-xs text-center w-28",children:"Requirement Met"})]}),a.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-zinc-500",children:[a.jsx("span",{children:"9 Options"}),a.jsx("div",{className:"h-0.5 w-8 bg-zinc-700"}),a.jsx("span",{className:"text-emerald-500",children:"Check"}),a.jsx("div",{className:"h-0.5 w-8 bg-zinc-700"}),a.jsx("span",{className:"text-cyan-400",children:"Result"})]})]}),a.jsxs("div",{className:"bg-black/40 rounded border border-zinc-800 p-3",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"text-xs font-bold text-zinc-300",children:"Current Status (Simulated)"}),a.jsx("span",{className:"text-[10px] bg-cyan-500/20 text-cyan-300 px-1.5 py-0.5 rounded",children:"Live Data"})]}),a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-[10px] text-zinc-500 mb-1",children:"Completed Items"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:[1,2,3,4,5,6,7,8,9].map(C=>{const D=V[C];return a.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center text-[10px] font-bold ${D?"bg-cyan-500 text-black":"bg-zinc-800 text-zinc-600"}`,children:C},C)})})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-[10px] text-zinc-500",children:"Status"}),[1,2,3,4,5,6,7,8,9].some(C=>V[C])?a.jsxs("div",{className:"text-emerald-400 font-bold flex items-center justify-end gap-1",children:[a.jsx(vt,{size:14})," Passed"]}):a.jsxs("div",{className:"text-red-400 font-bold flex items-center justify-end gap-1",children:[a.jsx(ut,{size:14})," Incomplete"]})]})]})]})]})]}),a.jsx("div",{className:"h-8 w-0.5 bg-zinc-700"}),a.jsxs("section",{className:"relative pl-8 pb-8 border-l-2 border-zinc-800",children:[a.jsx("div",{className:"absolute -left-[11px] top-0 w-6 h-6 rounded-full bg-purple-900 border-2 border-purple-500 text-purple-100 flex items-center justify-center text-[10px] font-bold",children:a.jsx(Cc,{size:12})}),a.jsx("h3",{className:"text-xl font-bold text-zinc-300 mb-6",children:"Backup File Structure"}),a.jsxs("div",{className:"bg-zinc-900/30 p-4 rounded-lg border border-zinc-800",children:[a.jsxs("div",{className:"font-mono text-xs space-y-2",children:[a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"version:"}),a.jsx("span",{className:"text-zinc-400",children:"number (Schema Version)"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"lastUpdated:"}),a.jsx("span",{className:"text-zinc-400",children:"ISO Date String"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"settings:"}),a.jsx("span",{className:"text-zinc-400",children:"{ studentClass, major, entranceYear, graduationCredits }"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"courses:"}),a.jsx("span",{className:"text-zinc-400",children:"Array<Course> (All added courses)"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"labels:"}),a.jsx("span",{className:"text-zinc-400",children:"{ library, map } (Custom Tags)"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"plannerDraft:"}),a.jsx("span",{className:"text-zinc-400",children:"LocalStorage Draft State"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"interdisciplinaryStatus:"}),a.jsx("span",{className:"text-zinc-400",children:"Object (Interdisciplinary Check Settings)"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"minorData:"}),a.jsx("span",{className:"text-zinc-400",children:"Object (Minor Requirement Progress)"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"microCreditsData:"}),a.jsx("span",{className:"text-zinc-400",children:"Object (Micro-credits Progress)"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"teacherEducationData:"}),a.jsx("span",{className:"text-zinc-400",children:"Object (Teacher Ed. Program Data)"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"doubleMajorData:"}),a.jsx("span",{className:"text-zinc-400",children:"Object (Double Major Data)"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"crossDisciplinaryData:"}),a.jsx("span",{className:"text-zinc-400",children:"Object (Cross-disciplinary Program Data)"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"diverseLearningData:"}),a.jsx("span",{className:"text-zinc-400",children:"Object (Diverse Learning Program Data)"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"interdisciplinaryCourseData:"}),a.jsx("span",{className:"text-zinc-400",children:"Object (Interdisciplinary Course Data)"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"interdisciplinaryNotes:"}),a.jsx("span",{className:"text-zinc-400",children:"Object (User Notes for Checks 1-10)"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-400 font-bold",children:"assets:"}),a.jsx("span",{className:"text-zinc-400",children:"Base64 Encoded Images (Course Cards)"})]})]}),a.jsx("div",{className:"mt-4 p-2 bg-purple-500/10 border border-purple-500/20 rounded text-[10px] text-purple-300",children:"Full state snapshot. Importing this file restores the exact user session state."})]})]}),a.jsxs("section",{className:"relative pl-8",children:[a.jsx("div",{className:"absolute -left-[11px] top-0 w-6 h-6 rounded-full bg-blue-900 border-2 border-blue-500 text-blue-100 flex items-center justify-center text-[10px] font-bold",children:"i"}),a.jsx("h3",{className:"text-xl font-bold text-zinc-300 mb-6",children:"System Status"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-zinc-900/50 p-4 rounded-xl border border-zinc-700",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2 font-bold text-zinc-300",children:[a.jsx(ek,{size:16}),"API Connection"]}),a.jsx("div",{className:"flex items-center gap-2 text-sm",children:y?a.jsxs("span",{className:"text-orange-400 flex items-center gap-1",children:[a.jsx(cC,{size:14})," Offline Mode (Backup Data)"]}):a.jsxs("span",{className:"text-emerald-400 flex items-center gap-1",children:[a.jsx(xk,{size:14})," Online (Live API)"]})}),a.jsxs("div",{className:"text-[10px] text-zinc-500 mt-2",children:["Latest Check: ",v?new Date(v).toLocaleTimeString():"Never"]})]}),a.jsxs("div",{className:"bg-zinc-900/50 p-4 rounded-xl border border-zinc-700",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3 font-bold text-zinc-300",children:[a.jsx(OA,{size:16}),"API Scope & Status"]}),a.jsx("div",{className:"flex flex-col gap-2 max-h-[120px] overflow-y-auto custom-scrollbar pr-2",children:S.map((C,D)=>{const Q=D<=1;return a.jsxs("div",{className:"flex justify-between items-center text-xs p-2 bg-black/40 rounded border border-zinc-800",children:[a.jsx("span",{className:"font-mono text-zinc-200",children:C}),Q?a.jsxs("span",{className:"flex items-center gap-1.5 text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded-full",children:[a.jsxs("span",{className:"relative flex h-2 w-2",children:[a.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),a.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-emerald-500"})]}),"Monitoring"]}):a.jsxs("span",{className:"text-zinc-500 bg-zinc-800 px-2 py-0.5 rounded-full flex items-center gap-1",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-zinc-600"}),"Static"]})]},C)})}),a.jsx("div",{className:"text-[10px] text-zinc-500 mt-2 text-center",children:"Only the latest 2 semesters are constantly scanned for changes. Older data is archived."})]})]})]})]}):g==="maintenance"?a.jsxs("div",{className:"flex-1 p-10 overflow-auto flex flex-col animate-in slide-in-from-bottom-4 duration-300",children:[a.jsx("div",{className:"flex items-center justify-between mb-8",children:a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[a.jsx(sC,{size:24}),"Notification Center"]}),a.jsx("p",{className:"text-zinc-500 text-sm mt-1",children:"Manual maintenance tasks and verification checklist."})]})}),a.jsx("div",{className:"grid gap-4 max-w-4xl",children:j6.map(C=>{const D=W(C.id,C.period),Q=P[C.id];return a.jsxs("div",{className:`p-4 rounded-xl border flex items-center gap-4 transition-all ${D==="overdue"?"bg-red-500/5 border-red-500/30":D==="due-soon"?"bg-orange-500/5 border-orange-500/30":"bg-zinc-900/50 border-zinc-800"}`,children:[a.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${D==="overdue"?"bg-red-500/20 text-red-400":D==="due-soon"?"bg-orange-500/20 text-orange-400":"bg-zinc-800 text-zinc-400"}`,children:D==="overdue"?a.jsx(Bs,{size:20}):D==="due-soon"?a.jsx(gx,{size:20}):a.jsx(vt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h3",{className:"font-bold text-zinc-200",children:C.title}),D==="overdue"&&a.jsx("span",{className:"bg-red-500 text-white text-[10px] px-1.5 py-0.5 rounded uppercase font-bold",children:"Overdue"}),D==="due-soon"&&a.jsx("span",{className:"bg-orange-500 text-white text-[10px] px-1.5 py-0.5 rounded uppercase font-bold",children:"Due Soon"})]}),a.jsx("p",{className:"text-xs text-zinc-500 truncate",children:C.desc})]}),a.jsxs("div",{className:"text-right mr-4 min-w-[120px]",children:[a.jsx("div",{className:"text-xs text-zinc-400",children:"Last Checked"}),a.jsx("div",{className:"font-mono text-sm text-zinc-200",children:Q?new Date(Q).toLocaleDateString():"Never"})]}),a.jsx("button",{onClick:()=>q(C.id),className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg text-xs font-bold transition-colors",children:"Mark Done"})]},C.id)})})]}):a.jsxs("div",{className:"flex-1 p-10 overflow-auto flex flex-col animate-in slide-in-from-bottom-4 duration-300",children:[a.jsx("div",{className:"flex items-center justify-between mb-8",children:a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[a.jsx(vx,{size:24}),"Developer Tools"]}),a.jsx("p",{className:"text-zinc-500 text-sm mt-1",children:"Debug utils and granular cache control."})]})}),a.jsxs("div",{className:"max-w-4xl space-y-8",children:[a.jsxs("section",{children:[a.jsxs("h3",{className:"text-sm font-bold text-zinc-400 uppercase tracking-wider mb-4 flex items-center gap-2",children:[a.jsx(oC,{size:14}),"Granular Cache Management"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 border border-zinc-800 rounded-xl bg-zinc-900/30",children:[a.jsx("div",{className:"font-bold text-zinc-200 mb-1",children:"User Settings"}),a.jsx("div",{className:"text-xs text-zinc-500 mb-4 h-8",children:"Major, Entrance Year, Theme, Language."}),a.jsxs("button",{onClick:()=>{localStorage.removeItem("nsysu-major"),localStorage.removeItem("nsysu-entrance-year"),localStorage.removeItem("nsysu-theme"),localStorage.removeItem("nsysu-student-class"),window.location.reload()},className:"w-full py-2 bg-zinc-800 hover:bg-zinc-700 text-white text-xs rounded transition-colors flex items-center justify-center gap-2",children:[a.jsx(Un,{size:12})," Clear Settings"]})]}),a.jsxs("div",{className:"p-4 border border-zinc-800 rounded-xl bg-zinc-900/30",children:[a.jsx("div",{className:"font-bold text-zinc-200 mb-1",children:"Tutorial & Tips"}),a.jsx("div",{className:"text-xs text-zinc-500 mb-4 h-8",children:'Reset "Seen" status for all tutorials.'}),a.jsxs("button",{onClick:()=>{localStorage.removeItem("nsysu-tutorial-seen"),localStorage.removeItem("nsysu-last-announcement-ver"),localStorage.removeItem("nsysu-setup-reminder-seen"),window.location.reload()},className:"w-full py-2 bg-zinc-800 hover:bg-zinc-700 text-white text-xs rounded transition-colors flex items-center justify-center gap-2",children:[a.jsx(oC,{size:12})," Reset Tutorials"]})]}),a.jsxs("div",{className:"p-4 border border-zinc-800 rounded-xl bg-zinc-900/30",children:[a.jsx("div",{className:"font-bold text-zinc-200 mb-1",children:"API Catalog Cache"}),a.jsx("div",{className:"text-xs text-zinc-500 mb-4 h-8",children:"Clears browser memory of fetched courses."}),a.jsxs("button",{onClick:()=>window.location.reload(),className:"w-full py-2 bg-blue-600 hover:bg-blue-500 text-white text-xs rounded transition-colors flex items-center justify-center gap-2",children:[a.jsx(q5,{size:12})," Force Reload"]})]})]})]}),a.jsx("div",{className:"h-px bg-zinc-800"}),a.jsxs("section",{children:[a.jsxs("h3",{className:"text-sm font-bold text-zinc-400 uppercase tracking-wider mb-4 flex items-center gap-2",children:[a.jsx(nC,{size:14}),"Feature Flags & Debug"]}),a.jsxs("div",{className:"bg-zinc-900/30 border border-zinc-800 rounded-xl overflow-hidden",children:[a.jsxs("div",{className:"p-4 flex items-center justify-between border-b border-zinc-800 last:border-0 hover:bg-zinc-800/10",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-red-500/10 text-red-400 flex items-center justify-center",children:a.jsx(cC,{size:16})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-bold text-zinc-200 text-sm",children:"Force Offline Mode"}),a.jsx("div",{className:"text-xs text-zinc-500",children:"Simulate API failure to test backup data fallback"})]})]}),a.jsx("button",{onClick:te,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${localStorage.getItem("nsysu-force-offline")==="true"?"bg-emerald-500":"bg-zinc-700"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition transition-transform ${localStorage.getItem("nsysu-force-offline")==="true"?"translate-x-6":"translate-x-1"}`})})]}),a.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-zinc-800/10 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500/10 text-purple-400 flex items-center justify-center",children:a.jsx(nC,{size:16})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-bold text-zinc-200 text-sm",children:"Debug Boundaries"}),a.jsx("div",{className:"text-xs text-zinc-500",children:"Highlight UI component boundaries (Red Outlines)"})]})]}),a.jsx("button",{onClick:()=>{const D=!(localStorage.getItem("nsysu-debug-boundaries")==="true");localStorage.setItem("nsysu-debug-boundaries",D.toString()),D?document.body.classList.add("debug-outlines"):document.body.classList.remove("debug-outlines"),G(Q=>({...Q}))},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${localStorage.getItem("nsysu-debug-boundaries")==="true"?"bg-purple-600":"bg-zinc-700"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition transition-transform ${localStorage.getItem("nsysu-debug-boundaries")==="true"?"translate-x-6":"translate-x-1"}`})})]})]})]})]})]})]})]}),document.body)},Ho=r=>{const e=JSON.parse(localStorage.getItem("nsysu-micro-credits-data")||"null"),t=JSON.parse(localStorage.getItem("nsysu-interdisciplinary-teacher-education-data")||"null"),s=JSON.parse(localStorage.getItem("nsysu-interdisciplinary-double-major-data")||"null"),A=JSON.parse(localStorage.getItem("nsysu-interdisciplinary-cross-disciplinary-data")||"null"),l=JSON.parse(localStorage.getItem("nsysu-diverse-learning-data")||"null"),d=JSON.parse(localStorage.getItem("nsysu-interdisciplinary-course-9-data")||"null"),u=JSON.parse(localStorage.getItem("nsysu-interdisciplinary-minor-data")||"null"),f=y=>{if(!y)return null;const v={...y};return v.proofFile!==void 0&&delete v.proofFile,v.proofBase64!==void 0&&delete v.proofBase64,v.proof!==void 0&&delete v.proof,v.hasProof=!!v.proofFileName,v},g={};for(let y=1;y<=10;y++){const v=`nsysu-interdisciplinary-item-${y}-notes`,S=localStorage.getItem(v);S&&(g[v]=S)}const x=Date.now();return localStorage.setItem("nsysu-cloud-sync-last-local-update",String(x)),{localUpdatedAt:x,settings:{studentClass:localStorage.getItem("nsysu-student-class"),graduationCredits:JSON.parse(localStorage.getItem("nsysu-grad-credits")||"128"),major:localStorage.getItem("nsysu-major"),entranceYear:Number(localStorage.getItem("nsysu-entrance-year"))||113},labels:{library:JSON.parse(localStorage.getItem("nsysu-labels-library")||"null"),map:JSON.parse(localStorage.getItem("nsysu-course-labels")||"null")},courses:r,semesters:JSON.parse(localStorage.getItem("nsysu-semesters")||"null"),plannerDraft:JSON.parse(localStorage.getItem("nsysu-planner-draft")||"[]"),plannerLastExportSemester:localStorage.getItem("nsysu-planner-last-export-semester")||null,interdisciplinaryStatus:JSON.parse(localStorage.getItem("nsysu-interdisciplinary-status")||"{}"),minorData:f(u),microCreditsData:f(e),teacherEducationData:f(t),doubleMajorData:f(s),crossDisciplinaryData:f(A),diverseLearningData:f(l),interdisciplinaryCourseData:f(d),interdisciplinaryNotes:g}},wh=r=>{if(r){window.__nsysu_pause_sync_events=!0;try{r.courses&&Array.isArray(r.courses)&&localStorage.setItem("nsysu-courses",JSON.stringify(r.courses)),r.semesters&&localStorage.setItem("nsysu-semesters",JSON.stringify(r.semesters)),r.settings&&(r.settings.studentClass&&localStorage.setItem("nsysu-student-class",r.settings.studentClass),r.settings.graduationCredits&&localStorage.setItem("nsysu-grad-credits",JSON.stringify(r.settings.graduationCredits)),r.settings.major&&localStorage.setItem("nsysu-major",r.settings.major),r.settings.entranceYear&&localStorage.setItem("nsysu-entrance-year",String(r.settings.entranceYear))),r.labels&&(r.labels.library&&localStorage.setItem("nsysu-labels-library",JSON.stringify(r.labels.library)),r.labels.map&&localStorage.setItem("nsysu-course-labels",JSON.stringify(r.labels.map))),r.plannerDraft&&localStorage.setItem("nsysu-planner-draft",JSON.stringify(r.plannerDraft)),r.plannerLastExportSemester&&localStorage.setItem("nsysu-planner-last-export-semester",r.plannerLastExportSemester),r.interdisciplinaryStatus&&localStorage.setItem("nsysu-interdisciplinary-status",JSON.stringify(r.interdisciplinaryStatus)),r.minorData&&localStorage.setItem("nsysu-interdisciplinary-minor-data",JSON.stringify(r.minorData)),r.microCreditsData&&localStorage.setItem("nsysu-micro-credits-data",JSON.stringify(r.microCreditsData)),r.teacherEducationData&&localStorage.setItem("nsysu-interdisciplinary-teacher-education-data",JSON.stringify(r.teacherEducationData)),r.doubleMajorData&&localStorage.setItem("nsysu-interdisciplinary-double-major-data",JSON.stringify(r.doubleMajorData)),r.crossDisciplinaryData&&localStorage.setItem("nsysu-interdisciplinary-cross-disciplinary-data",JSON.stringify(r.crossDisciplinaryData)),r.diverseLearningData&&localStorage.setItem("nsysu-diverse-learning-data",JSON.stringify(r.diverseLearningData)),r.interdisciplinaryCourseData&&localStorage.setItem("nsysu-interdisciplinary-course-9-data",JSON.stringify(r.interdisciplinaryCourseData)),r.interdisciplinaryNotes&&Object.entries(r.interdisciplinaryNotes).forEach(([e,t])=>{localStorage.setItem(e,t)})}finally{window.__nsysu_pause_sync_events=!1}sessionStorage.setItem("cloud-synced","true")}},yf="1.1",B1="2026/02";function T6(r,e){const{user:t,logout:s}=Bd(),[A,l]=k.useState("idle"),[d,u]=k.useState(!1),[f,g]=k.useState(null),[x,y]=k.useState(null),[v,S]=k.useState(0),R=k.useRef(!0),j=k.useRef(!1);return k.useEffect(()=>{if(!window.__nsysu_proxy_installed){const te=localStorage.setItem;localStorage.setItem=function(E,N){te.apply(this,[E,N]);const C=E==="nsysu-cloud-sync-last-local-update"||E==="nsysu-local-state-modified-at"||E==="nsysu-last-synced-cloud-time"||E==="nsysu-view-mode"||E==="nsysu-tracker-scroll"||E==="nsysu-setup-reminder-seen";E.startsWith("nsysu-")&&!C&&!window.__nsysu_pause_sync_events&&(te.apply(localStorage,["nsysu-local-state-modified-at",String(Date.now())]),window.dispatchEvent(new Event("nsysu-local-storage-update")))};const z=localStorage.removeItem;localStorage.removeItem=function(E){z.apply(this,[E]);const N=E==="nsysu-cloud-sync-last-local-update"||E==="nsysu-local-state-modified-at"||E==="nsysu-last-synced-cloud-time"||E==="nsysu-view-mode"||E==="nsysu-tracker-scroll"||E==="nsysu-setup-reminder-seen";E.startsWith("nsysu-")&&!N&&!window.__nsysu_pause_sync_events&&(te.apply(localStorage,["nsysu-local-state-modified-at",String(Date.now())]),window.dispatchEvent(new Event("nsysu-local-storage-update")))},window.__nsysu_proxy_installed=!0}const W=()=>{S(te=>te+1)};return window.addEventListener("nsysu-local-storage-update",W),()=>window.removeEventListener("nsysu-local-storage-update",W)},[]),k.useEffect(()=>{if(!t){l("idle"),u(!1),R.current=!0;return}(async()=>{try{if(sessionStorage.getItem("cloud-synced")==="true"){sessionStorage.removeItem("cloud-synced"),l("synced"),j.current=!0,R.current=!1;return}const z=Qo(Lo,"users",t.uid),E=await eC(z);if(E.exists()){const N=E.data();if(!N.termsAccepted||typeof N.termsAccepted!="object"||N.termsAccepted.version!==yf){u(!0),l("idle");return}if(N.data){const C=localStorage.getItem("nsysu-cloud-sync-last-local-update"),D=C?parseInt(C,10):0,Q=localStorage.getItem("nsysu-local-state-modified-at"),T=Q?parseInt(Q,10):0,_=localStorage.getItem("nsysu-last-synced-cloud-time"),U=_?parseInt(_,10):0,Y=N.lastUpdatedAt||0,M=Math.max(D,T),F=r.length,K=N.data.courses?.length||0;if(F===0){console.log("Local is empty. Downloading from cloud safely..."),j.current=!0,localStorage.setItem("nsysu-last-synced-cloud-time",String(Y)),wh(N.data),N.data.courses&&e(N.data.courses),window.location.reload();return}if(K===0){console.log("Cloud courses are empty. Pushing local changes to cloud safely...");const ne=Ho(r),ee=Date.now();await bA(z,{email:t.email,displayName:t.displayName,lastUpdatedAt:ee,data:ne},{merge:!0}),localStorage.setItem("nsysu-last-synced-cloud-time",String(ee)),l("synced")}if(F>0&&K>0)if(M>Y&&U===Y){if(K>0&&(F===0||K-F>=5)){console.log(` Mass Deletion Protection Triggered! Local: ${F} vs Cloud: ${K}`),g(N.data),y({localTime:M,cloudTime:Y}),l("conflict");return}console.log("Valid offline edit detected (Anchor matches). Pushing to cloud...");const ee=Ho(r),O=Date.now();await bA(z,{email:t.email,displayName:t.displayName,lastUpdatedAt:O,data:ee},{merge:!0}),localStorage.setItem("nsysu-last-synced-cloud-time",String(O))}else if(Y>M&&M<=U){console.log("Cloud is newer and local is untouched since last sync. Downloading from cloud..."),j.current=!0,localStorage.setItem("nsysu-last-synced-cloud-time",String(Y)),wh(N.data),N.data.courses&&e(N.data.courses),window.location.reload();return}else{console.log(` Conflict detected! Anchor: ${U}, Cloud: ${Y}, Local Edit: ${M}`),g(N.data),y({localTime:M,cloudTime:Y}),l("conflict");return}}else{console.log("Cloud has no data, pushing local changes to cloud safely...");const C=Ho(r),D=Date.now();await bA(z,{email:t.email,displayName:t.displayName,lastUpdatedAt:D,data:C},{merge:!0}),localStorage.setItem("nsysu-last-synced-cloud-time",String(D))}}else{u(!0),l("idle");return}l("synced")}catch(te){console.error("Firebase sync error on load:",te)}finally{R.current=!1}})()},[t]),k.useEffect(()=>{if(!t||R.current)return;if(j.current){j.current=!1;return}l("editing");const W=setTimeout(async()=>{l("saving");try{const te=Qo(Lo,"users",t.uid),z=Ho(r),E=Date.now();await bA(te,{email:t.email,displayName:t.displayName,lastUpdatedAt:E,data:z},{merge:!0}),localStorage.setItem("nsysu-last-synced-cloud-time",String(E)),l("synced")}catch(te){console.error("Firebase sync error on save:",te),l("idle")}},3e3);return()=>clearTimeout(W)},[r,t,v]),k.useEffect(()=>{const W=te=>{te.key?.startsWith("nsysu-")};return window.addEventListener("storage",W),()=>window.removeEventListener("storage",W)},[]),k.useEffect(()=>{if(!t)return;const W=async()=>{console.log("Network came back online. Triggering cloud sync resolution...");try{const te=Qo(Lo,"users",t.uid),z=await eC(te);if(z.exists()){const E=z.data();if(E.data){const N=localStorage.getItem("nsysu-cloud-sync-last-local-update"),C=N?parseInt(N,10):0,D=E.lastUpdatedAt||0;if(D>=C)console.log("Online recovery: Cloud is newer, restoring..."),j.current=!0,localStorage.setItem("nsysu-last-synced-cloud-time",String(D)),wh(E.data),window.location.reload();else{console.log("Online recovery: Local is newer, pushing to cloud...");const Q=Ho(r),T=Date.now();await bA(te,{email:t.email,displayName:t.displayName,lastUpdatedAt:T,data:Q},{merge:!0}),localStorage.setItem("nsysu-last-synced-cloud-time",String(T))}}}}catch(te){console.error("Online recovery sync failed:",te)}};return window.addEventListener("online",W),()=>window.removeEventListener("online",W)},[t,r]),{syncState:A,needsConsent:d,conflictTimes:x,acceptConsent:async()=>{if(t)try{l("saving");const W=Qo(Lo,"users",t.uid);await bA(W,{email:t.email,displayName:t.displayName,termsAccepted:{hasConsented:!0,agreedAt:Date.now(),version:yf}},{merge:!0}),u(!1),window.location.reload()}catch(W){console.error("Failed to accept consent:",W),l("idle")}},declineConsent:()=>{u(!1)},deleteCloudData:async()=>{if(t)try{const W=Qo(Lo,"users",t.uid);await BD(W),l("idle"),u(!1)}catch(W){throw console.error("Failed to delete cloud data:",W),W}},resolveConflict:async W=>{if(t)if(W==="cloud")f&&(console.log("User chose to keep cloud data. Restoring..."),j.current=!0,localStorage.removeItem("nsysu-local-state-modified-at"),wh(f),window.location.reload());else if(W==="local"){console.log("User chose to keep local data. Pushing to cloud...");try{l("saving");const te=Qo(Lo,"users",t.uid),z=Ho(r),E=Date.now();await bA(te,{email:t.email,displayName:t.displayName,lastUpdatedAt:E,data:z},{merge:!0}),localStorage.setItem("nsysu-last-synced-cloud-time",String(E)),l("synced"),R.current=!1}catch(te){console.error("Firebase sync error on conflict resolution (local choice):",te),l("idle")}g(null)}else W==="cancel"&&(console.log("User chose to cancel login at conflict. Logging out..."),g(null),l("idle"),await s(),window.location.reload())}}}const U6=({onAccept:r,onDecline:e,theme:t})=>{const{language:s}=it(),{logout:A}=Bd(),[l,d]=k.useState(!1);k.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]);const u=async()=>{try{await A(),e()}catch(f){console.error("Failed to logout on decline",f)}};return a.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-surface border border-border rounded-xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[a.jsx("div",{className:"p-6 border-b border-border flex items-center justify-between bg-background",children:a.jsx("div",{className:"flex items-center gap-3",children:a.jsx("img",{src:t==="dark"?"./Dark_mode_full.png":"./Light_mode_full.png",alt:"ClearGrad",className:"h-8 w-auto object-contain"})})}),a.jsxs("div",{className:"p-6 overflow-y-auto flex-1 bg-surface",children:[a.jsxs("div",{className:"flex flex-col mb-4 gap-1",children:[a.jsx("h2",{className:"text-xl font-bold text-foreground",children:s==="zh"?" ClearGrad  - ":" ClearGrad - Data Usage & Disclaimer"}),a.jsx("span",{className:"text-xs text-muted-foreground font-medium self-start",children:s==="zh"?`v${yf} ( ${B1})`:`Version: v${yf} (Last updated ${B1})`})]}),a.jsx("div",{className:"space-y-4 text-sm text-foreground/90 leading-relaxed bg-background/50 p-5 rounded-lg border border-border/50",children:s==="zh"?a.jsxs(a.Fragment,{children:[a.jsx("p",{children:" ClearGrad"}),a.jsx("h3",{className:"font-semibold text-primary mt-6 mb-2",children:"1.  (Privacy & Data Collection)"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:""}),"  Google Email Google Firebase "]}),a.jsxs("li",{children:[a.jsx("strong",{children:" (Local-First)"})," /PDF"]})]}),a.jsx("h3",{className:"font-semibold text-primary mt-6 mb-2",children:"2.  (Disclaimer of Liability)"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsx("li",{children:""}),a.jsx("li",{children:""}),a.jsx("li",{children:""})]}),a.jsx("h3",{className:"font-semibold text-primary mt-6 mb-2",children:"3.  (Official Integration & Data Transfer)"}),a.jsx("p",{children:"ClearGrad "}),a.jsx("p",{children:" "}),a.jsx("h3",{className:"font-semibold text-primary mt-6 mb-2",children:"4.  (Right to Erasure)"}),a.jsx("p",{children:" Google "}),a.jsx("h3",{className:"font-semibold text-primary mt-6 mb-2",children:"5.  (Collection, Processing, and Algorithmic Application of De-identified Data)"}),a.jsxs("p",{children:[" ClearGrad ",a.jsx("strong",{children:""}),""]})]}):a.jsxs(a.Fragment,{children:[a.jsx("p",{children:"Welcome to ClearGrad! To provide a seamless cross-device experience, this system uses cloud synchronization. Before enabling, please read and agree to the following terms:"}),a.jsx("h3",{className:"font-semibold text-primary mt-6 mb-2",children:"1. Privacy & Data Collection"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Encrypted Cloud Backup:"})," When you log in with your Google account, the system collects your basic identification information (Email, Display Name) as well as your course drafts and profile settings. This data is securely encrypted and stored in the Google Firebase cloud database using the highest level security rules. No developer or third party can access or read your personal schedule except yourself."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Local-First Proof Documents:"}),' To maximize your privacy, any physical proofs such as transcripts or approval letters (images/PDF) you upload will only be encrypted and stored on your current device (browser) and will never be uploaded to our cloud servers. Only the "file name and presence flag" are synced to the cloud for cross-device identification.']})]}),a.jsx("h3",{className:"font-semibold text-primary mt-6 mb-2",children:"2. Disclaimer of Liability"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsx("li",{children:"This system is an independent open-source tool to assist students in tracking credits and is not an official university application."}),a.jsx("li",{children:"We strive to ensure the accuracy of credit calculations and requirement checks, but do not guarantee complete consistency with the university's academic affairs system."}),a.jsx("li",{children:"You understand and agree: Final graduation qualifications, credit recognition, and interdisciplinary evaluations are solely subject to the final review of your university's official academic affairs system and department office. The development team bears no legal or compensatory responsibility for misjudgments in scheduling or delayed graduation resulting from reliance on this system."})]}),a.jsx("h3",{className:"font-semibold text-primary mt-6 mb-2",children:"3. Official Integration & Data Transfer"}),a.jsx("p",{children:"ClearGrad will actively seek opportunities for official system integration or handover with universities (e.g., National Sun Yat-sen University) in the future to provide a longer-term, more stable service."}),a.jsx("p",{children:"You agree that in the event of such a system handover or merge, the development team may safely transfer your account and course data to the university's official servers in compliance with personal data protection laws. After the data transfer is complete, the management and privacy terms of your data will follow the official privacy policy published by the university."}),a.jsx("h3",{className:"font-semibold text-primary mt-6 mb-2",children:"4. Right to Erasure"}),a.jsx("p",{children:"You have full control over your personal data. You can clear your cloud backup data in the system settings at any time, or terminate the sync service by unlinking your Google account."}),a.jsx("h3",{className:"font-semibold text-primary mt-6 mb-2",children:"5. Collection, Processing, and Algorithmic Application of De-identified Data"}),a.jsxs("p",{children:["To provide smarter course recommendations and system optimizations (such as popular course algorithms), you agree that ClearGrad may collect and analyze your course scheduling and credit structure data under the premise of being ",a.jsx("strong",{children:"'completely de-identified (removing personal characteristics such as name and student ID)'"}),". This data is solely for internal system algorithmic use and will never be provided to any third party."]})]})})]}),a.jsxs("div",{className:"p-6 border-t border-border bg-background flex flex-col gap-4",children:[a.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",onClick:()=>d(!l),children:[a.jsx("div",{className:`mt-0.5 w-5 h-5 rounded border flex items-center justify-center transition-colors flex-shrink-0 ${l?"bg-primary border-primary text-white":"border-gray-500 group-hover:border-primary"}`,children:l&&a.jsx(vt,{size:14})}),a.jsx("span",{className:"text-sm font-medium text-foreground select-none",children:s==="zh"?"ClearGrad ":"I have read and agree to the ClearGrad Data Usage & Disclaimer, and agree to enable cloud sync."})]}),a.jsxs("div",{className:"flex justify-between items-center mt-2",children:[a.jsx("button",{onClick:u,className:"px-4 py-2 rounded-lg text-sm font-medium text-muted hover:text-red-400 hover:bg-red-400/10 transition-colors",children:s==="zh"?"":"[ Decline & Logout ]"}),a.jsx("button",{onClick:r,disabled:!l,className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${l?"bg-primary text-white shadow-lg shadow-primary/20 hover:bg-primary/90":"bg-surface border border-border text-muted cursor-not-allowed"}`,children:s==="zh"?"":"Accept & Continue"})]})]})]})})},Q6=({onConfirm:r,onCancel:e})=>{const{language:t}=it();return a.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:a.jsx("div",{className:"bg-surface border border-red-500/30 rounded-xl shadow-2xl shadow-red-500/10 w-full max-w-md overflow-hidden animate-in fade-in zoom-in duration-300",children:a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"h-12 w-12 rounded-full bg-red-500/10 text-red-500 flex items-center justify-center mb-4 border border-red-500/20",children:a.jsx(Bs,{size:24,className:"animate-pulse"})}),a.jsx("h2",{className:"text-xl font-bold text-foreground mb-2",children:t==="zh"?"":"Delete Cloud Backup & Logout"}),a.jsx("p",{className:"text-sm text-muted mb-4 leading-relaxed",children:t==="zh"?"":"Are you sure you want to permanently delete all backup data on the cloud? This operation cannot be undone. Your local course scheduling data will be retained, and you will be logged out."}),a.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[a.jsx("button",{onClick:e,className:"px-4 py-2 rounded-lg text-sm font-medium text-muted hover:text-foreground hover:bg-surface/80 border border-border/50 transition-colors",children:t==="zh"?"":"Cancel"}),a.jsxs("button",{onClick:r,className:"px-6 py-2 rounded-lg text-sm font-bold bg-red-500 text-white shadow-lg shadow-red-500/20 hover:bg-red-600 transition-all flex items-center gap-2",children:[a.jsx(Un,{size:16}),t==="zh"?"":"Delete & Logout"]})]})]})})})},F6=({mode:r,setMode:e,showSettings:t,setShowSettings:s})=>{const{t:A}=it(),l=[{id:"tracker",icon:tN,label:A.app.tracker,isActive:r==="tracker"&&!t,onClick:()=>{e("tracker"),s(!1)}},{id:"planner",icon:OA,label:A.app.planner,isActive:r==="planner"&&!t,onClick:()=>{e("planner"),s(!1)}},{id:"settings",icon:rk,label:A.app.settings,isActive:t,onClick:()=>{s(!0)}}];return a.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 md:hidden bg-surface/80 backdrop-blur-md border-t border-border pb-safe",children:a.jsx("div",{className:"flex justify-around items-center h-16 px-2",children:l.map(d=>{const u=d.icon,f=d.isActive?"text-primary dark:text-[#A8C8FA]":"text-muted hover:text-foreground";return a.jsxs("button",{onClick:d.onClick,className:`flex flex-col items-center justify-center w-full h-full gap-1 transition-colors ${f}`,children:[a.jsx("div",{className:`p-1.5 rounded-full ${d.isActive?"bg-primary/20":""}`,children:a.jsx(u,{size:22,className:d.isActive?"stroke-[2.5px]":"stroke-2"})}),a.jsx("span",{className:"text-[10px] font-medium",children:d.label})]},d.id)})})})},I6=({onResolve:r,conflictTimes:e})=>{const{language:t}=it(),s=A=>{if(!A)return t==="zh"?"":"Unknown";const l=new Date(A),d=new Date,u=l.getDate()===d.getDate()&&l.getMonth()===d.getMonth()&&l.getFullYear()===d.getFullYear(),f=l.getHours().toString().padStart(2,"0"),g=l.getMinutes().toString().padStart(2,"0"),x=`${f}:${g}`;return u?t==="zh"?` ${x}`:`Today ${x}`:`${l.getFullYear()}/${(l.getMonth()+1).toString().padStart(2,"0")}/${l.getDate().toString().padStart(2,"0")} ${x}`};return k.useEffect(()=>{const A=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=A}},[]),a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] flex items-center justify-center p-4",children:a.jsx("div",{className:"bg-surface border border-yellow-500/30 rounded-xl shadow-2xl shadow-yellow-500/10 w-full max-w-lg overflow-hidden animate-in fade-in zoom-in duration-300 flex flex-col max-h-[90vh]",children:a.jsxs("div",{className:"p-6 overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"h-10 w-10 rounded-full bg-yellow-500/10 text-yellow-500 flex items-center justify-center border border-yellow-500/20 flex-shrink-0",children:a.jsx(Bs,{size:20,className:"animate-pulse"})}),a.jsx("h2",{className:"text-xl font-bold text-foreground",children:t==="zh"?"":"Cloud Backup Conflict Detected"})]}),a.jsxs("div",{className:"space-y-4 text-sm text-foreground/90 leading-relaxed bg-background/50 p-4 rounded-lg border border-border/50",children:[a.jsx("p",{children:t==="zh"?"":"The system detected unsynced progress on this device, but your cloud also has a previous backup."}),a.jsx("p",{className:"font-semibold text-yellow-500/90 dark:text-yellow-400",children:t==="zh"?"":"Please choose which data to keep. (Warning: Overwritten data cannot be recovered)"})]}),a.jsxs("div",{className:"mt-6 flex flex-col gap-3",children:[a.jsxs("button",{onClick:()=>r("cloud"),className:"w-full flex items-center justify-center gap-3 px-6 py-3.5 rounded-lg font-bold bg-primary text-white shadow-lg shadow-primary/20 hover:bg-primary/90 transition-all border border-transparent",children:[a.jsx(e5,{size:20}),a.jsxs("div",{className:"flex flex-col items-start leading-tight",children:[a.jsx("span",{children:t==="zh"?"":"Download Cloud Backup"}),a.jsx("span",{className:"text-xs font-medium opacity-80 mt-1",children:t==="zh"?"()":"(Keep old records, overwrite this device)"}),e&&a.jsx("span",{className:"text-xs font-bold text-yellow-300 mt-0.5",children:t==="zh"?`(${s(e.cloudTime)})`:`(Cloud Last Backup: ${s(e.cloudTime)})`})]})]}),a.jsxs("button",{onClick:()=>r("local"),className:"w-full flex items-center justify-center gap-3 px-6 py-3.5 rounded-lg font-bold bg-surface text-foreground border border-border hover:bg-surface/80 hover:border-border/80 transition-all",children:[a.jsx(r5,{size:20,className:"text-muted"}),a.jsxs("div",{className:"flex flex-col items-start leading-tight",children:[a.jsx("span",{children:t==="zh"?"":"Upload Current Progress"}),a.jsx("span",{className:"text-xs font-medium text-muted mt-1",children:t==="zh"?"()":"(Keep new progress, overwrite cloud backup)"}),e&&a.jsx("span",{className:"text-xs font-bold text-blue-500 dark:text-blue-400 mt-0.5",children:t==="zh"?`(${s(e.localTime)})`:`(Local Last Edit: ${s(e.localTime)})`})]})]}),a.jsx("div",{className:"h-px w-full bg-border my-2"}),a.jsxs("button",{onClick:()=>r("cancel"),className:"w-full flex items-center justify-center gap-3 px-6 py-3 rounded-lg font-medium text-red-500 hover:bg-red-500/10 transition-all border border-transparent",children:[a.jsx(k5,{size:18}),a.jsx("span",{children:t==="zh"?" ()":"Cancel Login (Decide Later)"})]})]})]})})})};let Xx={},bS;function Kp(r={}){Xx={animate:!0,allowClose:!0,overlayClickBehavior:"close",overlayOpacity:.7,smoothScroll:!1,disableActiveInteraction:!1,showProgress:!1,stagePadding:10,stageRadius:5,popoverOffset:10,showButtons:["next","previous","close"],disableButtons:[],overlayColor:"#000",...r}}function Ie(r){return r?Xx[r]:Xx}function D6(r){bS=r}function qs(){return bS}let bf={};function Bh(r,e){bf[r]=e}function IA(r){var e;(e=bf[r])==null||e.call(bf)}function k6(){bf={}}function Ch(r,e,t,s){return(r/=s/2)<1?t/2*r*r+e:-t/2*(--r*(r-2)-1)+e}function vS(r){const e='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])';return r.flatMap(t=>{const s=t.matches(e),A=Array.from(t.querySelectorAll(e));return[...s?[t]:[],...A]}).filter(t=>getComputedStyle(t).pointerEvents!=="none"&&L6(t))}function wS(r){if(!r||M6(r))return;const e=Ie("smoothScroll"),t=r.offsetHeight>window.innerHeight;r.scrollIntoView({behavior:!e||R6(r)?"auto":"smooth",inline:"center",block:t?"start":"center"})}function R6(r){if(!r||!r.parentElement)return;const e=r.parentElement;return e.scrollHeight>e.clientHeight}function M6(r){const e=r.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}function L6(r){return!!(r.offsetWidth||r.offsetHeight||r.getClientRects().length)}let vf={};function qr(r,e){vf[r]=e}function Me(r){return r?vf[r]:vf}function C1(){vf={}}function H6(r,e,t,s){let A=Me("__activeStagePosition");const l=A||t.getBoundingClientRect(),d=s.getBoundingClientRect(),u=Ch(r,l.x,d.x-l.x,e),f=Ch(r,l.y,d.y-l.y,e),g=Ch(r,l.width,d.width-l.width,e),x=Ch(r,l.height,d.height-l.height,e);A={x:u,y:f,width:g,height:x},CS(A),qr("__activeStagePosition",A)}function BS(r){if(!r)return;const e=r.getBoundingClientRect(),t={x:e.x,y:e.y,width:e.width,height:e.height};qr("__activeStagePosition",t),CS(t)}function O6(){const r=Me("__activeStagePosition"),e=Me("__overlaySvg");if(!r)return;if(!e){console.warn("No stage svg found.");return}const t=window.innerWidth,s=window.innerHeight;e.setAttribute("viewBox",`0 0 ${t} ${s}`)}function P6(r){const e=V6(r);document.body.appendChild(e),SS(e,t=>{t.target.tagName==="path"&&IA("overlayClick")}),qr("__overlaySvg",e)}function CS(r){const e=Me("__overlaySvg");if(!e){P6(r);return}const t=e.firstElementChild;if(t?.tagName!=="path")throw new Error("no path element found in stage svg");t.setAttribute("d",ES(r))}function V6(r){const e=window.innerWidth,t=window.innerHeight,s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.classList.add("driver-overlay","driver-overlay-animated"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s.setAttribute("xmlSpace","preserve"),s.setAttribute("xmlnsXlink","http://www.w3.org/1999/xlink"),s.setAttribute("version","1.1"),s.setAttribute("preserveAspectRatio","xMinYMin slice"),s.style.fillRule="evenodd",s.style.clipRule="evenodd",s.style.strokeLinejoin="round",s.style.strokeMiterlimit="2",s.style.zIndex="10000",s.style.position="fixed",s.style.top="0",s.style.left="0",s.style.width="100%",s.style.height="100%";const A=document.createElementNS("http://www.w3.org/2000/svg","path");return A.setAttribute("d",ES(r)),A.style.fill=Ie("overlayColor")||"rgb(0,0,0)",A.style.opacity=`${Ie("overlayOpacity")}`,A.style.pointerEvents="auto",A.style.cursor="auto",s.appendChild(A),s}function ES(r){const e=window.innerWidth,t=window.innerHeight,s=Ie("stagePadding")||0,A=Ie("stageRadius")||0,l=r.width+s*2,d=r.height+s*2,u=Math.min(A,l/2,d/2),f=Math.floor(Math.max(u,0)),g=r.x-s+f,x=r.y-s,y=l-f*2,v=d-f*2;return`M${e},0L0,0L0,${t}L${e},${t}L${e},0Z
    M${g},${x} h${y} a${f},${f} 0 0 1 ${f},${f} v${v} a${f},${f} 0 0 1 -${f},${f} h-${y} a${f},${f} 0 0 1 -${f},-${f} v-${v} a${f},${f} 0 0 1 ${f},-${f} z`}function z6(){const r=Me("__overlaySvg");r&&r.remove()}function K6(){const r=document.getElementById("driver-dummy-element");if(r)return r;let e=document.createElement("div");return e.id="driver-dummy-element",e.style.width="0",e.style.height="0",e.style.pointerEvents="none",e.style.opacity="0",e.style.position="fixed",e.style.top="50%",e.style.left="50%",document.body.appendChild(e),e}function E1(r){const{element:e}=r;let t=typeof e=="function"?e():typeof e=="string"?document.querySelector(e):e;t||(t=K6()),q6(t,r)}function G6(){const r=Me("__activeElement"),e=Me("__activeStep");r&&(BS(r),O6(),_S(r,e))}function q6(r,e){var t;const s=Date.now(),A=Me("__activeStep"),l=Me("__activeElement")||r,d=!l||l===r,u=r.id==="driver-dummy-element",f=l.id==="driver-dummy-element",g=Ie("animate"),x=e.onHighlightStarted||Ie("onHighlightStarted"),y=e?.onHighlighted||Ie("onHighlighted"),v=A?.onDeselected||Ie("onDeselected"),S=Ie(),R=Me();!d&&v&&v(f?void 0:l,A,{config:S,state:R,driver:qs()}),x&&x(u?void 0:r,e,{config:S,state:R,driver:qs()});const j=!d&&g;let V=!1;W6(),qr("previousStep",A),qr("previousElement",l),qr("activeStep",e),qr("activeElement",r);const P=()=>{if(Me("__transitionCallback")!==P)return;const G=Date.now()-s,q=400-G<=400/2;e.popover&&q&&!V&&j&&(N1(r,e),V=!0),Ie("animate")&&G<400?H6(G,400,l,r):(BS(r),y&&y(u?void 0:r,e,{config:Ie(),state:Me(),driver:qs()}),qr("__transitionCallback",void 0),qr("__previousStep",A),qr("__previousElement",l),qr("__activeStep",e),qr("__activeElement",r)),window.requestAnimationFrame(P)};qr("__transitionCallback",P),window.requestAnimationFrame(P),wS(r),!j&&e.popover&&N1(r,e),l.classList.remove("driver-active-element","driver-no-interaction"),l.removeAttribute("aria-haspopup"),l.removeAttribute("aria-expanded"),l.removeAttribute("aria-controls"),((t=e.disableActiveInteraction)!=null?t:Ie("disableActiveInteraction"))&&r.classList.add("driver-no-interaction"),r.classList.add("driver-active-element"),r.setAttribute("aria-haspopup","dialog"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-controls","driver-popover-content")}function Y6(){var r;(r=document.getElementById("driver-dummy-element"))==null||r.remove(),document.querySelectorAll(".driver-active-element").forEach(e=>{e.classList.remove("driver-active-element","driver-no-interaction"),e.removeAttribute("aria-haspopup"),e.removeAttribute("aria-expanded"),e.removeAttribute("aria-controls")})}function Ad(){const r=Me("__resizeTimeout");r&&window.cancelAnimationFrame(r),qr("__resizeTimeout",window.requestAnimationFrame(G6))}function $6(r){var e;if(!Me("isInitialized")||!(r.key==="Tab"||r.keyCode===9))return;const t=Me("__activeElement"),s=(e=Me("popover"))==null?void 0:e.wrapper,A=vS([...s?[s]:[],...t?[t]:[]]),l=A[0],d=A[A.length-1];if(r.preventDefault(),r.shiftKey){const u=A[A.indexOf(document.activeElement)-1]||d;u?.focus()}else{const u=A[A.indexOf(document.activeElement)+1]||l;u?.focus()}}function NS(r){var e;((e=Ie("allowKeyboardControl"))==null||e)&&(r.key==="Escape"?IA("escapePress"):r.key==="ArrowRight"?IA("arrowRightPress"):r.key==="ArrowLeft"&&IA("arrowLeftPress"))}function SS(r,e,t){const s=(A,l)=>{const d=A.target;r.contains(d)&&((!t||t(d))&&(A.preventDefault(),A.stopPropagation(),A.stopImmediatePropagation()),l?.(A))};document.addEventListener("pointerdown",s,!0),document.addEventListener("mousedown",s,!0),document.addEventListener("pointerup",s,!0),document.addEventListener("mouseup",s,!0),document.addEventListener("click",A=>{s(A,e)},!0)}function X6(){window.addEventListener("keyup",NS,!1),window.addEventListener("keydown",$6,!1),window.addEventListener("resize",Ad),window.addEventListener("scroll",Ad)}function J6(){window.removeEventListener("keyup",NS),window.removeEventListener("resize",Ad),window.removeEventListener("scroll",Ad)}function W6(){const r=Me("popover");r&&(r.wrapper.style.display="none")}function N1(r,e){var t,s;let A=Me("popover");A&&document.body.removeChild(A.wrapper),A=eP(),document.body.appendChild(A.wrapper);const{title:l,description:d,showButtons:u,disableButtons:f,showProgress:g,nextBtnText:x=Ie("nextBtnText")||"Next &rarr;",prevBtnText:y=Ie("prevBtnText")||"&larr; Previous",progressText:v=Ie("progressText")||"{current} of {total}"}=e.popover||{};A.nextButton.innerHTML=x,A.previousButton.innerHTML=y,A.progress.innerHTML=v,l?(A.title.innerHTML=l,A.title.style.display="block"):A.title.style.display="none",d?(A.description.innerHTML=d,A.description.style.display="block"):A.description.style.display="none";const S=u||Ie("showButtons"),R=g||Ie("showProgress")||!1,j=S?.includes("next")||S?.includes("previous")||R;A.closeButton.style.display=S.includes("close")?"block":"none",j?(A.footer.style.display="flex",A.progress.style.display=R?"block":"none",A.nextButton.style.display=S.includes("next")?"block":"none",A.previousButton.style.display=S.includes("previous")?"block":"none"):A.footer.style.display="none";const V=f||Ie("disableButtons")||[];V!=null&&V.includes("next")&&(A.nextButton.disabled=!0,A.nextButton.classList.add("driver-popover-btn-disabled")),V!=null&&V.includes("previous")&&(A.previousButton.disabled=!0,A.previousButton.classList.add("driver-popover-btn-disabled")),V!=null&&V.includes("close")&&(A.closeButton.disabled=!0,A.closeButton.classList.add("driver-popover-btn-disabled"));const P=A.wrapper;P.style.display="block",P.style.left="",P.style.top="",P.style.bottom="",P.style.right="",P.id="driver-popover-content",P.setAttribute("role","dialog"),P.setAttribute("aria-labelledby","driver-popover-title"),P.setAttribute("aria-describedby","driver-popover-description");const G=A.arrow;G.className="driver-popover-arrow";const q=((t=e.popover)==null?void 0:t.popoverClass)||Ie("popoverClass")||"";P.className=`driver-popover ${q}`.trim(),SS(A.wrapper,E=>{var N,C,D;const Q=E.target,T=((N=e.popover)==null?void 0:N.onNextClick)||Ie("onNextClick"),_=((C=e.popover)==null?void 0:C.onPrevClick)||Ie("onPrevClick"),U=((D=e.popover)==null?void 0:D.onCloseClick)||Ie("onCloseClick");if(Q.closest(".driver-popover-next-btn"))return T?T(r,e,{config:Ie(),state:Me(),driver:qs()}):IA("nextClick");if(Q.closest(".driver-popover-prev-btn"))return _?_(r,e,{config:Ie(),state:Me(),driver:qs()}):IA("prevClick");if(Q.closest(".driver-popover-close-btn"))return U?U(r,e,{config:Ie(),state:Me(),driver:qs()}):IA("closeClick")},E=>!(A!=null&&A.description.contains(E))&&!(A!=null&&A.title.contains(E))&&typeof E.className=="string"&&E.className.includes("driver-popover")),qr("popover",A);const W=((s=e.popover)==null?void 0:s.onPopoverRender)||Ie("onPopoverRender");W&&W(A,{config:Ie(),state:Me(),driver:qs()}),_S(r,e),wS(P);const te=r.classList.contains("driver-dummy-element"),z=vS([P,...te?[]:[r]]);z.length>0&&z[0].focus()}function jS(){const r=Me("popover");if(!(r!=null&&r.wrapper))return;const e=r.wrapper.getBoundingClientRect(),t=Ie("stagePadding")||0,s=Ie("popoverOffset")||0;return{width:e.width+t+s,height:e.height+t+s,realWidth:e.width,realHeight:e.height}}function S1(r,e){const{elementDimensions:t,popoverDimensions:s,popoverPadding:A,popoverArrowDimensions:l}=e;return r==="start"?Math.max(Math.min(t.top-A,window.innerHeight-s.realHeight-l.width),l.width):r==="end"?Math.max(Math.min(t.top-s?.realHeight+t.height+A,window.innerHeight-s?.realHeight-l.width),l.width):r==="center"?Math.max(Math.min(t.top+t.height/2-s?.realHeight/2,window.innerHeight-s?.realHeight-l.width),l.width):0}function j1(r,e){const{elementDimensions:t,popoverDimensions:s,popoverPadding:A,popoverArrowDimensions:l}=e;return r==="start"?Math.max(Math.min(t.left-A,window.innerWidth-s.realWidth-l.width),l.width):r==="end"?Math.max(Math.min(t.left-s?.realWidth+t.width+A,window.innerWidth-s?.realWidth-l.width),l.width):r==="center"?Math.max(Math.min(t.left+t.width/2-s?.realWidth/2,window.innerWidth-s?.realWidth-l.width),l.width):0}function _S(r,e){const t=Me("popover");if(!t)return;const{align:s="start",side:A="left"}=e?.popover||{},l=s,d=r.id==="driver-dummy-element"?"over":A,u=Ie("stagePadding")||0,f=jS(),g=t.arrow.getBoundingClientRect(),x=r.getBoundingClientRect(),y=x.top-f.height;let v=y>=0;const S=window.innerHeight-(x.bottom+f.height);let R=S>=0;const j=x.left-f.width;let V=j>=0;const P=window.innerWidth-(x.right+f.width);let G=P>=0;const q=!v&&!R&&!V&&!G;let W=d;if(d==="top"&&v?G=V=R=!1:d==="bottom"&&R?G=V=v=!1:d==="left"&&V?G=v=R=!1:d==="right"&&G&&(V=v=R=!1),d==="over"){const te=window.innerWidth/2-f.realWidth/2,z=window.innerHeight/2-f.realHeight/2;t.wrapper.style.left=`${te}px`,t.wrapper.style.right="auto",t.wrapper.style.top=`${z}px`,t.wrapper.style.bottom="auto"}else if(q){const te=window.innerWidth/2-f?.realWidth/2,z=10;t.wrapper.style.left=`${te}px`,t.wrapper.style.right="auto",t.wrapper.style.bottom=`${z}px`,t.wrapper.style.top="auto"}else if(V){const te=Math.min(j,window.innerWidth-f?.realWidth-g.width),z=S1(l,{elementDimensions:x,popoverDimensions:f,popoverPadding:u,popoverArrowDimensions:g});t.wrapper.style.left=`${te}px`,t.wrapper.style.top=`${z}px`,t.wrapper.style.bottom="auto",t.wrapper.style.right="auto",W="left"}else if(G){const te=Math.min(P,window.innerWidth-f?.realWidth-g.width),z=S1(l,{elementDimensions:x,popoverDimensions:f,popoverPadding:u,popoverArrowDimensions:g});t.wrapper.style.right=`${te}px`,t.wrapper.style.top=`${z}px`,t.wrapper.style.bottom="auto",t.wrapper.style.left="auto",W="right"}else if(v){const te=Math.min(y,window.innerHeight-f.realHeight-g.width);let z=j1(l,{elementDimensions:x,popoverDimensions:f,popoverPadding:u,popoverArrowDimensions:g});t.wrapper.style.top=`${te}px`,t.wrapper.style.left=`${z}px`,t.wrapper.style.bottom="auto",t.wrapper.style.right="auto",W="top"}else if(R){const te=Math.min(S,window.innerHeight-f?.realHeight-g.width);let z=j1(l,{elementDimensions:x,popoverDimensions:f,popoverPadding:u,popoverArrowDimensions:g});t.wrapper.style.left=`${z}px`,t.wrapper.style.bottom=`${te}px`,t.wrapper.style.top="auto",t.wrapper.style.right="auto",W="bottom"}q?t.arrow.classList.add("driver-popover-arrow-none"):Z6(l,W,r)}function Z6(r,e,t){const s=Me("popover");if(!s)return;const A=t.getBoundingClientRect(),l=jS(),d=s.arrow,u=l.width,f=window.innerWidth,g=A.width,x=A.left,y=l.height,v=window.innerHeight,S=A.top,R=A.height;d.className="driver-popover-arrow";let j=e,V=r;if(e==="top"?(x+g<=0?(j="right",V="end"):x+g-u<=0&&(j="top",V="start"),x>=f?(j="left",V="end"):x+u>=f&&(j="top",V="end")):e==="bottom"?(x+g<=0?(j="right",V="start"):x+g-u<=0&&(j="bottom",V="start"),x>=f?(j="left",V="start"):x+u>=f&&(j="bottom",V="end")):e==="left"?(S+R<=0?(j="bottom",V="end"):S+R-y<=0&&(j="left",V="start"),S>=v?(j="top",V="end"):S+y>=v&&(j="left",V="end")):e==="right"&&(S+R<=0?(j="bottom",V="start"):S+R-y<=0&&(j="right",V="start"),S>=v?(j="top",V="start"):S+y>=v&&(j="right",V="end")),!j)d.classList.add("driver-popover-arrow-none");else{d.classList.add(`driver-popover-arrow-side-${j}`),d.classList.add(`driver-popover-arrow-align-${V}`);const P=t.getBoundingClientRect(),G=d.getBoundingClientRect(),q=Ie("stagePadding")||0,W=P.left-q<window.innerWidth&&P.right+q>0&&P.top-q<window.innerHeight&&P.bottom+q>0;e==="bottom"&&W&&(G.x>P.x&&G.x+G.width<P.x+P.width?s.wrapper.style.transform="translateY(0)":(d.classList.remove(`driver-popover-arrow-align-${V}`),d.classList.add("driver-popover-arrow-none"),s.wrapper.style.transform=`translateY(-${q/2}px)`))}}function eP(){const r=document.createElement("div");r.classList.add("driver-popover");const e=document.createElement("div");e.classList.add("driver-popover-arrow");const t=document.createElement("header");t.id="driver-popover-title",t.classList.add("driver-popover-title"),t.style.display="none",t.innerText="Popover Title";const s=document.createElement("div");s.id="driver-popover-description",s.classList.add("driver-popover-description"),s.style.display="none",s.innerText="Popover description is here";const A=document.createElement("button");A.type="button",A.classList.add("driver-popover-close-btn"),A.setAttribute("aria-label","Close"),A.innerHTML="&times;";const l=document.createElement("footer");l.classList.add("driver-popover-footer");const d=document.createElement("span");d.classList.add("driver-popover-progress-text"),d.innerText="";const u=document.createElement("span");u.classList.add("driver-popover-navigation-btns");const f=document.createElement("button");f.type="button",f.classList.add("driver-popover-prev-btn"),f.innerHTML="&larr; Previous";const g=document.createElement("button");return g.type="button",g.classList.add("driver-popover-next-btn"),g.innerHTML="Next &rarr;",u.appendChild(f),u.appendChild(g),l.appendChild(d),l.appendChild(u),r.appendChild(A),r.appendChild(e),r.appendChild(t),r.appendChild(s),r.appendChild(l),{wrapper:r,arrow:e,title:t,description:s,footer:l,previousButton:f,nextButton:g,closeButton:A,footerButtons:u,progress:d}}function tP(){var r;const e=Me("popover");e&&((r=e.wrapper.parentElement)==null||r.removeChild(e.wrapper))}function rP(r={}){Kp(r);function e(){Ie("allowClose")&&x()}function t(){const v=Ie("overlayClickBehavior");if(Ie("allowClose")&&v==="close"){x();return}if(typeof v=="function"){const S=Me("__activeStep"),R=Me("__activeElement");v(R,S,{config:Ie(),state:Me(),driver:qs()});return}v==="nextStep"&&s()}function s(){const v=Me("activeIndex"),S=Ie("steps")||[];if(typeof v>"u")return;const R=v+1;S[R]?g(R):x()}function A(){const v=Me("activeIndex"),S=Ie("steps")||[];if(typeof v>"u")return;const R=v-1;S[R]?g(R):x()}function l(v){(Ie("steps")||[])[v]?g(v):x()}function d(){var v;if(Me("__transitionCallback"))return;const S=Me("activeIndex"),R=Me("__activeStep"),j=Me("__activeElement");if(typeof S>"u"||typeof R>"u"||typeof Me("activeIndex")>"u")return;const V=((v=R.popover)==null?void 0:v.onPrevClick)||Ie("onPrevClick");if(V)return V(j,R,{config:Ie(),state:Me(),driver:qs()});A()}function u(){var v;if(Me("__transitionCallback"))return;const S=Me("activeIndex"),R=Me("__activeStep"),j=Me("__activeElement");if(typeof S>"u"||typeof R>"u")return;const V=((v=R.popover)==null?void 0:v.onNextClick)||Ie("onNextClick");if(V)return V(j,R,{config:Ie(),state:Me(),driver:qs()});s()}function f(){Me("isInitialized")||(qr("isInitialized",!0),document.body.classList.add("driver-active",Ie("animate")?"driver-fade":"driver-simple"),X6(),Bh("overlayClick",t),Bh("escapePress",e),Bh("arrowLeftPress",d),Bh("arrowRightPress",u))}function g(v=0){var S,R,j,V,P,G,q,W;const te=Ie("steps");if(!te){console.error("No steps to drive through"),x();return}if(!te[v]){x();return}qr("__activeOnDestroyed",document.activeElement),qr("activeIndex",v);const z=te[v],E=te[v+1],N=te[v-1],C=((S=z.popover)==null?void 0:S.doneBtnText)||Ie("doneBtnText")||"Done",D=Ie("allowClose"),Q=typeof((R=z.popover)==null?void 0:R.showProgress)<"u"?(j=z.popover)==null?void 0:j.showProgress:Ie("showProgress"),T=(((V=z.popover)==null?void 0:V.progressText)||Ie("progressText")||"{{current}} of {{total}}").replace("{{current}}",`${v+1}`).replace("{{total}}",`${te.length}`),_=((P=z.popover)==null?void 0:P.showButtons)||Ie("showButtons"),U=["next","previous",...D?["close"]:[]].filter(K=>!(_!=null&&_.length)||_.includes(K)),Y=((G=z.popover)==null?void 0:G.onNextClick)||Ie("onNextClick"),M=((q=z.popover)==null?void 0:q.onPrevClick)||Ie("onPrevClick"),F=((W=z.popover)==null?void 0:W.onCloseClick)||Ie("onCloseClick");E1({...z,popover:{showButtons:U,nextBtnText:E?void 0:C,disableButtons:[...N?[]:["previous"]],showProgress:Q,progressText:T,onNextClick:Y||(()=>{E?g(v+1):x()}),onPrevClick:M||(()=>{g(v-1)}),onCloseClick:F||(()=>{x()}),...z?.popover||{}}})}function x(v=!0){const S=Me("__activeElement"),R=Me("__activeStep"),j=Me("__activeOnDestroyed"),V=Ie("onDestroyStarted");if(v&&V){const q=!S||S?.id==="driver-dummy-element";V(q?void 0:S,R,{config:Ie(),state:Me(),driver:qs()});return}const P=R?.onDeselected||Ie("onDeselected"),G=Ie("onDestroyed");if(document.body.classList.remove("driver-active","driver-fade","driver-simple"),J6(),tP(),Y6(),z6(),k6(),C1(),S&&R){const q=S.id==="driver-dummy-element";P&&P(q?void 0:S,R,{config:Ie(),state:Me(),driver:qs()}),G&&G(q?void 0:S,R,{config:Ie(),state:Me(),driver:qs()})}j&&j.focus()}const y={isActive:()=>Me("isInitialized")||!1,refresh:Ad,drive:(v=0)=>{f(),g(v)},setConfig:Kp,setSteps:v=>{C1(),Kp({...Ie(),steps:v})},getConfig:Ie,getState:Me,getActiveIndex:()=>Me("activeIndex"),isFirstStep:()=>Me("activeIndex")===0,isLastStep:()=>{const v=Ie("steps")||[],S=Me("activeIndex");return S!==void 0&&S===v.length-1},getActiveStep:()=>Me("activeStep"),getActiveElement:()=>Me("activeElement"),getPreviousElement:()=>Me("previousElement"),getPreviousStep:()=>Me("previousStep"),moveNext:s,movePrevious:A,moveTo:l,hasNextStep:()=>{const v=Ie("steps")||[],S=Me("activeIndex");return S!==void 0&&!!v[S+1]},hasPreviousStep:()=>{const v=Ie("steps")||[],S=Me("activeIndex");return S!==void 0&&!!v[S-1]},highlight:v=>{f(),E1({...v,popover:v.popover?{showButtons:[],showProgress:!1,progressText:"",...v.popover}:void 0})},destroy:()=>{x(!1)}};return D6(y),y}const sP=({onOpenAddCourse:r,onCloseAddCourse:e,onOpenSchedule:t,onCloseSchedule:s,onSwitchToPlanner:A,onSwitchToTracker:l,onTutorialStart:d,onTutorialEnd:u})=>{const{t:f}=it();return k.useEffect(()=>{const x=document.createElement("style");return x.innerHTML=`
            /* Keyframes for Pop-In Animation */
            @keyframes driverPopIn {
                0% { opacity: 0; transform: scale(0.95) translateY(10px); }
                100% { opacity: 1; transform: scale(1) translateY(0); }
            }

            /* Keyframes for Active Element Beacon */
            @keyframes driverBeaconPulse {
                0% { box-shadow: 0 0 0 0 rgba(6, 182, 212, 0.7); border-color: rgba(6, 182, 212, 1); }
                70% { box-shadow: 0 0 0 10px rgba(6, 182, 212, 0); border-color: rgba(6, 182, 212, 0.5); }
                100% { box-shadow: 0 0 0 0 rgba(6, 182, 212, 0); border-color: rgba(6, 182, 212, 0.2); }
            }

            /* Premium Glassmorphism Popover Theme */
            .driver-popover.driverjs-theme {
                background: rgba(23, 23, 23, 0.85); /* Slightly translucent dark */
                backdrop-filter: blur(16px);
                -webkit-backdrop-filter: blur(16px);
                color: var(--color-text);
                border: 1px solid rgba(255, 255, 255, 0.1);
                box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.6), 0 0 0 1px rgba(255,255,255,0.05) inset;
                border-radius: 16px;
                padding: 24px;
                animation: driverPopIn 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
                z-index: 2147483647 !important; /* Ensure it stays above everything */
            }
            .driver-popover.driverjs-theme .driver-popover-title {
                color: var(--color-text);
                font-size: 1.25rem;
                font-weight: 800;
                margin-bottom: 12px;
                background: linear-gradient(to right, #38bdf8, #818cf8);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                letter-spacing: -0.02em;
            }
            .driver-popover.driverjs-theme .driver-popover-description {
                color: rgba(255, 255, 255, 0.8);
                font-size: 0.95rem;
                line-height: 1.6;
            }
            
            /* Buttons */
            .driver-popover.driverjs-theme button {
                flex: 1;
                text-align: center;
                border-radius: 9999px; /* Pill shape */
                font-weight: 700;
                padding: 10px 16px;
                font-size: 0.85rem;
                transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
            }
            
            /* Next/Done Button */
            .driver-popover.driverjs-theme .driver-popover-next-btn,
            .driver-popover.driverjs-theme .driver-popover-prev-btn {
                text-shadow: none;
            }
            .driver-popover.driverjs-theme .driver-popover-next-btn {
                background: linear-gradient(135deg, #0ea5e9, #6366f1);
                color: white;
                border: none;
                box-shadow: 0 4px 14px 0 rgba(14, 165, 233, 0.39);
            }
            .driver-popover.driverjs-theme .driver-popover-next-btn:hover {
                transform: translateY(-1px);
                box-shadow: 0 6px 20px rgba(14, 165, 233, 0.5);
                background: linear-gradient(135deg, #0284c7, #4f46e5);
            }

            /* Previous Button */
            .driver-popover.driverjs-theme .driver-popover-prev-btn {
                 background-color: rgba(255, 255, 255, 0.1);
                 border: 1px solid rgba(255, 255, 255, 0.05);
                 color: rgba(255, 255, 255, 0.8);
            }
            .driver-popover.driverjs-theme .driver-popover-prev-btn:hover {
                 background-color: rgba(255, 255, 255, 0.15);
                 color: white;
            }

            /* Skip Button - Styled as "Close" */
            .driver-popover.driverjs-theme .driver-popover-close-btn {
                text-decoration: none;
                color: rgba(255, 255, 255, 0.5);
                background: rgba(255, 255, 255, 0.05);
                border: 1px solid rgba(255, 255, 255, 0.05);
                padding: 4px 8px;
                font-size: 0.75rem;
                font-weight: 600;
                border-radius: 6px;
                position: absolute;
                top: 16px;
                right: 16px;
                display: block !important;
                flex: none;
                width: auto;
                transition: all 0.2s;
            }
            .driver-popover.driverjs-theme .driver-popover-close-btn:hover {
                color: white;
                background: rgba(239, 68, 68, 0.2); /* Soft red hover */
                border-color: rgba(239, 68, 68, 0.5);
                transform: scale(1.05);
            }

            /* Navigation Footer Layout */
            .driver-popover.driverjs-theme .driver-popover-footer {
                margin-top: 20px;
                display: flex;
                gap: 12px;
                justify-content: space-between;
                align-items: center;
            }
            
            /* Premium Active Element Highlighter (Beacon Pulse) */
            .driver-active-element {
                border: 2px solid rgba(6, 182, 212, 1) !important;
                border-radius: 8px !important; /* Slightly round the actual element */
                animation: driverBeaconPulse 2s infinite cubic-bezier(0.66, 0, 0, 1) !important;
                z-index: 2147483646 !important; /* One level below the popover */
                position: relative !important;
            }
            
            /* Driver overlay base adjustments */
            #driver-page-overlay {
                backdrop-filter: blur(2px); /* Slight background blur behind cutout */
                -webkit-backdrop-filter: blur(2px);
                background-color: rgba(0, 0, 0, 0.6) !important; /* Darker overlay */
            }

            /* Disable interactions with the app while tutorial is running */
            body.tutorial-running #root {
                pointer-events: none !important;
                user-select: none !important;
            }
            
            /* Explicitly disable interaction on the highlighted element itself */
            .driver-active-element,
            .driver-active-element * {
                pointer-events: none !important; 
            }

            /* Ensure the driver popover remains interactive */
            .driver-popover.driverjs-theme {
                pointer-events: auto !important;
            }
        `,document.head.appendChild(x),()=>{document.head.removeChild(x)}},[]),{startTutorial:()=>{const x=(v,S)=>{const R=()=>{document.querySelector(v)?S():requestAnimationFrame(R)};R()},y=rP({showProgress:!0,animate:!0,popoverClass:"driverjs-theme",stagePadding:8,stageRadius:10,popoverOffset:16,nextBtnText:f.tutorial.next,prevBtnText:f.tutorial.prev,doneBtnText:f.tutorial.done,showButtons:["next","previous","close"],onHighlightStarted:()=>{document.body.classList.add("tutorial-running"),d&&d()},onDestroyed:()=>{document.body.classList.remove("tutorial-running"),e(),s(),u&&u()},onNextClick:(v,S,R)=>{const j=S.element;j==="#header-add-course"?(r(),x("#btn-import-catalog",()=>{y.moveNext()})):j==="#btn-import-catalog"?(e(),setTimeout(()=>{y.moveNext()},100)):j==="#schedule-grade-btn"?(t(),x("#schedule-visual-grid",()=>{y.moveNext()})):j==="#schedule-list"?(s(),setTimeout(()=>{y.moveNext()},100)):j==="#header-settings"?(A(),x("#planner-draft-board",()=>{y.moveNext()})):j==="#planner-search-panel"?(l(),x("#header-add-course",()=>{y.moveNext()})):y.moveNext()},onPrevClick:(v,S,R)=>{const j=S.element;j==="#btn-import-catalog"?(e(),setTimeout(()=>{y.movePrevious()},100)):j==="#semester-view-section"?(r(),x("#btn-import-catalog",()=>{y.movePrevious()})):j==="#schedule-visual-grid"?(s(),setTimeout(()=>{y.movePrevious()},100)):j==="#dashboard-section"?(t(),x("#schedule-list",()=>{y.movePrevious()})):j==="#planner-draft-board"?(l(),setTimeout(()=>{y.movePrevious()},100)):j==="#header-add-course"?(A(),x("#planner-search-panel",()=>{y.movePrevious()})):y.movePrevious()},steps:[{element:"#header-title",popover:{title:f.tutorial.welcome.title,description:f.tutorial.welcome.desc}},{element:"#mode-switcher",popover:{title:f.tutorial.modeSwitcher.title,description:f.tutorial.modeSwitcher.desc}},{element:"#header-settings",popover:{title:f.tutorial.settings.title,description:f.tutorial.settings.desc}},{element:"#planner-draft-board",popover:{title:f.tutorial.plannerBoard.title,description:f.tutorial.plannerBoard.desc}},{element:"#planner-search-panel",popover:{title:f.tutorial.plannerSearch.title,description:f.tutorial.plannerSearch.desc}},{element:"#header-add-course",popover:{title:f.tutorial.addCourse.title,description:f.tutorial.addCourse.desc}},{element:"#btn-import-catalog",popover:{title:f.tutorial.catalogFeature.title,description:f.tutorial.catalogFeature.desc}},{element:"#semester-view-section",popover:{title:f.tutorial.coursePlan.title,description:f.tutorial.coursePlan.desc}},{element:"#schedule-grade-btn",popover:{title:f.tutorial.scheduleGrade.title,description:f.tutorial.scheduleGrade.desc}},{element:"#schedule-visual-grid",popover:{title:f.tutorial.scheduleGrid.title,description:f.tutorial.scheduleGrid.desc}},{element:"#schedule-list",popover:{title:f.tutorial.scheduleList.title,description:f.tutorial.scheduleList.desc}},{element:"#dashboard-section",popover:{title:f.tutorial.dashboard.title,description:f.tutorial.dashboard.desc}},{element:"#header-data-controls",popover:{title:f.tutorial.dataSafety.title,description:f.tutorial.dataSafety.desc}},{element:"#header-history",popover:{title:f.tutorial.history.title,description:f.tutorial.history.desc}},{element:"#header-support",popover:{title:f.tutorial.support.title,description:f.tutorial.support.desc}}]});y.drive()}}},nP=(r,e)=>{let t=e.filter(d=>d.name===r.name);if(t.length===0){const d=r.name.toLowerCase(),u=e.filter(f=>{const g=f.name.toLowerCase();return g.includes(d)||d.includes(g)});u.length>0&&(t=u)}if(t.length===0)return{match:null,candidates:[],ambiguity:!1};if(t.length===1)return{match:t[0],candidates:t,ambiguity:!1};const s=t.filter(d=>!!d.english==!!r.isEMI);if(s.length>0&&s.length<t.length&&(t=s),t.length===1)return{match:t[0],candidates:t,ambiguity:!1};const l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].indexOf(r.day||"");if(l!==-1&&r.startTime){const d=l===0?6:l-1,u=t.filter(f=>{if(!Array.isArray(f.classTime))return!1;const g=f.classTime[d];return!(!g||g.length===0)});u.length>0&&(t=u)}return t.length===1?{match:t[0],candidates:t,ambiguity:!1}:{match:null,candidates:t,ambiguity:!0}},_1="nsysu-course-pool",aP=r=>{const[e,t]=k.useState(()=>{const s=localStorage.getItem(_1);return s?JSON.parse(s):[]});return k.useEffect(()=>{t(r),localStorage.setItem(_1,JSON.stringify(r))},[r]),{pool:e}};function iP(){const{language:r,setLanguage:e,t}=it(),{user:s,loading:A,login:l,logout:d}=Bd(),{clearAllLabels:u,allUserLabels:f,courseUserLabels:g,importLabels:x}=yd(),[y,v]=k.useState(()=>{const pe=localStorage.getItem("nsysu-courses");return pe?JSON.parse(pe):[]}),{syncState:S,needsConsent:R,conflictTimes:j,acceptConsent:V,declineConsent:P,deleteCloudData:G,resolveConflict:q}=T6(y,v),[W,te]=k.useState(()=>localStorage.getItem("nsysu-view-mode")||"tracker");k.useEffect(()=>{localStorage.getItem("nsysu-debug-boundaries")==="true"&&document.body.classList.add("debug-outlines")},[]);const[z,E]=k.useState(!1),[N,C]=k.useState(null),[D,Q]=k.useState(!1),[T,_]=k.useState(()=>localStorage.getItem("nsysu-last-announcement-ver")!==xf),[U,Y]=k.useState(!1),[M,F]=k.useState(0),[K,ne]=k.useState(0),ee=k.useRef(null),[O,X]=k.useState(null);k.useEffect(()=>{localStorage.setItem("nsysu-view-mode",W)},[W]);const[Ae,me]=k.useState(!1),{startTutorial:Ee}=sP({onOpenAddCourse:()=>{xr(void 0),As(!0)},onCloseAddCourse:()=>As(!1),onOpenSchedule:()=>{te("tracker");const pe=Ut.length>0?Ut[0]:"113-1";X(pe)},onCloseSchedule:()=>X(null),onSwitchToPlanner:()=>te("planner"),onSwitchToTracker:()=>te("tracker"),onTutorialStart:()=>me(!0),onTutorialEnd:()=>me(!1)});aP(y);const[Be,ke]=k.useState(()=>{const pe=JSON.parse(localStorage.getItem("nsysu-emi-student")||"false"),ze=localStorage.getItem("nsysu-student-class");return ze||(pe?"":"-")}),[Pe,Ve]=k.useState(()=>localStorage.getItem("nsysu-major")||""),[wt,Xt]=k.useState(()=>Number(localStorage.getItem("nsysu-entrance-year"))||113),[ue,L]=k.useState(()=>JSON.parse(localStorage.getItem("nsysu-grad-credits")||"128")),[J,he]=k.useState(()=>localStorage.getItem("nsysu-theme")||"dark"),{courses:ge,fetchCourses:Ke,semesters:ot}=da(),[Xe,Le]=k.useState([]),[Se,Pt]=k.useState(null),[Nr,sr]=k.useState([]),[ve,jt]=k.useState(null);k.useEffect(()=>{if(y.length>0){const pe=JSON.parse(localStorage.getItem("nsysu-skipped-fixes-v2")||"[]"),ze=new Set;y.forEach(Ce=>{const lt=Ce.category==="General Education"&&Ce.genEduSubCategory==="Primer",Et=Ce.category==="General Education"&&Ce.genEduSubCategory==="Service",Wt=!Ce.originalId||!Ce.originalSemester||!Ce.department,kr=Ce.name.includes(`
`),$e=/[\u4e00-\u9fa5]/.test(Ce.name),ur=!kr&&!$e,ar=(Ce.fixAttempts||0)>=2;Wt&&!Ce.isExemption&&!lt&&!Et&&!ur&&!ar&&(pe.includes(Ce.semester)||ze.add(Ce.semester))})}},[y]),k.useEffect(()=>{if(T||Ae||!Se||ge.length===0)return;if(!(Xe.length>0&&!Se)){if(Se&&!(ge.filter(ar=>ar.semester===Se).length>0))return}if(Nr.length>0)return;const pe=Xe[0];if(!pe)return;let ze=0,Ce=[],lt=[],Et=[...y],Wt=!1;if(Et=Et.map($e=>{const ur=$e.category==="General Education"&&$e.genEduSubCategory==="Primer",ar=$e.category==="General Education"&&$e.genEduSubCategory==="Service",Ht=$e.userLabels?.includes("manual");if($e.isExemption||ur||ar||Ht)return $e;if($e.semester===pe&&(!$e.originalId||!$e.originalSemester||!$e.department)){const ps=ge.filter(kn=>kn.semester===Se),{match:Rr,candidates:xs,ambiguity:ys}=nP($e,ps);if(Rr){ze++,Wt=!0;let kn={};if(Array.isArray(Rr.classTime)){const Rn=$x(Rr.classTime);Rn&&(kn={day:Rn.day,startTime:Rn.startTime,endTime:Rn.endTime})}return{...$e,room:Rr.room||$e.room,teacher:Rr.teacher||$e.teacher,originalTags:Rr.tags||$e.originalTags,originalSemester:Rr.semester||$e.originalSemester,originalId:Rr.id||$e.originalId,department:Rr.department||$e.department,...kn}}if(ys)Ce.push({userCourse:$e,candidates:xs});else return lt.push($e.name),Wt=!0,{...$e,fixAttempts:($e.fixAttempts||0)+1};Wt=!0}return $e}),Wt&&v(Et),Ce.length>0){sr(Ce);return}Ce.length===0&&(lt.length>0||ze>0?jt({patched:ze,unmatched:lt}):ze===0&&lt.length===0&&jt({patched:0,unmatched:[]}));const kr=JSON.parse(localStorage.getItem("nsysu-skipped-fixes-v2")||"[]");kr.includes(pe)||localStorage.setItem("nsysu-skipped-fixes-v2",JSON.stringify([...kr,pe])),Pt(null),Le($e=>$e.slice(1))},[ge,Se,Nr.length,T,Ae]);const lr=pe=>{const ze=Nr[0];ze&&(v(Ce=>Ce.map(lt=>{if(lt.id===ze.userCourse.id){let Et={};if(Array.isArray(pe.classTime)){const Wt=$x(pe.classTime);Wt&&(Et={day:Wt.day,startTime:Wt.startTime,endTime:Wt.endTime})}return{...lt,room:pe.room||lt.room,teacher:pe.teacher||lt.teacher,department:pe.department||lt.department,originalId:pe.id,originalSemester:pe.semester,originalTags:pe.tags,...Et}}return lt})),sr(Ce=>Ce.slice(1)))},[Ut,gr]=k.useState(()=>{const pe=localStorage.getItem("nsysu-semesters");return pe?JSON.parse(pe):[...Ec]}),[Cs,As]=k.useState(!1),[nr,Jt]=k.useState(!1),[cr,Vr]=k.useState(!1),[Vt,le]=k.useState(!1),[De,At]=k.useState(!1);k.useEffect(()=>{localStorage.setItem("nsysu-semesters",JSON.stringify(Ut))},[Ut]),k.useEffect(()=>(document.body.style.overflow=nr?"hidden":"auto",()=>{document.body.style.overflow="auto"}),[nr]);const tt=(pe,ze)=>{const Ce=ze==="Summer"?`Year ${pe} Summer`:`Year ${pe} ${ze}`;gr(lt=>[...lt,Ce].sort((Wt,kr)=>{const $e=ur=>{const ar=ur.split(" "),Ht=parseInt(ar[1]);let ps=0;return ar[2]==="Sem"?ps=parseInt(ar[3]):ar[2]==="Summer"&&(ps=3),Ht*10+ps};return $e(Wt)-$e(kr)}))},[nt,Qe]=k.useState(!1);k.useEffect(()=>{if(T||Ae)return;if(!localStorage.getItem("nsysu-setup-reminder-seen")&&(Pe===""||wt===113||ue===128)){const Ce=setTimeout(()=>Qe(!0),1e3);return()=>clearTimeout(Ce)}},[T,Ae,Xe.length,Nr.length,ve,Pe,wt,ue]);const Kt=(pe=!1)=>{localStorage.setItem("nsysu-setup-reminder-seen","true"),Qe(!1),pe&&Jt(!0)},[pr,xr]=k.useState(void 0);k.useEffect(()=>{localStorage.setItem("nsysu-courses",JSON.stringify(y))},[y]),k.useEffect(()=>{localStorage.setItem("nsysu-student-class",Be),localStorage.setItem("nsysu-grad-credits",JSON.stringify(ue)),localStorage.setItem("nsysu-major",Pe),localStorage.setItem("nsysu-entrance-year",wt.toString())},[Be,ue,Pe,wt]),k.useEffect(()=>{const pe=document.documentElement;pe.setAttribute("data-theme",J),J==="dark"?pe.classList.add("dark"):pe.classList.remove("dark"),localStorage.setItem("nsysu-theme",J),localStorage.setItem("nsysu-theme",J)},[J]);const[In,mn]=k.useState(!1),[Ys,Dn]=k.useState(!1),[yl,ua]=k.useState(null);k.useEffect(()=>{const pe=()=>mn(!0);return window.addEventListener("admin-login-request",pe),()=>window.removeEventListener("admin-login-request",pe)},[]),k.useEffect(()=>{if(ot.length>0){const pe=ot[0];Ke(pe)}},[ot,Ke]);const Va=pe=>{v(ze=>ze.some(lt=>lt.id===pe.id)?ze.map(lt=>lt.id===pe.id?pe:lt):[...ze,pe]),xr(void 0)},$i=pe=>{v(y.filter(ze=>ze.id!==pe))},ha=pe=>{v(ze=>{const Ce=new Set(pe.map(Et=>Et.id));return[...ze.filter(Et=>!Ce.has(Et.id)),...pe]})},gn=pe=>{xr(pe),As(!0)},za=async()=>{const pe={};try{const ze=await b1();for(const Ce of ze){const lt=await _O(Ce.file);pe[Ce.id]={name:Ce.name,type:Ce.type,lastModified:Ce.lastModified,data:lt}}}catch(ze){console.error("Error gathering assets for export:",ze)}try{const ze=JSON.parse(localStorage.getItem("nsysu-micro-credits-data")||"null"),Ce=JSON.parse(localStorage.getItem("nsysu-interdisciplinary-teacher-education-data")||"null"),lt=JSON.parse(localStorage.getItem("nsysu-interdisciplinary-double-major-data")||"null"),Et=JSON.parse(localStorage.getItem("nsysu-interdisciplinary-cross-disciplinary-data")||"null"),Wt=JSON.parse(localStorage.getItem("nsysu-diverse-learning-data")||"null"),kr=JSON.parse(localStorage.getItem("nsysu-interdisciplinary-course-9-data")||"null"),$e={};for(let Rr=1;Rr<=10;Rr++){const xs=`nsysu-interdisciplinary-item-${Rr}-notes`,ys=localStorage.getItem(xs);ys&&($e[xs]=ys)}const ur={version:1,lastUpdated:new Date().toISOString(),settings:{studentClass:Be,graduationCredits:ue,major:Pe,entranceYear:wt},labels:{library:f,map:g},courses:y,plannerDraft:JSON.parse(localStorage.getItem("nsysu-planner-draft")||"[]"),interdisciplinaryStatus:JSON.parse(localStorage.getItem("nsysu-interdisciplinary-status")||"{}"),minorData:JSON.parse(localStorage.getItem("nsysu-interdisciplinary-minor-data")||"null"),microCreditsData:ze,teacherEducationData:Ce,doubleMajorData:lt,crossDisciplinaryData:Et,diverseLearningData:Wt,interdisciplinaryCourseData:kr,interdisciplinaryNotes:$e,assets:pe},ar=new Blob([JSON.stringify(ur,null,2)],{type:"application/json"}),Ht=URL.createObjectURL(ar),ps=document.createElement("a");ps.href=Ht,ps.download=`ClearGrad._Data_${new Date().toISOString().split("T")[0]}.json`,ps.click(),URL.revokeObjectURL(Ht)}catch(ze){console.error("Export failed:",ze),alert("Export failed! Please try again.")}},gs=async pe=>{try{const ze=await pe.text(),Ce=JSON.parse(ze);Ce.courses&&Array.isArray(Ce.courses)?(v(Ce.courses),localStorage.setItem("nsysu-courses",JSON.stringify(Ce.courses)),Ce.settings&&(Ce.settings.studentClass&&(ke(Ce.settings.studentClass),localStorage.setItem("nsysu-student-class",Ce.settings.studentClass)),Ce.settings.graduationCredits&&(L(Ce.settings.graduationCredits),localStorage.setItem("nsysu-grad-credits",JSON.stringify(Ce.settings.graduationCredits))),Ce.settings.major&&(Ve(Ce.settings.major),localStorage.setItem("nsysu-major",Ce.settings.major)),Ce.settings.entranceYear&&(Xt(Ce.settings.entranceYear),localStorage.setItem("nsysu-entrance-year",String(Ce.settings.entranceYear)))),Ce.labels&&Ce.labels.library&&Ce.labels.map&&x(Ce.labels.library,Ce.labels.map),Ce.plannerDraft&&localStorage.setItem("nsysu-planner-draft",JSON.stringify(Ce.plannerDraft)),Ce.interdisciplinaryStatus&&localStorage.setItem("nsysu-interdisciplinary-status",JSON.stringify(Ce.interdisciplinaryStatus)),Ce.minorData&&localStorage.setItem("nsysu-interdisciplinary-minor-data",JSON.stringify(Ce.minorData)),Ce.microCreditsData&&localStorage.setItem("nsysu-micro-credits-data",JSON.stringify(Ce.microCreditsData)),Ce.teacherEducationData&&localStorage.setItem("nsysu-interdisciplinary-teacher-education-data",JSON.stringify(Ce.teacherEducationData)),Ce.doubleMajorData&&localStorage.setItem("nsysu-interdisciplinary-double-major-data",JSON.stringify(Ce.doubleMajorData)),Ce.crossDisciplinaryData&&localStorage.setItem("nsysu-interdisciplinary-cross-disciplinary-data",JSON.stringify(Ce.crossDisciplinaryData)),Ce.diverseLearningData&&localStorage.setItem("nsysu-diverse-learning-data",JSON.stringify(Ce.diverseLearningData)),Ce.interdisciplinaryCourseData&&localStorage.setItem("nsysu-interdisciplinary-course-9-data",JSON.stringify(Ce.interdisciplinaryCourseData)),Ce.interdisciplinaryNotes&&Object.entries(Ce.interdisciplinaryNotes).forEach(([lt,Et])=>{localStorage.setItem(lt,Et)}),Ce.assets&&Array.isArray(Ce.assets)&&(console.log(`Restoring ${Ce.assets.length} assets...`),await UO(Ce.assets)),alert("Import successful!"),window.location.reload()):alert("Invalid file format")}catch(ze){console.error("Import failed:",ze),alert("Import failed! Invalid JSON file.")}ee.current&&(ee.current.value="")},ks=pe=>{const ze=pe.target.files?.[0];ze&&(y.length>0?(C(ze),E(!0),ee.current&&(ee.current.value="")):gs(ze))},dr=async()=>{try{const pe=await b1();F(pe.length)}catch{F(0)}Y(!0)},yr=async()=>{v([]),localStorage.removeItem("nsysu-planner-draft"),localStorage.removeItem("nsysu-interdisciplinary-status"),localStorage.removeItem("nsysu-interdisciplinary-minor-data"),localStorage.removeItem("nsysu-interdisciplinary-double-major-data"),localStorage.removeItem("nsysu-interdisciplinary-teacher-education-data"),localStorage.removeItem("nsysu-micro-credits-data"),localStorage.removeItem("nsysu-interdisciplinary-cross-disciplinary-data"),localStorage.removeItem("nsysu-diverse-learning-data"),localStorage.removeItem("nsysu-interdisciplinary-course-9-data");for(let pe=1;pe<=10;pe++)localStorage.removeItem(`nsysu-interdisciplinary-item-${pe}-notes`);await jO(),u(),ne(pe=>pe+1),Y(!1),window.location.reload()},Es=k.useMemo(()=>({major:Pe,entranceYear:wt,studentClass:Be}),[Pe,wt,Be]);return a.jsxs("div",{className:"min-h-screen font-sans selection:bg-primary/30 transition-colors duration-500 bg-background text-foreground",children:[a.jsx("header",{className:"sticky top-0 z-40 transition-colors duration-300 bg-surface/50 border-b border-border backdrop-blur-md",children:a.jsxs("div",{className:"w-full px-4 py-2 flex flex-wrap justify-between items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3",id:"header-title",children:[a.jsx("img",{src:J==="dark"?"./Dark_mode_full.png":"./Light_mode_full.png",alt:"ClearGrad",className:"h-8 w-auto object-contain"}),a.jsx("div",{id:"mode-switcher",className:"hidden md:flex bg-background/50 p-1 rounded-lg border border-gray-300 dark:border-border/50 ml-2",children:W==="interdisciplinary"?a.jsxs("button",{onClick:()=>te("tracker"),className:"px-3 py-1.5 rounded-md text-sm font-medium transition-all duration-200 flex items-center gap-1.5 text-white bg-[#8D9CB2] hover:bg-[#8299BB] dark:text-gray-900 dark:bg-[#A8C8FA] dark:hover:bg-[#8299BB] shadow-sm",children:[a.jsx(J2,{size:16}),a.jsx("span",{children:t.app.backToTracker})]}):a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>te("tracker"),className:`flex items-center gap-2 px-3 py-1.5 rounded-md text-sm font-medium transition-all ${W==="tracker"?"bg-primary text-white dark:text-gray-700 shadow-sm":"text-muted hover:text-foreground"}`,children:[a.jsx(tN,{size:16}),a.jsx("span",{children:t.app.tracker})]}),a.jsxs("button",{onClick:()=>te("planner"),className:`flex items-center gap-2 px-3 py-1.5 rounded-md text-sm font-medium transition-all ${W==="planner"?"bg-primary text-white dark:text-gray-700 shadow-sm":"text-muted hover:text-foreground"}`,children:[a.jsx(OA,{size:16}),a.jsx("span",{children:t.app.planner})]})]})})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{id:"header-settings",onClick:()=>{document.body.classList.contains("tutorial-running")||Jt(!0)},className:"hidden md:block bg-surface hover:bg-surface/80 text-muted hover:text-foreground px-3 py-2 rounded-lg transition-colors text-sm font-medium",children:t.app.settings}),W==="planner"&&a.jsxs("button",{onClick:()=>At(!0),className:"bg-[#E9E1FF] hover:bg-[#DCD0FF] text-[#3F3C47] dark:bg-[#62587D]/70 dark:text-[#D8C9FF] dark:hover:bg-[#62587D]/90 px-3 py-2 rounded-lg transition-colors text-sm font-medium flex items-center gap-1.5",children:[a.jsx(OA,{size:16}),a.jsx("span",{className:"hidden sm:inline",children:t.courseSchedule?.button||"Schedule"})]}),W==="tracker"&&a.jsxs("button",{id:"header-add-course",onClick:()=>{document.body.classList.contains("tutorial-running")||(xr(void 0),As(!0))},className:"hidden md:flex bg-[#303030] hover:!bg-[#8D9CB2] dark:bg-[#EFEFEF] dark:hover:!bg-[#A8C8FA] text-white dark:text-gray-700 px-4 py-2 rounded-lg font-bold shadow-lg shadow-black/20 dark:shadow-white/10 transition-all items-center gap-2",children:[a.jsx(Xr,{size:18})," ",a.jsx("span",{className:"hidden sm:inline",children:t.app.addCourse})]}),a.jsx("div",{className:"hidden md:block h-8 w-[1px] bg-border mx-2"}),a.jsxs("div",{id:"header-data-controls",className:"hidden md:flex items-center",children:[a.jsx("button",{onClick:za,className:"p-2 text-muted hover:text-foreground transition-colors",title:t.app.export,children:a.jsx(Lf,{size:20})}),a.jsxs("label",{className:"p-2 text-muted hover:text-foreground transition-colors cursor-pointer",title:t.app.import,children:[a.jsx(ck,{size:20}),a.jsx("input",{type:"file",ref:ee,onChange:ks,accept:".json",className:"hidden"})]}),!s&&a.jsx("button",{onClick:dr,className:"p-2 text-muted hover:text-danger transition-colors",title:t.app.clear,children:a.jsx(sd,{size:20})})]}),a.jsx("div",{className:"hidden md:block h-8 w-[1px] bg-border mx-2"}),a.jsx("button",{id:"header-history",onClick:()=>Vr(!0),className:"hidden md:block p-2 text-muted hover:text-foreground transition-colors",title:t.updates.title,children:a.jsx(b5,{size:20})}),a.jsx("button",{id:"header-support",onClick:pe=>{pe.preventDefault();const ze=Date.now(),lt=(window._supportIconClicks||[]).filter(Et=>ze-Et<1e3);if(lt.push(ze),window._supportIconClicks=lt,lt.length>=3){window._supportIconClicks=[],mn(!0);return}lt.length===1&&setTimeout(()=>{(window._supportIconClicks||[]).filter(Wt=>Date.now()-Wt<1e3).length<3&&le(!0)},350)},className:"hidden md:block p-2 text-muted hover:text-foreground transition-colors",title:t.support.title,children:a.jsx(eN,{size:20})}),a.jsx("div",{className:"hidden md:block h-8 w-[1px] bg-border mx-2"}),!A&&(s?a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"text-xs font-medium px-2 py-1 rounded-full bg-surface/50 border border-border flex items-center gap-1.5 transition-all",children:[S==="editing"&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"animate-pulse",children:""})," ",a.jsx("span",{className:"hidden sm:inline",children:t.syncState.editing})]}),S==="saving"&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"animate-spin inline-block",children:""})," ",a.jsx("span",{className:"hidden sm:inline",children:t.syncState.saving})]}),S==="synced"&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""})," ",a.jsx("span",{className:"hidden sm:inline",children:t.syncState.synced})]}),S==="idle"&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""})," ",a.jsx("span",{className:"hidden sm:inline",children:t.syncState.idle})]})]}),a.jsxs("div",{className:"relative group/auth",children:[a.jsx("button",{className:"flex w-8 h-8 rounded-full overflow-hidden border border-border shadow-sm hover:ring-2 hover:ring-primary/50 transition-all cursor-pointer",children:s.photoURL?a.jsx("img",{src:s.photoURL,alt:s.displayName||"User",className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full bg-surface flex items-center justify-center text-primary font-bold",children:(s.displayName||s.email||"?").charAt(0).toUpperCase()})}),a.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 bg-background border border-border rounded-xl shadow-xl opacity-0 invisible group-hover/auth:opacity-100 group-hover/auth:visible transition-all duration-200 transform origin-top-right z-50 overflow-hidden",children:[a.jsxs("div",{className:"px-4 py-3 border-b border-border/50 bg-surface/30",children:[a.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:s.displayName||"User"}),a.jsx("p",{className:"text-xs text-muted truncate",children:s.email})]}),a.jsx("button",{onClick:d,className:"w-full text-left px-4 py-2 text-sm text-danger hover:bg-danger/10 transition-colors flex items-center gap-2",children:a.jsx("span",{children:"Logout"})})]})]})]}):a.jsxs("button",{onClick:l,className:"bg-surface hover:bg-surface/80 text-foreground border border-border px-3 py-1.5 rounded-lg text-sm font-medium transition-all shadow-sm flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 rounded-full overflow-hidden flex-shrink-0 bg-white p-0.5",children:a.jsxs("svg",{viewBox:"0 0 48 48",className:"w-full h-full",children:[a.jsx("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}),a.jsx("path",{fill:"#4285F4",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"}),a.jsx("path",{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}),a.jsx("path",{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"}),a.jsx("path",{fill:"none",d:"M0 0h48v48H0z"})]})}),a.jsx("span",{className:"hidden sm:inline",children:"Sign in with Google"}),a.jsx("span",{className:"sm:hidden",children:"Sign in"})]}))]})]})}),a.jsx("main",{className:"w-full px-4 py-8",children:W==="tracker"?a.jsx(mO,{courses:y,semesters:Ut,isEMIStudent:Be==="",graduationCredits:ue,userProfile:Es,onEditCourse:gn,onAddSemester:tt,onFixData:pe=>{Le([pe]),Pt(null)},activeScheduleSemester:O,onViewSchedule:X,onOpenInterdisciplinary:()=>te("interdisciplinary")}):W==="planner"?a.jsx(CO,{semesters:Ut,onAddCourse:Va,onSaveCourses:ha,userProfile:Es,existingCourses:y},K):a.jsx(A6,{theme:J,userProfile:Es,courses:y})}),nr&&a.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-[6000] p-4 pb-24 md:pb-4",children:a.jsxs("div",{className:"bg-background border border-border rounded-xl w-full max-w-md shadow-2xl p-6 relative max-h-[90vh] flex flex-col",children:[a.jsx("button",{onClick:()=>Jt(!1),className:"absolute right-4 top-4 text-muted hover:text-foreground z-10",children:a.jsx(ut,{size:20})}),a.jsx("h2",{className:"text-xl font-bold text-foreground mb-4 shrink-0",children:t.settings.title}),a.jsxs("div",{className:"space-y-4 overflow-y-auto pr-2 custom-scrollbar flex-1 pb-4 md:pb-0",children:[a.jsxs("div",{className:"bg-surface/50 p-3 rounded-lg border border-border/60 space-y-3",children:[a.jsxs("h3",{className:"text-sm font-semibold text-primary flex items-center gap-2",children:[a.jsx(sN,{size:16}),t.settings.profile||"Student Profile"]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-1",children:t.settings.major||"Major / Department"}),a.jsxs("select",{value:Pe,onChange:pe=>Ve(pe.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary appearance-none",children:[a.jsx("option",{value:"",children:t.settings.selectMajor||"Select Department..."}),Xf.map(pe=>a.jsx("optgroup",{label:pe.category,className:"text-primary font-bold bg-surface/80",children:pe.departments.map(ze=>a.jsx("option",{value:ze,className:"text-foreground bg-background",children:ze},ze))},pe.category))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-1",children:t.settings.entranceYear||"Entrance Year (e.g. 113)"}),a.jsx("input",{type:"number",min:"100",max:"120",value:wt,onChange:pe=>Xt(Number(pe.target.value)),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-1",children:t.settings.class||"Class"}),a.jsxs("select",{value:Be,onChange:pe=>ke(pe.target.value),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary appearance-none",children:[a.jsx("option",{value:"-",children:"-"}),a.jsx("option",{value:"",children:t.catalog.class?.shared||"Shared / No Class"}),a.jsx("option",{value:"",children:t.catalog.class?.a||"Class A"}),a.jsx("option",{value:"",children:t.catalog.class?.b||"Class B"}),a.jsx("option",{value:"",children:t.catalog.class?.english||"English Class"})]}),Be===""&&a.jsxs("div",{className:"mt-2 p-2 bg-yellow-500/10 border border-yellow-500/20 rounded-md text-xs text-yellow-500 flex items-center gap-1.5",children:[a.jsx(yx,{size:12}),t.settings.emiHintActive||"EMI Liberal Arts tracking enabled"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted mb-1",children:t.settings.gradCredits}),a.jsx("input",{type:"number",min:"100",max:"200",value:ue,onChange:pe=>L(Number(pe.target.value)),className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),a.jsxs("div",{className:"mt-2 p-2 bg-blue-500/10 border border-blue-500/20 rounded-md text-xs text-blue-400 flex items-start gap-1.5",children:[a.jsx("span",{className:"mt-0.5",children:""}),a.jsx("span",{children:t.settings.profileWarning||"Please ensure your profile is correct to get accurate search results."})]})]}),a.jsx("div",{className:"bg-surface/50 p-3 rounded-lg border border-border/60",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2 text-foreground",children:[a.jsx(V0,{size:18,className:"text-primary"}),a.jsx("span",{className:"font-medium",children:t.settings.language})]}),a.jsxs("div",{className:"flex bg-background/50 rounded-lg p-1 border border-border/60",children:[a.jsx("button",{onClick:()=>e("en"),className:`px-3 py-1 rounded-md text-sm font-medium transition-all ${r==="en"?"bg-primary text-white dark:text-[#303030] shadow":"text-muted hover:text-foreground"}`,children:"English"}),a.jsx("button",{onClick:()=>e("zh"),className:`px-3 py-1 rounded-md text-sm font-medium transition-all ${r==="zh"?"bg-primary text-white dark:text-[#303030] shadow":"text-muted hover:text-foreground"}`,children:""})]})]})}),a.jsx("div",{className:"bg-surface/50 p-3 rounded-lg border border-border/60",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2 text-foreground",children:[J==="dark"?a.jsx(xx,{size:18,className:"text-primary"}):a.jsx(bx,{size:18,className:"text-warning"}),a.jsx("span",{className:"font-medium",children:J==="dark"?t.settings.darkMode:t.settings.lightMode||"Light Mode"})]}),a.jsxs("div",{className:"flex bg-background/50 rounded-lg p-1 border border-border/60",children:[a.jsx("button",{onClick:()=>he("dark"),className:`px-3 py-1 rounded-md text-sm font-medium transition-all ${J==="dark"?"bg-primary text-white dark:text-[#303030] shadow":"text-muted hover:text-foreground"}`,children:a.jsx(xx,{size:14})}),a.jsx("button",{onClick:()=>he("light"),className:`px-3 py-1 rounded-md text-sm font-medium transition-all ${J==="light"?"bg-warning text-black shadow":"text-muted hover:text-foreground"}`,children:a.jsx(bx,{size:14})})]})]})}),s&&a.jsxs("div",{className:"mt-8 border-t border-red-500/20 pt-6 pb-2",children:[a.jsxs("h3",{className:"text-sm font-semibold text-red-500 mb-3 uppercase tracking-wider flex items-center gap-2",children:[a.jsx(sd,{size:16}),r==="zh"?" (Danger Zone)":"Danger Zone"]}),a.jsx("button",{onClick:()=>Q(!0),className:"w-full flex items-center justify-center gap-2 bg-red-500/10 hover:bg-red-500/20 text-red-500 border border-red-500/20 py-2.5 rounded-lg font-medium transition-colors",children:a.jsx("span",{children:r==="zh"?" ":" Delete Cloud Backup & Logout"})})]})]}),a.jsxs("div",{className:"mt-6 flex justify-between items-center pt-4 border-t border-border shrink-0",children:[a.jsxs("button",{onClick:()=>{Jt(!1),Ee()},className:"text-primary hover:text-[#303030] dark:hover:text-[#EFEFEF] font-medium text-sm flex items-center gap-2 hover:bg-primary/10 px-3 py-2 rounded-lg transition-colors",title:t.tutorial.start,children:[a.jsx(yx,{size:16}),t.tutorial.start]}),a.jsx("button",{onClick:()=>Jt(!1),className:"bg-primary hover:bg-[var(--color-primary-hover)] text-white px-6 py-2 rounded-lg font-bold shadow-lg shadow-primary/20 transition-all",children:t.settings.save})]})]})}),Cs&&a.jsx(l6,{onSave:Va,onClose:()=>As(!1),onDelete:$i,initialCourse:pr,userMajor:Pe,theme:J}),cr&&a.jsx(c6,{onClose:()=>Vr(!1)}),Vt&&a.jsx(g6,{onClose:()=>le(!1)}),T&&a.jsx(p6,{theme:J,setTheme:he,onStartTutorial:Ee,onClose:pe=>{pe&&localStorage.setItem("nsysu-last-announcement-ver",xf),_(!1)}}),Xe.length>0&&Nr.length===0&&!T&&!Ae&&a.jsx(x6,{semesterName:Xe[0],availableSemesters:ot,isLoading:!!Se,missingCourses:y.filter(pe=>pe.semester===Xe[0]&&(!pe.room||!pe.teacher||!pe.originalSemester||!pe.department)&&!pe.isExemption&&!pe.isExemption&&pe.category!=="University Way"&&!pe.userLabels?.includes("manual")&&pe.name.includes(`
`)&&/[\u4e00-\u9fa5]/.test(pe.name)&&/[a-zA-Z]/.test(pe.name)).map(pe=>pe.name),onFix:pe=>{Pt(pe),Ke(pe)},onSkip:()=>{const pe=Xe[0],ze=JSON.parse(localStorage.getItem("nsysu-skipped-fixes-v2")||"[]");ze.includes(pe)||localStorage.setItem("nsysu-skipped-fixes-v2",JSON.stringify([...ze,pe])),Le(Ce=>Ce.slice(1))}}),Nr.length>0&&a.jsx(y6,{candidates:Nr[0].candidates,userCourse:Nr[0].userCourse,onSelect:lr,onCancel:()=>{sr(pe=>pe.slice(1)),Nr.length<=1&&Pt(null)}},Nr[0].userCourse.id),ve&&a.jsx(b6,{patchedCount:ve.patched,unmatchedNames:ve.unmatched,onClose:()=>jt(null)}),z&&N&&a.jsx(v6,{existingCount:y.length,onConfirm:()=>{gs(N),E(!1),C(null)},onBackupAndConfirm:async()=>{await za(),gs(N),E(!1),C(null)},onCancel:()=>{E(!1),C(null)}}),U&&a.jsx(w6,{existingCount:y.length,filesCount:M,onConfirm:yr,onBackupAndConfirm:()=>{za(),yr()},onCancel:()=>Y(!1)}),nt&&a.jsx(B6,{onClose:()=>Kt(!1),onGoToSettings:()=>Kt(!0)}),De&&a.jsx(C6,{onClose:()=>At(!1)}),In&&a.jsx(S6,{onClose:()=>mn(!1),onLogin:pe=>{mn(!1),ua(pe),Dn(!0)}}),Ys&&a.jsx(_6,{courses:y,adminId:yl,onClose:()=>{Dn(!1),le(!1)}}),S==="conflict"&&a.jsx(I6,{onResolve:q,conflictTimes:j}),R&&a.jsx(U6,{onDecline:P,onAccept:V,theme:J}),D&&a.jsx(Q6,{onCancel:()=>Q(!1),onConfirm:async()=>{try{await G(),await d(),Q(!1),Jt(!1),window.location.reload()}catch(pe){console.error("Deletion failed:",pe),alert(r==="zh"?"":"Deletion failed. Please check your connection or try again later.")}}}),W==="tracker"&&a.jsx("button",{onClick:()=>{document.body.classList.contains("tutorial-running")||(xr(void 0),As(!0))},className:"md:hidden fixed bottom-20 right-6 z-40 w-14 h-14 bg-primary text-white rounded-full shadow-lg shadow-primary/30 flex items-center justify-center hover:scale-105 active:scale-95 transition-all outline-none focus:outline-none",children:a.jsx(Xr,{size:28,className:"stroke-[2.5px]"})}),a.jsx("footer",{className:"w-full text-center mt-auto pb-24 md:pb-6 pt-6",children:a.jsxs("p",{className:"text-xs text-muted/60 font-medium flex items-center justify-center gap-1",children:[a.jsx("span",{className:"opacity-75",children:" 2026 ClearGrad. "}),a.jsx("span",{className:"hidden sm:inline opacity-50",children:"|"}),a.jsx("span",{className:"block sm:inline opacity-75",children:"Created by "}),a.jsx("span",{className:"hidden sm:inline opacity-50",children:"|"}),a.jsx("span",{className:"block sm:inline opacity-75",children:"Colors by "})]})}),a.jsx(F6,{mode:W,setMode:te,showSettings:nr,setShowSettings:Jt})]})}f_.createRoot(document.getElementById("root")).render(a.jsx(k.StrictMode,{children:a.jsx(m6,{children:a.jsx(_k,{children:a.jsx(Uk,{children:a.jsx(pO,{children:a.jsx(iP,{})})})})})}));
